From fc69905f116e41a724fdde160c83111d22ae8b2e Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Tue, 25 Jul 2017 09:24:57 +1000
Subject: [PATCH 01/12] Log: PE: Ignore optional unfencing events and report
 the fencing type

---
 pengine/allocate.c                                   | 10 +++++++---
 pengine/test10/594.summary                           |  2 +-
 pengine/test10/829.summary                           |  2 +-
 pengine/test10/bug-5186-partial-migrate.summary      |  2 +-
 pengine/test10/bug-cl-5247.summary                   |  2 +-
 pengine/test10/bug-lf-2508.summary                   |  2 +-
 pengine/test10/bug-lf-2551.summary                   |  2 +-
 pengine/test10/bug-lf-2606.summary                   |  2 +-
 pengine/test10/bug-rh-1097457.summary                |  2 +-
 pengine/test10/concurrent-fencing.summary            |  6 +++---
 pengine/test10/guest-node-host-dies.summary          |  6 +++---
 pengine/test10/interleave-pseudo-stop.summary        |  2 +-
 pengine/test10/master-7.summary                      |  2 +-
 pengine/test10/master-8.summary                      |  2 +-
 pengine/test10/migrate-fencing.summary               |  2 +-
 pengine/test10/rec-node-11.summary                   |  2 +-
 pengine/test10/rec-node-12.summary                   |  2 +-
 pengine/test10/rec-node-13.summary                   |  2 +-
 pengine/test10/rec-node-14.summary                   |  6 +++---
 pengine/test10/rec-node-15.summary                   |  2 +-
 pengine/test10/rec-node-2.summary                    |  2 +-
 pengine/test10/rec-node-4.summary                    |  2 +-
 pengine/test10/rec-node-6.summary                    |  2 +-
 pengine/test10/rec-node-7.summary                    |  2 +-
 pengine/test10/rec-rsc-5.summary                     |  2 +-
 pengine/test10/remote-fence-before-reconnect.summary |  2 +-
 pengine/test10/remote-fence-unclean-3.summary        |  2 +-
 pengine/test10/remote-fence-unclean.summary          |  2 +-
 pengine/test10/remote-fence-unclean2.summary         |  2 +-
 pengine/test10/remote-partial-migrate2.summary       |  2 +-
 pengine/test10/remote-recover-all.summary            |  6 +++---
 pengine/test10/remote-recover-connection.summary     |  2 +-
 pengine/test10/remote-recover-fail.summary           |  2 +-
 pengine/test10/remote-recover-no-resources.summary   |  4 ++--
 pengine/test10/remote-recover-unknown.summary        |  6 +++---
 pengine/test10/remote-recovery.summary               |  2 +-
 pengine/test10/remote-unclean2.summary               |  2 +-
 pengine/test10/start-then-stop-with-unfence.summary  |  3 +--
 pengine/test10/stonith-0.summary                     |  4 ++--
 pengine/test10/stonith-1.summary                     |  2 +-
 pengine/test10/stonith-2.summary                     |  2 +-
 pengine/test10/stonith-3.summary                     |  2 +-
 pengine/test10/stonith-4.summary                     |  8 ++++----
 pengine/test10/stop-failure-no-quorum.summary        |  2 +-
 pengine/test10/stop-failure-with-fencing.summary     |  2 +-
 pengine/test10/systemhealth1.summary                 |  4 ++--
 pengine/test10/systemhealth2.summary                 |  2 +-
 pengine/test10/systemhealth3.summary                 |  2 +-
 pengine/test10/systemhealthm1.summary                |  4 ++--
 pengine/test10/systemhealthm2.summary                |  2 +-
 pengine/test10/systemhealthm3.summary                |  2 +-
 pengine/test10/systemhealthn1.summary                |  4 ++--
 pengine/test10/systemhealthn2.summary                |  2 +-
 pengine/test10/systemhealthn3.summary                |  2 +-
 pengine/test10/systemhealtho1.summary                |  4 ++--
 pengine/test10/systemhealtho2.summary                |  2 +-
 pengine/test10/systemhealtho3.summary                |  2 +-
 pengine/test10/systemhealthp1.summary                |  4 ++--
 pengine/test10/systemhealthp2.summary                |  2 +-
 pengine/test10/systemhealthp3.summary                |  2 +-
 pengine/test10/ticket-clone-21.summary               |  4 ++--
 pengine/test10/ticket-clone-9.summary                |  4 ++--
 pengine/test10/ticket-group-21.summary               |  2 +-
 pengine/test10/ticket-group-9.summary                |  2 +-
 pengine/test10/ticket-master-21.summary              |  2 +-
 pengine/test10/ticket-master-9.summary               |  2 +-
 pengine/test10/ticket-primitive-21.summary           |  2 +-
 pengine/test10/ticket-primitive-9.summary            |  2 +-
 pengine/test10/unfence-definition.summary            |  8 +++-----
 pengine/test10/unfence-parameters.summary            |  9 ++++-----
 pengine/test10/unfence-startup.summary               |  7 ++-----
 pengine/test10/whitebox-fail1.summary                |  2 +-
 pengine/test10/whitebox-fail2.summary                |  2 +-
 pengine/test10/whitebox-imply-stop-on-fence.summary  |  6 +++---
 pengine/test10/whitebox-ms-ordering.summary          |  4 ++--
 pengine/test10/whitebox-unexpectedly-running.summary |  2 +-
 76 files changed, 113 insertions(+), 116 deletions(-)

diff --git a/pengine/allocate.c b/pengine/allocate.c
index 3a883ad..8ea2ea1 100644
--- a/pengine/allocate.c
+++ b/pengine/allocate.c
@@ -2419,11 +2419,13 @@ LogNodeActions(pe_working_set_t * data_set, gboolean terminal)
 
     for (gIter = data_set->actions; gIter != NULL; gIter = gIter->next) {
         char *node_name = NULL;
-        const char *task = NULL;
+        char *task = NULL;
         action_t *action = (action_t *) gIter->data;
 
         if (action->rsc != NULL) {
             continue;
+        } else if (is_set(action->flags, pe_action_optional)) {
+            continue;
         }
 
         if (is_container_remote_node(action->node)) {
@@ -2433,9 +2435,10 @@ LogNodeActions(pe_working_set_t * data_set, gboolean terminal)
         }
 
         if (safe_str_eq(action->task, CRM_OP_SHUTDOWN)) {
-            task = "Shutdown";
+            task = strdup("Shutdown");
         } else if (safe_str_eq(action->task, CRM_OP_FENCE)) {
-            task = "Fence";
+            const char *op = g_hash_table_lookup(action->meta, "stonith_action");
+            task = crm_strdup_printf("Fence (%s)", op);
         }
 
         if(task == NULL) {
@@ -2447,6 +2450,7 @@ LogNodeActions(pe_working_set_t * data_set, gboolean terminal)
         }
 
         free(node_name);
+        free(task);
     }
 }
 
diff --git a/pengine/test10/594.summary b/pengine/test10/594.summary
index d9fe8c1..ef2a02c 100644
--- a/pengine/test10/594.summary
+++ b/pengine/test10/594.summary
@@ -13,7 +13,7 @@ Online: [ hadev1 hadev2 ]
      child_DoFencing:2	(stonith:ssh):	Started hadev1
 
 Transition Summary:
- * Fence hadev3
+ * Fence (reboot) hadev3
  * Shutdown hadev2
  * Move    DcIPaddr	(Started hadev2 -> hadev1)
  * Move    rsc_hadev2	(Started hadev2 -> hadev1)
diff --git a/pengine/test10/829.summary b/pengine/test10/829.summary
index a9d25e0..556699f 100644
--- a/pengine/test10/829.summary
+++ b/pengine/test10/829.summary
@@ -15,7 +15,7 @@ Online: [ c001n01 c001n03 c001n08 ]
      child_DoFencing:3	(stonith:ssh):	Started c001n08
 
 Transition Summary:
- * Fence c001n02
+ * Fence (reboot) c001n02
  * Move    rsc_c001n02	(Started c001n02 -> c001n01)
  * Stop    child_DoFencing:0	(c001n02)
 
diff --git a/pengine/test10/bug-5186-partial-migrate.summary b/pengine/test10/bug-5186-partial-migrate.summary
index 63ed2d7..a32e81d 100644
--- a/pengine/test10/bug-5186-partial-migrate.summary
+++ b/pengine/test10/bug-5186-partial-migrate.summary
@@ -25,7 +25,7 @@ Online: [ bl460g1n6 bl460g1n8 ]
      Started: [ bl460g1n6 bl460g1n8 ]
 
 Transition Summary:
- * Fence bl460g1n7
+ * Fence (reboot) bl460g1n7
  * Move    prmDummy	(Started bl460g1n7 -> bl460g1n6)
  * Move    prmVM2	(Started bl460g1n7 -> bl460g1n8)
  * Move    prmStonith8-1	(Started bl460g1n7 -> bl460g1n6)
diff --git a/pengine/test10/bug-cl-5247.summary b/pengine/test10/bug-cl-5247.summary
index 8ea3ff0..f70a9ea 100644
--- a/pengine/test10/bug-cl-5247.summary
+++ b/pengine/test10/bug-cl-5247.summary
@@ -18,7 +18,7 @@ Containers: [ pgsr01:prmDB1 ]
      Stopped: [ bl460g8n3 bl460g8n4 ]
 
 Transition Summary:
- * Fence pgsr02 (resource: prmDB2)
+ * Fence (off) pgsr02 (resource: prmDB2)
  * Stop    prmDB2	(bl460g8n4)
  * Restart prmStonith1-2	(Started bl460g8n4)
  * Restart prmStonith2-2	(Started bl460g8n3)
diff --git a/pengine/test10/bug-lf-2508.summary b/pengine/test10/bug-lf-2508.summary
index 7b436d4..7931d19 100644
--- a/pengine/test10/bug-lf-2508.summary
+++ b/pengine/test10/bug-lf-2508.summary
@@ -35,7 +35,7 @@ Online: [ srv01 srv03 srv04 ]
      Stopped: [ srv04 ]
 
 Transition Summary:
- * Fence srv02
+ * Fence (reboot) srv02
  * Start   Dummy01	(srv01)
  * Move    Dummy02	(Started srv02 -> srv04)
  * Stop    prmStonith1-1:1	(srv02)
diff --git a/pengine/test10/bug-lf-2551.summary b/pengine/test10/bug-lf-2551.summary
index ffb7c6d..ef2e54a 100644
--- a/pengine/test10/bug-lf-2551.summary
+++ b/pengine/test10/bug-lf-2551.summary
@@ -81,7 +81,7 @@ Online: [ hex-0 hex-7 hex-8 ]
  vm-64	(ocf::heartbeat:Xen):	Stopped 
 
 Transition Summary:
- * Fence hex-9
+ * Fence (reboot) hex-9
  * Move    fencing-sbd	(Started hex-9 -> hex-0)
  * Move    dummy1	(Started hex-9 -> hex-0)
  * Stop    dlm:3	(hex-9)
diff --git a/pengine/test10/bug-lf-2606.summary b/pengine/test10/bug-lf-2606.summary
index ab93bb3..f30a053 100644
--- a/pengine/test10/bug-lf-2606.summary
+++ b/pengine/test10/bug-lf-2606.summary
@@ -12,7 +12,7 @@ Online: [ node1 ]
      Slaves: [ node1 ]
 
 Transition Summary:
- * Fence node2
+ * Fence (reboot) node2
  * Stop    rsc1	(node2)
  * Move    rsc2	(Started node2 -> node1)
  * Demote  rsc3:1	(Master -> Stopped node2)
diff --git a/pengine/test10/bug-rh-1097457.summary b/pengine/test10/bug-rh-1097457.summary
index 8fe474a..1c355c0 100644
--- a/pengine/test10/bug-rh-1097457.summary
+++ b/pengine/test10/bug-rh-1097457.summary
@@ -32,7 +32,7 @@ Containers: [ lamaVM1:VM1 lamaVM2:VM2 lamaVM3:VM3 ]
      Started: [ lamaVM1 lamaVM2 lamaVM3 ]
 
 Transition Summary:
- * Fence lamaVM2 (resource: VM2)
+ * Fence (reboot) lamaVM2 (resource: VM2)
  * Recover VM2	(Started lama3)
  * Recover FSlun3	(Started lamaVM2 -> lama2)
  * Restart FAKE4	(Started lamaVM2)
diff --git a/pengine/test10/concurrent-fencing.summary b/pengine/test10/concurrent-fencing.summary
index a274c3b..1e4a817 100644
--- a/pengine/test10/concurrent-fencing.summary
+++ b/pengine/test10/concurrent-fencing.summary
@@ -8,9 +8,9 @@ Node node3 (uuid3): UNCLEAN (offline)
  lsb_dummy	(lsb:/usr/lib/heartbeat/cts/LSBDummy):	Stopped
 
 Transition Summary:
- * Fence node3
- * Fence node2
- * Fence node1
+ * Fence (reboot) node3
+ * Fence (reboot) node2
+ * Fence (reboot) node1
 
 Executing cluster transition:
  * Fencing node3 (reboot)
diff --git a/pengine/test10/guest-node-host-dies.summary b/pengine/test10/guest-node-host-dies.summary
index 717c43d..9f85613 100644
--- a/pengine/test10/guest-node-host-dies.summary
+++ b/pengine/test10/guest-node-host-dies.summary
@@ -11,9 +11,9 @@ Online: [ rhel7-2 rhel7-3 rhel7-4 rhel7-5 ]
      Stopped: [ rhel7-1 rhel7-2 rhel7-3 rhel7-4 rhel7-5 ]
 
 Transition Summary:
- * Fence rhel7-1
- * Fence lxc2 (resource: container2)
- * Fence lxc1 (resource: container1)
+ * Fence (reboot) rhel7-1
+ * Fence (reboot) lxc2 (resource: container2)
+ * Fence (reboot) lxc1 (resource: container1)
  * Restart Fencing	(Started rhel7-4)
  * Move    rsc_rhel7-1	(Started rhel7-1 -> rhel7-5)
  * Recover container1	(Started rhel7-1 -> rhel7-2)
diff --git a/pengine/test10/interleave-pseudo-stop.summary b/pengine/test10/interleave-pseudo-stop.summary
index cf30da0..12be956 100644
--- a/pengine/test10/interleave-pseudo-stop.summary
+++ b/pengine/test10/interleave-pseudo-stop.summary
@@ -17,7 +17,7 @@ Online: [ node2 ]
      Started: [ node2 ]
 
 Transition Summary:
- * Fence node1
+ * Fence (reboot) node1
  * Stop    stonithclone:1	(node1)
  * Stop    evmsclone:1	(node1)
  * Stop    imagestoreclone:1	(node1)
diff --git a/pengine/test10/master-7.summary b/pengine/test10/master-7.summary
index 348b4ee..2889efb 100644
--- a/pengine/test10/master-7.summary
+++ b/pengine/test10/master-7.summary
@@ -29,7 +29,7 @@ Online: [ c001n02 c001n03 c001n08 ]
      ocf_msdummy:7	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n08 
 
 Transition Summary:
- * Fence c001n01
+ * Fence (reboot) c001n01
  * Move    DcIPaddr	(Started c001n01 -> c001n03)
  * Move    ocf_192.168.100.181	(Started c001n03 -> c001n02)
  * Move    heartbeat_192.168.100.182	(Started c001n03 -> c001n02)
diff --git a/pengine/test10/master-8.summary b/pengine/test10/master-8.summary
index b77c884..5968a25 100644
--- a/pengine/test10/master-8.summary
+++ b/pengine/test10/master-8.summary
@@ -29,7 +29,7 @@ Online: [ c001n02 c001n03 c001n08 ]
      ocf_msdummy:7	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n08 
 
 Transition Summary:
- * Fence c001n01
+ * Fence (reboot) c001n01
  * Move    DcIPaddr	(Started c001n01 -> c001n03)
  * Move    ocf_192.168.100.181	(Started c001n03 -> c001n02)
  * Move    heartbeat_192.168.100.182	(Started c001n03 -> c001n02)
diff --git a/pengine/test10/migrate-fencing.summary b/pengine/test10/migrate-fencing.summary
index 831e49a..842c65d 100644
--- a/pengine/test10/migrate-fencing.summary
+++ b/pengine/test10/migrate-fencing.summary
@@ -22,7 +22,7 @@ Online: [ pcmk-1 pcmk-2 pcmk-3 ]
      Slaves: [ pcmk-1 pcmk-2 pcmk-3 ]
 
 Transition Summary:
- * Fence pcmk-4
+ * Fence (reboot) pcmk-4
  * Stop    FencingChild:0	(pcmk-4)
  * Move    r192.168.101.181	(Started pcmk-4 -> pcmk-1)
  * Move    r192.168.101.182	(Started pcmk-4 -> pcmk-1)
diff --git a/pengine/test10/rec-node-11.summary b/pengine/test10/rec-node-11.summary
index eb967dd..22f5af7 100644
--- a/pengine/test10/rec-node-11.summary
+++ b/pengine/test10/rec-node-11.summary
@@ -10,7 +10,7 @@ Online: [ node2 ]
  rsc3	(heartbeat:apache):	Started node2
 
 Transition Summary:
- * Fence node1
+ * Fence (reboot) node1
  * Start   stonith-1	(node2)
  * Move    rsc1	(Started node1 -> node2)
  * Move    rsc2	(Started node1 -> node2)
diff --git a/pengine/test10/rec-node-12.summary b/pengine/test10/rec-node-12.summary
index 26f9b13..6316fdb 100644
--- a/pengine/test10/rec-node-12.summary
+++ b/pengine/test10/rec-node-12.summary
@@ -15,7 +15,7 @@ Online: [ c001n01 c001n03 c001n08 ]
      child_DoFencing:3	(stonith:ssh):	Stopped 
 
 Transition Summary:
- * Fence c001n02
+ * Fence (reboot) c001n02
  * Start   DcIPaddr	(c001n08)
  * Start   rsc_c001n08	(c001n08)
  * Start   rsc_c001n02	(c001n01)
diff --git a/pengine/test10/rec-node-13.summary b/pengine/test10/rec-node-13.summary
index e273a79..c222ad8 100644
--- a/pengine/test10/rec-node-13.summary
+++ b/pengine/test10/rec-node-13.summary
@@ -34,7 +34,7 @@ OFFLINE: [ c001n03 c001n05 ]
      ocf_msdummy:11	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n07 
 
 Transition Summary:
- * Fence c001n04
+ * Fence (reboot) c001n04
  * Stop    ocf_msdummy:6	(c001n04)
 
 Executing cluster transition:
diff --git a/pengine/test10/rec-node-14.summary b/pengine/test10/rec-node-14.summary
index 532f3d9..f503a92 100644
--- a/pengine/test10/rec-node-14.summary
+++ b/pengine/test10/rec-node-14.summary
@@ -8,9 +8,9 @@ Node node3 (uuid3): UNCLEAN (offline)
  lsb_dummy	(lsb:/usr/lib/heartbeat/cts/LSBDummy):	Stopped 
 
 Transition Summary:
- * Fence node3
- * Fence node2
- * Fence node1
+ * Fence (reboot) node3
+ * Fence (reboot) node2
+ * Fence (reboot) node1
 
 Executing cluster transition:
  * Fencing node1 (reboot)
diff --git a/pengine/test10/rec-node-15.summary b/pengine/test10/rec-node-15.summary
index 8d88680..2f706d2 100644
--- a/pengine/test10/rec-node-15.summary
+++ b/pengine/test10/rec-node-15.summary
@@ -21,7 +21,7 @@ Online: [ sapcl01 ]
      oralsnr_25	(ocf::heartbeat:oralsnr):	Stopped 
 
 Transition Summary:
- * Fence sapcl03
+ * Fence (reboot) sapcl03
  * Start   stonith-1	(sapcl01)
  * Move    IPaddr_192_168_1_102	(Started sapcl02 -> sapcl01)
  * Move    LVM_12	(Started sapcl02 -> sapcl01)
diff --git a/pengine/test10/rec-node-2.summary b/pengine/test10/rec-node-2.summary
index 5c8db02..0e0183f 100644
--- a/pengine/test10/rec-node-2.summary
+++ b/pengine/test10/rec-node-2.summary
@@ -14,7 +14,7 @@ Online: [ node2 ]
      rsc6	(heartbeat:apache):	Stopped 
 
 Transition Summary:
- * Fence node1
+ * Fence (reboot) node1
  * Start   stonith-1	(node2)
  * Start   rsc1	(node2)
  * Start   rsc2	(node2)
diff --git a/pengine/test10/rec-node-4.summary b/pengine/test10/rec-node-4.summary
index 761573f..0a2606e 100644
--- a/pengine/test10/rec-node-4.summary
+++ b/pengine/test10/rec-node-4.summary
@@ -8,7 +8,7 @@ Online: [ node2 ]
  rsc2	(heartbeat:apache):	Started node1 (UNCLEAN)
 
 Transition Summary:
- * Fence node1
+ * Fence (reboot) node1
  * Start   stonith-1	(node2)
  * Move    rsc1	(Started node1 -> node2)
  * Move    rsc2	(Started node1 -> node2)
diff --git a/pengine/test10/rec-node-6.summary b/pengine/test10/rec-node-6.summary
index fb294fb..530c7d2 100644
--- a/pengine/test10/rec-node-6.summary
+++ b/pengine/test10/rec-node-6.summary
@@ -8,7 +8,7 @@ Online: [ node2 ]
  rsc2	(heartbeat:apache):	Started node1
 
 Transition Summary:
- * Fence node1
+ * Fence (reboot) node1
  * Start   stonith-1	(node2)
  * Move    rsc1	(Started node1 -> node2)
  * Move    rsc2	(Started node1 -> node2)
diff --git a/pengine/test10/rec-node-7.summary b/pengine/test10/rec-node-7.summary
index 761573f..0a2606e 100644
--- a/pengine/test10/rec-node-7.summary
+++ b/pengine/test10/rec-node-7.summary
@@ -8,7 +8,7 @@ Online: [ node2 ]
  rsc2	(heartbeat:apache):	Started node1 (UNCLEAN)
 
 Transition Summary:
- * Fence node1
+ * Fence (reboot) node1
  * Start   stonith-1	(node2)
  * Move    rsc1	(Started node1 -> node2)
  * Move    rsc2	(Started node1 -> node2)
diff --git a/pengine/test10/rec-rsc-5.summary b/pengine/test10/rec-rsc-5.summary
index 7bcb1a3..c3e658a 100644
--- a/pengine/test10/rec-rsc-5.summary
+++ b/pengine/test10/rec-rsc-5.summary
@@ -8,7 +8,7 @@ Online: [ node1 ]
  rsc2	(heartbeat:apache):	Started node2
 
 Transition Summary:
- * Fence node2
+ * Fence (reboot) node2
  * Start   stonith-1	(node1)
  * Recover rsc1	(Started node2 -> node1)
  * Move    rsc2	(Started node2 -> node1)
diff --git a/pengine/test10/remote-fence-before-reconnect.summary b/pengine/test10/remote-fence-before-reconnect.summary
index 520f5cf..2ce3315 100644
--- a/pengine/test10/remote-fence-before-reconnect.summary
+++ b/pengine/test10/remote-fence-before-reconnect.summary
@@ -12,7 +12,7 @@ Online: [ c7auto1 c7auto2 c7auto3 ]
  fake5	(ocf::heartbeat:Dummy):	Started c7auto3
 
 Transition Summary:
- * Fence c7auto4
+ * Fence (reboot) c7auto4
  * Stop    c7auto4	(c7auto1)
  * Move    fake2	(Started c7auto4 -> c7auto1)
 
diff --git a/pengine/test10/remote-fence-unclean-3.summary b/pengine/test10/remote-fence-unclean-3.summary
index ec24500..9296add 100644
--- a/pengine/test10/remote-fence-unclean-3.summary
+++ b/pengine/test10/remote-fence-unclean-3.summary
@@ -34,7 +34,7 @@ Containers: [ galera-bundle-0:galera-bundle-docker-0 galera-bundle-1:galera-bund
    openstack-cinder-backup-docker-0	(ocf::heartbeat:docker):	Started overcloud-controller-1
 
 Transition Summary:
- * Fence overcloud-novacompute-0
+ * Fence (reboot) overcloud-novacompute-0
  * Start   fence1	(overcloud-controller-0)
  * Stop    overcloud-novacompute-0	(overcloud-controller-0)
 
diff --git a/pengine/test10/remote-fence-unclean.summary b/pengine/test10/remote-fence-unclean.summary
index 06940fc..667549b 100644
--- a/pengine/test10/remote-fence-unclean.summary
+++ b/pengine/test10/remote-fence-unclean.summary
@@ -11,7 +11,7 @@ Online: [ 18builder 18node1 18node2 ]
  FAKE4	(ocf::heartbeat:Dummy):	Started 18node1 
 
 Transition Summary:
- * Fence remote1
+ * Fence (reboot) remote1
  * Recover remote1	(Started 18node1)
  * Move    FAKE2	(Started remote1 -> 18builder)
  * Move    FAKE3	(Started 18builder -> 18node1)
diff --git a/pengine/test10/remote-fence-unclean2.summary b/pengine/test10/remote-fence-unclean2.summary
index 96f5d69..0844c29 100644
--- a/pengine/test10/remote-fence-unclean2.summary
+++ b/pengine/test10/remote-fence-unclean2.summary
@@ -10,7 +10,7 @@ OFFLINE: [ rhel7-alt3 ]
  fake	(ocf::heartbeat:Dummy):	Started rhel7-alt4 (UNCLEAN)
 
 Transition Summary:
- * Fence rhel7-alt4
+ * Fence (reboot) rhel7-alt4
  * Stop    fake	(rhel7-alt4)
 
 Executing cluster transition:
diff --git a/pengine/test10/remote-partial-migrate2.summary b/pengine/test10/remote-partial-migrate2.summary
index 197bd8c..b8b9b4c 100644
--- a/pengine/test10/remote-partial-migrate2.summary
+++ b/pengine/test10/remote-partial-migrate2.summary
@@ -63,7 +63,7 @@ RemoteOFFLINE: [ pcmk_remote4 ]
  FAKE50	(ocf::heartbeat:Dummy):	Started pcmk_remote5 
 
 Transition Summary:
- * Fence pcmk4
+ * Fence (reboot) pcmk4
  * Migrate pcmk_remote2	(Started pcmk3 -> pcmk1)
  * Start   pcmk_remote4	(pcmk2)
  * Migrate pcmk_remote5	(Started pcmk1 -> pcmk2)
diff --git a/pengine/test10/remote-recover-all.summary b/pengine/test10/remote-recover-all.summary
index 3f29f70..5e4f51d 100644
--- a/pengine/test10/remote-recover-all.summary
+++ b/pengine/test10/remote-recover-all.summary
@@ -38,9 +38,9 @@ RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
  stonith-fence_ipmilan-5254005bdbb5	(stonith:fence_ipmilan):	Started controller-1 (UNCLEAN)
 
 Transition Summary:
- * Fence messaging-1
- * Fence galera-2
- * Fence controller-1
+ * Fence (reboot) messaging-1
+ * Fence (reboot) galera-2
+ * Fence (reboot) controller-1
  * Stop    messaging-1	(controller-1)
  * Move    galera-0	(Started controller-1 -> controller-2)
  * Stop    galera-2	(controller-1)
diff --git a/pengine/test10/remote-recover-connection.summary b/pengine/test10/remote-recover-connection.summary
index 43507af..79ea7da 100644
--- a/pengine/test10/remote-recover-connection.summary
+++ b/pengine/test10/remote-recover-connection.summary
@@ -38,7 +38,7 @@ RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
  stonith-fence_ipmilan-5254005bdbb5	(stonith:fence_ipmilan):	Started controller-1 (UNCLEAN)
 
 Transition Summary:
- * Fence controller-1
+ * Fence (reboot) controller-1
  * Move    messaging-1	(Started controller-1 -> controller-2)
  * Move    galera-0	(Started controller-1 -> controller-2)
  * Move    galera-2	(Started controller-1 -> controller-2)
diff --git a/pengine/test10/remote-recover-fail.summary b/pengine/test10/remote-recover-fail.summary
index ec2d701..313c8ac 100644
--- a/pengine/test10/remote-recover-fail.summary
+++ b/pengine/test10/remote-recover-fail.summary
@@ -14,7 +14,7 @@ OFFLINE: [ rhel7-auto1 ]
  FAKE6	(ocf::heartbeat:Dummy):	Started rhel7-auto4 (UNCLEAN)
 
 Transition Summary:
- * Fence rhel7-auto4
+ * Fence (reboot) rhel7-auto4
  * Recover rhel7-auto4	(Started rhel7-auto2)
  * Start   FAKE1	(rhel7-auto2)
  * Move    FAKE2	(Started rhel7-auto4 -> rhel7-auto3)
diff --git a/pengine/test10/remote-recover-no-resources.summary b/pengine/test10/remote-recover-no-resources.summary
index 48355a4..bd27773 100644
--- a/pengine/test10/remote-recover-no-resources.summary
+++ b/pengine/test10/remote-recover-no-resources.summary
@@ -38,8 +38,8 @@ RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
  stonith-fence_ipmilan-5254005bdbb5	(stonith:fence_ipmilan):	Started controller-1 (UNCLEAN)
 
 Transition Summary:
- * Fence messaging-1
- * Fence controller-1
+ * Fence (reboot) messaging-1
+ * Fence (reboot) controller-1
  * Stop    messaging-1	(controller-1)
  * Move    galera-0	(Started controller-1 -> controller-2)
  * Stop    galera-2	(controller-1)
diff --git a/pengine/test10/remote-recover-unknown.summary b/pengine/test10/remote-recover-unknown.summary
index 212af4e..8a3d560 100644
--- a/pengine/test10/remote-recover-unknown.summary
+++ b/pengine/test10/remote-recover-unknown.summary
@@ -38,9 +38,9 @@ RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
  stonith-fence_ipmilan-5254005bdbb5	(stonith:fence_ipmilan):	Started controller-1 (UNCLEAN)
 
 Transition Summary:
- * Fence messaging-1
- * Fence galera-2
- * Fence controller-1
+ * Fence (reboot) messaging-1
+ * Fence (reboot) galera-2
+ * Fence (reboot) controller-1
  * Stop    messaging-1	(controller-1)
  * Move    galera-0	(Started controller-1 -> controller-2)
  * Stop    galera-2	(controller-1)
diff --git a/pengine/test10/remote-recovery.summary b/pengine/test10/remote-recovery.summary
index 43507af..79ea7da 100644
--- a/pengine/test10/remote-recovery.summary
+++ b/pengine/test10/remote-recovery.summary
@@ -38,7 +38,7 @@ RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
  stonith-fence_ipmilan-5254005bdbb5	(stonith:fence_ipmilan):	Started controller-1 (UNCLEAN)
 
 Transition Summary:
- * Fence controller-1
+ * Fence (reboot) controller-1
  * Move    messaging-1	(Started controller-1 -> controller-2)
  * Move    galera-0	(Started controller-1 -> controller-2)
  * Move    galera-2	(Started controller-1 -> controller-2)
diff --git a/pengine/test10/remote-unclean2.summary b/pengine/test10/remote-unclean2.summary
index ad4af90..877eb4d 100644
--- a/pengine/test10/remote-unclean2.summary
+++ b/pengine/test10/remote-unclean2.summary
@@ -7,7 +7,7 @@ Online: [ rhel7-auto1 rhel7-auto2 rhel7-auto3 ]
  rhel7-auto4	(ocf::pacemaker:remote):	FAILED rhel7-auto1 
 
 Transition Summary:
- * Fence rhel7-auto4
+ * Fence (reboot) rhel7-auto4
  * Recover rhel7-auto4	(Started rhel7-auto1)
 
 Executing cluster transition:
diff --git a/pengine/test10/start-then-stop-with-unfence.summary b/pengine/test10/start-then-stop-with-unfence.summary
index 4430cc0..ae54afc 100644
--- a/pengine/test10/start-then-stop-with-unfence.summary
+++ b/pengine/test10/start-then-stop-with-unfence.summary
@@ -11,8 +11,7 @@ Online: [ rhel7-node1.example.com rhel7-node2.example.com ]
      Stopped: [ rhel7-node1.example.com ]
 
 Transition Summary:
- * Fence rhel7-node2.example.com
- * Fence rhel7-node1.example.com
+ * Fence (on) rhel7-node1.example.com
  * Start   mpath-node1	(rhel7-node1.example.com)
  * Move    ip1	(Started rhel7-node2.example.com -> rhel7-node1.example.com)
  * Start   jrummy:1	(rhel7-node1.example.com)
diff --git a/pengine/test10/stonith-0.summary b/pengine/test10/stonith-0.summary
index 24008a1..ee8ae15 100644
--- a/pengine/test10/stonith-0.summary
+++ b/pengine/test10/stonith-0.summary
@@ -37,8 +37,8 @@ Online: [ c001n02 c001n04 c001n06 c001n07 c001n08 ]
      ocf_msdummy:13	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n06 
 
 Transition Summary:
- * Fence c001n05
- * Fence c001n03
+ * Fence (reboot) c001n05
+ * Fence (reboot) c001n03
  * Move    ocf_192.168.100.181	(Started c001n03 -> c001n02)
  * Move    heartbeat_192.168.100.182	(Started c001n03 -> c001n02)
  * Recover ocf_192.168.100.183	(Started c001n03 -> c001n02)
diff --git a/pengine/test10/stonith-1.summary b/pengine/test10/stonith-1.summary
index 8556021..b68aca7 100644
--- a/pengine/test10/stonith-1.summary
+++ b/pengine/test10/stonith-1.summary
@@ -28,7 +28,7 @@ Online: [ sles-1 sles-2 sles-4 ]
      ocf_msdummy:7	(ocf::heartbeat:Stateful):	Stopped 
 
 Transition Summary:
- * Fence sles-3
+ * Fence (reboot) sles-3
  * Start   r192.168.100.183	(sles-1)
  * Move    migrator	(Started sles-3 -> sles-4)
  * Move    rsc_sles-3	(Started sles-3 -> sles-4)
diff --git a/pengine/test10/stonith-2.summary b/pengine/test10/stonith-2.summary
index 0f7cb99..eef35c4 100644
--- a/pengine/test10/stonith-2.summary
+++ b/pengine/test10/stonith-2.summary
@@ -33,7 +33,7 @@ Online: [ sles-1 sles-2 sles-3 sles-4 sles-6 ]
      ocf_msdummy:11	(ocf::heartbeat:Stateful):	Slave sles-3 
 
 Transition Summary:
- * Fence sles-5
+ * Fence (reboot) sles-5
  * Start   rsc_sles-5	(sles-6)
 
 Executing cluster transition:
diff --git a/pengine/test10/stonith-3.summary b/pengine/test10/stonith-3.summary
index cb25cc3..398b6bc 100644
--- a/pengine/test10/stonith-3.summary
+++ b/pengine/test10/stonith-3.summary
@@ -8,7 +8,7 @@ Online: [ rh5node2 ]
      Stopped: [ rh5node1 rh5node2 ]
 
 Transition Summary:
- * Fence rh5node1
+ * Fence (reboot) rh5node1
  * Start   prmIpPostgreSQLDB	(rh5node2)
  * Start   prmStonith:0	(rh5node2)
 
diff --git a/pengine/test10/stonith-4.summary b/pengine/test10/stonith-4.summary
index dc7cd89..6e3e396 100644
--- a/pengine/test10/stonith-4.summary
+++ b/pengine/test10/stonith-4.summary
@@ -14,10 +14,10 @@ OFFLINE: [ pcmk-4 pcmk-6 ]
  Fencing	(stonith:fence_xvm):	Stopped 
 
 Transition Summary:
- * Fence pcmk-8
- * Fence pcmk-7
- * Fence pcmk-5
- * Fence pcmk-10
+ * Fence (reboot) pcmk-8
+ * Fence (reboot) pcmk-7
+ * Fence (reboot) pcmk-5
+ * Fence (reboot) pcmk-10
  * Start   Fencing	(pcmk-1 - blocked)
 
 Executing cluster transition:
diff --git a/pengine/test10/stop-failure-no-quorum.summary b/pengine/test10/stop-failure-no-quorum.summary
index d864f1a..0248126 100644
--- a/pengine/test10/stop-failure-no-quorum.summary
+++ b/pengine/test10/stop-failure-no-quorum.summary
@@ -15,7 +15,7 @@ Online: [ pcmk-1 ]
  Fencing	(stonith:fence_xvm):	Stopped 
 
 Transition Summary:
- * Fence pcmk-2
+ * Fence (reboot) pcmk-2
  * Start   dlm:0	(pcmk-1 - blocked)
  * Stop    clvm:0	(pcmk-2)
  * Start   clvm:2	(pcmk-1 - blocked)
diff --git a/pengine/test10/stop-failure-with-fencing.summary b/pengine/test10/stop-failure-with-fencing.summary
index e01b6c4..e6c296b 100644
--- a/pengine/test10/stop-failure-with-fencing.summary
+++ b/pengine/test10/stop-failure-with-fencing.summary
@@ -14,7 +14,7 @@ Online: [ pcmk-1 ]
  Fencing	(stonith:fence_xvm):	Stopped 
 
 Transition Summary:
- * Fence pcmk-2
+ * Fence (reboot) pcmk-2
  * Start   dlm:0	(pcmk-1 - blocked)
  * Stop    clvm:0	(pcmk-2)
  * Start   clvm:1	(pcmk-1 - blocked)
diff --git a/pengine/test10/systemhealth1.summary b/pengine/test10/systemhealth1.summary
index 37b0b49..7301c6c 100644
--- a/pengine/test10/systemhealth1.summary
+++ b/pengine/test10/systemhealth1.summary
@@ -8,8 +8,8 @@ Node hs21d (737318c6-0f92-4592-9754-45967d45aff7): UNCLEAN (offline)
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
 Transition Summary:
- * Fence hs21d
- * Fence hs21c
+ * Fence (reboot) hs21d
+ * Fence (reboot) hs21c
 
 Executing cluster transition:
  * Fencing hs21d (reboot)
diff --git a/pengine/test10/systemhealth2.summary b/pengine/test10/systemhealth2.summary
index a37ce18..c83a7e2 100644
--- a/pengine/test10/systemhealth2.summary
+++ b/pengine/test10/systemhealth2.summary
@@ -8,7 +8,7 @@ Online: [ hs21c ]
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
 Transition Summary:
- * Fence hs21d
+ * Fence (reboot) hs21d
  * Start   stonith-1	(hs21c)
  * Start   apache_1	(hs21c)
  * Start   nfs_1	(hs21c)
diff --git a/pengine/test10/systemhealth3.summary b/pengine/test10/systemhealth3.summary
index a37ce18..c83a7e2 100644
--- a/pengine/test10/systemhealth3.summary
+++ b/pengine/test10/systemhealth3.summary
@@ -8,7 +8,7 @@ Online: [ hs21c ]
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
 Transition Summary:
- * Fence hs21d
+ * Fence (reboot) hs21d
  * Start   stonith-1	(hs21c)
  * Start   apache_1	(hs21c)
  * Start   nfs_1	(hs21c)
diff --git a/pengine/test10/systemhealthm1.summary b/pengine/test10/systemhealthm1.summary
index 37b0b49..7301c6c 100644
--- a/pengine/test10/systemhealthm1.summary
+++ b/pengine/test10/systemhealthm1.summary
@@ -8,8 +8,8 @@ Node hs21d (737318c6-0f92-4592-9754-45967d45aff7): UNCLEAN (offline)
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
 Transition Summary:
- * Fence hs21d
- * Fence hs21c
+ * Fence (reboot) hs21d
+ * Fence (reboot) hs21c
 
 Executing cluster transition:
  * Fencing hs21d (reboot)
diff --git a/pengine/test10/systemhealthm2.summary b/pengine/test10/systemhealthm2.summary
index a37ce18..c83a7e2 100644
--- a/pengine/test10/systemhealthm2.summary
+++ b/pengine/test10/systemhealthm2.summary
@@ -8,7 +8,7 @@ Online: [ hs21c ]
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
 Transition Summary:
- * Fence hs21d
+ * Fence (reboot) hs21d
  * Start   stonith-1	(hs21c)
  * Start   apache_1	(hs21c)
  * Start   nfs_1	(hs21c)
diff --git a/pengine/test10/systemhealthm3.summary b/pengine/test10/systemhealthm3.summary
index b10d3f2..fbcdec5 100644
--- a/pengine/test10/systemhealthm3.summary
+++ b/pengine/test10/systemhealthm3.summary
@@ -8,7 +8,7 @@ Online: [ hs21c ]
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
 Transition Summary:
- * Fence hs21d
+ * Fence (reboot) hs21d
 
 Executing cluster transition:
  * Resource action: stonith-1       monitor on hs21c
diff --git a/pengine/test10/systemhealthn1.summary b/pengine/test10/systemhealthn1.summary
index 37b0b49..7301c6c 100644
--- a/pengine/test10/systemhealthn1.summary
+++ b/pengine/test10/systemhealthn1.summary
@@ -8,8 +8,8 @@ Node hs21d (737318c6-0f92-4592-9754-45967d45aff7): UNCLEAN (offline)
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
 Transition Summary:
- * Fence hs21d
- * Fence hs21c
+ * Fence (reboot) hs21d
+ * Fence (reboot) hs21c
 
 Executing cluster transition:
  * Fencing hs21d (reboot)
diff --git a/pengine/test10/systemhealthn2.summary b/pengine/test10/systemhealthn2.summary
index a37ce18..c83a7e2 100644
--- a/pengine/test10/systemhealthn2.summary
+++ b/pengine/test10/systemhealthn2.summary
@@ -8,7 +8,7 @@ Online: [ hs21c ]
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
 Transition Summary:
- * Fence hs21d
+ * Fence (reboot) hs21d
  * Start   stonith-1	(hs21c)
  * Start   apache_1	(hs21c)
  * Start   nfs_1	(hs21c)
diff --git a/pengine/test10/systemhealthn3.summary b/pengine/test10/systemhealthn3.summary
index a37ce18..c83a7e2 100644
--- a/pengine/test10/systemhealthn3.summary
+++ b/pengine/test10/systemhealthn3.summary
@@ -8,7 +8,7 @@ Online: [ hs21c ]
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
 Transition Summary:
- * Fence hs21d
+ * Fence (reboot) hs21d
  * Start   stonith-1	(hs21c)
  * Start   apache_1	(hs21c)
  * Start   nfs_1	(hs21c)
diff --git a/pengine/test10/systemhealtho1.summary b/pengine/test10/systemhealtho1.summary
index 37b0b49..7301c6c 100644
--- a/pengine/test10/systemhealtho1.summary
+++ b/pengine/test10/systemhealtho1.summary
@@ -8,8 +8,8 @@ Node hs21d (737318c6-0f92-4592-9754-45967d45aff7): UNCLEAN (offline)
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
 Transition Summary:
- * Fence hs21d
- * Fence hs21c
+ * Fence (reboot) hs21d
+ * Fence (reboot) hs21c
 
 Executing cluster transition:
  * Fencing hs21d (reboot)
diff --git a/pengine/test10/systemhealtho2.summary b/pengine/test10/systemhealtho2.summary
index b10d3f2..fbcdec5 100644
--- a/pengine/test10/systemhealtho2.summary
+++ b/pengine/test10/systemhealtho2.summary
@@ -8,7 +8,7 @@ Online: [ hs21c ]
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
 Transition Summary:
- * Fence hs21d
+ * Fence (reboot) hs21d
 
 Executing cluster transition:
  * Resource action: stonith-1       monitor on hs21c
diff --git a/pengine/test10/systemhealtho3.summary b/pengine/test10/systemhealtho3.summary
index b10d3f2..fbcdec5 100644
--- a/pengine/test10/systemhealtho3.summary
+++ b/pengine/test10/systemhealtho3.summary
@@ -8,7 +8,7 @@ Online: [ hs21c ]
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
 Transition Summary:
- * Fence hs21d
+ * Fence (reboot) hs21d
 
 Executing cluster transition:
  * Resource action: stonith-1       monitor on hs21c
diff --git a/pengine/test10/systemhealthp1.summary b/pengine/test10/systemhealthp1.summary
index 37b0b49..7301c6c 100644
--- a/pengine/test10/systemhealthp1.summary
+++ b/pengine/test10/systemhealthp1.summary
@@ -8,8 +8,8 @@ Node hs21d (737318c6-0f92-4592-9754-45967d45aff7): UNCLEAN (offline)
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
 Transition Summary:
- * Fence hs21d
- * Fence hs21c
+ * Fence (reboot) hs21d
+ * Fence (reboot) hs21c
 
 Executing cluster transition:
  * Fencing hs21d (reboot)
diff --git a/pengine/test10/systemhealthp2.summary b/pengine/test10/systemhealthp2.summary
index 6605e12..ea9465b 100644
--- a/pengine/test10/systemhealthp2.summary
+++ b/pengine/test10/systemhealthp2.summary
@@ -8,7 +8,7 @@ Online: [ hs21c ]
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
 Transition Summary:
- * Fence hs21d
+ * Fence (reboot) hs21d
  * Start   apache_1	(hs21c)
  * Start   nfs_1	(hs21c)
 
diff --git a/pengine/test10/systemhealthp3.summary b/pengine/test10/systemhealthp3.summary
index b10d3f2..fbcdec5 100644
--- a/pengine/test10/systemhealthp3.summary
+++ b/pengine/test10/systemhealthp3.summary
@@ -8,7 +8,7 @@ Online: [ hs21c ]
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
 Transition Summary:
- * Fence hs21d
+ * Fence (reboot) hs21d
 
 Executing cluster transition:
  * Resource action: stonith-1       monitor on hs21c
diff --git a/pengine/test10/ticket-clone-21.summary b/pengine/test10/ticket-clone-21.summary
index 50df628..573f8c1 100644
--- a/pengine/test10/ticket-clone-21.summary
+++ b/pengine/test10/ticket-clone-21.summary
@@ -7,8 +7,8 @@ Online: [ node1 node2 ]
      Started: [ node1 node2 ]
 
 Transition Summary:
- * Fence node2
- * Fence node1
+ * Fence (reboot) node2
+ * Fence (reboot) node1
  * Stop    rsc_stonith	(node1)
  * Stop    rsc1:0	(node1)
  * Stop    rsc1:1	(node2)
diff --git a/pengine/test10/ticket-clone-9.summary b/pengine/test10/ticket-clone-9.summary
index 50df628..573f8c1 100644
--- a/pengine/test10/ticket-clone-9.summary
+++ b/pengine/test10/ticket-clone-9.summary
@@ -7,8 +7,8 @@ Online: [ node1 node2 ]
      Started: [ node1 node2 ]
 
 Transition Summary:
- * Fence node2
- * Fence node1
+ * Fence (reboot) node2
+ * Fence (reboot) node1
  * Stop    rsc_stonith	(node1)
  * Stop    rsc1:0	(node1)
  * Stop    rsc1:1	(node2)
diff --git a/pengine/test10/ticket-group-21.summary b/pengine/test10/ticket-group-21.summary
index eab14a9..ff809ae 100644
--- a/pengine/test10/ticket-group-21.summary
+++ b/pengine/test10/ticket-group-21.summary
@@ -8,7 +8,7 @@ Online: [ node1 node2 ]
      rsc2	(ocf::pacemaker:Dummy):	Started node2
 
 Transition Summary:
- * Fence node2
+ * Fence (reboot) node2
  * Stop    rsc1	(node2)
  * Stop    rsc2	(node2)
 
diff --git a/pengine/test10/ticket-group-9.summary b/pengine/test10/ticket-group-9.summary
index eab14a9..ff809ae 100644
--- a/pengine/test10/ticket-group-9.summary
+++ b/pengine/test10/ticket-group-9.summary
@@ -8,7 +8,7 @@ Online: [ node1 node2 ]
      rsc2	(ocf::pacemaker:Dummy):	Started node2
 
 Transition Summary:
- * Fence node2
+ * Fence (reboot) node2
  * Stop    rsc1	(node2)
  * Stop    rsc2	(node2)
 
diff --git a/pengine/test10/ticket-master-21.summary b/pengine/test10/ticket-master-21.summary
index a107a38..c196c9d 100644
--- a/pengine/test10/ticket-master-21.summary
+++ b/pengine/test10/ticket-master-21.summary
@@ -8,7 +8,7 @@ Online: [ node1 node2 ]
      Slaves: [ node2 ]
 
 Transition Summary:
- * Fence node1
+ * Fence (reboot) node1
  * Move    rsc_stonith	(Started node1 -> node2)
  * Demote  rsc1:0	(Master -> Stopped node1)
 
diff --git a/pengine/test10/ticket-master-9.summary b/pengine/test10/ticket-master-9.summary
index a107a38..c196c9d 100644
--- a/pengine/test10/ticket-master-9.summary
+++ b/pengine/test10/ticket-master-9.summary
@@ -8,7 +8,7 @@ Online: [ node1 node2 ]
      Slaves: [ node2 ]
 
 Transition Summary:
- * Fence node1
+ * Fence (reboot) node1
  * Move    rsc_stonith	(Started node1 -> node2)
  * Demote  rsc1:0	(Master -> Stopped node1)
 
diff --git a/pengine/test10/ticket-primitive-21.summary b/pengine/test10/ticket-primitive-21.summary
index 918b743..08a4860 100644
--- a/pengine/test10/ticket-primitive-21.summary
+++ b/pengine/test10/ticket-primitive-21.summary
@@ -6,7 +6,7 @@ Online: [ node1 node2 ]
  rsc1	(ocf::pacemaker:Dummy):	Started node2
 
 Transition Summary:
- * Fence node2
+ * Fence (reboot) node2
  * Stop    rsc1	(node2)
 
 Executing cluster transition:
diff --git a/pengine/test10/ticket-primitive-9.summary b/pengine/test10/ticket-primitive-9.summary
index 918b743..08a4860 100644
--- a/pengine/test10/ticket-primitive-9.summary
+++ b/pengine/test10/ticket-primitive-9.summary
@@ -6,7 +6,7 @@ Online: [ node1 node2 ]
  rsc1	(ocf::pacemaker:Dummy):	Started node2
 
 Transition Summary:
- * Fence node2
+ * Fence (reboot) node2
  * Stop    rsc1	(node2)
 
 Executing cluster transition:
diff --git a/pengine/test10/unfence-definition.summary b/pengine/test10/unfence-definition.summary
index 03506a3..9477a02 100644
--- a/pengine/test10/unfence-definition.summary
+++ b/pengine/test10/unfence-definition.summary
@@ -12,11 +12,9 @@ Online: [ virt-1 virt-2 virt-3 ]
      Stopped: [ virt-2 virt-3 virt-4 ]
 
 Transition Summary:
- * Fence virt-4
- * Fence virt-4
- * Fence virt-3
- * Fence virt-2
- * Fence virt-1
+ * Fence (reboot) virt-4
+ * Fence (on) virt-3
+ * Fence (on) virt-1
  * Restart fencing	(Started virt-1)
  * Restart dlm:0	(Started virt-1)
  * Start   dlm:2	(virt-3)
diff --git a/pengine/test10/unfence-parameters.summary b/pengine/test10/unfence-parameters.summary
index 5cc4a4b..a713cd5 100644
--- a/pengine/test10/unfence-parameters.summary
+++ b/pengine/test10/unfence-parameters.summary
@@ -12,11 +12,10 @@ Online: [ virt-1 virt-2 virt-3 ]
      Stopped: [ virt-2 virt-3 virt-4 ]
 
 Transition Summary:
- * Fence virt-4
- * Fence virt-4
- * Fence virt-3
- * Fence virt-2
- * Fence virt-1
+ * Fence (reboot) virt-4
+ * Fence (on) virt-3
+ * Fence (on) virt-2
+ * Fence (on) virt-1
  * Restart fencing	(Started virt-1)
  * Restart dlm:0	(Started virt-1)
  * Restart dlm:1	(Started virt-2)
diff --git a/pengine/test10/unfence-startup.summary b/pengine/test10/unfence-startup.summary
index 6cd38ad..c3f1be4 100644
--- a/pengine/test10/unfence-startup.summary
+++ b/pengine/test10/unfence-startup.summary
@@ -12,11 +12,8 @@ Online: [ virt-1 virt-2 virt-3 ]
      Stopped: [ virt-2 virt-3 virt-4 ]
 
 Transition Summary:
- * Fence virt-4
- * Fence virt-4
- * Fence virt-3
- * Fence virt-2
- * Fence virt-1
+ * Fence (reboot) virt-4
+ * Fence (on) virt-3
  * Start   dlm:2	(virt-3)
  * Start   clvmd:1	(virt-2)
  * Start   clvmd:2	(virt-3)
diff --git a/pengine/test10/whitebox-fail1.summary b/pengine/test10/whitebox-fail1.summary
index 5f70a66..57d72ba 100644
--- a/pengine/test10/whitebox-fail1.summary
+++ b/pengine/test10/whitebox-fail1.summary
@@ -14,7 +14,7 @@ Containers: [ lxc2:container2 ]
  D	(ocf::pacemaker:Dummy):	Started 18node1
 
 Transition Summary:
- * Fence lxc1 (resource: container1)
+ * Fence (reboot) lxc1 (resource: container1)
  * Recover container1	(Started 18node2)
  * Recover M:4	(Started lxc1)
  * Recover B	(Started lxc1)
diff --git a/pengine/test10/whitebox-fail2.summary b/pengine/test10/whitebox-fail2.summary
index 2922f16..bf12683 100644
--- a/pengine/test10/whitebox-fail2.summary
+++ b/pengine/test10/whitebox-fail2.summary
@@ -14,7 +14,7 @@ Containers: [ lxc2:container2 ]
  D	(ocf::pacemaker:Dummy):	Started 18node1
 
 Transition Summary:
- * Fence lxc1 (resource: container1)
+ * Fence (reboot) lxc1 (resource: container1)
  * Recover container1	(Started 18node2)
  * Recover M:4	(Started lxc1)
  * Recover B	(Started lxc1)
diff --git a/pengine/test10/whitebox-imply-stop-on-fence.summary b/pengine/test10/whitebox-imply-stop-on-fence.summary
index 31cc4a5..2fb20a6 100644
--- a/pengine/test10/whitebox-imply-stop-on-fence.summary
+++ b/pengine/test10/whitebox-imply-stop-on-fence.summary
@@ -25,9 +25,9 @@ Containers: [ lxc-01_kiff-02:R-lxc-01_kiff-02 lxc-02_kiff-02:R-lxc-02_kiff-02 ]
  vm-fs	(ocf::heartbeat:Filesystem):	FAILED lxc-01_kiff-01
 
 Transition Summary:
- * Fence lxc-02_kiff-01 (resource: R-lxc-02_kiff-01)
- * Fence lxc-01_kiff-01 (resource: R-lxc-01_kiff-01)
- * Fence kiff-01
+ * Fence (reboot) lxc-02_kiff-01 (resource: R-lxc-02_kiff-01)
+ * Fence (reboot) lxc-01_kiff-01 (resource: R-lxc-01_kiff-01)
+ * Fence (reboot) kiff-01
  * Move    fence-kiff-02	(Started kiff-01 -> kiff-02)
  * Stop    dlm:0	(kiff-01)
  * Stop    clvmd:0	(kiff-01)
diff --git a/pengine/test10/whitebox-ms-ordering.summary b/pengine/test10/whitebox-ms-ordering.summary
index fcdef66..2230d0f 100644
--- a/pengine/test10/whitebox-ms-ordering.summary
+++ b/pengine/test10/whitebox-ms-ordering.summary
@@ -9,8 +9,8 @@ Online: [ 18node1 18node2 18node3 ]
      Stopped: [ 18node1 18node2 18node3 ]
 
 Transition Summary:
- * Fence lxc2 (resource: container2)
- * Fence lxc1 (resource: container1)
+ * Fence (reboot) lxc2 (resource: container2)
+ * Fence (reboot) lxc1 (resource: container1)
  * Start   container1	(18node1)
  * Start   container2	(18node1)
  * Recover lxc-ms:0	(Master lxc1)
diff --git a/pengine/test10/whitebox-unexpectedly-running.summary b/pengine/test10/whitebox-unexpectedly-running.summary
index ed0a5bd..eabeb4d 100644
--- a/pengine/test10/whitebox-unexpectedly-running.summary
+++ b/pengine/test10/whitebox-unexpectedly-running.summary
@@ -5,7 +5,7 @@ Online: [ 18builder ]
  FAKE	(ocf::pacemaker:Dummy):	FAILED 18builder 
 
 Transition Summary:
- * Fence remote1 (resource: FAKE)
+ * Fence (reboot) remote1 (resource: FAKE)
  * Recover FAKE	(Started 18builder)
  * Start   remote1	(18builder)
 
-- 
1.8.3.1


From 7f8ba3076f180aae699df78609b0573e56a7c379 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Wed, 26 Jul 2017 10:34:48 +1000
Subject: [PATCH 02/12] Support unfencing of remote nodes

---
 crmd/te_callbacks.c                                |  21 +-
 include/crm/msg_xml.h                              |   1 +
 include/crm/pengine/internal.h                     |   2 +-
 lib/pengine/utils.c                                | 291 +++++++++++++++------
 pengine/allocate.c                                 |   4 +-
 pengine/native.c                                   |  39 ++-
 pengine/test10/594.scores                          |   1 +
 pengine/test10/594.summary                         |   1 +
 pengine/test10/829.scores                          |   1 +
 pengine/test10/829.summary                         |   1 +
 pengine/test10/bug-5186-partial-migrate.scores     |   1 +
 pengine/test10/bug-5186-partial-migrate.summary    |   1 +
 pengine/test10/bug-cl-5247.scores                  |   1 +
 pengine/test10/bug-cl-5247.summary                 |   1 +
 pengine/test10/bug-lf-2508.scores                  |   1 +
 pengine/test10/bug-lf-2508.summary                 |   1 +
 pengine/test10/bug-lf-2551.scores                  |   1 +
 pengine/test10/bug-lf-2551.summary                 |   1 +
 pengine/test10/bug-lf-2606.scores                  |   1 +
 pengine/test10/bug-lf-2606.summary                 |   1 +
 pengine/test10/bug-rh-1097457.scores               |   1 +
 pengine/test10/bug-rh-1097457.summary              |   1 +
 pengine/test10/concurrent-fencing.scores           |   3 +
 pengine/test10/concurrent-fencing.summary          |   3 +
 pengine/test10/guest-node-host-dies.scores         |   3 +
 pengine/test10/guest-node-host-dies.summary        |   3 +
 pengine/test10/interleave-pseudo-stop.scores       |   1 +
 pengine/test10/interleave-pseudo-stop.summary      |   1 +
 pengine/test10/master-7.scores                     |   1 +
 pengine/test10/master-7.summary                    |   1 +
 pengine/test10/master-8.scores                     |   1 +
 pengine/test10/master-8.summary                    |   1 +
 pengine/test10/migrate-fencing.scores              |   1 +
 pengine/test10/migrate-fencing.summary             |   1 +
 pengine/test10/rec-node-11.scores                  |   1 +
 pengine/test10/rec-node-11.summary                 |   1 +
 pengine/test10/rec-node-12.scores                  |   1 +
 pengine/test10/rec-node-12.summary                 |   1 +
 pengine/test10/rec-node-13.scores                  |   1 +
 pengine/test10/rec-node-13.summary                 |   1 +
 pengine/test10/rec-node-14.scores                  |   3 +
 pengine/test10/rec-node-14.summary                 |   3 +
 pengine/test10/rec-node-15.scores                  |   1 +
 pengine/test10/rec-node-15.summary                 |   1 +
 pengine/test10/rec-node-2.scores                   |   1 +
 pengine/test10/rec-node-2.summary                  |   1 +
 pengine/test10/rec-node-4.scores                   |   1 +
 pengine/test10/rec-node-4.summary                  |   1 +
 pengine/test10/rec-node-6.scores                   |   1 +
 pengine/test10/rec-node-6.summary                  |   1 +
 pengine/test10/rec-node-7.scores                   |   1 +
 pengine/test10/rec-node-7.summary                  |   1 +
 pengine/test10/rec-rsc-5.scores                    |   1 +
 pengine/test10/rec-rsc-5.summary                   |   1 +
 .../test10/remote-fence-before-reconnect.scores    |   1 +
 .../test10/remote-fence-before-reconnect.summary   |   1 +
 pengine/test10/remote-fence-unclean-3.scores       |   1 +
 pengine/test10/remote-fence-unclean-3.summary      |   1 +
 pengine/test10/remote-fence-unclean.scores         |   1 +
 pengine/test10/remote-fence-unclean.summary        |   1 +
 pengine/test10/remote-fence-unclean2.scores        |   1 +
 pengine/test10/remote-fence-unclean2.summary       |   1 +
 pengine/test10/remote-partial-migrate2.scores      |   1 +
 pengine/test10/remote-partial-migrate2.summary     |   1 +
 pengine/test10/remote-recover-all.scores           |   3 +
 pengine/test10/remote-recover-all.summary          |   3 +
 pengine/test10/remote-recover-connection.scores    |   1 +
 pengine/test10/remote-recover-connection.summary   |   1 +
 pengine/test10/remote-recover-fail.scores          |   1 +
 pengine/test10/remote-recover-fail.summary         |   1 +
 pengine/test10/remote-recover-no-resources.scores  |   2 +
 pengine/test10/remote-recover-no-resources.summary |   2 +
 pengine/test10/remote-recover-unknown.scores       |   3 +
 pengine/test10/remote-recover-unknown.summary      |   3 +
 pengine/test10/remote-recovery.scores              |   1 +
 pengine/test10/remote-recovery.summary             |   1 +
 pengine/test10/remote-unclean2.scores              |   1 +
 pengine/test10/remote-unclean2.summary             |   1 +
 pengine/test10/start-then-stop-with-unfence.dot    |   2 -
 pengine/test10/start-then-stop-with-unfence.exp    |  16 +-
 pengine/test10/start-then-stop-with-unfence.scores |   1 +
 .../test10/start-then-stop-with-unfence.summary    |   9 +-
 pengine/test10/start-then-stop-with-unfence.xml    |   1 +
 pengine/test10/stonith-0.scores                    |   2 +
 pengine/test10/stonith-0.summary                   |   2 +
 pengine/test10/stonith-1.scores                    |   1 +
 pengine/test10/stonith-1.summary                   |   1 +
 pengine/test10/stonith-2.scores                    |   1 +
 pengine/test10/stonith-2.summary                   |   1 +
 pengine/test10/stonith-3.scores                    |   1 +
 pengine/test10/stonith-3.summary                   |   1 +
 pengine/test10/stonith-4.scores                    |   4 +
 pengine/test10/stonith-4.summary                   |   4 +
 pengine/test10/stop-failure-no-quorum.scores       |   1 +
 pengine/test10/stop-failure-no-quorum.summary      |   1 +
 pengine/test10/stop-failure-with-fencing.scores    |   1 +
 pengine/test10/stop-failure-with-fencing.summary   |   1 +
 pengine/test10/systemhealth1.scores                |   2 +
 pengine/test10/systemhealth1.summary               |   2 +
 pengine/test10/systemhealth2.scores                |   1 +
 pengine/test10/systemhealth2.summary               |   1 +
 pengine/test10/systemhealth3.scores                |   1 +
 pengine/test10/systemhealth3.summary               |   1 +
 pengine/test10/systemhealthm1.scores               |   2 +
 pengine/test10/systemhealthm1.summary              |   2 +
 pengine/test10/systemhealthm2.scores               |   1 +
 pengine/test10/systemhealthm2.summary              |   1 +
 pengine/test10/systemhealthm3.scores               |   1 +
 pengine/test10/systemhealthm3.summary              |   1 +
 pengine/test10/systemhealthn1.scores               |   2 +
 pengine/test10/systemhealthn1.summary              |   2 +
 pengine/test10/systemhealthn2.scores               |   1 +
 pengine/test10/systemhealthn2.summary              |   1 +
 pengine/test10/systemhealthn3.scores               |   1 +
 pengine/test10/systemhealthn3.summary              |   1 +
 pengine/test10/systemhealtho1.scores               |   2 +
 pengine/test10/systemhealtho1.summary              |   2 +
 pengine/test10/systemhealtho2.scores               |   1 +
 pengine/test10/systemhealtho2.summary              |   1 +
 pengine/test10/systemhealtho3.scores               |   1 +
 pengine/test10/systemhealtho3.summary              |   1 +
 pengine/test10/systemhealthp1.scores               |   2 +
 pengine/test10/systemhealthp1.summary              |   2 +
 pengine/test10/systemhealthp2.scores               |   1 +
 pengine/test10/systemhealthp2.summary              |   1 +
 pengine/test10/systemhealthp3.scores               |   1 +
 pengine/test10/systemhealthp3.summary              |   1 +
 pengine/test10/ticket-clone-21.scores              |   2 +
 pengine/test10/ticket-clone-21.summary             |   2 +
 pengine/test10/ticket-clone-9.scores               |   2 +
 pengine/test10/ticket-clone-9.summary              |   2 +
 pengine/test10/ticket-group-21.scores              |   1 +
 pengine/test10/ticket-group-21.summary             |   1 +
 pengine/test10/ticket-group-9.scores               |   1 +
 pengine/test10/ticket-group-9.summary              |   1 +
 pengine/test10/ticket-master-21.scores             |   1 +
 pengine/test10/ticket-master-21.summary            |   1 +
 pengine/test10/ticket-master-9.scores              |   1 +
 pengine/test10/ticket-master-9.summary             |   1 +
 pengine/test10/ticket-primitive-21.scores          |   1 +
 pengine/test10/ticket-primitive-21.summary         |   1 +
 pengine/test10/ticket-primitive-9.scores           |   1 +
 pengine/test10/ticket-primitive-9.summary          |   1 +
 pengine/test10/unfence-definition.dot              |   5 +-
 pengine/test10/unfence-definition.exp              |  31 +--
 pengine/test10/unfence-definition.scores           |   3 +
 pengine/test10/unfence-definition.summary          |  13 +-
 pengine/test10/unfence-definition.xml              |  10 +
 pengine/test10/unfence-parameters.dot              |   7 +-
 pengine/test10/unfence-parameters.exp              |  42 ++-
 pengine/test10/unfence-parameters.scores           |   4 +
 pengine/test10/unfence-parameters.summary          |  14 +-
 pengine/test10/unfence-parameters.xml              |  10 +
 pengine/test10/unfence-startup.dot                 |   5 +-
 pengine/test10/unfence-startup.exp                 |  29 +-
 pengine/test10/unfence-startup.scores              |   2 +
 pengine/test10/unfence-startup.summary             |  10 +-
 pengine/test10/unfence-startup.xml                 |  10 +
 pengine/test10/whitebox-fail1.scores               |   1 +
 pengine/test10/whitebox-fail1.summary              |   1 +
 pengine/test10/whitebox-fail2.scores               |   1 +
 pengine/test10/whitebox-fail2.summary              |   1 +
 pengine/test10/whitebox-imply-stop-on-fence.scores |   3 +
 .../test10/whitebox-imply-stop-on-fence.summary    |   3 +
 pengine/test10/whitebox-ms-ordering.scores         |   2 +
 pengine/test10/whitebox-ms-ordering.summary        |   2 +
 .../test10/whitebox-unexpectedly-running.scores    |   1 +
 .../test10/whitebox-unexpectedly-running.summary   |   1 +
 168 files changed, 580 insertions(+), 194 deletions(-)

diff --git a/crmd/te_callbacks.c b/crmd/te_callbacks.c
index 3c63aa6..b5c857d 100644
--- a/crmd/te_callbacks.c
+++ b/crmd/te_callbacks.c
@@ -788,16 +788,31 @@ tengine_stonith_callback(stonith_t * stonith, stonith_callback_data_t * data)
     }
 
     stop_te_timer(action->timer);
-
     if (rc == pcmk_ok) {
         const char *target = crm_element_value(action->xml, XML_LRM_ATTR_TARGET);
         const char *uuid = crm_element_value(action->xml, XML_LRM_ATTR_TARGET_UUID);
         const char *op = crm_meta_value(action->params, "stonith_action"); 
 
-        crm_debug("Stonith operation %d for %s passed", call_id, target);
+        crm_info("Stonith operation %d for %s passed", call_id, target);
         if (action->confirmed == FALSE) {
             te_action_confirmed(action);
-            if (action->sent_update == FALSE && safe_str_neq("on", op)) {
+            if (safe_str_eq("on", op)) {
+                const char *key = NULL;
+                const char *value = NULL;
+
+                key = XML_NODE_IS_UNFENCED;
+                value = crm_meta_value(action->params, key);
+                update_attrd(target, key, value, NULL, FALSE);
+
+                key = "digests-all";
+                value = crm_meta_value(action->params, key);
+                update_attrd(target, key, value, NULL, FALSE);
+
+                key = "digests-secure";
+                value = crm_meta_value(action->params, key);
+                update_attrd(target, key, value, NULL, FALSE);
+
+            } else if (action->sent_update == FALSE) {
                 send_stonith_update(action, target, uuid);
                 action->sent_update = TRUE;
             }
diff --git a/include/crm/msg_xml.h b/include/crm/msg_xml.h
index a764e1d..8cf22f3 100644
--- a/include/crm/msg_xml.h
+++ b/include/crm/msg_xml.h
@@ -262,6 +262,7 @@
 #  define XML_NODE_IS_PEER    	"crmd"
 #  define XML_NODE_IS_REMOTE    	"remote_node"
 #  define XML_NODE_IS_FENCED		"node_fenced"
+#  define XML_NODE_IS_UNFENCED	    	"node_unfenced"
 #  define XML_NODE_IS_MAINTENANCE   "node_in_maintenance"
 
 #  define XML_CIB_ATTR_SHUTDOWN       	"shutdown"
diff --git a/include/crm/pengine/internal.h b/include/crm/pengine/internal.h
index 1b6afd1..3e10a30 100644
--- a/include/crm/pengine/internal.h
+++ b/include/crm/pengine/internal.h
@@ -273,7 +273,7 @@ typedef struct op_digest_cache_s {
 op_digest_cache_t *rsc_action_digest_cmp(resource_t * rsc, xmlNode * xml_op, node_t * node,
                                          pe_working_set_t * data_set);
 
-action_t *pe_fence_op(node_t * node, const char *op, bool optional, pe_working_set_t * data_set);
+action_t *pe_fence_op(node_t * node, const char *op, bool optional, const char *reason, pe_working_set_t * data_set);
 void trigger_unfencing(
     resource_t * rsc, node_t *node, const char *reason, action_t *dependency, pe_working_set_t * data_set);
 
diff --git a/lib/pengine/utils.c b/lib/pengine/utils.c
index 7c29e7b..90da95a 100644
--- a/lib/pengine/utils.c
+++ b/lib/pengine/utils.c
@@ -1916,7 +1733,7 @@ filter_parameters(xmlNode * param_set, const char *param_string, bool need_prese
         return;
     }
 
-    if (param_set) {
+    if (param_set && param_string) {
         xmlAttrPtr xIter = param_set->properties;
 
         while (xIter) {
@@ -1982,104 +1814,162 @@ bool fix_remote_addr(resource_t * rsc)
     return TRUE;
 }
 
+static op_digest_cache_t *
+rsc_action_digest(resource_t * rsc, const char *task, const char *key,
+                  node_t * node, xmlNode * xml_op, pe_working_set_t * data_set) 
+{
+    op_digest_cache_t *data = NULL;
+
+    data = g_hash_table_lookup(node->details->digest_cache, key);
+    if (data == NULL) {
+        GHashTable *local_rsc_params = crm_str_table_new();
+        action_t *action = custom_action(rsc, strdup(key), task, node, TRUE, FALSE, data_set);
+        //xmlNode *local_versioned_params = create_xml_node(NULL, XML_TAG_RSC_VER_ATTRS);
+
+        const char *op_version;
+        //const char *ra_version = NULL;
+        const char *restart_list = NULL;
+        const char *secure_list = " passwd password ";
+
+        data = calloc(1, sizeof(op_digest_cache_t));
+        CRM_ASSERT(data != NULL);
+
+        get_rsc_attributes(local_rsc_params, rsc, node, data_set);
+        //pe_get_versioned_attributes(local_versioned_params, rsc, node, data_set);
+
+        data->params_all = create_xml_node(NULL, XML_TAG_PARAMS);
+        if (fix_remote_addr(rsc)) {
+            // REMOTE_CONTAINER_HACK: Allow remote nodes that start containers with pacemaker remote inside
+            crm_xml_add(data->params_all, "addr", node->details->uname);
+            crm_trace("Fixing addr for %s on %s", rsc->id, node->details->uname);
+        }
+
+        g_hash_table_foreach(local_rsc_params, hash2field, data->params_all);
+        g_hash_table_foreach(action->extra, hash2field, data->params_all);
+        g_hash_table_foreach(rsc->parameters, hash2field, data->params_all);
+        g_hash_table_foreach(action->meta, hash2metafield, data->params_all);
+
+        if(xml_op) {
+            secure_list = crm_element_value(xml_op, XML_LRM_ATTR_OP_SECURE);
+            restart_list = crm_element_value(xml_op, XML_LRM_ATTR_OP_RESTART);
+
+            op_version = crm_element_value(xml_op, XML_ATTR_CRM_VERSION);
+            //ra_version = crm_element_value(xml_op, XML_ATTR_RA_VERSION);
+
+        } else {
+            op_version = CRM_FEATURE_SET;
+        }
+
+        //append_versioned_params(local_versioned_params, ra_version, data->params_all);
+        //append_versioned_params(rsc->versioned_parameters, ra_version, data->params_all);
+        //append_versioned_params(action->versioned_parameters, ra_version, data->params_all);
+
+        filter_action_parameters(data->params_all, op_version);
+
+        g_hash_table_destroy(local_rsc_params);
+        pe_free_action(action);
+
+        data->digest_all_calc = calculate_operation_digest(data->params_all, op_version);
+
+        if (is_set(data_set->flags, pe_flag_sanitized)) {
+            data->params_secure = copy_xml(data->params_all);
+            if(secure_list) {
+                filter_parameters(data->params_secure, secure_list, FALSE);
+            }
+            data->digest_secure_calc = calculate_operation_digest(data->params_secure, op_version);
+        }
+
+        if(crm_element_value(xml_op, XML_LRM_ATTR_RESTART_DIGEST) != NULL) {
+            data->params_restart = copy_xml(data->params_all);
+            if (restart_list) {
+                filter_parameters(data->params_restart, restart_list, TRUE);
+            }
+            data->digest_restart_calc = calculate_operation_digest(data->params_restart, op_version);
+        }
+
+        g_hash_table_insert(node->details->digest_cache, strdup(key), data);
+    }
+
+    return data;
+}
+
 op_digest_cache_t *
 rsc_action_digest_cmp(resource_t * rsc, xmlNode * xml_op, node_t * node,
                       pe_working_set_t * data_set)
 {
     op_digest_cache_t *data = NULL;
 
-    GHashTable *local_rsc_params = NULL;
-
-    action_t *action = NULL;
     char *key = NULL;
-
     int interval = 0;
-    const char *op_id = ID(xml_op);
+
     const char *interval_s = crm_element_value(xml_op, XML_LRM_ATTR_INTERVAL);
     const char *task = crm_element_value(xml_op, XML_LRM_ATTR_TASK);
+
     const char *digest_all;
     const char *digest_restart;
-    const char *secure_list;
-    const char *restart_list;
-    const char *op_version;
 
     CRM_ASSERT(node != NULL);
 
-    data = g_hash_table_lookup(node->details->digest_cache, op_id);
-    if (data) {
-        return data;
-    }
-
-    data = calloc(1, sizeof(op_digest_cache_t));
-    CRM_ASSERT(data != NULL);
-
     digest_all = crm_element_value(xml_op, XML_LRM_ATTR_OP_DIGEST);
     digest_restart = crm_element_value(xml_op, XML_LRM_ATTR_RESTART_DIGEST);
 
-    secure_list = crm_element_value(xml_op, XML_LRM_ATTR_OP_SECURE);
-    restart_list = crm_element_value(xml_op, XML_LRM_ATTR_OP_RESTART);
-
-    op_version = crm_element_value(xml_op, XML_ATTR_CRM_VERSION);
-
-    /* key is freed in custom_action */
     interval = crm_parse_int(interval_s, "0");
     key = generate_op_key(rsc->id, task, interval);
-    action = custom_action(rsc, key, task, node, TRUE, FALSE, data_set);
-    key = NULL;
-
-    local_rsc_params = g_hash_table_new_full(crm_str_hash, g_str_equal,
-                                             g_hash_destroy_str, g_hash_destroy_str);
-    get_rsc_attributes(local_rsc_params, rsc, node, data_set);
-    data->params_all = create_xml_node(NULL, XML_TAG_PARAMS);
+    data = rsc_action_digest(rsc, task, key, node, xml_op, data_set);
 
-    if (fix_remote_addr(rsc)) {
-        // REMOTE_CONTAINER_HACK: Allow remote nodes that start containers with pacemaker remote inside
-        crm_xml_add(data->params_all, "addr", node->details->uname);
-        crm_trace("Fixing addr for %s on %s", rsc->id, node->details->uname);
-    }
+    data->rc = RSC_DIGEST_MATCH;
+    if (digest_restart && data->digest_restart_calc && strcmp(data->digest_restart_calc, digest_restart) != 0) {
+        data->rc = RSC_DIGEST_RESTART;
 
-    g_hash_table_foreach(local_rsc_params, hash2field, data->params_all);
-    g_hash_table_foreach(action->extra, hash2field, data->params_all);
-    g_hash_table_foreach(rsc->parameters, hash2field, data->params_all);
-    g_hash_table_foreach(action->meta, hash2metafield, data->params_all);
-    filter_action_parameters(data->params_all, op_version);
+    } else if (digest_all == NULL) {
+        /* it is unknown what the previous op digest was */
+        data->rc = RSC_DIGEST_UNKNOWN;
 
-    data->digest_all_calc = calculate_operation_digest(data->params_all, op_version);
+    } else if (strcmp(digest_all, data->digest_all_calc) != 0) {
+        data->rc = RSC_DIGEST_ALL;
+    }
 
-    if (secure_list && is_set(data_set->flags, pe_flag_sanitized)) {
-        data->params_secure = copy_xml(data->params_all);
+    free(key);
+    return data;
+}
 
-        if (secure_list) {
-            filter_parameters(data->params_secure, secure_list, FALSE);
-        }
-        data->digest_secure_calc = calculate_operation_digest(data->params_secure, op_version);
-    }
+#define STONITH_DIGEST_TASK "stonith-on"
 
-    if (digest_restart) {
-        data->params_restart = copy_xml(data->params_all);
+static op_digest_cache_t *
+fencing_action_digest_cmp(resource_t * rsc, node_t * node, pe_working_set_t * data_set)
+{
+    char *key = generate_op_key(rsc->id, STONITH_DIGEST_TASK, 0);
+    op_digest_cache_t *data = rsc_action_digest(rsc, STONITH_DIGEST_TASK, key, node, NULL, data_set);
 
-        if (restart_list) {
-            filter_parameters(data->params_restart, restart_list, TRUE);
-        }
-        data->digest_restart_calc = calculate_operation_digest(data->params_restart, op_version);
-    }
+    const char *digest_all = g_hash_table_lookup(node->details->attrs, "digests-all");
+    const char *digest_secure = g_hash_table_lookup(node->details->attrs, "digests-secure");
 
-    data->rc = RSC_DIGEST_MATCH;
-    if (digest_restart && strcmp(data->digest_restart_calc, digest_restart) != 0) {
-        data->rc = RSC_DIGEST_RESTART;
+    /* No restarts for fencing device changes */
 
-    } else if (digest_all == NULL) {
+    data->rc = RSC_DIGEST_ALL;
+    if (digest_all == NULL) {
         /* it is unknown what the previous op digest was */
         data->rc = RSC_DIGEST_UNKNOWN;
 
-    } else if (strcmp(digest_all, data->digest_all_calc) != 0) {
-        data->rc = RSC_DIGEST_ALL;
+    } else if (strcmp(digest_all, data->digest_all_calc) == 0) {
+        data->rc = RSC_DIGEST_MATCH;
+
+    } else if(digest_secure && data->digest_secure_calc) {
+        char *search = crm_strdup_printf("%s:%s:%s", rsc->id, (const char*)g_hash_table_lookup(rsc->meta, XML_ATTR_TYPE), data->digest_secure_calc);
+
+        if(strstr(digest_secure, search)) {
+            fprintf(stdout, "Only 'private' parameters to %s for unfencing %s changed\n",
+                    rsc->id, node->details->uname);
+            data->rc = RSC_DIGEST_MATCH;
+        }
     }
 
-    g_hash_table_insert(node->details->digest_cache, strdup(op_id), data);
-    g_hash_table_destroy(local_rsc_params);
-    pe_free_action(action);
+    if (data->rc == RSC_DIGEST_ALL && is_set(data_set->flags, pe_flag_sanitized) && data->digest_secure_calc) {
+        fprintf(stdout, "Parameters to %s for unfencing %s changed, try '%s:%s:%s'\n",
+                rsc->id, node->details->uname, rsc->id, (const char*)g_hash_table_lookup(rsc->meta, XML_ATTR_TYPE), data->digest_secure_calc);
+    }
 
+    free(key);
     return data;
 }
 
@@ -2117,35 +2007,113 @@ set_bit_recursive(resource_t * rsc, unsigned long long flag)
     }
 }
 
+static GListPtr
+find_unfencing_devices(GListPtr candidates, GListPtr matches) 
+{
+    for (GListPtr gIter = candidates; gIter != NULL; gIter = gIter->next) {
+        resource_t *candidate = gIter->data;
+        const char *provides = g_hash_table_lookup(candidate->meta, XML_RSC_ATTR_PROVIDES);
+        const char *requires = g_hash_table_lookup(candidate->meta, XML_RSC_ATTR_REQUIRES);
+
+        if(candidate->children) {
+            matches = find_unfencing_devices(candidate->children, matches);
+        } else if (is_not_set(candidate->flags, pe_rsc_fence_device)) {
+            continue;
+
+        } else if (crm_str_eq(provides, "unfencing", FALSE) || crm_str_eq(requires, "unfencing", FALSE)) {
+            matches = g_list_prepend(matches, candidate);
+        }
+    }
+    return matches;
+}
+
+
+#define STONITH_DIGEST_TASK "stonith-on"
+
 action_t *
-pe_fence_op(node_t * node, const char *op, bool optional, pe_working_set_t * data_set)
+pe_fence_op(node_t * node, const char *op, bool optional, const char *reason, pe_working_set_t * data_set)
 {
-    char *key = NULL;
+    char *op_key = NULL;
     action_t *stonith_op = NULL;
 
     if(op == NULL) {
         op = data_set->stonith_action;
     }
 
-    key = crm_strdup_printf("%s-%s-%s", CRM_OP_FENCE, node->details->uname, op);
+    op_key = crm_strdup_printf("%s-%s-%s", CRM_OP_FENCE, node->details->uname, op);
 
     if(data_set->singletons) {
-        stonith_op = g_hash_table_lookup(data_set->singletons, key);
+        stonith_op = g_hash_table_lookup(data_set->singletons, op_key);
     }
 
     if(stonith_op == NULL) {
-        stonith_op = custom_action(NULL, key, CRM_OP_FENCE, node, optional, TRUE, data_set);
+        stonith_op = custom_action(NULL, op_key, CRM_OP_FENCE, node, TRUE, TRUE, data_set);
 
         add_hash_param(stonith_op->meta, XML_LRM_ATTR_TARGET, node->details->uname);
         add_hash_param(stonith_op->meta, XML_LRM_ATTR_TARGET_UUID, node->details->id);
         add_hash_param(stonith_op->meta, "stonith_action", op);
+
+        if(is_remote_node(node) && is_set(data_set->flags, pe_flag_enable_unfencing)) {
+            /* Extra work to detect device changes on remotes
+             *
+             * We may do this for all nodes in the future, but for now
+             * the check_action_definition() based stuff works fine.
+             *
+             * Use "stonith-on" to avoid creating cache entries for
+             * operations check_action_definition() would look for.
+             */
+            long max = 1024;
+            long digests_all_offset = 0;
+            long digests_secure_offset = 0;
+
+            char *digests_all = malloc(max);
+            char *digests_secure = malloc(max);
+            GListPtr matches = find_unfencing_devices(data_set->resources, NULL);
+
+            for (GListPtr gIter = matches; gIter != NULL; gIter = gIter->next) {
+                resource_t *match = gIter->data;
+                op_digest_cache_t *data = fencing_action_digest_cmp(match, node, data_set);
+
+                if(data->rc == RSC_DIGEST_ALL) {
+                    optional = FALSE;
+                    crm_notice("Unfencing %s (remote): because the definition of %s changed", node->details->uname, match->id);
+                    if (is_set(data_set->flags, pe_flag_sanitized)) {
+                        /* Extra detail for those running from the commandline */
+                        fprintf(stdout, "  notice: Unfencing %s (remote): because the definition of %s changed\n", node->details->uname, match->id);
+                    }
+
+                }
+
+                digests_all_offset += snprintf(
+                    digests_all+digests_all_offset, max-digests_all_offset,
+                    "%s:%s:%s,", match->id, (const char*)g_hash_table_lookup(match->meta, XML_ATTR_TYPE), data->digest_all_calc);
+
+                digests_secure_offset += snprintf(
+                    digests_secure+digests_secure_offset, max-digests_secure_offset,
+                    "%s:%s:%s,", match->id, (const char*)g_hash_table_lookup(match->meta, XML_ATTR_TYPE), data->digest_secure_calc);
+            }
+            add_hash_param(stonith_op->meta, strdup("digests-all"), digests_all);
+            add_hash_param(stonith_op->meta, strdup("digests-secure"), digests_secure);
+        }
+
     } else {
-        free(key);
+        free(op_key);
     }
 
-    if(optional == FALSE) {
-        crm_trace("%s is no longer optional", stonith_op->uuid);
+    if(optional == FALSE && is_set(stonith_op->flags, pe_action_optional)) {
+        const char *kind = "Fencing  ";
+
         pe_clear_action_bit(stonith_op, pe_action_optional);
+
+        if(safe_str_eq(op, "on")) {
+            kind = "Unfencing";
+        }
+
+        crm_notice("%s %s: %s", kind, node->details->uname, reason);
+        if (is_set(data_set->flags, pe_flag_sanitized)) {
+            /* Extra detail for those running from the commandline */
+            fprintf(stdout, "  notice: %s %s: %s\n", kind, node->details->uname, reason);
+        }
     }
 
     return stonith_op;
@@ -2167,9 +2135,8 @@ trigger_unfencing(
               && node->details->online
               && node->details->unclean == FALSE
               && node->details->shutdown == FALSE) {
-        action_t *unfence = pe_fence_op(node, "on", FALSE, data_set);
+        action_t *unfence = pe_fence_op(node, "on", FALSE, reason, data_set);
 
-        crm_notice("Unfencing %s: %s", node->details->uname, reason);
         if(dependency) {
             order_actions(unfence, dependency, pe_order_optional);
         }
diff --git a/pengine/allocate.c b/pengine/allocate.c
index 8ea2ea1..fd9c4f9 100644
--- a/pengine/allocate.c
+++ b/pengine/allocate.c
@@ -1406,7 +1406,7 @@ fence_guest(pe_node_t *node, pe_action_t *done, pe_working_set_t *data_set)
     /* Create a fence pseudo-event, so we have an event to order actions
      * against, and crmd can always detect it.
      */
-    stonith_op = pe_fence_op(node, fence_action, FALSE, data_set);
+    stonith_op = pe_fence_op(node, fence_action, FALSE, "guest is unclean", data_set);
     update_action_flags(stonith_op, pe_action_pseudo | pe_action_runnable,
                         __FUNCTION__, __LINE__);
 
@@ -1488,7 +1488,7 @@ stage6(pe_working_set_t * data_set)
 
             pe_warn("Scheduling Node %s for STONITH", node->details->uname);
 
-            stonith_op = pe_fence_op(node, NULL, FALSE, data_set);
+            stonith_op = pe_fence_op(node, NULL, FALSE, "node is unclean", data_set);
 
             stonith_constraints(node, stonith_op, data_set);
 
diff --git a/pengine/native.c b/pengine/native.c
index dd5ff18..bc59405 100644
--- a/pengine/native.c
+++ b/pengine/native.c
@@ -1355,7 +1355,7 @@ native_internal_constraints(resource_t * rsc, pe_working_set_t * data_set)
 
         g_hash_table_iter_init(&iter, rsc->allowed_nodes);
         while (g_hash_table_iter_next(&iter, NULL, (void **)&node)) {
-            action_t *unfence = pe_fence_op(node, "on", TRUE, data_set);
+            action_t *unfence = pe_fence_op(node, "on", TRUE, __FUNCTION__, data_set);
 
             crm_debug("Ordering any stops of %s before %s, and any starts after",
                       rsc->id, unfence->uuid);
@@ -2455,6 +2455,16 @@ StopRsc(resource_t * rsc, node_t * next, gboolean optional, pe_working_set_t * d
         if (is_set(data_set->flags, pe_flag_remove_after_stop)) {
             DeleteRsc(rsc, current, optional, data_set);
         }
+
+        if(is_set(rsc->flags, pe_rsc_needs_unfencing)) {
+            action_t *unfence = pe_fence_op(current, "on", TRUE, __FUNCTION__, data_set);
+            const char *unfenced = g_hash_table_lookup(current->details->attrs, XML_NODE_IS_UNFENCED);
+
+            order_actions(stop, unfence, pe_order_implies_first);
+            if (unfenced == NULL || safe_str_eq("0", unfenced)) {
+                pe_proc_err("Stopping %s until %s can be unfenced", rsc->id, current->details->uname);
+            }
+        }
     }
 
     return TRUE;
@@ -2468,9 +2478,25 @@ StartRsc(resource_t * rsc, node_t * next, gboolean optional, pe_working_set_t *
     CRM_ASSERT(rsc);
     pe_rsc_trace(rsc, "%s on %s %d", rsc->id, next ? next->details->uname : "N/A", optional);
     start = start_action(rsc, next, TRUE);
+
+    if(is_set(rsc->flags, pe_rsc_needs_unfencing)) {
+        action_t *unfence = pe_fence_op(next, "on", TRUE, __FUNCTION__, data_set);
+        const char *unfenced = g_hash_table_lookup(next->details->attrs, XML_NODE_IS_UNFENCED);
+
+        order_actions(unfence, start, pe_order_implies_then);
+
+        if (unfenced == NULL || safe_str_eq("0", unfenced)) {
+            char *reason = crm_strdup_printf("Required by %s", rsc->id);
+            trigger_unfencing(NULL, next, reason, NULL, data_set);
+            free(reason);
+        }
+    }
+
     if (is_set(start->flags, pe_action_runnable) && optional == FALSE) {
         update_action_flags(start, pe_action_optional | pe_action_clear, __FUNCTION__, __LINE__);
     }
+
+
     return TRUE;
 }
 
@@ -2820,14 +2846,9 @@ native_create_probe(resource_t * rsc, node_t * node, action_t * complete,
      * probed, we know the state of all resources that require
      * unfencing and that unfencing occurred.
      */
-    if(is_set(rsc->flags, pe_rsc_fence_device) && is_set(data_set->flags, pe_flag_enable_unfencing)) {
-        trigger_unfencing(NULL, node, "node discovery", probe, data_set);
-        probe->priority = INFINITY; /* Ensure this runs if unfencing succeeds */
-
-    } else if(is_set(rsc->flags, pe_rsc_needs_unfencing)) {
-        action_t *unfence = pe_fence_op(node, "on", TRUE, data_set);
-
-        order_actions(probe, unfence, pe_order_optional);
+    if(is_set(rsc->flags, pe_rsc_needs_unfencing)) {
+        action_t *unfence = pe_fence_op(node, "on", TRUE, __FUNCTION__, data_set);
+        order_actions(unfence, probe, pe_order_optional);
     }
 
     /*
diff --git a/pengine/test10/594.scores b/pengine/test10/594.scores
index 972b89b..430550c 100644
--- a/pengine/test10/594.scores
+++ b/pengine/test10/594.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   hadev3: node is unclean
 Allocation scores:
 clone_color: DoFencing allocation score on hadev1: 0
 clone_color: DoFencing allocation score on hadev2: 0
diff --git a/pengine/test10/594.summary b/pengine/test10/594.summary
index ef2a02c..6cd78d3 100644
--- a/pengine/test10/594.summary
+++ b/pengine/test10/594.summary
@@ -12,6 +12,7 @@ Online: [ hadev1 hadev2 ]
      child_DoFencing:1	(stonith:ssh):	Started hadev1
      child_DoFencing:2	(stonith:ssh):	Started hadev1
 
+  notice: Fencing   hadev3: node is unclean
 Transition Summary:
  * Fence (reboot) hadev3
  * Shutdown hadev2
diff --git a/pengine/test10/829.scores b/pengine/test10/829.scores
index f0652ff..71a372b 100644
--- a/pengine/test10/829.scores
+++ b/pengine/test10/829.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   c001n02: node is unclean
 Allocation scores:
 clone_color: DoFencing allocation score on c001n01: 0
 clone_color: DoFencing allocation score on c001n02: 0
diff --git a/pengine/test10/829.summary b/pengine/test10/829.summary
index 556699f..8649ed8 100644
--- a/pengine/test10/829.summary
+++ b/pengine/test10/829.summary
@@ -14,6 +14,7 @@ Online: [ c001n01 c001n03 c001n08 ]
      child_DoFencing:2	(stonith:ssh):	Started c001n01
      child_DoFencing:3	(stonith:ssh):	Started c001n08
 
+  notice: Fencing   c001n02: node is unclean
 Transition Summary:
  * Fence (reboot) c001n02
  * Move    rsc_c001n02	(Started c001n02 -> c001n01)
diff --git a/pengine/test10/bug-5186-partial-migrate.scores b/pengine/test10/bug-5186-partial-migrate.scores
index 8b29529..dd59f34 100644
--- a/pengine/test10/bug-5186-partial-migrate.scores
+++ b/pengine/test10/bug-5186-partial-migrate.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   bl460g1n7: node is unclean
 Allocation scores:
 clone_color: clnDiskd1 allocation score on bl460g1n6: 200
 clone_color: clnDiskd1 allocation score on bl460g1n7: 0
diff --git a/pengine/test10/bug-5186-partial-migrate.summary b/pengine/test10/bug-5186-partial-migrate.summary
index a32e81d..5c8231d 100644
--- a/pengine/test10/bug-5186-partial-migrate.summary
+++ b/pengine/test10/bug-5186-partial-migrate.summary
@@ -24,6 +24,7 @@ Online: [ bl460g1n6 bl460g1n8 ]
      prmPing	(ocf::pacemaker:ping):	Started bl460g1n7 (UNCLEAN)
      Started: [ bl460g1n6 bl460g1n8 ]
 
+  notice: Fencing   bl460g1n7: node is unclean
 Transition Summary:
  * Fence (reboot) bl460g1n7
  * Move    prmDummy	(Started bl460g1n7 -> bl460g1n6)
diff --git a/pengine/test10/bug-cl-5247.scores b/pengine/test10/bug-cl-5247.scores
index e9e4709..f1ded69 100644
--- a/pengine/test10/bug-cl-5247.scores
+++ b/pengine/test10/bug-cl-5247.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   pgsr02: guest is unclean
 Allocation scores:
 Using the original execution date of: 2015-08-12 02:53:40Z
 clone_color: msPostgresql allocation score on bl460g8n3: -INFINITY
diff --git a/pengine/test10/bug-cl-5247.summary b/pengine/test10/bug-cl-5247.summary
index f70a9ea..755e647 100644
--- a/pengine/test10/bug-cl-5247.summary
+++ b/pengine/test10/bug-cl-5247.summary
@@ -17,6 +17,7 @@ Containers: [ pgsr01:prmDB1 ]
      Masters: [ pgsr01 ]
      Stopped: [ bl460g8n3 bl460g8n4 ]
 
+  notice: Fencing   pgsr02: guest is unclean
 Transition Summary:
  * Fence (off) pgsr02 (resource: prmDB2)
  * Stop    prmDB2	(bl460g8n4)
diff --git a/pengine/test10/bug-lf-2508.scores b/pengine/test10/bug-lf-2508.scores
index 3c3ce16..200d548 100644
--- a/pengine/test10/bug-lf-2508.scores
+++ b/pengine/test10/bug-lf-2508.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   srv02: node is unclean
 Allocation scores:
 clone_color: clnStonith1 allocation score on srv01: -INFINITY
 clone_color: clnStonith1 allocation score on srv02: 0
diff --git a/pengine/test10/bug-lf-2508.summary b/pengine/test10/bug-lf-2508.summary
index 7931d19..18080cb 100644
--- a/pengine/test10/bug-lf-2508.summary
+++ b/pengine/test10/bug-lf-2508.summary
@@ -34,6 +34,7 @@ Online: [ srv01 srv03 srv04 ]
      Started: [ srv01 srv03 ]
      Stopped: [ srv04 ]
 
+  notice: Fencing   srv02: node is unclean
 Transition Summary:
  * Fence (reboot) srv02
  * Start   Dummy01	(srv01)
diff --git a/pengine/test10/bug-lf-2551.scores b/pengine/test10/bug-lf-2551.scores
index 2b0aa12..64cbca0 100644
--- a/pengine/test10/bug-lf-2551.scores
+++ b/pengine/test10/bug-lf-2551.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   hex-9: node is unclean
 Allocation scores:
 clone_color: base-clone allocation score on hex-0: 14
 clone_color: base-clone allocation score on hex-7: 16
diff --git a/pengine/test10/bug-lf-2551.summary b/pengine/test10/bug-lf-2551.summary
index ef2e54a..4fa553c 100644
--- a/pengine/test10/bug-lf-2551.summary
+++ b/pengine/test10/bug-lf-2551.summary
@@ -80,6 +80,7 @@ Online: [ hex-0 hex-7 hex-8 ]
  vm-63	(ocf::heartbeat:Xen):	Stopped 
  vm-64	(ocf::heartbeat:Xen):	Stopped 
 
+  notice: Fencing   hex-9: node is unclean
 Transition Summary:
  * Fence (reboot) hex-9
  * Move    fencing-sbd	(Started hex-9 -> hex-0)
diff --git a/pengine/test10/bug-lf-2606.scores b/pengine/test10/bug-lf-2606.scores
index 6a9d522..b1e6a02 100644
--- a/pengine/test10/bug-lf-2606.scores
+++ b/pengine/test10/bug-lf-2606.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   node2: node is unclean
 Allocation scores:
 clone_color: ms3 allocation score on node1: 0
 clone_color: ms3 allocation score on node2: 0
diff --git a/pengine/test10/bug-lf-2606.summary b/pengine/test10/bug-lf-2606.summary
index f30a053..e6cfa89 100644
--- a/pengine/test10/bug-lf-2606.summary
+++ b/pengine/test10/bug-lf-2606.summary
@@ -11,6 +11,7 @@ Online: [ node1 ]
      Masters: [ node2 ]
      Slaves: [ node1 ]
 
+  notice: Fencing   node2: node is unclean
 Transition Summary:
  * Fence (reboot) node2
  * Stop    rsc1	(node2)
diff --git a/pengine/test10/bug-rh-1097457.scores b/pengine/test10/bug-rh-1097457.scores
index 7729421..2fe2859 100644
--- a/pengine/test10/bug-rh-1097457.scores
+++ b/pengine/test10/bug-rh-1097457.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   lamaVM2: guest is unclean
 Allocation scores:
 clone_color: FAKE6-clone allocation score on lama2: -INFINITY
 clone_color: FAKE6-clone allocation score on lama3: -INFINITY
diff --git a/pengine/test10/bug-rh-1097457.summary b/pengine/test10/bug-rh-1097457.summary
index 1c355c0..19aa39d 100644
--- a/pengine/test10/bug-rh-1097457.summary
+++ b/pengine/test10/bug-rh-1097457.summary
@@ -31,6 +31,7 @@ Containers: [ lamaVM1:VM1 lamaVM2:VM2 lamaVM3:VM3 ]
  Clone Set: FAKE6-clone [FAKE6]
      Started: [ lamaVM1 lamaVM2 lamaVM3 ]
 
+  notice: Fencing   lamaVM2: guest is unclean
 Transition Summary:
  * Fence (reboot) lamaVM2 (resource: VM2)
  * Recover VM2	(Started lama3)
diff --git a/pengine/test10/concurrent-fencing.scores b/pengine/test10/concurrent-fencing.scores
index 0322231..1be723e 100644
--- a/pengine/test10/concurrent-fencing.scores
+++ b/pengine/test10/concurrent-fencing.scores
@@ -1,3 +1,6 @@
+  notice: Fencing   node1: node is unclean
+  notice: Fencing   node2: node is unclean
+  notice: Fencing   node3: node is unclean
 Allocation scores:
 native_color: lsb_dummy allocation score on node1: 0
 native_color: lsb_dummy allocation score on node2: 0
diff --git a/pengine/test10/concurrent-fencing.summary b/pengine/test10/concurrent-fencing.summary
index 1e4a817..3f54c2c 100644
--- a/pengine/test10/concurrent-fencing.summary
+++ b/pengine/test10/concurrent-fencing.summary
@@ -7,6 +7,9 @@ Node node3 (uuid3): UNCLEAN (offline)
  stonith-1	(stonith:dummy):	Stopped
  lsb_dummy	(lsb:/usr/lib/heartbeat/cts/LSBDummy):	Stopped
 
+  notice: Fencing   node1: node is unclean
+  notice: Fencing   node2: node is unclean
+  notice: Fencing   node3: node is unclean
 Transition Summary:
  * Fence (reboot) node3
  * Fence (reboot) node2
diff --git a/pengine/test10/guest-node-host-dies.scores b/pengine/test10/guest-node-host-dies.scores
index 0d7ad3f..663d236 100644
--- a/pengine/test10/guest-node-host-dies.scores
+++ b/pengine/test10/guest-node-host-dies.scores
@@ -1,3 +1,6 @@
+  notice: Fencing   lxc1: guest is unclean
+  notice: Fencing   lxc2: guest is unclean
+  notice: Fencing   rhel7-1: node is unclean
 Allocation scores:
 clone_color: lxc-ms-master allocation score on lxc1: INFINITY
 clone_color: lxc-ms-master allocation score on lxc2: INFINITY
diff --git a/pengine/test10/guest-node-host-dies.summary b/pengine/test10/guest-node-host-dies.summary
index 9f85613..679deb6 100644
--- a/pengine/test10/guest-node-host-dies.summary
+++ b/pengine/test10/guest-node-host-dies.summary
@@ -10,6 +10,9 @@ Online: [ rhel7-2 rhel7-3 rhel7-4 rhel7-5 ]
  Master/Slave Set: lxc-ms-master [lxc-ms]
      Stopped: [ rhel7-1 rhel7-2 rhel7-3 rhel7-4 rhel7-5 ]
 
+  notice: Fencing   lxc1: guest is unclean
+  notice: Fencing   lxc2: guest is unclean
+  notice: Fencing   rhel7-1: node is unclean
 Transition Summary:
  * Fence (reboot) rhel7-1
  * Fence (reboot) lxc2 (resource: container2)
diff --git a/pengine/test10/interleave-pseudo-stop.scores b/pengine/test10/interleave-pseudo-stop.scores
index 014f4de..625ba18 100644
--- a/pengine/test10/interleave-pseudo-stop.scores
+++ b/pengine/test10/interleave-pseudo-stop.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   node1: node is unclean
 Allocation scores:
 clone_color: configstoreclone:0 allocation score on node1: 0
 clone_color: configstoreclone:0 allocation score on node2: 1
diff --git a/pengine/test10/interleave-pseudo-stop.summary b/pengine/test10/interleave-pseudo-stop.summary
index 12be956..8c22b2f 100644
--- a/pengine/test10/interleave-pseudo-stop.summary
+++ b/pengine/test10/interleave-pseudo-stop.summary
@@ -16,6 +16,7 @@ Online: [ node2 ]
      configstoreclone	(ocf::heartbeat:Filesystem):	Started node1 (UNCLEAN)
      Started: [ node2 ]
 
+  notice: Fencing   node1: node is unclean
 Transition Summary:
  * Fence (reboot) node1
  * Stop    stonithclone:1	(node1)
diff --git a/pengine/test10/master-7.scores b/pengine/test10/master-7.scores
index 37fc6cd..7569625 100644
--- a/pengine/test10/master-7.scores
+++ b/pengine/test10/master-7.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   c001n01: node is unclean
 Allocation scores:
 clone_color: DoFencing allocation score on c001n01: 0
 clone_color: DoFencing allocation score on c001n02: 0
diff --git a/pengine/test10/master-7.summary b/pengine/test10/master-7.summary
index 2889efb..d76051e 100644
--- a/pengine/test10/master-7.summary
+++ b/pengine/test10/master-7.summary
@@ -28,6 +28,7 @@ Online: [ c001n02 c001n03 c001n08 ]
      ocf_msdummy:6	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n02 
      ocf_msdummy:7	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n08 
 
+  notice: Fencing   c001n01: node is unclean
 Transition Summary:
  * Fence (reboot) c001n01
  * Move    DcIPaddr	(Started c001n01 -> c001n03)
diff --git a/pengine/test10/master-8.scores b/pengine/test10/master-8.scores
index c9d1cc9..880d7fb 100644
--- a/pengine/test10/master-8.scores
+++ b/pengine/test10/master-8.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   c001n01: node is unclean
 Allocation scores:
 clone_color: DoFencing allocation score on c001n01: 0
 clone_color: DoFencing allocation score on c001n02: 0
diff --git a/pengine/test10/master-8.summary b/pengine/test10/master-8.summary
index 5968a25..7d0b840 100644
--- a/pengine/test10/master-8.summary
+++ b/pengine/test10/master-8.summary
@@ -28,6 +28,7 @@ Online: [ c001n02 c001n03 c001n08 ]
      ocf_msdummy:6	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n02 
      ocf_msdummy:7	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n08 
 
+  notice: Fencing   c001n01: node is unclean
 Transition Summary:
  * Fence (reboot) c001n01
  * Move    DcIPaddr	(Started c001n01 -> c001n03)
diff --git a/pengine/test10/migrate-fencing.scores b/pengine/test10/migrate-fencing.scores
index 3febd69..37d42b4 100644
--- a/pengine/test10/migrate-fencing.scores
+++ b/pengine/test10/migrate-fencing.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   pcmk-4: node is unclean
 Allocation scores:
 clone_color: Connectivity allocation score on pcmk-1: 0
 clone_color: Connectivity allocation score on pcmk-2: 0
diff --git a/pengine/test10/migrate-fencing.summary b/pengine/test10/migrate-fencing.summary
index 842c65d..fdb905e 100644
--- a/pengine/test10/migrate-fencing.summary
+++ b/pengine/test10/migrate-fencing.summary
@@ -21,6 +21,7 @@ Online: [ pcmk-1 pcmk-2 pcmk-3 ]
      Masters: [ pcmk-4 ]
      Slaves: [ pcmk-1 pcmk-2 pcmk-3 ]
 
+  notice: Fencing   pcmk-4: node is unclean
 Transition Summary:
  * Fence (reboot) pcmk-4
  * Stop    FencingChild:0	(pcmk-4)
diff --git a/pengine/test10/rec-node-11.scores b/pengine/test10/rec-node-11.scores
index 482deeb..86c2bf5 100644
--- a/pengine/test10/rec-node-11.scores
+++ b/pengine/test10/rec-node-11.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   node1: node is unclean
 Allocation scores:
 group_color: group1 allocation score on node1: 0
 group_color: group1 allocation score on node2: 0
diff --git a/pengine/test10/rec-node-11.summary b/pengine/test10/rec-node-11.summary
index 22f5af7..f45f0a8 100644
--- a/pengine/test10/rec-node-11.summary
+++ b/pengine/test10/rec-node-11.summary
@@ -9,6 +9,7 @@ Online: [ node2 ]
      rsc2	(heartbeat:apache):	Started node1
  rsc3	(heartbeat:apache):	Started node2
 
+  notice: Fencing   node1: node is unclean
 Transition Summary:
  * Fence (reboot) node1
  * Start   stonith-1	(node2)
diff --git a/pengine/test10/rec-node-12.scores b/pengine/test10/rec-node-12.scores
index 153c232..4fd9ff5 100644
--- a/pengine/test10/rec-node-12.scores
+++ b/pengine/test10/rec-node-12.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   c001n02: node is unclean
 Allocation scores:
 clone_color: DoFencing allocation score on c001n01: 0
 clone_color: DoFencing allocation score on c001n02: 0
diff --git a/pengine/test10/rec-node-12.summary b/pengine/test10/rec-node-12.summary
index 6316fdb..562cae9 100644
--- a/pengine/test10/rec-node-12.summary
+++ b/pengine/test10/rec-node-12.summary
@@ -14,6 +14,7 @@ Online: [ c001n01 c001n03 c001n08 ]
      child_DoFencing:2	(stonith:ssh):	Stopped 
      child_DoFencing:3	(stonith:ssh):	Stopped 
 
+  notice: Fencing   c001n02: node is unclean
 Transition Summary:
  * Fence (reboot) c001n02
  * Start   DcIPaddr	(c001n08)
diff --git a/pengine/test10/rec-node-13.scores b/pengine/test10/rec-node-13.scores
index dda1134..bdb5004 100644
--- a/pengine/test10/rec-node-13.scores
+++ b/pengine/test10/rec-node-13.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   c001n04: node is unclean
 Allocation scores:
 clone_color: DoFencing allocation score on c001n02: 0
 clone_color: DoFencing allocation score on c001n03: 0
diff --git a/pengine/test10/rec-node-13.summary b/pengine/test10/rec-node-13.summary
index c222ad8..d3b4d65 100644
--- a/pengine/test10/rec-node-13.summary
+++ b/pengine/test10/rec-node-13.summary
@@ -33,6 +33,7 @@ OFFLINE: [ c001n03 c001n05 ]
      ocf_msdummy:10	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n06 
      ocf_msdummy:11	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n07 
 
+  notice: Fencing   c001n04: node is unclean
 Transition Summary:
  * Fence (reboot) c001n04
  * Stop    ocf_msdummy:6	(c001n04)
diff --git a/pengine/test10/rec-node-14.scores b/pengine/test10/rec-node-14.scores
index 0322231..1be723e 100644
--- a/pengine/test10/rec-node-14.scores
+++ b/pengine/test10/rec-node-14.scores
@@ -1,3 +1,6 @@
+  notice: Fencing   node1: node is unclean
+  notice: Fencing   node2: node is unclean
+  notice: Fencing   node3: node is unclean
 Allocation scores:
 native_color: lsb_dummy allocation score on node1: 0
 native_color: lsb_dummy allocation score on node2: 0
diff --git a/pengine/test10/rec-node-14.summary b/pengine/test10/rec-node-14.summary
index f503a92..a707aee 100644
--- a/pengine/test10/rec-node-14.summary
+++ b/pengine/test10/rec-node-14.summary
@@ -7,6 +7,9 @@ Node node3 (uuid3): UNCLEAN (offline)
  stonith-1	(stonith:dummy):	Stopped 
  lsb_dummy	(lsb:/usr/lib/heartbeat/cts/LSBDummy):	Stopped 
 
+  notice: Fencing   node1: node is unclean
+  notice: Fencing   node2: node is unclean
+  notice: Fencing   node3: node is unclean
 Transition Summary:
  * Fence (reboot) node3
  * Fence (reboot) node2
diff --git a/pengine/test10/rec-node-15.scores b/pengine/test10/rec-node-15.scores
index 03dc6e6..d8b9617 100644
--- a/pengine/test10/rec-node-15.scores
+++ b/pengine/test10/rec-node-15.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   sapcl03: node is unclean
 Allocation scores:
 group_color: Filesystem_13 allocation score on sapcl01: 0
 group_color: Filesystem_13 allocation score on sapcl02: 0
diff --git a/pengine/test10/rec-node-15.summary b/pengine/test10/rec-node-15.summary
index 2f706d2..863bfd4 100644
--- a/pengine/test10/rec-node-15.summary
+++ b/pengine/test10/rec-node-15.summary
@@ -20,6 +20,7 @@ Online: [ sapcl01 ]
      oracle_24	(ocf::heartbeat:oracle):	Stopped 
      oralsnr_25	(ocf::heartbeat:oralsnr):	Stopped 
 
+  notice: Fencing   sapcl03: node is unclean
 Transition Summary:
  * Fence (reboot) sapcl03
  * Start   stonith-1	(sapcl01)
diff --git a/pengine/test10/rec-node-2.scores b/pengine/test10/rec-node-2.scores
index 68e176f..6efa92d 100644
--- a/pengine/test10/rec-node-2.scores
+++ b/pengine/test10/rec-node-2.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   node1: node is unclean
 Allocation scores:
 group_color: group1 allocation score on node1: 0
 group_color: group1 allocation score on node2: 0
diff --git a/pengine/test10/rec-node-2.summary b/pengine/test10/rec-node-2.summary
index 0e0183f..ecf6562 100644
--- a/pengine/test10/rec-node-2.summary
+++ b/pengine/test10/rec-node-2.summary
@@ -13,6 +13,7 @@ Online: [ node2 ]
      rsc5	(heartbeat:apache):	Stopped 
      rsc6	(heartbeat:apache):	Stopped 
 
+  notice: Fencing   node1: node is unclean
 Transition Summary:
  * Fence (reboot) node1
  * Start   stonith-1	(node2)
diff --git a/pengine/test10/rec-node-4.scores b/pengine/test10/rec-node-4.scores
index 1d008ec..e25a30f 100644
--- a/pengine/test10/rec-node-4.scores
+++ b/pengine/test10/rec-node-4.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   node1: node is unclean
 Allocation scores:
 native_color: rsc1 allocation score on node1: -INFINITY
 native_color: rsc1 allocation score on node2: 0
diff --git a/pengine/test10/rec-node-4.summary b/pengine/test10/rec-node-4.summary
index 0a2606e..f46a3bb 100644
--- a/pengine/test10/rec-node-4.summary
+++ b/pengine/test10/rec-node-4.summary
@@ -7,6 +7,7 @@ Online: [ node2 ]
  rsc1	(heartbeat:apache):	Started node1 (UNCLEAN)
  rsc2	(heartbeat:apache):	Started node1 (UNCLEAN)
 
+  notice: Fencing   node1: node is unclean
 Transition Summary:
  * Fence (reboot) node1
  * Start   stonith-1	(node2)
diff --git a/pengine/test10/rec-node-6.scores b/pengine/test10/rec-node-6.scores
index 1d008ec..e25a30f 100644
--- a/pengine/test10/rec-node-6.scores
+++ b/pengine/test10/rec-node-6.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   node1: node is unclean
 Allocation scores:
 native_color: rsc1 allocation score on node1: -INFINITY
 native_color: rsc1 allocation score on node2: 0
diff --git a/pengine/test10/rec-node-6.summary b/pengine/test10/rec-node-6.summary
index 530c7d2..37257fe 100644
--- a/pengine/test10/rec-node-6.summary
+++ b/pengine/test10/rec-node-6.summary
@@ -7,6 +7,7 @@ Online: [ node2 ]
  rsc1	(heartbeat:apache):	Started node1
  rsc2	(heartbeat:apache):	Started node1
 
+  notice: Fencing   node1: node is unclean
 Transition Summary:
  * Fence (reboot) node1
  * Start   stonith-1	(node2)
diff --git a/pengine/test10/rec-node-7.scores b/pengine/test10/rec-node-7.scores
index 1d008ec..e25a30f 100644
--- a/pengine/test10/rec-node-7.scores
+++ b/pengine/test10/rec-node-7.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   node1: node is unclean
 Allocation scores:
 native_color: rsc1 allocation score on node1: -INFINITY
 native_color: rsc1 allocation score on node2: 0
diff --git a/pengine/test10/rec-node-7.summary b/pengine/test10/rec-node-7.summary
index 0a2606e..f46a3bb 100644
--- a/pengine/test10/rec-node-7.summary
+++ b/pengine/test10/rec-node-7.summary
@@ -7,6 +7,7 @@ Online: [ node2 ]
  rsc1	(heartbeat:apache):	Started node1 (UNCLEAN)
  rsc2	(heartbeat:apache):	Started node1 (UNCLEAN)
 
+  notice: Fencing   node1: node is unclean
 Transition Summary:
  * Fence (reboot) node1
  * Start   stonith-1	(node2)
diff --git a/pengine/test10/rec-rsc-5.scores b/pengine/test10/rec-rsc-5.scores
index 1c640ae..ebaedbd 100644
--- a/pengine/test10/rec-rsc-5.scores
+++ b/pengine/test10/rec-rsc-5.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   node2: node is unclean
 Allocation scores:
 native_color: rsc1 allocation score on node1: 0
 native_color: rsc1 allocation score on node2: -INFINITY
diff --git a/pengine/test10/rec-rsc-5.summary b/pengine/test10/rec-rsc-5.summary
index c3e658a..6bc4010 100644
--- a/pengine/test10/rec-rsc-5.summary
+++ b/pengine/test10/rec-rsc-5.summary
@@ -7,6 +7,7 @@ Online: [ node1 ]
  rsc1	(heartbeat:apache):	FAILED node2 
  rsc2	(heartbeat:apache):	Started node2
 
+  notice: Fencing   node2: node is unclean
 Transition Summary:
  * Fence (reboot) node2
  * Start   stonith-1	(node1)
diff --git a/pengine/test10/remote-fence-before-reconnect.scores b/pengine/test10/remote-fence-before-reconnect.scores
index fb46919..9423693 100644
--- a/pengine/test10/remote-fence-before-reconnect.scores
+++ b/pengine/test10/remote-fence-before-reconnect.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   c7auto4: node is unclean
 Allocation scores:
 native_color: c7auto4 allocation score on c7auto1: -INFINITY
 native_color: c7auto4 allocation score on c7auto2: -INFINITY
diff --git a/pengine/test10/remote-fence-before-reconnect.summary b/pengine/test10/remote-fence-before-reconnect.summary
index 2ce3315..f477884 100644
--- a/pengine/test10/remote-fence-before-reconnect.summary
+++ b/pengine/test10/remote-fence-before-reconnect.summary
@@ -11,6 +11,7 @@ Online: [ c7auto1 c7auto2 c7auto3 ]
  fake4	(ocf::heartbeat:Dummy):	Started c7auto2
  fake5	(ocf::heartbeat:Dummy):	Started c7auto3
 
+  notice: Fencing   c7auto4: node is unclean
 Transition Summary:
  * Fence (reboot) c7auto4
  * Stop    c7auto4	(c7auto1)
diff --git a/pengine/test10/remote-fence-unclean-3.scores b/pengine/test10/remote-fence-unclean-3.scores
index 77d71d6..283a599 100644
--- a/pengine/test10/remote-fence-unclean-3.scores
+++ b/pengine/test10/remote-fence-unclean-3.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   overcloud-novacompute-0: node is unclean
 Allocation scores:
 clone_color: galera-bundle-master allocation score on galera-bundle-0: 0
 clone_color: galera-bundle-master allocation score on galera-bundle-1: 0
diff --git a/pengine/test10/remote-fence-unclean-3.summary b/pengine/test10/remote-fence-unclean-3.summary
index 9296add..ec5d304 100644
--- a/pengine/test10/remote-fence-unclean-3.summary
+++ b/pengine/test10/remote-fence-unclean-3.summary
@@ -33,6 +33,7 @@ Containers: [ galera-bundle-0:galera-bundle-docker-0 galera-bundle-1:galera-bund
  Docker container: openstack-cinder-backup [192.168.24.1:8787/tripleoupstream/centos-binary-cinder-backup:latest]
    openstack-cinder-backup-docker-0	(ocf::heartbeat:docker):	Started overcloud-controller-1
 
+  notice: Fencing   overcloud-novacompute-0: node is unclean
 Transition Summary:
  * Fence (reboot) overcloud-novacompute-0
  * Start   fence1	(overcloud-controller-0)
diff --git a/pengine/test10/remote-fence-unclean.scores b/pengine/test10/remote-fence-unclean.scores
index 8d29662..038ca2e 100644
--- a/pengine/test10/remote-fence-unclean.scores
+++ b/pengine/test10/remote-fence-unclean.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   remote1: node is unclean
 Allocation scores:
 native_color: FAKE1 allocation score on 18builder: 0
 native_color: FAKE1 allocation score on 18node1: 0
diff --git a/pengine/test10/remote-fence-unclean.summary b/pengine/test10/remote-fence-unclean.summary
index 667549b..8f37909 100644
--- a/pengine/test10/remote-fence-unclean.summary
+++ b/pengine/test10/remote-fence-unclean.summary
@@ -10,6 +10,7 @@ Online: [ 18builder 18node1 18node2 ]
  FAKE3	(ocf::heartbeat:Dummy):	Started 18builder 
  FAKE4	(ocf::heartbeat:Dummy):	Started 18node1 
 
+  notice: Fencing   remote1: node is unclean
 Transition Summary:
  * Fence (reboot) remote1
  * Recover remote1	(Started 18node1)
diff --git a/pengine/test10/remote-fence-unclean2.scores b/pengine/test10/remote-fence-unclean2.scores
index 10fc7fd..937d0eb 100644
--- a/pengine/test10/remote-fence-unclean2.scores
+++ b/pengine/test10/remote-fence-unclean2.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   rhel7-alt4: node is unclean
 Allocation scores:
 native_color: fake allocation score on rhel7-alt1: 0
 native_color: fake allocation score on rhel7-alt2: 0
diff --git a/pengine/test10/remote-fence-unclean2.summary b/pengine/test10/remote-fence-unclean2.summary
index 0844c29..060d55e 100644
--- a/pengine/test10/remote-fence-unclean2.summary
+++ b/pengine/test10/remote-fence-unclean2.summary
@@ -9,6 +9,7 @@ OFFLINE: [ rhel7-alt3 ]
  rhel7-alt4	(ocf::pacemaker:remote):	Stopped 
  fake	(ocf::heartbeat:Dummy):	Started rhel7-alt4 (UNCLEAN)
 
+  notice: Fencing   rhel7-alt4: node is unclean
 Transition Summary:
  * Fence (reboot) rhel7-alt4
  * Stop    fake	(rhel7-alt4)
diff --git a/pengine/test10/remote-partial-migrate2.scores b/pengine/test10/remote-partial-migrate2.scores
index 6965507..ce095b1 100644
--- a/pengine/test10/remote-partial-migrate2.scores
+++ b/pengine/test10/remote-partial-migrate2.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   pcmk4: node is unclean
 Allocation scores:
 native_color: FAKE1 allocation score on pcmk1: -INFINITY
 native_color: FAKE1 allocation score on pcmk2: 0
diff --git a/pengine/test10/remote-partial-migrate2.summary b/pengine/test10/remote-partial-migrate2.summary
index b8b9b4c..c9f9592 100644
--- a/pengine/test10/remote-partial-migrate2.summary
+++ b/pengine/test10/remote-partial-migrate2.summary
@@ -62,6 +62,7 @@ RemoteOFFLINE: [ pcmk_remote4 ]
  FAKE49	(ocf::heartbeat:Dummy):	Started pcmk_remote3 
  FAKE50	(ocf::heartbeat:Dummy):	Started pcmk_remote5 
 
+  notice: Fencing   pcmk4: node is unclean
 Transition Summary:
  * Fence (reboot) pcmk4
  * Migrate pcmk_remote2	(Started pcmk3 -> pcmk1)
diff --git a/pengine/test10/remote-recover-all.scores b/pengine/test10/remote-recover-all.scores
index 43cac62..947f228 100644
--- a/pengine/test10/remote-recover-all.scores
+++ b/pengine/test10/remote-recover-all.scores
@@ -1,3 +1,6 @@
+  notice: Fencing   controller-1: node is unclean
+  notice: Fencing   galera-2: node is unclean
+  notice: Fencing   messaging-1: node is unclean
 Allocation scores:
 Using the original execution date of: 2017-05-03 13:33:24Z
 clone_color: galera-master allocation score on controller-0: -INFINITY
diff --git a/pengine/test10/remote-recover-all.summary b/pengine/test10/remote-recover-all.summary
index 5e4f51d..6868533 100644
--- a/pengine/test10/remote-recover-all.summary
+++ b/pengine/test10/remote-recover-all.summary
@@ -37,6 +37,9 @@ RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
  stonith-fence_ipmilan-525400b4f6bd	(stonith:fence_ipmilan):	Started controller-0
  stonith-fence_ipmilan-5254005bdbb5	(stonith:fence_ipmilan):	Started controller-1 (UNCLEAN)
 
+  notice: Fencing   controller-1: node is unclean
+  notice: Fencing   galera-2: node is unclean
+  notice: Fencing   messaging-1: node is unclean
 Transition Summary:
  * Fence (reboot) messaging-1
  * Fence (reboot) galera-2
diff --git a/pengine/test10/remote-recover-connection.scores b/pengine/test10/remote-recover-connection.scores
index 56a18eb..3d3beae 100644
--- a/pengine/test10/remote-recover-connection.scores
+++ b/pengine/test10/remote-recover-connection.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   controller-1: node is unclean
 Allocation scores:
 Using the original execution date of: 2017-05-03 13:33:24Z
 clone_color: galera-master allocation score on controller-0: -INFINITY
diff --git a/pengine/test10/remote-recover-connection.summary b/pengine/test10/remote-recover-connection.summary
index 79ea7da..f21b2b5 100644
--- a/pengine/test10/remote-recover-connection.summary
+++ b/pengine/test10/remote-recover-connection.summary
@@ -37,6 +37,7 @@ RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
  stonith-fence_ipmilan-525400b4f6bd	(stonith:fence_ipmilan):	Started controller-0
  stonith-fence_ipmilan-5254005bdbb5	(stonith:fence_ipmilan):	Started controller-1 (UNCLEAN)
 
+  notice: Fencing   controller-1: node is unclean
 Transition Summary:
  * Fence (reboot) controller-1
  * Move    messaging-1	(Started controller-1 -> controller-2)
diff --git a/pengine/test10/remote-recover-fail.scores b/pengine/test10/remote-recover-fail.scores
index 8fc7805..02a0643 100644
--- a/pengine/test10/remote-recover-fail.scores
+++ b/pengine/test10/remote-recover-fail.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   rhel7-auto4: node is unclean
 Allocation scores:
 native_color: FAKE1 allocation score on rhel7-auto1: 0
 native_color: FAKE1 allocation score on rhel7-auto2: 0
diff --git a/pengine/test10/remote-recover-fail.summary b/pengine/test10/remote-recover-fail.summary
index 313c8ac..fd518eb 100644
--- a/pengine/test10/remote-recover-fail.summary
+++ b/pengine/test10/remote-recover-fail.summary
@@ -13,6 +13,7 @@ OFFLINE: [ rhel7-auto1 ]
  FAKE5	(ocf::heartbeat:Dummy):	Started rhel7-auto3 
  FAKE6	(ocf::heartbeat:Dummy):	Started rhel7-auto4 (UNCLEAN)
 
+  notice: Fencing   rhel7-auto4: node is unclean
 Transition Summary:
  * Fence (reboot) rhel7-auto4
  * Recover rhel7-auto4	(Started rhel7-auto2)
diff --git a/pengine/test10/remote-recover-no-resources.scores b/pengine/test10/remote-recover-no-resources.scores
index e918fc6..36a1ff4 100644
--- a/pengine/test10/remote-recover-no-resources.scores
+++ b/pengine/test10/remote-recover-no-resources.scores
@@ -1,3 +1,5 @@
+  notice: Fencing   controller-1: node is unclean
+  notice: Fencing   messaging-1: node is unclean
 Allocation scores:
 Using the original execution date of: 2017-05-03 13:33:24Z
 clone_color: galera-master allocation score on controller-0: -INFINITY
diff --git a/pengine/test10/remote-recover-no-resources.summary b/pengine/test10/remote-recover-no-resources.summary
index bd27773..c3cd6a8 100644
--- a/pengine/test10/remote-recover-no-resources.summary
+++ b/pengine/test10/remote-recover-no-resources.summary
@@ -37,6 +37,8 @@ RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
  stonith-fence_ipmilan-525400b4f6bd	(stonith:fence_ipmilan):	Started controller-0
  stonith-fence_ipmilan-5254005bdbb5	(stonith:fence_ipmilan):	Started controller-1 (UNCLEAN)
 
+  notice: Fencing   controller-1: node is unclean
+  notice: Fencing   messaging-1: node is unclean
 Transition Summary:
  * Fence (reboot) messaging-1
  * Fence (reboot) controller-1
diff --git a/pengine/test10/remote-recover-unknown.scores b/pengine/test10/remote-recover-unknown.scores
index e918fc6..d7d7713 100644
--- a/pengine/test10/remote-recover-unknown.scores
+++ b/pengine/test10/remote-recover-unknown.scores
@@ -1,3 +1,6 @@
+  notice: Fencing   controller-1: node is unclean
+  notice: Fencing   galera-2: node is unclean
+  notice: Fencing   messaging-1: node is unclean
 Allocation scores:
 Using the original execution date of: 2017-05-03 13:33:24Z
 clone_color: galera-master allocation score on controller-0: -INFINITY
diff --git a/pengine/test10/remote-recover-unknown.summary b/pengine/test10/remote-recover-unknown.summary
index 8a3d560..5b03065 100644
--- a/pengine/test10/remote-recover-unknown.summary
+++ b/pengine/test10/remote-recover-unknown.summary
@@ -37,6 +37,9 @@ RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
  stonith-fence_ipmilan-525400b4f6bd	(stonith:fence_ipmilan):	Started controller-0
  stonith-fence_ipmilan-5254005bdbb5	(stonith:fence_ipmilan):	Started controller-1 (UNCLEAN)
 
+  notice: Fencing   controller-1: node is unclean
+  notice: Fencing   galera-2: node is unclean
+  notice: Fencing   messaging-1: node is unclean
 Transition Summary:
  * Fence (reboot) messaging-1
  * Fence (reboot) galera-2
diff --git a/pengine/test10/remote-recovery.scores b/pengine/test10/remote-recovery.scores
index 56a18eb..3d3beae 100644
--- a/pengine/test10/remote-recovery.scores
+++ b/pengine/test10/remote-recovery.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   controller-1: node is unclean
 Allocation scores:
 Using the original execution date of: 2017-05-03 13:33:24Z
 clone_color: galera-master allocation score on controller-0: -INFINITY
diff --git a/pengine/test10/remote-recovery.summary b/pengine/test10/remote-recovery.summary
index 79ea7da..f21b2b5 100644
--- a/pengine/test10/remote-recovery.summary
+++ b/pengine/test10/remote-recovery.summary
@@ -37,6 +37,7 @@ RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
  stonith-fence_ipmilan-525400b4f6bd	(stonith:fence_ipmilan):	Started controller-0
  stonith-fence_ipmilan-5254005bdbb5	(stonith:fence_ipmilan):	Started controller-1 (UNCLEAN)
 
+  notice: Fencing   controller-1: node is unclean
 Transition Summary:
  * Fence (reboot) controller-1
  * Move    messaging-1	(Started controller-1 -> controller-2)
diff --git a/pengine/test10/remote-unclean2.scores b/pengine/test10/remote-unclean2.scores
index 72a5953..2c2c9a5 100644
--- a/pengine/test10/remote-unclean2.scores
+++ b/pengine/test10/remote-unclean2.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   rhel7-auto4: node is unclean
 Allocation scores:
 native_color: rhel7-auto4 allocation score on rhel7-auto1: 0
 native_color: rhel7-auto4 allocation score on rhel7-auto2: 0
diff --git a/pengine/test10/remote-unclean2.summary b/pengine/test10/remote-unclean2.summary
index 877eb4d..06047d1 100644
--- a/pengine/test10/remote-unclean2.summary
+++ b/pengine/test10/remote-unclean2.summary
@@ -6,6 +6,7 @@ Online: [ rhel7-auto1 rhel7-auto2 rhel7-auto3 ]
  shooter	(stonith:fence_xvm):	Started rhel7-auto2 
  rhel7-auto4	(ocf::pacemaker:remote):	FAILED rhel7-auto1 
 
+  notice: Fencing   rhel7-auto4: node is unclean
 Transition Summary:
  * Fence (reboot) rhel7-auto4
  * Recover rhel7-auto4	(Started rhel7-auto1)
diff --git a/pengine/test10/start-then-stop-with-unfence.dot b/pengine/test10/start-then-stop-with-unfence.dot
index d8f7a71..6e9569b 100644
--- a/pengine/test10/start-then-stop-with-unfence.dot
+++ b/pengine/test10/start-then-stop-with-unfence.dot
@@ -23,7 +23,5 @@ digraph "g" {
 "mpath-node2_monitor_0 rhel7-node1.example.com" [ style=bold color="green" fontcolor="black"]
 "stonith 'on' rhel7-node1.example.com" -> "ip1_start_0 rhel7-node1.example.com" [ style = bold]
 "stonith 'on' rhel7-node1.example.com" -> "jrummy_start_0 rhel7-node1.example.com" [ style = bold]
-"stonith 'on' rhel7-node1.example.com" -> "mpath-node1_monitor_0 rhel7-node1.example.com" [ style = bold]
-"stonith 'on' rhel7-node1.example.com" -> "mpath-node2_monitor_0 rhel7-node1.example.com" [ style = bold]
 "stonith 'on' rhel7-node1.example.com" [ style=bold color="green" fontcolor="black"]
 }
diff --git a/pengine/test10/start-then-stop-with-unfence.exp b/pengine/test10/start-then-stop-with-unfence.exp
index 359f25b..75cb356 100644
--- a/pengine/test10/start-then-stop-with-unfence.exp
+++ b/pengine/test10/start-then-stop-with-unfence.exp
@@ -1,16 +1,12 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
-  <synapse id="0" priority="1000000">
+  <synapse id="0">
     <action_set>
       <rsc_op id="8" operation="monitor" operation_key="mpath-node2_monitor_0" on_node="rhel7-node1.example.com" on_node_uuid="1">
         <primitive id="mpath-node2" class="stonith" type="fence_mpath"/>
         <attributes CRM_meta_on_node="rhel7-node1.example.com" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  devices="/dev/mapper/clustPVa" key="1234" pcmk_host_list="rhel7-node2.example.com"/>
       </rsc_op>
     </action_set>
-    <inputs>
-      <trigger>
-        <crm_event id="6" operation="stonith" operation_key="stonith-rhel7-node1.example.com-on" on_node="rhel7-node1.example.com" on_node_uuid="1"/>
-      </trigger>
-    </inputs>
+    <inputs/>
   </synapse>
   <synapse id="1">
     <action_set>
@@ -38,18 +34,14 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="3" priority="1000000">
+  <synapse id="3">
     <action_set>
       <rsc_op id="9" operation="monitor" operation_key="mpath-node1_monitor_0" on_node="rhel7-node1.example.com" on_node_uuid="1">
         <primitive id="mpath-node1" class="stonith" type="fence_mpath"/>
         <attributes CRM_meta_on_node="rhel7-node1.example.com" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  devices="/dev/mapper/clustPVa" key="1233" pcmk_host_list="rhel7-node1.example.com"/>
       </rsc_op>
     </action_set>
-    <inputs>
-      <trigger>
-        <crm_event id="6" operation="stonith" operation_key="stonith-rhel7-node1.example.com-on" on_node="rhel7-node1.example.com" on_node_uuid="1"/>
-      </trigger>
-    </inputs>
+    <inputs/>
   </synapse>
   <synapse id="4">
     <action_set>
diff --git a/pengine/test10/start-then-stop-with-unfence.scores b/pengine/test10/start-then-stop-with-unfence.scores
index d353bef..a53e9f2 100644
--- a/pengine/test10/start-then-stop-with-unfence.scores
+++ b/pengine/test10/start-then-stop-with-unfence.scores
@@ -1,3 +1,4 @@
+  notice: Unfencing rhel7-node1.example.com: Required by ip1
 Allocation scores:
 clone_color: jrummy-clone allocation score on rhel7-node1.example.com: 500
 clone_color: jrummy-clone allocation score on rhel7-node2.example.com: 500
diff --git a/pengine/test10/start-then-stop-with-unfence.summary b/pengine/test10/start-then-stop-with-unfence.summary
index ae54afc..bb376f5 100644
--- a/pengine/test10/start-then-stop-with-unfence.summary
+++ b/pengine/test10/start-then-stop-with-unfence.summary
@@ -10,6 +10,7 @@ Online: [ rhel7-node1.example.com rhel7-node2.example.com ]
      Started: [ rhel7-node2.example.com ]
      Stopped: [ rhel7-node1.example.com ]
 
+  notice: Unfencing rhel7-node1.example.com: Required by ip1
 Transition Summary:
  * Fence (on) rhel7-node1.example.com
  * Start   mpath-node1	(rhel7-node1.example.com)
@@ -17,17 +18,17 @@ Transition Summary:
  * Start   jrummy:1	(rhel7-node1.example.com)
 
 Executing cluster transition:
- * Pseudo action:   jrummy-clone_start_0
- * Fencing rhel7-node1.example.com (on)
  * Resource action: mpath-node2     monitor on rhel7-node1.example.com
  * Resource action: mpath-node1     monitor on rhel7-node1.example.com
+ * Pseudo action:   jrummy-clone_start_0
+ * Fencing rhel7-node1.example.com (on)
+ * Resource action: mpath-node1     start on rhel7-node1.example.com
  * Resource action: jrummy          start on rhel7-node1.example.com
  * Pseudo action:   jrummy-clone_running_0
- * Resource action: mpath-node1     start on rhel7-node1.example.com
+ * Resource action: mpath-node1     monitor=60000 on rhel7-node1.example.com
  * Resource action: ip1             stop on rhel7-node2.example.com
  * Resource action: jrummy          monitor=10000 on rhel7-node1.example.com
  * Pseudo action:   all_stopped
- * Resource action: mpath-node1     monitor=60000 on rhel7-node1.example.com
  * Resource action: ip1             start on rhel7-node1.example.com
  * Resource action: ip1             monitor=10000 on rhel7-node1.example.com
 
diff --git a/pengine/test10/start-then-stop-with-unfence.xml b/pengine/test10/start-then-stop-with-unfence.xml
index 499022e..b856250 100644
--- a/pengine/test10/start-then-stop-with-unfence.xml
+++ b/pengine/test10/start-then-stop-with-unfence.xml
@@ -95,6 +95,7 @@
         <instance_attributes id="status-2">
           <nvpair id="status-2-shutdown" name="shutdown" value="0"/>
           <nvpair id="status-2-probe_complete" name="probe_complete" value="true"/>
+	  <nvpair id="status-2-unfenced" name="node_unfenced" value="1234567"/>
         </instance_attributes>
       </transient_attributes>
       <lrm id="2">
diff --git a/pengine/test10/stonith-0.scores b/pengine/test10/stonith-0.scores
index 7aab8cd..db3ddb9 100644
--- a/pengine/test10/stonith-0.scores
+++ b/pengine/test10/stonith-0.scores
@@ -1,3 +1,5 @@
+  notice: Fencing   c001n03: node is unclean
+  notice: Fencing   c001n05: node is unclean
 Allocation scores:
 clone_color: DoFencing allocation score on c001n02: 0
 clone_color: DoFencing allocation score on c001n03: 0
diff --git a/pengine/test10/stonith-0.summary b/pengine/test10/stonith-0.summary
index ee8ae15..6983a90 100644
--- a/pengine/test10/stonith-0.summary
+++ b/pengine/test10/stonith-0.summary
@@ -36,6 +36,8 @@ Online: [ c001n02 c001n04 c001n06 c001n07 c001n08 ]
      ocf_msdummy:12	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n06 
      ocf_msdummy:13	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n06 
 
+  notice: Fencing   c001n03: node is unclean
+  notice: Fencing   c001n05: node is unclean
 Transition Summary:
  * Fence (reboot) c001n05
  * Fence (reboot) c001n03
diff --git a/pengine/test10/stonith-1.scores b/pengine/test10/stonith-1.scores
index 7422355..196b9f5 100644
--- a/pengine/test10/stonith-1.scores
+++ b/pengine/test10/stonith-1.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   sles-3: node is unclean
 Allocation scores:
 clone_color: DoFencing allocation score on sles-1: 0
 clone_color: DoFencing allocation score on sles-2: 0
diff --git a/pengine/test10/stonith-1.summary b/pengine/test10/stonith-1.summary
index b68aca7..111bcbe 100644
--- a/pengine/test10/stonith-1.summary
+++ b/pengine/test10/stonith-1.summary
@@ -27,6 +27,7 @@ Online: [ sles-1 sles-2 sles-4 ]
      ocf_msdummy:6	(ocf::heartbeat:Stateful):	Stopped 
      ocf_msdummy:7	(ocf::heartbeat:Stateful):	Stopped 
 
+  notice: Fencing   sles-3: node is unclean
 Transition Summary:
  * Fence (reboot) sles-3
  * Start   r192.168.100.183	(sles-1)
diff --git a/pengine/test10/stonith-2.scores b/pengine/test10/stonith-2.scores
index e1dd011..8c11561 100644
--- a/pengine/test10/stonith-2.scores
+++ b/pengine/test10/stonith-2.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   sles-5: node is unclean
 Allocation scores:
 clone_color: DoFencing allocation score on sles-1: 0
 clone_color: DoFencing allocation score on sles-2: 0
diff --git a/pengine/test10/stonith-2.summary b/pengine/test10/stonith-2.summary
index eef35c4..c8e1d70 100644
--- a/pengine/test10/stonith-2.summary
+++ b/pengine/test10/stonith-2.summary
@@ -32,6 +32,7 @@ Online: [ sles-1 sles-2 sles-3 sles-4 sles-6 ]
      ocf_msdummy:10	(ocf::heartbeat:Stateful):	Slave sles-2 
      ocf_msdummy:11	(ocf::heartbeat:Stateful):	Slave sles-3 
 
+  notice: Fencing   sles-5: node is unclean
 Transition Summary:
  * Fence (reboot) sles-5
  * Start   rsc_sles-5	(sles-6)
diff --git a/pengine/test10/stonith-3.scores b/pengine/test10/stonith-3.scores
index a1bd3d9..eef30fc 100644
--- a/pengine/test10/stonith-3.scores
+++ b/pengine/test10/stonith-3.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   rh5node1: node is unclean
 Allocation scores:
 clone_color: clnStonith allocation score on rh5node1: 0
 clone_color: clnStonith allocation score on rh5node2: 0
diff --git a/pengine/test10/stonith-3.summary b/pengine/test10/stonith-3.summary
index 398b6bc..015dd77 100644
--- a/pengine/test10/stonith-3.summary
+++ b/pengine/test10/stonith-3.summary
@@ -7,6 +7,7 @@ Online: [ rh5node2 ]
  Clone Set: clnStonith [grpStonith]
      Stopped: [ rh5node1 rh5node2 ]
 
+  notice: Fencing   rh5node1: node is unclean
 Transition Summary:
  * Fence (reboot) rh5node1
  * Start   prmIpPostgreSQLDB	(rh5node2)
diff --git a/pengine/test10/stonith-4.scores b/pengine/test10/stonith-4.scores
index ac6fe0b..0bf1cf5 100644
--- a/pengine/test10/stonith-4.scores
+++ b/pengine/test10/stonith-4.scores
@@ -1,3 +1,7 @@
+  notice: Fencing   pcmk-10: node is unclean
+  notice: Fencing   pcmk-5: node is unclean
+  notice: Fencing   pcmk-7: node is unclean
+  notice: Fencing   pcmk-8: node is unclean
 Allocation scores:
 native_color: Fencing allocation score on pcmk-10: 0
 native_color: Fencing allocation score on pcmk-11: 0
diff --git a/pengine/test10/stonith-4.summary b/pengine/test10/stonith-4.summary
index 6e3e396..0c9b5bd 100644
--- a/pengine/test10/stonith-4.summary
+++ b/pengine/test10/stonith-4.summary
@@ -13,6 +13,10 @@ OFFLINE: [ pcmk-4 pcmk-6 ]
 
  Fencing	(stonith:fence_xvm):	Stopped 
 
+  notice: Fencing   pcmk-10: node is unclean
+  notice: Fencing   pcmk-5: node is unclean
+  notice: Fencing   pcmk-7: node is unclean
+  notice: Fencing   pcmk-8: node is unclean
 Transition Summary:
  * Fence (reboot) pcmk-8
  * Fence (reboot) pcmk-7
diff --git a/pengine/test10/stop-failure-no-quorum.scores b/pengine/test10/stop-failure-no-quorum.scores
index df30423..c1893b6 100644
--- a/pengine/test10/stop-failure-no-quorum.scores
+++ b/pengine/test10/stop-failure-no-quorum.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   pcmk-2: node is unclean
 Allocation scores:
 clone_color: clvm-clone allocation score on pcmk-1: 0
 clone_color: clvm-clone allocation score on pcmk-2: -INFINITY
diff --git a/pengine/test10/stop-failure-no-quorum.summary b/pengine/test10/stop-failure-no-quorum.summary
index 0248126..d91edc1 100644
--- a/pengine/test10/stop-failure-no-quorum.summary
+++ b/pengine/test10/stop-failure-no-quorum.summary
@@ -14,6 +14,7 @@ Online: [ pcmk-1 ]
  ClusterIP	(ocf::heartbeat:IPaddr2):	Stopped 
  Fencing	(stonith:fence_xvm):	Stopped 
 
+  notice: Fencing   pcmk-2: node is unclean
 Transition Summary:
  * Fence (reboot) pcmk-2
  * Start   dlm:0	(pcmk-1 - blocked)
diff --git a/pengine/test10/stop-failure-with-fencing.scores b/pengine/test10/stop-failure-with-fencing.scores
index cf62806..0dc0813 100644
--- a/pengine/test10/stop-failure-with-fencing.scores
+++ b/pengine/test10/stop-failure-with-fencing.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   pcmk-2: node is unclean
 Allocation scores:
 clone_color: clvm-clone allocation score on pcmk-1: 0
 clone_color: clvm-clone allocation score on pcmk-2: -INFINITY
diff --git a/pengine/test10/stop-failure-with-fencing.summary b/pengine/test10/stop-failure-with-fencing.summary
index e6c296b..79e6105 100644
--- a/pengine/test10/stop-failure-with-fencing.summary
+++ b/pengine/test10/stop-failure-with-fencing.summary
@@ -13,6 +13,7 @@ Online: [ pcmk-1 ]
  ClusterIP	(ocf::heartbeat:IPaddr2):	Stopped 
  Fencing	(stonith:fence_xvm):	Stopped 
 
+  notice: Fencing   pcmk-2: node is unclean
 Transition Summary:
  * Fence (reboot) pcmk-2
  * Start   dlm:0	(pcmk-1 - blocked)
diff --git a/pengine/test10/systemhealth1.scores b/pengine/test10/systemhealth1.scores
index 8a59654..c55f6e2 100644
--- a/pengine/test10/systemhealth1.scores
+++ b/pengine/test10/systemhealth1.scores
@@ -1,3 +1,5 @@
+  notice: Fencing   hs21c: node is unclean
+  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealth1.summary b/pengine/test10/systemhealth1.summary
index 7301c6c..335b94a 100644
--- a/pengine/test10/systemhealth1.summary
+++ b/pengine/test10/systemhealth1.summary
@@ -7,6 +7,8 @@ Node hs21d (737318c6-0f92-4592-9754-45967d45aff7): UNCLEAN (offline)
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
+  notice: Fencing   hs21c: node is unclean
+  notice: Fencing   hs21d: node is unclean
 Transition Summary:
  * Fence (reboot) hs21d
  * Fence (reboot) hs21c
diff --git a/pengine/test10/systemhealth2.scores b/pengine/test10/systemhealth2.scores
index 8a59654..b20bd49 100644
--- a/pengine/test10/systemhealth2.scores
+++ b/pengine/test10/systemhealth2.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealth2.summary b/pengine/test10/systemhealth2.summary
index c83a7e2..b04d5a1 100644
--- a/pengine/test10/systemhealth2.summary
+++ b/pengine/test10/systemhealth2.summary
@@ -7,6 +7,7 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
+  notice: Fencing   hs21d: node is unclean
 Transition Summary:
  * Fence (reboot) hs21d
  * Start   stonith-1	(hs21c)
diff --git a/pengine/test10/systemhealth3.scores b/pengine/test10/systemhealth3.scores
index 8a59654..b20bd49 100644
--- a/pengine/test10/systemhealth3.scores
+++ b/pengine/test10/systemhealth3.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealth3.summary b/pengine/test10/systemhealth3.summary
index c83a7e2..b04d5a1 100644
--- a/pengine/test10/systemhealth3.summary
+++ b/pengine/test10/systemhealth3.summary
@@ -7,6 +7,7 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
+  notice: Fencing   hs21d: node is unclean
 Transition Summary:
  * Fence (reboot) hs21d
  * Start   stonith-1	(hs21c)
diff --git a/pengine/test10/systemhealthm1.scores b/pengine/test10/systemhealthm1.scores
index 8a59654..c55f6e2 100644
--- a/pengine/test10/systemhealthm1.scores
+++ b/pengine/test10/systemhealthm1.scores
@@ -1,3 +1,5 @@
+  notice: Fencing   hs21c: node is unclean
+  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealthm1.summary b/pengine/test10/systemhealthm1.summary
index 7301c6c..335b94a 100644
--- a/pengine/test10/systemhealthm1.summary
+++ b/pengine/test10/systemhealthm1.summary
@@ -7,6 +7,8 @@ Node hs21d (737318c6-0f92-4592-9754-45967d45aff7): UNCLEAN (offline)
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
+  notice: Fencing   hs21c: node is unclean
+  notice: Fencing   hs21d: node is unclean
 Transition Summary:
  * Fence (reboot) hs21d
  * Fence (reboot) hs21c
diff --git a/pengine/test10/systemhealthm2.scores b/pengine/test10/systemhealthm2.scores
index 8a59654..b20bd49 100644
--- a/pengine/test10/systemhealthm2.scores
+++ b/pengine/test10/systemhealthm2.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealthm2.summary b/pengine/test10/systemhealthm2.summary
index c83a7e2..b04d5a1 100644
--- a/pengine/test10/systemhealthm2.summary
+++ b/pengine/test10/systemhealthm2.summary
@@ -7,6 +7,7 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
+  notice: Fencing   hs21d: node is unclean
 Transition Summary:
  * Fence (reboot) hs21d
  * Start   stonith-1	(hs21c)
diff --git a/pengine/test10/systemhealthm3.scores b/pengine/test10/systemhealthm3.scores
index 7e8804e..00b8d64 100644
--- a/pengine/test10/systemhealthm3.scores
+++ b/pengine/test10/systemhealthm3.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: -INFINITY
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealthm3.summary b/pengine/test10/systemhealthm3.summary
index fbcdec5..55d5cf7 100644
--- a/pengine/test10/systemhealthm3.summary
+++ b/pengine/test10/systemhealthm3.summary
@@ -7,6 +7,7 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
+  notice: Fencing   hs21d: node is unclean
 Transition Summary:
  * Fence (reboot) hs21d
 
diff --git a/pengine/test10/systemhealthn1.scores b/pengine/test10/systemhealthn1.scores
index 8a59654..c55f6e2 100644
--- a/pengine/test10/systemhealthn1.scores
+++ b/pengine/test10/systemhealthn1.scores
@@ -1,3 +1,5 @@
+  notice: Fencing   hs21c: node is unclean
+  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealthn1.summary b/pengine/test10/systemhealthn1.summary
index 7301c6c..335b94a 100644
--- a/pengine/test10/systemhealthn1.summary
+++ b/pengine/test10/systemhealthn1.summary
@@ -7,6 +7,8 @@ Node hs21d (737318c6-0f92-4592-9754-45967d45aff7): UNCLEAN (offline)
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
+  notice: Fencing   hs21c: node is unclean
+  notice: Fencing   hs21d: node is unclean
 Transition Summary:
  * Fence (reboot) hs21d
  * Fence (reboot) hs21c
diff --git a/pengine/test10/systemhealthn2.scores b/pengine/test10/systemhealthn2.scores
index 8a59654..b20bd49 100644
--- a/pengine/test10/systemhealthn2.scores
+++ b/pengine/test10/systemhealthn2.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealthn2.summary b/pengine/test10/systemhealthn2.summary
index c83a7e2..b04d5a1 100644
--- a/pengine/test10/systemhealthn2.summary
+++ b/pengine/test10/systemhealthn2.summary
@@ -7,6 +7,7 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
+  notice: Fencing   hs21d: node is unclean
 Transition Summary:
  * Fence (reboot) hs21d
  * Start   stonith-1	(hs21c)
diff --git a/pengine/test10/systemhealthn3.scores b/pengine/test10/systemhealthn3.scores
index 8a59654..b20bd49 100644
--- a/pengine/test10/systemhealthn3.scores
+++ b/pengine/test10/systemhealthn3.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealthn3.summary b/pengine/test10/systemhealthn3.summary
index c83a7e2..b04d5a1 100644
--- a/pengine/test10/systemhealthn3.summary
+++ b/pengine/test10/systemhealthn3.summary
@@ -7,6 +7,7 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
+  notice: Fencing   hs21d: node is unclean
 Transition Summary:
  * Fence (reboot) hs21d
  * Start   stonith-1	(hs21c)
diff --git a/pengine/test10/systemhealtho1.scores b/pengine/test10/systemhealtho1.scores
index 8a59654..c55f6e2 100644
--- a/pengine/test10/systemhealtho1.scores
+++ b/pengine/test10/systemhealtho1.scores
@@ -1,3 +1,5 @@
+  notice: Fencing   hs21c: node is unclean
+  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealtho1.summary b/pengine/test10/systemhealtho1.summary
index 7301c6c..335b94a 100644
--- a/pengine/test10/systemhealtho1.summary
+++ b/pengine/test10/systemhealtho1.summary
@@ -7,6 +7,8 @@ Node hs21d (737318c6-0f92-4592-9754-45967d45aff7): UNCLEAN (offline)
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
+  notice: Fencing   hs21c: node is unclean
+  notice: Fencing   hs21d: node is unclean
 Transition Summary:
  * Fence (reboot) hs21d
  * Fence (reboot) hs21c
diff --git a/pengine/test10/systemhealtho2.scores b/pengine/test10/systemhealtho2.scores
index 7e8804e..00b8d64 100644
--- a/pengine/test10/systemhealtho2.scores
+++ b/pengine/test10/systemhealtho2.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: -INFINITY
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealtho2.summary b/pengine/test10/systemhealtho2.summary
index fbcdec5..55d5cf7 100644
--- a/pengine/test10/systemhealtho2.summary
+++ b/pengine/test10/systemhealtho2.summary
@@ -7,6 +7,7 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
+  notice: Fencing   hs21d: node is unclean
 Transition Summary:
  * Fence (reboot) hs21d
 
diff --git a/pengine/test10/systemhealtho3.scores b/pengine/test10/systemhealtho3.scores
index 7e8804e..00b8d64 100644
--- a/pengine/test10/systemhealtho3.scores
+++ b/pengine/test10/systemhealtho3.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: -INFINITY
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealtho3.summary b/pengine/test10/systemhealtho3.summary
index fbcdec5..55d5cf7 100644
--- a/pengine/test10/systemhealtho3.summary
+++ b/pengine/test10/systemhealtho3.summary
@@ -7,6 +7,7 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
+  notice: Fencing   hs21d: node is unclean
 Transition Summary:
  * Fence (reboot) hs21d
 
diff --git a/pengine/test10/systemhealthp1.scores b/pengine/test10/systemhealthp1.scores
index 8a59654..c55f6e2 100644
--- a/pengine/test10/systemhealthp1.scores
+++ b/pengine/test10/systemhealthp1.scores
@@ -1,3 +1,5 @@
+  notice: Fencing   hs21c: node is unclean
+  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealthp1.summary b/pengine/test10/systemhealthp1.summary
index 7301c6c..335b94a 100644
--- a/pengine/test10/systemhealthp1.summary
+++ b/pengine/test10/systemhealthp1.summary
@@ -7,6 +7,8 @@ Node hs21d (737318c6-0f92-4592-9754-45967d45aff7): UNCLEAN (offline)
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
+  notice: Fencing   hs21c: node is unclean
+  notice: Fencing   hs21d: node is unclean
 Transition Summary:
  * Fence (reboot) hs21d
  * Fence (reboot) hs21c
diff --git a/pengine/test10/systemhealthp2.scores b/pengine/test10/systemhealthp2.scores
index 20a08f2..7ca75bf 100644
--- a/pengine/test10/systemhealthp2.scores
+++ b/pengine/test10/systemhealthp2.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 0
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealthp2.summary b/pengine/test10/systemhealthp2.summary
index ea9465b..6c44a74 100644
--- a/pengine/test10/systemhealthp2.summary
+++ b/pengine/test10/systemhealthp2.summary
@@ -7,6 +7,7 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
+  notice: Fencing   hs21d: node is unclean
 Transition Summary:
  * Fence (reboot) hs21d
  * Start   apache_1	(hs21c)
diff --git a/pengine/test10/systemhealthp3.scores b/pengine/test10/systemhealthp3.scores
index 7e8804e..00b8d64 100644
--- a/pengine/test10/systemhealthp3.scores
+++ b/pengine/test10/systemhealthp3.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: -INFINITY
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealthp3.summary b/pengine/test10/systemhealthp3.summary
index fbcdec5..55d5cf7 100644
--- a/pengine/test10/systemhealthp3.summary
+++ b/pengine/test10/systemhealthp3.summary
@@ -7,6 +7,7 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
+  notice: Fencing   hs21d: node is unclean
 Transition Summary:
  * Fence (reboot) hs21d
 
diff --git a/pengine/test10/ticket-clone-21.scores b/pengine/test10/ticket-clone-21.scores
index 89e2d0f..e0fc0d8 100644
--- a/pengine/test10/ticket-clone-21.scores
+++ b/pengine/test10/ticket-clone-21.scores
@@ -1,3 +1,5 @@
+  notice: Fencing   node1: node is unclean
+  notice: Fencing   node2: node is unclean
 Allocation scores:
 clone_color: clone1 allocation score on node1: 0
 clone_color: clone1 allocation score on node2: 0
diff --git a/pengine/test10/ticket-clone-21.summary b/pengine/test10/ticket-clone-21.summary
index 573f8c1..13d2887 100644
--- a/pengine/test10/ticket-clone-21.summary
+++ b/pengine/test10/ticket-clone-21.summary
@@ -6,6 +6,8 @@ Online: [ node1 node2 ]
  Clone Set: clone1 [rsc1]
      Started: [ node1 node2 ]
 
+  notice: Fencing   node1: node is unclean
+  notice: Fencing   node2: node is unclean
 Transition Summary:
  * Fence (reboot) node2
  * Fence (reboot) node1
diff --git a/pengine/test10/ticket-clone-9.scores b/pengine/test10/ticket-clone-9.scores
index 89e2d0f..e0fc0d8 100644
--- a/pengine/test10/ticket-clone-9.scores
+++ b/pengine/test10/ticket-clone-9.scores
@@ -1,3 +1,5 @@
+  notice: Fencing   node1: node is unclean
+  notice: Fencing   node2: node is unclean
 Allocation scores:
 clone_color: clone1 allocation score on node1: 0
 clone_color: clone1 allocation score on node2: 0
diff --git a/pengine/test10/ticket-clone-9.summary b/pengine/test10/ticket-clone-9.summary
index 573f8c1..13d2887 100644
--- a/pengine/test10/ticket-clone-9.summary
+++ b/pengine/test10/ticket-clone-9.summary
@@ -6,6 +6,8 @@ Online: [ node1 node2 ]
  Clone Set: clone1 [rsc1]
      Started: [ node1 node2 ]
 
+  notice: Fencing   node1: node is unclean
+  notice: Fencing   node2: node is unclean
 Transition Summary:
  * Fence (reboot) node2
  * Fence (reboot) node1
diff --git a/pengine/test10/ticket-group-21.scores b/pengine/test10/ticket-group-21.scores
index e5b8167..8f01379 100644
--- a/pengine/test10/ticket-group-21.scores
+++ b/pengine/test10/ticket-group-21.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   node2: node is unclean
 Allocation scores:
 group_color: group1 allocation score on node1: 0
 group_color: group1 allocation score on node2: 0
diff --git a/pengine/test10/ticket-group-21.summary b/pengine/test10/ticket-group-21.summary
index ff809ae..80fb33f 100644
--- a/pengine/test10/ticket-group-21.summary
+++ b/pengine/test10/ticket-group-21.summary
@@ -7,6 +7,7 @@ Online: [ node1 node2 ]
      rsc1	(ocf::pacemaker:Dummy):	Started node2
      rsc2	(ocf::pacemaker:Dummy):	Started node2
 
+  notice: Fencing   node2: node is unclean
 Transition Summary:
  * Fence (reboot) node2
  * Stop    rsc1	(node2)
diff --git a/pengine/test10/ticket-group-9.scores b/pengine/test10/ticket-group-9.scores
index e5b8167..8f01379 100644
--- a/pengine/test10/ticket-group-9.scores
+++ b/pengine/test10/ticket-group-9.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   node2: node is unclean
 Allocation scores:
 group_color: group1 allocation score on node1: 0
 group_color: group1 allocation score on node2: 0
diff --git a/pengine/test10/ticket-group-9.summary b/pengine/test10/ticket-group-9.summary
index ff809ae..80fb33f 100644
--- a/pengine/test10/ticket-group-9.summary
+++ b/pengine/test10/ticket-group-9.summary
@@ -7,6 +7,7 @@ Online: [ node1 node2 ]
      rsc1	(ocf::pacemaker:Dummy):	Started node2
      rsc2	(ocf::pacemaker:Dummy):	Started node2
 
+  notice: Fencing   node2: node is unclean
 Transition Summary:
  * Fence (reboot) node2
  * Stop    rsc1	(node2)
diff --git a/pengine/test10/ticket-master-21.scores b/pengine/test10/ticket-master-21.scores
index dc79d67..89eac5e 100644
--- a/pengine/test10/ticket-master-21.scores
+++ b/pengine/test10/ticket-master-21.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   node1: node is unclean
 Allocation scores:
 clone_color: ms1 allocation score on node1: 0
 clone_color: ms1 allocation score on node2: 0
diff --git a/pengine/test10/ticket-master-21.summary b/pengine/test10/ticket-master-21.summary
index c196c9d..dc2f5db 100644
--- a/pengine/test10/ticket-master-21.summary
+++ b/pengine/test10/ticket-master-21.summary
@@ -7,6 +7,7 @@ Online: [ node1 node2 ]
      Masters: [ node1 ]
      Slaves: [ node2 ]
 
+  notice: Fencing   node1: node is unclean
 Transition Summary:
  * Fence (reboot) node1
  * Move    rsc_stonith	(Started node1 -> node2)
diff --git a/pengine/test10/ticket-master-9.scores b/pengine/test10/ticket-master-9.scores
index dc79d67..89eac5e 100644
--- a/pengine/test10/ticket-master-9.scores
+++ b/pengine/test10/ticket-master-9.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   node1: node is unclean
 Allocation scores:
 clone_color: ms1 allocation score on node1: 0
 clone_color: ms1 allocation score on node2: 0
diff --git a/pengine/test10/ticket-master-9.summary b/pengine/test10/ticket-master-9.summary
index c196c9d..dc2f5db 100644
--- a/pengine/test10/ticket-master-9.summary
+++ b/pengine/test10/ticket-master-9.summary
@@ -7,6 +7,7 @@ Online: [ node1 node2 ]
      Masters: [ node1 ]
      Slaves: [ node2 ]
 
+  notice: Fencing   node1: node is unclean
 Transition Summary:
  * Fence (reboot) node1
  * Move    rsc_stonith	(Started node1 -> node2)
diff --git a/pengine/test10/ticket-primitive-21.scores b/pengine/test10/ticket-primitive-21.scores
index ed3f3cd..d1147ca 100644
--- a/pengine/test10/ticket-primitive-21.scores
+++ b/pengine/test10/ticket-primitive-21.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   node2: node is unclean
 Allocation scores:
 native_color: rsc1 allocation score on node1: -INFINITY
 native_color: rsc1 allocation score on node2: -INFINITY
diff --git a/pengine/test10/ticket-primitive-21.summary b/pengine/test10/ticket-primitive-21.summary
index 08a4860..d3d02fe 100644
--- a/pengine/test10/ticket-primitive-21.summary
+++ b/pengine/test10/ticket-primitive-21.summary
@@ -5,6 +5,7 @@ Online: [ node1 node2 ]
  rsc_stonith	(stonith:null):	Started node1
  rsc1	(ocf::pacemaker:Dummy):	Started node2
 
+  notice: Fencing   node2: node is unclean
 Transition Summary:
  * Fence (reboot) node2
  * Stop    rsc1	(node2)
diff --git a/pengine/test10/ticket-primitive-9.scores b/pengine/test10/ticket-primitive-9.scores
index ed3f3cd..d1147ca 100644
--- a/pengine/test10/ticket-primitive-9.scores
+++ b/pengine/test10/ticket-primitive-9.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   node2: node is unclean
 Allocation scores:
 native_color: rsc1 allocation score on node1: -INFINITY
 native_color: rsc1 allocation score on node2: -INFINITY
diff --git a/pengine/test10/ticket-primitive-9.summary b/pengine/test10/ticket-primitive-9.summary
index 08a4860..d3d02fe 100644
--- a/pengine/test10/ticket-primitive-9.summary
+++ b/pengine/test10/ticket-primitive-9.summary
@@ -5,6 +5,7 @@ Online: [ node1 node2 ]
  rsc_stonith	(stonith:null):	Started node1
  rsc1	(ocf::pacemaker:Dummy):	Started node2
 
+  notice: Fencing   node2: node is unclean
 Transition Summary:
  * Fence (reboot) node2
  * Stop    rsc1	(node2)
diff --git a/pengine/test10/unfence-definition.dot b/pengine/test10/unfence-definition.dot
index a9e7e6b..c16bdb5 100644
--- a/pengine/test10/unfence-definition.dot
+++ b/pengine/test10/unfence-definition.dot
@@ -19,7 +19,6 @@ digraph "g" {
 "clvmd:1_start_0 virt-2" -> "clvmd:2_start_0 virt-3" [ style = bold]
 "clvmd:1_start_0 virt-2" [ style=bold color="green" fontcolor="black"]
 "clvmd:2_monitor_0 virt-3" -> "clvmd-clone_start_0" [ style = bold]
-"clvmd:2_monitor_0 virt-3" -> "stonith 'on' virt-3" [ style = bold]
 "clvmd:2_monitor_0 virt-3" [ style=bold color="green" fontcolor="black"]
 "clvmd:2_start_0 virt-3" -> "clvmd-clone_running_0" [ style = bold]
 "clvmd:2_start_0 virt-3" [ style=bold color="green" fontcolor="black"]
@@ -44,7 +43,6 @@ digraph "g" {
 "dlm-clone_stopped_0" -> "dlm-clone_start_0" [ style = bold]
 "dlm-clone_stopped_0" [ style=bold color="green" fontcolor="orange"]
 "dlm:2_monitor_0 virt-3" -> "dlm-clone_start_0" [ style = bold]
-"dlm:2_monitor_0 virt-3" -> "stonith 'on' virt-3" [ style = bold]
 "dlm:2_monitor_0 virt-3" [ style=bold color="green" fontcolor="black"]
 "dlm:2_start_0 virt-3" -> "clvmd:2_start_0 virt-3" [ style = bold]
 "dlm:2_start_0 virt-3" -> "dlm-clone_running_0" [ style = bold]
@@ -70,9 +68,10 @@ digraph "g" {
 "stonith 'on' virt-1" -> "clvmd_start_0 virt-1" [ style = bold]
 "stonith 'on' virt-1" -> "dlm_start_0 virt-1" [ style = bold]
 "stonith 'on' virt-1" [ style=bold color="green" fontcolor="black"]
+"stonith 'on' virt-3" -> "clvmd:2_monitor_0 virt-3" [ style = bold]
 "stonith 'on' virt-3" -> "clvmd:2_start_0 virt-3" [ style = bold]
+"stonith 'on' virt-3" -> "dlm:2_monitor_0 virt-3" [ style = bold]
 "stonith 'on' virt-3" -> "dlm:2_start_0 virt-3" [ style = bold]
-"stonith 'on' virt-3" -> "fencing_monitor_0 virt-3" [ style = bold]
 "stonith 'on' virt-3" [ style=bold color="green" fontcolor="black"]
 "stonith 'reboot' virt-4" -> "stonith_complete" [ style = bold]
 "stonith 'reboot' virt-4" [ style=bold color="green" fontcolor="black"]
diff --git a/pengine/test10/unfence-definition.exp b/pengine/test10/unfence-definition.exp
index 46d5883..f9ad4c1 100644
--- a/pengine/test10/unfence-definition.exp
+++ b/pengine/test10/unfence-definition.exp
@@ -21,18 +21,14 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="1" priority="1000000">
+  <synapse id="1">
     <action_set>
       <rsc_op id="9" operation="monitor" operation_key="fencing_monitor_0" on_node="virt-3" on_node_uuid="3">
         <primitive id="fencing" class="stonith" type="fence_scsi"/>
         <attributes CRM_meta_on_node="virt-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
-    <inputs>
-      <trigger>
-        <crm_event id="4" operation="stonith" operation_key="stonith-virt-3-on" on_node="virt-3" on_node_uuid="3"/>
-      </trigger>
-    </inputs>
+    <inputs/>
   </synapse>
   <synapse id="2">
     <action_set>
@@ -124,7 +120,11 @@
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="virt-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <crm_event id="4" operation="stonith" operation_key="stonith-virt-3-on" on_node="virt-3" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
   </synapse>
   <synapse id="8" priority="1000000">
     <action_set>
@@ -284,7 +284,11 @@
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="virt-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <crm_event id="4" operation="stonith" operation_key="stonith-virt-3-on" on_node="virt-3" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
   </synapse>
   <synapse id="18" priority="1000000">
     <action_set>
@@ -380,19 +384,12 @@
         <attributes CRM_meta_on_node="virt-3" CRM_meta_on_node_uuid="3" CRM_meta_stonith_action="on" />
       </crm_event>
     </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="10" operation="monitor" operation_key="dlm:2_monitor_0" on_node="virt-3" on_node_uuid="3"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="11" operation="monitor" operation_key="clvmd:2_monitor_0" on_node="virt-3" on_node_uuid="3"/>
-      </trigger>
-    </inputs>
+    <inputs/>
   </synapse>
   <synapse id="25">
     <action_set>
       <crm_event id="2" operation="stonith" operation_key="stonith-virt-1-on" on_node="virt-1" on_node_uuid="1">
-        <attributes CRM_meta_on_node="virt-1" CRM_meta_on_node_uuid="1" CRM_meta_stonith_action="on" />
+        <attributes CRM_meta_node_unfenced="1234567" CRM_meta_on_node="virt-1" CRM_meta_on_node_uuid="1" CRM_meta_stonith_action="on" />
       </crm_event>
     </action_set>
     <inputs>
diff --git a/pengine/test10/unfence-definition.scores b/pengine/test10/unfence-definition.scores
index d9fa9bb..3d5aa9f 100644
--- a/pengine/test10/unfence-definition.scores
+++ b/pengine/test10/unfence-definition.scores
@@ -1,3 +1,6 @@
+  notice: Fencing   virt-4: node is unclean
+  notice: Unfencing virt-1: Device definition changed
+  notice: Unfencing virt-3: Required by dlm:2
 Allocation scores:
 clone_color: clvmd-clone allocation score on virt-1: 0
 clone_color: clvmd-clone allocation score on virt-2: 0
diff --git a/pengine/test10/unfence-definition.summary b/pengine/test10/unfence-definition.summary
index 9477a02..a31cc20 100644
--- a/pengine/test10/unfence-definition.summary
+++ b/pengine/test10/unfence-definition.summary
@@ -11,6 +11,9 @@ Online: [ virt-1 virt-2 virt-3 ]
      Started: [ virt-1 ]
      Stopped: [ virt-2 virt-3 virt-4 ]
 
+  notice: Unfencing virt-1: Device definition changed
+  notice: Unfencing virt-3: Required by dlm:2
+  notice: Fencing   virt-4: node is unclean
 Transition Summary:
  * Fence (reboot) virt-4
  * Fence (on) virt-3
@@ -23,18 +26,18 @@ Transition Summary:
  * Start   clvmd:2	(virt-3)
 
 Executing cluster transition:
- * Resource action: dlm             monitor on virt-3
+ * Resource action: fencing         monitor on virt-3
+ * Resource action: fencing         stop on virt-1
  * Resource action: clvmd           monitor on virt-2
- * Resource action: clvmd           monitor on virt-3
  * Pseudo action:   clvmd-clone_stop_0
  * Fencing virt-4 (reboot)
  * Pseudo action:   stonith_complete
  * Fencing virt-3 (on)
- * Resource action: fencing         monitor on virt-3
- * Resource action: fencing         stop on virt-1
+ * Resource action: fencing         delete on virt-1
+ * Resource action: dlm             monitor on virt-3
  * Resource action: clvmd           stop on virt-1
+ * Resource action: clvmd           monitor on virt-3
  * Pseudo action:   clvmd-clone_stopped_0
- * Resource action: fencing         delete on virt-1
  * Pseudo action:   dlm-clone_stop_0
  * Resource action: dlm             stop on virt-1
  * Pseudo action:   dlm-clone_stopped_0
diff --git a/pengine/test10/unfence-definition.xml b/pengine/test10/unfence-definition.xml
index 5d77931..cb189cd 100644
--- a/pengine/test10/unfence-definition.xml
+++ b/pengine/test10/unfence-definition.xml
@@ -41,6 +41,11 @@
   </configuration>
   <status>
     <node_state id="1" uname="virt-1" in_ccm="true" crmd="online" crm-debug-origin="do_state_transition" join="member" expected="member">
+      <transient_attributes id="virt-1">
+        <instance_attributes id="status-virt-1">
+          <nvpair id="status-virt-1" name="node_unfenced" value="1234567"/>
+        </instance_attributes>
+      </transient_attributes>
       <lrm id="1">
         <lrm_resources>
           <lrm_resource id="fencing" type="fence_virt" class="stonith">
@@ -56,6 +61,11 @@
       </lrm>
     </node_state>
     <node_state id="2" uname="virt-2" in_ccm="true" crmd="online" crm-debug-origin="do_state_transition" join="member" expected="member">
+      <transient_attributes id="virt-2">
+        <instance_attributes id="status-virt-2">
+          <nvpair id="unfenced-virt-2" name="node_unfenced" value="1234567"/>
+        </instance_attributes>
+      </transient_attributes>
       <lrm id="2">
         <lrm_resources>
           <lrm_resource id="fencing" type="fence_scsi" class="stonith">
diff --git a/pengine/test10/unfence-parameters.dot b/pengine/test10/unfence-parameters.dot
index c96d314..dee850e 100644
--- a/pengine/test10/unfence-parameters.dot
+++ b/pengine/test10/unfence-parameters.dot
@@ -14,13 +14,11 @@ digraph "g" {
 "clvmd-clone_stopped_0" -> "dlm-clone_stop_0" [ style = bold]
 "clvmd-clone_stopped_0" [ style=bold color="green" fontcolor="orange"]
 "clvmd:1_monitor_0 virt-2" -> "clvmd-clone_start_0" [ style = bold]
-"clvmd:1_monitor_0 virt-2" -> "stonith 'on' virt-2" [ style = bold]
 "clvmd:1_monitor_0 virt-2" [ style=bold color="green" fontcolor="black"]
 "clvmd:1_start_0 virt-2" -> "clvmd-clone_running_0" [ style = bold]
 "clvmd:1_start_0 virt-2" -> "clvmd:2_start_0 virt-3" [ style = bold]
 "clvmd:1_start_0 virt-2" [ style=bold color="green" fontcolor="black"]
 "clvmd:2_monitor_0 virt-3" -> "clvmd-clone_start_0" [ style = bold]
-"clvmd:2_monitor_0 virt-3" -> "stonith 'on' virt-3" [ style = bold]
 "clvmd:2_monitor_0 virt-3" [ style=bold color="green" fontcolor="black"]
 "clvmd:2_start_0 virt-3" -> "clvmd-clone_running_0" [ style = bold]
 "clvmd:2_start_0 virt-3" -> "clvmd:3_start_0 <none>" [ style = dashed]
@@ -50,7 +48,6 @@ digraph "g" {
 "dlm-clone_stopped_0" -> "dlm-clone_start_0" [ style = bold]
 "dlm-clone_stopped_0" [ style=bold color="green" fontcolor="orange"]
 "dlm:2_monitor_0 virt-3" -> "dlm-clone_start_0" [ style = bold]
-"dlm:2_monitor_0 virt-3" -> "stonith 'on' virt-3" [ style = bold]
 "dlm:2_monitor_0 virt-3" [ style=bold color="green" fontcolor="black"]
 "dlm:2_start_0 virt-3" -> "clvmd:2_start_0 virt-3" [ style = bold]
 "dlm:2_start_0 virt-3" -> "dlm-clone_running_0" [ style = bold]
@@ -85,12 +82,14 @@ digraph "g" {
 "stonith 'on' virt-1" -> "clvmd_start_0 virt-1" [ style = bold]
 "stonith 'on' virt-1" -> "dlm_start_0 virt-1" [ style = bold]
 "stonith 'on' virt-1" [ style=bold color="green" fontcolor="black"]
+"stonith 'on' virt-2" -> "clvmd:1_monitor_0 virt-2" [ style = bold]
 "stonith 'on' virt-2" -> "clvmd:1_start_0 virt-2" [ style = bold]
 "stonith 'on' virt-2" -> "dlm_start_0 virt-2" [ style = bold]
 "stonith 'on' virt-2" [ style=bold color="green" fontcolor="black"]
+"stonith 'on' virt-3" -> "clvmd:2_monitor_0 virt-3" [ style = bold]
 "stonith 'on' virt-3" -> "clvmd:2_start_0 virt-3" [ style = bold]
+"stonith 'on' virt-3" -> "dlm:2_monitor_0 virt-3" [ style = bold]
 "stonith 'on' virt-3" -> "dlm:2_start_0 virt-3" [ style = bold]
-"stonith 'on' virt-3" -> "fencing_monitor_0 virt-3" [ style = bold]
 "stonith 'on' virt-3" [ style=bold color="green" fontcolor="black"]
 "stonith 'reboot' virt-4" -> "stonith_complete" [ style = bold]
 "stonith 'reboot' virt-4" [ style=bold color="green" fontcolor="black"]
diff --git a/pengine/test10/unfence-parameters.exp b/pengine/test10/unfence-parameters.exp
index ffc20c0..54c242a 100644
--- a/pengine/test10/unfence-parameters.exp
+++ b/pengine/test10/unfence-parameters.exp
@@ -12,18 +12,14 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="1" priority="1000000">
+  <synapse id="1">
     <action_set>
       <rsc_op id="8" operation="monitor" operation_key="fencing_monitor_0" on_node="virt-3" on_node_uuid="3">
         <primitive id="fencing" class="stonith" type="fence_scsi"/>
         <attributes CRM_meta_on_node="virt-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
-    <inputs>
-      <trigger>
-        <crm_event id="4" operation="stonith" operation_key="stonith-virt-3-on" on_node="virt-3" on_node_uuid="3"/>
-      </trigger>
-    </inputs>
+    <inputs/>
   </synapse>
   <synapse id="2">
     <action_set>
@@ -152,7 +148,11 @@
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="virt-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <crm_event id="4" operation="stonith" operation_key="stonith-virt-3-on" on_node="virt-3" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
   </synapse>
   <synapse id="9" priority="1000000">
     <action_set>
@@ -290,7 +290,11 @@
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="virt-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <crm_event id="3" operation="stonith" operation_key="stonith-virt-2-on" on_node="virt-2" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
   </synapse>
   <synapse id="17">
     <action_set>
@@ -324,7 +328,11 @@
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="virt-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <crm_event id="4" operation="stonith" operation_key="stonith-virt-3-on" on_node="virt-3" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
   </synapse>
   <synapse id="19" priority="1000000">
     <action_set>
@@ -420,26 +428,16 @@
         <attributes CRM_meta_on_node="virt-3" CRM_meta_on_node_uuid="3" CRM_meta_stonith_action="on" />
       </crm_event>
     </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="9" operation="monitor" operation_key="dlm:2_monitor_0" on_node="virt-3" on_node_uuid="3"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="10" operation="monitor" operation_key="clvmd:2_monitor_0" on_node="virt-3" on_node_uuid="3"/>
-      </trigger>
-    </inputs>
+    <inputs/>
   </synapse>
   <synapse id="26">
     <action_set>
       <crm_event id="3" operation="stonith" operation_key="stonith-virt-2-on" on_node="virt-2" on_node_uuid="2">
-        <attributes CRM_meta_on_node="virt-2" CRM_meta_on_node_uuid="2" CRM_meta_stonith_action="on" />
+        <attributes CRM_meta_node_unfenced="1234567" CRM_meta_on_node="virt-2" CRM_meta_on_node_uuid="2" CRM_meta_stonith_action="on" />
       </crm_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="7" operation="monitor" operation_key="clvmd:1_monitor_0" on_node="virt-2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
         <rsc_op id="14" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:1_stop_0" on_node="virt-2" on_node_uuid="2"/>
       </trigger>
     </inputs>
@@ -447,7 +445,7 @@
   <synapse id="27">
     <action_set>
       <crm_event id="2" operation="stonith" operation_key="stonith-virt-1-on" on_node="virt-1" on_node_uuid="1">
-        <attributes CRM_meta_on_node="virt-1" CRM_meta_on_node_uuid="1" CRM_meta_stonith_action="on" />
+        <attributes CRM_meta_node_unfenced="1234567" CRM_meta_on_node="virt-1" CRM_meta_on_node_uuid="1" CRM_meta_stonith_action="on" />
       </crm_event>
     </action_set>
     <inputs>
diff --git a/pengine/test10/unfence-parameters.scores b/pengine/test10/unfence-parameters.scores
index d9fa9bb..5089910 100644
--- a/pengine/test10/unfence-parameters.scores
+++ b/pengine/test10/unfence-parameters.scores
@@ -1,3 +1,7 @@
+  notice: Fencing   virt-4: node is unclean
+  notice: Unfencing virt-1: Device parameters changed (reload)
+  notice: Unfencing virt-2: Device parameters changed (reload)
+  notice: Unfencing virt-3: Device parameters changed (reload)
 Allocation scores:
 clone_color: clvmd-clone allocation score on virt-1: 0
 clone_color: clvmd-clone allocation score on virt-2: 0
diff --git a/pengine/test10/unfence-parameters.summary b/pengine/test10/unfence-parameters.summary
index a713cd5..8effc63 100644
--- a/pengine/test10/unfence-parameters.summary
+++ b/pengine/test10/unfence-parameters.summary
@@ -11,6 +11,10 @@ Online: [ virt-1 virt-2 virt-3 ]
      Started: [ virt-1 ]
      Stopped: [ virt-2 virt-3 virt-4 ]
 
+  notice: Unfencing virt-1: Device parameters changed (reload)
+  notice: Unfencing virt-2: Device parameters changed (reload)
+  notice: Unfencing virt-3: Device parameters changed (reload)
+  notice: Fencing   virt-4: node is unclean
 Transition Summary:
  * Fence (reboot) virt-4
  * Fence (on) virt-3
@@ -25,23 +29,23 @@ Transition Summary:
  * Start   clvmd:2	(virt-3)
 
 Executing cluster transition:
- * Resource action: dlm             monitor on virt-3
- * Resource action: clvmd           monitor on virt-2
- * Resource action: clvmd           monitor on virt-3
+ * Resource action: fencing         monitor on virt-3
  * Pseudo action:   clvmd-clone_stop_0
  * Fencing virt-4 (reboot)
  * Pseudo action:   stonith_complete
  * Fencing virt-3 (on)
- * Resource action: fencing         monitor on virt-3
+ * Resource action: fencing         stop on virt-1
+ * Resource action: dlm             monitor on virt-3
  * Resource action: clvmd           stop on virt-1
+ * Resource action: clvmd           monitor on virt-3
  * Pseudo action:   clvmd-clone_stopped_0
- * Resource action: fencing         stop on virt-1
  * Pseudo action:   dlm-clone_stop_0
  * Resource action: dlm             stop on virt-2
  * Fencing virt-2 (on)
  * Resource action: dlm             stop on virt-1
  * Pseudo action:   dlm-clone_stopped_0
  * Pseudo action:   dlm-clone_start_0
+ * Resource action: clvmd           monitor on virt-2
  * Fencing virt-1 (on)
  * Pseudo action:   all_stopped
  * Resource action: fencing         start on virt-1
diff --git a/pengine/test10/unfence-parameters.xml b/pengine/test10/unfence-parameters.xml
index f660100..26588bf 100644
--- a/pengine/test10/unfence-parameters.xml
+++ b/pengine/test10/unfence-parameters.xml
@@ -41,6 +41,11 @@
   </configuration>
   <status>
     <node_state id="1" uname="virt-1" in_ccm="true" crmd="online" crm-debug-origin="do_state_transition" join="member" expected="member">
+      <transient_attributes id="virt-1">
+        <instance_attributes id="status-virt-1">
+          <nvpair id="status-virt-1" name="node_unfenced" value="1234567"/>
+        </instance_attributes>
+      </transient_attributes>
       <lrm id="1">
         <lrm_resources>
           <lrm_resource id="fencing" type="fence_scsi" class="stonith">
@@ -56,6 +61,11 @@
       </lrm>
     </node_state>
     <node_state id="2" uname="virt-2" in_ccm="true" crmd="online" crm-debug-origin="do_state_transition" join="member" expected="member">
+      <transient_attributes id="virt-2">
+        <instance_attributes id="status-virt-2">
+          <nvpair id="status-virt-2" name="node_unfenced" value="1234567"/>
+	</instance_attributes>
+      </transient_attributes>
       <lrm id="2">
         <lrm_resources>
           <lrm_resource id="fencing" type="fence_scsi" class="stonith">
diff --git a/pengine/test10/unfence-startup.dot b/pengine/test10/unfence-startup.dot
index 20f1367..d496956 100644
--- a/pengine/test10/unfence-startup.dot
+++ b/pengine/test10/unfence-startup.dot
@@ -11,7 +11,6 @@ digraph "g" {
 "clvmd:1_start_0 virt-2" -> "clvmd:2_start_0 virt-3" [ style = bold]
 "clvmd:1_start_0 virt-2" [ style=bold color="green" fontcolor="black"]
 "clvmd:2_monitor_0 virt-3" -> "clvmd-clone_start_0" [ style = bold]
-"clvmd:2_monitor_0 virt-3" -> "stonith 'on' virt-3" [ style = bold]
 "clvmd:2_monitor_0 virt-3" [ style=bold color="green" fontcolor="black"]
 "clvmd:2_start_0 virt-3" -> "clvmd-clone_running_0" [ style = bold]
 "clvmd:2_start_0 virt-3" [ style=bold color="green" fontcolor="black"]
@@ -21,15 +20,15 @@ digraph "g" {
 "dlm-clone_start_0" -> "dlm:2_start_0 virt-3" [ style = bold]
 "dlm-clone_start_0" [ style=bold color="green" fontcolor="orange"]
 "dlm:2_monitor_0 virt-3" -> "dlm-clone_start_0" [ style = bold]
-"dlm:2_monitor_0 virt-3" -> "stonith 'on' virt-3" [ style = bold]
 "dlm:2_monitor_0 virt-3" [ style=bold color="green" fontcolor="black"]
 "dlm:2_start_0 virt-3" -> "clvmd:2_start_0 virt-3" [ style = bold]
 "dlm:2_start_0 virt-3" -> "dlm-clone_running_0" [ style = bold]
 "dlm:2_start_0 virt-3" [ style=bold color="green" fontcolor="black"]
 "fencing_monitor_0 virt-3" [ style=bold color="green" fontcolor="black"]
+"stonith 'on' virt-3" -> "clvmd:2_monitor_0 virt-3" [ style = bold]
 "stonith 'on' virt-3" -> "clvmd:2_start_0 virt-3" [ style = bold]
+"stonith 'on' virt-3" -> "dlm:2_monitor_0 virt-3" [ style = bold]
 "stonith 'on' virt-3" -> "dlm:2_start_0 virt-3" [ style = bold]
-"stonith 'on' virt-3" -> "fencing_monitor_0 virt-3" [ style = bold]
 "stonith 'on' virt-3" [ style=bold color="green" fontcolor="black"]
 "stonith 'reboot' virt-4" -> "stonith_complete" [ style = bold]
 "stonith 'reboot' virt-4" [ style=bold color="green" fontcolor="black"]
diff --git a/pengine/test10/unfence-startup.exp b/pengine/test10/unfence-startup.exp
index a13ffca..70c1686 100644
--- a/pengine/test10/unfence-startup.exp
+++ b/pengine/test10/unfence-startup.exp
@@ -1,16 +1,12 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
-  <synapse id="0" priority="1000000">
+  <synapse id="0">
     <action_set>
       <rsc_op id="7" operation="monitor" operation_key="fencing_monitor_0" on_node="virt-3" on_node_uuid="3">
         <primitive id="fencing" class="stonith" type="fence_scsi"/>
         <attributes CRM_meta_on_node="virt-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
-    <inputs>
-      <trigger>
-        <crm_event id="4" operation="stonith" operation_key="stonith-virt-3-on" on_node="virt-3" on_node_uuid="3"/>
-      </trigger>
-    </inputs>
+    <inputs/>
   </synapse>
   <synapse id="1">
     <action_set>
@@ -38,7 +34,11 @@
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="virt-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <crm_event id="4" operation="stonith" operation_key="stonith-virt-3-on" on_node="virt-3" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
   </synapse>
   <synapse id="3" priority="1000000">
     <action_set>
@@ -124,7 +124,11 @@
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="virt-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <crm_event id="4" operation="stonith" operation_key="stonith-virt-3-on" on_node="virt-3" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
   </synapse>
   <synapse id="9" priority="1000000">
     <action_set>
@@ -191,14 +195,7 @@
         <attributes CRM_meta_on_node="virt-3" CRM_meta_on_node_uuid="3" CRM_meta_stonith_action="on" />
       </crm_event>
     </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="8" operation="monitor" operation_key="dlm:2_monitor_0" on_node="virt-3" on_node_uuid="3"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="9" operation="monitor" operation_key="clvmd:2_monitor_0" on_node="virt-3" on_node_uuid="3"/>
-      </trigger>
-    </inputs>
+    <inputs/>
   </synapse>
   <synapse id="14">
     <action_set>
diff --git a/pengine/test10/unfence-startup.scores b/pengine/test10/unfence-startup.scores
index d9fa9bb..0172a9d 100644
--- a/pengine/test10/unfence-startup.scores
+++ b/pengine/test10/unfence-startup.scores
@@ -1,3 +1,5 @@
+  notice: Fencing   virt-4: node is unclean
+  notice: Unfencing virt-3: Required by dlm:2
 Allocation scores:
 clone_color: clvmd-clone allocation score on virt-1: 0
 clone_color: clvmd-clone allocation score on virt-2: 0
diff --git a/pengine/test10/unfence-startup.summary b/pengine/test10/unfence-startup.summary
index c3f1be4..6a49f42 100644
--- a/pengine/test10/unfence-startup.summary
+++ b/pengine/test10/unfence-startup.summary
@@ -11,6 +11,8 @@ Online: [ virt-1 virt-2 virt-3 ]
      Started: [ virt-1 ]
      Stopped: [ virt-2 virt-3 virt-4 ]
 
+  notice: Unfencing virt-3: Required by dlm:2
+  notice: Fencing   virt-4: node is unclean
 Transition Summary:
  * Fence (reboot) virt-4
  * Fence (on) virt-3
@@ -19,15 +21,15 @@ Transition Summary:
  * Start   clvmd:2	(virt-3)
 
 Executing cluster transition:
- * Resource action: dlm             monitor on virt-3
- * Pseudo action:   dlm-clone_start_0
+ * Resource action: fencing         monitor on virt-3
  * Resource action: clvmd           monitor on virt-2
- * Resource action: clvmd           monitor on virt-3
  * Fencing virt-4 (reboot)
  * Pseudo action:   stonith_complete
  * Fencing virt-3 (on)
  * Pseudo action:   all_stopped
- * Resource action: fencing         monitor on virt-3
+ * Resource action: dlm             monitor on virt-3
+ * Pseudo action:   dlm-clone_start_0
+ * Resource action: clvmd           monitor on virt-3
  * Resource action: dlm             start on virt-3
  * Pseudo action:   dlm-clone_running_0
  * Pseudo action:   clvmd-clone_start_0
diff --git a/pengine/test10/unfence-startup.xml b/pengine/test10/unfence-startup.xml
index 83e9ffe..28637e3 100644
--- a/pengine/test10/unfence-startup.xml
+++ b/pengine/test10/unfence-startup.xml
@@ -41,6 +41,11 @@
   </configuration>
   <status>
     <node_state id="1" uname="virt-1" in_ccm="true" crmd="online" crm-debug-origin="do_state_transition" join="member" expected="member">
+      <transient_attributes id="virt-1">
+        <instance_attributes id="status-virt-1">
+          <nvpair id="status-virt-1" name="node_unfenced" value="1234567"/>
+        </instance_attributes>
+      </transient_attributes>
       <lrm id="1">
         <lrm_resources>
           <lrm_resource id="fencing" type="fence_scsi" class="stonith">
@@ -56,6 +61,11 @@
       </lrm>
     </node_state>
     <node_state id="2" uname="virt-2" in_ccm="true" crmd="online" crm-debug-origin="do_state_transition" join="member" expected="member">
+      <transient_attributes id="virt-2">
+        <instance_attributes id="status-virt-2">
+          <nvpair id="status-virt-2" name="node_unfenced" value="1234567"/>
+        </instance_attributes>
+      </transient_attributes>
       <lrm id="2">
         <lrm_resources>
           <lrm_resource id="fencing" type="fence_scsi" class="stonith">
diff --git a/pengine/test10/whitebox-fail1.scores b/pengine/test10/whitebox-fail1.scores
index 4fbbf29..02192a9 100644
--- a/pengine/test10/whitebox-fail1.scores
+++ b/pengine/test10/whitebox-fail1.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   lxc1: guest is unclean
 Allocation scores:
 clone_color: M-clone allocation score on 18node1: 0
 clone_color: M-clone allocation score on 18node2: 0
diff --git a/pengine/test10/whitebox-fail1.summary b/pengine/test10/whitebox-fail1.summary
index 57d72ba..c7b5e19 100644
--- a/pengine/test10/whitebox-fail1.summary
+++ b/pengine/test10/whitebox-fail1.summary
@@ -13,6 +13,7 @@ Containers: [ lxc2:container2 ]
  C	(ocf::pacemaker:Dummy):	Started lxc2
  D	(ocf::pacemaker:Dummy):	Started 18node1
 
+  notice: Fencing   lxc1: guest is unclean
 Transition Summary:
  * Fence (reboot) lxc1 (resource: container1)
  * Recover container1	(Started 18node2)
diff --git a/pengine/test10/whitebox-fail2.scores b/pengine/test10/whitebox-fail2.scores
index 4fbbf29..02192a9 100644
--- a/pengine/test10/whitebox-fail2.scores
+++ b/pengine/test10/whitebox-fail2.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   lxc1: guest is unclean
 Allocation scores:
 clone_color: M-clone allocation score on 18node1: 0
 clone_color: M-clone allocation score on 18node2: 0
diff --git a/pengine/test10/whitebox-fail2.summary b/pengine/test10/whitebox-fail2.summary
index bf12683..73e968e 100644
--- a/pengine/test10/whitebox-fail2.summary
+++ b/pengine/test10/whitebox-fail2.summary
@@ -13,6 +13,7 @@ Containers: [ lxc2:container2 ]
  C	(ocf::pacemaker:Dummy):	Started lxc2
  D	(ocf::pacemaker:Dummy):	Started 18node1
 
+  notice: Fencing   lxc1: guest is unclean
 Transition Summary:
  * Fence (reboot) lxc1 (resource: container1)
  * Recover container1	(Started 18node2)
diff --git a/pengine/test10/whitebox-imply-stop-on-fence.scores b/pengine/test10/whitebox-imply-stop-on-fence.scores
index e50f077..5c3e325 100644
--- a/pengine/test10/whitebox-imply-stop-on-fence.scores
+++ b/pengine/test10/whitebox-imply-stop-on-fence.scores
@@ -1,3 +1,6 @@
+  notice: Fencing   kiff-01: node is unclean
+  notice: Fencing   lxc-01_kiff-01: guest is unclean
+  notice: Fencing   lxc-02_kiff-01: guest is unclean
 Allocation scores:
 clone_color: clvmd-clone allocation score on kiff-01: 0
 clone_color: clvmd-clone allocation score on kiff-02: 0
diff --git a/pengine/test10/whitebox-imply-stop-on-fence.summary b/pengine/test10/whitebox-imply-stop-on-fence.summary
index 2fb20a6..a74bb72 100644
--- a/pengine/test10/whitebox-imply-stop-on-fence.summary
+++ b/pengine/test10/whitebox-imply-stop-on-fence.summary
@@ -24,6 +24,9 @@ Containers: [ lxc-01_kiff-02:R-lxc-01_kiff-02 lxc-02_kiff-02:R-lxc-02_kiff-02 ]
  R-lxc-02_kiff-02	(ocf::heartbeat:VirtualDomain):	Started kiff-02 
  vm-fs	(ocf::heartbeat:Filesystem):	FAILED lxc-01_kiff-01
 
+  notice: Fencing   kiff-01: node is unclean
+  notice: Fencing   lxc-01_kiff-01: guest is unclean
+  notice: Fencing   lxc-02_kiff-01: guest is unclean
 Transition Summary:
  * Fence (reboot) lxc-02_kiff-01 (resource: R-lxc-02_kiff-01)
  * Fence (reboot) lxc-01_kiff-01 (resource: R-lxc-01_kiff-01)
diff --git a/pengine/test10/whitebox-ms-ordering.scores b/pengine/test10/whitebox-ms-ordering.scores
index f0e51f5..72e6d25 100644
--- a/pengine/test10/whitebox-ms-ordering.scores
+++ b/pengine/test10/whitebox-ms-ordering.scores
@@ -1,3 +1,5 @@
+  notice: Fencing   lxc1: guest is unclean
+  notice: Fencing   lxc2: guest is unclean
 Allocation scores:
 clone_color: lxc-ms-master allocation score on 18node1: 0
 clone_color: lxc-ms-master allocation score on 18node2: 0
diff --git a/pengine/test10/whitebox-ms-ordering.summary b/pengine/test10/whitebox-ms-ordering.summary
index 2230d0f..41436f8 100644
--- a/pengine/test10/whitebox-ms-ordering.summary
+++ b/pengine/test10/whitebox-ms-ordering.summary
@@ -8,6 +8,8 @@ Online: [ 18node1 18node2 18node3 ]
  Master/Slave Set: lxc-ms-master [lxc-ms]
      Stopped: [ 18node1 18node2 18node3 ]
 
+  notice: Fencing   lxc1: guest is unclean
+  notice: Fencing   lxc2: guest is unclean
 Transition Summary:
  * Fence (reboot) lxc2 (resource: container2)
  * Fence (reboot) lxc1 (resource: container1)
diff --git a/pengine/test10/whitebox-unexpectedly-running.scores b/pengine/test10/whitebox-unexpectedly-running.scores
index 7f8a1d9..eb8a6f9 100644
--- a/pengine/test10/whitebox-unexpectedly-running.scores
+++ b/pengine/test10/whitebox-unexpectedly-running.scores
@@ -1,3 +1,4 @@
+  notice: Fencing   remote1: guest is unclean
 Allocation scores:
 native_color: FAKE allocation score on 18builder: 0
 native_color: FAKE allocation score on remote1: -INFINITY
diff --git a/pengine/test10/whitebox-unexpectedly-running.summary b/pengine/test10/whitebox-unexpectedly-running.summary
index eabeb4d..3888aa2 100644
--- a/pengine/test10/whitebox-unexpectedly-running.summary
+++ b/pengine/test10/whitebox-unexpectedly-running.summary
@@ -4,6 +4,7 @@ Online: [ 18builder ]
 
  FAKE	(ocf::pacemaker:Dummy):	FAILED 18builder 
 
+  notice: Fencing   remote1: guest is unclean
 Transition Summary:
  * Fence (reboot) remote1 (resource: FAKE)
  * Recover FAKE	(Started 18builder)
-- 
1.8.3.1


From 736725733cc23897b4f18d59db24747077092ed6 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Wed, 26 Jul 2017 13:51:15 +1000
Subject: [PATCH 03/12] Fix: Correctly compare remote unfencing digests

---
 lib/pengine/utils.c | 17 ++++++++++++-----
 1 file changed, 12 insertions(+), 5 deletions(-)

diff --git a/lib/pengine/utils.c b/lib/pengine/utils.c
index 90da95a..5d2a1b9 100644
--- a/lib/pengine/utils.c
+++ b/lib/pengine/utils.c
@@ -2112,20 +1944,24 @@ fencing_action_digest_cmp(resource_t * rsc, node_t * node, pe_working_set_t * da
     const char *digest_all = g_hash_table_lookup(node->details->attrs, "digests-all");
     const char *digest_secure = g_hash_table_lookup(node->details->attrs, "digests-secure");
 
-    /* No restarts for fencing device changes */
+    /* No 'reloads' for fencing device changes
+     *
+     * We use the resource id + agent + digest so that we can detect
+     * changes to the agent and/or the parameters used
+     */
+    char *search_all = crm_strdup_printf("%s:%s:%s", rsc->id, (const char*)g_hash_table_lookup(rsc->meta, XML_ATTR_TYPE), data->digest_secure_calc);
+    char *search_secure = crm_strdup_printf("%s:%s:%s", rsc->id, (const char*)g_hash_table_lookup(rsc->meta, XML_ATTR_TYPE), data->digest_secure_calc);
 
     data->rc = RSC_DIGEST_ALL;
     if (digest_all == NULL) {
         /* it is unknown what the previous op digest was */
         data->rc = RSC_DIGEST_UNKNOWN;
 
-    } else if (strcmp(digest_all, data->digest_all_calc) == 0) {
+    } else if (strstr(digest_all, search_all)) {
         data->rc = RSC_DIGEST_MATCH;
 
     } else if(digest_secure && data->digest_secure_calc) {
-        char *search = crm_strdup_printf("%s:%s:%s", rsc->id, (const char*)g_hash_table_lookup(rsc->meta, XML_ATTR_TYPE), data->digest_secure_calc);
-
-        if(strstr(digest_secure, search)) {
+        if(strstr(digest_secure, search_secure)) {
             fprintf(stdout, "Only 'private' parameters to %s for unfencing %s changed\n",
                     rsc->id, node->details->uname);
             data->rc = RSC_DIGEST_MATCH;
@@ -2137,7 +1974,11 @@ fencing_action_digest_cmp(resource_t * rsc, node_t * node, pe_working_set_t * da
                 rsc->id, node->details->uname, rsc->id, (const char*)g_hash_table_lookup(rsc->meta, XML_ATTR_TYPE), data->digest_secure_calc);
     }
 
+
     free(key);
+    free(search_all);
+    free(search_secure);
+
     return data;
 }
 
-- 
1.8.3.1


From e0dbe6cf3ef982f6644cc4d4e81381bdf184b0d6 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Wed, 26 Jul 2017 13:47:58 +1000
Subject: [PATCH 04/12] Log: Mechanism for recording why an action is required

---
 include/crm/pengine/internal.h                     |   3 +
 include/crm/pengine/status.h                       |   1 +
 lib/pengine/unpack.c                               |   2 +
 lib/pengine/utils.c                                |  30 +-
 pengine/allocate.c                                 |   8 +-
 pengine/native.c                                   |   8 +-
 pengine/test10/594.exp                             | 113 ++++---
 pengine/test10/594.scores                          |   1 -
 pengine/test10/594.summary                         |   5 +-
 pengine/test10/797.exp                             | 134 ++++----
 pengine/test10/829.exp                             | 115 ++++---
 pengine/test10/829.scores                          |   1 -
 pengine/test10/829.summary                         |   5 +-
 pengine/test10/bug-5186-partial-migrate.exp        | 178 +++++------
 pengine/test10/bug-5186-partial-migrate.scores     |   1 -
 pengine/test10/bug-5186-partial-migrate.summary    |   5 +-
 pengine/test10/bug-cl-5212.exp                     |  52 ++--
 pengine/test10/bug-cl-5247.scores                  |   1 -
 pengine/test10/bug-cl-5247.summary                 |   3 +-
 pengine/test10/bug-lf-2508.exp                     | 243 ++++++++-------
 pengine/test10/bug-lf-2508.scores                  |   1 -
 pengine/test10/bug-lf-2508.summary                 |  11 +-
 pengine/test10/bug-lf-2551.exp                     | 325 ++++++++++----------
 pengine/test10/bug-lf-2551.scores                  |   1 -
 pengine/test10/bug-lf-2551.summary                 |   7 +-
 pengine/test10/bug-lf-2606.exp                     |  91 +++---
 pengine/test10/bug-lf-2606.scores                  |   1 -
 pengine/test10/bug-lf-2606.summary                 |   5 +-
 pengine/test10/bug-rh-1097457.scores               |   1 -
 pengine/test10/bug-rh-1097457.summary              |   3 +-
 pengine/test10/concurrent-fencing.exp              |  72 ++---
 pengine/test10/concurrent-fencing.scores           |   3 -
 pengine/test10/concurrent-fencing.summary          |   9 +-
 pengine/test10/guest-node-host-dies.exp            | 300 +++++++++---------
 pengine/test10/guest-node-host-dies.scores         |   3 -
 pengine/test10/guest-node-host-dies.summary        |   9 +-
 pengine/test10/interleave-pseudo-stop.exp          | 191 ++++++------
 pengine/test10/interleave-pseudo-stop.scores       |   1 -
 pengine/test10/interleave-pseudo-stop.summary      |   5 +-
 pengine/test10/master-7.exp                        | 263 ++++++++--------
 pengine/test10/master-7.scores                     |   1 -
 pengine/test10/master-7.summary                    |   9 +-
 pengine/test10/master-8.exp                        | 295 +++++++++---------
 pengine/test10/master-8.scores                     |   1 -
 pengine/test10/master-8.summary                    |   9 +-
 pengine/test10/migrate-fencing.exp                 | 291 +++++++++---------
 pengine/test10/migrate-fencing.scores              |   1 -
 pengine/test10/migrate-fencing.summary             |  15 +-
 pengine/test10/rec-node-10.exp                     |   6 +-
 pengine/test10/rec-node-11.exp                     | 127 ++++----
 pengine/test10/rec-node-11.scores                  |   1 -
 pengine/test10/rec-node-11.summary                 |   5 +-
 pengine/test10/rec-node-12.scores                  |   1 -
 pengine/test10/rec-node-12.summary                 |   3 +-
 pengine/test10/rec-node-13.exp                     |  51 ++--
 pengine/test10/rec-node-13.scores                  |   1 -
 pengine/test10/rec-node-13.summary                 |   5 +-
 pengine/test10/rec-node-14.exp                     |  61 ++--
 pengine/test10/rec-node-14.scores                  |   3 -
 pengine/test10/rec-node-14.summary                 |   9 +-
 pengine/test10/rec-node-15.exp                     | 207 +++++++------
 pengine/test10/rec-node-15.scores                  |   1 -
 pengine/test10/rec-node-15.summary                 |  19 +-
 pengine/test10/rec-node-2.scores                   |   1 -
 pengine/test10/rec-node-2.summary                  |   3 +-
 pengine/test10/rec-node-4.exp                      |  77 +++--
 pengine/test10/rec-node-4.scores                   |   1 -
 pengine/test10/rec-node-4.summary                  |   5 +-
 pengine/test10/rec-node-5.exp                      |  12 +-
 pengine/test10/rec-node-6.exp                      |  77 +++--
 pengine/test10/rec-node-6.scores                   |   1 -
 pengine/test10/rec-node-6.summary                  |   5 +-
 pengine/test10/rec-node-7.exp                      |  77 +++--
 pengine/test10/rec-node-7.scores                   |   1 -
 pengine/test10/rec-node-7.summary                  |   5 +-
 pengine/test10/rec-node-8.exp                      |   8 +-
 pengine/test10/rec-rsc-5.exp                       |  77 +++--
 pengine/test10/rec-rsc-5.scores                    |   1 -
 pengine/test10/rec-rsc-5.summary                   |   5 +-
 pengine/test10/remote-fence-before-reconnect.exp   |  54 ++--
 .../test10/remote-fence-before-reconnect.scores    |   1 -
 .../test10/remote-fence-before-reconnect.summary   |   5 +-
 pengine/test10/remote-fence-unclean-3.exp          |  34 +--
 pengine/test10/remote-fence-unclean-3.scores       |   1 -
 pengine/test10/remote-fence-unclean-3.summary      |   3 +-
 pengine/test10/remote-fence-unclean.exp            |  90 +++---
 pengine/test10/remote-fence-unclean.scores         |   1 -
 pengine/test10/remote-fence-unclean.summary        |  13 +-
 pengine/test10/remote-fence-unclean2.exp           |  38 +--
 pengine/test10/remote-fence-unclean2.scores        |   1 -
 pengine/test10/remote-fence-unclean2.summary       |   5 +-
 pengine/test10/remote-partial-migrate2.exp         | 336 ++++++++++-----------
 pengine/test10/remote-partial-migrate2.scores      |   1 -
 pengine/test10/remote-partial-migrate2.summary     |   3 +-
 pengine/test10/remote-recover-all.exp              | 318 +++++++++----------
 pengine/test10/remote-recover-all.scores           |   3 -
 pengine/test10/remote-recover-all.summary          |   9 +-
 pengine/test10/remote-recover-connection.exp       | 248 +++++++--------
 pengine/test10/remote-recover-connection.scores    |   1 -
 pengine/test10/remote-recover-connection.summary   |   5 +-
 pengine/test10/remote-recover-fail.exp             |  88 +++---
 pengine/test10/remote-recover-fail.scores          |   1 -
 pengine/test10/remote-recover-fail.summary         |   9 +-
 pengine/test10/remote-recover-no-resources.exp     | 276 ++++++++---------
 pengine/test10/remote-recover-no-resources.scores  |   2 -
 pengine/test10/remote-recover-no-resources.summary |   6 +-
 pengine/test10/remote-recover-unknown.exp          | 288 +++++++++---------
 pengine/test10/remote-recover-unknown.scores       |   3 -
 pengine/test10/remote-recover-unknown.summary      |  27 +-
 pengine/test10/remote-recover.exp                  |  16 +-
 pengine/test10/remote-recovery.exp                 | 248 +++++++--------
 pengine/test10/remote-recovery.scores              |   1 -
 pengine/test10/remote-recovery.summary             |   5 +-
 pengine/test10/remote-unclean2.exp                 |  44 +--
 pengine/test10/remote-unclean2.scores              |   1 -
 pengine/test10/remote-unclean2.summary             |   3 +-
 pengine/test10/start-then-stop-with-unfence.scores |   1 -
 .../test10/start-then-stop-with-unfence.summary    |   3 +-
 pengine/test10/stonith-0.exp                       | 222 +++++++-------
 pengine/test10/stonith-0.scores                    |   2 -
 pengine/test10/stonith-0.summary                   |   8 +-
 pengine/test10/stonith-1.exp                       | 237 ++++++++-------
 pengine/test10/stonith-1.scores                    |   1 -
 pengine/test10/stonith-1.summary                   |  11 +-
 pengine/test10/stonith-2.exp                       |  41 ++-
 pengine/test10/stonith-2.scores                    |   1 -
 pengine/test10/stonith-2.summary                   |   3 +-
 pengine/test10/stonith-3.scores                    |   1 -
 pengine/test10/stonith-3.summary                   |   3 +-
 pengine/test10/stonith-4.exp                       |  68 ++---
 pengine/test10/stonith-4.scores                    |   4 -
 pengine/test10/stonith-4.summary                   |  12 +-
 pengine/test10/stop-failure-no-quorum.exp          |  50 +--
 pengine/test10/stop-failure-no-quorum.scores       |   1 -
 pengine/test10/stop-failure-no-quorum.summary      |   5 +-
 pengine/test10/stop-failure-with-fencing.exp       |  52 ++--
 pengine/test10/stop-failure-with-fencing.scores    |   1 -
 pengine/test10/stop-failure-with-fencing.summary   |   5 +-
 pengine/test10/systemhealth1.scores                |   2 -
 pengine/test10/systemhealth1.summary               |   6 +-
 pengine/test10/systemhealth2.scores                |   1 -
 pengine/test10/systemhealth2.summary               |   3 +-
 pengine/test10/systemhealth3.scores                |   1 -
 pengine/test10/systemhealth3.summary               |   3 +-
 pengine/test10/systemhealthm1.scores               |   2 -
 pengine/test10/systemhealthm1.summary              |   6 +-
 pengine/test10/systemhealthm2.scores               |   1 -
 pengine/test10/systemhealthm2.summary              |   3 +-
 pengine/test10/systemhealthm3.scores               |   1 -
 pengine/test10/systemhealthm3.summary              |   3 +-
 pengine/test10/systemhealthn1.scores               |   2 -
 pengine/test10/systemhealthn1.summary              |   6 +-
 pengine/test10/systemhealthn2.scores               |   1 -
 pengine/test10/systemhealthn2.summary              |   3 +-
 pengine/test10/systemhealthn3.scores               |   1 -
 pengine/test10/systemhealthn3.summary              |   3 +-
 pengine/test10/systemhealtho1.scores               |   2 -
 pengine/test10/systemhealtho1.summary              |   6 +-
 pengine/test10/systemhealtho2.scores               |   1 -
 pengine/test10/systemhealtho2.summary              |   3 +-
 pengine/test10/systemhealtho3.scores               |   1 -
 pengine/test10/systemhealtho3.summary              |   3 +-
 pengine/test10/systemhealthp1.scores               |   2 -
 pengine/test10/systemhealthp1.summary              |   6 +-
 pengine/test10/systemhealthp2.scores               |   1 -
 pengine/test10/systemhealthp2.summary              |   3 +-
 pengine/test10/systemhealthp3.scores               |   1 -
 pengine/test10/systemhealthp3.summary              |   3 +-
 pengine/test10/ticket-clone-21.exp                 |  97 +++---
 pengine/test10/ticket-clone-21.scores              |   2 -
 pengine/test10/ticket-clone-21.summary             |   8 +-
 pengine/test10/ticket-clone-9.exp                  |  97 +++---
 pengine/test10/ticket-clone-9.scores               |   2 -
 pengine/test10/ticket-clone-9.summary              |   8 +-
 pengine/test10/ticket-group-21.exp                 |  63 ++--
 pengine/test10/ticket-group-21.scores              |   1 -
 pengine/test10/ticket-group-21.summary             |   5 +-
 pengine/test10/ticket-group-9.exp                  |  63 ++--
 pengine/test10/ticket-group-9.scores               |   1 -
 pengine/test10/ticket-group-9.summary              |   5 +-
 pengine/test10/ticket-master-21.exp                |  77 +++--
 pengine/test10/ticket-master-21.scores             |   1 -
 pengine/test10/ticket-master-21.summary            |   5 +-
 pengine/test10/ticket-master-9.exp                 |  77 +++--
 pengine/test10/ticket-master-9.scores              |   1 -
 pengine/test10/ticket-master-9.summary             |   5 +-
 pengine/test10/ticket-primitive-21.exp             |  39 ++-
 pengine/test10/ticket-primitive-21.scores          |   1 -
 pengine/test10/ticket-primitive-21.summary         |   5 +-
 pengine/test10/ticket-primitive-9.exp              |  39 ++-
 pengine/test10/ticket-primitive-9.scores           |   1 -
 pengine/test10/ticket-primitive-9.summary          |   5 +-
 pengine/test10/unfence-definition.scores           |   3 -
 pengine/test10/unfence-definition.summary          |   9 +-
 pengine/test10/unfence-parameters.scores           |   4 -
 pengine/test10/unfence-parameters.summary          |  12 +-
 pengine/test10/unfence-startup.scores              |   2 -
 pengine/test10/unfence-startup.summary             |   6 +-
 pengine/test10/unrunnable-1.exp                    |  28 +-
 pengine/test10/whitebox-fail1.scores               |   1 -
 pengine/test10/whitebox-fail1.summary              |   3 +-
 pengine/test10/whitebox-fail2.scores               |   1 -
 pengine/test10/whitebox-fail2.summary              |   3 +-
 pengine/test10/whitebox-imply-stop-on-fence.exp    | 212 ++++++-------
 pengine/test10/whitebox-imply-stop-on-fence.scores |   3 -
 .../test10/whitebox-imply-stop-on-fence.summary    |   9 +-
 pengine/test10/whitebox-ms-ordering.scores         |   2 -
 pengine/test10/whitebox-ms-ordering.summary        |   6 +-
 .../test10/whitebox-unexpectedly-running.scores    |   1 -
 .../test10/whitebox-unexpectedly-running.summary   |   3 +-
 210 files changed, 3715 insertions(+), 3945 deletions(-)

diff --git a/include/crm/pengine/internal.h b/include/crm/pengine/internal.h
index 3e10a30..99e2055 100644
--- a/include/crm/pengine/internal.h
+++ b/include/crm/pengine/internal.h
@@ -277,6 +277,9 @@ action_t *pe_fence_op(node_t * node, const char *op, bool optional, const char *
 void trigger_unfencing(
     resource_t * rsc, node_t *node, const char *reason, action_t *dependency, pe_working_set_t * data_set);
 
+void pe_action_required_worker(pe_action_t *action, const char *reason, const char *function, long line);
+#define pe_action_required(action, reason) pe_action_required_worker(action, reason, __FUNCTION__, __LINE__)
+
 void set_bit_recursive(resource_t * rsc, unsigned long long flag);
 void clear_bit_recursive(resource_t * rsc, unsigned long long flag);
 
diff --git a/include/crm/pengine/status.h b/include/crm/pengine/status.h
index cfb7d97..d9e8354 100644
--- a/include/crm/pengine/status.h
+++ b/include/crm/pengine/status.h
@@ -323,6 +323,7 @@ struct pe_action_s {
 
     char *task;
     char *uuid;
+    char *reason;
     char *cancel_task;
 
     enum pe_action_flags flags;
diff --git a/lib/pengine/unpack.c b/lib/pengine/unpack.c
index 629c557..299f9f6 100644
--- a/lib/pengine/unpack.c
+++ b/lib/pengine/unpack.c
@@ -121,6 +121,7 @@ pe_fence_node(pe_working_set_t * data_set, node_t * node, const char *reason)
                      reason);
         }
         node->details->unclean = TRUE;
+        pe_fence_op(node, NULL, TRUE, reason, data_set);
 
     } else if (node->details->unclean) {
         crm_trace("Cluster node %s %s because %s",
@@ -134,6 +135,7 @@ pe_fence_node(pe_working_set_t * data_set, node_t * node, const char *reason)
                  pe_can_fence(data_set, node)? "will be fenced" : "is unclean",
                  reason);
         node->details->unclean = TRUE;
+        pe_fence_op(node, NULL, TRUE, reason, data_set);
     }
 }
 
diff --git a/lib/pengine/utils.c b/lib/pengine/utils.c
index 5d2a1b9..a53be6a 100644
--- a/lib/pengine/utils.c
+++ b/lib/pengine/utils.c
@@ -1207,6 +1207,7 @@ pe_free_action(action_t * action)
         g_hash_table_destroy(action->meta);
     }
     free(action->cancel_task);
+    free(action->reason);
     free(action->task);
     free(action->uuid);
     free(action->node);
@@ -2088,7 +2089,6 @@ pe_fence_op(node_t * node, const char *op, bool optional, const char *reason, pe
                         /* Extra detail for those running from the commandline */
                         fprintf(stdout, "  notice: Unfencing %s (remote): because the definition of %s changed\n", node->details->uname, match->id);
                     }
-
                 }
 
                 digests_all_offset += snprintf(
@@ -2107,20 +2107,10 @@ pe_fence_op(node_t * node, const char *op, bool optional, const char *reason, pe
         free(op_key);
     }
 
-    if(optional == FALSE && is_set(stonith_op->flags, pe_action_optional)) {
-        const char *kind = "Fencing  ";
-
-        pe_clear_action_bit(stonith_op, pe_action_optional);
-
-        if(safe_str_eq(op, "on")) {
-            kind = "Unfencing";
-        }
-
-        crm_notice("%s %s: %s", kind, node->details->uname, reason);
-        if (is_set(data_set->flags, pe_flag_sanitized)) {
-            /* Extra detail for those running from the commandline */
-            fprintf(stdout, "  notice: %s %s: %s\n", kind, node->details->uname, reason);
-        }
+    if(optional == FALSE && pe_can_fence(data_set, node)) {
+        pe_action_required(stonith_op, reason);
+    } else if(reason && stonith_op->reason == NULL) {
+        stonith_op->reason = strdup(reason);
     }
 
     return stonith_op;
@@ -2196,3 +2186,13 @@ add_tag_ref(GHashTable * tags, const char * tag_name,  const char * obj_ref)
 
     return TRUE;
 }
+
+void pe_action_required_worker(pe_action_t *action, const char *reason, const char *function, long line) 
+{
+    if(is_set(action->flags, pe_action_optional)) {
+        action->flags = crm_clear_bit(function, line, action->uuid, action->flags, pe_action_optional);
+        if(action->reason == NULL) {
+            action->reason = strdup(reason);
+        }
+    }
+}
diff --git a/pengine/allocate.c b/pengine/allocate.c
index fd9c4f9..ef26245 100644
--- a/pengine/allocate.c
+++ b/pengine/allocate.c
@@ -1486,9 +1486,8 @@ stage6(pe_working_set_t * data_set)
         if (node->details->unclean
             && need_stonith && pe_can_fence(data_set, node)) {
 
-            pe_warn("Scheduling Node %s for STONITH", node->details->uname);
-
             stonith_op = pe_fence_op(node, NULL, FALSE, "node is unclean", data_set);
+            pe_warn("Scheduling Node %s for STONITH", node->details->uname);
 
             stonith_constraints(node, stonith_op, data_set);
 
@@ -2434,6 +2433,7 @@ LogNodeActions(pe_working_set_t * data_set, gboolean terminal)
             node_name = crm_strdup_printf("%s", action->node->details->uname);
         }
 
+
         if (safe_str_eq(action->task, CRM_OP_SHUTDOWN)) {
             task = strdup("Shutdown");
         } else if (safe_str_eq(action->task, CRM_OP_FENCE)) {
@@ -2443,8 +2443,12 @@ LogNodeActions(pe_working_set_t * data_set, gboolean terminal)
 
         if(task == NULL) {
             /* Nothing to report */
+        } else if(terminal && action->reason) {
+            printf(" * %s %s '%s'\n", task, node_name, action->reason);
         } else if(terminal) {
             printf(" * %s %s\n", task, node_name);
+        } else if(action->reason) {
+            crm_notice(" * %s %s '%s'\n", task, node_name, action->reason);
         } else {
             crm_notice(" * %s %s\n", task, node_name);
         }
diff --git a/pengine/native.c b/pengine/native.c
index bc59405..16c9d5a 100644
--- a/pengine/native.c
+++ b/pengine/native.c
@@ -1355,7 +1355,7 @@ native_internal_constraints(resource_t * rsc, pe_working_set_t * data_set)
 
         g_hash_table_iter_init(&iter, rsc->allowed_nodes);
         while (g_hash_table_iter_next(&iter, NULL, (void **)&node)) {
-            action_t *unfence = pe_fence_op(node, "on", TRUE, __FUNCTION__, data_set);
+            action_t *unfence = pe_fence_op(node, "on", TRUE, NULL, data_set);
 
             crm_debug("Ordering any stops of %s before %s, and any starts after",
                       rsc->id, unfence->uuid);
@@ -2457,7 +2457,7 @@ StopRsc(resource_t * rsc, node_t * next, gboolean optional, pe_working_set_t * d
         }
 
         if(is_set(rsc->flags, pe_rsc_needs_unfencing)) {
-            action_t *unfence = pe_fence_op(current, "on", TRUE, __FUNCTION__, data_set);
+            action_t *unfence = pe_fence_op(current, "on", TRUE, NULL, data_set);
             const char *unfenced = g_hash_table_lookup(current->details->attrs, XML_NODE_IS_UNFENCED);
 
             order_actions(stop, unfence, pe_order_implies_first);
@@ -2480,7 +2480,7 @@ StartRsc(resource_t * rsc, node_t * next, gboolean optional, pe_working_set_t *
     start = start_action(rsc, next, TRUE);
 
     if(is_set(rsc->flags, pe_rsc_needs_unfencing)) {
-        action_t *unfence = pe_fence_op(next, "on", TRUE, __FUNCTION__, data_set);
+        action_t *unfence = pe_fence_op(next, "on", TRUE, NULL, data_set);
         const char *unfenced = g_hash_table_lookup(next->details->attrs, XML_NODE_IS_UNFENCED);
 
         order_actions(unfence, start, pe_order_implies_then);
@@ -2847,7 +2847,7 @@ native_create_probe(resource_t * rsc, node_t * node, action_t * complete,
      * unfencing and that unfencing occurred.
      */
     if(is_set(rsc->flags, pe_rsc_needs_unfencing)) {
-        action_t *unfence = pe_fence_op(node, "on", TRUE, __FUNCTION__, data_set);
+        action_t *unfence = pe_fence_op(node, "on", TRUE, NULL, data_set);
         order_actions(unfence, probe, pe_order_optional);
     }
 
diff --git a/pengine/test10/594.exp b/pengine/test10/594.exp
index 5d58ab4..400a5e7 100644
--- a/pengine/test10/594.exp
+++ b/pengine/test10/594.exp
@@ -1,52 +1,52 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="16" operation="monitor" operation_key="DcIPaddr_monitor_5000" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36">
+      <rsc_op id="17" operation="monitor" operation_key="DcIPaddr_monitor_5000" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36">
         <primitive id="DcIPaddr" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="hadev1" CRM_meta_on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36" CRM_meta_timeout="20000"  ip="127.0.0.10"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="15" operation="start" operation_key="DcIPaddr_start_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36"/>
+        <rsc_op id="16" operation="start" operation_key="DcIPaddr_start_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="15" operation="start" operation_key="DcIPaddr_start_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36">
+      <rsc_op id="16" operation="start" operation_key="DcIPaddr_start_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36">
         <primitive id="DcIPaddr" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="hadev1" CRM_meta_on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36" CRM_meta_timeout="20000"  ip="127.0.0.10"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="9" operation="monitor" operation_key="DcIPaddr_monitor_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36"/>
+        <rsc_op id="10" operation="monitor" operation_key="DcIPaddr_monitor_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36"/>
       </trigger>
       <trigger>
-        <rsc_op id="14" operation="stop" operation_key="DcIPaddr_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3"/>
+        <rsc_op id="15" operation="stop" operation_key="DcIPaddr_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="32" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="33" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="14" operation="stop" operation_key="DcIPaddr_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3">
+      <rsc_op id="15" operation="stop" operation_key="DcIPaddr_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3">
         <primitive id="DcIPaddr" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="hadev2" CRM_meta_on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3" CRM_meta_timeout="20000"  ip="127.0.0.10"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="9" operation="monitor" operation_key="DcIPaddr_monitor_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36"/>
+        <rsc_op id="10" operation="monitor" operation_key="DcIPaddr_monitor_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="9" operation="monitor" operation_key="DcIPaddr_monitor_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36">
+      <rsc_op id="10" operation="monitor" operation_key="DcIPaddr_monitor_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36">
         <primitive id="DcIPaddr" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="hadev1" CRM_meta_on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.10"/>
       </rsc_op>
@@ -55,7 +55,7 @@
   </synapse>
   <synapse id="4">
     <action_set>
-      <rsc_op id="12" operation="monitor" operation_key="rsc_hadev3_monitor_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3">
+      <rsc_op id="13" operation="monitor" operation_key="rsc_hadev3_monitor_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3">
         <primitive id="rsc_hadev3" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="hadev2" CRM_meta_on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.21"/>
       </rsc_op>
@@ -64,52 +64,52 @@
   </synapse>
   <synapse id="5">
     <action_set>
-      <rsc_op id="21" operation="monitor" operation_key="rsc_hadev2_monitor_5000" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36">
+      <rsc_op id="22" operation="monitor" operation_key="rsc_hadev2_monitor_5000" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36">
         <primitive id="rsc_hadev2" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="hadev1" CRM_meta_on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36" CRM_meta_timeout="20000"  ip="127.0.0.22"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="20" operation="start" operation_key="rsc_hadev2_start_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36"/>
+        <rsc_op id="21" operation="start" operation_key="rsc_hadev2_start_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <rsc_op id="20" operation="start" operation_key="rsc_hadev2_start_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36">
+      <rsc_op id="21" operation="start" operation_key="rsc_hadev2_start_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36">
         <primitive id="rsc_hadev2" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="hadev1" CRM_meta_on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36" CRM_meta_timeout="20000"  ip="127.0.0.22"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="10" operation="monitor" operation_key="rsc_hadev2_monitor_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36"/>
+        <rsc_op id="11" operation="monitor" operation_key="rsc_hadev2_monitor_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36"/>
       </trigger>
       <trigger>
-        <rsc_op id="19" operation="stop" operation_key="rsc_hadev2_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3"/>
+        <rsc_op id="20" operation="stop" operation_key="rsc_hadev2_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="32" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="33" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <rsc_op id="19" operation="stop" operation_key="rsc_hadev2_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3">
+      <rsc_op id="20" operation="stop" operation_key="rsc_hadev2_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3">
         <primitive id="rsc_hadev2" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="hadev2" CRM_meta_on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3" CRM_meta_timeout="20000"  ip="127.0.0.22"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="10" operation="monitor" operation_key="rsc_hadev2_monitor_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36"/>
+        <rsc_op id="11" operation="monitor" operation_key="rsc_hadev2_monitor_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <rsc_op id="10" operation="monitor" operation_key="rsc_hadev2_monitor_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36">
+      <rsc_op id="11" operation="monitor" operation_key="rsc_hadev2_monitor_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36">
         <primitive id="rsc_hadev2" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="hadev1" CRM_meta_on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.22"/>
       </rsc_op>
@@ -118,23 +118,23 @@
   </synapse>
   <synapse id="9">
     <action_set>
-      <rsc_op id="24" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3">
+      <rsc_op id="25" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3">
         <primitive id="child_DoFencing:0" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="hadev2" CRM_meta_on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3" CRM_meta_timeout="20000"  hostlist="hadev3 hadev2 hadev1 "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="11" operation="monitor" operation_key="child_DoFencing:0_monitor_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36"/>
+        <rsc_op id="12" operation="monitor" operation_key="child_DoFencing:0_monitor_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36"/>
       </trigger>
       <trigger>
-        <pseudo_event id="30" operation="stop" operation_key="DoFencing_stop_0"/>
+        <pseudo_event id="31" operation="stop" operation_key="DoFencing_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="11" operation="monitor" operation_key="child_DoFencing:0_monitor_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36">
+      <rsc_op id="12" operation="monitor" operation_key="child_DoFencing:0_monitor_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36">
         <primitive id="child_DoFencing:0" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="hadev1" CRM_meta_on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  hostlist="hadev3 hadev2 hadev1 "/>
       </rsc_op>
@@ -143,20 +143,20 @@
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="27" operation="stop" operation_key="child_DoFencing:2_stop_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36">
+      <rsc_op id="28" operation="stop" operation_key="child_DoFencing:2_stop_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36">
         <primitive id="child_DoFencing:2" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="hadev1" CRM_meta_on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36" CRM_meta_timeout="20000"  hostlist="hadev3 hadev2 hadev1 "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="30" operation="stop" operation_key="DoFencing_stop_0"/>
+        <pseudo_event id="31" operation="stop" operation_key="DoFencing_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <rsc_op id="13" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3">
+      <rsc_op id="14" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3">
         <primitive id="child_DoFencing:2" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="hadev2" CRM_meta_on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  hostlist="hadev3 hadev2 hadev1 "/>
       </rsc_op>
@@ -165,25 +165,25 @@
   </synapse>
   <synapse id="13" priority="1000000">
     <action_set>
-      <pseudo_event id="31" operation="stopped" operation_key="DoFencing_stopped_0">
+      <pseudo_event id="32" operation="stopped" operation_key="DoFencing_stopped_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="24" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3"/>
+        <rsc_op id="25" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3"/>
       </trigger>
       <trigger>
-        <rsc_op id="27" operation="stop" operation_key="child_DoFencing:2_stop_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36"/>
+        <rsc_op id="28" operation="stop" operation_key="child_DoFencing:2_stop_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36"/>
       </trigger>
       <trigger>
-        <pseudo_event id="30" operation="stop" operation_key="DoFencing_stop_0"/>
+        <pseudo_event id="31" operation="stop" operation_key="DoFencing_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <pseudo_event id="30" operation="stop" operation_key="DoFencing_stop_0">
+      <pseudo_event id="31" operation="stop" operation_key="DoFencing_stop_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -191,18 +191,7 @@
   </synapse>
   <synapse id="15">
     <action_set>
-      <crm_event id="34" operation="stonith" operation_key="stonith-hadev3-reboot" on_node="hadev3" on_node_uuid="879e65f8-4b38-4c56-9552-4752ad436669">
-        <attributes CRM_meta_on_node="hadev3" CRM_meta_on_node_uuid="879e65f8-4b38-4c56-9552-4752ad436669" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="879e65f8-4b38-4c56-9552-4752ad436669"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="16">
-    <action_set>
-      <crm_event id="33" operation="do_shutdown" operation_key="do_shutdown-hadev2" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3">
+      <crm_event id="34" operation="do_shutdown" operation_key="do_shutdown-hadev2" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3">
         <attributes CRM_meta_on_node="hadev2" CRM_meta_on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3" CRM_meta_op_no_wait="true" />
         <downed>
           <node id="190b75b6-5585-42d9-8cde-eb6041843ae3"/>
@@ -211,51 +200,61 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="14" operation="stop" operation_key="DcIPaddr_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3"/>
+        <rsc_op id="15" operation="stop" operation_key="DcIPaddr_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3"/>
       </trigger>
       <trigger>
-        <rsc_op id="19" operation="stop" operation_key="rsc_hadev2_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3"/>
+        <rsc_op id="20" operation="stop" operation_key="rsc_hadev2_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3"/>
       </trigger>
       <trigger>
-        <rsc_op id="24" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3"/>
+        <rsc_op id="25" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="17">
+  <synapse id="16">
     <action_set>
-      <pseudo_event id="32" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="33" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="34" operation="stonith" operation_key="stonith-hadev3-reboot" on_node="hadev3" on_node_uuid="879e65f8-4b38-4c56-9552-4752ad436669"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hadev3-reboot" on_node="hadev3" on_node_uuid="879e65f8-4b38-4c56-9552-4752ad436669"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="18">
+  <synapse id="17">
     <action_set>
-      <pseudo_event id="8" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="9" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="14" operation="stop" operation_key="DcIPaddr_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3"/>
+        <rsc_op id="15" operation="stop" operation_key="DcIPaddr_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3"/>
       </trigger>
       <trigger>
-        <rsc_op id="19" operation="stop" operation_key="rsc_hadev2_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3"/>
+        <rsc_op id="20" operation="stop" operation_key="rsc_hadev2_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3"/>
       </trigger>
       <trigger>
-        <rsc_op id="24" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3"/>
+        <rsc_op id="25" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="hadev2" on_node_uuid="190b75b6-5585-42d9-8cde-eb6041843ae3"/>
       </trigger>
       <trigger>
-        <rsc_op id="27" operation="stop" operation_key="child_DoFencing:2_stop_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36"/>
+        <rsc_op id="28" operation="stop" operation_key="child_DoFencing:2_stop_0" on_node="hadev1" on_node_uuid="6125a0df-456a-4395-829a-418e9a380d36"/>
       </trigger>
       <trigger>
-        <pseudo_event id="32" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="33" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="18">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-hadev3-reboot" on_node="hadev3" on_node_uuid="879e65f8-4b38-4c56-9552-4752ad436669">
+        <attributes CRM_meta_on_node="hadev3" CRM_meta_on_node_uuid="879e65f8-4b38-4c56-9552-4752ad436669" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="879e65f8-4b38-4c56-9552-4752ad436669"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/594.scores b/pengine/test10/594.scores
index 430550c..972b89b 100644
--- a/pengine/test10/594.scores
+++ b/pengine/test10/594.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   hadev3: node is unclean
 Allocation scores:
 clone_color: DoFencing allocation score on hadev1: 0
 clone_color: DoFencing allocation score on hadev2: 0
diff --git a/pengine/test10/594.summary b/pengine/test10/594.summary
index 6cd78d3..44ed113 100644
--- a/pengine/test10/594.summary
+++ b/pengine/test10/594.summary
@@ -12,10 +12,9 @@ Online: [ hadev1 hadev2 ]
      child_DoFencing:1	(stonith:ssh):	Started hadev1
      child_DoFencing:2	(stonith:ssh):	Started hadev1
 
-  notice: Fencing   hadev3: node is unclean
 Transition Summary:
- * Fence (reboot) hadev3
  * Shutdown hadev2
+ * Fence (reboot) hadev3 'peer is no longer part of the cluster'
  * Move    DcIPaddr	(Started hadev2 -> hadev1)
  * Move    rsc_hadev2	(Started hadev2 -> hadev1)
  * Stop    child_DoFencing:0	(hadev2)
@@ -29,13 +28,13 @@ Executing cluster transition:
  * Resource action: child_DoFencing:2 monitor on hadev2
  * Pseudo action:   DoFencing_stop_0
  * Fencing hadev3 (reboot)
- * Pseudo action:   stonith_complete
  * Resource action: DcIPaddr        stop on hadev2
  * Resource action: rsc_hadev2      stop on hadev2
  * Resource action: child_DoFencing:0 stop on hadev2
  * Resource action: child_DoFencing:2 stop on hadev1
  * Pseudo action:   DoFencing_stopped_0
  * Cluster action:  do_shutdown on hadev2
+ * Pseudo action:   stonith_complete
  * Pseudo action:   all_stopped
  * Resource action: DcIPaddr        start on hadev1
  * Resource action: rsc_hadev2      start on hadev1
diff --git a/pengine/test10/797.exp b/pengine/test10/797.exp
index 51f64cb..4b83374 100644
--- a/pengine/test10/797.exp
+++ b/pengine/test10/797.exp
@@ -1,7 +1,7 @@
  <transition_graph cluster-delay="3m" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
    <synapse id="0">
      <action_set>
-      <rsc_op id="18" operation="monitor" operation_key="DcIPaddr_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="19" operation="monitor" operation_key="DcIPaddr_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="DcIPaddr" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.10"/>
        </rsc_op>
@@ -10,7 +10,7 @@
    </synapse>
    <synapse id="1">
      <action_set>
-      <rsc_op id="12" operation="monitor" operation_key="DcIPaddr_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+      <rsc_op id="13" operation="monitor" operation_key="DcIPaddr_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
         <primitive id="DcIPaddr" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.10"/>
       </rsc_op>
@@ -19,49 +19,49 @@
   </synapse>
   <synapse id="2">
     <action_set>
-       <rsc_op id="11" operation="delete" operation_key="DcIPaddr_delete_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="12" operation="delete" operation_key="DcIPaddr_delete_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="DcIPaddr" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="20000"  ip="127.0.0.10"/>
        </rsc_op>
      </action_set>
      <inputs>
        <trigger>
-         <rsc_op id="10" operation="stop" operation_key="DcIPaddr_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="11" operation="stop" operation_key="DcIPaddr_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
        </trigger>
      </inputs>
    </synapse>
    <synapse id="3">
      <action_set>
-      <rsc_op id="10" operation="stop" operation_key="DcIPaddr_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="11" operation="stop" operation_key="DcIPaddr_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="DcIPaddr" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="20000"  ip="127.0.0.10"/>
        </rsc_op>
      </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="12" operation="monitor" operation_key="DcIPaddr_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <rsc_op id="13" operation="monitor" operation_key="DcIPaddr_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
     </inputs>
    </synapse>
    <synapse id="4">
      <action_set>
-      <rsc_op id="26" operation="stop" operation_key="rsc_c001n08_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="27" operation="stop" operation_key="rsc_c001n08_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="rsc_c001n08" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_timeout="20000"  ip="127.0.0.11"/>
        </rsc_op>
      </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="13" operation="monitor" operation_key="rsc_c001n08_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <rsc_op id="14" operation="monitor" operation_key="rsc_c001n08_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
       <trigger>
-        <rsc_op id="21" operation="monitor" operation_key="rsc_c001n08_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="22" operation="monitor" operation_key="rsc_c001n08_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
     </inputs>
    </synapse>
    <synapse id="5">
      <action_set>
-      <rsc_op id="21" operation="monitor" operation_key="rsc_c001n08_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="22" operation="monitor" operation_key="rsc_c001n08_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="rsc_c001n08" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.11"/>
        </rsc_op>
@@ -70,7 +70,7 @@
    </synapse>
    <synapse id="6">
      <action_set>
-      <rsc_op id="13" operation="monitor" operation_key="rsc_c001n08_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+      <rsc_op id="14" operation="monitor" operation_key="rsc_c001n08_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
         <primitive id="rsc_c001n08" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.11"/>
       </rsc_op>
@@ -79,23 +79,23 @@
   </synapse>
   <synapse id="7">
     <action_set>
-      <rsc_op id="29" operation="stop" operation_key="rsc_c001n02_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="30" operation="stop" operation_key="rsc_c001n02_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="rsc_c001n02" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_timeout="20000"  ip="127.0.0.12"/>
        </rsc_op>
      </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="14" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <rsc_op id="15" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
       <trigger>
-        <rsc_op id="22" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="23" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
     </inputs>
    </synapse>
   <synapse id="8">
      <action_set>
-      <rsc_op id="22" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="23" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="rsc_c001n02" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.12"/>
        </rsc_op>
@@ -104,7 +104,7 @@
    </synapse>
   <synapse id="9">
      <action_set>
-      <rsc_op id="14" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+      <rsc_op id="15" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
         <primitive id="rsc_c001n02" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.12"/>
        </rsc_op>
@@ -113,20 +113,20 @@
    </synapse>
   <synapse id="10">
      <action_set>
-      <rsc_op id="32" operation="stop" operation_key="rsc_c001n03_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="33" operation="stop" operation_key="rsc_c001n03_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="rsc_c001n03" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="20000"  ip="127.0.0.13"/>
        </rsc_op>
      </action_set>
      <inputs>
        <trigger>
-        <rsc_op id="15" operation="monitor" operation_key="rsc_c001n03_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <rsc_op id="16" operation="monitor" operation_key="rsc_c001n03_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
        </trigger>
      </inputs>
    </synapse>
   <synapse id="11">
      <action_set>
-      <rsc_op id="19" operation="monitor" operation_key="rsc_c001n03_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="20" operation="monitor" operation_key="rsc_c001n03_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="rsc_c001n03" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.13"/>
        </rsc_op>
@@ -135,7 +135,7 @@
    </synapse>
   <synapse id="12">
      <action_set>
-      <rsc_op id="15" operation="monitor" operation_key="rsc_c001n03_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+      <rsc_op id="16" operation="monitor" operation_key="rsc_c001n03_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
         <primitive id="rsc_c001n03" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.13"/>
        </rsc_op>
@@ -144,20 +144,20 @@
    </synapse>
   <synapse id="13">
      <action_set>
-      <rsc_op id="34" operation="stop" operation_key="rsc_c001n01_stop_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+      <rsc_op id="35" operation="stop" operation_key="rsc_c001n01_stop_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
         <primitive id="rsc_c001n01" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_timeout="20000"  ip="127.0.0.14"/>
        </rsc_op>
      </action_set>
      <inputs>
        <trigger>
-        <rsc_op id="23" operation="monitor" operation_key="rsc_c001n01_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="24" operation="monitor" operation_key="rsc_c001n01_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
        </trigger>
      </inputs>
    </synapse>
   <synapse id="14">
      <action_set>
-      <rsc_op id="23" operation="monitor" operation_key="rsc_c001n01_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="24" operation="monitor" operation_key="rsc_c001n01_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="rsc_c001n01" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.14"/>
        </rsc_op>
@@ -166,78 +166,78 @@
    </synapse>
    <synapse id="15">
      <action_set>
-      <rsc_op id="38" operation="start" operation_key="child_DoFencing:0_start_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+      <rsc_op id="39" operation="start" operation_key="child_DoFencing:0_start_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
         <primitive id="child_DoFencing:0" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_requires="nothing" CRM_meta_timeout="20000"  hostlist="c001n08 c001n02 c001n03 c001n01 "/>
        </rsc_op>
      </action_set>
      <inputs>
        <trigger>
-        <rsc_op id="36" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <rsc_op id="37" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
       <trigger>
-        <rsc_op id="37" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="38" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
        </trigger>
        <trigger>
-        <pseudo_event id="42" operation="start" operation_key="DoFencing_start_0"/>
+        <pseudo_event id="43" operation="start" operation_key="DoFencing_start_0"/>
        </trigger>
      </inputs>
    </synapse>
    <synapse id="16">
      <action_set>
-      <rsc_op id="37" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="38" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="child_DoFencing:0" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="20000"  hostlist="c001n08 c001n02 c001n03 c001n01 "/>
        </rsc_op>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="44" operation="stop" operation_key="DoFencing_stop_0"/>
+        <pseudo_event id="45" operation="stop" operation_key="DoFencing_stop_0"/>
        </trigger>
      </inputs>
    </synapse>
    <synapse id="17">
      <action_set>
-      <rsc_op id="36" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+      <rsc_op id="37" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
         <primitive id="child_DoFencing:0" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_timeout="20000"  hostlist="c001n08 c001n02 c001n03 c001n01 "/>
        </rsc_op>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="44" operation="stop" operation_key="DoFencing_stop_0"/>
+        <pseudo_event id="45" operation="stop" operation_key="DoFencing_stop_0"/>
        </trigger>
      </inputs>
    </synapse>
    <synapse id="18">
      <action_set>
-      <rsc_op id="5" operation="monitor" operation_key="child_DoFencing:0_monitor_5000" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+      <rsc_op id="6" operation="monitor" operation_key="child_DoFencing:0_monitor_5000" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
         <primitive id="child_DoFencing:0" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_requires="nothing" CRM_meta_timeout="20000"  hostlist="c001n08 c001n02 c001n03 c001n01 "/>
        </rsc_op>
      </action_set>
      <inputs>
        <trigger>
-        <rsc_op id="38" operation="start" operation_key="child_DoFencing:0_start_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <rsc_op id="39" operation="start" operation_key="child_DoFencing:0_start_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
        </trigger>
      </inputs>
    </synapse>
    <synapse id="19">
      <action_set>
-      <rsc_op id="39" operation="stop" operation_key="child_DoFencing:1_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="40" operation="stop" operation_key="child_DoFencing:1_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="child_DoFencing:1" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_timeout="20000"  hostlist="c001n08 c001n02 c001n03 c001n01 "/>
        </rsc_op>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="44" operation="stop" operation_key="DoFencing_stop_0"/>
+        <pseudo_event id="45" operation="stop" operation_key="DoFencing_stop_0"/>
        </trigger>
      </inputs>
    </synapse>
    <synapse id="20">
      <action_set>
-      <rsc_op id="16" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+      <rsc_op id="17" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
         <primitive id="child_DoFencing:2" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  hostlist="c001n08 c001n02 c001n03 c001n01 "/>
        </rsc_op>
@@ -246,7 +246,7 @@
    </synapse>
    <synapse id="21">
      <action_set>
-      <rsc_op id="24" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="25" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="child_DoFencing:3" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  hostlist="c001n08 c001n02 c001n03 c001n01 "/>
        </rsc_op>
@@ -255,7 +255,7 @@
    </synapse>
    <synapse id="22">
      <action_set>
-      <rsc_op id="20" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="21" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="child_DoFencing:3" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  hostlist="c001n08 c001n02 c001n03 c001n01 "/>
        </rsc_op>
@@ -264,7 +264,7 @@
    </synapse>
    <synapse id="23">
      <action_set>
-      <rsc_op id="17" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+      <rsc_op id="18" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
         <primitive id="child_DoFencing:3" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  hostlist="c001n08 c001n02 c001n03 c001n01 "/>
        </rsc_op>
@@ -273,28 +273,28 @@
    </synapse>
   <synapse id="24" priority="1000000">
      <action_set>
-      <pseudo_event id="45" operation="stopped" operation_key="DoFencing_stopped_0">
+      <pseudo_event id="46" operation="stopped" operation_key="DoFencing_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <rsc_op id="36" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <rsc_op id="37" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
        </trigger>
        <trigger>
-        <rsc_op id="37" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="38" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
        </trigger>
        <trigger>
-        <rsc_op id="39" operation="stop" operation_key="child_DoFencing:1_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="40" operation="stop" operation_key="child_DoFencing:1_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <pseudo_event id="44" operation="stop" operation_key="DoFencing_stop_0"/>
+        <pseudo_event id="45" operation="stop" operation_key="DoFencing_stop_0"/>
        </trigger>
      </inputs>
    </synapse>
   <synapse id="25">
      <action_set>
-      <pseudo_event id="44" operation="stop" operation_key="DoFencing_stop_0">
+      <pseudo_event id="45" operation="stop" operation_key="DoFencing_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
@@ -302,46 +302,46 @@
    </synapse>
   <synapse id="26" priority="1000000">
      <action_set>
-      <pseudo_event id="43" operation="running" operation_key="DoFencing_running_0">
+      <pseudo_event id="44" operation="running" operation_key="DoFencing_running_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <rsc_op id="38" operation="start" operation_key="child_DoFencing:0_start_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <rsc_op id="39" operation="start" operation_key="child_DoFencing:0_start_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
        </trigger>
        <trigger>
-        <pseudo_event id="42" operation="start" operation_key="DoFencing_start_0"/>
+        <pseudo_event id="43" operation="start" operation_key="DoFencing_start_0"/>
        </trigger>
      </inputs>
    </synapse>
   <synapse id="27">
      <action_set>
-      <pseudo_event id="42" operation="start" operation_key="DoFencing_start_0">
+      <pseudo_event id="43" operation="start" operation_key="DoFencing_start_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <rsc_op id="16" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <rsc_op id="17" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
       <trigger>
-        <rsc_op id="17" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <rsc_op id="18" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
       <trigger>
-        <rsc_op id="20" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="21" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <rsc_op id="24" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="25" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="stopped" operation_key="DoFencing_stopped_0"/>
+        <pseudo_event id="46" operation="stopped" operation_key="DoFencing_stopped_0"/>
        </trigger>
      </inputs>
    </synapse>
   <synapse id="28">
      <action_set>
-      <crm_event id="47" operation="do_shutdown" operation_key="do_shutdown-c001n02" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <crm_event id="48" operation="do_shutdown" operation_key="do_shutdown-c001n02" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <attributes CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_op_no_wait="true" />
         <downed>
           <node id="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
@@ -350,46 +350,46 @@
      </action_set>
      <inputs>
        <trigger>
-        <rsc_op id="26" operation="stop" operation_key="rsc_c001n08_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="27" operation="stop" operation_key="rsc_c001n08_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
        </trigger>
        <trigger>
-        <rsc_op id="29" operation="stop" operation_key="rsc_c001n02_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="30" operation="stop" operation_key="rsc_c001n02_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
        </trigger>
        <trigger>
-        <rsc_op id="39" operation="stop" operation_key="child_DoFencing:1_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="40" operation="stop" operation_key="child_DoFencing:1_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
        </trigger>
      </inputs>
    </synapse>
   <synapse id="29">
      <action_set>
-      <pseudo_event id="9" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="10" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="10" operation="stop" operation_key="DcIPaddr_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="11" operation="stop" operation_key="DcIPaddr_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <rsc_op id="26" operation="stop" operation_key="rsc_c001n08_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="27" operation="stop" operation_key="rsc_c001n08_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
        </trigger>
        <trigger>
-        <rsc_op id="29" operation="stop" operation_key="rsc_c001n02_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="30" operation="stop" operation_key="rsc_c001n02_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
        </trigger>
        <trigger>
-        <rsc_op id="32" operation="stop" operation_key="rsc_c001n03_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="33" operation="stop" operation_key="rsc_c001n03_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <rsc_op id="34" operation="stop" operation_key="rsc_c001n01_stop_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <rsc_op id="35" operation="stop" operation_key="rsc_c001n01_stop_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
        </trigger>
       <trigger>
-        <rsc_op id="36" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <rsc_op id="37" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
       <trigger>
-        <rsc_op id="37" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="38" operation="stop" operation_key="child_DoFencing:0_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <rsc_op id="39" operation="stop" operation_key="child_DoFencing:1_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="40" operation="stop" operation_key="child_DoFencing:1_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
      </inputs>
    </synapse>
diff --git a/pengine/test10/829.exp b/pengine/test10/829.exp
index 115a39f..d1f85fa 100644
--- a/pengine/test10/829.exp
+++ b/pengine/test10/829.exp
@@ -1,7 +1,7 @@
 <transition_graph cluster-delay="3m" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="16" operation="monitor" operation_key="DcIPaddr_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="17" operation="monitor" operation_key="DcIPaddr_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="DcIPaddr" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.10"/>
       </rsc_op>
@@ -10,7 +10,7 @@
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="9" operation="monitor" operation_key="DcIPaddr_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+      <rsc_op id="10" operation="monitor" operation_key="DcIPaddr_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
         <primitive id="DcIPaddr" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.10"/>
       </rsc_op>
@@ -19,7 +19,7 @@
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="17" operation="monitor" operation_key="rsc_c001n08_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="18" operation="monitor" operation_key="rsc_c001n08_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="rsc_c001n08" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.11"/>
       </rsc_op>
@@ -28,7 +28,7 @@
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="10" operation="monitor" operation_key="rsc_c001n08_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+      <rsc_op id="11" operation="monitor" operation_key="rsc_c001n08_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
         <primitive id="rsc_c001n08" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.11"/>
       </rsc_op>
@@ -37,66 +37,66 @@
   </synapse>
   <synapse id="4">
     <action_set>
-      <rsc_op id="32" operation="monitor" operation_key="rsc_c001n02_monitor_5000" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+      <rsc_op id="33" operation="monitor" operation_key="rsc_c001n02_monitor_5000" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
         <primitive id="rsc_c001n02" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_timeout="20000"  ip="127.0.0.12"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="31" operation="start" operation_key="rsc_c001n02_start_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <rsc_op id="32" operation="start" operation_key="rsc_c001n02_start_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <rsc_op id="31" operation="start" operation_key="rsc_c001n02_start_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+      <rsc_op id="32" operation="start" operation_key="rsc_c001n02_start_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
         <primitive id="rsc_c001n02" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_timeout="20000"  ip="127.0.0.12"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="11" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <rsc_op id="12" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
       <trigger>
-        <rsc_op id="18" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="19" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <rsc_op id="22" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b"/>
+        <rsc_op id="23" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b"/>
       </trigger>
       <trigger>
-        <pseudo_event id="30" operation="stop" operation_key="rsc_c001n02_stop_0"/>
+        <pseudo_event id="31" operation="stop" operation_key="rsc_c001n02_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="49" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="30" operation="stop" operation_key="rsc_c001n02_stop_0">
+      <pseudo_event id="31" operation="stop" operation_key="rsc_c001n02_stop_0">
         <attributes CRM_meta_timeout="20000"  ip="127.0.0.12"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="11" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n02-reboot" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <rsc_op id="18" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="12" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
       <trigger>
-        <rsc_op id="22" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b"/>
+        <rsc_op id="19" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <crm_event id="49" operation="stonith" operation_key="stonith-c001n02-reboot" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="23" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <rsc_op id="22" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
+      <rsc_op id="23" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
         <primitive id="rsc_c001n02" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n08" CRM_meta_on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.12"/>
       </rsc_op>
@@ -105,7 +105,7 @@
   </synapse>
   <synapse id="8">
     <action_set>
-      <rsc_op id="18" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="19" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="rsc_c001n02" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.12"/>
       </rsc_op>
@@ -114,7 +114,7 @@
   </synapse>
   <synapse id="9">
     <action_set>
-      <rsc_op id="11" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+      <rsc_op id="12" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
         <primitive id="rsc_c001n02" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.12"/>
       </rsc_op>
@@ -123,7 +123,7 @@
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="23" operation="monitor" operation_key="rsc_c001n03_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
+      <rsc_op id="24" operation="monitor" operation_key="rsc_c001n03_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
         <primitive id="rsc_c001n03" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n08" CRM_meta_on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.13"/>
       </rsc_op>
@@ -132,7 +132,7 @@
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="12" operation="monitor" operation_key="rsc_c001n03_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+      <rsc_op id="13" operation="monitor" operation_key="rsc_c001n03_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
         <primitive id="rsc_c001n03" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.13"/>
       </rsc_op>
@@ -141,7 +141,7 @@
   </synapse>
   <synapse id="12">
     <action_set>
-      <rsc_op id="24" operation="monitor" operation_key="rsc_c001n01_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
+      <rsc_op id="25" operation="monitor" operation_key="rsc_c001n01_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
         <primitive id="rsc_c001n01" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n08" CRM_meta_on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.14"/>
       </rsc_op>
@@ -150,7 +150,7 @@
   </synapse>
   <synapse id="13">
     <action_set>
-      <rsc_op id="19" operation="monitor" operation_key="rsc_c001n01_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="20" operation="monitor" operation_key="rsc_c001n01_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="rsc_c001n01" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="127.0.0.14"/>
       </rsc_op>
@@ -159,25 +159,25 @@
   </synapse>
   <synapse id="14">
     <action_set>
-      <pseudo_event id="37" operation="stop" operation_key="child_DoFencing:0_stop_0">
+      <pseudo_event id="38" operation="stop" operation_key="child_DoFencing:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_timeout="20000"  hostlist="c001n08 c001n02 c001n03 c001n01 "/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="13" operation="monitor" operation_key="child_DoFencing:0_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n02-reboot" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <pseudo_event id="46" operation="stop" operation_key="DoFencing_stop_0"/>
+        <rsc_op id="14" operation="monitor" operation_key="child_DoFencing:0_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
       <trigger>
-        <crm_event id="49" operation="stonith" operation_key="stonith-c001n02-reboot" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <pseudo_event id="47" operation="stop" operation_key="DoFencing_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15">
     <action_set>
-      <rsc_op id="13" operation="monitor" operation_key="child_DoFencing:0_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+      <rsc_op id="14" operation="monitor" operation_key="child_DoFencing:0_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
         <primitive id="child_DoFencing:0" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  hostlist="c001n08 c001n02 c001n03 c001n01 "/>
       </rsc_op>
@@ -186,7 +186,7 @@
   </synapse>
   <synapse id="16">
     <action_set>
-      <rsc_op id="14" operation="monitor" operation_key="child_DoFencing:1_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+      <rsc_op id="15" operation="monitor" operation_key="child_DoFencing:1_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
         <primitive id="child_DoFencing:1" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  hostlist="c001n08 c001n02 c001n03 c001n01 "/>
       </rsc_op>
@@ -195,7 +195,7 @@
   </synapse>
   <synapse id="17">
     <action_set>
-      <rsc_op id="25" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
+      <rsc_op id="26" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
         <primitive id="child_DoFencing:2" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n08" CRM_meta_on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  hostlist="c001n08 c001n02 c001n03 c001n01 "/>
       </rsc_op>
@@ -204,7 +204,7 @@
   </synapse>
   <synapse id="18">
     <action_set>
-      <rsc_op id="20" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="21" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="child_DoFencing:2" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  hostlist="c001n08 c001n02 c001n03 c001n01 "/>
       </rsc_op>
@@ -213,7 +213,7 @@
   </synapse>
   <synapse id="19">
     <action_set>
-      <rsc_op id="21" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="22" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="child_DoFencing:3" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  hostlist="c001n08 c001n02 c001n03 c001n01 "/>
       </rsc_op>
@@ -222,7 +222,7 @@
   </synapse>
   <synapse id="20">
     <action_set>
-      <rsc_op id="15" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+      <rsc_op id="16" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
         <primitive id="child_DoFencing:3" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  hostlist="c001n08 c001n02 c001n03 c001n01 "/>
       </rsc_op>
@@ -231,71 +231,70 @@
   </synapse>
   <synapse id="21" priority="1000000">
     <action_set>
-      <pseudo_event id="47" operation="stopped" operation_key="DoFencing_stopped_0">
+      <pseudo_event id="48" operation="stopped" operation_key="DoFencing_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="37" operation="stop" operation_key="child_DoFencing:0_stop_0"/>
+        <pseudo_event id="38" operation="stop" operation_key="child_DoFencing:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="46" operation="stop" operation_key="DoFencing_stop_0"/>
+        <pseudo_event id="47" operation="stop" operation_key="DoFencing_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="22">
     <action_set>
-      <pseudo_event id="46" operation="stop" operation_key="DoFencing_stop_0">
+      <pseudo_event id="47" operation="stop" operation_key="DoFencing_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="49" operation="stonith" operation_key="stonith-c001n02-reboot" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n02-reboot" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="23">
     <action_set>
-      <crm_event id="49" operation="stonith" operation_key="stonith-c001n02-reboot" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
-        <attributes CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="24">
-    <action_set>
-      <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="49" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="49" operation="stonith" operation_key="stonith-c001n02-reboot" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n02-reboot" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="25">
+  <synapse id="24">
     <action_set>
-      <pseudo_event id="8" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="9" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="30" operation="stop" operation_key="rsc_c001n02_stop_0"/>
+        <pseudo_event id="31" operation="stop" operation_key="rsc_c001n02_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="37" operation="stop" operation_key="child_DoFencing:0_stop_0"/>
+        <pseudo_event id="38" operation="stop" operation_key="child_DoFencing:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="49" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="25">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-c001n02-reboot" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+        <attributes CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/829.scores b/pengine/test10/829.scores
index 71a372b..f0652ff 100644
--- a/pengine/test10/829.scores
+++ b/pengine/test10/829.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   c001n02: node is unclean
 Allocation scores:
 clone_color: DoFencing allocation score on c001n01: 0
 clone_color: DoFencing allocation score on c001n02: 0
diff --git a/pengine/test10/829.summary b/pengine/test10/829.summary
index 8649ed8..9e66733 100644
--- a/pengine/test10/829.summary
+++ b/pengine/test10/829.summary
@@ -14,9 +14,8 @@ Online: [ c001n01 c001n03 c001n08 ]
      child_DoFencing:2	(stonith:ssh):	Started c001n01
      child_DoFencing:3	(stonith:ssh):	Started c001n08
 
-  notice: Fencing   c001n02: node is unclean
 Transition Summary:
- * Fence (reboot) c001n02
+ * Fence (reboot) c001n02 'peer is no longer part of the cluster'
  * Move    rsc_c001n02	(Started c001n02 -> c001n01)
  * Stop    child_DoFencing:0	(c001n02)
 
@@ -39,9 +38,9 @@ Executing cluster transition:
  * Resource action: child_DoFencing:3 monitor on c001n03
  * Resource action: child_DoFencing:3 monitor on c001n01
  * Fencing c001n02 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   rsc_c001n02_stop_0
  * Pseudo action:   DoFencing_stop_0
+ * Pseudo action:   stonith_complete
  * Resource action: rsc_c001n02     start on c001n01
  * Pseudo action:   child_DoFencing:0_stop_0
  * Pseudo action:   DoFencing_stopped_0
diff --git a/pengine/test10/bug-5186-partial-migrate.exp b/pengine/test10/bug-5186-partial-migrate.exp
index bba083e..d9e806f 100644
--- a/pengine/test10/bug-5186-partial-migrate.exp
+++ b/pengine/test10/bug-5186-partial-migrate.exp
@@ -1,79 +1,79 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="14" operation="start" operation_key="prmDummy_start_0" on_node="bl460g1n6" on_node_uuid="3232261592">
+      <rsc_op id="15" operation="start" operation_key="prmDummy_start_0" on_node="bl460g1n6" on_node_uuid="3232261592">
         <primitive id="prmDummy" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_on_node="bl460g1n6" CRM_meta_on_node_uuid="3232261592" CRM_meta_record_pending="true" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="13" operation="stop" operation_key="prmDummy_stop_0"/>
+        <pseudo_event id="14" operation="stop" operation_key="prmDummy_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="71" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="72" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <pseudo_event id="13" operation="stop" operation_key="prmDummy_stop_0">
+      <pseudo_event id="14" operation="stop" operation_key="prmDummy_stop_0">
         <attributes CRM_meta_record_pending="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="72" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="17" operation="monitor" operation_key="prmVM2_monitor_10000" on_node="bl460g1n8" on_node_uuid="3232261594">
+      <rsc_op id="18" operation="monitor" operation_key="prmVM2_monitor_10000" on_node="bl460g1n8" on_node_uuid="3232261594">
         <primitive id="prmVM2" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_fail="restart" CRM_meta_on_node="bl460g1n8" CRM_meta_on_node_uuid="3232261594" CRM_meta_record_pending="true" CRM_meta_timeout="30000" config="/migrate_test/config/vm2.xml"  hypervisor="qemu:///system" migration_transport="ssh"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="16" operation="start" operation_key="prmVM2_start_0" on_node="bl460g1n8" on_node_uuid="3232261594"/>
+        <rsc_op id="17" operation="start" operation_key="prmVM2_start_0" on_node="bl460g1n8" on_node_uuid="3232261594"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="16" operation="start" operation_key="prmVM2_start_0" on_node="bl460g1n8" on_node_uuid="3232261594">
+      <rsc_op id="17" operation="start" operation_key="prmVM2_start_0" on_node="bl460g1n8" on_node_uuid="3232261594">
         <primitive id="prmVM2" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_name="start" CRM_meta_on_fail="restart" CRM_meta_on_node="bl460g1n8" CRM_meta_on_node_uuid="3232261594" CRM_meta_record_pending="true" CRM_meta_timeout="120000" config="/migrate_test/config/vm2.xml"  hypervisor="qemu:///system" migration_transport="ssh"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="1" operation="stop" operation_key="prmVM2_stop_0" on_node="bl460g1n6" on_node_uuid="3232261592"/>
+        <rsc_op id="2" operation="stop" operation_key="prmVM2_stop_0" on_node="bl460g1n6" on_node_uuid="3232261592"/>
       </trigger>
       <trigger>
-        <pseudo_event id="15" operation="stop" operation_key="prmVM2_stop_0"/>
+        <pseudo_event id="16" operation="stop" operation_key="prmVM2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="71" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="72" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="15" operation="stop" operation_key="prmVM2_stop_0">
+      <pseudo_event id="16" operation="stop" operation_key="prmVM2_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_on_fail="fence" CRM_meta_record_pending="true" CRM_meta_timeout="120000" config="/migrate_test/config/vm2.xml"  hypervisor="qemu:///system" migration_transport="ssh"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="72" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <rsc_op id="1" operation="stop" operation_key="prmVM2_stop_0" on_node="bl460g1n6" on_node_uuid="3232261592">
+      <rsc_op id="2" operation="stop" operation_key="prmVM2_stop_0" on_node="bl460g1n6" on_node_uuid="3232261592">
         <primitive id="prmVM2" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_fail="fence" CRM_meta_on_node="bl460g1n6" CRM_meta_on_node_uuid="3232261592" CRM_meta_record_pending="true" CRM_meta_timeout="120000" config="/migrate_test/config/vm2.xml"  hypervisor="qemu:///system" migration_transport="ssh"/>
       </rsc_op>
@@ -82,25 +82,25 @@
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="43" operation="stopped" operation_key="grpStonith8_stopped_0">
+      <pseudo_event id="44" operation="stopped" operation_key="grpStonith8_stopped_0">
         <attributes CRM_meta_record_pending="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="34" operation="stop" operation_key="prmStonith8-1_stop_0"/>
+        <pseudo_event id="35" operation="stop" operation_key="prmStonith8-1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="37" operation="stop" operation_key="prmStonith8-2_stop_0"/>
+        <pseudo_event id="38" operation="stop" operation_key="prmStonith8-2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="42" operation="stop" operation_key="grpStonith8_stop_0"/>
+        <pseudo_event id="43" operation="stop" operation_key="grpStonith8_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <pseudo_event id="42" operation="stop" operation_key="grpStonith8_stop_0">
+      <pseudo_event id="43" operation="stop" operation_key="grpStonith8_stop_0">
         <attributes CRM_meta_record_pending="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -108,305 +108,305 @@
   </synapse>
   <synapse id="8">
     <action_set>
-      <pseudo_event id="41" operation="running" operation_key="grpStonith8_running_0">
+      <pseudo_event id="42" operation="running" operation_key="grpStonith8_running_0">
         <attributes CRM_meta_record_pending="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="prmStonith8-1_start_0" on_node="bl460g1n6" on_node_uuid="3232261592"/>
+        <rsc_op id="36" operation="start" operation_key="prmStonith8-1_start_0" on_node="bl460g1n6" on_node_uuid="3232261592"/>
       </trigger>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="prmStonith8-2_start_0" on_node="bl460g1n6" on_node_uuid="3232261592"/>
+        <rsc_op id="39" operation="start" operation_key="prmStonith8-2_start_0" on_node="bl460g1n6" on_node_uuid="3232261592"/>
       </trigger>
       <trigger>
-        <pseudo_event id="40" operation="start" operation_key="grpStonith8_start_0"/>
+        <pseudo_event id="41" operation="start" operation_key="grpStonith8_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <pseudo_event id="40" operation="start" operation_key="grpStonith8_start_0">
+      <pseudo_event id="41" operation="start" operation_key="grpStonith8_start_0">
         <attributes CRM_meta_record_pending="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="43" operation="stopped" operation_key="grpStonith8_stopped_0"/>
+        <pseudo_event id="44" operation="stopped" operation_key="grpStonith8_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="36" operation="monitor" operation_key="prmStonith8-1_monitor_10000" on_node="bl460g1n6" on_node_uuid="3232261592">
+      <rsc_op id="37" operation="monitor" operation_key="prmStonith8-1_monitor_10000" on_node="bl460g1n6" on_node_uuid="3232261592">
         <primitive id="prmStonith8-1" class="stonith" type="external/stonith-helper"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_fail="restart" CRM_meta_on_node="bl460g1n6" CRM_meta_on_node_uuid="3232261592" CRM_meta_record_pending="true" CRM_meta_timeout="60000"  dead_check_target="192.168.133.218 192.168.101.218 192.168.102.218 192.168.201.218 192.168.133.238" hostlist="bl460g1n8" pcmk_reboot_retries="1" pcmk_reboot_timeout="40s" run_standby_wait="no"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="prmStonith8-1_start_0" on_node="bl460g1n6" on_node_uuid="3232261592"/>
+        <rsc_op id="36" operation="start" operation_key="prmStonith8-1_start_0" on_node="bl460g1n6" on_node_uuid="3232261592"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="35" operation="start" operation_key="prmStonith8-1_start_0" on_node="bl460g1n6" on_node_uuid="3232261592">
+      <rsc_op id="36" operation="start" operation_key="prmStonith8-1_start_0" on_node="bl460g1n6" on_node_uuid="3232261592">
         <primitive id="prmStonith8-1" class="stonith" type="external/stonith-helper"/>
         <attributes CRM_meta_name="start" CRM_meta_on_fail="restart" CRM_meta_on_node="bl460g1n6" CRM_meta_on_node_uuid="3232261592" CRM_meta_record_pending="true" CRM_meta_timeout="60000"  dead_check_target="192.168.133.218 192.168.101.218 192.168.102.218 192.168.201.218 192.168.133.238" hostlist="bl460g1n8" pcmk_reboot_retries="1" pcmk_reboot_timeout="40s" run_standby_wait="no"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="34" operation="stop" operation_key="prmStonith8-1_stop_0"/>
+        <pseudo_event id="35" operation="stop" operation_key="prmStonith8-1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="40" operation="start" operation_key="grpStonith8_start_0"/>
+        <pseudo_event id="41" operation="start" operation_key="grpStonith8_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <pseudo_event id="34" operation="stop" operation_key="prmStonith8-1_stop_0">
+      <pseudo_event id="35" operation="stop" operation_key="prmStonith8-1_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_on_fail="ignore" CRM_meta_record_pending="true" CRM_meta_timeout="60000"  dead_check_target="192.168.133.218 192.168.101.218 192.168.102.218 192.168.201.218 192.168.133.238" hostlist="bl460g1n8" pcmk_reboot_retries="1" pcmk_reboot_timeout="40s" run_standby_wait="no"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="37" operation="stop" operation_key="prmStonith8-2_stop_0"/>
+        <pseudo_event id="38" operation="stop" operation_key="prmStonith8-2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="42" operation="stop" operation_key="grpStonith8_stop_0"/>
+        <pseudo_event id="43" operation="stop" operation_key="grpStonith8_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13">
     <action_set>
-      <rsc_op id="39" operation="monitor" operation_key="prmStonith8-2_monitor_3600000" on_node="bl460g1n6" on_node_uuid="3232261592">
+      <rsc_op id="40" operation="monitor" operation_key="prmStonith8-2_monitor_3600000" on_node="bl460g1n6" on_node_uuid="3232261592">
         <primitive id="prmStonith8-2" class="stonith" type="external/ipmi"/>
         <attributes CRM_meta_interval="3600000" CRM_meta_name="monitor" CRM_meta_on_fail="restart" CRM_meta_on_node="bl460g1n6" CRM_meta_on_node_uuid="3232261592" CRM_meta_record_pending="true" CRM_meta_timeout="60000"  hostname="bl460g1n8" interface="lanplus" ipaddr="192.168.133.238" passwd="PASSW0RD" pcmk_reboot_retries="1" pcmk_reboot_timeout="60s" userid="USERID"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="prmStonith8-2_start_0" on_node="bl460g1n6" on_node_uuid="3232261592"/>
+        <rsc_op id="39" operation="start" operation_key="prmStonith8-2_start_0" on_node="bl460g1n6" on_node_uuid="3232261592"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <rsc_op id="38" operation="start" operation_key="prmStonith8-2_start_0" on_node="bl460g1n6" on_node_uuid="3232261592">
+      <rsc_op id="39" operation="start" operation_key="prmStonith8-2_start_0" on_node="bl460g1n6" on_node_uuid="3232261592">
         <primitive id="prmStonith8-2" class="stonith" type="external/ipmi"/>
         <attributes CRM_meta_name="start" CRM_meta_on_fail="restart" CRM_meta_on_node="bl460g1n6" CRM_meta_on_node_uuid="3232261592" CRM_meta_record_pending="true" CRM_meta_timeout="60000"  hostname="bl460g1n8" interface="lanplus" ipaddr="192.168.133.238" passwd="PASSW0RD" pcmk_reboot_retries="1" pcmk_reboot_timeout="60s" userid="USERID"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="prmStonith8-1_start_0" on_node="bl460g1n6" on_node_uuid="3232261592"/>
+        <rsc_op id="36" operation="start" operation_key="prmStonith8-1_start_0" on_node="bl460g1n6" on_node_uuid="3232261592"/>
       </trigger>
       <trigger>
-        <pseudo_event id="37" operation="stop" operation_key="prmStonith8-2_stop_0"/>
+        <pseudo_event id="38" operation="stop" operation_key="prmStonith8-2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="40" operation="start" operation_key="grpStonith8_start_0"/>
+        <pseudo_event id="41" operation="start" operation_key="grpStonith8_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15">
     <action_set>
-      <pseudo_event id="37" operation="stop" operation_key="prmStonith8-2_stop_0">
+      <pseudo_event id="38" operation="stop" operation_key="prmStonith8-2_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_on_fail="ignore" CRM_meta_record_pending="true" CRM_meta_timeout="60000"  hostname="bl460g1n8" interface="lanplus" ipaddr="192.168.133.238" passwd="PASSW0RD" pcmk_reboot_retries="1" pcmk_reboot_timeout="60s" userid="USERID"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="42" operation="stop" operation_key="grpStonith8_stop_0"/>
+        <pseudo_event id="43" operation="stop" operation_key="grpStonith8_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="16">
     <action_set>
-      <pseudo_event id="44" operation="stop" operation_key="prmDiskd1_stop_0" internal_operation_key="prmDiskd1:0_stop_0">
+      <pseudo_event id="45" operation="stop" operation_key="prmDiskd1_stop_0" internal_operation_key="prmDiskd1:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_on_fail="ignore" CRM_meta_record_pending="true" CRM_meta_timeout="60000"  device="/dev/mapper/lun1" interval="10" name="diskcheck_status" options="-e"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="51" operation="stop" operation_key="clnDiskd1_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593"/>
       </trigger>
       <trigger>
-        <crm_event id="72" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593"/>
+        <pseudo_event id="52" operation="stop" operation_key="clnDiskd1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="17" priority="1000000">
     <action_set>
-      <pseudo_event id="52" operation="stopped" operation_key="clnDiskd1_stopped_0">
+      <pseudo_event id="53" operation="stopped" operation_key="clnDiskd1_stopped_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_record_pending="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="44" operation="stop" operation_key="prmDiskd1_stop_0" internal_operation_key="prmDiskd1:0_stop_0"/>
+        <pseudo_event id="45" operation="stop" operation_key="prmDiskd1_stop_0" internal_operation_key="prmDiskd1:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="51" operation="stop" operation_key="clnDiskd1_stop_0"/>
+        <pseudo_event id="52" operation="stop" operation_key="clnDiskd1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="18">
     <action_set>
-      <pseudo_event id="51" operation="stop" operation_key="clnDiskd1_stop_0">
+      <pseudo_event id="52" operation="stop" operation_key="clnDiskd1_stop_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_record_pending="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="72" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="19">
     <action_set>
-      <pseudo_event id="53" operation="stop" operation_key="prmDiskd2_stop_0" internal_operation_key="prmDiskd2:0_stop_0">
+      <pseudo_event id="54" operation="stop" operation_key="prmDiskd2_stop_0" internal_operation_key="prmDiskd2:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_on_fail="ignore" CRM_meta_record_pending="true" CRM_meta_timeout="60000"  interval="10" name="diskcheck_status_internal" write_dir="/tmp/tmp2"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="60" operation="stop" operation_key="clnDiskd2_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593"/>
       </trigger>
       <trigger>
-        <crm_event id="72" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593"/>
+        <pseudo_event id="61" operation="stop" operation_key="clnDiskd2_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="20" priority="1000000">
     <action_set>
-      <pseudo_event id="61" operation="stopped" operation_key="clnDiskd2_stopped_0">
+      <pseudo_event id="62" operation="stopped" operation_key="clnDiskd2_stopped_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_record_pending="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="53" operation="stop" operation_key="prmDiskd2_stop_0" internal_operation_key="prmDiskd2:0_stop_0"/>
+        <pseudo_event id="54" operation="stop" operation_key="prmDiskd2_stop_0" internal_operation_key="prmDiskd2:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="60" operation="stop" operation_key="clnDiskd2_stop_0"/>
+        <pseudo_event id="61" operation="stop" operation_key="clnDiskd2_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21">
     <action_set>
-      <pseudo_event id="60" operation="stop" operation_key="clnDiskd2_stop_0">
+      <pseudo_event id="61" operation="stop" operation_key="clnDiskd2_stop_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_record_pending="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="72" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="22">
     <action_set>
-      <pseudo_event id="62" operation="stop" operation_key="prmPing_stop_0" internal_operation_key="prmPing:0_stop_0">
+      <pseudo_event id="63" operation="stop" operation_key="prmPing_stop_0" internal_operation_key="prmPing:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_on_fail="ignore" CRM_meta_record_pending="true" CRM_meta_timeout="60000" attempts="2"  host_list="192.168.201.254" multiplier="100" name="default_ping_set" timeout="2"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="69" operation="stop" operation_key="clnPing_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593"/>
       </trigger>
       <trigger>
-        <crm_event id="72" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593"/>
+        <pseudo_event id="70" operation="stop" operation_key="clnPing_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="23" priority="1000000">
     <action_set>
-      <pseudo_event id="70" operation="stopped" operation_key="clnPing_stopped_0">
+      <pseudo_event id="71" operation="stopped" operation_key="clnPing_stopped_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_record_pending="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="62" operation="stop" operation_key="prmPing_stop_0" internal_operation_key="prmPing:0_stop_0"/>
+        <pseudo_event id="63" operation="stop" operation_key="prmPing_stop_0" internal_operation_key="prmPing:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="69" operation="stop" operation_key="clnPing_stop_0"/>
+        <pseudo_event id="70" operation="stop" operation_key="clnPing_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="24">
     <action_set>
-      <pseudo_event id="69" operation="stop" operation_key="clnPing_stop_0">
+      <pseudo_event id="70" operation="stop" operation_key="clnPing_stop_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_record_pending="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="72" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="25">
     <action_set>
-      <crm_event id="72" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593">
-        <attributes CRM_meta_default_ping_set="100" CRM_meta_diskcheck_status="normal" CRM_meta_diskcheck_status_internal="normal" CRM_meta_on_node="bl460g1n7" CRM_meta_on_node_uuid="3232261593" CRM_meta_probe_complete="true" CRM_meta_ringnumber_0="192.168.101.217 is UP" CRM_meta_ringnumber_1="192.168.102.217 is UP" CRM_meta_shutdown="0" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="3232261593"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="26">
-    <action_set>
-      <pseudo_event id="71" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="72" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="72" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="27">
+  <synapse id="26">
     <action_set>
-      <pseudo_event id="12" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="13" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="1" operation="stop" operation_key="prmVM2_stop_0" on_node="bl460g1n6" on_node_uuid="3232261592"/>
+        <rsc_op id="2" operation="stop" operation_key="prmVM2_stop_0" on_node="bl460g1n6" on_node_uuid="3232261592"/>
       </trigger>
       <trigger>
-        <pseudo_event id="13" operation="stop" operation_key="prmDummy_stop_0"/>
+        <pseudo_event id="14" operation="stop" operation_key="prmDummy_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="15" operation="stop" operation_key="prmVM2_stop_0"/>
+        <pseudo_event id="16" operation="stop" operation_key="prmVM2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="34" operation="stop" operation_key="prmStonith8-1_stop_0"/>
+        <pseudo_event id="35" operation="stop" operation_key="prmStonith8-1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="37" operation="stop" operation_key="prmStonith8-2_stop_0"/>
+        <pseudo_event id="38" operation="stop" operation_key="prmStonith8-2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="44" operation="stop" operation_key="prmDiskd1_stop_0" internal_operation_key="prmDiskd1:0_stop_0"/>
+        <pseudo_event id="45" operation="stop" operation_key="prmDiskd1_stop_0" internal_operation_key="prmDiskd1:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="53" operation="stop" operation_key="prmDiskd2_stop_0" internal_operation_key="prmDiskd2:0_stop_0"/>
+        <pseudo_event id="54" operation="stop" operation_key="prmDiskd2_stop_0" internal_operation_key="prmDiskd2:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="62" operation="stop" operation_key="prmPing_stop_0" internal_operation_key="prmPing:0_stop_0"/>
+        <pseudo_event id="63" operation="stop" operation_key="prmPing_stop_0" internal_operation_key="prmPing:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="71" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="72" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="27">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-bl460g1n7-reboot" on_node="bl460g1n7" on_node_uuid="3232261593">
+        <attributes CRM_meta_default_ping_set="100" CRM_meta_diskcheck_status="normal" CRM_meta_diskcheck_status_internal="normal" CRM_meta_on_node="bl460g1n7" CRM_meta_on_node_uuid="3232261593" CRM_meta_probe_complete="true" CRM_meta_ringnumber_0="192.168.101.217 is UP" CRM_meta_ringnumber_1="192.168.102.217 is UP" CRM_meta_shutdown="0" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="3232261593"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
diff --git a/pengine/test10/bug-5186-partial-migrate.scores b/pengine/test10/bug-5186-partial-migrate.scores
index dd59f34..8b29529 100644
--- a/pengine/test10/bug-5186-partial-migrate.scores
+++ b/pengine/test10/bug-5186-partial-migrate.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   bl460g1n7: node is unclean
 Allocation scores:
 clone_color: clnDiskd1 allocation score on bl460g1n6: 200
 clone_color: clnDiskd1 allocation score on bl460g1n7: 0
diff --git a/pengine/test10/bug-5186-partial-migrate.summary b/pengine/test10/bug-5186-partial-migrate.summary
index 5c8231d..c2685d8 100644
--- a/pengine/test10/bug-5186-partial-migrate.summary
+++ b/pengine/test10/bug-5186-partial-migrate.summary
@@ -24,9 +24,8 @@ Online: [ bl460g1n6 bl460g1n8 ]
      prmPing	(ocf::pacemaker:ping):	Started bl460g1n7 (UNCLEAN)
      Started: [ bl460g1n6 bl460g1n8 ]
 
-  notice: Fencing   bl460g1n7: node is unclean
 Transition Summary:
- * Fence (reboot) bl460g1n7
+ * Fence (reboot) bl460g1n7 'prmDummy is thought to be active there'
  * Move    prmDummy	(Started bl460g1n7 -> bl460g1n6)
  * Move    prmVM2	(Started bl460g1n7 -> bl460g1n8)
  * Move    prmStonith8-1	(Started bl460g1n7 -> bl460g1n6)
@@ -40,13 +39,13 @@ Executing cluster transition:
  * Pseudo action:   grpStonith8_stop_0
  * Pseudo action:   prmStonith8-2_stop_0
  * Fencing bl460g1n7 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   prmDummy_stop_0
  * Pseudo action:   prmVM2_stop_0
  * Pseudo action:   prmStonith8-1_stop_0
  * Pseudo action:   clnDiskd1_stop_0
  * Pseudo action:   clnDiskd2_stop_0
  * Pseudo action:   clnPing_stop_0
+ * Pseudo action:   stonith_complete
  * Resource action: prmDummy        start on bl460g1n6
  * Resource action: prmVM2          start on bl460g1n8
  * Pseudo action:   grpStonith8_stopped_0
diff --git a/pengine/test10/bug-cl-5212.exp b/pengine/test10/bug-cl-5212.exp
index 6d0a2f4..344711b 100644
--- a/pengine/test10/bug-cl-5212.exp
+++ b/pengine/test10/bug-cl-5212.exp
@@ -1,7 +1,7 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <pseudo_event id="9" operation="stop" operation_key="grpStonith1_stop_0">
+      <pseudo_event id="11" operation="stop" operation_key="grpStonith1_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -9,7 +9,7 @@
   </synapse>
   <synapse id="1">
     <action_set>
-      <pseudo_event id="7" operation="start" operation_key="grpStonith1_start_0">
+      <pseudo_event id="9" operation="start" operation_key="grpStonith1_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -17,7 +17,7 @@
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="16" operation="stop" operation_key="grpStonith2_stop_0">
+      <pseudo_event id="18" operation="stop" operation_key="grpStonith2_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -25,7 +25,7 @@
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="14" operation="start" operation_key="grpStonith2_start_0">
+      <pseudo_event id="16" operation="start" operation_key="grpStonith2_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -33,7 +33,7 @@
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="21" operation="stop" operation_key="grpStonith3_stop_0">
+      <pseudo_event id="23" operation="stop" operation_key="grpStonith3_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -41,78 +41,78 @@
   </synapse>
   <synapse id="5" priority="1000000">
     <action_set>
-      <rsc_op id="72" operation="notify" operation_key="pgsql_post_notify_stop_0" internal_operation_key="pgsql:2_post_notify_stop_0" on_node="srv03" on_node_uuid="3232238300">
+      <rsc_op id="74" operation="notify" operation_key="pgsql_post_notify_stop_0" internal_operation_key="pgsql:2_post_notify_stop_0" on_node="srv03" on_node_uuid="3232238300">
         <primitive id="pgsql" long-id="pgsql:2" class="ocf" provider="pacemaker" type="Stateful"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="notify" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1 pgsql:2" CRM_meta_notify_active_uname="srv02 srv01 srv03" CRM_meta_notify_all_uname="srv01 srv02 srv03" CRM_meta_notify_available_uname="srv03 srv02 srv01" CRM_meta_notify_demote_resource="pgsql:1" CRM_meta_notify_demote_uname="srv01" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="pgsql:1" CRM_meta_notify_master_uname="srv01" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="pgsql:0 pgsql:2" CRM_meta_notify_slave_uname="srv02 srv03" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0 pgsql:1" CRM_meta_notify_stop_uname="srv02 srv01" CRM_meta_notify_type="post" CRM_meta_on_node="srv03" CRM_meta_on_node_uuid="3232238300" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="38" operation="notify" operation_key="msPostgresql_post_notify_stopped_0"/>
+        <pseudo_event id="40" operation="notify" operation_key="msPostgresql_post_notify_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <rsc_op id="71" operation="notify" operation_key="pgsql_pre_notify_stop_0" internal_operation_key="pgsql:2_pre_notify_stop_0" on_node="srv03" on_node_uuid="3232238300">
+      <rsc_op id="73" operation="notify" operation_key="pgsql_pre_notify_stop_0" internal_operation_key="pgsql:2_pre_notify_stop_0" on_node="srv03" on_node_uuid="3232238300">
         <primitive id="pgsql" long-id="pgsql:2" class="ocf" provider="pacemaker" type="Stateful"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="notify" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1 pgsql:2" CRM_meta_notify_active_uname="srv02 srv01 srv03" CRM_meta_notify_all_uname="srv01 srv02 srv03" CRM_meta_notify_available_uname="srv03 srv02 srv01" CRM_meta_notify_demote_resource="pgsql:1" CRM_meta_notify_demote_uname="srv01" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="pgsql:1" CRM_meta_notify_master_uname="srv01" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="pgsql:0 pgsql:2" CRM_meta_notify_slave_uname="srv02 srv03" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0 pgsql:1" CRM_meta_notify_stop_uname="srv02 srv01" CRM_meta_notify_type="pre" CRM_meta_on_node="srv03" CRM_meta_on_node_uuid="3232238300" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="36" operation="notify" operation_key="msPostgresql_pre_notify_stop_0"/>
+        <pseudo_event id="38" operation="notify" operation_key="msPostgresql_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7" priority="1000000">
     <action_set>
-      <pseudo_event id="39" operation="notified" operation_key="msPostgresql_confirmed-post_notify_stopped_0">
+      <pseudo_event id="41" operation="notified" operation_key="msPostgresql_confirmed-post_notify_stopped_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="38" operation="notify" operation_key="msPostgresql_post_notify_stopped_0"/>
+        <pseudo_event id="40" operation="notify" operation_key="msPostgresql_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="72" operation="notify" operation_key="pgsql_post_notify_stop_0" internal_operation_key="pgsql:2_post_notify_stop_0" on_node="srv03" on_node_uuid="3232238300"/>
+        <rsc_op id="74" operation="notify" operation_key="pgsql_post_notify_stop_0" internal_operation_key="pgsql:2_post_notify_stop_0" on_node="srv03" on_node_uuid="3232238300"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8" priority="1000000">
     <action_set>
-      <pseudo_event id="38" operation="notify" operation_key="msPostgresql_post_notify_stopped_0">
+      <pseudo_event id="40" operation="notify" operation_key="msPostgresql_post_notify_stopped_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="35" operation="stopped" operation_key="msPostgresql_stopped_0"/>
+        <pseudo_event id="37" operation="stopped" operation_key="msPostgresql_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="37" operation="notified" operation_key="msPostgresql_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="39" operation="notified" operation_key="msPostgresql_confirmed-pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <pseudo_event id="37" operation="notified" operation_key="msPostgresql_confirmed-pre_notify_stop_0">
+      <pseudo_event id="39" operation="notified" operation_key="msPostgresql_confirmed-pre_notify_stop_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="36" operation="notify" operation_key="msPostgresql_pre_notify_stop_0"/>
+        <pseudo_event id="38" operation="notify" operation_key="msPostgresql_pre_notify_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="71" operation="notify" operation_key="pgsql_pre_notify_stop_0" internal_operation_key="pgsql:2_pre_notify_stop_0" on_node="srv03" on_node_uuid="3232238300"/>
+        <rsc_op id="73" operation="notify" operation_key="pgsql_pre_notify_stop_0" internal_operation_key="pgsql:2_pre_notify_stop_0" on_node="srv03" on_node_uuid="3232238300"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <pseudo_event id="36" operation="notify" operation_key="msPostgresql_pre_notify_stop_0">
+      <pseudo_event id="38" operation="notify" operation_key="msPostgresql_pre_notify_stop_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -120,43 +120,43 @@
   </synapse>
   <synapse id="11" priority="1000000">
     <action_set>
-      <pseudo_event id="35" operation="stopped" operation_key="msPostgresql_stopped_0">
+      <pseudo_event id="37" operation="stopped" operation_key="msPostgresql_stopped_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="34" operation="stop" operation_key="msPostgresql_stop_0"/>
+        <pseudo_event id="36" operation="stop" operation_key="msPostgresql_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <pseudo_event id="34" operation="stop" operation_key="msPostgresql_stop_0">
+      <pseudo_event id="36" operation="stop" operation_key="msPostgresql_stop_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="37" operation="notified" operation_key="msPostgresql_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="39" operation="notified" operation_key="msPostgresql_confirmed-pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13" priority="1000000">
     <action_set>
-      <pseudo_event id="59" operation="stopped" operation_key="clnPingd_stopped_0">
+      <pseudo_event id="61" operation="stopped" operation_key="clnPingd_stopped_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="58" operation="stop" operation_key="clnPingd_stop_0"/>
+        <pseudo_event id="60" operation="stop" operation_key="clnPingd_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <pseudo_event id="58" operation="stop" operation_key="clnPingd_stop_0">
+      <pseudo_event id="60" operation="stop" operation_key="clnPingd_stop_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
diff --git a/pengine/test10/bug-cl-5247.scores b/pengine/test10/bug-cl-5247.scores
index f1ded69..e9e4709 100644
--- a/pengine/test10/bug-cl-5247.scores
+++ b/pengine/test10/bug-cl-5247.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   pgsr02: guest is unclean
 Allocation scores:
 Using the original execution date of: 2015-08-12 02:53:40Z
 clone_color: msPostgresql allocation score on bl460g8n3: -INFINITY
diff --git a/pengine/test10/bug-cl-5247.summary b/pengine/test10/bug-cl-5247.summary
index 755e647..fc97e8d 100644
--- a/pengine/test10/bug-cl-5247.summary
+++ b/pengine/test10/bug-cl-5247.summary
@@ -17,9 +17,8 @@ Containers: [ pgsr01:prmDB1 ]
      Masters: [ pgsr01 ]
      Stopped: [ bl460g8n3 bl460g8n4 ]
 
-  notice: Fencing   pgsr02: guest is unclean
 Transition Summary:
- * Fence (off) pgsr02 (resource: prmDB2)
+ * Fence (off) pgsr02 (resource: prmDB2) 'guest is unclean'
  * Stop    prmDB2	(bl460g8n4)
  * Restart prmStonith1-2	(Started bl460g8n4)
  * Restart prmStonith2-2	(Started bl460g8n3)
diff --git a/pengine/test10/bug-lf-2508.exp b/pengine/test10/bug-lf-2508.exp
index bf70378..925afbc 100644
--- a/pengine/test10/bug-lf-2508.exp
+++ b/pengine/test10/bug-lf-2508.exp
@@ -1,22 +1,22 @@
 <transition_graph cluster-delay="60s" stonith-timeout="240s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <pseudo_event id="22" operation="running" operation_key="Group01_running_0">
+      <pseudo_event id="23" operation="running" operation_key="Group01_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="19" operation="start" operation_key="Dummy01_start_0" on_node="srv01" on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb"/>
+        <rsc_op id="20" operation="start" operation_key="Dummy01_start_0" on_node="srv01" on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb"/>
       </trigger>
       <trigger>
-        <pseudo_event id="21" operation="start" operation_key="Group01_start_0"/>
+        <pseudo_event id="22" operation="start" operation_key="Group01_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <pseudo_event id="21" operation="start" operation_key="Group01_start_0">
+      <pseudo_event id="22" operation="start" operation_key="Group01_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -24,317 +24,317 @@
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="20" operation="monitor" operation_key="Dummy01_monitor_10000" on_node="srv01" on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb">
+      <rsc_op id="21" operation="monitor" operation_key="Dummy01_monitor_10000" on_node="srv01" on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb">
         <primitive id="Dummy01" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_fail="restart" CRM_meta_on_node="srv01" CRM_meta_on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="19" operation="start" operation_key="Dummy01_start_0" on_node="srv01" on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb"/>
+        <rsc_op id="20" operation="start" operation_key="Dummy01_start_0" on_node="srv01" on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="19" operation="start" operation_key="Dummy01_start_0" on_node="srv01" on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb">
+      <rsc_op id="20" operation="start" operation_key="Dummy01_start_0" on_node="srv01" on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb">
         <primitive id="Dummy01" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_fail="restart" CRM_meta_on_node="srv01" CRM_meta_on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb" CRM_meta_requires="fencing" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="21" operation="start" operation_key="Group01_start_0"/>
+        <pseudo_event id="22" operation="start" operation_key="Group01_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="161" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="162" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="31" operation="stopped" operation_key="Group02_stopped_0">
+      <pseudo_event id="32" operation="stopped" operation_key="Group02_stopped_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="25" operation="stop" operation_key="Dummy02_stop_0"/>
+        <pseudo_event id="26" operation="stop" operation_key="Dummy02_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="30" operation="stop" operation_key="Group02_stop_0"/>
+        <pseudo_event id="31" operation="stop" operation_key="Group02_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <pseudo_event id="30" operation="stop" operation_key="Group02_stop_0">
+      <pseudo_event id="31" operation="stop" operation_key="Group02_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="162" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="29" operation="running" operation_key="Group02_running_0">
+      <pseudo_event id="30" operation="running" operation_key="Group02_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="26" operation="start" operation_key="Dummy02_start_0" on_node="srv04" on_node_uuid="82d8b53b-a29d-40f5-9a1d-156bf3b7af62"/>
+        <rsc_op id="27" operation="start" operation_key="Dummy02_start_0" on_node="srv04" on_node_uuid="82d8b53b-a29d-40f5-9a1d-156bf3b7af62"/>
       </trigger>
       <trigger>
-        <pseudo_event id="28" operation="start" operation_key="Group02_start_0"/>
+        <pseudo_event id="29" operation="start" operation_key="Group02_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <pseudo_event id="28" operation="start" operation_key="Group02_start_0">
+      <pseudo_event id="29" operation="start" operation_key="Group02_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="31" operation="stopped" operation_key="Group02_stopped_0"/>
+        <pseudo_event id="32" operation="stopped" operation_key="Group02_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <rsc_op id="27" operation="monitor" operation_key="Dummy02_monitor_10000" on_node="srv04" on_node_uuid="82d8b53b-a29d-40f5-9a1d-156bf3b7af62">
+      <rsc_op id="28" operation="monitor" operation_key="Dummy02_monitor_10000" on_node="srv04" on_node_uuid="82d8b53b-a29d-40f5-9a1d-156bf3b7af62">
         <primitive id="Dummy02" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_fail="restart" CRM_meta_on_node="srv04" CRM_meta_on_node_uuid="82d8b53b-a29d-40f5-9a1d-156bf3b7af62" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="26" operation="start" operation_key="Dummy02_start_0" on_node="srv04" on_node_uuid="82d8b53b-a29d-40f5-9a1d-156bf3b7af62"/>
+        <rsc_op id="27" operation="start" operation_key="Dummy02_start_0" on_node="srv04" on_node_uuid="82d8b53b-a29d-40f5-9a1d-156bf3b7af62"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <rsc_op id="26" operation="start" operation_key="Dummy02_start_0" on_node="srv04" on_node_uuid="82d8b53b-a29d-40f5-9a1d-156bf3b7af62">
+      <rsc_op id="27" operation="start" operation_key="Dummy02_start_0" on_node="srv04" on_node_uuid="82d8b53b-a29d-40f5-9a1d-156bf3b7af62">
         <primitive id="Dummy02" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_fail="restart" CRM_meta_on_node="srv04" CRM_meta_on_node_uuid="82d8b53b-a29d-40f5-9a1d-156bf3b7af62" CRM_meta_requires="fencing" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="25" operation="stop" operation_key="Dummy02_stop_0"/>
+        <pseudo_event id="26" operation="stop" operation_key="Dummy02_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="28" operation="start" operation_key="Group02_start_0"/>
+        <pseudo_event id="29" operation="start" operation_key="Group02_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="161" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="162" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <pseudo_event id="25" operation="stop" operation_key="Dummy02_stop_0">
+      <pseudo_event id="26" operation="stop" operation_key="Dummy02_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_on_fail="fence" CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="30" operation="stop" operation_key="Group02_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
       </trigger>
       <trigger>
-        <crm_event id="162" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
+        <pseudo_event id="31" operation="stop" operation_key="Group02_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <pseudo_event id="51" operation="stopped" operation_key="grpStonith1:1_stopped_0">
+      <pseudo_event id="52" operation="stopped" operation_key="grpStonith1:1_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="46" operation="stop" operation_key="prmStonith1-1:1_stop_0"/>
+        <pseudo_event id="47" operation="stop" operation_key="prmStonith1-1:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="47" operation="stop" operation_key="prmStonith1-3:1_stop_0"/>
+        <pseudo_event id="48" operation="stop" operation_key="prmStonith1-3:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="50" operation="stop" operation_key="grpStonith1:1_stop_0"/>
+        <pseudo_event id="51" operation="stop" operation_key="grpStonith1:1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <pseudo_event id="50" operation="stop" operation_key="grpStonith1:1_stop_0">
+      <pseudo_event id="51" operation="stop" operation_key="grpStonith1:1_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="66" operation="stop" operation_key="clnStonith1_stop_0"/>
+        <pseudo_event id="67" operation="stop" operation_key="clnStonith1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13" priority="1">
     <action_set>
-      <pseudo_event id="46" operation="stop" operation_key="prmStonith1-1:1_stop_0">
+      <pseudo_event id="47" operation="stop" operation_key="prmStonith1-1:1_stop_0">
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="60000"  dead_check_target="192.168.40.10" hostlist="srv01" priority="1" run_quorum_check="yes" run_standby_wait="no" stonith-timeout="60s"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="47" operation="stop" operation_key="prmStonith1-3:1_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
       </trigger>
       <trigger>
-        <pseudo_event id="50" operation="stop" operation_key="grpStonith1:1_stop_0"/>
+        <pseudo_event id="48" operation="stop" operation_key="prmStonith1-3:1_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="162" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
+        <pseudo_event id="51" operation="stop" operation_key="grpStonith1:1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14" priority="3">
     <action_set>
-      <pseudo_event id="47" operation="stop" operation_key="prmStonith1-3:1_stop_0">
+      <pseudo_event id="48" operation="stop" operation_key="prmStonith1-3:1_stop_0">
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="60000"  hostlist="srv01" priority="3" stonith-timeout="60s"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="50" operation="stop" operation_key="grpStonith1:1_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
       </trigger>
       <trigger>
-        <crm_event id="162" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
+        <pseudo_event id="51" operation="stop" operation_key="grpStonith1:1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15" priority="1000000">
     <action_set>
-      <pseudo_event id="67" operation="stopped" operation_key="clnStonith1_stopped_0">
+      <pseudo_event id="68" operation="stopped" operation_key="clnStonith1_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="51" operation="stopped" operation_key="grpStonith1:1_stopped_0"/>
+        <pseudo_event id="52" operation="stopped" operation_key="grpStonith1:1_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="66" operation="stop" operation_key="clnStonith1_stop_0"/>
+        <pseudo_event id="67" operation="stop" operation_key="clnStonith1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="16">
     <action_set>
-      <pseudo_event id="66" operation="stop" operation_key="clnStonith1_stop_0">
+      <pseudo_event id="67" operation="stop" operation_key="clnStonith1_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="162" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="17">
     <action_set>
-      <pseudo_event id="105" operation="stopped" operation_key="grpStonith3:0_stopped_0">
+      <pseudo_event id="106" operation="stopped" operation_key="grpStonith3:0_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="100" operation="stop" operation_key="prmStonith3-1:1_stop_0" internal_operation_key="prmStonith3-1:0_stop_0"/>
+        <pseudo_event id="101" operation="stop" operation_key="prmStonith3-1:1_stop_0" internal_operation_key="prmStonith3-1:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="101" operation="stop" operation_key="prmStonith3-3:1_stop_0" internal_operation_key="prmStonith3-3:0_stop_0"/>
+        <pseudo_event id="102" operation="stop" operation_key="prmStonith3-3:1_stop_0" internal_operation_key="prmStonith3-3:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="104" operation="stop" operation_key="grpStonith3:0_stop_0"/>
+        <pseudo_event id="105" operation="stop" operation_key="grpStonith3:0_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="18">
     <action_set>
-      <pseudo_event id="104" operation="stop" operation_key="grpStonith3:0_stop_0">
+      <pseudo_event id="105" operation="stop" operation_key="grpStonith3:0_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="129" operation="stop" operation_key="clnStonith3_stop_0"/>
+        <pseudo_event id="130" operation="stop" operation_key="clnStonith3_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="19" priority="1">
     <action_set>
-      <pseudo_event id="100" operation="stop" operation_key="prmStonith3-1:1_stop_0" internal_operation_key="prmStonith3-1:0_stop_0">
+      <pseudo_event id="101" operation="stop" operation_key="prmStonith3-1:1_stop_0" internal_operation_key="prmStonith3-1:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="60000"  dead_check_target="192.168.40.30" hostlist="srv03" priority="1" run_quorum_check="yes" run_standby_wait="no" stonith-timeout="60s"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="101" operation="stop" operation_key="prmStonith3-3:1_stop_0" internal_operation_key="prmStonith3-3:0_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
       </trigger>
       <trigger>
-        <pseudo_event id="104" operation="stop" operation_key="grpStonith3:0_stop_0"/>
+        <pseudo_event id="102" operation="stop" operation_key="prmStonith3-3:1_stop_0" internal_operation_key="prmStonith3-3:0_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="162" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
+        <pseudo_event id="105" operation="stop" operation_key="grpStonith3:0_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="20" priority="3">
     <action_set>
-      <pseudo_event id="101" operation="stop" operation_key="prmStonith3-3:1_stop_0" internal_operation_key="prmStonith3-3:0_stop_0">
+      <pseudo_event id="102" operation="stop" operation_key="prmStonith3-3:1_stop_0" internal_operation_key="prmStonith3-3:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="60000"  hostlist="srv03" priority="3" stonith-timeout="60s"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="104" operation="stop" operation_key="grpStonith3:0_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
       </trigger>
       <trigger>
-        <crm_event id="162" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
+        <pseudo_event id="105" operation="stop" operation_key="grpStonith3:0_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21">
     <action_set>
-      <pseudo_event id="112" operation="running" operation_key="grpStonith3:1_running_0">
+      <pseudo_event id="113" operation="running" operation_key="grpStonith3:1_running_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="109" operation="start" operation_key="prmStonith3-3:1_start_0" on_node="srv01" on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb"/>
+        <rsc_op id="110" operation="start" operation_key="prmStonith3-3:1_start_0" on_node="srv01" on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb"/>
       </trigger>
       <trigger>
-        <pseudo_event id="111" operation="start" operation_key="grpStonith3:1_start_0"/>
+        <pseudo_event id="112" operation="start" operation_key="grpStonith3:1_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="22">
     <action_set>
-      <pseudo_event id="111" operation="start" operation_key="grpStonith3:1_start_0">
+      <pseudo_event id="112" operation="start" operation_key="grpStonith3:1_start_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="127" operation="start" operation_key="clnStonith3_start_0"/>
+        <pseudo_event id="128" operation="start" operation_key="clnStonith3_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="23" priority="1">
     <action_set>
-      <rsc_op id="108" operation="monitor" operation_key="prmStonith3-1:1_monitor_3600000" on_node="srv01" on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb">
+      <rsc_op id="109" operation="monitor" operation_key="prmStonith3-1:1_monitor_3600000" on_node="srv01" on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb">
         <primitive id="prmStonith3-1" long-id="prmStonith3-1:1" class="stonith" type="external/stonith-helper"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="3600000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="srv01" CRM_meta_on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb" CRM_meta_timeout="60000"  dead_check_target="192.168.40.30" hostlist="srv03" priority="1" run_quorum_check="yes" run_standby_wait="no" stonith-timeout="60s"/>
       </rsc_op>
@@ -343,232 +343,231 @@
   </synapse>
   <synapse id="24" priority="3">
     <action_set>
-      <rsc_op id="110" operation="monitor" operation_key="prmStonith3-3:1_monitor_3600000" on_node="srv01" on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb">
+      <rsc_op id="111" operation="monitor" operation_key="prmStonith3-3:1_monitor_3600000" on_node="srv01" on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb">
         <primitive id="prmStonith3-3" long-id="prmStonith3-3:1" class="stonith" type="external/ssh"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="3600000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="srv01" CRM_meta_on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb" CRM_meta_timeout="60000"  hostlist="srv03" priority="3" stonith-timeout="60s"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="109" operation="start" operation_key="prmStonith3-3:1_start_0" on_node="srv01" on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb"/>
+        <rsc_op id="110" operation="start" operation_key="prmStonith3-3:1_start_0" on_node="srv01" on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="25" priority="3">
     <action_set>
-      <rsc_op id="109" operation="start" operation_key="prmStonith3-3:1_start_0" on_node="srv01" on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb">
+      <rsc_op id="110" operation="start" operation_key="prmStonith3-3:1_start_0" on_node="srv01" on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb">
         <primitive id="prmStonith3-3" long-id="prmStonith3-3:1" class="stonith" type="external/ssh"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="srv01" CRM_meta_on_node_uuid="e2bc05d5-2a0f-4e2e-8566-bd1000f1cfeb" CRM_meta_timeout="60000"  hostlist="srv03" priority="3" stonith-timeout="60s"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="18" operation="all_stopped" operation_key="all_stopped"/>
+        <pseudo_event id="19" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <pseudo_event id="111" operation="start" operation_key="grpStonith3:1_start_0"/>
+        <pseudo_event id="112" operation="start" operation_key="grpStonith3:1_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="26" priority="1000000">
     <action_set>
-      <pseudo_event id="130" operation="stopped" operation_key="clnStonith3_stopped_0">
+      <pseudo_event id="131" operation="stopped" operation_key="clnStonith3_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="105" operation="stopped" operation_key="grpStonith3:0_stopped_0"/>
+        <pseudo_event id="106" operation="stopped" operation_key="grpStonith3:0_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="129" operation="stop" operation_key="clnStonith3_stop_0"/>
+        <pseudo_event id="130" operation="stop" operation_key="clnStonith3_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="27">
     <action_set>
-      <pseudo_event id="129" operation="stop" operation_key="clnStonith3_stop_0">
+      <pseudo_event id="130" operation="stop" operation_key="clnStonith3_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="162" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="28" priority="1000000">
     <action_set>
-      <pseudo_event id="128" operation="running" operation_key="clnStonith3_running_0">
+      <pseudo_event id="129" operation="running" operation_key="clnStonith3_running_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="112" operation="running" operation_key="grpStonith3:1_running_0"/>
+        <pseudo_event id="113" operation="running" operation_key="grpStonith3:1_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="127" operation="start" operation_key="clnStonith3_start_0"/>
+        <pseudo_event id="128" operation="start" operation_key="clnStonith3_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="29">
     <action_set>
-      <pseudo_event id="127" operation="start" operation_key="clnStonith3_start_0">
+      <pseudo_event id="128" operation="start" operation_key="clnStonith3_start_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="130" operation="stopped" operation_key="clnStonith3_stopped_0"/>
+        <pseudo_event id="131" operation="stopped" operation_key="clnStonith3_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="30">
     <action_set>
-      <pseudo_event id="144" operation="stopped" operation_key="grpStonith4:1_stopped_0">
+      <pseudo_event id="145" operation="stopped" operation_key="grpStonith4:1_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="139" operation="stop" operation_key="prmStonith4-1:1_stop_0"/>
+        <pseudo_event id="140" operation="stop" operation_key="prmStonith4-1:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="140" operation="stop" operation_key="prmStonith4-3:1_stop_0"/>
+        <pseudo_event id="141" operation="stop" operation_key="prmStonith4-3:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="143" operation="stop" operation_key="grpStonith4:1_stop_0"/>
+        <pseudo_event id="144" operation="stop" operation_key="grpStonith4:1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="31">
     <action_set>
-      <pseudo_event id="143" operation="stop" operation_key="grpStonith4:1_stop_0">
+      <pseudo_event id="144" operation="stop" operation_key="grpStonith4:1_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="159" operation="stop" operation_key="clnStonith4_stop_0"/>
+        <pseudo_event id="160" operation="stop" operation_key="clnStonith4_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="32" priority="1">
     <action_set>
-      <pseudo_event id="139" operation="stop" operation_key="prmStonith4-1:1_stop_0">
+      <pseudo_event id="140" operation="stop" operation_key="prmStonith4-1:1_stop_0">
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="60000"  dead_check_target="192.168.40.40" hostlist="srv04" priority="1" run_quorum_check="yes" run_standby_wait="no" stonith-timeout="60s"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="140" operation="stop" operation_key="prmStonith4-3:1_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
       </trigger>
       <trigger>
-        <pseudo_event id="143" operation="stop" operation_key="grpStonith4:1_stop_0"/>
+        <pseudo_event id="141" operation="stop" operation_key="prmStonith4-3:1_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="162" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
+        <pseudo_event id="144" operation="stop" operation_key="grpStonith4:1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="33" priority="3">
     <action_set>
-      <pseudo_event id="140" operation="stop" operation_key="prmStonith4-3:1_stop_0">
+      <pseudo_event id="141" operation="stop" operation_key="prmStonith4-3:1_stop_0">
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="60000"  hostlist="srv04" priority="3" stonith-timeout="60s"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="143" operation="stop" operation_key="grpStonith4:1_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
       </trigger>
       <trigger>
-        <crm_event id="162" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
+        <pseudo_event id="144" operation="stop" operation_key="grpStonith4:1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="34" priority="1000000">
     <action_set>
-      <pseudo_event id="160" operation="stopped" operation_key="clnStonith4_stopped_0">
+      <pseudo_event id="161" operation="stopped" operation_key="clnStonith4_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="144" operation="stopped" operation_key="grpStonith4:1_stopped_0"/>
+        <pseudo_event id="145" operation="stopped" operation_key="grpStonith4:1_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="159" operation="stop" operation_key="clnStonith4_stop_0"/>
+        <pseudo_event id="160" operation="stop" operation_key="clnStonith4_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="35">
     <action_set>
-      <pseudo_event id="159" operation="stop" operation_key="clnStonith4_stop_0">
+      <pseudo_event id="160" operation="stop" operation_key="clnStonith4_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="162" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="36">
     <action_set>
-      <crm_event id="162" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182">
-        <attributes CRM_meta_on_node="srv02" CRM_meta_on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="37">
-    <action_set>
-      <pseudo_event id="161" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="162" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="162" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="38">
+  <synapse id="37">
     <action_set>
-      <pseudo_event id="18" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="19" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="25" operation="stop" operation_key="Dummy02_stop_0"/>
+        <pseudo_event id="26" operation="stop" operation_key="Dummy02_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="46" operation="stop" operation_key="prmStonith1-1:1_stop_0"/>
+        <pseudo_event id="47" operation="stop" operation_key="prmStonith1-1:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="47" operation="stop" operation_key="prmStonith1-3:1_stop_0"/>
+        <pseudo_event id="48" operation="stop" operation_key="prmStonith1-3:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="100" operation="stop" operation_key="prmStonith3-1:1_stop_0" internal_operation_key="prmStonith3-1:0_stop_0"/>
+        <pseudo_event id="101" operation="stop" operation_key="prmStonith3-1:1_stop_0" internal_operation_key="prmStonith3-1:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="101" operation="stop" operation_key="prmStonith3-3:1_stop_0" internal_operation_key="prmStonith3-3:0_stop_0"/>
+        <pseudo_event id="102" operation="stop" operation_key="prmStonith3-3:1_stop_0" internal_operation_key="prmStonith3-3:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="139" operation="stop" operation_key="prmStonith4-1:1_stop_0"/>
+        <pseudo_event id="140" operation="stop" operation_key="prmStonith4-1:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="140" operation="stop" operation_key="prmStonith4-3:1_stop_0"/>
+        <pseudo_event id="141" operation="stop" operation_key="prmStonith4-3:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="161" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="162" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="38">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-srv02-reboot" on_node="srv02" on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182">
+        <attributes CRM_meta_on_node="srv02" CRM_meta_on_node_uuid="71085d5e-1c63-49e0-8c8c-400d610b4182" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="71085d5e-1c63-49e0-8c8c-400d610b4182"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/bug-lf-2508.scores b/pengine/test10/bug-lf-2508.scores
index 200d548..3c3ce16 100644
--- a/pengine/test10/bug-lf-2508.scores
+++ b/pengine/test10/bug-lf-2508.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   srv02: node is unclean
 Allocation scores:
 clone_color: clnStonith1 allocation score on srv01: -INFINITY
 clone_color: clnStonith1 allocation score on srv02: 0
diff --git a/pengine/test10/bug-lf-2508.summary b/pengine/test10/bug-lf-2508.summary
index 18080cb..ddaf1c3 100644
--- a/pengine/test10/bug-lf-2508.summary
+++ b/pengine/test10/bug-lf-2508.summary
@@ -34,9 +34,8 @@ Online: [ srv01 srv03 srv04 ]
      Started: [ srv01 srv03 ]
      Stopped: [ srv04 ]
 
-  notice: Fencing   srv02: node is unclean
 Transition Summary:
- * Fence (reboot) srv02
+ * Fence (reboot) srv02 'peer is no longer part of the cluster'
  * Start   Dummy01	(srv01)
  * Move    Dummy02	(Started srv02 -> srv04)
  * Stop    prmStonith1-1:1	(srv02)
@@ -51,15 +50,13 @@ Executing cluster transition:
  * Pseudo action:   Group01_start_0
  * Resource action: prmStonith3-1:1 monitor=3600000 on srv01
  * Fencing srv02 (reboot)
- * Pseudo action:   stonith_complete
- * Resource action: Dummy01         start on srv01
  * Pseudo action:   Group02_stop_0
  * Pseudo action:   Dummy02_stop_0
  * Pseudo action:   clnStonith1_stop_0
  * Pseudo action:   clnStonith3_stop_0
  * Pseudo action:   clnStonith4_stop_0
- * Pseudo action:   Group01_running_0
- * Resource action: Dummy01         monitor=10000 on srv01
+ * Pseudo action:   stonith_complete
+ * Resource action: Dummy01         start on srv01
  * Pseudo action:   Group02_stopped_0
  * Pseudo action:   Group02_start_0
  * Resource action: Dummy02         start on srv04
@@ -69,6 +66,8 @@ Executing cluster transition:
  * Pseudo action:   prmStonith3-3:1_stop_0
  * Pseudo action:   grpStonith4:1_stop_0
  * Pseudo action:   prmStonith4-3:1_stop_0
+ * Pseudo action:   Group01_running_0
+ * Resource action: Dummy01         monitor=10000 on srv01
  * Pseudo action:   Group02_running_0
  * Resource action: Dummy02         monitor=10000 on srv04
  * Pseudo action:   prmStonith1-1:1_stop_0
diff --git a/pengine/test10/bug-lf-2551.exp b/pengine/test10/bug-lf-2551.exp
index f5b8236..a14ec5e 100644
--- a/pengine/test10/bug-lf-2551.exp
+++ b/pengine/test10/bug-lf-2551.exp
@@ -1,20 +1,20 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="159" operation="start" operation_key="fencing-sbd_start_0" on_node="hex-0" on_node_uuid="hex-0">
+      <rsc_op id="160" operation="start" operation_key="fencing-sbd_start_0" on_node="hex-0" on_node_uuid="hex-0">
         <primitive id="fencing-sbd" class="stonith" type="external/sbd"/>
         <attributes CRM_meta_on_node="hex-0" CRM_meta_on_node_uuid="hex-0" CRM_meta_record_pending="false" CRM_meta_timeout="240000"  sbd_device="/dev/disk/by-id/dm-uuid-part1-mpath-3600508b400105b5a0001500000250000"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="158" operation="stop" operation_key="fencing-sbd_stop_0"/>
+        <pseudo_event id="159" operation="stop" operation_key="fencing-sbd_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <pseudo_event id="158" operation="stop" operation_key="fencing-sbd_stop_0">
+      <pseudo_event id="159" operation="stop" operation_key="fencing-sbd_stop_0">
         <attributes CRM_meta_record_pending="false" CRM_meta_timeout="240000"  sbd_device="/dev/disk/by-id/dm-uuid-part1-mpath-3600508b400105b5a0001500000250000"/>
       </pseudo_event>
     </action_set>
@@ -22,7 +22,7 @@
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="164" operation="monitor" operation_key="dummy1_monitor_300000" on_node="hex-8" on_node_uuid="hex-8">
+      <rsc_op id="165" operation="monitor" operation_key="dummy1_monitor_300000" on_node="hex-8" on_node_uuid="hex-8">
         <primitive id="dummy1" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="300000" CRM_meta_name="monitor" CRM_meta_on_node="hex-8" CRM_meta_on_node_uuid="hex-8" CRM_meta_op_target_rc="7" CRM_meta_record_pending="false" CRM_meta_role="Stopped" CRM_meta_timeout="10000" />
       </rsc_op>
@@ -31,7 +31,7 @@
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="163" operation="monitor" operation_key="dummy1_monitor_300000" on_node="hex-7" on_node_uuid="hex-7">
+      <rsc_op id="164" operation="monitor" operation_key="dummy1_monitor_300000" on_node="hex-7" on_node_uuid="hex-7">
         <primitive id="dummy1" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="300000" CRM_meta_name="monitor" CRM_meta_on_node="hex-7" CRM_meta_on_node_uuid="hex-7" CRM_meta_op_target_rc="7" CRM_meta_record_pending="false" CRM_meta_role="Stopped" CRM_meta_timeout="10000" />
       </rsc_op>
@@ -40,646 +40,645 @@
   </synapse>
   <synapse id="4">
     <action_set>
-      <rsc_op id="162" operation="monitor" operation_key="dummy1_monitor_30000" on_node="hex-0" on_node_uuid="hex-0">
+      <rsc_op id="163" operation="monitor" operation_key="dummy1_monitor_30000" on_node="hex-0" on_node_uuid="hex-0">
         <primitive id="dummy1" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_on_node="hex-0" CRM_meta_on_node_uuid="hex-0" CRM_meta_record_pending="false" CRM_meta_timeout="10000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="161" operation="start" operation_key="dummy1_start_0" on_node="hex-0" on_node_uuid="hex-0"/>
+        <rsc_op id="162" operation="start" operation_key="dummy1_start_0" on_node="hex-0" on_node_uuid="hex-0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <rsc_op id="161" operation="start" operation_key="dummy1_start_0" on_node="hex-0" on_node_uuid="hex-0">
+      <rsc_op id="162" operation="start" operation_key="dummy1_start_0" on_node="hex-0" on_node_uuid="hex-0">
         <primitive id="dummy1" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_on_node="hex-0" CRM_meta_on_node_uuid="hex-0" CRM_meta_record_pending="false" CRM_meta_timeout="240000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="160" operation="stop" operation_key="dummy1_stop_0"/>
+        <pseudo_event id="161" operation="stop" operation_key="dummy1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="244" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="245" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="160" operation="stop" operation_key="dummy1_stop_0">
+      <pseudo_event id="161" operation="stop" operation_key="dummy1_stop_0">
         <attributes CRM_meta_record_pending="false" CRM_meta_timeout="240000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <pseudo_event id="223" operation="stopped" operation_key="base-group:3_stopped_0">
+      <pseudo_event id="224" operation="stopped" operation_key="base-group:3_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_record_pending="false" CRM_meta_timeout="240000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="214" operation="stop" operation_key="dlm:3_stop_0"/>
+        <pseudo_event id="215" operation="stop" operation_key="dlm:3_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="215" operation="stop" operation_key="o2cb:3_stop_0"/>
+        <pseudo_event id="216" operation="stop" operation_key="o2cb:3_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="216" operation="stop" operation_key="clvm:3_stop_0"/>
+        <pseudo_event id="217" operation="stop" operation_key="clvm:3_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="217" operation="stop" operation_key="cmirrord:3_stop_0"/>
+        <pseudo_event id="218" operation="stop" operation_key="cmirrord:3_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="218" operation="stop" operation_key="vg1:3_stop_0"/>
+        <pseudo_event id="219" operation="stop" operation_key="vg1:3_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="219" operation="stop" operation_key="ocfs2-1:3_stop_0"/>
+        <pseudo_event id="220" operation="stop" operation_key="ocfs2-1:3_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="222" operation="stop" operation_key="base-group:3_stop_0"/>
+        <pseudo_event id="223" operation="stop" operation_key="base-group:3_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <pseudo_event id="222" operation="stop" operation_key="base-group:3_stop_0">
+      <pseudo_event id="223" operation="stop" operation_key="base-group:3_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_record_pending="false" CRM_meta_timeout="240000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="226" operation="stop" operation_key="base-clone_stop_0"/>
+        <pseudo_event id="227" operation="stop" operation_key="base-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <pseudo_event id="214" operation="stop" operation_key="dlm:3_stop_0">
+      <pseudo_event id="215" operation="stop" operation_key="dlm:3_stop_0">
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_record_pending="false" CRM_meta_timeout="240000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="215" operation="stop" operation_key="o2cb:3_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
       <trigger>
-        <pseudo_event id="222" operation="stop" operation_key="base-group:3_stop_0"/>
+        <pseudo_event id="216" operation="stop" operation_key="o2cb:3_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <pseudo_event id="223" operation="stop" operation_key="base-group:3_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <pseudo_event id="215" operation="stop" operation_key="o2cb:3_stop_0">
+      <pseudo_event id="216" operation="stop" operation_key="o2cb:3_stop_0">
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_record_pending="false" CRM_meta_timeout="240000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="216" operation="stop" operation_key="clvm:3_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
       <trigger>
-        <pseudo_event id="222" operation="stop" operation_key="base-group:3_stop_0"/>
+        <pseudo_event id="217" operation="stop" operation_key="clvm:3_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <pseudo_event id="223" operation="stop" operation_key="base-group:3_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <pseudo_event id="216" operation="stop" operation_key="clvm:3_stop_0">
+      <pseudo_event id="217" operation="stop" operation_key="clvm:3_stop_0">
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_record_pending="false" CRM_meta_timeout="240000"  daemon_timeout="30"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="217" operation="stop" operation_key="cmirrord:3_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
       <trigger>
-        <pseudo_event id="222" operation="stop" operation_key="base-group:3_stop_0"/>
+        <pseudo_event id="218" operation="stop" operation_key="cmirrord:3_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <pseudo_event id="223" operation="stop" operation_key="base-group:3_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <pseudo_event id="217" operation="stop" operation_key="cmirrord:3_stop_0">
+      <pseudo_event id="218" operation="stop" operation_key="cmirrord:3_stop_0">
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_record_pending="false" CRM_meta_timeout="240000"  daemon_timeout="60"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="218" operation="stop" operation_key="vg1:3_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
       <trigger>
-        <pseudo_event id="222" operation="stop" operation_key="base-group:3_stop_0"/>
+        <pseudo_event id="219" operation="stop" operation_key="vg1:3_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <pseudo_event id="223" operation="stop" operation_key="base-group:3_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13">
     <action_set>
-      <pseudo_event id="218" operation="stop" operation_key="vg1:3_stop_0">
+      <pseudo_event id="219" operation="stop" operation_key="vg1:3_stop_0">
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_record_pending="false" CRM_meta_timeout="240000"  volgrpname="cluster-vg"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="219" operation="stop" operation_key="ocfs2-1:3_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
       <trigger>
-        <pseudo_event id="222" operation="stop" operation_key="base-group:3_stop_0"/>
+        <pseudo_event id="220" operation="stop" operation_key="ocfs2-1:3_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <pseudo_event id="223" operation="stop" operation_key="base-group:3_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <pseudo_event id="219" operation="stop" operation_key="ocfs2-1:3_stop_0">
+      <pseudo_event id="220" operation="stop" operation_key="ocfs2-1:3_stop_0">
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_record_pending="false" CRM_meta_timeout="240000"  device="/dev/cluster-vg/fs1" directory="/var/lib/xen/images" fstype="ocfs2" options="acl"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="222" operation="stop" operation_key="base-group:3_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <pseudo_event id="223" operation="stop" operation_key="base-group:3_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15" priority="1000000">
     <action_set>
-      <pseudo_event id="227" operation="stopped" operation_key="base-clone_stopped_0">
+      <pseudo_event id="228" operation="stopped" operation_key="base-clone_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_record_pending="false" CRM_meta_timeout="240000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="223" operation="stopped" operation_key="base-group:3_stopped_0"/>
+        <pseudo_event id="224" operation="stopped" operation_key="base-group:3_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="226" operation="stop" operation_key="base-clone_stop_0"/>
+        <pseudo_event id="227" operation="stop" operation_key="base-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="16">
     <action_set>
-      <pseudo_event id="226" operation="stop" operation_key="base-clone_stop_0">
+      <pseudo_event id="227" operation="stop" operation_key="base-clone_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_record_pending="false" CRM_meta_timeout="240000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="228" operation="stop" operation_key="vm-03_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
       <trigger>
-        <pseudo_event id="229" operation="stop" operation_key="vm-06_stop_0"/>
+        <pseudo_event id="229" operation="stop" operation_key="vm-03_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="230" operation="stop" operation_key="vm-09_stop_0"/>
+        <pseudo_event id="230" operation="stop" operation_key="vm-06_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="231" operation="stop" operation_key="vm-13_stop_0"/>
+        <pseudo_event id="231" operation="stop" operation_key="vm-09_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="232" operation="stop" operation_key="vm-17_stop_0"/>
+        <pseudo_event id="232" operation="stop" operation_key="vm-13_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="233" operation="stop" operation_key="vm-21_stop_0"/>
+        <pseudo_event id="233" operation="stop" operation_key="vm-17_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="234" operation="stop" operation_key="vm-25_stop_0"/>
+        <pseudo_event id="234" operation="stop" operation_key="vm-21_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="235" operation="stop" operation_key="vm-29_stop_0"/>
+        <pseudo_event id="235" operation="stop" operation_key="vm-25_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="236" operation="stop" operation_key="vm-33_stop_0"/>
+        <pseudo_event id="236" operation="stop" operation_key="vm-29_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="237" operation="stop" operation_key="vm-37_stop_0"/>
+        <pseudo_event id="237" operation="stop" operation_key="vm-33_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="238" operation="stop" operation_key="vm-41_stop_0"/>
+        <pseudo_event id="238" operation="stop" operation_key="vm-37_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="239" operation="stop" operation_key="vm-45_stop_0"/>
+        <pseudo_event id="239" operation="stop" operation_key="vm-41_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="240" operation="stop" operation_key="vm-49_stop_0"/>
+        <pseudo_event id="240" operation="stop" operation_key="vm-45_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="241" operation="stop" operation_key="vm-53_stop_0"/>
+        <pseudo_event id="241" operation="stop" operation_key="vm-49_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="242" operation="stop" operation_key="vm-57_stop_0"/>
+        <pseudo_event id="242" operation="stop" operation_key="vm-53_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="243" operation="stop" operation_key="vm-61_stop_0"/>
+        <pseudo_event id="243" operation="stop" operation_key="vm-57_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <pseudo_event id="244" operation="stop" operation_key="vm-61_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="17">
     <action_set>
-      <pseudo_event id="228" operation="stop" operation_key="vm-03_stop_0">
+      <pseudo_event id="229" operation="stop" operation_key="vm-03_stop_0">
         <attributes CRM_meta_record_pending="false" CRM_meta_timeout="240000"  name="vm-03" xmfile="/var/lib/xen/images/xm.vm-03"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="18">
     <action_set>
-      <pseudo_event id="229" operation="stop" operation_key="vm-06_stop_0">
+      <pseudo_event id="230" operation="stop" operation_key="vm-06_stop_0">
         <attributes CRM_meta_record_pending="false" CRM_meta_timeout="240000"  name="vm-06" xmfile="/var/lib/xen/images/xm.vm-06"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="19">
     <action_set>
-      <pseudo_event id="230" operation="stop" operation_key="vm-09_stop_0">
+      <pseudo_event id="231" operation="stop" operation_key="vm-09_stop_0">
         <attributes CRM_meta_record_pending="false" CRM_meta_timeout="240000"  name="vm-09" xmfile="/var/lib/xen/images/xm.vm-09"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="20">
     <action_set>
-      <pseudo_event id="231" operation="stop" operation_key="vm-13_stop_0">
+      <pseudo_event id="232" operation="stop" operation_key="vm-13_stop_0">
         <attributes CRM_meta_record_pending="false" CRM_meta_timeout="240000"  name="vm-13" xmfile="/var/lib/xen/images/xm.vm-13"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21">
     <action_set>
-      <pseudo_event id="232" operation="stop" operation_key="vm-17_stop_0">
+      <pseudo_event id="233" operation="stop" operation_key="vm-17_stop_0">
         <attributes CRM_meta_record_pending="false" CRM_meta_timeout="240000"  name="vm-17" xmfile="/var/lib/xen/images/xm.vm-17"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="22">
     <action_set>
-      <pseudo_event id="233" operation="stop" operation_key="vm-21_stop_0">
+      <pseudo_event id="234" operation="stop" operation_key="vm-21_stop_0">
         <attributes CRM_meta_record_pending="false" CRM_meta_timeout="240000"  name="vm-21" xmfile="/var/lib/xen/images/xm.vm-21"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="23">
     <action_set>
-      <pseudo_event id="234" operation="stop" operation_key="vm-25_stop_0">
+      <pseudo_event id="235" operation="stop" operation_key="vm-25_stop_0">
         <attributes CRM_meta_record_pending="false" CRM_meta_timeout="240000"  name="vm-25" xmfile="/var/lib/xen/images/xm.vm-25"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="24">
     <action_set>
-      <pseudo_event id="235" operation="stop" operation_key="vm-29_stop_0">
+      <pseudo_event id="236" operation="stop" operation_key="vm-29_stop_0">
         <attributes CRM_meta_record_pending="false" CRM_meta_timeout="240000"  name="vm-29" xmfile="/var/lib/xen/images/xm.vm-29"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="25">
     <action_set>
-      <pseudo_event id="236" operation="stop" operation_key="vm-33_stop_0">
+      <pseudo_event id="237" operation="stop" operation_key="vm-33_stop_0">
         <attributes CRM_meta_record_pending="false" CRM_meta_timeout="240000"  name="vm-33" xmfile="/var/lib/xen/images/xm.vm-33"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="26">
     <action_set>
-      <pseudo_event id="237" operation="stop" operation_key="vm-37_stop_0">
+      <pseudo_event id="238" operation="stop" operation_key="vm-37_stop_0">
         <attributes CRM_meta_record_pending="false" CRM_meta_timeout="240000"  name="vm-37" xmfile="/var/lib/xen/images/xm.vm-37"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="27">
     <action_set>
-      <pseudo_event id="238" operation="stop" operation_key="vm-41_stop_0">
+      <pseudo_event id="239" operation="stop" operation_key="vm-41_stop_0">
         <attributes CRM_meta_record_pending="false" CRM_meta_timeout="240000"  name="vm-41" xmfile="/var/lib/xen/images/xm.vm-41"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="28">
     <action_set>
-      <pseudo_event id="239" operation="stop" operation_key="vm-45_stop_0">
+      <pseudo_event id="240" operation="stop" operation_key="vm-45_stop_0">
         <attributes CRM_meta_record_pending="false" CRM_meta_timeout="240000"  name="vm-45" xmfile="/var/lib/xen/images/xm.vm-45"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="29">
     <action_set>
-      <pseudo_event id="240" operation="stop" operation_key="vm-49_stop_0">
+      <pseudo_event id="241" operation="stop" operation_key="vm-49_stop_0">
         <attributes CRM_meta_record_pending="false" CRM_meta_timeout="240000"  name="vm-49" xmfile="/var/lib/xen/images/xm.vm-49"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="30">
     <action_set>
-      <pseudo_event id="241" operation="stop" operation_key="vm-53_stop_0">
+      <pseudo_event id="242" operation="stop" operation_key="vm-53_stop_0">
         <attributes CRM_meta_record_pending="false" CRM_meta_timeout="240000"  name="vm-53" xmfile="/var/lib/xen/images/xm.vm-53"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="31">
     <action_set>
-      <pseudo_event id="242" operation="stop" operation_key="vm-57_stop_0">
+      <pseudo_event id="243" operation="stop" operation_key="vm-57_stop_0">
         <attributes CRM_meta_record_pending="false" CRM_meta_timeout="240000"  name="vm-57" xmfile="/var/lib/xen/images/xm.vm-57"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="32">
     <action_set>
-      <pseudo_event id="243" operation="stop" operation_key="vm-61_stop_0">
+      <pseudo_event id="244" operation="stop" operation_key="vm-61_stop_0">
         <attributes CRM_meta_record_pending="false" CRM_meta_timeout="240000"  name="vm-61" xmfile="/var/lib/xen/images/xm.vm-61"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="33">
     <action_set>
-      <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9">
-        <attributes CRM_meta_on_node="hex-9" CRM_meta_on_node_uuid="hex-9" CRM_meta_probe_complete="true" CRM_meta_standby="off" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="hex-9"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="34">
-    <action_set>
-      <pseudo_event id="244" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="245" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="245" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="35">
+  <synapse id="34">
     <action_set>
-      <pseudo_event id="65" operation="load_stopped_hex-9" operation_key="load_stopped_hex-9">
+      <pseudo_event id="66" operation="load_stopped_hex-9" operation_key="load_stopped_hex-9">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="228" operation="stop" operation_key="vm-03_stop_0"/>
+        <pseudo_event id="229" operation="stop" operation_key="vm-03_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="229" operation="stop" operation_key="vm-06_stop_0"/>
+        <pseudo_event id="230" operation="stop" operation_key="vm-06_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="230" operation="stop" operation_key="vm-09_stop_0"/>
+        <pseudo_event id="231" operation="stop" operation_key="vm-09_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="231" operation="stop" operation_key="vm-13_stop_0"/>
+        <pseudo_event id="232" operation="stop" operation_key="vm-13_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="232" operation="stop" operation_key="vm-17_stop_0"/>
+        <pseudo_event id="233" operation="stop" operation_key="vm-17_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="233" operation="stop" operation_key="vm-21_stop_0"/>
+        <pseudo_event id="234" operation="stop" operation_key="vm-21_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="234" operation="stop" operation_key="vm-25_stop_0"/>
+        <pseudo_event id="235" operation="stop" operation_key="vm-25_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="235" operation="stop" operation_key="vm-29_stop_0"/>
+        <pseudo_event id="236" operation="stop" operation_key="vm-29_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="236" operation="stop" operation_key="vm-33_stop_0"/>
+        <pseudo_event id="237" operation="stop" operation_key="vm-33_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="237" operation="stop" operation_key="vm-37_stop_0"/>
+        <pseudo_event id="238" operation="stop" operation_key="vm-37_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="238" operation="stop" operation_key="vm-41_stop_0"/>
+        <pseudo_event id="239" operation="stop" operation_key="vm-41_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="239" operation="stop" operation_key="vm-45_stop_0"/>
+        <pseudo_event id="240" operation="stop" operation_key="vm-45_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="240" operation="stop" operation_key="vm-49_stop_0"/>
+        <pseudo_event id="241" operation="stop" operation_key="vm-49_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="241" operation="stop" operation_key="vm-53_stop_0"/>
+        <pseudo_event id="242" operation="stop" operation_key="vm-53_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="242" operation="stop" operation_key="vm-57_stop_0"/>
+        <pseudo_event id="243" operation="stop" operation_key="vm-57_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="243" operation="stop" operation_key="vm-61_stop_0"/>
+        <pseudo_event id="244" operation="stop" operation_key="vm-61_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="36">
+  <synapse id="35">
     <action_set>
-      <pseudo_event id="64" operation="load_stopped_hex-8" operation_key="load_stopped_hex-8">
+      <pseudo_event id="65" operation="load_stopped_hex-8" operation_key="load_stopped_hex-8">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="37">
+  <synapse id="36">
     <action_set>
-      <pseudo_event id="63" operation="load_stopped_hex-7" operation_key="load_stopped_hex-7">
+      <pseudo_event id="64" operation="load_stopped_hex-7" operation_key="load_stopped_hex-7">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="38">
+  <synapse id="37">
     <action_set>
-      <pseudo_event id="62" operation="load_stopped_hex-0" operation_key="load_stopped_hex-0">
+      <pseudo_event id="63" operation="load_stopped_hex-0" operation_key="load_stopped_hex-0">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="39">
+  <synapse id="38">
     <action_set>
-      <pseudo_event id="61" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="62" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="158" operation="stop" operation_key="fencing-sbd_stop_0"/>
+        <pseudo_event id="159" operation="stop" operation_key="fencing-sbd_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="160" operation="stop" operation_key="dummy1_stop_0"/>
+        <pseudo_event id="161" operation="stop" operation_key="dummy1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="214" operation="stop" operation_key="dlm:3_stop_0"/>
+        <pseudo_event id="215" operation="stop" operation_key="dlm:3_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="215" operation="stop" operation_key="o2cb:3_stop_0"/>
+        <pseudo_event id="216" operation="stop" operation_key="o2cb:3_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="216" operation="stop" operation_key="clvm:3_stop_0"/>
+        <pseudo_event id="217" operation="stop" operation_key="clvm:3_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="217" operation="stop" operation_key="cmirrord:3_stop_0"/>
+        <pseudo_event id="218" operation="stop" operation_key="cmirrord:3_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="218" operation="stop" operation_key="vg1:3_stop_0"/>
+        <pseudo_event id="219" operation="stop" operation_key="vg1:3_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="219" operation="stop" operation_key="ocfs2-1:3_stop_0"/>
+        <pseudo_event id="220" operation="stop" operation_key="ocfs2-1:3_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="228" operation="stop" operation_key="vm-03_stop_0"/>
+        <pseudo_event id="229" operation="stop" operation_key="vm-03_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="229" operation="stop" operation_key="vm-06_stop_0"/>
+        <pseudo_event id="230" operation="stop" operation_key="vm-06_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="230" operation="stop" operation_key="vm-09_stop_0"/>
+        <pseudo_event id="231" operation="stop" operation_key="vm-09_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="231" operation="stop" operation_key="vm-13_stop_0"/>
+        <pseudo_event id="232" operation="stop" operation_key="vm-13_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="232" operation="stop" operation_key="vm-17_stop_0"/>
+        <pseudo_event id="233" operation="stop" operation_key="vm-17_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="233" operation="stop" operation_key="vm-21_stop_0"/>
+        <pseudo_event id="234" operation="stop" operation_key="vm-21_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="234" operation="stop" operation_key="vm-25_stop_0"/>
+        <pseudo_event id="235" operation="stop" operation_key="vm-25_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="235" operation="stop" operation_key="vm-29_stop_0"/>
+        <pseudo_event id="236" operation="stop" operation_key="vm-29_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="236" operation="stop" operation_key="vm-33_stop_0"/>
+        <pseudo_event id="237" operation="stop" operation_key="vm-33_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="237" operation="stop" operation_key="vm-37_stop_0"/>
+        <pseudo_event id="238" operation="stop" operation_key="vm-37_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="238" operation="stop" operation_key="vm-41_stop_0"/>
+        <pseudo_event id="239" operation="stop" operation_key="vm-41_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="239" operation="stop" operation_key="vm-45_stop_0"/>
+        <pseudo_event id="240" operation="stop" operation_key="vm-45_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="240" operation="stop" operation_key="vm-49_stop_0"/>
+        <pseudo_event id="241" operation="stop" operation_key="vm-49_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="241" operation="stop" operation_key="vm-53_stop_0"/>
+        <pseudo_event id="242" operation="stop" operation_key="vm-53_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="242" operation="stop" operation_key="vm-57_stop_0"/>
+        <pseudo_event id="243" operation="stop" operation_key="vm-57_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="243" operation="stop" operation_key="vm-61_stop_0"/>
+        <pseudo_event id="244" operation="stop" operation_key="vm-61_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="244" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="245" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="39">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-hex-9-reboot" on_node="hex-9" on_node_uuid="hex-9">
+        <attributes CRM_meta_on_node="hex-9" CRM_meta_on_node_uuid="hex-9" CRM_meta_probe_complete="true" CRM_meta_standby="off" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="hex-9"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/bug-lf-2551.scores b/pengine/test10/bug-lf-2551.scores
index 64cbca0..2b0aa12 100644
--- a/pengine/test10/bug-lf-2551.scores
+++ b/pengine/test10/bug-lf-2551.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   hex-9: node is unclean
 Allocation scores:
 clone_color: base-clone allocation score on hex-0: 14
 clone_color: base-clone allocation score on hex-7: 16
diff --git a/pengine/test10/bug-lf-2551.summary b/pengine/test10/bug-lf-2551.summary
index 4fa553c..1b57ea7 100644
--- a/pengine/test10/bug-lf-2551.summary
+++ b/pengine/test10/bug-lf-2551.summary
@@ -80,9 +80,8 @@ Online: [ hex-0 hex-7 hex-8 ]
  vm-63	(ocf::heartbeat:Xen):	Stopped 
  vm-64	(ocf::heartbeat:Xen):	Stopped 
 
-  notice: Fencing   hex-9: node is unclean
 Transition Summary:
- * Fence (reboot) hex-9
+ * Fence (reboot) hex-9 'peer is no longer part of the cluster'
  * Move    fencing-sbd	(Started hex-9 -> hex-0)
  * Move    dummy1	(Started hex-9 -> hex-0)
  * Stop    dlm:3	(hex-9)
@@ -112,11 +111,10 @@ Executing cluster transition:
  * Pseudo action:   fencing-sbd_stop_0
  * Resource action: dummy1          monitor=300000 on hex-8
  * Resource action: dummy1          monitor=300000 on hex-7
- * Fencing hex-9 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   load_stopped_hex-8
  * Pseudo action:   load_stopped_hex-7
  * Pseudo action:   load_stopped_hex-0
+ * Fencing hex-9 (reboot)
  * Resource action: fencing-sbd     start on hex-0
  * Pseudo action:   dummy1_stop_0
  * Pseudo action:   vm-03_stop_0
@@ -135,6 +133,7 @@ Executing cluster transition:
  * Pseudo action:   vm-53_stop_0
  * Pseudo action:   vm-57_stop_0
  * Pseudo action:   vm-61_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   load_stopped_hex-9
  * Resource action: dummy1          start on hex-0
  * Pseudo action:   base-clone_stop_0
diff --git a/pengine/test10/bug-lf-2606.exp b/pengine/test10/bug-lf-2606.exp
index 55f138b..b14069e 100644
--- a/pengine/test10/bug-lf-2606.exp
+++ b/pengine/test10/bug-lf-2606.exp
@@ -1,108 +1,108 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <pseudo_event id="5" operation="stop" operation_key="rsc1_stop_0">
+      <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="22" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="8" operation="monitor" operation_key="rsc2_monitor_10000" on_node="node1" on_node_uuid="node1">
+      <rsc_op id="9" operation="monitor" operation_key="rsc2_monitor_10000" on_node="node1" on_node_uuid="node1">
         <primitive id="rsc2" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="node1" CRM_meta_on_node_uuid="node1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="7" operation="start" operation_key="rsc2_start_0" on_node="node1" on_node_uuid="node1"/>
+        <rsc_op id="8" operation="start" operation_key="rsc2_start_0" on_node="node1" on_node_uuid="node1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="7" operation="start" operation_key="rsc2_start_0" on_node="node1" on_node_uuid="node1">
+      <rsc_op id="8" operation="start" operation_key="rsc2_start_0" on_node="node1" on_node_uuid="node1">
         <primitive id="rsc2" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="node1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc2_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="21" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="22" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="6" operation="stop" operation_key="rsc2_stop_0">
+      <pseudo_event id="7" operation="stop" operation_key="rsc2_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="22" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="12" operation="stop" operation_key="rsc3:1_stop_0">
+      <pseudo_event id="13" operation="stop" operation_key="rsc3:1_stop_0">
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="11" operation="demote" operation_key="rsc3:1_demote_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="15" operation="stop" operation_key="ms3_stop_0"/>
+        <pseudo_event id="12" operation="demote" operation_key="rsc3:1_demote_0"/>
       </trigger>
       <trigger>
-        <crm_event id="22" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <pseudo_event id="16" operation="stop" operation_key="ms3_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <pseudo_event id="11" operation="demote" operation_key="rsc3:1_demote_0">
+      <pseudo_event id="12" operation="demote" operation_key="rsc3:1_demote_0">
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="19" operation="demote" operation_key="ms3_demote_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
       <trigger>
-        <crm_event id="22" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <pseudo_event id="20" operation="demote" operation_key="ms3_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6" priority="1000000">
     <action_set>
-      <pseudo_event id="20" operation="demoted" operation_key="ms3_demoted_0">
+      <pseudo_event id="21" operation="demoted" operation_key="ms3_demoted_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="11" operation="demote" operation_key="rsc3:1_demote_0"/>
+        <pseudo_event id="12" operation="demote" operation_key="rsc3:1_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="19" operation="demote" operation_key="ms3_demote_0"/>
+        <pseudo_event id="20" operation="demote" operation_key="ms3_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <pseudo_event id="19" operation="demote" operation_key="ms3_demote_0">
+      <pseudo_event id="20" operation="demote" operation_key="ms3_demote_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -110,77 +110,76 @@
   </synapse>
   <synapse id="8" priority="1000000">
     <action_set>
-      <pseudo_event id="16" operation="stopped" operation_key="ms3_stopped_0">
+      <pseudo_event id="17" operation="stopped" operation_key="ms3_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="12" operation="stop" operation_key="rsc3:1_stop_0"/>
+        <pseudo_event id="13" operation="stop" operation_key="rsc3:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="15" operation="stop" operation_key="ms3_stop_0"/>
+        <pseudo_event id="16" operation="stop" operation_key="ms3_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <pseudo_event id="15" operation="stop" operation_key="ms3_stop_0">
+      <pseudo_event id="16" operation="stop" operation_key="ms3_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="20" operation="demoted" operation_key="ms3_demoted_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
       <trigger>
-        <crm_event id="22" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <pseudo_event id="21" operation="demoted" operation_key="ms3_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <crm_event id="22" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2">
-        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="node2" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="node2"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="11">
-    <action_set>
-      <pseudo_event id="21" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="22" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="22" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12">
+  <synapse id="11">
     <action_set>
-      <pseudo_event id="2" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="3" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="5" operation="stop" operation_key="rsc1_stop_0"/>
+        <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc2_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="12" operation="stop" operation_key="rsc3:1_stop_0"/>
+        <pseudo_event id="13" operation="stop" operation_key="rsc3:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="21" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="22" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="12">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2">
+        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="node2" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="node2"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/bug-lf-2606.scores b/pengine/test10/bug-lf-2606.scores
index b1e6a02..6a9d522 100644
--- a/pengine/test10/bug-lf-2606.scores
+++ b/pengine/test10/bug-lf-2606.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   node2: node is unclean
 Allocation scores:
 clone_color: ms3 allocation score on node1: 0
 clone_color: ms3 allocation score on node2: 0
diff --git a/pengine/test10/bug-lf-2606.summary b/pengine/test10/bug-lf-2606.summary
index e6cfa89..7e889c9 100644
--- a/pengine/test10/bug-lf-2606.summary
+++ b/pengine/test10/bug-lf-2606.summary
@@ -11,9 +11,8 @@ Online: [ node1 ]
      Masters: [ node2 ]
      Slaves: [ node1 ]
 
-  notice: Fencing   node2: node is unclean
 Transition Summary:
- * Fence (reboot) node2
+ * Fence (reboot) node2 'rsc1 failed there'
  * Stop    rsc1	(node2)
  * Move    rsc2	(Started node2 -> node1)
  * Demote  rsc3:1	(Master -> Stopped node2)
@@ -21,12 +20,12 @@ Transition Summary:
 Executing cluster transition:
  * Pseudo action:   ms3_demote_0
  * Fencing node2 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   rsc1_stop_0
  * Pseudo action:   rsc2_stop_0
  * Pseudo action:   rsc3:1_demote_0
  * Pseudo action:   ms3_demoted_0
  * Pseudo action:   ms3_stop_0
+ * Pseudo action:   stonith_complete
  * Resource action: rsc2            start on node1
  * Pseudo action:   rsc3:1_stop_0
  * Pseudo action:   ms3_stopped_0
diff --git a/pengine/test10/bug-rh-1097457.scores b/pengine/test10/bug-rh-1097457.scores
index 2fe2859..7729421 100644
--- a/pengine/test10/bug-rh-1097457.scores
+++ b/pengine/test10/bug-rh-1097457.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   lamaVM2: guest is unclean
 Allocation scores:
 clone_color: FAKE6-clone allocation score on lama2: -INFINITY
 clone_color: FAKE6-clone allocation score on lama3: -INFINITY
diff --git a/pengine/test10/bug-rh-1097457.summary b/pengine/test10/bug-rh-1097457.summary
index 19aa39d..29dd018 100644
--- a/pengine/test10/bug-rh-1097457.summary
+++ b/pengine/test10/bug-rh-1097457.summary
@@ -31,9 +31,8 @@ Containers: [ lamaVM1:VM1 lamaVM2:VM2 lamaVM3:VM3 ]
  Clone Set: FAKE6-clone [FAKE6]
      Started: [ lamaVM1 lamaVM2 lamaVM3 ]
 
-  notice: Fencing   lamaVM2: guest is unclean
 Transition Summary:
- * Fence (reboot) lamaVM2 (resource: VM2)
+ * Fence (reboot) lamaVM2 (resource: VM2) 'guest is unclean'
  * Recover VM2	(Started lama3)
  * Recover FSlun3	(Started lamaVM2 -> lama2)
  * Restart FAKE4	(Started lamaVM2)
diff --git a/pengine/test10/concurrent-fencing.exp b/pengine/test10/concurrent-fencing.exp
index 354111a..c916c1b 100644
--- a/pengine/test10/concurrent-fencing.exp
+++ b/pengine/test10/concurrent-fencing.exp
@@ -1,39 +1,40 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <crm_event id="5" operation="stonith" operation_key="stonith-node3-reboot" on_node="node3" on_node_uuid="uuid3">
-        <attributes CRM_meta_on_node="node3" CRM_meta_on_node_uuid="uuid3" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="uuid3"/>
-        </downed>
-      </crm_event>
+      <pseudo_event id="5" operation="stonith_complete" operation_key="stonith_complete">
+        <attributes />
+      </pseudo_event>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
+      </trigger>
+      <trigger>
+        <crm_event id="2" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="uuid2"/>
+      </trigger>
+      <trigger>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node3-reboot" on_node="node3" on_node_uuid="uuid3"/>
+      </trigger>
+    </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <crm_event id="4" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="uuid2">
-        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_no_wait="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="uuid2"/>
-        </downed>
-      </crm_event>
+      <pseudo_event id="4" operation="all_stopped" operation_key="all_stopped">
+        <attributes />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
-      </trigger>
-      <trigger>
-        <crm_event id="5" operation="stonith" operation_key="stonith-node3-reboot" on_node="node3" on_node_uuid="uuid3"/>
+        <pseudo_event id="5" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1">
-        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="uuid1" CRM_meta_stonith_action="reboot" />
+      <crm_event id="3" operation="stonith" operation_key="stonith-node3-reboot" on_node="node3" on_node_uuid="uuid3">
+        <attributes CRM_meta_on_node="node3" CRM_meta_on_node_uuid="uuid3" CRM_meta_stonith_action="reboot" />
         <downed>
-          <node id="uuid1"/>
+          <node id="uuid3"/>
         </downed>
       </crm_event>
     </action_set>
@@ -41,32 +42,31 @@
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="2" operation="stonith_complete" operation_key="stonith_complete">
-        <attributes />
-      </pseudo_event>
+      <crm_event id="2" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="uuid2">
+        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_no_wait="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="uuid2"/>
+        </downed>
+      </crm_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
-      </trigger>
-      <trigger>
-        <crm_event id="4" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="uuid2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
       </trigger>
       <trigger>
-        <crm_event id="5" operation="stonith" operation_key="stonith-node3-reboot" on_node="node3" on_node_uuid="uuid3"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node3-reboot" on_node="node3" on_node_uuid="uuid3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="1" operation="all_stopped" operation_key="all_stopped">
-        <attributes />
-      </pseudo_event>
+      <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1">
+        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="uuid1" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="uuid1"/>
+        </downed>
+      </crm_event>
     </action_set>
-    <inputs>
-      <trigger>
-        <pseudo_event id="2" operation="stonith_complete" operation_key="stonith_complete"/>
-      </trigger>
-    </inputs>
+    <inputs/>
   </synapse>
 </transition_graph>
diff --git a/pengine/test10/concurrent-fencing.scores b/pengine/test10/concurrent-fencing.scores
index 1be723e..0322231 100644
--- a/pengine/test10/concurrent-fencing.scores
+++ b/pengine/test10/concurrent-fencing.scores
@@ -1,6 +1,3 @@
-  notice: Fencing   node1: node is unclean
-  notice: Fencing   node2: node is unclean
-  notice: Fencing   node3: node is unclean
 Allocation scores:
 native_color: lsb_dummy allocation score on node1: 0
 native_color: lsb_dummy allocation score on node2: 0
diff --git a/pengine/test10/concurrent-fencing.summary b/pengine/test10/concurrent-fencing.summary
index 3f54c2c..46d3323 100644
--- a/pengine/test10/concurrent-fencing.summary
+++ b/pengine/test10/concurrent-fencing.summary
@@ -7,13 +7,10 @@ Node node3 (uuid3): UNCLEAN (offline)
  stonith-1	(stonith:dummy):	Stopped
  lsb_dummy	(lsb:/usr/lib/heartbeat/cts/LSBDummy):	Stopped
 
-  notice: Fencing   node1: node is unclean
-  notice: Fencing   node2: node is unclean
-  notice: Fencing   node3: node is unclean
 Transition Summary:
- * Fence (reboot) node3
- * Fence (reboot) node2
- * Fence (reboot) node1
+ * Fence (reboot) node3 'peer is no longer part of the cluster'
+ * Fence (reboot) node2 'peer is no longer part of the cluster'
+ * Fence (reboot) node1 'peer is no longer part of the cluster'
 
 Executing cluster transition:
  * Fencing node3 (reboot)
diff --git a/pengine/test10/guest-node-host-dies.exp b/pengine/test10/guest-node-host-dies.exp
index 73a0264..235813d 100644
--- a/pengine/test10/guest-node-host-dies.exp
+++ b/pengine/test10/guest-node-host-dies.exp
@@ -1,7 +1,7 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="10" operation="stop" operation_key="Fencing_stop_0" on_node="rhel7-4" on_node_uuid="5">
+      <rsc_op id="11" operation="stop" operation_key="Fencing_stop_0" on_node="rhel7-4" on_node_uuid="5">
         <primitive id="Fencing" class="stonith" type="fence_xvm"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="rhel7-4" CRM_meta_on_node_uuid="5" CRM_meta_timeout="60000"  delay="0" multicast_address="239.255.100.100" pcmk_arg_map="domain:uname" pcmk_host_list="rhel7-1 rhel7-2 rhel7-3 rhel7-4 rhel7-5"/>
       </rsc_op>
@@ -10,296 +10,296 @@
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="3" operation="start" operation_key="Fencing_start_0" on_node="rhel7-4" on_node_uuid="5">
+      <rsc_op id="4" operation="start" operation_key="Fencing_start_0" on_node="rhel7-4" on_node_uuid="5">
         <primitive id="Fencing" class="stonith" type="fence_xvm"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="rhel7-4" CRM_meta_on_node_uuid="5" CRM_meta_timeout="60000"  delay="0" multicast_address="239.255.100.100" pcmk_arg_map="domain:uname" pcmk_host_list="rhel7-1 rhel7-2 rhel7-3 rhel7-4 rhel7-5"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="2" operation="all_stopped" operation_key="all_stopped"/>
+        <pseudo_event id="3" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <rsc_op id="10" operation="stop" operation_key="Fencing_stop_0" on_node="rhel7-4" on_node_uuid="5"/>
+        <rsc_op id="11" operation="stop" operation_key="Fencing_stop_0" on_node="rhel7-4" on_node_uuid="5"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="1" operation="monitor" operation_key="Fencing_monitor_120000" on_node="rhel7-4" on_node_uuid="5">
+      <rsc_op id="2" operation="monitor" operation_key="Fencing_monitor_120000" on_node="rhel7-4" on_node_uuid="5">
         <primitive id="Fencing" class="stonith" type="fence_xvm"/>
         <attributes CRM_meta_interval="120000" CRM_meta_name="monitor" CRM_meta_on_node="rhel7-4" CRM_meta_on_node_uuid="5" CRM_meta_timeout="120000"  delay="0" multicast_address="239.255.100.100" pcmk_arg_map="domain:uname" pcmk_host_list="rhel7-1 rhel7-2 rhel7-3 rhel7-4 rhel7-5"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="3" operation="start" operation_key="Fencing_start_0" on_node="rhel7-4" on_node_uuid="5"/>
+        <rsc_op id="4" operation="start" operation_key="Fencing_start_0" on_node="rhel7-4" on_node_uuid="5"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="13" operation="monitor" operation_key="rsc_rhel7-1_monitor_5000" on_node="rhel7-5" on_node_uuid="3">
+      <rsc_op id="14" operation="monitor" operation_key="rsc_rhel7-1_monitor_5000" on_node="rhel7-5" on_node_uuid="3">
         <primitive id="rsc_rhel7-1" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="rhel7-5" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.202"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="12" operation="start" operation_key="rsc_rhel7-1_start_0" on_node="rhel7-5" on_node_uuid="3"/>
+        <rsc_op id="13" operation="start" operation_key="rsc_rhel7-1_start_0" on_node="rhel7-5" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <rsc_op id="12" operation="start" operation_key="rsc_rhel7-1_start_0" on_node="rhel7-5" on_node_uuid="3">
+      <rsc_op id="13" operation="start" operation_key="rsc_rhel7-1_start_0" on_node="rhel7-5" on_node_uuid="3">
         <primitive id="rsc_rhel7-1" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_on_node="rhel7-5" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.202"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="11" operation="stop" operation_key="rsc_rhel7-1_stop_0"/>
+        <pseudo_event id="12" operation="stop" operation_key="rsc_rhel7-1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="39" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="40" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <pseudo_event id="11" operation="stop" operation_key="rsc_rhel7-1_stop_0">
+      <pseudo_event id="12" operation="stop" operation_key="rsc_rhel7-1_stop_0">
         <attributes CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.202"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="42" operation="stonith" operation_key="stonith-rhel7-1-reboot" on_node="rhel7-1" on_node_uuid="1"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-rhel7-1-reboot" on_node="rhel7-1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <rsc_op id="15" operation="start" operation_key="container1_start_0" on_node="rhel7-2" on_node_uuid="2">
+      <rsc_op id="16" operation="start" operation_key="container1_start_0" on_node="rhel7-2" on_node_uuid="2">
         <primitive id="container1" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_on_node="rhel7-2" CRM_meta_on_node_uuid="2" CRM_meta_remote_node="lxc1" CRM_meta_timeout="20000" config="/var/lib/pacemaker/cts/lxc/lxc1.xml"  force_stop="true" hypervisor="lxc:///"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="14" operation="stop" operation_key="container1_stop_0"/>
+        <pseudo_event id="15" operation="stop" operation_key="container1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="39" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="40" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <pseudo_event id="14" operation="stop" operation_key="container1_stop_0">
+      <pseudo_event id="15" operation="stop" operation_key="container1_stop_0">
         <attributes CRM_meta_remote_node="lxc1" CRM_meta_timeout="20000" config="/var/lib/pacemaker/cts/lxc/lxc1.xml"  force_stop="true" hypervisor="lxc:///"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="33" operation="stop" operation_key="lxc1_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-rhel7-1-reboot" on_node="rhel7-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <crm_event id="42" operation="stonith" operation_key="stonith-rhel7-1-reboot" on_node="rhel7-1" on_node_uuid="1"/>
+        <pseudo_event id="34" operation="stop" operation_key="lxc1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <rsc_op id="17" operation="start" operation_key="container2_start_0" on_node="rhel7-3" on_node_uuid="4">
+      <rsc_op id="18" operation="start" operation_key="container2_start_0" on_node="rhel7-3" on_node_uuid="4">
         <primitive id="container2" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_on_node="rhel7-3" CRM_meta_on_node_uuid="4" CRM_meta_remote_node="lxc2" CRM_meta_timeout="20000" config="/var/lib/pacemaker/cts/lxc/lxc2.xml"  force_stop="true" hypervisor="lxc:///"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="16" operation="stop" operation_key="container2_stop_0"/>
+        <pseudo_event id="17" operation="stop" operation_key="container2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="39" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="40" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <pseudo_event id="16" operation="stop" operation_key="container2_stop_0">
+      <pseudo_event id="17" operation="stop" operation_key="container2_stop_0">
         <attributes CRM_meta_remote_node="lxc2" CRM_meta_timeout="20000" config="/var/lib/pacemaker/cts/lxc/lxc2.xml"  force_stop="true" hypervisor="lxc:///"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="36" operation="stop" operation_key="lxc2_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-rhel7-1-reboot" on_node="rhel7-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <crm_event id="42" operation="stonith" operation_key="stonith-rhel7-1-reboot" on_node="rhel7-1" on_node_uuid="1"/>
+        <pseudo_event id="37" operation="stop" operation_key="lxc2_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="21" operation="promote" operation_key="lxc-ms_promote_0" internal_operation_key="lxc-ms:0_promote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2">
+      <rsc_op id="22" operation="promote" operation_key="lxc-ms_promote_0" internal_operation_key="lxc-ms:0_promote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2">
         <primitive id="lxc-ms" long-id="lxc-ms:0" class="ocf" provider="pacemaker" type="Stateful"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="15" operation="start" operation_key="container1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
+        <rsc_op id="16" operation="start" operation_key="container1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="18" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0"/>
+        <pseudo_event id="19" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="20" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:0_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2"/>
+        <rsc_op id="21" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:0_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="promote" operation_key="lxc-ms-master_promote_0"/>
+        <pseudo_event id="30" operation="promote" operation_key="lxc-ms-master_promote_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="34" operation="start" operation_key="lxc1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
+        <rsc_op id="35" operation="start" operation_key="lxc1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="39" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="40" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="20" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:0_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2">
+      <rsc_op id="21" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:0_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2">
         <primitive id="lxc-ms" long-id="lxc-ms:0" class="ocf" provider="pacemaker" type="Stateful"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="15" operation="start" operation_key="container1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
+        <rsc_op id="16" operation="start" operation_key="container1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="19" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0"/>
+        <pseudo_event id="20" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="25" operation="start" operation_key="lxc-ms-master_start_0"/>
+        <pseudo_event id="26" operation="start" operation_key="lxc-ms-master_start_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="34" operation="start" operation_key="lxc1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
+        <rsc_op id="35" operation="start" operation_key="lxc1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="39" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="40" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <pseudo_event id="19" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0">
+      <pseudo_event id="20" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="18" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0"/>
+        <pseudo_event id="19" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="27" operation="stop" operation_key="lxc-ms-master_stop_0"/>
+        <pseudo_event id="28" operation="stop" operation_key="lxc-ms-master_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="40" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
+        <pseudo_event id="41" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13">
     <action_set>
-      <pseudo_event id="18" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0">
+      <pseudo_event id="19" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="31" operation="demote" operation_key="lxc-ms-master_demote_0"/>
+        <pseudo_event id="32" operation="demote" operation_key="lxc-ms-master_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="40" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
+        <pseudo_event id="41" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <rsc_op id="24" operation="monitor" operation_key="lxc-ms_monitor_10000" internal_operation_key="lxc-ms:1_monitor_10000" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-3">
+      <rsc_op id="25" operation="monitor" operation_key="lxc-ms_monitor_10000" internal_operation_key="lxc-ms:1_monitor_10000" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-3">
         <primitive id="lxc-ms" long-id="lxc-ms:1" class="ocf" provider="pacemaker" type="Stateful"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="23" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:1_start_0" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-3"/>
+        <rsc_op id="24" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:1_start_0" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-3"/>
       </trigger>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="lxc2_start_0" on_node="rhel7-3" on_node_uuid="4"/>
+        <rsc_op id="38" operation="start" operation_key="lxc2_start_0" on_node="rhel7-3" on_node_uuid="4"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15">
     <action_set>
-      <rsc_op id="23" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:1_start_0" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-3">
+      <rsc_op id="24" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:1_start_0" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-3">
         <primitive id="lxc-ms" long-id="lxc-ms:1" class="ocf" provider="pacemaker" type="Stateful"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="17" operation="start" operation_key="container2_start_0" on_node="rhel7-3" on_node_uuid="4"/>
+        <rsc_op id="18" operation="start" operation_key="container2_start_0" on_node="rhel7-3" on_node_uuid="4"/>
       </trigger>
       <trigger>
-        <pseudo_event id="22" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:1_stop_0"/>
+        <pseudo_event id="23" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="25" operation="start" operation_key="lxc-ms-master_start_0"/>
+        <pseudo_event id="26" operation="start" operation_key="lxc-ms-master_start_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="lxc2_start_0" on_node="rhel7-3" on_node_uuid="4"/>
+        <rsc_op id="38" operation="start" operation_key="lxc2_start_0" on_node="rhel7-3" on_node_uuid="4"/>
       </trigger>
       <trigger>
-        <pseudo_event id="39" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="40" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="16">
     <action_set>
-      <pseudo_event id="22" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:1_stop_0">
+      <pseudo_event id="23" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:1_stop_0">
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="27" operation="stop" operation_key="lxc-ms-master_stop_0"/>
+        <pseudo_event id="28" operation="stop" operation_key="lxc-ms-master_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="41" operation="stonith" operation_key="stonith-lxc2-reboot" on_node="lxc2" on_node_uuid="lxc2"/>
+        <pseudo_event id="42" operation="stonith" operation_key="stonith-lxc2-reboot" on_node="lxc2" on_node_uuid="lxc2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="17" priority="1000000">
     <action_set>
-      <pseudo_event id="32" operation="demoted" operation_key="lxc-ms-master_demoted_0">
+      <pseudo_event id="33" operation="demoted" operation_key="lxc-ms-master_demoted_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="18" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0"/>
+        <pseudo_event id="19" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="31" operation="demote" operation_key="lxc-ms-master_demote_0"/>
+        <pseudo_event id="32" operation="demote" operation_key="lxc-ms-master_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="18">
     <action_set>
-      <pseudo_event id="31" operation="demote" operation_key="lxc-ms-master_demote_0">
+      <pseudo_event id="32" operation="demote" operation_key="lxc-ms-master_demote_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -307,168 +307,168 @@
   </synapse>
   <synapse id="19" priority="1000000">
     <action_set>
-      <pseudo_event id="30" operation="promoted" operation_key="lxc-ms-master_promoted_0">
+      <pseudo_event id="31" operation="promoted" operation_key="lxc-ms-master_promoted_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="21" operation="promote" operation_key="lxc-ms_promote_0" internal_operation_key="lxc-ms:0_promote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2"/>
+        <rsc_op id="22" operation="promote" operation_key="lxc-ms_promote_0" internal_operation_key="lxc-ms:0_promote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="20">
     <action_set>
-      <pseudo_event id="29" operation="promote" operation_key="lxc-ms-master_promote_0">
+      <pseudo_event id="30" operation="promote" operation_key="lxc-ms-master_promote_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="26" operation="running" operation_key="lxc-ms-master_running_0"/>
+        <pseudo_event id="27" operation="running" operation_key="lxc-ms-master_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="28" operation="stopped" operation_key="lxc-ms-master_stopped_0"/>
+        <pseudo_event id="29" operation="stopped" operation_key="lxc-ms-master_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="32" operation="demoted" operation_key="lxc-ms-master_demoted_0"/>
+        <pseudo_event id="33" operation="demoted" operation_key="lxc-ms-master_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21" priority="1000000">
     <action_set>
-      <pseudo_event id="28" operation="stopped" operation_key="lxc-ms-master_stopped_0">
+      <pseudo_event id="29" operation="stopped" operation_key="lxc-ms-master_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="19" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0"/>
+        <pseudo_event id="20" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="22" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:1_stop_0"/>
+        <pseudo_event id="23" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="27" operation="stop" operation_key="lxc-ms-master_stop_0"/>
+        <pseudo_event id="28" operation="stop" operation_key="lxc-ms-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="22">
     <action_set>
-      <pseudo_event id="27" operation="stop" operation_key="lxc-ms-master_stop_0">
+      <pseudo_event id="28" operation="stop" operation_key="lxc-ms-master_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="32" operation="demoted" operation_key="lxc-ms-master_demoted_0"/>
+        <pseudo_event id="33" operation="demoted" operation_key="lxc-ms-master_demoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="40" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
+        <pseudo_event id="41" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="41" operation="stonith" operation_key="stonith-lxc2-reboot" on_node="lxc2" on_node_uuid="lxc2"/>
+        <pseudo_event id="42" operation="stonith" operation_key="stonith-lxc2-reboot" on_node="lxc2" on_node_uuid="lxc2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="23" priority="1000000">
     <action_set>
-      <pseudo_event id="26" operation="running" operation_key="lxc-ms-master_running_0">
+      <pseudo_event id="27" operation="running" operation_key="lxc-ms-master_running_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="20" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:0_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2"/>
+        <rsc_op id="21" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:0_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2"/>
       </trigger>
       <trigger>
-        <rsc_op id="23" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:1_start_0" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-3"/>
+        <rsc_op id="24" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:1_start_0" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="25" operation="start" operation_key="lxc-ms-master_start_0"/>
+        <pseudo_event id="26" operation="start" operation_key="lxc-ms-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="24">
     <action_set>
-      <pseudo_event id="25" operation="start" operation_key="lxc-ms-master_start_0">
+      <pseudo_event id="26" operation="start" operation_key="lxc-ms-master_start_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="28" operation="stopped" operation_key="lxc-ms-master_stopped_0"/>
+        <pseudo_event id="29" operation="stopped" operation_key="lxc-ms-master_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="32" operation="demoted" operation_key="lxc-ms-master_demoted_0"/>
+        <pseudo_event id="33" operation="demoted" operation_key="lxc-ms-master_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="25">
     <action_set>
-      <rsc_op id="35" operation="monitor" operation_key="lxc1_monitor_30000" on_node="rhel7-2" on_node_uuid="2">
+      <rsc_op id="36" operation="monitor" operation_key="lxc1_monitor_30000" on_node="rhel7-2" on_node_uuid="2">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_on_node="rhel7-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="34" operation="start" operation_key="lxc1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
+        <rsc_op id="35" operation="start" operation_key="lxc1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="26">
     <action_set>
-      <rsc_op id="34" operation="start" operation_key="lxc1_start_0" on_node="rhel7-2" on_node_uuid="2">
+      <rsc_op id="35" operation="start" operation_key="lxc1_start_0" on_node="rhel7-2" on_node_uuid="2">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_name="start" CRM_meta_on_node="rhel7-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="5" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-3" on_node_uuid="4"/>
+        <rsc_op id="6" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-3" on_node_uuid="4"/>
       </trigger>
       <trigger>
-        <rsc_op id="6" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-4" on_node_uuid="5"/>
+        <rsc_op id="7" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-4" on_node_uuid="5"/>
       </trigger>
       <trigger>
-        <rsc_op id="8" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-5" on_node_uuid="3"/>
+        <rsc_op id="9" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-5" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="15" operation="start" operation_key="container1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
+        <rsc_op id="16" operation="start" operation_key="container1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="33" operation="stop" operation_key="lxc1_stop_0"/>
+        <pseudo_event id="34" operation="stop" operation_key="lxc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="39" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="40" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="27">
     <action_set>
-      <pseudo_event id="33" operation="stop" operation_key="lxc1_stop_0">
+      <pseudo_event id="34" operation="stop" operation_key="lxc1_stop_0">
         <attributes CRM_meta_container="container1" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="5" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-3" on_node_uuid="4"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-rhel7-1-reboot" on_node="rhel7-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="6" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-4" on_node_uuid="5"/>
+        <rsc_op id="6" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-3" on_node_uuid="4"/>
       </trigger>
       <trigger>
-        <rsc_op id="8" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-5" on_node_uuid="3"/>
+        <rsc_op id="7" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-4" on_node_uuid="5"/>
       </trigger>
       <trigger>
-        <crm_event id="42" operation="stonith" operation_key="stonith-rhel7-1-reboot" on_node="rhel7-1" on_node_uuid="1"/>
+        <rsc_op id="9" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-5" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="28">
     <action_set>
-      <rsc_op id="8" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-5" on_node_uuid="3">
+      <rsc_op id="9" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-5" on_node_uuid="3">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_on_node="rhel7-5" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000" />
       </rsc_op>
@@ -477,7 +477,7 @@
   </synapse>
   <synapse id="29">
     <action_set>
-      <rsc_op id="6" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-4" on_node_uuid="5">
+      <rsc_op id="7" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-4" on_node_uuid="5">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_on_node="rhel7-4" CRM_meta_on_node_uuid="5" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000" />
       </rsc_op>
@@ -486,7 +486,7 @@
   </synapse>
   <synapse id="30">
     <action_set>
-      <rsc_op id="5" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-3" on_node_uuid="4">
+      <rsc_op id="6" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-3" on_node_uuid="4">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_on_node="rhel7-3" CRM_meta_on_node_uuid="4" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000" />
       </rsc_op>
@@ -495,69 +495,69 @@
   </synapse>
   <synapse id="31">
     <action_set>
-      <rsc_op id="38" operation="monitor" operation_key="lxc2_monitor_30000" on_node="rhel7-3" on_node_uuid="4">
+      <rsc_op id="39" operation="monitor" operation_key="lxc2_monitor_30000" on_node="rhel7-3" on_node_uuid="4">
         <primitive id="lxc2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container2" CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_on_node="rhel7-3" CRM_meta_on_node_uuid="4" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="lxc2_start_0" on_node="rhel7-3" on_node_uuid="4"/>
+        <rsc_op id="38" operation="start" operation_key="lxc2_start_0" on_node="rhel7-3" on_node_uuid="4"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="32">
     <action_set>
-      <rsc_op id="37" operation="start" operation_key="lxc2_start_0" on_node="rhel7-3" on_node_uuid="4">
+      <rsc_op id="38" operation="start" operation_key="lxc2_start_0" on_node="rhel7-3" on_node_uuid="4">
         <primitive id="lxc2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container2" CRM_meta_name="start" CRM_meta_on_node="rhel7-3" CRM_meta_on_node_uuid="4" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-2" on_node_uuid="2"/>
+        <rsc_op id="5" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="7" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-4" on_node_uuid="5"/>
+        <rsc_op id="8" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-4" on_node_uuid="5"/>
       </trigger>
       <trigger>
-        <rsc_op id="9" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-5" on_node_uuid="3"/>
+        <rsc_op id="10" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-5" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="17" operation="start" operation_key="container2_start_0" on_node="rhel7-3" on_node_uuid="4"/>
+        <rsc_op id="18" operation="start" operation_key="container2_start_0" on_node="rhel7-3" on_node_uuid="4"/>
       </trigger>
       <trigger>
-        <pseudo_event id="36" operation="stop" operation_key="lxc2_stop_0"/>
+        <pseudo_event id="37" operation="stop" operation_key="lxc2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="39" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="40" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="33">
     <action_set>
-      <pseudo_event id="36" operation="stop" operation_key="lxc2_stop_0">
+      <pseudo_event id="37" operation="stop" operation_key="lxc2_stop_0">
         <attributes CRM_meta_container="container2" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-2" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-rhel7-1-reboot" on_node="rhel7-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="7" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-4" on_node_uuid="5"/>
+        <rsc_op id="5" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="9" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-5" on_node_uuid="3"/>
+        <rsc_op id="8" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-4" on_node_uuid="5"/>
       </trigger>
       <trigger>
-        <crm_event id="42" operation="stonith" operation_key="stonith-rhel7-1-reboot" on_node="rhel7-1" on_node_uuid="1"/>
+        <rsc_op id="10" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-5" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="34">
     <action_set>
-      <rsc_op id="9" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-5" on_node_uuid="3">
+      <rsc_op id="10" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-5" on_node_uuid="3">
         <primitive id="lxc2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container2" CRM_meta_on_node="rhel7-5" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000" />
       </rsc_op>
@@ -566,7 +566,7 @@
   </synapse>
   <synapse id="35">
     <action_set>
-      <rsc_op id="7" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-4" on_node_uuid="5">
+      <rsc_op id="8" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-4" on_node_uuid="5">
         <primitive id="lxc2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container2" CRM_meta_on_node="rhel7-4" CRM_meta_on_node_uuid="5" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000" />
       </rsc_op>
@@ -575,7 +575,7 @@
   </synapse>
   <synapse id="36">
     <action_set>
-      <rsc_op id="4" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-2" on_node_uuid="2">
+      <rsc_op id="5" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-2" on_node_uuid="2">
         <primitive id="lxc2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container2" CRM_meta_on_node="rhel7-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000" />
       </rsc_op>
@@ -584,20 +584,7 @@
   </synapse>
   <synapse id="37">
     <action_set>
-      <crm_event id="42" operation="stonith" operation_key="stonith-rhel7-1-reboot" on_node="rhel7-1" on_node_uuid="1">
-        <attributes CRM_meta_connected="1" CRM_meta_on_node="rhel7-1" CRM_meta_on_node_uuid="1" CRM_meta_shutdown="0" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="1"/>
-          <node id="lxc2"/>
-          <node id="lxc1"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="38">
-    <action_set>
-      <pseudo_event id="41" operation="stonith" operation_key="stonith-lxc2-reboot" on_node="lxc2" on_node_uuid="lxc2">
+      <pseudo_event id="42" operation="stonith" operation_key="stonith-lxc2-reboot" on_node="lxc2" on_node_uuid="lxc2">
         <attributes CRM_meta_master_lxc_ms="5" CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_stonith_action="reboot" />
         <downed>
           <node id="lxc2"/>
@@ -606,13 +593,13 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="16" operation="stop" operation_key="container2_stop_0"/>
+        <pseudo_event id="17" operation="stop" operation_key="container2_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="39">
+  <synapse id="38">
     <action_set>
-      <pseudo_event id="40" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1">
+      <pseudo_event id="41" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1">
         <attributes CRM_meta_last_failure_lxc_ms="1458766329" CRM_meta_master_lxc_ms="10" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_stonith_action="reboot" />
         <downed>
           <node id="lxc1"/>
@@ -621,62 +608,75 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="14" operation="stop" operation_key="container1_stop_0"/>
+        <pseudo_event id="15" operation="stop" operation_key="container1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="40">
+  <synapse id="39">
     <action_set>
-      <pseudo_event id="39" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="40" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="40" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-rhel7-1-reboot" on_node="rhel7-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="41" operation="stonith" operation_key="stonith-lxc2-reboot" on_node="lxc2" on_node_uuid="lxc2"/>
+        <pseudo_event id="41" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
       </trigger>
       <trigger>
-        <crm_event id="42" operation="stonith" operation_key="stonith-rhel7-1-reboot" on_node="rhel7-1" on_node_uuid="1"/>
+        <pseudo_event id="42" operation="stonith" operation_key="stonith-lxc2-reboot" on_node="lxc2" on_node_uuid="lxc2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="41">
+  <synapse id="40">
     <action_set>
-      <pseudo_event id="2" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="3" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="10" operation="stop" operation_key="Fencing_stop_0" on_node="rhel7-4" on_node_uuid="5"/>
+        <rsc_op id="11" operation="stop" operation_key="Fencing_stop_0" on_node="rhel7-4" on_node_uuid="5"/>
       </trigger>
       <trigger>
-        <pseudo_event id="11" operation="stop" operation_key="rsc_rhel7-1_stop_0"/>
+        <pseudo_event id="12" operation="stop" operation_key="rsc_rhel7-1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="14" operation="stop" operation_key="container1_stop_0"/>
+        <pseudo_event id="15" operation="stop" operation_key="container1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="16" operation="stop" operation_key="container2_stop_0"/>
+        <pseudo_event id="17" operation="stop" operation_key="container2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="19" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0"/>
+        <pseudo_event id="20" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="22" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:1_stop_0"/>
+        <pseudo_event id="23" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="33" operation="stop" operation_key="lxc1_stop_0"/>
+        <pseudo_event id="34" operation="stop" operation_key="lxc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="36" operation="stop" operation_key="lxc2_stop_0"/>
+        <pseudo_event id="37" operation="stop" operation_key="lxc2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="39" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="40" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="41">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-rhel7-1-reboot" on_node="rhel7-1" on_node_uuid="1">
+        <attributes CRM_meta_connected="1" CRM_meta_on_node="rhel7-1" CRM_meta_on_node_uuid="1" CRM_meta_shutdown="0" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="1"/>
+          <node id="lxc2"/>
+          <node id="lxc1"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
diff --git a/pengine/test10/guest-node-host-dies.scores b/pengine/test10/guest-node-host-dies.scores
index 663d236..0d7ad3f 100644
--- a/pengine/test10/guest-node-host-dies.scores
+++ b/pengine/test10/guest-node-host-dies.scores
@@ -1,6 +1,3 @@
-  notice: Fencing   lxc1: guest is unclean
-  notice: Fencing   lxc2: guest is unclean
-  notice: Fencing   rhel7-1: node is unclean
 Allocation scores:
 clone_color: lxc-ms-master allocation score on lxc1: INFINITY
 clone_color: lxc-ms-master allocation score on lxc2: INFINITY
diff --git a/pengine/test10/guest-node-host-dies.summary b/pengine/test10/guest-node-host-dies.summary
index 679deb6..d22fe3d 100644
--- a/pengine/test10/guest-node-host-dies.summary
+++ b/pengine/test10/guest-node-host-dies.summary
@@ -10,13 +10,10 @@ Online: [ rhel7-2 rhel7-3 rhel7-4 rhel7-5 ]
  Master/Slave Set: lxc-ms-master [lxc-ms]
      Stopped: [ rhel7-1 rhel7-2 rhel7-3 rhel7-4 rhel7-5 ]
 
-  notice: Fencing   lxc1: guest is unclean
-  notice: Fencing   lxc2: guest is unclean
-  notice: Fencing   rhel7-1: node is unclean
 Transition Summary:
- * Fence (reboot) rhel7-1
- * Fence (reboot) lxc2 (resource: container2)
- * Fence (reboot) lxc1 (resource: container1)
+ * Fence (reboot) lxc2 (resource: container2) 'guest is unclean'
+ * Fence (reboot) lxc1 (resource: container1) 'guest is unclean'
+ * Fence (reboot) rhel7-1 'rsc_rhel7-1 is thought to be active there'
  * Restart Fencing	(Started rhel7-4)
  * Move    rsc_rhel7-1	(Started rhel7-1 -> rhel7-5)
  * Recover container1	(Started rhel7-1 -> rhel7-2)
diff --git a/pengine/test10/interleave-pseudo-stop.exp b/pengine/test10/interleave-pseudo-stop.exp
index 7a6b7ed..63217e8 100644
--- a/pengine/test10/interleave-pseudo-stop.exp
+++ b/pengine/test10/interleave-pseudo-stop.exp
@@ -1,43 +1,43 @@
  <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
    <synapse id="0">
      <action_set>
-      <pseudo_event id="7" operation="stop" operation_key="stonithclone:0_stop_0" internal_operation_key="stonithclone:1_stop_0">
+      <pseudo_event id="8" operation="stop" operation_key="stonithclone:0_stop_0" internal_operation_key="stonithclone:1_stop_0">
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000"  hostlist="node1,node2"/>
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="10" operation="stop" operation_key="stonithcloneset_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
        </trigger>
       <trigger>
-        <crm_event id="58" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
+        <pseudo_event id="11" operation="stop" operation_key="stonithcloneset_stop_0"/>
       </trigger>
      </inputs>
    </synapse>
   <synapse id="1" priority="1000000">
      <action_set>
-      <pseudo_event id="11" operation="stopped" operation_key="stonithcloneset_stopped_0">
+      <pseudo_event id="12" operation="stopped" operation_key="stonithcloneset_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="7" operation="stop" operation_key="stonithclone:0_stop_0" internal_operation_key="stonithclone:1_stop_0"/>
+        <pseudo_event id="8" operation="stop" operation_key="stonithclone:0_stop_0" internal_operation_key="stonithclone:1_stop_0"/>
        </trigger>
        <trigger>
-        <pseudo_event id="10" operation="stop" operation_key="stonithcloneset_stop_0"/>
+        <pseudo_event id="11" operation="stop" operation_key="stonithcloneset_stop_0"/>
        </trigger>
      </inputs>
    </synapse>
   <synapse id="2">
      <action_set>
-      <pseudo_event id="10" operation="stop" operation_key="stonithcloneset_stop_0">
+      <pseudo_event id="11" operation="stop" operation_key="stonithcloneset_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="58" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
       </trigger>
     </inputs>
   </synapse>
@@ -50,7 +50,7 @@
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="23" operation="notify" operation_key="evmscloneset_pre_notify_stop_0"/>
+        <pseudo_event id="24" operation="notify" operation_key="evmscloneset_pre_notify_stop_0"/>
        </trigger>
      </inputs>
    </synapse>
@@ -63,7 +63,7 @@
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="25" operation="notify" operation_key="evmscloneset_post_notify_stopped_0"/>
+        <pseudo_event id="26" operation="notify" operation_key="evmscloneset_post_notify_stopped_0"/>
       </trigger>
       <trigger>
         <pseudo_event id="59" operation="notify" operation_key="evmsclone:0_post_notify_stop_0" internal_operation_key="evmsclone:1_post_notify_stonith_0"/>
@@ -93,40 +93,40 @@
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="58" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
       </trigger>
      </inputs>
    </synapse>
   <synapse id="7">
      <action_set>
-      <pseudo_event id="14" operation="stop" operation_key="evmsclone:0_stop_0" internal_operation_key="evmsclone:1_stop_0">
+      <pseudo_event id="15" operation="stop" operation_key="evmsclone:0_stop_0" internal_operation_key="evmsclone:1_stop_0">
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="evmsclone:0 evmsclone:1" CRM_meta_notify_active_uname="node2 node1" CRM_meta_notify_all_uname="node1 node2" CRM_meta_notify_available_uname="node1 node2" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="evmsclone:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="evmsclone:1" CRM_meta_notify_stop_uname="node1" CRM_meta_timeout="20000" />
       </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="21" operation="stop" operation_key="evmscloneset_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="imagestoreclone:0_stop_0" internal_operation_key="imagestoreclone:1_stop_0"/>
+        <pseudo_event id="22" operation="stop" operation_key="evmscloneset_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="44" operation="stop" operation_key="configstoreclone:0_stop_0" internal_operation_key="configstoreclone:1_stop_0"/>
+        <pseudo_event id="30" operation="stop" operation_key="imagestoreclone:0_stop_0" internal_operation_key="imagestoreclone:1_stop_0"/>
        </trigger>
        <trigger>
-        <crm_event id="58" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
+        <pseudo_event id="45" operation="stop" operation_key="configstoreclone:0_stop_0" internal_operation_key="configstoreclone:1_stop_0"/>
        </trigger>
     </inputs>
   </synapse>
   <synapse id="8" priority="1000000">
     <action_set>
-      <pseudo_event id="26" operation="notified" operation_key="evmscloneset_confirmed-post_notify_stopped_0">
+      <pseudo_event id="27" operation="notified" operation_key="evmscloneset_confirmed-post_notify_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
        <trigger>
-        <pseudo_event id="25" operation="notify" operation_key="evmscloneset_post_notify_stopped_0"/>
+        <pseudo_event id="26" operation="notify" operation_key="evmscloneset_post_notify_stopped_0"/>
        </trigger>
       <trigger>
         <rsc_op id="61" operation="notify" operation_key="evmsclone:1_post_notify_stop_0" internal_operation_key="evmsclone:0_post_notify_stop_0" on_node="node2" on_node_uuid="2529f279-adaf-4ff5-9198-4646e845c5a5"/>
@@ -135,28 +135,28 @@
    </synapse>
   <synapse id="9" priority="1000000">
      <action_set>
-      <pseudo_event id="25" operation="notify" operation_key="evmscloneset_post_notify_stopped_0">
+      <pseudo_event id="26" operation="notify" operation_key="evmscloneset_post_notify_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="22" operation="stopped" operation_key="evmscloneset_stopped_0"/>
+        <pseudo_event id="23" operation="stopped" operation_key="evmscloneset_stopped_0"/>
        </trigger>
        <trigger>
-        <pseudo_event id="24" operation="notified" operation_key="evmscloneset_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="25" operation="notified" operation_key="evmscloneset_confirmed-pre_notify_stop_0"/>
        </trigger>
      </inputs>
    </synapse>
   <synapse id="10">
      <action_set>
-      <pseudo_event id="24" operation="notified" operation_key="evmscloneset_confirmed-pre_notify_stop_0">
+      <pseudo_event id="25" operation="notified" operation_key="evmscloneset_confirmed-pre_notify_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="23" operation="notify" operation_key="evmscloneset_pre_notify_stop_0"/>
+        <pseudo_event id="24" operation="notify" operation_key="evmscloneset_pre_notify_stop_0"/>
        </trigger>
        <trigger>
         <rsc_op id="78" operation="notify" operation_key="evmsclone:1_pre_notify_stop_0" internal_operation_key="evmsclone:0_pre_notify_stop_0" on_node="node2" on_node_uuid="2529f279-adaf-4ff5-9198-4646e845c5a5"/>
@@ -165,7 +165,7 @@
    </synapse>
   <synapse id="11">
     <action_set>
-      <pseudo_event id="23" operation="notify" operation_key="evmscloneset_pre_notify_stop_0">
+      <pseudo_event id="24" operation="notify" operation_key="evmscloneset_pre_notify_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -173,37 +173,37 @@
   </synapse>
   <synapse id="12" priority="1000000">
      <action_set>
-      <pseudo_event id="22" operation="stopped" operation_key="evmscloneset_stopped_0">
+      <pseudo_event id="23" operation="stopped" operation_key="evmscloneset_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="14" operation="stop" operation_key="evmsclone:0_stop_0" internal_operation_key="evmsclone:1_stop_0"/>
+        <pseudo_event id="15" operation="stop" operation_key="evmsclone:0_stop_0" internal_operation_key="evmsclone:1_stop_0"/>
        </trigger>
       <trigger>
-        <pseudo_event id="21" operation="stop" operation_key="evmscloneset_stop_0"/>
+        <pseudo_event id="22" operation="stop" operation_key="evmscloneset_stop_0"/>
       </trigger>
      </inputs>
    </synapse>
   <synapse id="13">
      <action_set>
-      <pseudo_event id="21" operation="stop" operation_key="evmscloneset_stop_0">
+      <pseudo_event id="22" operation="stop" operation_key="evmscloneset_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="24" operation="notified" operation_key="evmscloneset_confirmed-pre_notify_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
        </trigger>
        <trigger>
-        <pseudo_event id="41" operation="notified" operation_key="imagestorecloneset_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="25" operation="notified" operation_key="evmscloneset_confirmed-pre_notify_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="56" operation="notified" operation_key="configstorecloneset_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="42" operation="notified" operation_key="imagestorecloneset_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <crm_event id="58" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
+        <pseudo_event id="57" operation="notified" operation_key="configstorecloneset_confirmed-post_notify_stopped_0"/>
        </trigger>
      </inputs>
    </synapse>
@@ -216,7 +216,7 @@
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="38" operation="notify" operation_key="imagestorecloneset_pre_notify_stop_0"/>
+        <pseudo_event id="39" operation="notify" operation_key="imagestorecloneset_pre_notify_stop_0"/>
        </trigger>
      </inputs>
    </synapse>
@@ -229,7 +229,7 @@
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="40" operation="notify" operation_key="imagestorecloneset_post_notify_stopped_0"/>
+        <pseudo_event id="41" operation="notify" operation_key="imagestorecloneset_post_notify_stopped_0"/>
       </trigger>
       <trigger>
         <pseudo_event id="62" operation="notify" operation_key="imagestoreclone:0_post_notify_stop_0" internal_operation_key="imagestoreclone:1_post_notify_stonith_0"/>
@@ -259,34 +259,34 @@
      </action_set>
      <inputs>
        <trigger>
-        <crm_event id="58" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="18">
     <action_set>
-      <pseudo_event id="29" operation="stop" operation_key="imagestoreclone:0_stop_0" internal_operation_key="imagestoreclone:1_stop_0">
+      <pseudo_event id="30" operation="stop" operation_key="imagestoreclone:0_stop_0" internal_operation_key="imagestoreclone:1_stop_0">
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="imagestoreclone:0 imagestoreclone:1" CRM_meta_notify_active_uname="node2 node1" CRM_meta_notify_all_uname="node1 node2" CRM_meta_notify_available_uname="node1 node2" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="imagestoreclone:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="imagestoreclone:1" CRM_meta_notify_stop_uname="node1" CRM_meta_timeout="60000"  device="/dev/evms/vmsharedclustercontainer/imagestore" directory="/var/lib/xen/images" fstype="ocfs2"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="36" operation="stop" operation_key="imagestorecloneset_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
       </trigger>
       <trigger>
-        <crm_event id="58" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
+        <pseudo_event id="37" operation="stop" operation_key="imagestorecloneset_stop_0"/>
       </trigger>
      </inputs>
    </synapse>
   <synapse id="19" priority="1000000">
      <action_set>
-      <pseudo_event id="41" operation="notified" operation_key="imagestorecloneset_confirmed-post_notify_stopped_0">
+      <pseudo_event id="42" operation="notified" operation_key="imagestorecloneset_confirmed-post_notify_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="40" operation="notify" operation_key="imagestorecloneset_post_notify_stopped_0"/>
+        <pseudo_event id="41" operation="notify" operation_key="imagestorecloneset_post_notify_stopped_0"/>
        </trigger>
       <trigger>
         <rsc_op id="64" operation="notify" operation_key="imagestoreclone:1_post_notify_stop_0" internal_operation_key="imagestoreclone:0_post_notify_stop_0" on_node="node2" on_node_uuid="2529f279-adaf-4ff5-9198-4646e845c5a5"/>
@@ -295,28 +295,28 @@
    </synapse>
   <synapse id="20" priority="1000000">
      <action_set>
-      <pseudo_event id="40" operation="notify" operation_key="imagestorecloneset_post_notify_stopped_0">
+      <pseudo_event id="41" operation="notify" operation_key="imagestorecloneset_post_notify_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="37" operation="stopped" operation_key="imagestorecloneset_stopped_0"/>
+        <pseudo_event id="38" operation="stopped" operation_key="imagestorecloneset_stopped_0"/>
        </trigger>
        <trigger>
-        <pseudo_event id="39" operation="notified" operation_key="imagestorecloneset_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="40" operation="notified" operation_key="imagestorecloneset_confirmed-pre_notify_stop_0"/>
        </trigger>
      </inputs>
    </synapse>
   <synapse id="21">
      <action_set>
-      <pseudo_event id="39" operation="notified" operation_key="imagestorecloneset_confirmed-pre_notify_stop_0">
+      <pseudo_event id="40" operation="notified" operation_key="imagestorecloneset_confirmed-pre_notify_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="38" operation="notify" operation_key="imagestorecloneset_pre_notify_stop_0"/>
+        <pseudo_event id="39" operation="notify" operation_key="imagestorecloneset_pre_notify_stop_0"/>
        </trigger>
        <trigger>
         <rsc_op id="81" operation="notify" operation_key="imagestoreclone:1_pre_notify_stop_0" internal_operation_key="imagestoreclone:0_pre_notify_stop_0" on_node="node2" on_node_uuid="2529f279-adaf-4ff5-9198-4646e845c5a5"/>
@@ -325,7 +325,7 @@
    </synapse>
   <synapse id="22">
     <action_set>
-      <pseudo_event id="38" operation="notify" operation_key="imagestorecloneset_pre_notify_stop_0">
+      <pseudo_event id="39" operation="notify" operation_key="imagestorecloneset_pre_notify_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -333,31 +333,31 @@
   </synapse>
   <synapse id="23" priority="1000000">
      <action_set>
-      <pseudo_event id="37" operation="stopped" operation_key="imagestorecloneset_stopped_0">
+      <pseudo_event id="38" operation="stopped" operation_key="imagestorecloneset_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="imagestoreclone:0_stop_0" internal_operation_key="imagestoreclone:1_stop_0"/>
+        <pseudo_event id="30" operation="stop" operation_key="imagestoreclone:0_stop_0" internal_operation_key="imagestoreclone:1_stop_0"/>
        </trigger>
       <trigger>
-        <pseudo_event id="36" operation="stop" operation_key="imagestorecloneset_stop_0"/>
+        <pseudo_event id="37" operation="stop" operation_key="imagestorecloneset_stop_0"/>
       </trigger>
      </inputs>
    </synapse>
   <synapse id="24">
      <action_set>
-      <pseudo_event id="36" operation="stop" operation_key="imagestorecloneset_stop_0">
+      <pseudo_event id="37" operation="stop" operation_key="imagestorecloneset_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="39" operation="notified" operation_key="imagestorecloneset_confirmed-pre_notify_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
        </trigger>
        <trigger>
-        <crm_event id="58" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
+        <pseudo_event id="40" operation="notified" operation_key="imagestorecloneset_confirmed-pre_notify_stop_0"/>
        </trigger>
      </inputs>
    </synapse>
@@ -370,7 +370,7 @@
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="53" operation="notify" operation_key="configstorecloneset_pre_notify_stop_0"/>
+        <pseudo_event id="54" operation="notify" operation_key="configstorecloneset_pre_notify_stop_0"/>
        </trigger>
      </inputs>
    </synapse>
@@ -383,7 +383,7 @@
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="55" operation="notify" operation_key="configstorecloneset_post_notify_stopped_0"/>
+        <pseudo_event id="56" operation="notify" operation_key="configstorecloneset_post_notify_stopped_0"/>
       </trigger>
       <trigger>
         <pseudo_event id="65" operation="notify" operation_key="configstoreclone:0_post_notify_stop_0" internal_operation_key="configstoreclone:1_post_notify_stonith_0"/>
@@ -413,34 +413,34 @@
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="58" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="29">
      <action_set>
-      <pseudo_event id="44" operation="stop" operation_key="configstoreclone:0_stop_0" internal_operation_key="configstoreclone:1_stop_0">
+      <pseudo_event id="45" operation="stop" operation_key="configstoreclone:0_stop_0" internal_operation_key="configstoreclone:1_stop_0">
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="configstoreclone:0 configstoreclone:1" CRM_meta_notify_active_uname="node2 node1" CRM_meta_notify_all_uname="node1 node2" CRM_meta_notify_available_uname="node1 node2" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="configstoreclone:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="configstoreclone:1" CRM_meta_notify_stop_uname="node1" CRM_meta_timeout="60000"  device="/dev/evms/vmsharedclustercontainer/configstore" directory="/etc/xen/vm" fstype="ocfs2"/>
       </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="51" operation="stop" operation_key="configstorecloneset_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
        </trigger>
       <trigger>
-        <crm_event id="58" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
+        <pseudo_event id="52" operation="stop" operation_key="configstorecloneset_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="30" priority="1000000">
     <action_set>
-      <pseudo_event id="56" operation="notified" operation_key="configstorecloneset_confirmed-post_notify_stopped_0">
+      <pseudo_event id="57" operation="notified" operation_key="configstorecloneset_confirmed-post_notify_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="55" operation="notify" operation_key="configstorecloneset_post_notify_stopped_0"/>
+        <pseudo_event id="56" operation="notify" operation_key="configstorecloneset_post_notify_stopped_0"/>
       </trigger>
       <trigger>
         <rsc_op id="67" operation="notify" operation_key="configstoreclone:1_post_notify_stop_0" internal_operation_key="configstoreclone:0_post_notify_stop_0" on_node="node2" on_node_uuid="2529f279-adaf-4ff5-9198-4646e845c5a5"/>
@@ -449,28 +449,28 @@
    </synapse>
   <synapse id="31" priority="1000000">
      <action_set>
-      <pseudo_event id="55" operation="notify" operation_key="configstorecloneset_post_notify_stopped_0">
+      <pseudo_event id="56" operation="notify" operation_key="configstorecloneset_post_notify_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="52" operation="stopped" operation_key="configstorecloneset_stopped_0"/>
+        <pseudo_event id="53" operation="stopped" operation_key="configstorecloneset_stopped_0"/>
        </trigger>
       <trigger>
-        <pseudo_event id="54" operation="notified" operation_key="configstorecloneset_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="55" operation="notified" operation_key="configstorecloneset_confirmed-pre_notify_stop_0"/>
       </trigger>
      </inputs>
    </synapse>
   <synapse id="32">
      <action_set>
-      <pseudo_event id="54" operation="notified" operation_key="configstorecloneset_confirmed-pre_notify_stop_0">
+      <pseudo_event id="55" operation="notified" operation_key="configstorecloneset_confirmed-pre_notify_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="53" operation="notify" operation_key="configstorecloneset_pre_notify_stop_0"/>
+        <pseudo_event id="54" operation="notify" operation_key="configstorecloneset_pre_notify_stop_0"/>
        </trigger>
        <trigger>
         <rsc_op id="84" operation="notify" operation_key="configstoreclone:1_pre_notify_stop_0" internal_operation_key="configstoreclone:0_pre_notify_stop_0" on_node="node2" on_node_uuid="2529f279-adaf-4ff5-9198-4646e845c5a5"/>
@@ -479,7 +479,7 @@
    </synapse>
   <synapse id="33">
      <action_set>
-      <pseudo_event id="53" operation="notify" operation_key="configstorecloneset_pre_notify_stop_0">
+      <pseudo_event id="54" operation="notify" operation_key="configstorecloneset_pre_notify_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
@@ -487,87 +487,76 @@
    </synapse>
   <synapse id="34" priority="1000000">
      <action_set>
-      <pseudo_event id="52" operation="stopped" operation_key="configstorecloneset_stopped_0">
+      <pseudo_event id="53" operation="stopped" operation_key="configstorecloneset_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="44" operation="stop" operation_key="configstoreclone:0_stop_0" internal_operation_key="configstoreclone:1_stop_0"/>
+        <pseudo_event id="45" operation="stop" operation_key="configstoreclone:0_stop_0" internal_operation_key="configstoreclone:1_stop_0"/>
        </trigger>
        <trigger>
-        <pseudo_event id="51" operation="stop" operation_key="configstorecloneset_stop_0"/>
+        <pseudo_event id="52" operation="stop" operation_key="configstorecloneset_stop_0"/>
        </trigger>
      </inputs>
    </synapse>
   <synapse id="35">
      <action_set>
-      <pseudo_event id="51" operation="stop" operation_key="configstorecloneset_stop_0">
+      <pseudo_event id="52" operation="stop" operation_key="configstorecloneset_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="54" operation="notified" operation_key="configstorecloneset_confirmed-pre_notify_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
        </trigger>
       <trigger>
-        <crm_event id="58" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
+        <pseudo_event id="55" operation="notified" operation_key="configstorecloneset_confirmed-pre_notify_stop_0"/>
       </trigger>
      </inputs>
    </synapse>
   <synapse id="36">
      <action_set>
-      <crm_event id="58" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8">
-        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="37">
-    <action_set>
-      <pseudo_event id="57" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="58" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <crm_event id="58" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
        </trigger>
      </inputs>
    </synapse>
-  <synapse id="38">
+  <synapse id="37">
     <action_set>
-      <pseudo_event id="4" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="5" operation="all_stopped" operation_key="all_stopped">
         <attributes />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="7" operation="stop" operation_key="stonithclone:0_stop_0" internal_operation_key="stonithclone:1_stop_0"/>
+        <pseudo_event id="8" operation="stop" operation_key="stonithclone:0_stop_0" internal_operation_key="stonithclone:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="14" operation="stop" operation_key="evmsclone:0_stop_0" internal_operation_key="evmsclone:1_stop_0"/>
+        <pseudo_event id="15" operation="stop" operation_key="evmsclone:0_stop_0" internal_operation_key="evmsclone:1_stop_0"/>
        </trigger>
        <trigger>
-        <pseudo_event id="26" operation="notified" operation_key="evmscloneset_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="27" operation="notified" operation_key="evmscloneset_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="imagestoreclone:0_stop_0" internal_operation_key="imagestoreclone:1_stop_0"/>
+        <pseudo_event id="30" operation="stop" operation_key="imagestoreclone:0_stop_0" internal_operation_key="imagestoreclone:1_stop_0"/>
        </trigger>
        <trigger>
-        <pseudo_event id="41" operation="notified" operation_key="imagestorecloneset_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="42" operation="notified" operation_key="imagestorecloneset_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="44" operation="stop" operation_key="configstoreclone:0_stop_0" internal_operation_key="configstoreclone:1_stop_0"/>
+        <pseudo_event id="45" operation="stop" operation_key="configstoreclone:0_stop_0" internal_operation_key="configstoreclone:1_stop_0"/>
        </trigger>
        <trigger>
-        <pseudo_event id="56" operation="notified" operation_key="configstorecloneset_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="57" operation="notified" operation_key="configstorecloneset_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="57" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="58" operation="stonith_complete" operation_key="stonith_complete"/>
        </trigger>
       <trigger>
         <pseudo_event id="60" operation="notified" operation_key="evmsclone:0_notified_0" internal_operation_key="evmsclone:1_confirmed-post_notify_stonith_0"/>
@@ -580,5 +569,15 @@
       </trigger>
      </inputs>
    </synapse>
+  <synapse id="38">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8">
+        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="f6d93040-a9ad-4745-a647-57ed32444ca8" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="f6d93040-a9ad-4745-a647-57ed32444ca8"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
  </transition_graph>
-
diff --git a/pengine/test10/interleave-pseudo-stop.scores b/pengine/test10/interleave-pseudo-stop.scores
index 625ba18..014f4de 100644
--- a/pengine/test10/interleave-pseudo-stop.scores
+++ b/pengine/test10/interleave-pseudo-stop.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   node1: node is unclean
 Allocation scores:
 clone_color: configstoreclone:0 allocation score on node1: 0
 clone_color: configstoreclone:0 allocation score on node2: 1
diff --git a/pengine/test10/interleave-pseudo-stop.summary b/pengine/test10/interleave-pseudo-stop.summary
index 8c22b2f..01ce0ec 100644
--- a/pengine/test10/interleave-pseudo-stop.summary
+++ b/pengine/test10/interleave-pseudo-stop.summary
@@ -16,9 +16,8 @@ Online: [ node2 ]
      configstoreclone	(ocf::heartbeat:Filesystem):	Started node1 (UNCLEAN)
      Started: [ node2 ]
 
-  notice: Fencing   node1: node is unclean
 Transition Summary:
- * Fence (reboot) node1
+ * Fence (reboot) node1 'peer is no longer part of the cluster'
  * Stop    stonithclone:1	(node1)
  * Stop    evmsclone:1	(node1)
  * Stop    imagestoreclone:1	(node1)
@@ -29,7 +28,6 @@ Executing cluster transition:
  * Pseudo action:   imagestorecloneset_pre_notify_stop_0
  * Pseudo action:   configstorecloneset_pre_notify_stop_0
  * Fencing node1 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   stonithcloneset_stop_0
  * Resource action: evmsclone:1     notify on node2
  * Pseudo action:   evmsclone:0_post_notify_stop_0
@@ -42,6 +40,7 @@ Executing cluster transition:
  * Pseudo action:   configstoreclone:0_post_notify_stop_0
  * Pseudo action:   configstorecloneset_confirmed-pre_notify_stop_0
  * Pseudo action:   configstorecloneset_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   stonithclone:0_stop_0
  * Pseudo action:   stonithcloneset_stopped_0
  * Pseudo action:   imagestoreclone:0_stop_0
diff --git a/pengine/test10/master-7.exp b/pengine/test10/master-7.exp
index be05853..971949d 100644
--- a/pengine/test10/master-7.exp
+++ b/pengine/test10/master-7.exp
@@ -1,69 +1,69 @@
 <transition_graph cluster-delay="3m" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="33" operation="monitor" operation_key="DcIPaddr_monitor_5000" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="34" operation="monitor" operation_key="DcIPaddr_monitor_5000" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="DcIPaddr" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="20000"  ip="192.168.100.180"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="32" operation="start" operation_key="DcIPaddr_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="33" operation="start" operation_key="DcIPaddr_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="32" operation="start" operation_key="DcIPaddr_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="33" operation="start" operation_key="DcIPaddr_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="DcIPaddr" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="40000"  ip="192.168.100.180"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="31" operation="stop" operation_key="DcIPaddr_stop_0"/>
+        <pseudo_event id="32" operation="stop" operation_key="DcIPaddr_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="94" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="31" operation="stop" operation_key="DcIPaddr_stop_0">
+      <pseudo_event id="32" operation="stop" operation_key="DcIPaddr_stop_0">
         <attributes CRM_meta_timeout="20000"  ip="192.168.100.180"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="94" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="46" operation="stopped" operation_key="group-1_stopped_0">
+      <pseudo_event id="47" operation="stopped" operation_key="group-1_stopped_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="34" operation="stop" operation_key="ocf_192.168.100.181_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="35" operation="stop" operation_key="ocf_192.168.100.181_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <rsc_op id="37" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="38" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <rsc_op id="40" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="41" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="stop" operation_key="group-1_stop_0"/>
+        <pseudo_event id="46" operation="stop" operation_key="group-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="45" operation="stop" operation_key="group-1_stop_0">
+      <pseudo_event id="46" operation="stop" operation_key="group-1_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -71,88 +71,88 @@
   </synapse>
   <synapse id="5">
     <action_set>
-      <pseudo_event id="44" operation="running" operation_key="group-1_running_0">
+      <pseudo_event id="45" operation="running" operation_key="group-1_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="36" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="39" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <rsc_op id="41" operation="start" operation_key="ocf_192.168.100.183_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="42" operation="start" operation_key="ocf_192.168.100.183_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <pseudo_event id="43" operation="start" operation_key="group-1_start_0"/>
+        <pseudo_event id="44" operation="start" operation_key="group-1_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="43" operation="start" operation_key="group-1_start_0">
+      <pseudo_event id="44" operation="start" operation_key="group-1_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="46" operation="stopped" operation_key="group-1_stopped_0"/>
+        <pseudo_event id="47" operation="stopped" operation_key="group-1_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <rsc_op id="36" operation="monitor" operation_key="ocf_192.168.100.181_monitor_5000" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="37" operation="monitor" operation_key="ocf_192.168.100.181_monitor_5000" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="ocf_192.168.100.181" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_timeout="20000"  ip="192.168.100.181"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="36" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <rsc_op id="35" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="36" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="ocf_192.168.100.181" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_timeout="20000"  ip="192.168.100.181"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="34" operation="stop" operation_key="ocf_192.168.100.181_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="35" operation="stop" operation_key="ocf_192.168.100.181_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <pseudo_event id="43" operation="start" operation_key="group-1_start_0"/>
+        <pseudo_event id="44" operation="start" operation_key="group-1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="94" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <rsc_op id="34" operation="stop" operation_key="ocf_192.168.100.181_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="35" operation="stop" operation_key="ocf_192.168.100.181_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="ocf_192.168.100.181" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="20000"  ip="192.168.100.181"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="38" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="stop" operation_key="group-1_stop_0"/>
+        <pseudo_event id="46" operation="stop" operation_key="group-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="39" operation="monitor" operation_key="heartbeat_192.168.100.182_monitor_5000" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="40" operation="monitor" operation_key="heartbeat_192.168.100.182_monitor_5000" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="heartbeat_192.168.100.182" class="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_timeout="20000" >
           <param name="1" value="192.168.100.182"/>
@@ -161,13 +161,13 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="39" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="38" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="39" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="heartbeat_192.168.100.182" class="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_timeout="20000" >
           <param name="1" value="192.168.100.182"/>
@@ -176,22 +176,22 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="36" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <rsc_op id="37" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="38" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <pseudo_event id="43" operation="start" operation_key="group-1_start_0"/>
+        <pseudo_event id="44" operation="start" operation_key="group-1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="94" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <rsc_op id="37" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="38" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="heartbeat_192.168.100.182" class="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="20000" >
           <param name="1" value="192.168.100.182"/>
@@ -200,93 +200,93 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="40" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="41" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="stop" operation_key="group-1_stop_0"/>
+        <pseudo_event id="46" operation="stop" operation_key="group-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13">
     <action_set>
-      <rsc_op id="42" operation="monitor" operation_key="ocf_192.168.100.183_monitor_5000" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="43" operation="monitor" operation_key="ocf_192.168.100.183_monitor_5000" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="ocf_192.168.100.183" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_timeout="20000"  ip="192.168.100.183"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="41" operation="start" operation_key="ocf_192.168.100.183_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="42" operation="start" operation_key="ocf_192.168.100.183_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <rsc_op id="41" operation="start" operation_key="ocf_192.168.100.183_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="42" operation="start" operation_key="ocf_192.168.100.183_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="ocf_192.168.100.183" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_timeout="20000"  ip="192.168.100.183"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="39" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <rsc_op id="40" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="41" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <pseudo_event id="43" operation="start" operation_key="group-1_start_0"/>
+        <pseudo_event id="44" operation="start" operation_key="group-1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="94" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15">
     <action_set>
-      <rsc_op id="40" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="41" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="ocf_192.168.100.183" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="20000"  ip="192.168.100.183"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="45" operation="stop" operation_key="group-1_stop_0"/>
+        <pseudo_event id="46" operation="stop" operation_key="group-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="16">
     <action_set>
-      <rsc_op id="49" operation="monitor" operation_key="lsb_dummy_monitor_5000" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
+      <rsc_op id="50" operation="monitor" operation_key="lsb_dummy_monitor_5000" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
         <primitive id="lsb_dummy" class="lsb" type="/usr/lib/heartbeat/cts/LSBDummy"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="c001n08" CRM_meta_on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="48" operation="start" operation_key="lsb_dummy_start_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b"/>
+        <rsc_op id="49" operation="start" operation_key="lsb_dummy_start_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="17">
     <action_set>
-      <rsc_op id="48" operation="start" operation_key="lsb_dummy_start_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
+      <rsc_op id="49" operation="start" operation_key="lsb_dummy_start_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
         <primitive id="lsb_dummy" class="lsb" type="/usr/lib/heartbeat/cts/LSBDummy"/>
         <attributes CRM_meta_on_node="c001n08" CRM_meta_on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="47" operation="stop" operation_key="lsb_dummy_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="48" operation="stop" operation_key="lsb_dummy_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="94" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="18">
     <action_set>
-      <rsc_op id="47" operation="stop" operation_key="lsb_dummy_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="48" operation="stop" operation_key="lsb_dummy_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="lsb_dummy" class="lsb" type="/usr/lib/heartbeat/cts/LSBDummy"/>
         <attributes CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -295,63 +295,63 @@
   </synapse>
   <synapse id="19">
     <action_set>
-      <rsc_op id="52" operation="monitor" operation_key="rsc_c001n01_monitor_5000" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="53" operation="monitor" operation_key="rsc_c001n01_monitor_5000" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="rsc_c001n01" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="20000"  ip="192.168.100.184"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="51" operation="start" operation_key="rsc_c001n01_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="52" operation="start" operation_key="rsc_c001n01_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="20">
     <action_set>
-      <rsc_op id="51" operation="start" operation_key="rsc_c001n01_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="52" operation="start" operation_key="rsc_c001n01_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="rsc_c001n01" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="40000"  ip="192.168.100.184"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="50" operation="stop" operation_key="rsc_c001n01_stop_0"/>
+        <pseudo_event id="51" operation="stop" operation_key="rsc_c001n01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="94" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21">
     <action_set>
-      <pseudo_event id="50" operation="stop" operation_key="rsc_c001n01_stop_0">
+      <pseudo_event id="51" operation="stop" operation_key="rsc_c001n01_stop_0">
         <attributes CRM_meta_timeout="20000"  ip="192.168.100.184"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="94" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="22">
     <action_set>
-      <pseudo_event id="59" operation="stop" operation_key="child_DoFencing:0_stop_0">
+      <pseudo_event id="60" operation="stop" operation_key="child_DoFencing:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_timeout="20000"  hostlist="c001n01 c001n08 c001n02 c001n03 "/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="68" operation="stop" operation_key="DoFencing_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
       <trigger>
-        <crm_event id="94" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <pseudo_event id="69" operation="stop" operation_key="DoFencing_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="23">
     <action_set>
-      <rsc_op id="27" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
+      <rsc_op id="28" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
         <primitive id="child_DoFencing:2" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n08" CRM_meta_on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b" CRM_meta_op_target_rc="7" CRM_meta_timeout="40000"  hostlist="c001n01 c001n08 c001n02 c001n03 "/>
       </rsc_op>
@@ -360,7 +360,7 @@
   </synapse>
   <synapse id="24">
     <action_set>
-      <rsc_op id="22" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="23" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="child_DoFencing:2" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="40000"  hostlist="c001n01 c001n08 c001n02 c001n03 "/>
       </rsc_op>
@@ -369,7 +369,7 @@
   </synapse>
   <synapse id="25">
     <action_set>
-      <rsc_op id="23" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="24" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="child_DoFencing:3" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="40000"  hostlist="c001n01 c001n08 c001n02 c001n03 "/>
       </rsc_op>
@@ -378,7 +378,7 @@
   </synapse>
   <synapse id="26">
     <action_set>
-      <rsc_op id="18" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="19" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="child_DoFencing:3" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_op_target_rc="7" CRM_meta_timeout="40000"  hostlist="c001n01 c001n08 c001n02 c001n03 "/>
       </rsc_op>
@@ -387,91 +387,91 @@
   </synapse>
   <synapse id="27" priority="1000000">
     <action_set>
-      <pseudo_event id="69" operation="stopped" operation_key="DoFencing_stopped_0">
+      <pseudo_event id="70" operation="stopped" operation_key="DoFencing_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="59" operation="stop" operation_key="child_DoFencing:0_stop_0"/>
+        <pseudo_event id="60" operation="stop" operation_key="child_DoFencing:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="68" operation="stop" operation_key="DoFencing_stop_0"/>
+        <pseudo_event id="69" operation="stop" operation_key="DoFencing_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="28">
     <action_set>
-      <pseudo_event id="68" operation="stop" operation_key="DoFencing_stop_0">
+      <pseudo_event id="69" operation="stop" operation_key="DoFencing_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="94" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="29">
     <action_set>
-      <pseudo_event id="71" operation="stop" operation_key="ocf_msdummy:0_stop_0">
+      <pseudo_event id="72" operation="stop" operation_key="ocf_msdummy:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000"  logfile="/var/log/cts_ocfdummy.log"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="70" operation="demote" operation_key="ocf_msdummy:0_demote_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="87" operation="stop" operation_key="master_rsc_1_stop_0"/>
+        <pseudo_event id="71" operation="demote" operation_key="ocf_msdummy:0_demote_0"/>
       </trigger>
       <trigger>
-        <crm_event id="94" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <pseudo_event id="88" operation="stop" operation_key="master_rsc_1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="30">
     <action_set>
-      <pseudo_event id="70" operation="demote" operation_key="ocf_msdummy:0_demote_0">
+      <pseudo_event id="71" operation="demote" operation_key="ocf_msdummy:0_demote_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000"  logfile="/var/log/cts_ocfdummy.log"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="91" operation="demote" operation_key="master_rsc_1_demote_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
       <trigger>
-        <crm_event id="94" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <pseudo_event id="92" operation="demote" operation_key="master_rsc_1_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="31">
     <action_set>
-      <pseudo_event id="78" operation="stop" operation_key="ocf_msdummy:4_stop_0">
+      <pseudo_event id="79" operation="stop" operation_key="ocf_msdummy:4_stop_0">
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000"  logfile="/var/log/cts_ocfdummy.log"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="19" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
       <trigger>
-        <rsc_op id="24" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="20" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <rsc_op id="28" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b"/>
+        <rsc_op id="25" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <pseudo_event id="87" operation="stop" operation_key="master_rsc_1_stop_0"/>
+        <rsc_op id="29" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b"/>
       </trigger>
       <trigger>
-        <crm_event id="94" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <pseudo_event id="88" operation="stop" operation_key="master_rsc_1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="32">
     <action_set>
-      <rsc_op id="28" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
+      <rsc_op id="29" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
         <primitive id="ocf_msdummy:4" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n08" CRM_meta_on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b" CRM_meta_op_target_rc="7" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
@@ -480,7 +480,7 @@
   </synapse>
   <synapse id="33">
     <action_set>
-      <rsc_op id="24" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="25" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="ocf_msdummy:4" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
@@ -489,7 +489,7 @@
   </synapse>
   <synapse id="34">
     <action_set>
-      <rsc_op id="19" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="20" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="ocf_msdummy:4" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_op_target_rc="7" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
@@ -498,7 +498,7 @@
   </synapse>
   <synapse id="35">
     <action_set>
-      <rsc_op id="29" operation="monitor" operation_key="ocf_msdummy:5_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
+      <rsc_op id="30" operation="monitor" operation_key="ocf_msdummy:5_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
         <primitive id="ocf_msdummy:5" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="5" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n08" CRM_meta_on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b" CRM_meta_op_target_rc="7" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
@@ -507,7 +507,7 @@
   </synapse>
   <synapse id="36">
     <action_set>
-      <rsc_op id="20" operation="monitor" operation_key="ocf_msdummy:5_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="21" operation="monitor" operation_key="ocf_msdummy:5_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="ocf_msdummy:5" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="5" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_op_target_rc="7" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
@@ -516,7 +516,7 @@
   </synapse>
   <synapse id="37">
     <action_set>
-      <rsc_op id="30" operation="monitor" operation_key="ocf_msdummy:6_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
+      <rsc_op id="31" operation="monitor" operation_key="ocf_msdummy:6_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
         <primitive id="ocf_msdummy:6" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="6" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n08" CRM_meta_on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b" CRM_meta_op_target_rc="7" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
@@ -525,7 +525,7 @@
   </synapse>
   <synapse id="38">
     <action_set>
-      <rsc_op id="25" operation="monitor" operation_key="ocf_msdummy:6_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="26" operation="monitor" operation_key="ocf_msdummy:6_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="ocf_msdummy:6" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="6" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
@@ -534,7 +534,7 @@
   </synapse>
   <synapse id="39">
     <action_set>
-      <rsc_op id="26" operation="monitor" operation_key="ocf_msdummy:7_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="27" operation="monitor" operation_key="ocf_msdummy:7_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="ocf_msdummy:7" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="7" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
@@ -543,7 +543,7 @@
   </synapse>
   <synapse id="40">
     <action_set>
-      <rsc_op id="21" operation="monitor" operation_key="ocf_msdummy:7_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="22" operation="monitor" operation_key="ocf_msdummy:7_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="ocf_msdummy:7" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="7" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_op_target_rc="7" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
@@ -552,22 +552,22 @@
   </synapse>
   <synapse id="41" priority="1000000">
     <action_set>
-      <pseudo_event id="92" operation="demoted" operation_key="master_rsc_1_demoted_0">
+      <pseudo_event id="93" operation="demoted" operation_key="master_rsc_1_demoted_0">
         <attributes CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="70" operation="demote" operation_key="ocf_msdummy:0_demote_0"/>
+        <pseudo_event id="71" operation="demote" operation_key="ocf_msdummy:0_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="91" operation="demote" operation_key="master_rsc_1_demote_0"/>
+        <pseudo_event id="92" operation="demote" operation_key="master_rsc_1_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="42">
     <action_set>
-      <pseudo_event id="91" operation="demote" operation_key="master_rsc_1_demote_0">
+      <pseudo_event id="92" operation="demote" operation_key="master_rsc_1_demote_0">
         <attributes CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -575,98 +575,97 @@
   </synapse>
   <synapse id="43" priority="1000000">
     <action_set>
-      <pseudo_event id="88" operation="stopped" operation_key="master_rsc_1_stopped_0">
+      <pseudo_event id="89" operation="stopped" operation_key="master_rsc_1_stopped_0">
         <attributes CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="71" operation="stop" operation_key="ocf_msdummy:0_stop_0"/>
+        <pseudo_event id="72" operation="stop" operation_key="ocf_msdummy:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="78" operation="stop" operation_key="ocf_msdummy:4_stop_0"/>
+        <pseudo_event id="79" operation="stop" operation_key="ocf_msdummy:4_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="87" operation="stop" operation_key="master_rsc_1_stop_0"/>
+        <pseudo_event id="88" operation="stop" operation_key="master_rsc_1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="44">
     <action_set>
-      <pseudo_event id="87" operation="stop" operation_key="master_rsc_1_stop_0">
+      <pseudo_event id="88" operation="stop" operation_key="master_rsc_1_stop_0">
         <attributes CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="92" operation="demoted" operation_key="master_rsc_1_demoted_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
       <trigger>
-        <crm_event id="94" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <pseudo_event id="93" operation="demoted" operation_key="master_rsc_1_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="45">
     <action_set>
-      <crm_event id="94" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
-        <attributes CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="46">
-    <action_set>
-      <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="94" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="94" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="47">
+  <synapse id="46">
     <action_set>
-      <pseudo_event id="17" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="18" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="31" operation="stop" operation_key="DcIPaddr_stop_0"/>
+        <pseudo_event id="32" operation="stop" operation_key="DcIPaddr_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="34" operation="stop" operation_key="ocf_192.168.100.181_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="35" operation="stop" operation_key="ocf_192.168.100.181_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <rsc_op id="37" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="38" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <rsc_op id="40" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="41" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <rsc_op id="47" operation="stop" operation_key="lsb_dummy_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="48" operation="stop" operation_key="lsb_dummy_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <pseudo_event id="50" operation="stop" operation_key="rsc_c001n01_stop_0"/>
+        <pseudo_event id="51" operation="stop" operation_key="rsc_c001n01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="59" operation="stop" operation_key="child_DoFencing:0_stop_0"/>
+        <pseudo_event id="60" operation="stop" operation_key="child_DoFencing:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="71" operation="stop" operation_key="ocf_msdummy:0_stop_0"/>
+        <pseudo_event id="72" operation="stop" operation_key="ocf_msdummy:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="78" operation="stop" operation_key="ocf_msdummy:4_stop_0"/>
+        <pseudo_event id="79" operation="stop" operation_key="ocf_msdummy:4_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="94" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="47">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+        <attributes CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/master-7.scores b/pengine/test10/master-7.scores
index 7569625..37fc6cd 100644
--- a/pengine/test10/master-7.scores
+++ b/pengine/test10/master-7.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   c001n01: node is unclean
 Allocation scores:
 clone_color: DoFencing allocation score on c001n01: 0
 clone_color: DoFencing allocation score on c001n02: 0
diff --git a/pengine/test10/master-7.summary b/pengine/test10/master-7.summary
index d76051e..4c58184 100644
--- a/pengine/test10/master-7.summary
+++ b/pengine/test10/master-7.summary
@@ -28,9 +28,8 @@ Online: [ c001n02 c001n03 c001n08 ]
      ocf_msdummy:6	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n02 
      ocf_msdummy:7	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n08 
 
-  notice: Fencing   c001n01: node is unclean
 Transition Summary:
- * Fence (reboot) c001n01
+ * Fence (reboot) c001n01 'peer is no longer part of the cluster'
  * Move    DcIPaddr	(Started c001n01 -> c001n03)
  * Move    ocf_192.168.100.181	(Started c001n03 -> c001n02)
  * Move    heartbeat_192.168.100.182	(Started c001n03 -> c001n02)
@@ -60,18 +59,17 @@ Executing cluster transition:
  * Resource action: ocf_msdummy:7   monitor on c001n02
  * Pseudo action:   master_rsc_1_demote_0
  * Fencing c001n01 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   DcIPaddr_stop_0
  * Resource action: heartbeat_192.168.100.182 stop on c001n03
- * Resource action: lsb_dummy       start on c001n08
  * Pseudo action:   rsc_c001n01_stop_0
  * Pseudo action:   DoFencing_stop_0
  * Pseudo action:   ocf_msdummy:0_demote_0
  * Pseudo action:   master_rsc_1_demoted_0
  * Pseudo action:   master_rsc_1_stop_0
+ * Pseudo action:   stonith_complete
  * Resource action: DcIPaddr        start on c001n03
  * Resource action: ocf_192.168.100.181 stop on c001n03
- * Resource action: lsb_dummy       monitor=5000 on c001n08
+ * Resource action: lsb_dummy       start on c001n08
  * Resource action: rsc_c001n01     start on c001n03
  * Pseudo action:   child_DoFencing:0_stop_0
  * Pseudo action:   DoFencing_stopped_0
@@ -85,6 +83,7 @@ Executing cluster transition:
  * Resource action: ocf_192.168.100.181 start on c001n02
  * Resource action: heartbeat_192.168.100.182 start on c001n02
  * Resource action: ocf_192.168.100.183 start on c001n02
+ * Resource action: lsb_dummy       monitor=5000 on c001n08
  * Resource action: rsc_c001n01     monitor=5000 on c001n03
  * Pseudo action:   group-1_running_0
  * Resource action: ocf_192.168.100.181 monitor=5000 on c001n02
diff --git a/pengine/test10/master-8.exp b/pengine/test10/master-8.exp
index 6843922..e680354 100644
--- a/pengine/test10/master-8.exp
+++ b/pengine/test10/master-8.exp
@@ -1,69 +1,69 @@
 <transition_graph cluster-delay="3m" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="33" operation="monitor" operation_key="DcIPaddr_monitor_5000" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="34" operation="monitor" operation_key="DcIPaddr_monitor_5000" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="DcIPaddr" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="20000"  ip="192.168.100.180"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="32" operation="start" operation_key="DcIPaddr_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="33" operation="start" operation_key="DcIPaddr_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="32" operation="start" operation_key="DcIPaddr_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="33" operation="start" operation_key="DcIPaddr_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="DcIPaddr" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="40000"  ip="192.168.100.180"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="31" operation="stop" operation_key="DcIPaddr_stop_0"/>
+        <pseudo_event id="32" operation="stop" operation_key="DcIPaddr_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="92" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="31" operation="stop" operation_key="DcIPaddr_stop_0">
+      <pseudo_event id="32" operation="stop" operation_key="DcIPaddr_stop_0">
         <attributes CRM_meta_timeout="20000"  ip="192.168.100.180"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="46" operation="stopped" operation_key="group-1_stopped_0">
+      <pseudo_event id="47" operation="stopped" operation_key="group-1_stopped_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="34" operation="stop" operation_key="ocf_192.168.100.181_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="35" operation="stop" operation_key="ocf_192.168.100.181_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <rsc_op id="37" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="38" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <rsc_op id="40" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="41" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="stop" operation_key="group-1_stop_0"/>
+        <pseudo_event id="46" operation="stop" operation_key="group-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="45" operation="stop" operation_key="group-1_stop_0">
+      <pseudo_event id="46" operation="stop" operation_key="group-1_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -71,88 +71,88 @@
   </synapse>
   <synapse id="5">
     <action_set>
-      <pseudo_event id="44" operation="running" operation_key="group-1_running_0">
+      <pseudo_event id="45" operation="running" operation_key="group-1_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="36" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="39" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <rsc_op id="41" operation="start" operation_key="ocf_192.168.100.183_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="42" operation="start" operation_key="ocf_192.168.100.183_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <pseudo_event id="43" operation="start" operation_key="group-1_start_0"/>
+        <pseudo_event id="44" operation="start" operation_key="group-1_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="43" operation="start" operation_key="group-1_start_0">
+      <pseudo_event id="44" operation="start" operation_key="group-1_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="46" operation="stopped" operation_key="group-1_stopped_0"/>
+        <pseudo_event id="47" operation="stopped" operation_key="group-1_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <rsc_op id="36" operation="monitor" operation_key="ocf_192.168.100.181_monitor_5000" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="37" operation="monitor" operation_key="ocf_192.168.100.181_monitor_5000" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="ocf_192.168.100.181" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_timeout="20000"  ip="192.168.100.181"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="36" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <rsc_op id="35" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="36" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="ocf_192.168.100.181" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_timeout="20000"  ip="192.168.100.181"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="34" operation="stop" operation_key="ocf_192.168.100.181_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="35" operation="stop" operation_key="ocf_192.168.100.181_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <pseudo_event id="43" operation="start" operation_key="group-1_start_0"/>
+        <pseudo_event id="44" operation="start" operation_key="group-1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="92" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <rsc_op id="34" operation="stop" operation_key="ocf_192.168.100.181_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="35" operation="stop" operation_key="ocf_192.168.100.181_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="ocf_192.168.100.181" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="20000"  ip="192.168.100.181"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="38" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="stop" operation_key="group-1_stop_0"/>
+        <pseudo_event id="46" operation="stop" operation_key="group-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="39" operation="monitor" operation_key="heartbeat_192.168.100.182_monitor_5000" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="40" operation="monitor" operation_key="heartbeat_192.168.100.182_monitor_5000" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="heartbeat_192.168.100.182" class="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_timeout="20000" >
           <param name="1" value="192.168.100.182"/>
@@ -161,13 +161,13 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="39" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="38" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="39" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="heartbeat_192.168.100.182" class="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_timeout="20000" >
           <param name="1" value="192.168.100.182"/>
@@ -176,22 +176,22 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="36" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <rsc_op id="37" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="38" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <pseudo_event id="43" operation="start" operation_key="group-1_start_0"/>
+        <pseudo_event id="44" operation="start" operation_key="group-1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="92" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <rsc_op id="37" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="38" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="heartbeat_192.168.100.182" class="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="20000" >
           <param name="1" value="192.168.100.182"/>
@@ -200,93 +200,93 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="40" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="41" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="stop" operation_key="group-1_stop_0"/>
+        <pseudo_event id="46" operation="stop" operation_key="group-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13">
     <action_set>
-      <rsc_op id="42" operation="monitor" operation_key="ocf_192.168.100.183_monitor_5000" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="43" operation="monitor" operation_key="ocf_192.168.100.183_monitor_5000" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="ocf_192.168.100.183" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_timeout="20000"  ip="192.168.100.183"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="41" operation="start" operation_key="ocf_192.168.100.183_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="42" operation="start" operation_key="ocf_192.168.100.183_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <rsc_op id="41" operation="start" operation_key="ocf_192.168.100.183_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="42" operation="start" operation_key="ocf_192.168.100.183_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="ocf_192.168.100.183" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_timeout="20000"  ip="192.168.100.183"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="39" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <rsc_op id="40" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="41" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <pseudo_event id="43" operation="start" operation_key="group-1_start_0"/>
+        <pseudo_event id="44" operation="start" operation_key="group-1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="92" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15">
     <action_set>
-      <rsc_op id="40" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="41" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="ocf_192.168.100.183" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="20000"  ip="192.168.100.183"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="45" operation="stop" operation_key="group-1_stop_0"/>
+        <pseudo_event id="46" operation="stop" operation_key="group-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="16">
     <action_set>
-      <rsc_op id="49" operation="monitor" operation_key="lsb_dummy_monitor_5000" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
+      <rsc_op id="50" operation="monitor" operation_key="lsb_dummy_monitor_5000" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
         <primitive id="lsb_dummy" class="lsb" type="/usr/lib/heartbeat/cts/LSBDummy"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="c001n08" CRM_meta_on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="48" operation="start" operation_key="lsb_dummy_start_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b"/>
+        <rsc_op id="49" operation="start" operation_key="lsb_dummy_start_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="17">
     <action_set>
-      <rsc_op id="48" operation="start" operation_key="lsb_dummy_start_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
+      <rsc_op id="49" operation="start" operation_key="lsb_dummy_start_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
         <primitive id="lsb_dummy" class="lsb" type="/usr/lib/heartbeat/cts/LSBDummy"/>
         <attributes CRM_meta_on_node="c001n08" CRM_meta_on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="47" operation="stop" operation_key="lsb_dummy_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="48" operation="stop" operation_key="lsb_dummy_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <pseudo_event id="92" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="18">
     <action_set>
-      <rsc_op id="47" operation="stop" operation_key="lsb_dummy_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="48" operation="stop" operation_key="lsb_dummy_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="lsb_dummy" class="lsb" type="/usr/lib/heartbeat/cts/LSBDummy"/>
         <attributes CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -295,63 +295,63 @@
   </synapse>
   <synapse id="19">
     <action_set>
-      <rsc_op id="52" operation="monitor" operation_key="rsc_c001n01_monitor_5000" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="53" operation="monitor" operation_key="rsc_c001n01_monitor_5000" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="rsc_c001n01" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="20000"  ip="192.168.100.184"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="51" operation="start" operation_key="rsc_c001n01_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="52" operation="start" operation_key="rsc_c001n01_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="20">
     <action_set>
-      <rsc_op id="51" operation="start" operation_key="rsc_c001n01_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="52" operation="start" operation_key="rsc_c001n01_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="rsc_c001n01" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="40000"  ip="192.168.100.184"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="50" operation="stop" operation_key="rsc_c001n01_stop_0"/>
+        <pseudo_event id="51" operation="stop" operation_key="rsc_c001n01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="92" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21">
     <action_set>
-      <pseudo_event id="50" operation="stop" operation_key="rsc_c001n01_stop_0">
+      <pseudo_event id="51" operation="stop" operation_key="rsc_c001n01_stop_0">
         <attributes CRM_meta_timeout="20000"  ip="192.168.100.184"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="22">
     <action_set>
-      <pseudo_event id="59" operation="stop" operation_key="child_DoFencing:0_stop_0">
+      <pseudo_event id="60" operation="stop" operation_key="child_DoFencing:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_timeout="20000"  hostlist="c001n01 c001n08 c001n02 c001n03 "/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="68" operation="stop" operation_key="DoFencing_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <pseudo_event id="69" operation="stop" operation_key="DoFencing_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="23">
     <action_set>
-      <rsc_op id="27" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
+      <rsc_op id="28" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
         <primitive id="child_DoFencing:2" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n08" CRM_meta_on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b" CRM_meta_op_target_rc="7" CRM_meta_timeout="40000"  hostlist="c001n01 c001n08 c001n02 c001n03 "/>
       </rsc_op>
@@ -360,7 +360,7 @@
   </synapse>
   <synapse id="24">
     <action_set>
-      <rsc_op id="21" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="22" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="child_DoFencing:2" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="40000"  hostlist="c001n01 c001n08 c001n02 c001n03 "/>
       </rsc_op>
@@ -369,7 +369,7 @@
   </synapse>
   <synapse id="25">
     <action_set>
-      <rsc_op id="22" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="23" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="child_DoFencing:3" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="40000"  hostlist="c001n01 c001n08 c001n02 c001n03 "/>
       </rsc_op>
@@ -378,7 +378,7 @@
   </synapse>
   <synapse id="26">
     <action_set>
-      <rsc_op id="17" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="18" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="child_DoFencing:3" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_op_target_rc="7" CRM_meta_timeout="40000"  hostlist="c001n01 c001n08 c001n02 c001n03 "/>
       </rsc_op>
@@ -387,102 +387,102 @@
   </synapse>
   <synapse id="27" priority="1000000">
     <action_set>
-      <pseudo_event id="69" operation="stopped" operation_key="DoFencing_stopped_0">
+      <pseudo_event id="70" operation="stopped" operation_key="DoFencing_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="59" operation="stop" operation_key="child_DoFencing:0_stop_0"/>
+        <pseudo_event id="60" operation="stop" operation_key="child_DoFencing:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="68" operation="stop" operation_key="DoFencing_stop_0"/>
+        <pseudo_event id="69" operation="stop" operation_key="DoFencing_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="28">
     <action_set>
-      <pseudo_event id="68" operation="stop" operation_key="DoFencing_stop_0">
+      <pseudo_event id="69" operation="stop" operation_key="DoFencing_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="29">
     <action_set>
-      <rsc_op id="73" operation="monitor" operation_key="ocf_msdummy:0_monitor_5000" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="74" operation="monitor" operation_key="ocf_msdummy:0_monitor_5000" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="ocf_msdummy:0" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_interval="5000" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="70" operation="demote" operation_key="ocf_msdummy:0_demote_0"/>
+        <pseudo_event id="71" operation="demote" operation_key="ocf_msdummy:0_demote_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="72" operation="start" operation_key="ocf_msdummy:0_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="73" operation="start" operation_key="ocf_msdummy:0_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="30">
     <action_set>
-      <rsc_op id="72" operation="start" operation_key="ocf_msdummy:0_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="73" operation="start" operation_key="ocf_msdummy:0_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="ocf_msdummy:0" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_timeout="20000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="71" operation="stop" operation_key="ocf_msdummy:0_stop_0"/>
+        <pseudo_event id="72" operation="stop" operation_key="ocf_msdummy:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="84" operation="start" operation_key="master_rsc_1_start_0"/>
+        <pseudo_event id="85" operation="start" operation_key="master_rsc_1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="92" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="31">
     <action_set>
-      <pseudo_event id="71" operation="stop" operation_key="ocf_msdummy:0_stop_0">
+      <pseudo_event id="72" operation="stop" operation_key="ocf_msdummy:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000"  logfile="/var/log/cts_ocfdummy.log"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="70" operation="demote" operation_key="ocf_msdummy:0_demote_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="86" operation="stop" operation_key="master_rsc_1_stop_0"/>
+        <pseudo_event id="71" operation="demote" operation_key="ocf_msdummy:0_demote_0"/>
       </trigger>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <pseudo_event id="87" operation="stop" operation_key="master_rsc_1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="32">
     <action_set>
-      <pseudo_event id="70" operation="demote" operation_key="ocf_msdummy:0_demote_0">
+      <pseudo_event id="71" operation="demote" operation_key="ocf_msdummy:0_demote_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000"  logfile="/var/log/cts_ocfdummy.log"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="90" operation="demote" operation_key="master_rsc_1_demote_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <pseudo_event id="91" operation="demote" operation_key="master_rsc_1_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="33">
     <action_set>
-      <rsc_op id="28" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
+      <rsc_op id="29" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
         <primitive id="ocf_msdummy:4" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n08" CRM_meta_on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b" CRM_meta_op_target_rc="7" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
@@ -491,7 +491,7 @@
   </synapse>
   <synapse id="34">
     <action_set>
-      <rsc_op id="23" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="24" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="ocf_msdummy:4" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
@@ -500,7 +500,7 @@
   </synapse>
   <synapse id="35">
     <action_set>
-      <rsc_op id="18" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="19" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="ocf_msdummy:4" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_op_target_rc="7" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
@@ -509,7 +509,7 @@
   </synapse>
   <synapse id="36">
     <action_set>
-      <rsc_op id="29" operation="monitor" operation_key="ocf_msdummy:5_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
+      <rsc_op id="30" operation="monitor" operation_key="ocf_msdummy:5_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
         <primitive id="ocf_msdummy:5" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="5" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n08" CRM_meta_on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b" CRM_meta_op_target_rc="7" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
@@ -518,7 +518,7 @@
   </synapse>
   <synapse id="37">
     <action_set>
-      <rsc_op id="24" operation="monitor" operation_key="ocf_msdummy:5_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="25" operation="monitor" operation_key="ocf_msdummy:5_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="ocf_msdummy:5" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="5" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
@@ -527,7 +527,7 @@
   </synapse>
   <synapse id="38">
     <action_set>
-      <rsc_op id="19" operation="monitor" operation_key="ocf_msdummy:5_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="20" operation="monitor" operation_key="ocf_msdummy:5_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="ocf_msdummy:5" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="5" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_op_target_rc="7" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
@@ -536,7 +536,7 @@
   </synapse>
   <synapse id="39">
     <action_set>
-      <rsc_op id="30" operation="monitor" operation_key="ocf_msdummy:6_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
+      <rsc_op id="31" operation="monitor" operation_key="ocf_msdummy:6_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b">
         <primitive id="ocf_msdummy:6" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="6" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n08" CRM_meta_on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b" CRM_meta_op_target_rc="7" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
@@ -545,7 +545,7 @@
   </synapse>
   <synapse id="40">
     <action_set>
-      <rsc_op id="25" operation="monitor" operation_key="ocf_msdummy:6_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="26" operation="monitor" operation_key="ocf_msdummy:6_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="ocf_msdummy:6" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="6" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
@@ -554,7 +554,7 @@
   </synapse>
   <synapse id="41">
     <action_set>
-      <rsc_op id="26" operation="monitor" operation_key="ocf_msdummy:7_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="27" operation="monitor" operation_key="ocf_msdummy:7_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="ocf_msdummy:7" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="7" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
@@ -563,7 +563,7 @@
   </synapse>
   <synapse id="42">
     <action_set>
-      <rsc_op id="20" operation="monitor" operation_key="ocf_msdummy:7_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
+      <rsc_op id="21" operation="monitor" operation_key="ocf_msdummy:7_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f">
         <primitive id="ocf_msdummy:7" class="ocf" provider="heartbeat" type="/usr/lib/heartbeat/cts/OCFMSDummy"/>
         <attributes CRM_meta_clone="7" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f" CRM_meta_op_target_rc="7" CRM_meta_timeout="10000"  logfile="/var/log/cts_ocfdummy.log"/>
       </rsc_op>
@@ -572,22 +572,22 @@
   </synapse>
   <synapse id="43" priority="1000000">
     <action_set>
-      <pseudo_event id="91" operation="demoted" operation_key="master_rsc_1_demoted_0">
+      <pseudo_event id="92" operation="demoted" operation_key="master_rsc_1_demoted_0">
         <attributes CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="70" operation="demote" operation_key="ocf_msdummy:0_demote_0"/>
+        <pseudo_event id="71" operation="demote" operation_key="ocf_msdummy:0_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="90" operation="demote" operation_key="master_rsc_1_demote_0"/>
+        <pseudo_event id="91" operation="demote" operation_key="master_rsc_1_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="44">
     <action_set>
-      <pseudo_event id="90" operation="demote" operation_key="master_rsc_1_demote_0">
+      <pseudo_event id="91" operation="demote" operation_key="master_rsc_1_demote_0">
         <attributes CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -595,152 +595,151 @@
   </synapse>
   <synapse id="45" priority="1000000">
     <action_set>
-      <pseudo_event id="87" operation="stopped" operation_key="master_rsc_1_stopped_0">
+      <pseudo_event id="88" operation="stopped" operation_key="master_rsc_1_stopped_0">
         <attributes CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="71" operation="stop" operation_key="ocf_msdummy:0_stop_0"/>
+        <pseudo_event id="72" operation="stop" operation_key="ocf_msdummy:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="86" operation="stop" operation_key="master_rsc_1_stop_0"/>
+        <pseudo_event id="87" operation="stop" operation_key="master_rsc_1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="46">
     <action_set>
-      <pseudo_event id="86" operation="stop" operation_key="master_rsc_1_stop_0">
+      <pseudo_event id="87" operation="stop" operation_key="master_rsc_1_stop_0">
         <attributes CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="91" operation="demoted" operation_key="master_rsc_1_demoted_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <pseudo_event id="92" operation="demoted" operation_key="master_rsc_1_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="47" priority="1000000">
     <action_set>
-      <pseudo_event id="85" operation="running" operation_key="master_rsc_1_running_0">
+      <pseudo_event id="86" operation="running" operation_key="master_rsc_1_running_0">
         <attributes CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="72" operation="start" operation_key="ocf_msdummy:0_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="73" operation="start" operation_key="ocf_msdummy:0_start_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <pseudo_event id="84" operation="start" operation_key="master_rsc_1_start_0"/>
+        <pseudo_event id="85" operation="start" operation_key="master_rsc_1_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="48">
     <action_set>
-      <pseudo_event id="84" operation="start" operation_key="master_rsc_1_start_0">
+      <pseudo_event id="85" operation="start" operation_key="master_rsc_1_start_0">
         <attributes CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="18" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="19" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <rsc_op id="19" operation="monitor" operation_key="ocf_msdummy:5_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="20" operation="monitor" operation_key="ocf_msdummy:5_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <rsc_op id="20" operation="monitor" operation_key="ocf_msdummy:7_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="21" operation="monitor" operation_key="ocf_msdummy:7_monitor_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <rsc_op id="23" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="24" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <rsc_op id="24" operation="monitor" operation_key="ocf_msdummy:5_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="25" operation="monitor" operation_key="ocf_msdummy:5_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <rsc_op id="25" operation="monitor" operation_key="ocf_msdummy:6_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="26" operation="monitor" operation_key="ocf_msdummy:6_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <rsc_op id="26" operation="monitor" operation_key="ocf_msdummy:7_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="27" operation="monitor" operation_key="ocf_msdummy:7_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <rsc_op id="28" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b"/>
+        <rsc_op id="29" operation="monitor" operation_key="ocf_msdummy:4_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b"/>
       </trigger>
       <trigger>
-        <rsc_op id="29" operation="monitor" operation_key="ocf_msdummy:5_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b"/>
+        <rsc_op id="30" operation="monitor" operation_key="ocf_msdummy:5_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b"/>
       </trigger>
       <trigger>
-        <rsc_op id="30" operation="monitor" operation_key="ocf_msdummy:6_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b"/>
+        <rsc_op id="31" operation="monitor" operation_key="ocf_msdummy:6_monitor_0" on_node="c001n08" on_node_uuid="6427cb5a-c7a5-4bdf-9892-a04ce56f4e6b"/>
       </trigger>
       <trigger>
-        <pseudo_event id="87" operation="stopped" operation_key="master_rsc_1_stopped_0"/>
+        <pseudo_event id="88" operation="stopped" operation_key="master_rsc_1_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="91" operation="demoted" operation_key="master_rsc_1_demoted_0"/>
+        <pseudo_event id="92" operation="demoted" operation_key="master_rsc_1_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="49">
     <action_set>
-      <crm_event id="93" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
-        <attributes CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="50">
-    <action_set>
-      <pseudo_event id="92" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="51">
+  <synapse id="50">
     <action_set>
-      <pseudo_event id="16" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="17" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="31" operation="stop" operation_key="DcIPaddr_stop_0"/>
+        <pseudo_event id="32" operation="stop" operation_key="DcIPaddr_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="34" operation="stop" operation_key="ocf_192.168.100.181_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="35" operation="stop" operation_key="ocf_192.168.100.181_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <rsc_op id="37" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="38" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <rsc_op id="40" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
+        <rsc_op id="41" operation="stop" operation_key="ocf_192.168.100.183_stop_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193"/>
       </trigger>
       <trigger>
-        <rsc_op id="47" operation="stop" operation_key="lsb_dummy_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
+        <rsc_op id="48" operation="stop" operation_key="lsb_dummy_stop_0" on_node="c001n02" on_node_uuid="e9bdfde9-01b0-421f-acd8-8a65a53e775f"/>
       </trigger>
       <trigger>
-        <pseudo_event id="50" operation="stop" operation_key="rsc_c001n01_stop_0"/>
+        <pseudo_event id="51" operation="stop" operation_key="rsc_c001n01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="59" operation="stop" operation_key="child_DoFencing:0_stop_0"/>
+        <pseudo_event id="60" operation="stop" operation_key="child_DoFencing:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="71" operation="stop" operation_key="ocf_msdummy:0_stop_0"/>
+        <pseudo_event id="72" operation="stop" operation_key="ocf_msdummy:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="92" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="51">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-c001n01-reboot" on_node="c001n01" on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3">
+        <attributes CRM_meta_on_node="c001n01" CRM_meta_on_node_uuid="de937e3d-0309-4b5d-b85c-f96edc1ed8e3" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="de937e3d-0309-4b5d-b85c-f96edc1ed8e3"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/master-8.scores b/pengine/test10/master-8.scores
index 880d7fb..c9d1cc9 100644
--- a/pengine/test10/master-8.scores
+++ b/pengine/test10/master-8.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   c001n01: node is unclean
 Allocation scores:
 clone_color: DoFencing allocation score on c001n01: 0
 clone_color: DoFencing allocation score on c001n02: 0
diff --git a/pengine/test10/master-8.summary b/pengine/test10/master-8.summary
index 7d0b840..e8d90d2 100644
--- a/pengine/test10/master-8.summary
+++ b/pengine/test10/master-8.summary
@@ -28,9 +28,8 @@ Online: [ c001n02 c001n03 c001n08 ]
      ocf_msdummy:6	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n02 
      ocf_msdummy:7	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n08 
 
-  notice: Fencing   c001n01: node is unclean
 Transition Summary:
- * Fence (reboot) c001n01
+ * Fence (reboot) c001n01 'peer is no longer part of the cluster'
  * Move    DcIPaddr	(Started c001n01 -> c001n03)
  * Move    ocf_192.168.100.181	(Started c001n03 -> c001n02)
  * Move    heartbeat_192.168.100.182	(Started c001n03 -> c001n02)
@@ -61,18 +60,17 @@ Executing cluster transition:
  * Resource action: ocf_msdummy:7   monitor on c001n02
  * Pseudo action:   master_rsc_1_demote_0
  * Fencing c001n01 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   DcIPaddr_stop_0
  * Resource action: heartbeat_192.168.100.182 stop on c001n03
- * Resource action: lsb_dummy       start on c001n08
  * Pseudo action:   rsc_c001n01_stop_0
  * Pseudo action:   DoFencing_stop_0
  * Pseudo action:   ocf_msdummy:0_demote_0
  * Pseudo action:   master_rsc_1_demoted_0
  * Pseudo action:   master_rsc_1_stop_0
+ * Pseudo action:   stonith_complete
  * Resource action: DcIPaddr        start on c001n03
  * Resource action: ocf_192.168.100.181 stop on c001n03
- * Resource action: lsb_dummy       monitor=5000 on c001n08
+ * Resource action: lsb_dummy       start on c001n08
  * Resource action: rsc_c001n01     start on c001n03
  * Pseudo action:   child_DoFencing:0_stop_0
  * Pseudo action:   DoFencing_stopped_0
@@ -86,6 +84,7 @@ Executing cluster transition:
  * Resource action: ocf_192.168.100.181 start on c001n02
  * Resource action: heartbeat_192.168.100.182 start on c001n02
  * Resource action: ocf_192.168.100.183 start on c001n02
+ * Resource action: lsb_dummy       monitor=5000 on c001n08
  * Resource action: rsc_c001n01     monitor=5000 on c001n03
  * Resource action: ocf_msdummy:0   start on c001n03
  * Pseudo action:   master_rsc_1_running_0
diff --git a/pengine/test10/migrate-fencing.exp b/pengine/test10/migrate-fencing.exp
index a670395..5ef64d7 100644
--- a/pengine/test10/migrate-fencing.exp
+++ b/pengine/test10/migrate-fencing.exp
@@ -1,533 +1,533 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="1"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <pseudo_event id="20" operation="stop" operation_key="FencingChild:0_stop_0">
+      <pseudo_event id="21" operation="stop" operation_key="FencingChild:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="180000"  pcmk_arg_map="domain:uname"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="Fencing_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
       </trigger>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
+        <pseudo_event id="30" operation="stop" operation_key="Fencing_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1" priority="1000000">
     <action_set>
-      <pseudo_event id="30" operation="stopped" operation_key="Fencing_stopped_0">
+      <pseudo_event id="31" operation="stopped" operation_key="Fencing_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="20" operation="stop" operation_key="FencingChild:0_stop_0"/>
+        <pseudo_event id="21" operation="stop" operation_key="FencingChild:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="Fencing_stop_0"/>
+        <pseudo_event id="30" operation="stop" operation_key="Fencing_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="29" operation="stop" operation_key="Fencing_stop_0">
+      <pseudo_event id="30" operation="stop" operation_key="Fencing_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="43" operation="stopped" operation_key="group-1_stopped_0">
+      <pseudo_event id="44" operation="stopped" operation_key="group-1_stopped_0">
         <attributes CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="31" operation="stop" operation_key="r192.168.101.181_stop_0"/>
+        <pseudo_event id="32" operation="stop" operation_key="r192.168.101.181_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="34" operation="stop" operation_key="r192.168.101.182_stop_0"/>
+        <pseudo_event id="35" operation="stop" operation_key="r192.168.101.182_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="37" operation="stop" operation_key="r192.168.101.183_stop_0"/>
+        <pseudo_event id="38" operation="stop" operation_key="r192.168.101.183_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="42" operation="stop" operation_key="group-1_stop_0"/>
+        <pseudo_event id="43" operation="stop" operation_key="group-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="42" operation="stop" operation_key="group-1_stop_0">
+      <pseudo_event id="43" operation="stop" operation_key="group-1_stop_0">
         <attributes CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="53" operation="stop" operation_key="lsb-dummy_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
       </trigger>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
+        <pseudo_event id="54" operation="stop" operation_key="lsb-dummy_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <pseudo_event id="41" operation="running" operation_key="group-1_running_0">
+      <pseudo_event id="42" operation="running" operation_key="group-1_running_0">
         <attributes CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="32" operation="start" operation_key="r192.168.101.181_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
+        <rsc_op id="33" operation="start" operation_key="r192.168.101.181_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="r192.168.101.182_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
+        <rsc_op id="36" operation="start" operation_key="r192.168.101.182_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="r192.168.101.183_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
+        <rsc_op id="39" operation="start" operation_key="r192.168.101.183_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="40" operation="start" operation_key="group-1_start_0"/>
+        <pseudo_event id="41" operation="start" operation_key="group-1_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="40" operation="start" operation_key="group-1_start_0">
+      <pseudo_event id="41" operation="start" operation_key="group-1_start_0">
         <attributes CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="43" operation="stopped" operation_key="group-1_stopped_0"/>
+        <pseudo_event id="44" operation="stopped" operation_key="group-1_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="89" operation="promoted" operation_key="master-1_promoted_0"/>
+        <pseudo_event id="90" operation="promoted" operation_key="master-1_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <rsc_op id="33" operation="monitor" operation_key="r192.168.101.181_monitor_5000" on_node="pcmk-1" on_node_uuid="pcmk-1">
+      <rsc_op id="34" operation="monitor" operation_key="r192.168.101.181_monitor_5000" on_node="pcmk-1" on_node_uuid="pcmk-1">
         <primitive id="r192.168.101.181" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk-1" CRM_meta_on_node_uuid="pcmk-1" CRM_meta_timeout="60000" cidr_netmask="32"  ip="192.168.101.181"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="32" operation="start" operation_key="r192.168.101.181_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
+        <rsc_op id="33" operation="start" operation_key="r192.168.101.181_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <rsc_op id="32" operation="start" operation_key="r192.168.101.181_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1">
+      <rsc_op id="33" operation="start" operation_key="r192.168.101.181_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1">
         <primitive id="r192.168.101.181" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="pcmk-1" CRM_meta_on_node_uuid="pcmk-1" CRM_meta_timeout="60000" cidr_netmask="32"  ip="192.168.101.181"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="31" operation="stop" operation_key="r192.168.101.181_stop_0"/>
+        <pseudo_event id="32" operation="stop" operation_key="r192.168.101.181_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="40" operation="start" operation_key="group-1_start_0"/>
+        <pseudo_event id="41" operation="start" operation_key="group-1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="92" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <pseudo_event id="31" operation="stop" operation_key="r192.168.101.181_stop_0">
+      <pseudo_event id="32" operation="stop" operation_key="r192.168.101.181_stop_0">
         <attributes CRM_meta_timeout="60000" cidr_netmask="32"  ip="192.168.101.181"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="34" operation="stop" operation_key="r192.168.101.182_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
       </trigger>
       <trigger>
-        <pseudo_event id="42" operation="stop" operation_key="group-1_stop_0"/>
+        <pseudo_event id="35" operation="stop" operation_key="r192.168.101.182_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
+        <pseudo_event id="43" operation="stop" operation_key="group-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="36" operation="monitor" operation_key="r192.168.101.182_monitor_5000" on_node="pcmk-1" on_node_uuid="pcmk-1">
+      <rsc_op id="37" operation="monitor" operation_key="r192.168.101.182_monitor_5000" on_node="pcmk-1" on_node_uuid="pcmk-1">
         <primitive id="r192.168.101.182" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk-1" CRM_meta_on_node_uuid="pcmk-1" CRM_meta_timeout="60000" cidr_netmask="32"  ip="192.168.101.182"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="r192.168.101.182_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
+        <rsc_op id="36" operation="start" operation_key="r192.168.101.182_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="35" operation="start" operation_key="r192.168.101.182_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1">
+      <rsc_op id="36" operation="start" operation_key="r192.168.101.182_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1">
         <primitive id="r192.168.101.182" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="pcmk-1" CRM_meta_on_node_uuid="pcmk-1" CRM_meta_timeout="60000" cidr_netmask="32"  ip="192.168.101.182"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="32" operation="start" operation_key="r192.168.101.181_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
+        <rsc_op id="33" operation="start" operation_key="r192.168.101.181_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="34" operation="stop" operation_key="r192.168.101.182_stop_0"/>
+        <pseudo_event id="35" operation="stop" operation_key="r192.168.101.182_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="40" operation="start" operation_key="group-1_start_0"/>
+        <pseudo_event id="41" operation="start" operation_key="group-1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="92" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <pseudo_event id="34" operation="stop" operation_key="r192.168.101.182_stop_0">
+      <pseudo_event id="35" operation="stop" operation_key="r192.168.101.182_stop_0">
         <attributes CRM_meta_timeout="60000" cidr_netmask="32"  ip="192.168.101.182"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="37" operation="stop" operation_key="r192.168.101.183_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
       </trigger>
       <trigger>
-        <pseudo_event id="42" operation="stop" operation_key="group-1_stop_0"/>
+        <pseudo_event id="38" operation="stop" operation_key="r192.168.101.183_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
+        <pseudo_event id="43" operation="stop" operation_key="group-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13">
     <action_set>
-      <rsc_op id="39" operation="monitor" operation_key="r192.168.101.183_monitor_5000" on_node="pcmk-1" on_node_uuid="pcmk-1">
+      <rsc_op id="40" operation="monitor" operation_key="r192.168.101.183_monitor_5000" on_node="pcmk-1" on_node_uuid="pcmk-1">
         <primitive id="r192.168.101.183" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk-1" CRM_meta_on_node_uuid="pcmk-1" CRM_meta_timeout="60000" cidr_netmask="32"  ip="192.168.101.183"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="r192.168.101.183_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
+        <rsc_op id="39" operation="start" operation_key="r192.168.101.183_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <rsc_op id="38" operation="start" operation_key="r192.168.101.183_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1">
+      <rsc_op id="39" operation="start" operation_key="r192.168.101.183_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1">
         <primitive id="r192.168.101.183" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="pcmk-1" CRM_meta_on_node_uuid="pcmk-1" CRM_meta_timeout="60000" cidr_netmask="32"  ip="192.168.101.183"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="r192.168.101.182_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
+        <rsc_op id="36" operation="start" operation_key="r192.168.101.182_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="37" operation="stop" operation_key="r192.168.101.183_stop_0"/>
+        <pseudo_event id="38" operation="stop" operation_key="r192.168.101.183_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="40" operation="start" operation_key="group-1_start_0"/>
+        <pseudo_event id="41" operation="start" operation_key="group-1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="92" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15">
     <action_set>
-      <pseudo_event id="37" operation="stop" operation_key="r192.168.101.183_stop_0">
+      <pseudo_event id="38" operation="stop" operation_key="r192.168.101.183_stop_0">
         <attributes CRM_meta_timeout="60000" cidr_netmask="32"  ip="192.168.101.183"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="42" operation="stop" operation_key="group-1_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
       </trigger>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
+        <pseudo_event id="43" operation="stop" operation_key="group-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="16">
     <action_set>
-      <rsc_op id="52" operation="monitor" operation_key="rsc_pcmk-4_monitor_5000" on_node="pcmk-2" on_node_uuid="pcmk-2">
+      <rsc_op id="53" operation="monitor" operation_key="rsc_pcmk-4_monitor_5000" on_node="pcmk-2" on_node_uuid="pcmk-2">
         <primitive id="rsc_pcmk-4" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk-2" CRM_meta_on_node_uuid="pcmk-2" CRM_meta_timeout="60000" cidr_netmask="32"  ip="192.168.101.187"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="51" operation="start" operation_key="rsc_pcmk-4_start_0" on_node="pcmk-2" on_node_uuid="pcmk-2"/>
+        <rsc_op id="52" operation="start" operation_key="rsc_pcmk-4_start_0" on_node="pcmk-2" on_node_uuid="pcmk-2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="17">
     <action_set>
-      <rsc_op id="51" operation="start" operation_key="rsc_pcmk-4_start_0" on_node="pcmk-2" on_node_uuid="pcmk-2">
+      <rsc_op id="52" operation="start" operation_key="rsc_pcmk-4_start_0" on_node="pcmk-2" on_node_uuid="pcmk-2">
         <primitive id="rsc_pcmk-4" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="pcmk-2" CRM_meta_on_node_uuid="pcmk-2" CRM_meta_timeout="60000" cidr_netmask="32"  ip="192.168.101.187"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="50" operation="stop" operation_key="rsc_pcmk-4_stop_0"/>
+        <pseudo_event id="51" operation="stop" operation_key="rsc_pcmk-4_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="92" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="18">
     <action_set>
-      <pseudo_event id="50" operation="stop" operation_key="rsc_pcmk-4_stop_0">
+      <pseudo_event id="51" operation="stop" operation_key="rsc_pcmk-4_stop_0">
         <attributes CRM_meta_timeout="60000" cidr_netmask="32"  ip="192.168.101.187"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="19">
     <action_set>
-      <rsc_op id="55" operation="monitor" operation_key="lsb-dummy_monitor_5000" on_node="pcmk-1" on_node_uuid="pcmk-1">
+      <rsc_op id="56" operation="monitor" operation_key="lsb-dummy_monitor_5000" on_node="pcmk-1" on_node_uuid="pcmk-1">
         <primitive id="lsb-dummy" class="lsb" type="/usr/share/pacemaker/tests/cts/LSBDummy"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk-1" CRM_meta_on_node_uuid="pcmk-1" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="54" operation="start" operation_key="lsb-dummy_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
+        <rsc_op id="55" operation="start" operation_key="lsb-dummy_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="20">
     <action_set>
-      <rsc_op id="54" operation="start" operation_key="lsb-dummy_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1">
+      <rsc_op id="55" operation="start" operation_key="lsb-dummy_start_0" on_node="pcmk-1" on_node_uuid="pcmk-1">
         <primitive id="lsb-dummy" class="lsb" type="/usr/share/pacemaker/tests/cts/LSBDummy"/>
         <attributes CRM_meta_on_node="pcmk-1" CRM_meta_on_node_uuid="pcmk-1" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="41" operation="running" operation_key="group-1_running_0"/>
+        <pseudo_event id="42" operation="running" operation_key="group-1_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="53" operation="stop" operation_key="lsb-dummy_stop_0"/>
+        <pseudo_event id="54" operation="stop" operation_key="lsb-dummy_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="92" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21">
     <action_set>
-      <pseudo_event id="53" operation="stop" operation_key="lsb-dummy_stop_0">
+      <pseudo_event id="54" operation="stop" operation_key="lsb-dummy_stop_0">
         <attributes CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="22">
     <action_set>
-      <rsc_op id="60" operation="migrate_from" operation_key="migrator_migrate_from_0" on_node="pcmk-3" on_node_uuid="pcmk-3">
+      <rsc_op id="61" operation="migrate_from" operation_key="migrator_migrate_from_0" on_node="pcmk-3" on_node_uuid="pcmk-3">
         <primitive id="migrator" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_migrate_source="pcmk-1" CRM_meta_migrate_target="pcmk-3" CRM_meta_on_node="pcmk-3" CRM_meta_on_node_uuid="pcmk-3" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="59" operation="migrate_to" operation_key="migrator_migrate_to_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
+        <rsc_op id="60" operation="migrate_to" operation_key="migrator_migrate_to_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="23">
     <action_set>
-      <rsc_op id="59" operation="migrate_to" operation_key="migrator_migrate_to_0" on_node="pcmk-1" on_node_uuid="pcmk-1">
+      <rsc_op id="60" operation="migrate_to" operation_key="migrator_migrate_to_0" on_node="pcmk-1" on_node_uuid="pcmk-1">
         <primitive id="migrator" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_migrate_source="pcmk-1" CRM_meta_migrate_target="pcmk-3" CRM_meta_on_node="pcmk-1" CRM_meta_on_node_uuid="pcmk-1" CRM_meta_record_pending="true" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="92" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="24">
     <action_set>
-      <rsc_op id="58" operation="monitor" operation_key="migrator_monitor_10000" on_node="pcmk-3" on_node_uuid="pcmk-3">
+      <rsc_op id="59" operation="monitor" operation_key="migrator_monitor_10000" on_node="pcmk-3" on_node_uuid="pcmk-3">
         <primitive id="migrator" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk-3" CRM_meta_on_node_uuid="pcmk-3" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="57" operation="start" operation_key="migrator_start_0"/>
+        <pseudo_event id="58" operation="start" operation_key="migrator_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="25">
     <action_set>
-      <pseudo_event id="57" operation="start" operation_key="migrator_start_0">
+      <pseudo_event id="58" operation="start" operation_key="migrator_start_0">
         <attributes CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="56" operation="stop" operation_key="migrator_stop_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
+        <rsc_op id="57" operation="stop" operation_key="migrator_stop_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="60" operation="migrate_from" operation_key="migrator_migrate_from_0" on_node="pcmk-3" on_node_uuid="pcmk-3"/>
+        <rsc_op id="61" operation="migrate_from" operation_key="migrator_migrate_from_0" on_node="pcmk-3" on_node_uuid="pcmk-3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="92" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="26">
     <action_set>
-      <rsc_op id="56" operation="stop" operation_key="migrator_stop_0" on_node="pcmk-1" on_node_uuid="pcmk-1">
+      <rsc_op id="57" operation="stop" operation_key="migrator_stop_0" on_node="pcmk-1" on_node_uuid="pcmk-1">
         <primitive id="migrator" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_on_node="pcmk-1" CRM_meta_on_node_uuid="pcmk-1" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="60" operation="migrate_from" operation_key="migrator_migrate_from_0" on_node="pcmk-3" on_node_uuid="pcmk-3"/>
+        <rsc_op id="61" operation="migrate_from" operation_key="migrator_migrate_from_0" on_node="pcmk-3" on_node_uuid="pcmk-3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="27">
     <action_set>
-      <pseudo_event id="61" operation="stop" operation_key="ping-1:0_stop_0">
+      <pseudo_event id="62" operation="stop" operation_key="ping-1:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="60000"  debug="true" host_list="192.168.9.161" name="connected"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="70" operation="stop" operation_key="Connectivity_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
       </trigger>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
+        <pseudo_event id="71" operation="stop" operation_key="Connectivity_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="28" priority="1000000">
     <action_set>
-      <pseudo_event id="71" operation="stopped" operation_key="Connectivity_stopped_0">
+      <pseudo_event id="72" operation="stopped" operation_key="Connectivity_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="61" operation="stop" operation_key="ping-1:0_stop_0"/>
+        <pseudo_event id="62" operation="stop" operation_key="ping-1:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="70" operation="stop" operation_key="Connectivity_stop_0"/>
+        <pseudo_event id="71" operation="stop" operation_key="Connectivity_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="29">
     <action_set>
-      <pseudo_event id="70" operation="stop" operation_key="Connectivity_stop_0">
+      <pseudo_event id="71" operation="stop" operation_key="Connectivity_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="30">
     <action_set>
-      <pseudo_event id="73" operation="stop" operation_key="stateful-1:0_stop_0">
+      <pseudo_event id="74" operation="stop" operation_key="stateful-1:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="72" operation="demote" operation_key="stateful-1:0_demote_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
       </trigger>
       <trigger>
-        <pseudo_event id="86" operation="stop" operation_key="master-1_stop_0"/>
+        <pseudo_event id="73" operation="demote" operation_key="stateful-1:0_demote_0"/>
       </trigger>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
+        <pseudo_event id="87" operation="stop" operation_key="master-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="31">
     <action_set>
-      <pseudo_event id="72" operation="demote" operation_key="stateful-1:0_demote_0">
+      <pseudo_event id="73" operation="demote" operation_key="stateful-1:0_demote_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="90" operation="demote" operation_key="master-1_demote_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
       </trigger>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
+        <pseudo_event id="91" operation="demote" operation_key="master-1_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="32">
     <action_set>
-      <rsc_op id="77" operation="monitor" operation_key="stateful-1:1_monitor_16000" on_node="pcmk-1" on_node_uuid="pcmk-1">
+      <rsc_op id="78" operation="monitor" operation_key="stateful-1:1_monitor_16000" on_node="pcmk-1" on_node_uuid="pcmk-1">
         <primitive id="stateful-1" long-id="stateful-1:1" class="ocf" provider="pacemaker" type="Stateful"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="16000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="pcmk-1" CRM_meta_on_node_uuid="pcmk-1" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="76" operation="promote" operation_key="stateful-1:1_promote_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
+        <rsc_op id="77" operation="promote" operation_key="stateful-1:1_promote_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="33">
     <action_set>
-      <rsc_op id="76" operation="promote" operation_key="stateful-1:1_promote_0" on_node="pcmk-1" on_node_uuid="pcmk-1">
+      <rsc_op id="77" operation="promote" operation_key="stateful-1:1_promote_0" on_node="pcmk-1" on_node_uuid="pcmk-1">
         <primitive id="stateful-1" long-id="stateful-1:1" class="ocf" provider="pacemaker" type="Stateful"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="pcmk-1" CRM_meta_on_node_uuid="pcmk-1" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="88" operation="promote" operation_key="master-1_promote_0"/>
+        <pseudo_event id="89" operation="promote" operation_key="master-1_promote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="92" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="34">
     <action_set>
-      <rsc_op id="80" operation="monitor" operation_key="stateful-1:3_monitor_15000" internal_operation_key="stateful-1:2_monitor_15000" on_node="pcmk-3" on_node_uuid="pcmk-3">
+      <rsc_op id="81" operation="monitor" operation_key="stateful-1:3_monitor_15000" internal_operation_key="stateful-1:2_monitor_15000" on_node="pcmk-3" on_node_uuid="pcmk-3">
         <primitive id="stateful-1" long-id="stateful-1:3" class="ocf" provider="pacemaker" type="Stateful"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="15000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="pcmk-3" CRM_meta_on_node_uuid="pcmk-3" CRM_meta_timeout="60000" />
       </rsc_op>
@@ -536,7 +536,7 @@
   </synapse>
   <synapse id="35">
     <action_set>
-      <rsc_op id="83" operation="monitor" operation_key="stateful-1:2_monitor_15000" internal_operation_key="stateful-1:3_monitor_15000" on_node="pcmk-2" on_node_uuid="pcmk-2">
+      <rsc_op id="84" operation="monitor" operation_key="stateful-1:2_monitor_15000" internal_operation_key="stateful-1:3_monitor_15000" on_node="pcmk-2" on_node_uuid="pcmk-2">
         <primitive id="stateful-1" long-id="stateful-1:2" class="ocf" provider="pacemaker" type="Stateful"/>
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="15000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="pcmk-2" CRM_meta_on_node_uuid="pcmk-2" CRM_meta_timeout="60000" />
       </rsc_op>
@@ -545,149 +545,148 @@
   </synapse>
   <synapse id="36" priority="1000000">
     <action_set>
-      <pseudo_event id="91" operation="demoted" operation_key="master-1_demoted_0">
+      <pseudo_event id="92" operation="demoted" operation_key="master-1_demoted_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="72" operation="demote" operation_key="stateful-1:0_demote_0"/>
+        <pseudo_event id="73" operation="demote" operation_key="stateful-1:0_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="90" operation="demote" operation_key="master-1_demote_0"/>
+        <pseudo_event id="91" operation="demote" operation_key="master-1_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="37">
     <action_set>
-      <pseudo_event id="90" operation="demote" operation_key="master-1_demote_0">
+      <pseudo_event id="91" operation="demote" operation_key="master-1_demote_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="43" operation="stopped" operation_key="group-1_stopped_0"/>
+        <pseudo_event id="44" operation="stopped" operation_key="group-1_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="38" priority="1000000">
     <action_set>
-      <pseudo_event id="89" operation="promoted" operation_key="master-1_promoted_0">
+      <pseudo_event id="90" operation="promoted" operation_key="master-1_promoted_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="76" operation="promote" operation_key="stateful-1:1_promote_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
+        <rsc_op id="77" operation="promote" operation_key="stateful-1:1_promote_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="39">
     <action_set>
-      <pseudo_event id="88" operation="promote" operation_key="master-1_promote_0">
+      <pseudo_event id="89" operation="promote" operation_key="master-1_promote_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="87" operation="stopped" operation_key="master-1_stopped_0"/>
+        <pseudo_event id="88" operation="stopped" operation_key="master-1_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="91" operation="demoted" operation_key="master-1_demoted_0"/>
+        <pseudo_event id="92" operation="demoted" operation_key="master-1_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="40" priority="1000000">
     <action_set>
-      <pseudo_event id="87" operation="stopped" operation_key="master-1_stopped_0">
+      <pseudo_event id="88" operation="stopped" operation_key="master-1_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="73" operation="stop" operation_key="stateful-1:0_stop_0"/>
+        <pseudo_event id="74" operation="stop" operation_key="stateful-1:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="86" operation="stop" operation_key="master-1_stop_0"/>
+        <pseudo_event id="87" operation="stop" operation_key="master-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="41">
     <action_set>
-      <pseudo_event id="86" operation="stop" operation_key="master-1_stop_0">
+      <pseudo_event id="87" operation="stop" operation_key="master-1_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="91" operation="demoted" operation_key="master-1_demoted_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
       </trigger>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
+        <pseudo_event id="92" operation="demoted" operation_key="master-1_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="42">
     <action_set>
-      <crm_event id="93" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4">
-        <attributes CRM_meta_connected="1" CRM_meta_on_node="pcmk-4" CRM_meta_on_node_uuid="pcmk-4" CRM_meta_op_no_wait="true" CRM_meta_probe_complete="true" CRM_meta_standby="off" CRM_meta_stonith_action="reboot" CRM_meta_terminate="1" />
-        <downed>
-          <node id="pcmk-4"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="43">
-    <action_set>
-      <pseudo_event id="92" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="93" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="44">
+  <synapse id="43">
     <action_set>
-      <pseudo_event id="19" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="20" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="20" operation="stop" operation_key="FencingChild:0_stop_0"/>
+        <pseudo_event id="21" operation="stop" operation_key="FencingChild:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="31" operation="stop" operation_key="r192.168.101.181_stop_0"/>
+        <pseudo_event id="32" operation="stop" operation_key="r192.168.101.181_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="34" operation="stop" operation_key="r192.168.101.182_stop_0"/>
+        <pseudo_event id="35" operation="stop" operation_key="r192.168.101.182_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="37" operation="stop" operation_key="r192.168.101.183_stop_0"/>
+        <pseudo_event id="38" operation="stop" operation_key="r192.168.101.183_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="50" operation="stop" operation_key="rsc_pcmk-4_stop_0"/>
+        <pseudo_event id="51" operation="stop" operation_key="rsc_pcmk-4_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="53" operation="stop" operation_key="lsb-dummy_stop_0"/>
+        <pseudo_event id="54" operation="stop" operation_key="lsb-dummy_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="56" operation="stop" operation_key="migrator_stop_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
+        <rsc_op id="57" operation="stop" operation_key="migrator_stop_0" on_node="pcmk-1" on_node_uuid="pcmk-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="61" operation="stop" operation_key="ping-1:0_stop_0"/>
+        <pseudo_event id="62" operation="stop" operation_key="ping-1:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="73" operation="stop" operation_key="stateful-1:0_stop_0"/>
+        <pseudo_event id="74" operation="stop" operation_key="stateful-1:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="92" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="93" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="44">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-pcmk-4-reboot" on_node="pcmk-4" on_node_uuid="pcmk-4">
+        <attributes CRM_meta_connected="1" CRM_meta_on_node="pcmk-4" CRM_meta_on_node_uuid="pcmk-4" CRM_meta_op_no_wait="true" CRM_meta_probe_complete="true" CRM_meta_standby="off" CRM_meta_stonith_action="reboot" CRM_meta_terminate="1" />
+        <downed>
+          <node id="pcmk-4"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/migrate-fencing.scores b/pengine/test10/migrate-fencing.scores
index 37d42b4..3febd69 100644
--- a/pengine/test10/migrate-fencing.scores
+++ b/pengine/test10/migrate-fencing.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   pcmk-4: node is unclean
 Allocation scores:
 clone_color: Connectivity allocation score on pcmk-1: 0
 clone_color: Connectivity allocation score on pcmk-2: 0
diff --git a/pengine/test10/migrate-fencing.summary b/pengine/test10/migrate-fencing.summary
index fdb905e..7468fe2 100644
--- a/pengine/test10/migrate-fencing.summary
+++ b/pengine/test10/migrate-fencing.summary
@@ -21,9 +21,8 @@ Online: [ pcmk-1 pcmk-2 pcmk-3 ]
      Masters: [ pcmk-4 ]
      Slaves: [ pcmk-1 pcmk-2 pcmk-3 ]
 
-  notice: Fencing   pcmk-4: node is unclean
 Transition Summary:
- * Fence (reboot) pcmk-4
+ * Fence (reboot) pcmk-4 'termination was requested'
  * Stop    FencingChild:0	(pcmk-4)
  * Move    r192.168.101.181	(Started pcmk-4 -> pcmk-1)
  * Move    r192.168.101.182	(Started pcmk-4 -> pcmk-1)
@@ -39,27 +38,27 @@ Executing cluster transition:
  * Resource action: stateful-1:3    monitor=15000 on pcmk-3
  * Resource action: stateful-1:2    monitor=15000 on pcmk-2
  * Fencing pcmk-4 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   Fencing_stop_0
  * Pseudo action:   rsc_pcmk-4_stop_0
  * Pseudo action:   lsb-dummy_stop_0
- * Resource action: migrator        migrate_to on pcmk-1
  * Pseudo action:   Connectivity_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   FencingChild:0_stop_0
  * Pseudo action:   Fencing_stopped_0
  * Pseudo action:   group-1_stop_0
  * Pseudo action:   r192.168.101.183_stop_0
  * Resource action: rsc_pcmk-4      start on pcmk-2
- * Resource action: migrator        migrate_from on pcmk-3
- * Resource action: migrator        stop on pcmk-1
+ * Resource action: migrator        migrate_to on pcmk-1
  * Pseudo action:   ping-1:0_stop_0
  * Pseudo action:   Connectivity_stopped_0
  * Pseudo action:   r192.168.101.182_stop_0
  * Resource action: rsc_pcmk-4      monitor=5000 on pcmk-2
- * Pseudo action:   migrator_start_0
+ * Resource action: migrator        migrate_from on pcmk-3
+ * Resource action: migrator        stop on pcmk-1
  * Pseudo action:   r192.168.101.181_stop_0
- * Resource action: migrator        monitor=10000 on pcmk-3
+ * Pseudo action:   migrator_start_0
  * Pseudo action:   group-1_stopped_0
+ * Resource action: migrator        monitor=10000 on pcmk-3
  * Pseudo action:   master-1_demote_0
  * Pseudo action:   stateful-1:0_demote_0
  * Pseudo action:   master-1_demoted_0
diff --git a/pengine/test10/rec-node-10.exp b/pengine/test10/rec-node-10.exp
index 309764a..a0606d9 100644
--- a/pengine/test10/rec-node-10.exp
+++ b/pengine/test10/rec-node-10.exp
@@ -1,7 +1,7 @@
  <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
    <synapse id="0">
      <action_set>
-      <rsc_op id="2" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="3" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="stonith-1" class="stonith" type="dummy"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -10,7 +10,7 @@
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="3" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="4" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc1" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -19,7 +19,7 @@
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="4" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="5" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc2" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
        </rsc_op>
diff --git a/pengine/test10/rec-node-11.exp b/pengine/test10/rec-node-11.exp
index 473c1a7..6c7efcc 100644
--- a/pengine/test10/rec-node-11.exp
+++ b/pengine/test10/rec-node-11.exp
@@ -1,23 +1,23 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="5" operation="start" operation_key="stonith-1_start_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="6" operation="start" operation_key="stonith-1_start_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="stonith-1" class="stonith" type="dummy"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="1" operation="all_stopped" operation_key="all_stopped"/>
+        <pseudo_event id="2" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <rsc_op id="2" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="3" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="2" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="3" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="stonith-1" class="stonith" type="dummy"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -26,113 +26,113 @@
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="13" operation="stopped" operation_key="group1_stopped_0">
+      <pseudo_event id="14" operation="stopped" operation_key="group1_stopped_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0"/>
+        <pseudo_event id="9" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="12" operation="stop" operation_key="group1_stop_0"/>
+        <pseudo_event id="13" operation="stop" operation_key="group1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="12" operation="stop" operation_key="group1_stop_0">
+      <pseudo_event id="13" operation="stop" operation_key="group1_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="17" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="11" operation="running" operation_key="group1_running_0">
+      <pseudo_event id="12" operation="running" operation_key="group1_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="7" operation="start" operation_key="rsc1_start_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="8" operation="start" operation_key="rsc1_start_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
       <trigger>
-        <rsc_op id="9" operation="start" operation_key="rsc2_start_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="10" operation="start" operation_key="rsc2_start_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="10" operation="start" operation_key="group1_start_0"/>
+        <pseudo_event id="11" operation="start" operation_key="group1_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <pseudo_event id="10" operation="start" operation_key="group1_start_0">
+      <pseudo_event id="11" operation="start" operation_key="group1_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="13" operation="stopped" operation_key="group1_stopped_0"/>
+        <pseudo_event id="14" operation="stopped" operation_key="group1_stopped_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="15" operation="start" operation_key="rsc3_start_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="16" operation="start" operation_key="rsc3_start_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <rsc_op id="7" operation="start" operation_key="rsc1_start_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="8" operation="start" operation_key="rsc1_start_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc1" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="3" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="4" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="10" operation="start" operation_key="group1_start_0"/>
+        <pseudo_event id="11" operation="start" operation_key="group1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="16" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="17" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0">
+      <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_on_fail="block" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="3" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0"/>
+        <rsc_op id="4" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="12" operation="stop" operation_key="group1_stop_0"/>
+        <pseudo_event id="9" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="17" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
+        <pseudo_event id="13" operation="stop" operation_key="group1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <rsc_op id="3" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="4" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc1" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -141,50 +141,50 @@
   </synapse>
   <synapse id="9">
     <action_set>
-      <rsc_op id="9" operation="start" operation_key="rsc2_start_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="10" operation="start" operation_key="rsc2_start_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc2" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="5" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
       <trigger>
-        <rsc_op id="7" operation="start" operation_key="rsc1_start_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="8" operation="start" operation_key="rsc1_start_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0"/>
+        <pseudo_event id="9" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="10" operation="start" operation_key="group1_start_0"/>
+        <pseudo_event id="11" operation="start" operation_key="group1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="16" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="17" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0">
+      <pseudo_event id="9" operation="stop" operation_key="rsc2_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_on_fail="block" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="12" operation="stop" operation_key="group1_stop_0"/>
+        <rsc_op id="5" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
       <trigger>
-        <crm_event id="17" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
+        <pseudo_event id="13" operation="stop" operation_key="group1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="4" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="5" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc2" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -193,76 +193,75 @@
   </synapse>
   <synapse id="12">
     <action_set>
-      <rsc_op id="15" operation="start" operation_key="rsc3_start_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="16" operation="start" operation_key="rsc3_start_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc3" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="14" operation="stop" operation_key="rsc3_stop_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="15" operation="stop" operation_key="rsc3_stop_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="16" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="17" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13">
     <action_set>
-      <rsc_op id="14" operation="stop" operation_key="rsc3_stop_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="15" operation="stop" operation_key="rsc3_stop_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc3" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="13" operation="stopped" operation_key="group1_stopped_0"/>
+        <pseudo_event id="14" operation="stopped" operation_key="group1_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <crm_event id="17" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1">
-        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="uuid1" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="uuid1"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="15">
-    <action_set>
-      <pseudo_event id="16" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="17" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="17" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="16">
+  <synapse id="15">
     <action_set>
-      <pseudo_event id="1" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="2" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0"/>
+        <pseudo_event id="9" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="14" operation="stop" operation_key="rsc3_stop_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="15" operation="stop" operation_key="rsc3_stop_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="16" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="17" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="16">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1">
+        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="uuid1" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="uuid1"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/rec-node-11.scores b/pengine/test10/rec-node-11.scores
index 86c2bf5..482deeb 100644
--- a/pengine/test10/rec-node-11.scores
+++ b/pengine/test10/rec-node-11.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   node1: node is unclean
 Allocation scores:
 group_color: group1 allocation score on node1: 0
 group_color: group1 allocation score on node2: 0
diff --git a/pengine/test10/rec-node-11.summary b/pengine/test10/rec-node-11.summary
index f45f0a8..e884ffa 100644
--- a/pengine/test10/rec-node-11.summary
+++ b/pengine/test10/rec-node-11.summary
@@ -9,9 +9,8 @@ Online: [ node2 ]
      rsc2	(heartbeat:apache):	Started node1
  rsc3	(heartbeat:apache):	Started node2
 
-  notice: Fencing   node1: node is unclean
 Transition Summary:
- * Fence (reboot) node1
+ * Fence (reboot) node1 'peer process is no longer available'
  * Start   stonith-1	(node2)
  * Move    rsc1	(Started node1 -> node2)
  * Move    rsc2	(Started node1 -> node2)
@@ -22,9 +21,9 @@ Executing cluster transition:
  * Resource action: rsc1            monitor on node2
  * Resource action: rsc2            monitor on node2
  * Fencing node1 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   group1_stop_0
  * Pseudo action:   rsc2_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   rsc1_stop_0
  * Pseudo action:   group1_stopped_0
  * Resource action: rsc3            stop on node2
diff --git a/pengine/test10/rec-node-12.scores b/pengine/test10/rec-node-12.scores
index 4fd9ff5..153c232 100644
--- a/pengine/test10/rec-node-12.scores
+++ b/pengine/test10/rec-node-12.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   c001n02: node is unclean
 Allocation scores:
 clone_color: DoFencing allocation score on c001n01: 0
 clone_color: DoFencing allocation score on c001n02: 0
diff --git a/pengine/test10/rec-node-12.summary b/pengine/test10/rec-node-12.summary
index 562cae9..8b2d4e6 100644
--- a/pengine/test10/rec-node-12.summary
+++ b/pengine/test10/rec-node-12.summary
@@ -14,9 +14,8 @@ Online: [ c001n01 c001n03 c001n08 ]
      child_DoFencing:2	(stonith:ssh):	Stopped 
      child_DoFencing:3	(stonith:ssh):	Stopped 
 
-  notice: Fencing   c001n02: node is unclean
 Transition Summary:
- * Fence (reboot) c001n02
+ * Fence (reboot) c001n02 'node is unclean'
  * Start   DcIPaddr	(c001n08)
  * Start   rsc_c001n08	(c001n08)
  * Start   rsc_c001n02	(c001n01)
diff --git a/pengine/test10/rec-node-13.exp b/pengine/test10/rec-node-13.exp
index 3b25e9f..a289600 100644
--- a/pengine/test10/rec-node-13.exp
+++ b/pengine/test10/rec-node-13.exp
@@ -1,83 +1,82 @@
  <transition_graph cluster-delay="3m" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
    <synapse id="0">
      <action_set>
-      <pseudo_event id="66" operation="stop" operation_key="ocf_msdummy:6_stop_0">
+      <pseudo_event id="67" operation="stop" operation_key="ocf_msdummy:6_stop_0">
         <attributes CRM_meta_clone="6" CRM_meta_clone_max="12" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="6" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000"  logfile="/var/log/cts_ocfdummy.log"/>
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="73" operation="stop" operation_key="master_rsc_1_stop_0"/>
+        <crm_event id="2" operation="stonith" operation_key="stonith-c001n04-reboot" on_node="c001n04" on_node_uuid="9e080e6d-7a25-4dac-be89-f6f4f128623d"/>
        </trigger>
        <trigger>
-        <crm_event id="80" operation="stonith" operation_key="stonith-c001n04-reboot" on_node="c001n04" on_node_uuid="9e080e6d-7a25-4dac-be89-f6f4f128623d"/>
+        <pseudo_event id="74" operation="stop" operation_key="master_rsc_1_stop_0"/>
        </trigger>
      </inputs>
    </synapse>
   <synapse id="1" priority="1000000">
      <action_set>
-      <pseudo_event id="74" operation="stopped" operation_key="master_rsc_1_stopped_0">
+      <pseudo_event id="75" operation="stopped" operation_key="master_rsc_1_stopped_0">
         <attributes CRM_meta_clone_max="12" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="6" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="66" operation="stop" operation_key="ocf_msdummy:6_stop_0"/>
+        <pseudo_event id="67" operation="stop" operation_key="ocf_msdummy:6_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="73" operation="stop" operation_key="master_rsc_1_stop_0"/>
+        <pseudo_event id="74" operation="stop" operation_key="master_rsc_1_stop_0"/>
       </trigger>
     </inputs>
    </synapse>
   <synapse id="2">
      <action_set>
-      <pseudo_event id="73" operation="stop" operation_key="master_rsc_1_stop_0">
+      <pseudo_event id="74" operation="stop" operation_key="master_rsc_1_stop_0">
         <attributes CRM_meta_clone_max="12" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="6" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <crm_event id="80" operation="stonith" operation_key="stonith-c001n04-reboot" on_node="c001n04" on_node_uuid="9e080e6d-7a25-4dac-be89-f6f4f128623d"/>
+        <crm_event id="2" operation="stonith" operation_key="stonith-c001n04-reboot" on_node="c001n04" on_node_uuid="9e080e6d-7a25-4dac-be89-f6f4f128623d"/>
        </trigger>
      </inputs>
    </synapse>
    <synapse id="3">
      <action_set>
-      <crm_event id="80" operation="stonith" operation_key="stonith-c001n04-reboot" on_node="c001n04" on_node_uuid="9e080e6d-7a25-4dac-be89-f6f4f128623d">
-        <attributes CRM_meta_on_node="c001n04" CRM_meta_on_node_uuid="9e080e6d-7a25-4dac-be89-f6f4f128623d" CRM_meta_op_no_wait="true" CRM_meta_probe_complete="true" CRM_meta_shutdown="1234" CRM_meta_standby="off" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="9e080e6d-7a25-4dac-be89-f6f4f128623d"/>
-        </downed>
-      </crm_event>
-     </action_set>
-    <inputs/>
-   </synapse>
-  <synapse id="4">
-     <action_set>
-      <pseudo_event id="79" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="80" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="80" operation="stonith" operation_key="stonith-c001n04-reboot" on_node="c001n04" on_node_uuid="9e080e6d-7a25-4dac-be89-f6f4f128623d"/>
+        <crm_event id="2" operation="stonith" operation_key="stonith-c001n04-reboot" on_node="c001n04" on_node_uuid="9e080e6d-7a25-4dac-be89-f6f4f128623d"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="5">
+  <synapse id="4">
     <action_set>
-      <pseudo_event id="21" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="22" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="66" operation="stop" operation_key="ocf_msdummy:6_stop_0"/>
+        <pseudo_event id="67" operation="stop" operation_key="ocf_msdummy:6_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="79" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="80" operation="stonith_complete" operation_key="stonith_complete"/>
        </trigger>
      </inputs>
    </synapse>
+  <synapse id="5">
+    <action_set>
+      <crm_event id="2" operation="stonith" operation_key="stonith-c001n04-reboot" on_node="c001n04" on_node_uuid="9e080e6d-7a25-4dac-be89-f6f4f128623d">
+        <attributes CRM_meta_on_node="c001n04" CRM_meta_on_node_uuid="9e080e6d-7a25-4dac-be89-f6f4f128623d" CRM_meta_op_no_wait="true" CRM_meta_probe_complete="true" CRM_meta_shutdown="1234" CRM_meta_standby="off" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="9e080e6d-7a25-4dac-be89-f6f4f128623d"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
  </transition_graph>
-
diff --git a/pengine/test10/rec-node-13.scores b/pengine/test10/rec-node-13.scores
index bdb5004..dda1134 100644
--- a/pengine/test10/rec-node-13.scores
+++ b/pengine/test10/rec-node-13.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   c001n04: node is unclean
 Allocation scores:
 clone_color: DoFencing allocation score on c001n02: 0
 clone_color: DoFencing allocation score on c001n03: 0
diff --git a/pengine/test10/rec-node-13.summary b/pengine/test10/rec-node-13.summary
index d3b4d65..9873757 100644
--- a/pengine/test10/rec-node-13.summary
+++ b/pengine/test10/rec-node-13.summary
@@ -33,15 +33,14 @@ OFFLINE: [ c001n03 c001n05 ]
      ocf_msdummy:10	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n06 
      ocf_msdummy:11	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n07 
 
-  notice: Fencing   c001n04: node is unclean
 Transition Summary:
- * Fence (reboot) c001n04
+ * Fence (reboot) c001n04 'ocf_msdummy:6 failed there'
  * Stop    ocf_msdummy:6	(c001n04)
 
 Executing cluster transition:
  * Fencing c001n04 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   master_rsc_1_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   ocf_msdummy:6_stop_0
  * Pseudo action:   master_rsc_1_stopped_0
  * Pseudo action:   all_stopped
diff --git a/pengine/test10/rec-node-14.exp b/pengine/test10/rec-node-14.exp
index 30dbcdb..308ab7e 100644
--- a/pengine/test10/rec-node-14.exp
+++ b/pengine/test10/rec-node-14.exp
@@ -1,68 +1,67 @@
  <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
    <synapse id="0">
      <action_set>
-      <crm_event id="5" operation="stonith" operation_key="stonith-node3-reboot" on_node="node3" on_node_uuid="uuid3">
-        <attributes CRM_meta_on_node="node3" CRM_meta_on_node_uuid="uuid3" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="uuid3"/>
-        </downed>
-      </crm_event>
+      <pseudo_event id="5" operation="stonith_complete" operation_key="stonith_complete">
+        <attributes />
+      </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
+        <crm_event id="2" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="uuid2"/>
        </trigger>
      </inputs>
    </synapse>
    <synapse id="1">
      <action_set>
-      <crm_event id="4" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="uuid2">
-        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_no_wait="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="uuid2"/>
-        </downed>
-      </crm_event>
+      <pseudo_event id="4" operation="all_stopped" operation_key="all_stopped">
+        <attributes />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="5" operation="stonith" operation_key="stonith-node3-reboot" on_node="node3" on_node_uuid="uuid3"/>
+        <pseudo_event id="5" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1">
-        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="uuid1" CRM_meta_stonith_action="reboot" />
+      <crm_event id="3" operation="stonith" operation_key="stonith-node3-reboot" on_node="node3" on_node_uuid="uuid3">
+        <attributes CRM_meta_on_node="node3" CRM_meta_on_node_uuid="uuid3" CRM_meta_stonith_action="reboot" />
         <downed>
-          <node id="uuid1"/>
+          <node id="uuid3"/>
         </downed>
        </crm_event>
      </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
+      </trigger>
+    </inputs>
    </synapse>
   <synapse id="3">
      <action_set>
-      <pseudo_event id="2" operation="stonith_complete" operation_key="stonith_complete">
-        <attributes />
-      </pseudo_event>
+      <crm_event id="2" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="uuid2">
+        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_no_wait="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="uuid2"/>
+        </downed>
+      </crm_event>
      </action_set>
      <inputs>
        <trigger>
-        <crm_event id="4" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="uuid2"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node3-reboot" on_node="node3" on_node_uuid="uuid3"/>
        </trigger>
      </inputs>
    </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="1" operation="all_stopped" operation_key="all_stopped">
-        <attributes />
-      </pseudo_event>
+      <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1">
+        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="uuid1" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="uuid1"/>
+        </downed>
+      </crm_event>
      </action_set>
-     <inputs>
-       <trigger>
-        <pseudo_event id="2" operation="stonith_complete" operation_key="stonith_complete"/>
-       </trigger>
-     </inputs>
+    <inputs/>
    </synapse>
  </transition_graph>
-
diff --git a/pengine/test10/rec-node-14.scores b/pengine/test10/rec-node-14.scores
index 1be723e..0322231 100644
--- a/pengine/test10/rec-node-14.scores
+++ b/pengine/test10/rec-node-14.scores
@@ -1,6 +1,3 @@
-  notice: Fencing   node1: node is unclean
-  notice: Fencing   node2: node is unclean
-  notice: Fencing   node3: node is unclean
 Allocation scores:
 native_color: lsb_dummy allocation score on node1: 0
 native_color: lsb_dummy allocation score on node2: 0
diff --git a/pengine/test10/rec-node-14.summary b/pengine/test10/rec-node-14.summary
index a707aee..b5f105e 100644
--- a/pengine/test10/rec-node-14.summary
+++ b/pengine/test10/rec-node-14.summary
@@ -7,13 +7,10 @@ Node node3 (uuid3): UNCLEAN (offline)
  stonith-1	(stonith:dummy):	Stopped 
  lsb_dummy	(lsb:/usr/lib/heartbeat/cts/LSBDummy):	Stopped 
 
-  notice: Fencing   node1: node is unclean
-  notice: Fencing   node2: node is unclean
-  notice: Fencing   node3: node is unclean
 Transition Summary:
- * Fence (reboot) node3
- * Fence (reboot) node2
- * Fence (reboot) node1
+ * Fence (reboot) node3 'peer is no longer part of the cluster'
+ * Fence (reboot) node2 'peer is no longer part of the cluster'
+ * Fence (reboot) node1 'peer is no longer part of the cluster'
 
 Executing cluster transition:
  * Fencing node1 (reboot)
diff --git a/pengine/test10/rec-node-15.exp b/pengine/test10/rec-node-15.exp
index 3810636..3cd3e81 100644
--- a/pengine/test10/rec-node-15.exp
+++ b/pengine/test10/rec-node-15.exp
@@ -1,26 +1,26 @@
 <transition_graph cluster-delay="5min" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="10" operation="start" operation_key="stonith-1_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
+      <rsc_op id="11" operation="start" operation_key="stonith-1_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
         <primitive id="stonith-1" class="stonith" type="dummy"/>
         <attributes CRM_meta_on_node="sapcl01" CRM_meta_on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="7" operation="all_stopped" operation_key="all_stopped"/>
+        <pseudo_event id="8" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <rsc_op id="8" operation="monitor" operation_key="stonith-1_monitor_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="9" operation="monitor" operation_key="stonith-1_monitor_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
       <trigger>
-        <rsc_op id="9" operation="monitor" operation_key="stonith-1_monitor_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
+        <rsc_op id="10" operation="monitor" operation_key="stonith-1_monitor_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="9" operation="monitor" operation_key="stonith-1_monitor_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181">
+      <rsc_op id="10" operation="monitor" operation_key="stonith-1_monitor_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181">
         <primitive id="stonith-1" class="stonith" type="dummy"/>
         <attributes CRM_meta_on_node="sapcl02" CRM_meta_on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -29,7 +29,7 @@
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="8" operation="monitor" operation_key="stonith-1_monitor_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
+      <rsc_op id="9" operation="monitor" operation_key="stonith-1_monitor_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
         <primitive id="stonith-1" class="stonith" type="dummy"/>
         <attributes CRM_meta_on_node="sapcl01" CRM_meta_on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -38,28 +38,28 @@
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="33" operation="stopped" operation_key="app02_stopped_0">
+      <pseudo_event id="34" operation="stopped" operation_key="app02_stopped_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="21" operation="stop" operation_key="IPaddr_192_168_1_102_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
+        <rsc_op id="22" operation="stop" operation_key="IPaddr_192_168_1_102_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
       </trigger>
       <trigger>
-        <rsc_op id="24" operation="stop" operation_key="LVM_12_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
+        <rsc_op id="25" operation="stop" operation_key="LVM_12_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
       </trigger>
       <trigger>
-        <rsc_op id="27" operation="stop" operation_key="Filesystem_13_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
+        <rsc_op id="28" operation="stop" operation_key="Filesystem_13_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
       </trigger>
       <trigger>
-        <pseudo_event id="32" operation="stop" operation_key="app02_stop_0"/>
+        <pseudo_event id="33" operation="stop" operation_key="app02_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="32" operation="stop" operation_key="app02_stop_0">
+      <pseudo_event id="33" operation="stop" operation_key="app02_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -67,214 +67,214 @@
   </synapse>
   <synapse id="5">
     <action_set>
-      <pseudo_event id="31" operation="running" operation_key="app02_running_0">
+      <pseudo_event id="32" operation="running" operation_key="app02_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="22" operation="start" operation_key="IPaddr_192_168_1_102_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="23" operation="start" operation_key="IPaddr_192_168_1_102_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
       <trigger>
-        <rsc_op id="25" operation="start" operation_key="LVM_12_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="26" operation="start" operation_key="LVM_12_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
       <trigger>
-        <rsc_op id="28" operation="start" operation_key="Filesystem_13_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="29" operation="start" operation_key="Filesystem_13_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
       <trigger>
-        <pseudo_event id="30" operation="start" operation_key="app02_start_0"/>
+        <pseudo_event id="31" operation="start" operation_key="app02_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="30" operation="start" operation_key="app02_start_0">
+      <pseudo_event id="31" operation="start" operation_key="app02_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="33" operation="stopped" operation_key="app02_stopped_0"/>
+        <pseudo_event id="34" operation="stopped" operation_key="app02_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <rsc_op id="23" operation="monitor" operation_key="IPaddr_192_168_1_102_monitor_5000" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
+      <rsc_op id="24" operation="monitor" operation_key="IPaddr_192_168_1_102_monitor_5000" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
         <primitive id="IPaddr_192_168_1_102" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="sapcl01" CRM_meta_on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d" CRM_meta_timeout="5000"  ip="192.168.1.102"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="22" operation="start" operation_key="IPaddr_192_168_1_102_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="23" operation="start" operation_key="IPaddr_192_168_1_102_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <rsc_op id="22" operation="start" operation_key="IPaddr_192_168_1_102_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
+      <rsc_op id="23" operation="start" operation_key="IPaddr_192_168_1_102_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
         <primitive id="IPaddr_192_168_1_102" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="sapcl01" CRM_meta_on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d" CRM_meta_timeout="20000"  ip="192.168.1.102"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="21" operation="stop" operation_key="IPaddr_192_168_1_102_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
+        <rsc_op id="22" operation="stop" operation_key="IPaddr_192_168_1_102_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
       </trigger>
       <trigger>
-        <pseudo_event id="30" operation="start" operation_key="app02_start_0"/>
+        <pseudo_event id="31" operation="start" operation_key="app02_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="49" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <rsc_op id="21" operation="stop" operation_key="IPaddr_192_168_1_102_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181">
+      <rsc_op id="22" operation="stop" operation_key="IPaddr_192_168_1_102_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181">
         <primitive id="IPaddr_192_168_1_102" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="sapcl02" CRM_meta_on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181" CRM_meta_timeout="20000"  ip="192.168.1.102"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="24" operation="stop" operation_key="LVM_12_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
+        <rsc_op id="25" operation="stop" operation_key="LVM_12_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
       </trigger>
       <trigger>
-        <pseudo_event id="32" operation="stop" operation_key="app02_stop_0"/>
+        <pseudo_event id="33" operation="stop" operation_key="app02_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="26" operation="monitor" operation_key="LVM_12_monitor_120000" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
+      <rsc_op id="27" operation="monitor" operation_key="LVM_12_monitor_120000" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
         <primitive id="LVM_12" class="ocf" provider="heartbeat" type="LVM"/>
         <attributes CRM_meta_interval="120000" CRM_meta_name="monitor" CRM_meta_on_node="sapcl01" CRM_meta_on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d" CRM_meta_timeout="60000"  volgrpname="data02vg"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="25" operation="start" operation_key="LVM_12_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="26" operation="start" operation_key="LVM_12_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="25" operation="start" operation_key="LVM_12_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
+      <rsc_op id="26" operation="start" operation_key="LVM_12_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
         <primitive id="LVM_12" class="ocf" provider="heartbeat" type="LVM"/>
         <attributes CRM_meta_on_node="sapcl01" CRM_meta_on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d" CRM_meta_timeout="20000"  volgrpname="data02vg"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="22" operation="start" operation_key="IPaddr_192_168_1_102_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="23" operation="start" operation_key="IPaddr_192_168_1_102_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
       <trigger>
-        <rsc_op id="24" operation="stop" operation_key="LVM_12_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
+        <rsc_op id="25" operation="stop" operation_key="LVM_12_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
       </trigger>
       <trigger>
-        <pseudo_event id="30" operation="start" operation_key="app02_start_0"/>
+        <pseudo_event id="31" operation="start" operation_key="app02_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="49" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <rsc_op id="24" operation="stop" operation_key="LVM_12_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181">
+      <rsc_op id="25" operation="stop" operation_key="LVM_12_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181">
         <primitive id="LVM_12" class="ocf" provider="heartbeat" type="LVM"/>
         <attributes CRM_meta_on_node="sapcl02" CRM_meta_on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181" CRM_meta_timeout="20000"  volgrpname="data02vg"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="27" operation="stop" operation_key="Filesystem_13_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
+        <rsc_op id="28" operation="stop" operation_key="Filesystem_13_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
       </trigger>
       <trigger>
-        <pseudo_event id="32" operation="stop" operation_key="app02_stop_0"/>
+        <pseudo_event id="33" operation="stop" operation_key="app02_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13">
     <action_set>
-      <rsc_op id="29" operation="monitor" operation_key="Filesystem_13_monitor_120000" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
+      <rsc_op id="30" operation="monitor" operation_key="Filesystem_13_monitor_120000" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
         <primitive id="Filesystem_13" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_interval="120000" CRM_meta_name="monitor" CRM_meta_on_node="sapcl01" CRM_meta_on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d" CRM_meta_timeout="60000"  device="/dev/data02vg/v0" directory="/data/d2" fstype="ext3"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="28" operation="start" operation_key="Filesystem_13_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="29" operation="start" operation_key="Filesystem_13_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <rsc_op id="28" operation="start" operation_key="Filesystem_13_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
+      <rsc_op id="29" operation="start" operation_key="Filesystem_13_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
         <primitive id="Filesystem_13" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_on_node="sapcl01" CRM_meta_on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d" CRM_meta_timeout="20000"  device="/dev/data02vg/v0" directory="/data/d2" fstype="ext3"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="25" operation="start" operation_key="LVM_12_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="26" operation="start" operation_key="LVM_12_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
       <trigger>
-        <rsc_op id="27" operation="stop" operation_key="Filesystem_13_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
+        <rsc_op id="28" operation="stop" operation_key="Filesystem_13_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
       </trigger>
       <trigger>
-        <pseudo_event id="30" operation="start" operation_key="app02_start_0"/>
+        <pseudo_event id="31" operation="start" operation_key="app02_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="49" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15">
     <action_set>
-      <rsc_op id="27" operation="stop" operation_key="Filesystem_13_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181">
+      <rsc_op id="28" operation="stop" operation_key="Filesystem_13_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181">
         <primitive id="Filesystem_13" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_on_node="sapcl02" CRM_meta_on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181" CRM_meta_timeout="20000"  device="/dev/data02vg/v0" directory="/data/d2" fstype="ext3"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="32" operation="stop" operation_key="app02_stop_0"/>
+        <pseudo_event id="33" operation="stop" operation_key="app02_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="16">
     <action_set>
-      <pseudo_event id="45" operation="running" operation_key="oracle_running_0">
+      <pseudo_event id="46" operation="running" operation_key="oracle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="34" operation="start" operation_key="IPaddr_192_168_1_104_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="35" operation="start" operation_key="IPaddr_192_168_1_104_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
       <trigger>
-        <rsc_op id="36" operation="start" operation_key="LVM_22_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="37" operation="start" operation_key="LVM_22_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="Filesystem_23_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="39" operation="start" operation_key="Filesystem_23_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="oracle_24_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="41" operation="start" operation_key="oracle_24_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
       <trigger>
-        <rsc_op id="42" operation="start" operation_key="oralsnr_25_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="43" operation="start" operation_key="oralsnr_25_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
       <trigger>
-        <pseudo_event id="44" operation="start" operation_key="oracle_start_0"/>
+        <pseudo_event id="45" operation="start" operation_key="oracle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="17">
     <action_set>
-      <pseudo_event id="44" operation="start" operation_key="oracle_start_0">
+      <pseudo_event id="45" operation="start" operation_key="oracle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -282,204 +282,203 @@
   </synapse>
   <synapse id="18">
     <action_set>
-      <rsc_op id="35" operation="monitor" operation_key="IPaddr_192_168_1_104_monitor_5000" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
+      <rsc_op id="36" operation="monitor" operation_key="IPaddr_192_168_1_104_monitor_5000" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
         <primitive id="IPaddr_192_168_1_104" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="sapcl01" CRM_meta_on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d" CRM_meta_timeout="5000"  ip="192.168.1.104"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="34" operation="start" operation_key="IPaddr_192_168_1_104_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="35" operation="start" operation_key="IPaddr_192_168_1_104_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="19">
     <action_set>
-      <rsc_op id="34" operation="start" operation_key="IPaddr_192_168_1_104_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
+      <rsc_op id="35" operation="start" operation_key="IPaddr_192_168_1_104_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
         <primitive id="IPaddr_192_168_1_104" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="sapcl01" CRM_meta_on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d" CRM_meta_timeout="20000"  ip="192.168.1.104"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="44" operation="start" operation_key="oracle_start_0"/>
+        <pseudo_event id="45" operation="start" operation_key="oracle_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="49" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="20">
     <action_set>
-      <rsc_op id="37" operation="monitor" operation_key="LVM_22_monitor_120000" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
+      <rsc_op id="38" operation="monitor" operation_key="LVM_22_monitor_120000" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
         <primitive id="LVM_22" class="ocf" provider="heartbeat" type="LVM"/>
         <attributes CRM_meta_interval="120000" CRM_meta_name="monitor" CRM_meta_on_node="sapcl01" CRM_meta_on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d" CRM_meta_timeout="60000"  volgrpname="data03vg"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="36" operation="start" operation_key="LVM_22_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="37" operation="start" operation_key="LVM_22_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21">
     <action_set>
-      <rsc_op id="36" operation="start" operation_key="LVM_22_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
+      <rsc_op id="37" operation="start" operation_key="LVM_22_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
         <primitive id="LVM_22" class="ocf" provider="heartbeat" type="LVM"/>
         <attributes CRM_meta_on_node="sapcl01" CRM_meta_on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d" CRM_meta_timeout="20000"  volgrpname="data03vg"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="34" operation="start" operation_key="IPaddr_192_168_1_104_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="35" operation="start" operation_key="IPaddr_192_168_1_104_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
       <trigger>
-        <pseudo_event id="44" operation="start" operation_key="oracle_start_0"/>
+        <pseudo_event id="45" operation="start" operation_key="oracle_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="49" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="22">
     <action_set>
-      <rsc_op id="39" operation="monitor" operation_key="Filesystem_23_monitor_120000" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
+      <rsc_op id="40" operation="monitor" operation_key="Filesystem_23_monitor_120000" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
         <primitive id="Filesystem_23" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_interval="120000" CRM_meta_name="monitor" CRM_meta_on_node="sapcl01" CRM_meta_on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d" CRM_meta_timeout="60000"  device="/dev/data03vg/v0" directory="/data/d3" fstype="xfs"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="Filesystem_23_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="39" operation="start" operation_key="Filesystem_23_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="23">
     <action_set>
-      <rsc_op id="38" operation="start" operation_key="Filesystem_23_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
+      <rsc_op id="39" operation="start" operation_key="Filesystem_23_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
         <primitive id="Filesystem_23" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_on_node="sapcl01" CRM_meta_on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d" CRM_meta_timeout="20000"  device="/dev/data03vg/v0" directory="/data/d3" fstype="xfs"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="36" operation="start" operation_key="LVM_22_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="37" operation="start" operation_key="LVM_22_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
       <trigger>
-        <pseudo_event id="44" operation="start" operation_key="oracle_start_0"/>
+        <pseudo_event id="45" operation="start" operation_key="oracle_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="49" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="24">
     <action_set>
-      <rsc_op id="41" operation="monitor" operation_key="oracle_24_monitor_120000" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
+      <rsc_op id="42" operation="monitor" operation_key="oracle_24_monitor_120000" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
         <primitive id="oracle_24" class="ocf" provider="heartbeat" type="oracle"/>
         <attributes CRM_meta_interval="120000" CRM_meta_name="monitor" CRM_meta_on_node="sapcl01" CRM_meta_on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d" CRM_meta_timeout="60000"  sid="testdb"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="oracle_24_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="41" operation="start" operation_key="oracle_24_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="25">
     <action_set>
-      <rsc_op id="40" operation="start" operation_key="oracle_24_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
+      <rsc_op id="41" operation="start" operation_key="oracle_24_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
         <primitive id="oracle_24" class="ocf" provider="heartbeat" type="oracle"/>
         <attributes CRM_meta_on_node="sapcl01" CRM_meta_on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d" CRM_meta_timeout="20000"  sid="testdb"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="Filesystem_23_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="39" operation="start" operation_key="Filesystem_23_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
       <trigger>
-        <pseudo_event id="44" operation="start" operation_key="oracle_start_0"/>
+        <pseudo_event id="45" operation="start" operation_key="oracle_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="49" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="26">
     <action_set>
-      <rsc_op id="43" operation="monitor" operation_key="oralsnr_25_monitor_120000" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
+      <rsc_op id="44" operation="monitor" operation_key="oralsnr_25_monitor_120000" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
         <primitive id="oralsnr_25" class="ocf" provider="heartbeat" type="oralsnr"/>
         <attributes CRM_meta_interval="120000" CRM_meta_name="monitor" CRM_meta_on_node="sapcl01" CRM_meta_on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d" CRM_meta_timeout="60000"  sid="testdb"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="42" operation="start" operation_key="oralsnr_25_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="43" operation="start" operation_key="oralsnr_25_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="27">
     <action_set>
-      <rsc_op id="42" operation="start" operation_key="oralsnr_25_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
+      <rsc_op id="43" operation="start" operation_key="oralsnr_25_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d">
         <primitive id="oralsnr_25" class="ocf" provider="heartbeat" type="oralsnr"/>
         <attributes CRM_meta_on_node="sapcl01" CRM_meta_on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d" CRM_meta_timeout="20000"  sid="testdb"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="oracle_24_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
+        <rsc_op id="41" operation="start" operation_key="oracle_24_start_0" on_node="sapcl01" on_node_uuid="85180fd0-70c9-4136-a5e0-90d89ea6079d"/>
       </trigger>
       <trigger>
-        <pseudo_event id="44" operation="start" operation_key="oracle_start_0"/>
+        <pseudo_event id="45" operation="start" operation_key="oracle_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="49" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="28">
     <action_set>
-      <crm_event id="49" operation="stonith" operation_key="stonith-sapcl03-reboot" on_node="sapcl03" on_node_uuid="0bfb78a2-fcd2-4f52-8a06-2d17437a6750">
-        <attributes CRM_meta_on_node="sapcl03" CRM_meta_on_node_uuid="0bfb78a2-fcd2-4f52-8a06-2d17437a6750" CRM_meta_op_no_wait="true" CRM_meta_standby="off" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="0bfb78a2-fcd2-4f52-8a06-2d17437a6750"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="29">
-    <action_set>
-      <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="49" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="49" operation="stonith" operation_key="stonith-sapcl03-reboot" on_node="sapcl03" on_node_uuid="0bfb78a2-fcd2-4f52-8a06-2d17437a6750"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-sapcl03-reboot" on_node="sapcl03" on_node_uuid="0bfb78a2-fcd2-4f52-8a06-2d17437a6750"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="30">
+  <synapse id="29">
     <action_set>
-      <pseudo_event id="7" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="8" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="21" operation="stop" operation_key="IPaddr_192_168_1_102_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
+        <rsc_op id="22" operation="stop" operation_key="IPaddr_192_168_1_102_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
       </trigger>
       <trigger>
-        <rsc_op id="24" operation="stop" operation_key="LVM_12_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
+        <rsc_op id="25" operation="stop" operation_key="LVM_12_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
       </trigger>
       <trigger>
-        <rsc_op id="27" operation="stop" operation_key="Filesystem_13_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
+        <rsc_op id="28" operation="stop" operation_key="Filesystem_13_stop_0" on_node="sapcl02" on_node_uuid="09fa194c-d7e1-41fa-a0d0-afd79a139181"/>
       </trigger>
       <trigger>
-        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="49" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="30">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-sapcl03-reboot" on_node="sapcl03" on_node_uuid="0bfb78a2-fcd2-4f52-8a06-2d17437a6750">
+        <attributes CRM_meta_on_node="sapcl03" CRM_meta_on_node_uuid="0bfb78a2-fcd2-4f52-8a06-2d17437a6750" CRM_meta_op_no_wait="true" CRM_meta_standby="off" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="0bfb78a2-fcd2-4f52-8a06-2d17437a6750"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/rec-node-15.scores b/pengine/test10/rec-node-15.scores
index d8b9617..03dc6e6 100644
--- a/pengine/test10/rec-node-15.scores
+++ b/pengine/test10/rec-node-15.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   sapcl03: node is unclean
 Allocation scores:
 group_color: Filesystem_13 allocation score on sapcl01: 0
 group_color: Filesystem_13 allocation score on sapcl02: 0
diff --git a/pengine/test10/rec-node-15.summary b/pengine/test10/rec-node-15.summary
index 863bfd4..760942c 100644
--- a/pengine/test10/rec-node-15.summary
+++ b/pengine/test10/rec-node-15.summary
@@ -20,9 +20,8 @@ Online: [ sapcl01 ]
      oracle_24	(ocf::heartbeat:oracle):	Stopped 
      oralsnr_25	(ocf::heartbeat:oralsnr):	Stopped 
 
-  notice: Fencing   sapcl03: node is unclean
 Transition Summary:
- * Fence (reboot) sapcl03
+ * Fence (reboot) sapcl03 'peer is no longer part of the cluster'
  * Start   stonith-1	(sapcl01)
  * Move    IPaddr_192_168_1_102	(Started sapcl02 -> sapcl01)
  * Move    LVM_12	(Started sapcl02 -> sapcl01)
@@ -40,20 +39,14 @@ Executing cluster transition:
  * Resource action: Filesystem_13   stop on sapcl02
  * Pseudo action:   oracle_start_0
  * Fencing sapcl03 (reboot)
- * Pseudo action:   stonith_complete
  * Resource action: LVM_12          stop on sapcl02
+ * Pseudo action:   stonith_complete
+ * Resource action: IPaddr_192_168_1_102 stop on sapcl02
  * Resource action: IPaddr_192_168_1_104 start on sapcl01
  * Resource action: LVM_22          start on sapcl01
  * Resource action: Filesystem_23   start on sapcl01
  * Resource action: oracle_24       start on sapcl01
  * Resource action: oralsnr_25      start on sapcl01
- * Resource action: IPaddr_192_168_1_102 stop on sapcl02
- * Pseudo action:   oracle_running_0
- * Resource action: IPaddr_192_168_1_104 monitor=5000 on sapcl01
- * Resource action: LVM_22          monitor=120000 on sapcl01
- * Resource action: Filesystem_23   monitor=120000 on sapcl01
- * Resource action: oracle_24       monitor=120000 on sapcl01
- * Resource action: oralsnr_25      monitor=120000 on sapcl01
  * Pseudo action:   all_stopped
  * Resource action: stonith-1       start on sapcl01
  * Pseudo action:   app02_stopped_0
@@ -61,6 +54,12 @@ Executing cluster transition:
  * Resource action: IPaddr_192_168_1_102 start on sapcl01
  * Resource action: LVM_12          start on sapcl01
  * Resource action: Filesystem_13   start on sapcl01
+ * Pseudo action:   oracle_running_0
+ * Resource action: IPaddr_192_168_1_104 monitor=5000 on sapcl01
+ * Resource action: LVM_22          monitor=120000 on sapcl01
+ * Resource action: Filesystem_23   monitor=120000 on sapcl01
+ * Resource action: oracle_24       monitor=120000 on sapcl01
+ * Resource action: oralsnr_25      monitor=120000 on sapcl01
  * Pseudo action:   app02_running_0
  * Resource action: IPaddr_192_168_1_102 monitor=5000 on sapcl01
  * Resource action: LVM_12          monitor=120000 on sapcl01
diff --git a/pengine/test10/rec-node-2.scores b/pengine/test10/rec-node-2.scores
index 6efa92d..68e176f 100644
--- a/pengine/test10/rec-node-2.scores
+++ b/pengine/test10/rec-node-2.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   node1: node is unclean
 Allocation scores:
 group_color: group1 allocation score on node1: 0
 group_color: group1 allocation score on node2: 0
diff --git a/pengine/test10/rec-node-2.summary b/pengine/test10/rec-node-2.summary
index ecf6562..4106abf 100644
--- a/pengine/test10/rec-node-2.summary
+++ b/pengine/test10/rec-node-2.summary
@@ -13,9 +13,8 @@ Online: [ node2 ]
      rsc5	(heartbeat:apache):	Stopped 
      rsc6	(heartbeat:apache):	Stopped 
 
-  notice: Fencing   node1: node is unclean
 Transition Summary:
- * Fence (reboot) node1
+ * Fence (reboot) node1 'node is unclean'
  * Start   stonith-1	(node2)
  * Start   rsc1	(node2)
  * Start   rsc2	(node2)
diff --git a/pengine/test10/rec-node-4.exp b/pengine/test10/rec-node-4.exp
index 00f975e..2aaa34b 100644
--- a/pengine/test10/rec-node-4.exp
+++ b/pengine/test10/rec-node-4.exp
@@ -1,23 +1,23 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="5" operation="start" operation_key="stonith-1_start_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="6" operation="start" operation_key="stonith-1_start_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="stonith-1" class="stonith" type="dummy"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="1" operation="all_stopped" operation_key="all_stopped"/>
+        <pseudo_event id="2" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <rsc_op id="2" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="3" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="2" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="3" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="stonith-1" class="stonith" type="dummy"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -26,41 +26,41 @@
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="7" operation="start" operation_key="rsc1_start_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="8" operation="start" operation_key="rsc1_start_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc1" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="3" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="4" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="10" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0">
+      <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_on_fail="block" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="3" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
       </trigger>
       <trigger>
-        <crm_event id="11" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
+        <rsc_op id="4" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <rsc_op id="3" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="4" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc1" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -69,41 +69,41 @@
   </synapse>
   <synapse id="5">
     <action_set>
-      <rsc_op id="9" operation="start" operation_key="rsc2_start_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="10" operation="start" operation_key="rsc2_start_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc2" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="5" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0"/>
+        <pseudo_event id="9" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="10" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0">
+      <pseudo_event id="9" operation="stop" operation_key="rsc2_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_on_fail="block" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
       </trigger>
       <trigger>
-        <crm_event id="11" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
+        <rsc_op id="5" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <rsc_op id="4" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="5" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc2" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -112,44 +112,43 @@
   </synapse>
   <synapse id="8">
     <action_set>
-      <crm_event id="11" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1">
-        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="uuid1" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="uuid1"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="9">
-    <action_set>
-      <pseudo_event id="10" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="11" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10">
+  <synapse id="9">
     <action_set>
-      <pseudo_event id="1" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="2" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0"/>
+        <pseudo_event id="9" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="10" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="10">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1">
+        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="uuid1" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="uuid1"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/rec-node-4.scores b/pengine/test10/rec-node-4.scores
index e25a30f..1d008ec 100644
--- a/pengine/test10/rec-node-4.scores
+++ b/pengine/test10/rec-node-4.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   node1: node is unclean
 Allocation scores:
 native_color: rsc1 allocation score on node1: -INFINITY
 native_color: rsc1 allocation score on node2: 0
diff --git a/pengine/test10/rec-node-4.summary b/pengine/test10/rec-node-4.summary
index f46a3bb..4a39615 100644
--- a/pengine/test10/rec-node-4.summary
+++ b/pengine/test10/rec-node-4.summary
@@ -7,9 +7,8 @@ Online: [ node2 ]
  rsc1	(heartbeat:apache):	Started node1 (UNCLEAN)
  rsc2	(heartbeat:apache):	Started node1 (UNCLEAN)
 
-  notice: Fencing   node1: node is unclean
 Transition Summary:
- * Fence (reboot) node1
+ * Fence (reboot) node1 'peer is no longer part of the cluster'
  * Start   stonith-1	(node2)
  * Move    rsc1	(Started node1 -> node2)
  * Move    rsc2	(Started node1 -> node2)
@@ -19,9 +18,9 @@ Executing cluster transition:
  * Resource action: rsc1            monitor on node2
  * Resource action: rsc2            monitor on node2
  * Fencing node1 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   rsc1_stop_0
  * Pseudo action:   rsc2_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   all_stopped
  * Resource action: stonith-1       start on node2
  * Resource action: rsc1            start on node2
diff --git a/pengine/test10/rec-node-5.exp b/pengine/test10/rec-node-5.exp
index abae4db..7099236 100644
--- a/pengine/test10/rec-node-5.exp
+++ b/pengine/test10/rec-node-5.exp
@@ -1,20 +1,20 @@
  <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
    <synapse id="0">
      <action_set>
-      <rsc_op id="4" operation="start" operation_key="rsc1_start_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="5" operation="start" operation_key="rsc1_start_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc1" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_timeout="20000" />
        </rsc_op>
      </action_set>
      <inputs>
        <trigger>
-        <rsc_op id="2" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="3" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
        </trigger>
      </inputs>
    </synapse>
   <synapse id="1">
      <action_set>
-      <rsc_op id="2" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="3" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc1" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
        </rsc_op>
@@ -23,20 +23,20 @@
    </synapse>
   <synapse id="2">
      <action_set>
-      <rsc_op id="5" operation="start" operation_key="rsc2_start_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="6" operation="start" operation_key="rsc2_start_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc2" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_timeout="20000" />
        </rsc_op>
      </action_set>
      <inputs>
        <trigger>
-        <rsc_op id="3" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="4" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
        </trigger>
      </inputs>
    </synapse>
   <synapse id="3">
      <action_set>
-      <rsc_op id="3" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="4" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc2" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
diff --git a/pengine/test10/rec-node-6.exp b/pengine/test10/rec-node-6.exp
index 00f975e..2aaa34b 100644
--- a/pengine/test10/rec-node-6.exp
+++ b/pengine/test10/rec-node-6.exp
@@ -1,23 +1,23 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="5" operation="start" operation_key="stonith-1_start_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="6" operation="start" operation_key="stonith-1_start_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="stonith-1" class="stonith" type="dummy"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="1" operation="all_stopped" operation_key="all_stopped"/>
+        <pseudo_event id="2" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <rsc_op id="2" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="3" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="2" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="3" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="stonith-1" class="stonith" type="dummy"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -26,41 +26,41 @@
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="7" operation="start" operation_key="rsc1_start_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="8" operation="start" operation_key="rsc1_start_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc1" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="3" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="4" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="10" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0">
+      <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_on_fail="block" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="3" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
       </trigger>
       <trigger>
-        <crm_event id="11" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
+        <rsc_op id="4" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <rsc_op id="3" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="4" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc1" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -69,41 +69,41 @@
   </synapse>
   <synapse id="5">
     <action_set>
-      <rsc_op id="9" operation="start" operation_key="rsc2_start_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="10" operation="start" operation_key="rsc2_start_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc2" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="5" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0"/>
+        <pseudo_event id="9" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="10" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0">
+      <pseudo_event id="9" operation="stop" operation_key="rsc2_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_on_fail="block" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
       </trigger>
       <trigger>
-        <crm_event id="11" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
+        <rsc_op id="5" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <rsc_op id="4" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="5" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc2" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -112,44 +112,43 @@
   </synapse>
   <synapse id="8">
     <action_set>
-      <crm_event id="11" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1">
-        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="uuid1" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="uuid1"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="9">
-    <action_set>
-      <pseudo_event id="10" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="11" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10">
+  <synapse id="9">
     <action_set>
-      <pseudo_event id="1" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="2" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0"/>
+        <pseudo_event id="9" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="10" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="10">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1">
+        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="uuid1" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="uuid1"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/rec-node-6.scores b/pengine/test10/rec-node-6.scores
index e25a30f..1d008ec 100644
--- a/pengine/test10/rec-node-6.scores
+++ b/pengine/test10/rec-node-6.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   node1: node is unclean
 Allocation scores:
 native_color: rsc1 allocation score on node1: -INFINITY
 native_color: rsc1 allocation score on node2: 0
diff --git a/pengine/test10/rec-node-6.summary b/pengine/test10/rec-node-6.summary
index 37257fe..6cb8d01 100644
--- a/pengine/test10/rec-node-6.summary
+++ b/pengine/test10/rec-node-6.summary
@@ -7,9 +7,8 @@ Online: [ node2 ]
  rsc1	(heartbeat:apache):	Started node1
  rsc2	(heartbeat:apache):	Started node1
 
-  notice: Fencing   node1: node is unclean
 Transition Summary:
- * Fence (reboot) node1
+ * Fence (reboot) node1 'peer process is no longer available'
  * Start   stonith-1	(node2)
  * Move    rsc1	(Started node1 -> node2)
  * Move    rsc2	(Started node1 -> node2)
@@ -19,9 +18,9 @@ Executing cluster transition:
  * Resource action: rsc1            monitor on node2
  * Resource action: rsc2            monitor on node2
  * Fencing node1 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   rsc1_stop_0
  * Pseudo action:   rsc2_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   all_stopped
  * Resource action: stonith-1       start on node2
  * Resource action: rsc1            start on node2
diff --git a/pengine/test10/rec-node-7.exp b/pengine/test10/rec-node-7.exp
index 00f975e..2aaa34b 100644
--- a/pengine/test10/rec-node-7.exp
+++ b/pengine/test10/rec-node-7.exp
@@ -1,23 +1,23 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="5" operation="start" operation_key="stonith-1_start_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="6" operation="start" operation_key="stonith-1_start_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="stonith-1" class="stonith" type="dummy"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="1" operation="all_stopped" operation_key="all_stopped"/>
+        <pseudo_event id="2" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <rsc_op id="2" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="3" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="2" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="3" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="stonith-1" class="stonith" type="dummy"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -26,41 +26,41 @@
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="7" operation="start" operation_key="rsc1_start_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="8" operation="start" operation_key="rsc1_start_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc1" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="3" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="4" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="10" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0">
+      <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_on_fail="block" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="3" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
       </trigger>
       <trigger>
-        <crm_event id="11" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
+        <rsc_op id="4" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <rsc_op id="3" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="4" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc1" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -69,41 +69,41 @@
   </synapse>
   <synapse id="5">
     <action_set>
-      <rsc_op id="9" operation="start" operation_key="rsc2_start_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="10" operation="start" operation_key="rsc2_start_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc2" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="5" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0"/>
+        <pseudo_event id="9" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="10" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0">
+      <pseudo_event id="9" operation="stop" operation_key="rsc2_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_on_fail="block" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
       </trigger>
       <trigger>
-        <crm_event id="11" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
+        <rsc_op id="5" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <rsc_op id="4" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="5" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc2" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -112,44 +112,43 @@
   </synapse>
   <synapse id="8">
     <action_set>
-      <crm_event id="11" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1">
-        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="uuid1" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="uuid1"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="9">
-    <action_set>
-      <pseudo_event id="10" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="11" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10">
+  <synapse id="9">
     <action_set>
-      <pseudo_event id="1" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="2" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0"/>
+        <pseudo_event id="9" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="10" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="10">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="uuid1">
+        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="uuid1" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="uuid1"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/rec-node-7.scores b/pengine/test10/rec-node-7.scores
index e25a30f..1d008ec 100644
--- a/pengine/test10/rec-node-7.scores
+++ b/pengine/test10/rec-node-7.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   node1: node is unclean
 Allocation scores:
 native_color: rsc1 allocation score on node1: -INFINITY
 native_color: rsc1 allocation score on node2: 0
diff --git a/pengine/test10/rec-node-7.summary b/pengine/test10/rec-node-7.summary
index f46a3bb..4a39615 100644
--- a/pengine/test10/rec-node-7.summary
+++ b/pengine/test10/rec-node-7.summary
@@ -7,9 +7,8 @@ Online: [ node2 ]
  rsc1	(heartbeat:apache):	Started node1 (UNCLEAN)
  rsc2	(heartbeat:apache):	Started node1 (UNCLEAN)
 
-  notice: Fencing   node1: node is unclean
 Transition Summary:
- * Fence (reboot) node1
+ * Fence (reboot) node1 'peer is no longer part of the cluster'
  * Start   stonith-1	(node2)
  * Move    rsc1	(Started node1 -> node2)
  * Move    rsc2	(Started node1 -> node2)
@@ -19,9 +18,9 @@ Executing cluster transition:
  * Resource action: rsc1            monitor on node2
  * Resource action: rsc2            monitor on node2
  * Fencing node1 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   rsc1_stop_0
  * Pseudo action:   rsc2_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   all_stopped
  * Resource action: stonith-1       start on node2
  * Resource action: rsc1            start on node2
diff --git a/pengine/test10/rec-node-8.exp b/pengine/test10/rec-node-8.exp
index 78a972c..334e62a 100644
--- a/pengine/test10/rec-node-8.exp
+++ b/pengine/test10/rec-node-8.exp
@@ -1,7 +1,7 @@
  <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
    <synapse id="0">
      <action_set>
-      <rsc_op id="2" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="3" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="stonith-1" class="stonith" type="dummy"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -10,7 +10,7 @@
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="3" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="4" operation="monitor" operation_key="rsc1_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc1" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -19,7 +19,7 @@
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="4" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="5" operation="monitor" operation_key="rsc2_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc2" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
        </rsc_op>
@@ -28,7 +28,7 @@
    </synapse>
   <synapse id="3">
      <action_set>
-      <rsc_op id="5" operation="monitor" operation_key="rsc3_monitor_0" on_node="node2" on_node_uuid="uuid2">
+      <rsc_op id="6" operation="monitor" operation_key="rsc3_monitor_0" on_node="node2" on_node_uuid="uuid2">
         <primitive id="rsc3" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
        </rsc_op>
diff --git a/pengine/test10/rec-rsc-5.exp b/pengine/test10/rec-rsc-5.exp
index a690d68..b1f151b 100644
--- a/pengine/test10/rec-rsc-5.exp
+++ b/pengine/test10/rec-rsc-5.exp
@@ -1,23 +1,23 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="5" operation="start" operation_key="stonith-1_start_0" on_node="node1" on_node_uuid="uuid1">
+      <rsc_op id="6" operation="start" operation_key="stonith-1_start_0" on_node="node1" on_node_uuid="uuid1">
         <primitive id="stonith-1" class="stonith" type="dummy"/>
         <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="uuid1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="1" operation="all_stopped" operation_key="all_stopped"/>
+        <pseudo_event id="2" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <rsc_op id="2" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node1" on_node_uuid="uuid1"/>
+        <rsc_op id="3" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node1" on_node_uuid="uuid1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="2" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node1" on_node_uuid="uuid1">
+      <rsc_op id="3" operation="monitor" operation_key="stonith-1_monitor_0" on_node="node1" on_node_uuid="uuid1">
         <primitive id="stonith-1" class="stonith" type="dummy"/>
         <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="uuid1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -26,41 +26,41 @@
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="7" operation="start" operation_key="rsc1_start_0" on_node="node1" on_node_uuid="uuid1">
+      <rsc_op id="8" operation="start" operation_key="rsc1_start_0" on_node="node1" on_node_uuid="uuid1">
         <primitive id="rsc1" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="uuid1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="3" operation="monitor" operation_key="rsc1_monitor_0" on_node="node1" on_node_uuid="uuid1"/>
+        <rsc_op id="4" operation="monitor" operation_key="rsc1_monitor_0" on_node="node1" on_node_uuid="uuid1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="10" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0">
+      <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_on_fail="fence" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="3" operation="monitor" operation_key="rsc1_monitor_0" on_node="node1" on_node_uuid="uuid1"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
       <trigger>
-        <crm_event id="11" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="4" operation="monitor" operation_key="rsc1_monitor_0" on_node="node1" on_node_uuid="uuid1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <rsc_op id="3" operation="monitor" operation_key="rsc1_monitor_0" on_node="node1" on_node_uuid="uuid1">
+      <rsc_op id="4" operation="monitor" operation_key="rsc1_monitor_0" on_node="node1" on_node_uuid="uuid1">
         <primitive id="rsc1" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="uuid1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -69,41 +69,41 @@
   </synapse>
   <synapse id="5">
     <action_set>
-      <rsc_op id="9" operation="start" operation_key="rsc2_start_0" on_node="node1" on_node_uuid="uuid1">
+      <rsc_op id="10" operation="start" operation_key="rsc2_start_0" on_node="node1" on_node_uuid="uuid1">
         <primitive id="rsc2" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="uuid1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="rsc2_monitor_0" on_node="node1" on_node_uuid="uuid1"/>
+        <rsc_op id="5" operation="monitor" operation_key="rsc2_monitor_0" on_node="node1" on_node_uuid="uuid1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0"/>
+        <pseudo_event id="9" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="10" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0">
+      <pseudo_event id="9" operation="stop" operation_key="rsc2_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_on_fail="fence" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="rsc2_monitor_0" on_node="node1" on_node_uuid="uuid1"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
       <trigger>
-        <crm_event id="11" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="uuid2"/>
+        <rsc_op id="5" operation="monitor" operation_key="rsc2_monitor_0" on_node="node1" on_node_uuid="uuid1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <rsc_op id="4" operation="monitor" operation_key="rsc2_monitor_0" on_node="node1" on_node_uuid="uuid1">
+      <rsc_op id="5" operation="monitor" operation_key="rsc2_monitor_0" on_node="node1" on_node_uuid="uuid1">
         <primitive id="rsc2" class="heartbeat" type="apache"/>
         <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="uuid1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -112,44 +112,43 @@
   </synapse>
   <synapse id="8">
     <action_set>
-      <crm_event id="11" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="uuid2">
-        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="uuid2"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="9">
-    <action_set>
-      <pseudo_event id="10" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="11" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="uuid2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="uuid2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10">
+  <synapse id="9">
     <action_set>
-      <pseudo_event id="1" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="2" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0"/>
+        <pseudo_event id="9" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="10" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="10">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="uuid2">
+        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="uuid2" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="uuid2"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/rec-rsc-5.scores b/pengine/test10/rec-rsc-5.scores
index ebaedbd..1c640ae 100644
--- a/pengine/test10/rec-rsc-5.scores
+++ b/pengine/test10/rec-rsc-5.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   node2: node is unclean
 Allocation scores:
 native_color: rsc1 allocation score on node1: 0
 native_color: rsc1 allocation score on node2: -INFINITY
diff --git a/pengine/test10/rec-rsc-5.summary b/pengine/test10/rec-rsc-5.summary
index 6bc4010..28e29b5 100644
--- a/pengine/test10/rec-rsc-5.summary
+++ b/pengine/test10/rec-rsc-5.summary
@@ -7,9 +7,8 @@ Online: [ node1 ]
  rsc1	(heartbeat:apache):	FAILED node2 
  rsc2	(heartbeat:apache):	Started node2
 
-  notice: Fencing   node2: node is unclean
 Transition Summary:
- * Fence (reboot) node2
+ * Fence (reboot) node2 'rsc1 failed there'
  * Start   stonith-1	(node1)
  * Recover rsc1	(Started node2 -> node1)
  * Move    rsc2	(Started node2 -> node1)
@@ -19,9 +18,9 @@ Executing cluster transition:
  * Resource action: rsc1            monitor on node1
  * Resource action: rsc2            monitor on node1
  * Fencing node2 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   rsc1_stop_0
  * Pseudo action:   rsc2_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   all_stopped
  * Resource action: stonith-1       start on node1
  * Resource action: rsc1            start on node1
diff --git a/pengine/test10/remote-fence-before-reconnect.exp b/pengine/test10/remote-fence-before-reconnect.exp
index 54c9106..736f64f 100644
--- a/pengine/test10/remote-fence-before-reconnect.exp
+++ b/pengine/test10/remote-fence-before-reconnect.exp
@@ -1,7 +1,7 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="4" operation="stop" operation_key="c7auto4_stop_0" on_node="c7auto1" on_node_uuid="1">
+      <rsc_op id="5" operation="stop" operation_key="c7auto4_stop_0" on_node="c7auto1" on_node_uuid="1">
         <primitive id="c7auto4" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="c7auto1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="60000"  reconnect_interval="1m"/>
         <downed>
@@ -11,90 +11,90 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="13" operation="stop" operation_key="fake2_stop_0"/>
+        <pseudo_event id="14" operation="stop" operation_key="fake2_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="15" operation="monitor" operation_key="fake2_monitor_10000" on_node="c7auto1" on_node_uuid="1">
+      <rsc_op id="16" operation="monitor" operation_key="fake2_monitor_10000" on_node="c7auto1" on_node_uuid="1">
         <primitive id="fake2" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="c7auto1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="14" operation="start" operation_key="fake2_start_0" on_node="c7auto1" on_node_uuid="1"/>
+        <rsc_op id="15" operation="start" operation_key="fake2_start_0" on_node="c7auto1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="14" operation="start" operation_key="fake2_start_0" on_node="c7auto1" on_node_uuid="1">
+      <rsc_op id="15" operation="start" operation_key="fake2_start_0" on_node="c7auto1" on_node_uuid="1">
         <primitive id="fake2" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="c7auto1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="13" operation="stop" operation_key="fake2_stop_0"/>
+        <pseudo_event id="14" operation="stop" operation_key="fake2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="22" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="23" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="13" operation="stop" operation_key="fake2_stop_0">
+      <pseudo_event id="14" operation="stop" operation_key="fake2_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="23" operation="stonith" operation_key="stonith-c7auto4-reboot" on_node="c7auto4" on_node_uuid="c7auto4"/>
+        <crm_event id="4" operation="stonith" operation_key="stonith-c7auto4-reboot" on_node="c7auto4" on_node_uuid="c7auto4"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <crm_event id="23" operation="stonith" operation_key="stonith-c7auto4-reboot" on_node="c7auto4" on_node_uuid="c7auto4">
-        <attributes CRM_meta_on_node="c7auto4" CRM_meta_on_node_uuid="c7auto4" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="c7auto4"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="5">
-    <action_set>
-      <pseudo_event id="22" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="23" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="23" operation="stonith" operation_key="stonith-c7auto4-reboot" on_node="c7auto4" on_node_uuid="c7auto4"/>
+        <crm_event id="4" operation="stonith" operation_key="stonith-c7auto4-reboot" on_node="c7auto4" on_node_uuid="c7auto4"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="6">
+  <synapse id="5">
     <action_set>
-      <pseudo_event id="8" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="9" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="stop" operation_key="c7auto4_stop_0" on_node="c7auto1" on_node_uuid="1"/>
+        <rsc_op id="5" operation="stop" operation_key="c7auto4_stop_0" on_node="c7auto1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="13" operation="stop" operation_key="fake2_stop_0"/>
+        <pseudo_event id="14" operation="stop" operation_key="fake2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="22" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="23" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="6">
+    <action_set>
+      <crm_event id="4" operation="stonith" operation_key="stonith-c7auto4-reboot" on_node="c7auto4" on_node_uuid="c7auto4">
+        <attributes CRM_meta_on_node="c7auto4" CRM_meta_on_node_uuid="c7auto4" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="c7auto4"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
diff --git a/pengine/test10/remote-fence-before-reconnect.scores b/pengine/test10/remote-fence-before-reconnect.scores
index 9423693..fb46919 100644
--- a/pengine/test10/remote-fence-before-reconnect.scores
+++ b/pengine/test10/remote-fence-before-reconnect.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   c7auto4: node is unclean
 Allocation scores:
 native_color: c7auto4 allocation score on c7auto1: -INFINITY
 native_color: c7auto4 allocation score on c7auto2: -INFINITY
diff --git a/pengine/test10/remote-fence-before-reconnect.summary b/pengine/test10/remote-fence-before-reconnect.summary
index f477884..7a22551 100644
--- a/pengine/test10/remote-fence-before-reconnect.summary
+++ b/pengine/test10/remote-fence-before-reconnect.summary
@@ -11,16 +11,15 @@ Online: [ c7auto1 c7auto2 c7auto3 ]
  fake4	(ocf::heartbeat:Dummy):	Started c7auto2
  fake5	(ocf::heartbeat:Dummy):	Started c7auto3
 
-  notice: Fencing   c7auto4: node is unclean
 Transition Summary:
- * Fence (reboot) c7auto4
+ * Fence (reboot) c7auto4 'remote connection is unrecoverable'
  * Stop    c7auto4	(c7auto1)
  * Move    fake2	(Started c7auto4 -> c7auto1)
 
 Executing cluster transition:
  * Fencing c7auto4 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   fake2_stop_0
+ * Pseudo action:   stonith_complete
  * Resource action: c7auto4         stop on c7auto1
  * Resource action: fake2           start on c7auto1
  * Pseudo action:   all_stopped
diff --git a/pengine/test10/remote-fence-unclean-3.exp b/pengine/test10/remote-fence-unclean-3.exp
index 2e341bd..5bf7eb3 100644
--- a/pengine/test10/remote-fence-unclean-3.exp
+++ b/pengine/test10/remote-fence-unclean-3.exp
@@ -1,20 +1,20 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="47" operation="monitor" operation_key="fence1_monitor_60000" on_node="overcloud-controller-0" on_node_uuid="1">
+      <rsc_op id="48" operation="monitor" operation_key="fence1_monitor_60000" on_node="overcloud-controller-0" on_node_uuid="1">
         <primitive id="fence1" class="stonith" type="fence_xvm"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  multicast_address="225.0.0.2"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="46" operation="start" operation_key="fence1_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
+        <rsc_op id="47" operation="start" operation_key="fence1_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="46" operation="start" operation_key="fence1_start_0" on_node="overcloud-controller-0" on_node_uuid="1">
+      <rsc_op id="47" operation="start" operation_key="fence1_start_0" on_node="overcloud-controller-0" on_node_uuid="1">
         <primitive id="fence1" class="stonith" type="fence_xvm"/>
         <attributes CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  multicast_address="225.0.0.2"/>
       </rsc_op>
@@ -75,27 +75,27 @@
   </synapse>
   <synapse id="6">
     <action_set>
-      <crm_event id="185" operation="stonith" operation_key="stonith-overcloud-novacompute-0-reboot" on_node="overcloud-novacompute-0" on_node_uuid="overcloud-novacompute-0">
-        <attributes CRM_meta_compute_role="true" CRM_meta_on_node="overcloud-novacompute-0" CRM_meta_on_node_uuid="overcloud-novacompute-0" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="overcloud-novacompute-0"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="7">
-    <action_set>
-      <pseudo_event id="184" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="185" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="185" operation="stonith" operation_key="stonith-overcloud-novacompute-0-reboot" on_node="overcloud-novacompute-0" on_node_uuid="overcloud-novacompute-0"/>
+        <crm_event id="46" operation="stonith" operation_key="stonith-overcloud-novacompute-0-reboot" on_node="overcloud-novacompute-0" on_node_uuid="overcloud-novacompute-0"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="7">
+    <action_set>
+      <crm_event id="46" operation="stonith" operation_key="stonith-overcloud-novacompute-0-reboot" on_node="overcloud-novacompute-0" on_node_uuid="overcloud-novacompute-0">
+        <attributes CRM_meta_compute_role="true" CRM_meta_on_node="overcloud-novacompute-0" CRM_meta_on_node_uuid="overcloud-novacompute-0" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="overcloud-novacompute-0"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
   <synapse id="8">
     <action_set>
       <pseudo_event id="42" operation="all_stopped" operation_key="all_stopped">
@@ -107,7 +107,7 @@
         <rsc_op id="30" operation="stop" operation_key="overcloud-novacompute-0_stop_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="184" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="185" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/remote-fence-unclean-3.scores b/pengine/test10/remote-fence-unclean-3.scores
index 283a599..77d71d6 100644
--- a/pengine/test10/remote-fence-unclean-3.scores
+++ b/pengine/test10/remote-fence-unclean-3.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   overcloud-novacompute-0: node is unclean
 Allocation scores:
 clone_color: galera-bundle-master allocation score on galera-bundle-0: 0
 clone_color: galera-bundle-master allocation score on galera-bundle-1: 0
diff --git a/pengine/test10/remote-fence-unclean-3.summary b/pengine/test10/remote-fence-unclean-3.summary
index ec5d304..6d15598 100644
--- a/pengine/test10/remote-fence-unclean-3.summary
+++ b/pengine/test10/remote-fence-unclean-3.summary
@@ -33,9 +33,8 @@ Containers: [ galera-bundle-0:galera-bundle-docker-0 galera-bundle-1:galera-bund
  Docker container: openstack-cinder-backup [192.168.24.1:8787/tripleoupstream/centos-binary-cinder-backup:latest]
    openstack-cinder-backup-docker-0	(ocf::heartbeat:docker):	Started overcloud-controller-1
 
-  notice: Fencing   overcloud-novacompute-0: node is unclean
 Transition Summary:
- * Fence (reboot) overcloud-novacompute-0
+ * Fence (reboot) overcloud-novacompute-0 'the connection is unrecoverable'
  * Start   fence1	(overcloud-controller-0)
  * Stop    overcloud-novacompute-0	(overcloud-controller-0)
 
diff --git a/pengine/test10/remote-fence-unclean.exp b/pengine/test10/remote-fence-unclean.exp
index d2c3617..3a07384 100644
--- a/pengine/test10/remote-fence-unclean.exp
+++ b/pengine/test10/remote-fence-unclean.exp
@@ -1,23 +1,23 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="10" operation="start" operation_key="remote1_start_0" on_node="18node1" on_node_uuid="1">
+      <rsc_op id="11" operation="start" operation_key="remote1_start_0" on_node="18node1" on_node_uuid="1">
         <primitive id="remote1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_on_node="18node1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="5" operation="stop" operation_key="remote1_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="6" operation="stop" operation_key="remote1_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="22" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="23" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="5" operation="stop" operation_key="remote1_stop_0" on_node="18node1" on_node_uuid="1">
+      <rsc_op id="6" operation="stop" operation_key="remote1_stop_0" on_node="18node1" on_node_uuid="1">
         <primitive id="remote1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_on_node="18node1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" />
         <downed>
@@ -27,7 +27,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="13" operation="stop" operation_key="FAKE2_stop_0"/>
+        <pseudo_event id="14" operation="stop" operation_key="FAKE2_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -40,83 +40,83 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="10" operation="start" operation_key="remote1_start_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="11" operation="start" operation_key="remote1_start_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="15" operation="monitor" operation_key="FAKE2_monitor_60000" on_node="18builder" on_node_uuid="5">
+      <rsc_op id="16" operation="monitor" operation_key="FAKE2_monitor_60000" on_node="18builder" on_node_uuid="5">
         <primitive id="FAKE2" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="14" operation="start" operation_key="FAKE2_start_0" on_node="18builder" on_node_uuid="5"/>
+        <rsc_op id="15" operation="start" operation_key="FAKE2_start_0" on_node="18builder" on_node_uuid="5"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <rsc_op id="14" operation="start" operation_key="FAKE2_start_0" on_node="18builder" on_node_uuid="5">
+      <rsc_op id="15" operation="start" operation_key="FAKE2_start_0" on_node="18builder" on_node_uuid="5">
         <primitive id="FAKE2" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="13" operation="stop" operation_key="FAKE2_stop_0"/>
+        <pseudo_event id="14" operation="stop" operation_key="FAKE2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="22" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="23" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <pseudo_event id="13" operation="stop" operation_key="FAKE2_stop_0">
+      <pseudo_event id="14" operation="stop" operation_key="FAKE2_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="23" operation="stonith" operation_key="stonith-remote1-reboot" on_node="remote1" on_node_uuid="remote1"/>
+        <crm_event id="5" operation="stonith" operation_key="stonith-remote1-reboot" on_node="remote1" on_node_uuid="remote1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <rsc_op id="18" operation="monitor" operation_key="FAKE3_monitor_60000" on_node="18node1" on_node_uuid="1">
+      <rsc_op id="19" operation="monitor" operation_key="FAKE3_monitor_60000" on_node="18node1" on_node_uuid="1">
         <primitive id="FAKE3" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="18node1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="17" operation="start" operation_key="FAKE3_start_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="18" operation="start" operation_key="FAKE3_start_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <rsc_op id="17" operation="start" operation_key="FAKE3_start_0" on_node="18node1" on_node_uuid="1">
+      <rsc_op id="18" operation="start" operation_key="FAKE3_start_0" on_node="18node1" on_node_uuid="1">
         <primitive id="FAKE3" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_on_node="18node1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="16" operation="stop" operation_key="FAKE3_stop_0" on_node="18builder" on_node_uuid="5"/>
+        <rsc_op id="17" operation="stop" operation_key="FAKE3_stop_0" on_node="18builder" on_node_uuid="5"/>
       </trigger>
       <trigger>
-        <pseudo_event id="22" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="23" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <rsc_op id="16" operation="stop" operation_key="FAKE3_stop_0" on_node="18builder" on_node_uuid="5">
+      <rsc_op id="17" operation="stop" operation_key="FAKE3_stop_0" on_node="18builder" on_node_uuid="5">
         <primitive id="FAKE3" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -125,36 +125,36 @@
   </synapse>
   <synapse id="9">
     <action_set>
-      <rsc_op id="21" operation="monitor" operation_key="FAKE4_monitor_60000" on_node="18node2" on_node_uuid="2">
+      <rsc_op id="22" operation="monitor" operation_key="FAKE4_monitor_60000" on_node="18node2" on_node_uuid="2">
         <primitive id="FAKE4" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="20" operation="start" operation_key="FAKE4_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="21" operation="start" operation_key="FAKE4_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="20" operation="start" operation_key="FAKE4_start_0" on_node="18node2" on_node_uuid="2">
+      <rsc_op id="21" operation="start" operation_key="FAKE4_start_0" on_node="18node2" on_node_uuid="2">
         <primitive id="FAKE4" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="19" operation="stop" operation_key="FAKE4_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="20" operation="stop" operation_key="FAKE4_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="22" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="23" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="19" operation="stop" operation_key="FAKE4_stop_0" on_node="18node1" on_node_uuid="1">
+      <rsc_op id="20" operation="stop" operation_key="FAKE4_stop_0" on_node="18node1" on_node_uuid="1">
         <primitive id="FAKE4" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_on_node="18node1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -163,49 +163,49 @@
   </synapse>
   <synapse id="12">
     <action_set>
-      <crm_event id="23" operation="stonith" operation_key="stonith-remote1-reboot" on_node="remote1" on_node_uuid="remote1">
-        <attributes CRM_meta_on_node="remote1" CRM_meta_on_node_uuid="remote1" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="remote1"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="13">
-    <action_set>
-      <pseudo_event id="22" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="23" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="23" operation="stonith" operation_key="stonith-remote1-reboot" on_node="remote1" on_node_uuid="remote1"/>
+        <crm_event id="5" operation="stonith" operation_key="stonith-remote1-reboot" on_node="remote1" on_node_uuid="remote1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14">
+  <synapse id="13">
     <action_set>
-      <pseudo_event id="7" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="8" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="5" operation="stop" operation_key="remote1_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="6" operation="stop" operation_key="remote1_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="13" operation="stop" operation_key="FAKE2_stop_0"/>
+        <pseudo_event id="14" operation="stop" operation_key="FAKE2_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="16" operation="stop" operation_key="FAKE3_stop_0" on_node="18builder" on_node_uuid="5"/>
+        <rsc_op id="17" operation="stop" operation_key="FAKE3_stop_0" on_node="18builder" on_node_uuid="5"/>
       </trigger>
       <trigger>
-        <rsc_op id="19" operation="stop" operation_key="FAKE4_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="20" operation="stop" operation_key="FAKE4_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="22" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="23" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="14">
+    <action_set>
+      <crm_event id="5" operation="stonith" operation_key="stonith-remote1-reboot" on_node="remote1" on_node_uuid="remote1">
+        <attributes CRM_meta_on_node="remote1" CRM_meta_on_node_uuid="remote1" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="remote1"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
diff --git a/pengine/test10/remote-fence-unclean.scores b/pengine/test10/remote-fence-unclean.scores
index 038ca2e..8d29662 100644
--- a/pengine/test10/remote-fence-unclean.scores
+++ b/pengine/test10/remote-fence-unclean.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   remote1: node is unclean
 Allocation scores:
 native_color: FAKE1 allocation score on 18builder: 0
 native_color: FAKE1 allocation score on 18node1: 0
diff --git a/pengine/test10/remote-fence-unclean.summary b/pengine/test10/remote-fence-unclean.summary
index 8f37909..9830b96 100644
--- a/pengine/test10/remote-fence-unclean.summary
+++ b/pengine/test10/remote-fence-unclean.summary
@@ -10,9 +10,8 @@ Online: [ 18builder 18node1 18node2 ]
  FAKE3	(ocf::heartbeat:Dummy):	Started 18builder 
  FAKE4	(ocf::heartbeat:Dummy):	Started 18node1 
 
-  notice: Fencing   remote1: node is unclean
 Transition Summary:
- * Fence (reboot) remote1
+ * Fence (reboot) remote1 'remote connection is unrecoverable'
  * Recover remote1	(Started 18node1)
  * Move    FAKE2	(Started remote1 -> 18builder)
  * Move    FAKE3	(Started 18builder -> 18node1)
@@ -22,18 +21,18 @@ Executing cluster transition:
  * Resource action: FAKE3           stop on 18builder
  * Resource action: FAKE4           stop on 18node1
  * Fencing remote1 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   FAKE2_stop_0
- * Resource action: FAKE3           start on 18node1
- * Resource action: FAKE4           start on 18node2
+ * Pseudo action:   stonith_complete
  * Resource action: remote1         stop on 18node1
  * Resource action: FAKE2           start on 18builder
- * Resource action: FAKE3           monitor=60000 on 18node1
- * Resource action: FAKE4           monitor=60000 on 18node2
+ * Resource action: FAKE3           start on 18node1
+ * Resource action: FAKE4           start on 18node2
  * Pseudo action:   all_stopped
  * Resource action: remote1         start on 18node1
  * Resource action: remote1         monitor=60000 on 18node1
  * Resource action: FAKE2           monitor=60000 on 18builder
+ * Resource action: FAKE3           monitor=60000 on 18node1
+ * Resource action: FAKE4           monitor=60000 on 18node2
 
 Revised cluster status:
 Online: [ 18builder 18node1 18node2 ]
diff --git a/pengine/test10/remote-fence-unclean2.exp b/pengine/test10/remote-fence-unclean2.exp
index c28832b..c9c45ae 100644
--- a/pengine/test10/remote-fence-unclean2.exp
+++ b/pengine/test10/remote-fence-unclean2.exp
@@ -1,52 +1,52 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <pseudo_event id="2" operation="stop" operation_key="fake_stop_0">
+      <pseudo_event id="3" operation="stop" operation_key="fake_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="4" operation="stonith" operation_key="stonith-rhel7-alt4-reboot" on_node="rhel7-alt4" on_node_uuid="rhel7-alt4"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-rhel7-alt4-reboot" on_node="rhel7-alt4" on_node_uuid="rhel7-alt4"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <crm_event id="4" operation="stonith" operation_key="stonith-rhel7-alt4-reboot" on_node="rhel7-alt4" on_node_uuid="rhel7-alt4">
-        <attributes CRM_meta_last_failure_fake="1411503989" CRM_meta_on_node="rhel7-alt4" CRM_meta_on_node_uuid="rhel7-alt4" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="rhel7-alt4"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="2">
-    <action_set>
-      <pseudo_event id="3" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="4" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="4" operation="stonith" operation_key="stonith-rhel7-alt4-reboot" on_node="rhel7-alt4" on_node_uuid="rhel7-alt4"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-rhel7-alt4-reboot" on_node="rhel7-alt4" on_node_uuid="rhel7-alt4"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="3">
+  <synapse id="2">
     <action_set>
-      <pseudo_event id="1" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="2" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="2" operation="stop" operation_key="fake_stop_0"/>
+        <pseudo_event id="3" operation="stop" operation_key="fake_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="3" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="4" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="3">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-rhel7-alt4-reboot" on_node="rhel7-alt4" on_node_uuid="rhel7-alt4">
+        <attributes CRM_meta_last_failure_fake="1411503989" CRM_meta_on_node="rhel7-alt4" CRM_meta_on_node_uuid="rhel7-alt4" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="rhel7-alt4"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
diff --git a/pengine/test10/remote-fence-unclean2.scores b/pengine/test10/remote-fence-unclean2.scores
index 937d0eb..10fc7fd 100644
--- a/pengine/test10/remote-fence-unclean2.scores
+++ b/pengine/test10/remote-fence-unclean2.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   rhel7-alt4: node is unclean
 Allocation scores:
 native_color: fake allocation score on rhel7-alt1: 0
 native_color: fake allocation score on rhel7-alt2: 0
diff --git a/pengine/test10/remote-fence-unclean2.summary b/pengine/test10/remote-fence-unclean2.summary
index 060d55e..bf7f907 100644
--- a/pengine/test10/remote-fence-unclean2.summary
+++ b/pengine/test10/remote-fence-unclean2.summary
@@ -9,15 +9,14 @@ OFFLINE: [ rhel7-alt3 ]
  rhel7-alt4	(ocf::pacemaker:remote):	Stopped 
  fake	(ocf::heartbeat:Dummy):	Started rhel7-alt4 (UNCLEAN)
 
-  notice: Fencing   rhel7-alt4: node is unclean
 Transition Summary:
- * Fence (reboot) rhel7-alt4
+ * Fence (reboot) rhel7-alt4 'fake is active there (fencing will be revoked if remote connection can be re-established elsewhere)'
  * Stop    fake	(rhel7-alt4)
 
 Executing cluster transition:
  * Fencing rhel7-alt4 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   fake_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   all_stopped
 
 Revised cluster status:
diff --git a/pengine/test10/remote-partial-migrate2.exp b/pengine/test10/remote-partial-migrate2.exp
index 54d1ded..abf281f 100644
--- a/pengine/test10/remote-partial-migrate2.exp
+++ b/pengine/test10/remote-partial-migrate2.exp
@@ -1,195 +1,195 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="63" operation="migrate_from" operation_key="pcmk_remote2_migrate_from_0" on_node="pcmk1" on_node_uuid="1">
+      <rsc_op id="64" operation="migrate_from" operation_key="pcmk_remote2_migrate_from_0" on_node="pcmk1" on_node_uuid="1">
         <primitive id="pcmk_remote2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_migrate_source="pcmk3" CRM_meta_migrate_target="pcmk1" CRM_meta_on_node="pcmk1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  server="172.17.201.2"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="62" operation="monitor" operation_key="pcmk_remote2_monitor_60000" on_node="pcmk1" on_node_uuid="1">
+      <rsc_op id="63" operation="monitor" operation_key="pcmk_remote2_monitor_60000" on_node="pcmk1" on_node_uuid="1">
         <primitive id="pcmk_remote2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="30000"  server="172.17.201.2"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="61" operation="start" operation_key="pcmk_remote2_start_0"/>
+        <pseudo_event id="62" operation="start" operation_key="pcmk_remote2_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="61" operation="start" operation_key="pcmk_remote2_start_0">
+      <pseudo_event id="62" operation="start" operation_key="pcmk_remote2_start_0">
         <attributes CRM_meta_name="start" CRM_meta_timeout="10000"  server="172.17.201.2"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="60" operation="stop" operation_key="pcmk_remote2_stop_0" on_node="pcmk3" on_node_uuid="3"/>
+        <rsc_op id="61" operation="stop" operation_key="pcmk_remote2_stop_0" on_node="pcmk3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="63" operation="migrate_from" operation_key="pcmk_remote2_migrate_from_0" on_node="pcmk1" on_node_uuid="1"/>
+        <rsc_op id="64" operation="migrate_from" operation_key="pcmk_remote2_migrate_from_0" on_node="pcmk1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="60" operation="stop" operation_key="pcmk_remote2_stop_0" on_node="pcmk3" on_node_uuid="3">
+      <rsc_op id="61" operation="stop" operation_key="pcmk_remote2_stop_0" on_node="pcmk3" on_node_uuid="3">
         <primitive id="pcmk_remote2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="pcmk3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="60000"  server="172.17.201.2"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="63" operation="migrate_from" operation_key="pcmk_remote2_migrate_from_0" on_node="pcmk1" on_node_uuid="1"/>
+        <rsc_op id="64" operation="migrate_from" operation_key="pcmk_remote2_migrate_from_0" on_node="pcmk1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <rsc_op id="67" operation="monitor" operation_key="pcmk_remote4_monitor_60000" on_node="pcmk2" on_node_uuid="2">
+      <rsc_op id="68" operation="monitor" operation_key="pcmk_remote4_monitor_60000" on_node="pcmk2" on_node_uuid="2">
         <primitive id="pcmk_remote4" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="30000"  server="172.17.201.4"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="67" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <rsc_op id="66" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2">
+      <rsc_op id="67" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2">
         <primitive id="pcmk_remote4" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="pcmk2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="10000"  server="172.17.201.4"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <rsc_op id="72" operation="migrate_from" operation_key="pcmk_remote5_migrate_from_0" on_node="pcmk2" on_node_uuid="2">
+      <rsc_op id="73" operation="migrate_from" operation_key="pcmk_remote5_migrate_from_0" on_node="pcmk2" on_node_uuid="2">
         <primitive id="pcmk_remote5" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_migrate_source="pcmk1" CRM_meta_migrate_target="pcmk2" CRM_meta_on_node="pcmk2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000"  server="172.17.201.5"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="71" operation="migrate_to" operation_key="pcmk_remote5_migrate_to_0" on_node="pcmk1" on_node_uuid="1"/>
+        <rsc_op id="72" operation="migrate_to" operation_key="pcmk_remote5_migrate_to_0" on_node="pcmk1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <rsc_op id="71" operation="migrate_to" operation_key="pcmk_remote5_migrate_to_0" on_node="pcmk1" on_node_uuid="1">
+      <rsc_op id="72" operation="migrate_to" operation_key="pcmk_remote5_migrate_to_0" on_node="pcmk1" on_node_uuid="1">
         <primitive id="pcmk_remote5" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_migrate_source="pcmk1" CRM_meta_migrate_target="pcmk2" CRM_meta_on_node="pcmk1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  server="172.17.201.5"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <rsc_op id="70" operation="monitor" operation_key="pcmk_remote5_monitor_60000" on_node="pcmk2" on_node_uuid="2">
+      <rsc_op id="71" operation="monitor" operation_key="pcmk_remote5_monitor_60000" on_node="pcmk2" on_node_uuid="2">
         <primitive id="pcmk_remote5" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="30000"  server="172.17.201.5"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="69" operation="start" operation_key="pcmk_remote5_start_0"/>
+        <pseudo_event id="70" operation="start" operation_key="pcmk_remote5_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <pseudo_event id="69" operation="start" operation_key="pcmk_remote5_start_0">
+      <pseudo_event id="70" operation="start" operation_key="pcmk_remote5_start_0">
         <attributes CRM_meta_name="start" CRM_meta_timeout="10000"  server="172.17.201.5"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="68" operation="stop" operation_key="pcmk_remote5_stop_0" on_node="pcmk1" on_node_uuid="1"/>
+        <rsc_op id="69" operation="stop" operation_key="pcmk_remote5_stop_0" on_node="pcmk1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="72" operation="migrate_from" operation_key="pcmk_remote5_migrate_from_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="73" operation="migrate_from" operation_key="pcmk_remote5_migrate_from_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="68" operation="stop" operation_key="pcmk_remote5_stop_0" on_node="pcmk1" on_node_uuid="1">
+      <rsc_op id="69" operation="stop" operation_key="pcmk_remote5_stop_0" on_node="pcmk1" on_node_uuid="1">
         <primitive id="pcmk_remote5" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="pcmk1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="60000"  server="172.17.201.5"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="72" operation="migrate_from" operation_key="pcmk_remote5_migrate_from_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="73" operation="migrate_from" operation_key="pcmk_remote5_migrate_from_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="83" operation="monitor" operation_key="FAKE5_monitor_10000" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
+      <rsc_op id="84" operation="monitor" operation_key="FAKE5_monitor_10000" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
         <primitive id="FAKE5" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk_remote4" CRM_meta_on_node_uuid="pcmk_remote4" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="67" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="82" operation="start" operation_key="FAKE5_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2"/>
+        <rsc_op id="83" operation="start" operation_key="FAKE5_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <rsc_op id="82" operation="start" operation_key="FAKE5_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
+      <rsc_op id="83" operation="start" operation_key="FAKE5_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
         <primitive id="FAKE5" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="pcmk_remote4" CRM_meta_on_node_uuid="pcmk_remote4" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="67" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="81" operation="stop" operation_key="FAKE5_stop_0" on_node="pcmk1" on_node_uuid="1"/>
+        <rsc_op id="82" operation="stop" operation_key="FAKE5_stop_0" on_node="pcmk1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13">
     <action_set>
-      <rsc_op id="81" operation="stop" operation_key="FAKE5_stop_0" on_node="pcmk1" on_node_uuid="1">
+      <rsc_op id="82" operation="stop" operation_key="FAKE5_stop_0" on_node="pcmk1" on_node_uuid="1">
         <primitive id="FAKE5" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="pcmk1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -198,42 +198,42 @@
   </synapse>
   <synapse id="14">
     <action_set>
-      <rsc_op id="92" operation="monitor" operation_key="FAKE9_monitor_10000" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
+      <rsc_op id="93" operation="monitor" operation_key="FAKE9_monitor_10000" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
         <primitive id="FAKE9" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk_remote4" CRM_meta_on_node_uuid="pcmk_remote4" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="67" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="91" operation="start" operation_key="FAKE9_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2"/>
+        <rsc_op id="92" operation="start" operation_key="FAKE9_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15">
     <action_set>
-      <rsc_op id="91" operation="start" operation_key="FAKE9_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
+      <rsc_op id="92" operation="start" operation_key="FAKE9_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
         <primitive id="FAKE9" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="pcmk_remote4" CRM_meta_on_node_uuid="pcmk_remote4" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="67" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="90" operation="stop" operation_key="FAKE9_stop_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="91" operation="stop" operation_key="FAKE9_stop_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="16">
     <action_set>
-      <rsc_op id="90" operation="stop" operation_key="FAKE9_stop_0" on_node="pcmk2" on_node_uuid="2">
+      <rsc_op id="91" operation="stop" operation_key="FAKE9_stop_0" on_node="pcmk2" on_node_uuid="2">
         <primitive id="FAKE9" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="pcmk2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -242,36 +242,36 @@
   </synapse>
   <synapse id="17">
     <action_set>
-      <rsc_op id="99" operation="monitor" operation_key="FAKE12_monitor_10000" on_node="pcmk2" on_node_uuid="2">
+      <rsc_op id="100" operation="monitor" operation_key="FAKE12_monitor_10000" on_node="pcmk2" on_node_uuid="2">
         <primitive id="FAKE12" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="98" operation="start" operation_key="FAKE12_start_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="99" operation="start" operation_key="FAKE12_start_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="18">
     <action_set>
-      <rsc_op id="98" operation="start" operation_key="FAKE12_start_0" on_node="pcmk2" on_node_uuid="2">
+      <rsc_op id="99" operation="start" operation_key="FAKE12_start_0" on_node="pcmk2" on_node_uuid="2">
         <primitive id="FAKE12" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="pcmk2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="97" operation="stop" operation_key="FAKE12_stop_0" on_node="pcmk1" on_node_uuid="1"/>
+        <rsc_op id="98" operation="stop" operation_key="FAKE12_stop_0" on_node="pcmk1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="19">
     <action_set>
-      <rsc_op id="97" operation="stop" operation_key="FAKE12_stop_0" on_node="pcmk1" on_node_uuid="1">
+      <rsc_op id="98" operation="stop" operation_key="FAKE12_stop_0" on_node="pcmk1" on_node_uuid="1">
         <primitive id="FAKE12" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="pcmk1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -280,36 +280,36 @@
   </synapse>
   <synapse id="20">
     <action_set>
-      <rsc_op id="104" operation="monitor" operation_key="FAKE14_monitor_10000" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
+      <rsc_op id="105" operation="monitor" operation_key="FAKE14_monitor_10000" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
         <primitive id="FAKE14" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk_remote1" CRM_meta_on_node_uuid="pcmk_remote1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="103" operation="start" operation_key="FAKE14_start_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
+        <rsc_op id="104" operation="start" operation_key="FAKE14_start_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21">
     <action_set>
-      <rsc_op id="103" operation="start" operation_key="FAKE14_start_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
+      <rsc_op id="104" operation="start" operation_key="FAKE14_start_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
         <primitive id="FAKE14" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="pcmk_remote1" CRM_meta_on_node_uuid="pcmk_remote1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="102" operation="stop" operation_key="FAKE14_stop_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="103" operation="stop" operation_key="FAKE14_stop_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="22">
     <action_set>
-      <rsc_op id="102" operation="stop" operation_key="FAKE14_stop_0" on_node="pcmk2" on_node_uuid="2">
+      <rsc_op id="103" operation="stop" operation_key="FAKE14_stop_0" on_node="pcmk2" on_node_uuid="2">
         <primitive id="FAKE14" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="pcmk2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -318,42 +318,42 @@
   </synapse>
   <synapse id="23">
     <action_set>
-      <rsc_op id="111" operation="monitor" operation_key="FAKE17_monitor_10000" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
+      <rsc_op id="112" operation="monitor" operation_key="FAKE17_monitor_10000" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
         <primitive id="FAKE17" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk_remote4" CRM_meta_on_node_uuid="pcmk_remote4" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="67" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="110" operation="start" operation_key="FAKE17_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2"/>
+        <rsc_op id="111" operation="start" operation_key="FAKE17_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="24">
     <action_set>
-      <rsc_op id="110" operation="start" operation_key="FAKE17_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
+      <rsc_op id="111" operation="start" operation_key="FAKE17_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
         <primitive id="FAKE17" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="pcmk_remote4" CRM_meta_on_node_uuid="pcmk_remote4" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="67" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="109" operation="stop" operation_key="FAKE17_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
+        <rsc_op id="110" operation="stop" operation_key="FAKE17_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="25">
     <action_set>
-      <rsc_op id="109" operation="stop" operation_key="FAKE17_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
+      <rsc_op id="110" operation="stop" operation_key="FAKE17_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
         <primitive id="FAKE17" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="pcmk_remote1" CRM_meta_on_node_uuid="pcmk_remote1" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -362,42 +362,42 @@
   </synapse>
   <synapse id="26">
     <action_set>
-      <rsc_op id="128" operation="monitor" operation_key="FAKE25_monitor_10000" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
+      <rsc_op id="129" operation="monitor" operation_key="FAKE25_monitor_10000" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
         <primitive id="FAKE25" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk_remote4" CRM_meta_on_node_uuid="pcmk_remote4" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="67" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="127" operation="start" operation_key="FAKE25_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2"/>
+        <rsc_op id="128" operation="start" operation_key="FAKE25_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="27">
     <action_set>
-      <rsc_op id="127" operation="start" operation_key="FAKE25_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
+      <rsc_op id="128" operation="start" operation_key="FAKE25_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
         <primitive id="FAKE25" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="pcmk_remote4" CRM_meta_on_node_uuid="pcmk_remote4" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="67" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="126" operation="stop" operation_key="FAKE25_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
+        <rsc_op id="127" operation="stop" operation_key="FAKE25_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="28">
     <action_set>
-      <rsc_op id="126" operation="stop" operation_key="FAKE25_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
+      <rsc_op id="127" operation="stop" operation_key="FAKE25_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
         <primitive id="FAKE25" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="pcmk_remote1" CRM_meta_on_node_uuid="pcmk_remote1" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -406,36 +406,36 @@
   </synapse>
   <synapse id="29">
     <action_set>
-      <rsc_op id="135" operation="monitor" operation_key="FAKE28_monitor_10000" on_node="pcmk1" on_node_uuid="1">
+      <rsc_op id="136" operation="monitor" operation_key="FAKE28_monitor_10000" on_node="pcmk1" on_node_uuid="1">
         <primitive id="FAKE28" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="134" operation="start" operation_key="FAKE28_start_0" on_node="pcmk1" on_node_uuid="1"/>
+        <rsc_op id="135" operation="start" operation_key="FAKE28_start_0" on_node="pcmk1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="30">
     <action_set>
-      <rsc_op id="134" operation="start" operation_key="FAKE28_start_0" on_node="pcmk1" on_node_uuid="1">
+      <rsc_op id="135" operation="start" operation_key="FAKE28_start_0" on_node="pcmk1" on_node_uuid="1">
         <primitive id="FAKE28" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="pcmk1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="133" operation="stop" operation_key="FAKE28_stop_0" on_node="pcmk3" on_node_uuid="3"/>
+        <rsc_op id="134" operation="stop" operation_key="FAKE28_stop_0" on_node="pcmk3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="31">
     <action_set>
-      <rsc_op id="133" operation="stop" operation_key="FAKE28_stop_0" on_node="pcmk3" on_node_uuid="3">
+      <rsc_op id="134" operation="stop" operation_key="FAKE28_stop_0" on_node="pcmk3" on_node_uuid="3">
         <primitive id="FAKE28" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="pcmk3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -444,36 +444,36 @@
   </synapse>
   <synapse id="32">
     <action_set>
-      <rsc_op id="140" operation="monitor" operation_key="FAKE30_monitor_10000" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
+      <rsc_op id="141" operation="monitor" operation_key="FAKE30_monitor_10000" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
         <primitive id="FAKE30" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk_remote1" CRM_meta_on_node_uuid="pcmk_remote1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="139" operation="start" operation_key="FAKE30_start_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
+        <rsc_op id="140" operation="start" operation_key="FAKE30_start_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="33">
     <action_set>
-      <rsc_op id="139" operation="start" operation_key="FAKE30_start_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
+      <rsc_op id="140" operation="start" operation_key="FAKE30_start_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
         <primitive id="FAKE30" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="pcmk_remote1" CRM_meta_on_node_uuid="pcmk_remote1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="138" operation="stop" operation_key="FAKE30_stop_0" on_node="pcmk1" on_node_uuid="1"/>
+        <rsc_op id="139" operation="stop" operation_key="FAKE30_stop_0" on_node="pcmk1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="34">
     <action_set>
-      <rsc_op id="138" operation="stop" operation_key="FAKE30_stop_0" on_node="pcmk1" on_node_uuid="1">
+      <rsc_op id="139" operation="stop" operation_key="FAKE30_stop_0" on_node="pcmk1" on_node_uuid="1">
         <primitive id="FAKE30" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="pcmk1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -482,42 +482,42 @@
   </synapse>
   <synapse id="35">
     <action_set>
-      <rsc_op id="147" operation="monitor" operation_key="FAKE33_monitor_10000" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
+      <rsc_op id="148" operation="monitor" operation_key="FAKE33_monitor_10000" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
         <primitive id="FAKE33" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk_remote4" CRM_meta_on_node_uuid="pcmk_remote4" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="67" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="146" operation="start" operation_key="FAKE33_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2"/>
+        <rsc_op id="147" operation="start" operation_key="FAKE33_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="36">
     <action_set>
-      <rsc_op id="146" operation="start" operation_key="FAKE33_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
+      <rsc_op id="147" operation="start" operation_key="FAKE33_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
         <primitive id="FAKE33" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="pcmk_remote4" CRM_meta_on_node_uuid="pcmk_remote4" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="67" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="145" operation="stop" operation_key="FAKE33_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
+        <rsc_op id="146" operation="stop" operation_key="FAKE33_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="37">
     <action_set>
-      <rsc_op id="145" operation="stop" operation_key="FAKE33_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
+      <rsc_op id="146" operation="stop" operation_key="FAKE33_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
         <primitive id="FAKE33" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="pcmk_remote1" CRM_meta_on_node_uuid="pcmk_remote1" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -526,36 +526,36 @@
   </synapse>
   <synapse id="38">
     <action_set>
-      <rsc_op id="158" operation="monitor" operation_key="FAKE38_monitor_10000" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
+      <rsc_op id="159" operation="monitor" operation_key="FAKE38_monitor_10000" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
         <primitive id="FAKE38" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk_remote1" CRM_meta_on_node_uuid="pcmk_remote1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="157" operation="start" operation_key="FAKE38_start_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
+        <rsc_op id="158" operation="start" operation_key="FAKE38_start_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="39">
     <action_set>
-      <rsc_op id="157" operation="start" operation_key="FAKE38_start_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
+      <rsc_op id="158" operation="start" operation_key="FAKE38_start_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
         <primitive id="FAKE38" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="pcmk_remote1" CRM_meta_on_node_uuid="pcmk_remote1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="156" operation="stop" operation_key="FAKE38_stop_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="157" operation="stop" operation_key="FAKE38_stop_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="40">
     <action_set>
-      <rsc_op id="156" operation="stop" operation_key="FAKE38_stop_0" on_node="pcmk2" on_node_uuid="2">
+      <rsc_op id="157" operation="stop" operation_key="FAKE38_stop_0" on_node="pcmk2" on_node_uuid="2">
         <primitive id="FAKE38" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="pcmk2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -564,42 +564,42 @@
   </synapse>
   <synapse id="41">
     <action_set>
-      <rsc_op id="161" operation="monitor" operation_key="FAKE39_monitor_10000" on_node="pcmk_remote2" on_node_uuid="pcmk_remote2" router_node="pcmk1">
+      <rsc_op id="162" operation="monitor" operation_key="FAKE39_monitor_10000" on_node="pcmk_remote2" on_node_uuid="pcmk_remote2" router_node="pcmk1">
         <primitive id="FAKE39" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk_remote2" CRM_meta_on_node_uuid="pcmk_remote2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="61" operation="start" operation_key="pcmk_remote2_start_0"/>
+        <pseudo_event id="62" operation="start" operation_key="pcmk_remote2_start_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="160" operation="start" operation_key="FAKE39_start_0" on_node="pcmk_remote2" on_node_uuid="pcmk_remote2" router_node="pcmk1"/>
+        <rsc_op id="161" operation="start" operation_key="FAKE39_start_0" on_node="pcmk_remote2" on_node_uuid="pcmk_remote2" router_node="pcmk1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="42">
     <action_set>
-      <rsc_op id="160" operation="start" operation_key="FAKE39_start_0" on_node="pcmk_remote2" on_node_uuid="pcmk_remote2" router_node="pcmk1">
+      <rsc_op id="161" operation="start" operation_key="FAKE39_start_0" on_node="pcmk_remote2" on_node_uuid="pcmk_remote2" router_node="pcmk1">
         <primitive id="FAKE39" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="pcmk_remote2" CRM_meta_on_node_uuid="pcmk_remote2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="61" operation="start" operation_key="pcmk_remote2_start_0"/>
+        <pseudo_event id="62" operation="start" operation_key="pcmk_remote2_start_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="159" operation="stop" operation_key="FAKE39_stop_0" on_node="pcmk1" on_node_uuid="1"/>
+        <rsc_op id="160" operation="stop" operation_key="FAKE39_stop_0" on_node="pcmk1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="43">
     <action_set>
-      <rsc_op id="159" operation="stop" operation_key="FAKE39_stop_0" on_node="pcmk1" on_node_uuid="1">
+      <rsc_op id="160" operation="stop" operation_key="FAKE39_stop_0" on_node="pcmk1" on_node_uuid="1">
         <primitive id="FAKE39" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="pcmk1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -608,90 +608,90 @@
   </synapse>
   <synapse id="44">
     <action_set>
-      <rsc_op id="166" operation="monitor" operation_key="FAKE41_monitor_10000" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
+      <rsc_op id="167" operation="monitor" operation_key="FAKE41_monitor_10000" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
         <primitive id="FAKE41" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk_remote4" CRM_meta_on_node_uuid="pcmk_remote4" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="67" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="165" operation="start" operation_key="FAKE41_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2"/>
+        <rsc_op id="166" operation="start" operation_key="FAKE41_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="45">
     <action_set>
-      <rsc_op id="165" operation="start" operation_key="FAKE41_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
+      <rsc_op id="166" operation="start" operation_key="FAKE41_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
         <primitive id="FAKE41" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="pcmk_remote4" CRM_meta_on_node_uuid="pcmk_remote4" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="67" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="164" operation="stop" operation_key="FAKE41_stop_0" on_node="pcmk_remote2" on_node_uuid="pcmk_remote2" router_node="pcmk1"/>
+        <rsc_op id="165" operation="stop" operation_key="FAKE41_stop_0" on_node="pcmk_remote2" on_node_uuid="pcmk_remote2" router_node="pcmk1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="46">
     <action_set>
-      <rsc_op id="164" operation="stop" operation_key="FAKE41_stop_0" on_node="pcmk_remote2" on_node_uuid="pcmk_remote2" router_node="pcmk1">
+      <rsc_op id="165" operation="stop" operation_key="FAKE41_stop_0" on_node="pcmk_remote2" on_node_uuid="pcmk_remote2" router_node="pcmk1">
         <primitive id="FAKE41" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="pcmk_remote2" CRM_meta_on_node_uuid="pcmk_remote2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="61" operation="start" operation_key="pcmk_remote2_start_0"/>
+        <pseudo_event id="62" operation="start" operation_key="pcmk_remote2_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="47">
     <action_set>
-      <rsc_op id="179" operation="monitor" operation_key="FAKE47_monitor_10000" on_node="pcmk_remote2" on_node_uuid="pcmk_remote2" router_node="pcmk1">
+      <rsc_op id="180" operation="monitor" operation_key="FAKE47_monitor_10000" on_node="pcmk_remote2" on_node_uuid="pcmk_remote2" router_node="pcmk1">
         <primitive id="FAKE47" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk_remote2" CRM_meta_on_node_uuid="pcmk_remote2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="61" operation="start" operation_key="pcmk_remote2_start_0"/>
+        <pseudo_event id="62" operation="start" operation_key="pcmk_remote2_start_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="178" operation="start" operation_key="FAKE47_start_0" on_node="pcmk_remote2" on_node_uuid="pcmk_remote2" router_node="pcmk1"/>
+        <rsc_op id="179" operation="start" operation_key="FAKE47_start_0" on_node="pcmk_remote2" on_node_uuid="pcmk_remote2" router_node="pcmk1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="48">
     <action_set>
-      <rsc_op id="178" operation="start" operation_key="FAKE47_start_0" on_node="pcmk_remote2" on_node_uuid="pcmk_remote2" router_node="pcmk1">
+      <rsc_op id="179" operation="start" operation_key="FAKE47_start_0" on_node="pcmk_remote2" on_node_uuid="pcmk_remote2" router_node="pcmk1">
         <primitive id="FAKE47" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="pcmk_remote2" CRM_meta_on_node_uuid="pcmk_remote2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="61" operation="start" operation_key="pcmk_remote2_start_0"/>
+        <pseudo_event id="62" operation="start" operation_key="pcmk_remote2_start_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="177" operation="stop" operation_key="FAKE47_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
+        <rsc_op id="178" operation="stop" operation_key="FAKE47_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="49">
     <action_set>
-      <rsc_op id="177" operation="stop" operation_key="FAKE47_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
+      <rsc_op id="178" operation="stop" operation_key="FAKE47_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1">
         <primitive id="FAKE47" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="pcmk_remote1" CRM_meta_on_node_uuid="pcmk_remote1" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -700,36 +700,36 @@
   </synapse>
   <synapse id="50">
     <action_set>
-      <rsc_op id="182" operation="monitor" operation_key="FAKE48_monitor_10000" on_node="pcmk_remote3" on_node_uuid="pcmk_remote3" router_node="pcmk3">
+      <rsc_op id="183" operation="monitor" operation_key="FAKE48_monitor_10000" on_node="pcmk_remote3" on_node_uuid="pcmk_remote3" router_node="pcmk3">
         <primitive id="FAKE48" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk_remote3" CRM_meta_on_node_uuid="pcmk_remote3" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="181" operation="start" operation_key="FAKE48_start_0" on_node="pcmk_remote3" on_node_uuid="pcmk_remote3" router_node="pcmk3"/>
+        <rsc_op id="182" operation="start" operation_key="FAKE48_start_0" on_node="pcmk_remote3" on_node_uuid="pcmk_remote3" router_node="pcmk3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="51">
     <action_set>
-      <rsc_op id="181" operation="start" operation_key="FAKE48_start_0" on_node="pcmk_remote3" on_node_uuid="pcmk_remote3" router_node="pcmk3">
+      <rsc_op id="182" operation="start" operation_key="FAKE48_start_0" on_node="pcmk_remote3" on_node_uuid="pcmk_remote3" router_node="pcmk3">
         <primitive id="FAKE48" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="pcmk_remote3" CRM_meta_on_node_uuid="pcmk_remote3" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="180" operation="stop" operation_key="FAKE48_stop_0" on_node="pcmk1" on_node_uuid="1"/>
+        <rsc_op id="181" operation="stop" operation_key="FAKE48_stop_0" on_node="pcmk1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="52">
     <action_set>
-      <rsc_op id="180" operation="stop" operation_key="FAKE48_stop_0" on_node="pcmk1" on_node_uuid="1">
+      <rsc_op id="181" operation="stop" operation_key="FAKE48_stop_0" on_node="pcmk1" on_node_uuid="1">
         <primitive id="FAKE48" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="pcmk1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -738,42 +738,42 @@
   </synapse>
   <synapse id="53">
     <action_set>
-      <rsc_op id="185" operation="monitor" operation_key="FAKE49_monitor_10000" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
+      <rsc_op id="186" operation="monitor" operation_key="FAKE49_monitor_10000" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
         <primitive id="FAKE49" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="pcmk_remote4" CRM_meta_on_node_uuid="pcmk_remote4" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="67" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="184" operation="start" operation_key="FAKE49_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2"/>
+        <rsc_op id="185" operation="start" operation_key="FAKE49_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="54">
     <action_set>
-      <rsc_op id="184" operation="start" operation_key="FAKE49_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
+      <rsc_op id="185" operation="start" operation_key="FAKE49_start_0" on_node="pcmk_remote4" on_node_uuid="pcmk_remote4" router_node="pcmk2">
         <primitive id="FAKE49" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="pcmk_remote4" CRM_meta_on_node_uuid="pcmk_remote4" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="67" operation="start" operation_key="pcmk_remote4_start_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="183" operation="stop" operation_key="FAKE49_stop_0" on_node="pcmk_remote3" on_node_uuid="pcmk_remote3" router_node="pcmk3"/>
+        <rsc_op id="184" operation="stop" operation_key="FAKE49_stop_0" on_node="pcmk_remote3" on_node_uuid="pcmk_remote3" router_node="pcmk3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="55">
     <action_set>
-      <rsc_op id="183" operation="stop" operation_key="FAKE49_stop_0" on_node="pcmk_remote3" on_node_uuid="pcmk_remote3" router_node="pcmk3">
+      <rsc_op id="184" operation="stop" operation_key="FAKE49_stop_0" on_node="pcmk_remote3" on_node_uuid="pcmk_remote3" router_node="pcmk3">
         <primitive id="FAKE49" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="pcmk_remote3" CRM_meta_on_node_uuid="pcmk_remote3" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -782,88 +782,88 @@
   </synapse>
   <synapse id="56">
     <action_set>
-      <crm_event id="189" operation="stonith" operation_key="stonith-pcmk4-reboot" on_node="pcmk4" on_node_uuid="4">
-        <attributes CRM_meta_on_node="pcmk4" CRM_meta_on_node_uuid="4" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="4"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="57">
-    <action_set>
-      <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="189" operation="stonith" operation_key="stonith-pcmk4-reboot" on_node="pcmk4" on_node_uuid="4"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-pcmk4-reboot" on_node="pcmk4" on_node_uuid="4"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="58">
+  <synapse id="57">
     <action_set>
-      <pseudo_event id="55" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="56" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="60" operation="stop" operation_key="pcmk_remote2_stop_0" on_node="pcmk3" on_node_uuid="3"/>
+        <rsc_op id="61" operation="stop" operation_key="pcmk_remote2_stop_0" on_node="pcmk3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="68" operation="stop" operation_key="pcmk_remote5_stop_0" on_node="pcmk1" on_node_uuid="1"/>
+        <rsc_op id="69" operation="stop" operation_key="pcmk_remote5_stop_0" on_node="pcmk1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="81" operation="stop" operation_key="FAKE5_stop_0" on_node="pcmk1" on_node_uuid="1"/>
+        <rsc_op id="82" operation="stop" operation_key="FAKE5_stop_0" on_node="pcmk1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="90" operation="stop" operation_key="FAKE9_stop_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="91" operation="stop" operation_key="FAKE9_stop_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="97" operation="stop" operation_key="FAKE12_stop_0" on_node="pcmk1" on_node_uuid="1"/>
+        <rsc_op id="98" operation="stop" operation_key="FAKE12_stop_0" on_node="pcmk1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="102" operation="stop" operation_key="FAKE14_stop_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="103" operation="stop" operation_key="FAKE14_stop_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="109" operation="stop" operation_key="FAKE17_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
+        <rsc_op id="110" operation="stop" operation_key="FAKE17_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
       </trigger>
       <trigger>
-        <rsc_op id="126" operation="stop" operation_key="FAKE25_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
+        <rsc_op id="127" operation="stop" operation_key="FAKE25_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
       </trigger>
       <trigger>
-        <rsc_op id="133" operation="stop" operation_key="FAKE28_stop_0" on_node="pcmk3" on_node_uuid="3"/>
+        <rsc_op id="134" operation="stop" operation_key="FAKE28_stop_0" on_node="pcmk3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="138" operation="stop" operation_key="FAKE30_stop_0" on_node="pcmk1" on_node_uuid="1"/>
+        <rsc_op id="139" operation="stop" operation_key="FAKE30_stop_0" on_node="pcmk1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="145" operation="stop" operation_key="FAKE33_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
+        <rsc_op id="146" operation="stop" operation_key="FAKE33_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
       </trigger>
       <trigger>
-        <rsc_op id="156" operation="stop" operation_key="FAKE38_stop_0" on_node="pcmk2" on_node_uuid="2"/>
+        <rsc_op id="157" operation="stop" operation_key="FAKE38_stop_0" on_node="pcmk2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="159" operation="stop" operation_key="FAKE39_stop_0" on_node="pcmk1" on_node_uuid="1"/>
+        <rsc_op id="160" operation="stop" operation_key="FAKE39_stop_0" on_node="pcmk1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="164" operation="stop" operation_key="FAKE41_stop_0" on_node="pcmk_remote2" on_node_uuid="pcmk_remote2" router_node="pcmk1"/>
+        <rsc_op id="165" operation="stop" operation_key="FAKE41_stop_0" on_node="pcmk_remote2" on_node_uuid="pcmk_remote2" router_node="pcmk1"/>
       </trigger>
       <trigger>
-        <rsc_op id="177" operation="stop" operation_key="FAKE47_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
+        <rsc_op id="178" operation="stop" operation_key="FAKE47_stop_0" on_node="pcmk_remote1" on_node_uuid="pcmk_remote1" router_node="pcmk1"/>
       </trigger>
       <trigger>
-        <rsc_op id="180" operation="stop" operation_key="FAKE48_stop_0" on_node="pcmk1" on_node_uuid="1"/>
+        <rsc_op id="181" operation="stop" operation_key="FAKE48_stop_0" on_node="pcmk1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="183" operation="stop" operation_key="FAKE49_stop_0" on_node="pcmk_remote3" on_node_uuid="pcmk_remote3" router_node="pcmk3"/>
+        <rsc_op id="184" operation="stop" operation_key="FAKE49_stop_0" on_node="pcmk_remote3" on_node_uuid="pcmk_remote3" router_node="pcmk3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="188" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="189" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="58">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-pcmk4-reboot" on_node="pcmk4" on_node_uuid="4">
+        <attributes CRM_meta_on_node="pcmk4" CRM_meta_on_node_uuid="4" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="4"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
diff --git a/pengine/test10/remote-partial-migrate2.scores b/pengine/test10/remote-partial-migrate2.scores
index ce095b1..6965507 100644
--- a/pengine/test10/remote-partial-migrate2.scores
+++ b/pengine/test10/remote-partial-migrate2.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   pcmk4: node is unclean
 Allocation scores:
 native_color: FAKE1 allocation score on pcmk1: -INFINITY
 native_color: FAKE1 allocation score on pcmk2: 0
diff --git a/pengine/test10/remote-partial-migrate2.summary b/pengine/test10/remote-partial-migrate2.summary
index c9f9592..17fee27 100644
--- a/pengine/test10/remote-partial-migrate2.summary
+++ b/pengine/test10/remote-partial-migrate2.summary
@@ -62,9 +62,8 @@ RemoteOFFLINE: [ pcmk_remote4 ]
  FAKE49	(ocf::heartbeat:Dummy):	Started pcmk_remote3 
  FAKE50	(ocf::heartbeat:Dummy):	Started pcmk_remote5 
 
-  notice: Fencing   pcmk4: node is unclean
 Transition Summary:
- * Fence (reboot) pcmk4
+ * Fence (reboot) pcmk4 'peer is no longer part of the cluster'
  * Migrate pcmk_remote2	(Started pcmk3 -> pcmk1)
  * Start   pcmk_remote4	(pcmk2)
  * Migrate pcmk_remote5	(Started pcmk1 -> pcmk2)
diff --git a/pengine/test10/remote-recover-all.exp b/pengine/test10/remote-recover-all.exp
index 6c1164c..b0af5c4 100644
--- a/pengine/test10/remote-recover-all.exp
+++ b/pengine/test10/remote-recover-all.exp
@@ -1,72 +1,72 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <pseudo_event id="26" operation="stop" operation_key="messaging-1_stop_0">
+      <pseudo_event id="27" operation="stop" operation_key="messaging-1_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="40" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="31" operation="monitor" operation_key="galera-0_monitor_20000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="32" operation="monitor" operation_key="galera-0_monitor_20000" on_node="controller-2" on_node_uuid="3">
         <primitive id="galera-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_interval="20000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  reconnect_interval="60"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="30" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="31" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="30" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="31" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="galera-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="galera-0_stop_0"/>
+        <pseudo_event id="30" operation="stop" operation_key="galera-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="124" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="125" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="29" operation="stop" operation_key="galera-0_stop_0">
+      <pseudo_event id="30" operation="stop" operation_key="galera-0_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="34" operation="stop" operation_key="galera-2_stop_0">
+      <pseudo_event id="35" operation="stop" operation_key="galera-2_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="49" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:1_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="50" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -122,116 +122,116 @@
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="131" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+        <crm_event id="127" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0">
+      <pseudo_event id="40" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0">
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_notify_stop_resource="rabbitmq:2" CRM_meta_notify_stop_uname="messaging-1" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="42" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
+        <pseudo_event id="43" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="131" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+        <crm_event id="127" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10" priority="1000000">
     <action_set>
-      <pseudo_event id="43" operation="stopped" operation_key="rabbitmq-clone_stopped_0">
+      <pseudo_event id="44" operation="stopped" operation_key="rabbitmq-clone_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
+        <pseudo_event id="40" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="42" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
+        <pseudo_event id="43" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <pseudo_event id="42" operation="stop" operation_key="rabbitmq-clone_stop_0">
+      <pseudo_event id="43" operation="stop" operation_key="rabbitmq-clone_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="131" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+        <crm_event id="127" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <pseudo_event id="49" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:1_stop_0">
+      <pseudo_event id="50" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:1_stop_0">
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384"  enable_creation="true" wsrep_cluster_address="gcomm://galera-0,galera-1,galera-2"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="48" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:1_demote_0"/>
+        <pseudo_event id="49" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:1_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="56" operation="stop" operation_key="galera-master_stop_0"/>
+        <pseudo_event id="57" operation="stop" operation_key="galera-master_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="130" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2"/>
+        <crm_event id="126" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13">
     <action_set>
-      <pseudo_event id="48" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:1_demote_0">
+      <pseudo_event id="49" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:1_demote_0">
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="false" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384"  enable_creation="true" wsrep_cluster_address="gcomm://galera-0,galera-1,galera-2"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="60" operation="demote" operation_key="galera-master_demote_0"/>
+        <pseudo_event id="61" operation="demote" operation_key="galera-master_demote_0"/>
       </trigger>
       <trigger>
-        <crm_event id="130" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2"/>
+        <crm_event id="126" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <rsc_op id="14" operation="monitor" operation_key="galera_monitor_10000" internal_operation_key="galera:2_monitor_10000" on_node="galera-0" on_node_uuid="galera-0" router_node="controller-2">
+      <rsc_op id="15" operation="monitor" operation_key="galera_monitor_10000" internal_operation_key="galera:2_monitor_10000" on_node="galera-0" on_node_uuid="galera-0" router_node="controller-2">
         <primitive id="galera" long-id="galera:2" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-0" CRM_meta_on_node_uuid="galera-0" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384"  enable_creation="true" wsrep_cluster_address="gcomm://galera-0,galera-1,galera-2"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="30" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="31" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15" priority="1000000">
     <action_set>
-      <pseudo_event id="61" operation="demoted" operation_key="galera-master_demoted_0">
+      <pseudo_event id="62" operation="demoted" operation_key="galera-master_demoted_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="48" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:1_demote_0"/>
+        <pseudo_event id="49" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:1_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="60" operation="demote" operation_key="galera-master_demote_0"/>
+        <pseudo_event id="61" operation="demote" operation_key="galera-master_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="16">
     <action_set>
-      <pseudo_event id="60" operation="demote" operation_key="galera-master_demote_0">
+      <pseudo_event id="61" operation="demote" operation_key="galera-master_demote_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -239,76 +239,76 @@
   </synapse>
   <synapse id="17" priority="1000000">
     <action_set>
-      <pseudo_event id="57" operation="stopped" operation_key="galera-master_stopped_0">
+      <pseudo_event id="58" operation="stopped" operation_key="galera-master_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="49" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:1_stop_0"/>
+        <pseudo_event id="50" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="56" operation="stop" operation_key="galera-master_stop_0"/>
+        <pseudo_event id="57" operation="stop" operation_key="galera-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="18">
     <action_set>
-      <pseudo_event id="56" operation="stop" operation_key="galera-master_stop_0">
+      <pseudo_event id="57" operation="stop" operation_key="galera-master_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="61" operation="demoted" operation_key="galera-master_demoted_0"/>
+        <pseudo_event id="62" operation="demoted" operation_key="galera-master_demoted_0"/>
       </trigger>
       <trigger>
-        <crm_event id="130" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2"/>
+        <crm_event id="126" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="19" priority="1000000">
     <action_set>
-      <pseudo_event id="127" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0">
+      <pseudo_event id="129" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+        <pseudo_event id="128" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="128" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="130" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="129" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="131" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="20" priority="1000000">
     <action_set>
-      <pseudo_event id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0">
+      <pseudo_event id="128" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21">
     <action_set>
-      <pseudo_event id="62" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0">
+      <pseudo_event id="63" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="75" operation="stop" operation_key="redis-master_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="76" operation="stop" operation_key="redis-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -321,23 +321,23 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="77" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+        <pseudo_event id="78" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="23" priority="1000000">
     <action_set>
-      <rsc_op id="128" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="130" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="post" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="79" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+        <pseudo_event id="80" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+        <pseudo_event id="128" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -350,68 +350,68 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="77" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+        <pseudo_event id="78" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="25" priority="1000000">
     <action_set>
-      <rsc_op id="129" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="131" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="post" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="79" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+        <pseudo_event id="80" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+        <pseudo_event id="128" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="26" priority="1000000">
     <action_set>
-      <pseudo_event id="80" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0">
+      <pseudo_event id="81" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="79" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+        <pseudo_event id="80" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="128" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="130" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="129" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="131" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="27" priority="1000000">
     <action_set>
-      <pseudo_event id="79" operation="notify" operation_key="redis-master_post_notify_stopped_0">
+      <pseudo_event id="80" operation="notify" operation_key="redis-master_post_notify_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="76" operation="stopped" operation_key="redis-master_stopped_0"/>
+        <pseudo_event id="77" operation="stopped" operation_key="redis-master_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="78" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="79" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="28">
     <action_set>
-      <pseudo_event id="78" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0">
+      <pseudo_event id="79" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="77" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+        <pseudo_event id="78" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
       </trigger>
       <trigger>
         <rsc_op id="197" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:1_pre_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
@@ -423,7 +423,7 @@
   </synapse>
   <synapse id="29">
     <action_set>
-      <pseudo_event id="77" operation="notify" operation_key="redis-master_pre_notify_stop_0">
+      <pseudo_event id="78" operation="notify" operation_key="redis-master_pre_notify_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -431,211 +431,211 @@
   </synapse>
   <synapse id="30" priority="1000000">
     <action_set>
-      <pseudo_event id="76" operation="stopped" operation_key="redis-master_stopped_0">
+      <pseudo_event id="77" operation="stopped" operation_key="redis-master_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="62" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+        <pseudo_event id="63" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="75" operation="stop" operation_key="redis-master_stop_0"/>
+        <pseudo_event id="76" operation="stop" operation_key="redis-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="31">
     <action_set>
-      <pseudo_event id="75" operation="stop" operation_key="redis-master_stop_0">
+      <pseudo_event id="76" operation="stop" operation_key="redis-master_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="78" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="79" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="32">
     <action_set>
-      <rsc_op id="99" operation="monitor" operation_key="ip-172.17.1.14_monitor_10000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="100" operation="monitor" operation_key="ip-172.17.1.14_monitor_10000" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.14" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="98" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="99" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="33">
     <action_set>
-      <rsc_op id="98" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="99" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.14" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="97" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
+        <pseudo_event id="98" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="124" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="125" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="34">
     <action_set>
-      <pseudo_event id="97" operation="stop" operation_key="ip-172.17.1.14_stop_0">
+      <pseudo_event id="98" operation="stop" operation_key="ip-172.17.1.14_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="116" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="117" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="35">
     <action_set>
-      <rsc_op id="102" operation="monitor" operation_key="ip-172.17.1.17_monitor_10000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="103" operation="monitor" operation_key="ip-172.17.1.17_monitor_10000" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.17" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="101" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="102" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="36">
     <action_set>
-      <rsc_op id="101" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="102" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.17" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="100" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
+        <pseudo_event id="101" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="124" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="125" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="37">
     <action_set>
-      <pseudo_event id="100" operation="stop" operation_key="ip-172.17.1.17_stop_0">
+      <pseudo_event id="101" operation="stop" operation_key="ip-172.17.1.17_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="116" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="117" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="38">
     <action_set>
-      <rsc_op id="107" operation="monitor" operation_key="ip-172.17.4.11_monitor_10000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="108" operation="monitor" operation_key="ip-172.17.4.11_monitor_10000" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="106" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="107" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="39">
     <action_set>
-      <rsc_op id="106" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="107" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="105" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+        <pseudo_event id="106" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="124" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="125" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="40">
     <action_set>
-      <pseudo_event id="105" operation="stop" operation_key="ip-172.17.4.11_stop_0">
+      <pseudo_event id="106" operation="stop" operation_key="ip-172.17.4.11_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="116" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="117" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="41">
     <action_set>
-      <pseudo_event id="108" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0">
+      <pseudo_event id="109" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="200000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="115" operation="stop" operation_key="haproxy-clone_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="116" operation="stop" operation_key="haproxy-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="42" priority="1000000">
     <action_set>
-      <pseudo_event id="116" operation="stopped" operation_key="haproxy-clone_stopped_0">
+      <pseudo_event id="117" operation="stopped" operation_key="haproxy-clone_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="108" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
+        <pseudo_event id="109" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="115" operation="stop" operation_key="haproxy-clone_stop_0"/>
+        <pseudo_event id="116" operation="stop" operation_key="haproxy-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="43">
     <action_set>
-      <pseudo_event id="115" operation="stop" operation_key="haproxy-clone_stop_0">
+      <pseudo_event id="116" operation="stop" operation_key="haproxy-clone_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="44">
     <action_set>
-      <rsc_op id="119" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="120" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
       </rsc_op>
@@ -644,36 +644,36 @@
   </synapse>
   <synapse id="45">
     <action_set>
-      <rsc_op id="22" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="23" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="21" operation="all_stopped" operation_key="all_stopped"/>
+        <pseudo_event id="22" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <rsc_op id="119" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="120" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="46">
     <action_set>
-      <rsc_op id="6" operation="monitor" operation_key="stonith-fence_ipmilan-525400bbf613_monitor_60000" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="7" operation="monitor" operation_key="stonith-fence_ipmilan-525400bbf613_monitor_60000" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="22" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="23" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="47">
     <action_set>
-      <rsc_op id="120" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="121" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
       </rsc_op>
@@ -682,65 +682,65 @@
   </synapse>
   <synapse id="48">
     <action_set>
-      <rsc_op id="23" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="24" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="21" operation="all_stopped" operation_key="all_stopped"/>
+        <pseudo_event id="22" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <rsc_op id="120" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="121" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="49">
     <action_set>
-      <rsc_op id="11" operation="monitor" operation_key="stonith-fence_ipmilan-525400b4f6bd_monitor_60000" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="12" operation="monitor" operation_key="stonith-fence_ipmilan-525400b4f6bd_monitor_60000" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="23" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="24" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="50">
     <action_set>
-      <rsc_op id="123" operation="monitor" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_60000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="124" operation="monitor" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_60000" on_node="controller-2" on_node_uuid="3">
         <primitive id="stonith-fence_ipmilan-5254005bdbb5" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="122" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="123" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="51">
     <action_set>
-      <rsc_op id="122" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="123" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="stonith-fence_ipmilan-5254005bdbb5" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="21" operation="all_stopped" operation_key="all_stopped"/>
+        <pseudo_event id="22" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <pseudo_event id="121" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
+        <pseudo_event id="122" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="52">
     <action_set>
-      <pseudo_event id="121" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0">
+      <pseudo_event id="122" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0">
         <attributes CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
       </pseudo_event>
     </action_set>
@@ -748,7 +748,7 @@
   </synapse>
   <synapse id="53">
     <action_set>
-      <crm_event id="131" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1">
+      <crm_event id="127" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1">
         <attributes CRM_meta_last_failure_rabbitmq="1493336946" CRM_meta_on_node="messaging-1" CRM_meta_on_node_uuid="messaging-1" CRM_meta_rabbitmq_role="true" CRM_meta_rmq_node_attr_last_known_rabbitmq="rabbit@messaging-1" CRM_meta_rmq_node_attr_rabbitmq="rabbit@messaging-1" CRM_meta_stonith_action="reboot" />
         <downed>
           <node id="messaging-1"/>
@@ -757,13 +757,13 @@
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="130" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2"/>
+        <crm_event id="126" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="54">
     <action_set>
-      <crm_event id="130" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2">
+      <crm_event id="126" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2">
         <attributes CRM_meta_galera_role="true" CRM_meta_last_failure_galera="1493172798" CRM_meta_master_galera="100" CRM_meta_on_node="galera-2" CRM_meta_on_node_uuid="galera-2" CRM_meta_stonith_action="reboot" />
         <downed>
           <node id="galera-2"/>
@@ -772,91 +772,91 @@
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="55">
     <action_set>
-      <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2">
-        <attributes CRM_meta_cinder_volume_role="true" CRM_meta_haproxy_role="true" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_redis_role="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="2"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="56">
-    <action_set>
-      <pseudo_event id="124" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="125" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="131" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+        <crm_event id="127" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="57">
+  <synapse id="56">
     <action_set>
-      <pseudo_event id="21" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="22" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="26" operation="stop" operation_key="messaging-1_stop_0"/>
+        <pseudo_event id="27" operation="stop" operation_key="messaging-1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="galera-0_stop_0"/>
+        <pseudo_event id="30" operation="stop" operation_key="galera-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="34" operation="stop" operation_key="galera-2_stop_0"/>
+        <pseudo_event id="35" operation="stop" operation_key="galera-2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
+        <pseudo_event id="40" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="49" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:1_stop_0"/>
+        <pseudo_event id="50" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="62" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+        <pseudo_event id="63" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="80" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="81" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="97" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
+        <pseudo_event id="98" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="100" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
+        <pseudo_event id="101" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="105" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+        <pseudo_event id="106" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="108" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
+        <pseudo_event id="109" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="119" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="120" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="120" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="121" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="121" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
+        <pseudo_event id="122" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="124" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="125" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
       <trigger>
-        <pseudo_event id="127" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0"/>
+        <pseudo_event id="129" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0"/>
       </trigger>
       <trigger>
         <pseudo_event id="133" operation="notified" operation_key="rabbitmq_notified_0" internal_operation_key="rabbitmq:2_confirmed-post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="57">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2">
+        <attributes CRM_meta_cinder_volume_role="true" CRM_meta_haproxy_role="true" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_redis_role="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="2"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
diff --git a/pengine/test10/remote-recover-all.scores b/pengine/test10/remote-recover-all.scores
index 947f228..43cac62 100644
--- a/pengine/test10/remote-recover-all.scores
+++ b/pengine/test10/remote-recover-all.scores
@@ -1,6 +1,3 @@
-  notice: Fencing   controller-1: node is unclean
-  notice: Fencing   galera-2: node is unclean
-  notice: Fencing   messaging-1: node is unclean
 Allocation scores:
 Using the original execution date of: 2017-05-03 13:33:24Z
 clone_color: galera-master allocation score on controller-0: -INFINITY
diff --git a/pengine/test10/remote-recover-all.summary b/pengine/test10/remote-recover-all.summary
index 6868533..35f3d58 100644
--- a/pengine/test10/remote-recover-all.summary
+++ b/pengine/test10/remote-recover-all.summary
@@ -37,13 +37,10 @@ RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
  stonith-fence_ipmilan-525400b4f6bd	(stonith:fence_ipmilan):	Started controller-0
  stonith-fence_ipmilan-5254005bdbb5	(stonith:fence_ipmilan):	Started controller-1 (UNCLEAN)
 
-  notice: Fencing   controller-1: node is unclean
-  notice: Fencing   galera-2: node is unclean
-  notice: Fencing   messaging-1: node is unclean
 Transition Summary:
- * Fence (reboot) messaging-1
- * Fence (reboot) galera-2
- * Fence (reboot) controller-1
+ * Fence (reboot) messaging-1 'resources are active and the connection is unrecoverable'
+ * Fence (reboot) galera-2 'resources are active and the connection is unrecoverable'
+ * Fence (reboot) controller-1 'peer is no longer part of the cluster'
  * Stop    messaging-1	(controller-1)
  * Move    galera-0	(Started controller-1 -> controller-2)
  * Stop    galera-2	(controller-1)
diff --git a/pengine/test10/remote-recover-connection.exp b/pengine/test10/remote-recover-connection.exp
index 62860f0..cf74efb 100644
--- a/pengine/test10/remote-recover-connection.exp
+++ b/pengine/test10/remote-recover-connection.exp
@@ -1,163 +1,163 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="28" operation="monitor" operation_key="messaging-1_monitor_20000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="29" operation="monitor" operation_key="messaging-1_monitor_20000" on_node="controller-2" on_node_uuid="3">
         <primitive id="messaging-1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_interval="20000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  reconnect_interval="60"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="27" operation="start" operation_key="messaging-1_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="28" operation="start" operation_key="messaging-1_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="27" operation="start" operation_key="messaging-1_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="28" operation="start" operation_key="messaging-1_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="messaging-1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="26" operation="stop" operation_key="messaging-1_stop_0"/>
+        <pseudo_event id="27" operation="stop" operation_key="messaging-1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="131" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="132" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="26" operation="stop" operation_key="messaging-1_stop_0">
+      <pseudo_event id="27" operation="stop" operation_key="messaging-1_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="33" operation="monitor" operation_key="galera-0_monitor_20000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="34" operation="monitor" operation_key="galera-0_monitor_20000" on_node="controller-2" on_node_uuid="3">
         <primitive id="galera-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_interval="20000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  reconnect_interval="60"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="32" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="33" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <rsc_op id="32" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="33" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="galera-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="31" operation="stop" operation_key="galera-0_stop_0"/>
+        <pseudo_event id="32" operation="stop" operation_key="galera-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="131" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="132" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <pseudo_event id="31" operation="stop" operation_key="galera-0_stop_0">
+      <pseudo_event id="32" operation="stop" operation_key="galera-0_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <rsc_op id="38" operation="monitor" operation_key="galera-2_monitor_20000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="39" operation="monitor" operation_key="galera-2_monitor_20000" on_node="controller-2" on_node_uuid="3">
         <primitive id="galera-2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_interval="20000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  reconnect_interval="60"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="galera-2_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="38" operation="start" operation_key="galera-2_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <rsc_op id="37" operation="start" operation_key="galera-2_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="38" operation="start" operation_key="galera-2_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="galera-2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="36" operation="stop" operation_key="galera-2_stop_0"/>
+        <pseudo_event id="37" operation="stop" operation_key="galera-2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="131" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="132" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <pseudo_event id="36" operation="stop" operation_key="galera-2_stop_0">
+      <pseudo_event id="37" operation="stop" operation_key="galera-2_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <rsc_op id="20" operation="monitor" operation_key="rabbitmq_monitor_10000" internal_operation_key="rabbitmq:2_monitor_10000" on_node="messaging-1" on_node_uuid="messaging-1" router_node="controller-2">
+      <rsc_op id="21" operation="monitor" operation_key="rabbitmq_monitor_10000" internal_operation_key="rabbitmq:2_monitor_10000" on_node="messaging-1" on_node_uuid="messaging-1" router_node="controller-2">
         <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="messaging-1" CRM_meta_on_node_uuid="messaging-1" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="27" operation="start" operation_key="messaging-1_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="28" operation="start" operation_key="messaging-1_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="13" operation="monitor" operation_key="galera_monitor_10000" internal_operation_key="galera:1_monitor_10000" on_node="galera-2" on_node_uuid="galera-2" router_node="controller-2">
+      <rsc_op id="14" operation="monitor" operation_key="galera_monitor_10000" internal_operation_key="galera:1_monitor_10000" on_node="galera-2" on_node_uuid="galera-2" router_node="controller-2">
         <primitive id="galera" long-id="galera:1" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-2" CRM_meta_on_node_uuid="galera-2" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384"  enable_creation="true" wsrep_cluster_address="gcomm://galera-0,galera-1,galera-2"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="galera-2_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="38" operation="start" operation_key="galera-2_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="14" operation="monitor" operation_key="galera_monitor_10000" internal_operation_key="galera:2_monitor_10000" on_node="galera-0" on_node_uuid="galera-0" router_node="controller-2">
+      <rsc_op id="15" operation="monitor" operation_key="galera_monitor_10000" internal_operation_key="galera:2_monitor_10000" on_node="galera-0" on_node_uuid="galera-0" router_node="controller-2">
         <primitive id="galera" long-id="galera:2" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-0" CRM_meta_on_node_uuid="galera-0" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384"  enable_creation="true" wsrep_cluster_address="gcomm://galera-0,galera-1,galera-2"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="32" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="33" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
@@ -187,22 +187,22 @@
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <pseudo_event id="69" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0">
+      <pseudo_event id="70" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="82" operation="stop" operation_key="redis-master_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="83" operation="stop" operation_key="redis-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -215,7 +215,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="84" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+        <pseudo_event id="85" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -228,7 +228,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="86" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+        <pseudo_event id="87" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
         <pseudo_event id="133" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
@@ -244,7 +244,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="84" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+        <pseudo_event id="85" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -257,7 +257,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="86" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+        <pseudo_event id="87" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
         <pseudo_event id="133" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
@@ -266,13 +266,13 @@
   </synapse>
   <synapse id="19" priority="1000000">
     <action_set>
-      <pseudo_event id="87" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0">
+      <pseudo_event id="88" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="86" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+        <pseudo_event id="87" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
         <rsc_op id="135" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
@@ -284,28 +284,28 @@
   </synapse>
   <synapse id="20" priority="1000000">
     <action_set>
-      <pseudo_event id="86" operation="notify" operation_key="redis-master_post_notify_stopped_0">
+      <pseudo_event id="87" operation="notify" operation_key="redis-master_post_notify_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="83" operation="stopped" operation_key="redis-master_stopped_0"/>
+        <pseudo_event id="84" operation="stopped" operation_key="redis-master_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="85" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="86" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21">
     <action_set>
-      <pseudo_event id="85" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0">
+      <pseudo_event id="86" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="84" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+        <pseudo_event id="85" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
       </trigger>
       <trigger>
         <rsc_op id="193" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:1_pre_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
@@ -317,7 +317,7 @@
   </synapse>
   <synapse id="22">
     <action_set>
-      <pseudo_event id="84" operation="notify" operation_key="redis-master_pre_notify_stop_0">
+      <pseudo_event id="85" operation="notify" operation_key="redis-master_pre_notify_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -325,211 +325,211 @@
   </synapse>
   <synapse id="23" priority="1000000">
     <action_set>
-      <pseudo_event id="83" operation="stopped" operation_key="redis-master_stopped_0">
+      <pseudo_event id="84" operation="stopped" operation_key="redis-master_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="69" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+        <pseudo_event id="70" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="82" operation="stop" operation_key="redis-master_stop_0"/>
+        <pseudo_event id="83" operation="stop" operation_key="redis-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="24">
     <action_set>
-      <pseudo_event id="82" operation="stop" operation_key="redis-master_stop_0">
+      <pseudo_event id="83" operation="stop" operation_key="redis-master_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="85" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="86" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="25">
     <action_set>
-      <rsc_op id="106" operation="monitor" operation_key="ip-172.17.1.14_monitor_10000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="107" operation="monitor" operation_key="ip-172.17.1.14_monitor_10000" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.14" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="105" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="106" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="26">
     <action_set>
-      <rsc_op id="105" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="106" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.14" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="104" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
+        <pseudo_event id="105" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="131" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="132" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="27">
     <action_set>
-      <pseudo_event id="104" operation="stop" operation_key="ip-172.17.1.14_stop_0">
+      <pseudo_event id="105" operation="stop" operation_key="ip-172.17.1.14_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="123" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="124" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="28">
     <action_set>
-      <rsc_op id="109" operation="monitor" operation_key="ip-172.17.1.17_monitor_10000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="110" operation="monitor" operation_key="ip-172.17.1.17_monitor_10000" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.17" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="108" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="109" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="29">
     <action_set>
-      <rsc_op id="108" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="109" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.17" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="107" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
+        <pseudo_event id="108" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="131" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="132" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="30">
     <action_set>
-      <pseudo_event id="107" operation="stop" operation_key="ip-172.17.1.17_stop_0">
+      <pseudo_event id="108" operation="stop" operation_key="ip-172.17.1.17_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="123" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="124" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="31">
     <action_set>
-      <rsc_op id="114" operation="monitor" operation_key="ip-172.17.4.11_monitor_10000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="115" operation="monitor" operation_key="ip-172.17.4.11_monitor_10000" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="113" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="114" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="32">
     <action_set>
-      <rsc_op id="113" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="114" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="112" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+        <pseudo_event id="113" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="131" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="132" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="33">
     <action_set>
-      <pseudo_event id="112" operation="stop" operation_key="ip-172.17.4.11_stop_0">
+      <pseudo_event id="113" operation="stop" operation_key="ip-172.17.4.11_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="123" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="124" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="34">
     <action_set>
-      <pseudo_event id="115" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0">
+      <pseudo_event id="116" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="200000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="122" operation="stop" operation_key="haproxy-clone_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="123" operation="stop" operation_key="haproxy-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="35" priority="1000000">
     <action_set>
-      <pseudo_event id="123" operation="stopped" operation_key="haproxy-clone_stopped_0">
+      <pseudo_event id="124" operation="stopped" operation_key="haproxy-clone_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="115" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
+        <pseudo_event id="116" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="122" operation="stop" operation_key="haproxy-clone_stop_0"/>
+        <pseudo_event id="123" operation="stop" operation_key="haproxy-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="36">
     <action_set>
-      <pseudo_event id="122" operation="stop" operation_key="haproxy-clone_stop_0">
+      <pseudo_event id="123" operation="stop" operation_key="haproxy-clone_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="37">
     <action_set>
-      <rsc_op id="126" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="127" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
       </rsc_op>
@@ -538,33 +538,33 @@
   </synapse>
   <synapse id="38">
     <action_set>
-      <rsc_op id="22" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="23" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="126" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="127" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="39">
     <action_set>
-      <rsc_op id="6" operation="monitor" operation_key="stonith-fence_ipmilan-525400bbf613_monitor_60000" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="7" operation="monitor" operation_key="stonith-fence_ipmilan-525400bbf613_monitor_60000" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="22" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="23" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="40">
     <action_set>
-      <rsc_op id="127" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="128" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
       </rsc_op>
@@ -573,59 +573,59 @@
   </synapse>
   <synapse id="41">
     <action_set>
-      <rsc_op id="23" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="24" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="127" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="128" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="42">
     <action_set>
-      <rsc_op id="11" operation="monitor" operation_key="stonith-fence_ipmilan-525400b4f6bd_monitor_60000" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="12" operation="monitor" operation_key="stonith-fence_ipmilan-525400b4f6bd_monitor_60000" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="23" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="24" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="43">
     <action_set>
-      <rsc_op id="130" operation="monitor" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_60000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="131" operation="monitor" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_60000" on_node="controller-2" on_node_uuid="3">
         <primitive id="stonith-fence_ipmilan-5254005bdbb5" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="129" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="130" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="44">
     <action_set>
-      <rsc_op id="129" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="130" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="stonith-fence_ipmilan-5254005bdbb5" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="128" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
+        <pseudo_event id="129" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="45">
     <action_set>
-      <pseudo_event id="128" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0">
+      <pseudo_event id="129" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0">
         <attributes CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
       </pseudo_event>
     </action_set>
@@ -633,76 +633,76 @@
   </synapse>
   <synapse id="46">
     <action_set>
-      <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2">
-        <attributes CRM_meta_cinder_volume_role="true" CRM_meta_haproxy_role="true" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_redis_role="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="2"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="47">
-    <action_set>
-      <pseudo_event id="131" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="132" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="48">
+  <synapse id="47">
     <action_set>
-      <pseudo_event id="21" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="22" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="26" operation="stop" operation_key="messaging-1_stop_0"/>
+        <pseudo_event id="27" operation="stop" operation_key="messaging-1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="31" operation="stop" operation_key="galera-0_stop_0"/>
+        <pseudo_event id="32" operation="stop" operation_key="galera-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="36" operation="stop" operation_key="galera-2_stop_0"/>
+        <pseudo_event id="37" operation="stop" operation_key="galera-2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="69" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+        <pseudo_event id="70" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="87" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="88" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="104" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
+        <pseudo_event id="105" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="107" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
+        <pseudo_event id="108" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="112" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+        <pseudo_event id="113" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="115" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
+        <pseudo_event id="116" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="126" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="127" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="127" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="128" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="128" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
+        <pseudo_event id="129" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="131" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="132" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
       <trigger>
         <pseudo_event id="134" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="48">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2">
+        <attributes CRM_meta_cinder_volume_role="true" CRM_meta_haproxy_role="true" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_redis_role="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="2"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
diff --git a/pengine/test10/remote-recover-connection.scores b/pengine/test10/remote-recover-connection.scores
index 3d3beae..56a18eb 100644
--- a/pengine/test10/remote-recover-connection.scores
+++ b/pengine/test10/remote-recover-connection.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   controller-1: node is unclean
 Allocation scores:
 Using the original execution date of: 2017-05-03 13:33:24Z
 clone_color: galera-master allocation score on controller-0: -INFINITY
diff --git a/pengine/test10/remote-recover-connection.summary b/pengine/test10/remote-recover-connection.summary
index f21b2b5..e0a9d0e 100644
--- a/pengine/test10/remote-recover-connection.summary
+++ b/pengine/test10/remote-recover-connection.summary
@@ -37,9 +37,8 @@ RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
  stonith-fence_ipmilan-525400b4f6bd	(stonith:fence_ipmilan):	Started controller-0
  stonith-fence_ipmilan-5254005bdbb5	(stonith:fence_ipmilan):	Started controller-1 (UNCLEAN)
 
-  notice: Fencing   controller-1: node is unclean
 Transition Summary:
- * Fence (reboot) controller-1
+ * Fence (reboot) controller-1 'peer is no longer part of the cluster'
  * Move    messaging-1	(Started controller-1 -> controller-2)
  * Move    galera-0	(Started controller-1 -> controller-2)
  * Move    galera-2	(Started controller-1 -> controller-2)
@@ -62,7 +61,6 @@ Executing cluster transition:
  * Resource action: stonith-fence_ipmilan-525400b4f6bd monitor=60000 on controller-0
  * Pseudo action:   stonith-fence_ipmilan-5254005bdbb5_stop_0
  * Fencing controller-1 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   messaging-1_stop_0
  * Pseudo action:   galera-0_stop_0
  * Pseudo action:   galera-2_stop_0
@@ -73,6 +71,7 @@ Executing cluster transition:
  * Pseudo action:   redis-master_stop_0
  * Pseudo action:   haproxy-clone_stop_0
  * Resource action: stonith-fence_ipmilan-5254005bdbb5 start on controller-2
+ * Pseudo action:   stonith_complete
  * Resource action: messaging-1     start on controller-2
  * Resource action: galera-0        start on controller-2
  * Resource action: galera-2        start on controller-2
diff --git a/pengine/test10/remote-recover-fail.exp b/pengine/test10/remote-recover-fail.exp
index be45b88..bd014ae 100644
--- a/pengine/test10/remote-recover-fail.exp
+++ b/pengine/test10/remote-recover-fail.exp
@@ -1,20 +1,20 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="8" operation="monitor" operation_key="rhel7-auto4_monitor_60000" on_node="rhel7-auto2" on_node_uuid="2">
+      <rsc_op id="9" operation="monitor" operation_key="rhel7-auto4_monitor_60000" on_node="rhel7-auto2" on_node_uuid="2">
         <primitive id="rhel7-auto4" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="rhel7-auto2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="7" operation="start" operation_key="rhel7-auto4_start_0" on_node="rhel7-auto2" on_node_uuid="2"/>
+        <rsc_op id="8" operation="start" operation_key="rhel7-auto4_start_0" on_node="rhel7-auto2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="7" operation="start" operation_key="rhel7-auto4_start_0" on_node="rhel7-auto2" on_node_uuid="2">
+      <rsc_op id="8" operation="start" operation_key="rhel7-auto4_start_0" on_node="rhel7-auto2" on_node_uuid="2">
         <primitive id="rhel7-auto4" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="rhel7-auto2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="60000" />
       </rsc_op>
@@ -24,7 +24,7 @@
         <rsc_op id="3" operation="stop" operation_key="rhel7-auto4_stop_0" on_node="rhel7-auto2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="25" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="26" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
@@ -40,83 +40,83 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="11" operation="stop" operation_key="FAKE2_stop_0"/>
+        <pseudo_event id="12" operation="stop" operation_key="FAKE2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="22" operation="stop" operation_key="FAKE6_stop_0"/>
+        <pseudo_event id="23" operation="stop" operation_key="FAKE6_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="10" operation="monitor" operation_key="FAKE1_monitor_10000" on_node="rhel7-auto2" on_node_uuid="2">
+      <rsc_op id="11" operation="monitor" operation_key="FAKE1_monitor_10000" on_node="rhel7-auto2" on_node_uuid="2">
         <primitive id="FAKE1" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="rhel7-auto2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="9" operation="start" operation_key="FAKE1_start_0" on_node="rhel7-auto2" on_node_uuid="2"/>
+        <rsc_op id="10" operation="start" operation_key="FAKE1_start_0" on_node="rhel7-auto2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <rsc_op id="9" operation="start" operation_key="FAKE1_start_0" on_node="rhel7-auto2" on_node_uuid="2">
+      <rsc_op id="10" operation="start" operation_key="FAKE1_start_0" on_node="rhel7-auto2" on_node_uuid="2">
         <primitive id="FAKE1" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="rhel7-auto2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="25" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="26" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <rsc_op id="13" operation="monitor" operation_key="FAKE2_monitor_10000" on_node="rhel7-auto3" on_node_uuid="3">
+      <rsc_op id="14" operation="monitor" operation_key="FAKE2_monitor_10000" on_node="rhel7-auto3" on_node_uuid="3">
         <primitive id="FAKE2" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="rhel7-auto3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="12" operation="start" operation_key="FAKE2_start_0" on_node="rhel7-auto3" on_node_uuid="3"/>
+        <rsc_op id="13" operation="start" operation_key="FAKE2_start_0" on_node="rhel7-auto3" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <rsc_op id="12" operation="start" operation_key="FAKE2_start_0" on_node="rhel7-auto3" on_node_uuid="3">
+      <rsc_op id="13" operation="start" operation_key="FAKE2_start_0" on_node="rhel7-auto3" on_node_uuid="3">
         <primitive id="FAKE2" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="rhel7-auto3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="11" operation="stop" operation_key="FAKE2_stop_0"/>
+        <pseudo_event id="12" operation="stop" operation_key="FAKE2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="25" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="26" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <pseudo_event id="11" operation="stop" operation_key="FAKE2_stop_0">
+      <pseudo_event id="12" operation="stop" operation_key="FAKE2_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="26" operation="stonith" operation_key="stonith-rhel7-auto4-reboot" on_node="rhel7-auto4" on_node_uuid="rhel7-auto4"/>
+        <crm_event id="4" operation="stonith" operation_key="stonith-rhel7-auto4-reboot" on_node="rhel7-auto4" on_node_uuid="rhel7-auto4"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <rsc_op id="16" operation="monitor" operation_key="FAKE3_monitor_10000" on_node="rhel7-auto2" on_node_uuid="2">
+      <rsc_op id="17" operation="monitor" operation_key="FAKE3_monitor_10000" on_node="rhel7-auto2" on_node_uuid="2">
         <primitive id="FAKE3" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="rhel7-auto2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -125,7 +125,7 @@
   </synapse>
   <synapse id="9">
     <action_set>
-      <rsc_op id="19" operation="monitor" operation_key="FAKE4_monitor_10000" on_node="rhel7-auto3" on_node_uuid="3">
+      <rsc_op id="20" operation="monitor" operation_key="FAKE4_monitor_10000" on_node="rhel7-auto3" on_node_uuid="3">
         <primitive id="FAKE4" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="rhel7-auto3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -134,71 +134,60 @@
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="24" operation="monitor" operation_key="FAKE6_monitor_10000" on_node="rhel7-auto2" on_node_uuid="2">
+      <rsc_op id="25" operation="monitor" operation_key="FAKE6_monitor_10000" on_node="rhel7-auto2" on_node_uuid="2">
         <primitive id="FAKE6" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="rhel7-auto2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="23" operation="start" operation_key="FAKE6_start_0" on_node="rhel7-auto2" on_node_uuid="2"/>
+        <rsc_op id="24" operation="start" operation_key="FAKE6_start_0" on_node="rhel7-auto2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="23" operation="start" operation_key="FAKE6_start_0" on_node="rhel7-auto2" on_node_uuid="2">
+      <rsc_op id="24" operation="start" operation_key="FAKE6_start_0" on_node="rhel7-auto2" on_node_uuid="2">
         <primitive id="FAKE6" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="rhel7-auto2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="22" operation="stop" operation_key="FAKE6_stop_0"/>
+        <pseudo_event id="23" operation="stop" operation_key="FAKE6_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="25" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="26" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <pseudo_event id="22" operation="stop" operation_key="FAKE6_stop_0">
+      <pseudo_event id="23" operation="stop" operation_key="FAKE6_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="26" operation="stonith" operation_key="stonith-rhel7-auto4-reboot" on_node="rhel7-auto4" on_node_uuid="rhel7-auto4"/>
+        <crm_event id="4" operation="stonith" operation_key="stonith-rhel7-auto4-reboot" on_node="rhel7-auto4" on_node_uuid="rhel7-auto4"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13">
     <action_set>
-      <crm_event id="26" operation="stonith" operation_key="stonith-rhel7-auto4-reboot" on_node="rhel7-auto4" on_node_uuid="rhel7-auto4">
-        <attributes CRM_meta_on_node="rhel7-auto4" CRM_meta_on_node_uuid="rhel7-auto4" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="rhel7-auto4"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="14">
-    <action_set>
-      <pseudo_event id="25" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="26" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="26" operation="stonith" operation_key="stonith-rhel7-auto4-reboot" on_node="rhel7-auto4" on_node_uuid="rhel7-auto4"/>
+        <crm_event id="4" operation="stonith" operation_key="stonith-rhel7-auto4-reboot" on_node="rhel7-auto4" on_node_uuid="rhel7-auto4"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="14">
     <action_set>
-      <pseudo_event id="4" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="5" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
@@ -207,14 +196,25 @@
         <rsc_op id="3" operation="stop" operation_key="rhel7-auto4_stop_0" on_node="rhel7-auto2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="11" operation="stop" operation_key="FAKE2_stop_0"/>
+        <pseudo_event id="12" operation="stop" operation_key="FAKE2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="22" operation="stop" operation_key="FAKE6_stop_0"/>
+        <pseudo_event id="23" operation="stop" operation_key="FAKE6_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="25" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="26" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="15">
+    <action_set>
+      <crm_event id="4" operation="stonith" operation_key="stonith-rhel7-auto4-reboot" on_node="rhel7-auto4" on_node_uuid="rhel7-auto4">
+        <attributes CRM_meta_on_node="rhel7-auto4" CRM_meta_on_node_uuid="rhel7-auto4" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="rhel7-auto4"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
diff --git a/pengine/test10/remote-recover-fail.scores b/pengine/test10/remote-recover-fail.scores
index 02a0643..8fc7805 100644
--- a/pengine/test10/remote-recover-fail.scores
+++ b/pengine/test10/remote-recover-fail.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   rhel7-auto4: node is unclean
 Allocation scores:
 native_color: FAKE1 allocation score on rhel7-auto1: 0
 native_color: FAKE1 allocation score on rhel7-auto2: 0
diff --git a/pengine/test10/remote-recover-fail.summary b/pengine/test10/remote-recover-fail.summary
index fd518eb..302b716 100644
--- a/pengine/test10/remote-recover-fail.summary
+++ b/pengine/test10/remote-recover-fail.summary
@@ -13,9 +13,8 @@ OFFLINE: [ rhel7-auto1 ]
  FAKE5	(ocf::heartbeat:Dummy):	Started rhel7-auto3 
  FAKE6	(ocf::heartbeat:Dummy):	Started rhel7-auto4 (UNCLEAN)
 
-  notice: Fencing   rhel7-auto4: node is unclean
 Transition Summary:
- * Fence (reboot) rhel7-auto4
+ * Fence (reboot) rhel7-auto4 'FAKE2 is thought to be active there'
  * Recover rhel7-auto4	(Started rhel7-auto2)
  * Start   FAKE1	(rhel7-auto2)
  * Move    FAKE2	(Started rhel7-auto4 -> rhel7-auto3)
@@ -25,16 +24,16 @@ Executing cluster transition:
  * Resource action: FAKE3           monitor=10000 on rhel7-auto2
  * Resource action: FAKE4           monitor=10000 on rhel7-auto3
  * Fencing rhel7-auto4 (reboot)
- * Pseudo action:   stonith_complete
- * Resource action: FAKE1           start on rhel7-auto2
  * Pseudo action:   FAKE2_stop_0
  * Pseudo action:   FAKE6_stop_0
+ * Pseudo action:   stonith_complete
  * Resource action: rhel7-auto4     stop on rhel7-auto2
- * Resource action: FAKE1           monitor=10000 on rhel7-auto2
+ * Resource action: FAKE1           start on rhel7-auto2
  * Resource action: FAKE2           start on rhel7-auto3
  * Resource action: FAKE6           start on rhel7-auto2
  * Pseudo action:   all_stopped
  * Resource action: rhel7-auto4     start on rhel7-auto2
+ * Resource action: FAKE1           monitor=10000 on rhel7-auto2
  * Resource action: FAKE2           monitor=10000 on rhel7-auto3
  * Resource action: FAKE6           monitor=10000 on rhel7-auto2
  * Resource action: rhel7-auto4     monitor=60000 on rhel7-auto2
diff --git a/pengine/test10/remote-recover-no-resources.exp b/pengine/test10/remote-recover-no-resources.exp
index ba9b17b..987acfd 100644
--- a/pengine/test10/remote-recover-no-resources.exp
+++ b/pengine/test10/remote-recover-no-resources.exp
@@ -1,69 +1,69 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <pseudo_event id="25" operation="stop" operation_key="messaging-1_stop_0">
+      <pseudo_event id="26" operation="stop" operation_key="messaging-1_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="38" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="30" operation="monitor" operation_key="galera-0_monitor_20000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="31" operation="monitor" operation_key="galera-0_monitor_20000" on_node="controller-2" on_node_uuid="3">
         <primitive id="galera-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_interval="20000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  reconnect_interval="60"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="29" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="30" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="29" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="30" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="galera-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="28" operation="stop" operation_key="galera-0_stop_0"/>
+        <pseudo_event id="29" operation="stop" operation_key="galera-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="121" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="122" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="28" operation="stop" operation_key="galera-0_stop_0">
+      <pseudo_event id="29" operation="stop" operation_key="galera-0_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="33" operation="stop" operation_key="galera-2_stop_0">
+      <pseudo_event id="34" operation="stop" operation_key="galera-2_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
@@ -119,107 +119,107 @@
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="127" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+        <crm_event id="123" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <pseudo_event id="38" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0">
+      <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0">
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_notify_stop_resource="rabbitmq:2" CRM_meta_notify_stop_uname="messaging-1" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="41" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
+        <pseudo_event id="42" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="127" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+        <crm_event id="123" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10" priority="1000000">
     <action_set>
-      <pseudo_event id="42" operation="stopped" operation_key="rabbitmq-clone_stopped_0">
+      <pseudo_event id="43" operation="stopped" operation_key="rabbitmq-clone_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="38" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
+        <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="41" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
+        <pseudo_event id="42" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <pseudo_event id="41" operation="stop" operation_key="rabbitmq-clone_stop_0">
+      <pseudo_event id="42" operation="stop" operation_key="rabbitmq-clone_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="127" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+        <crm_event id="123" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <rsc_op id="13" operation="monitor" operation_key="galera_monitor_10000" internal_operation_key="galera:1_monitor_10000" on_node="galera-0" on_node_uuid="galera-0" router_node="controller-2">
+      <rsc_op id="14" operation="monitor" operation_key="galera_monitor_10000" internal_operation_key="galera:1_monitor_10000" on_node="galera-0" on_node_uuid="galera-0" router_node="controller-2">
         <primitive id="galera" long-id="galera:1" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-0" CRM_meta_on_node_uuid="galera-0" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384"  enable_creation="true" wsrep_cluster_address="gcomm://galera-0,galera-1,galera-2"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="29" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="30" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13" priority="1000000">
     <action_set>
-      <pseudo_event id="124" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0">
+      <pseudo_event id="125" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="123" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+        <pseudo_event id="124" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="125" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="127" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14" priority="1000000">
     <action_set>
-      <pseudo_event id="123" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0">
+      <pseudo_event id="124" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15">
     <action_set>
-      <pseudo_event id="59" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0">
+      <pseudo_event id="60" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="72" operation="stop" operation_key="redis-master_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="73" operation="stop" operation_key="redis-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -232,23 +232,23 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="74" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+        <pseudo_event id="75" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="17" priority="1000000">
     <action_set>
-      <rsc_op id="125" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="post" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="76" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+        <pseudo_event id="77" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="123" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+        <pseudo_event id="124" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -261,68 +261,68 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="74" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+        <pseudo_event id="75" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="19" priority="1000000">
     <action_set>
-      <rsc_op id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="127" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="post" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="76" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+        <pseudo_event id="77" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="123" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+        <pseudo_event id="124" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="20" priority="1000000">
     <action_set>
-      <pseudo_event id="77" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0">
+      <pseudo_event id="78" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="76" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+        <pseudo_event id="77" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="125" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="127" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21" priority="1000000">
     <action_set>
-      <pseudo_event id="76" operation="notify" operation_key="redis-master_post_notify_stopped_0">
+      <pseudo_event id="77" operation="notify" operation_key="redis-master_post_notify_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="73" operation="stopped" operation_key="redis-master_stopped_0"/>
+        <pseudo_event id="74" operation="stopped" operation_key="redis-master_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="75" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="76" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="22">
     <action_set>
-      <pseudo_event id="75" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0">
+      <pseudo_event id="76" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="74" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+        <pseudo_event id="75" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
       </trigger>
       <trigger>
         <rsc_op id="193" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:1_pre_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
@@ -334,7 +334,7 @@
   </synapse>
   <synapse id="23">
     <action_set>
-      <pseudo_event id="74" operation="notify" operation_key="redis-master_pre_notify_stop_0">
+      <pseudo_event id="75" operation="notify" operation_key="redis-master_pre_notify_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -342,211 +342,211 @@
   </synapse>
   <synapse id="24" priority="1000000">
     <action_set>
-      <pseudo_event id="73" operation="stopped" operation_key="redis-master_stopped_0">
+      <pseudo_event id="74" operation="stopped" operation_key="redis-master_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="59" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+        <pseudo_event id="60" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="72" operation="stop" operation_key="redis-master_stop_0"/>
+        <pseudo_event id="73" operation="stop" operation_key="redis-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="25">
     <action_set>
-      <pseudo_event id="72" operation="stop" operation_key="redis-master_stop_0">
+      <pseudo_event id="73" operation="stop" operation_key="redis-master_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="75" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="76" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="26">
     <action_set>
-      <rsc_op id="96" operation="monitor" operation_key="ip-172.17.1.14_monitor_10000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="97" operation="monitor" operation_key="ip-172.17.1.14_monitor_10000" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.14" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="95" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="96" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="27">
     <action_set>
-      <rsc_op id="95" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="96" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.14" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="94" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
+        <pseudo_event id="95" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="121" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="122" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="28">
     <action_set>
-      <pseudo_event id="94" operation="stop" operation_key="ip-172.17.1.14_stop_0">
+      <pseudo_event id="95" operation="stop" operation_key="ip-172.17.1.14_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="113" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="114" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="29">
     <action_set>
-      <rsc_op id="99" operation="monitor" operation_key="ip-172.17.1.17_monitor_10000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="100" operation="monitor" operation_key="ip-172.17.1.17_monitor_10000" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.17" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="98" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="99" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="30">
     <action_set>
-      <rsc_op id="98" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="99" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.17" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="97" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
+        <pseudo_event id="98" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="121" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="122" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="31">
     <action_set>
-      <pseudo_event id="97" operation="stop" operation_key="ip-172.17.1.17_stop_0">
+      <pseudo_event id="98" operation="stop" operation_key="ip-172.17.1.17_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="113" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="114" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="32">
     <action_set>
-      <rsc_op id="104" operation="monitor" operation_key="ip-172.17.4.11_monitor_10000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="105" operation="monitor" operation_key="ip-172.17.4.11_monitor_10000" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="103" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="104" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="33">
     <action_set>
-      <rsc_op id="103" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="104" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="102" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+        <pseudo_event id="103" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="121" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="122" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="34">
     <action_set>
-      <pseudo_event id="102" operation="stop" operation_key="ip-172.17.4.11_stop_0">
+      <pseudo_event id="103" operation="stop" operation_key="ip-172.17.4.11_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="113" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="114" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="35">
     <action_set>
-      <pseudo_event id="105" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0">
+      <pseudo_event id="106" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="200000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="112" operation="stop" operation_key="haproxy-clone_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="113" operation="stop" operation_key="haproxy-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="36" priority="1000000">
     <action_set>
-      <pseudo_event id="113" operation="stopped" operation_key="haproxy-clone_stopped_0">
+      <pseudo_event id="114" operation="stopped" operation_key="haproxy-clone_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="105" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
+        <pseudo_event id="106" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="112" operation="stop" operation_key="haproxy-clone_stop_0"/>
+        <pseudo_event id="113" operation="stop" operation_key="haproxy-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="37">
     <action_set>
-      <pseudo_event id="112" operation="stop" operation_key="haproxy-clone_stop_0">
+      <pseudo_event id="113" operation="stop" operation_key="haproxy-clone_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="38">
     <action_set>
-      <rsc_op id="116" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="117" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
       </rsc_op>
@@ -555,36 +555,36 @@
   </synapse>
   <synapse id="39">
     <action_set>
-      <rsc_op id="21" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="22" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="20" operation="all_stopped" operation_key="all_stopped"/>
+        <pseudo_event id="21" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <rsc_op id="116" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="117" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="40">
     <action_set>
-      <rsc_op id="6" operation="monitor" operation_key="stonith-fence_ipmilan-525400bbf613_monitor_60000" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="7" operation="monitor" operation_key="stonith-fence_ipmilan-525400bbf613_monitor_60000" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="21" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="22" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="41">
     <action_set>
-      <rsc_op id="117" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="118" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
       </rsc_op>
@@ -593,65 +593,65 @@
   </synapse>
   <synapse id="42">
     <action_set>
-      <rsc_op id="22" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="23" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="20" operation="all_stopped" operation_key="all_stopped"/>
+        <pseudo_event id="21" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <rsc_op id="117" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="118" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="43">
     <action_set>
-      <rsc_op id="11" operation="monitor" operation_key="stonith-fence_ipmilan-525400b4f6bd_monitor_60000" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="12" operation="monitor" operation_key="stonith-fence_ipmilan-525400b4f6bd_monitor_60000" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="22" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="23" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="44">
     <action_set>
-      <rsc_op id="120" operation="monitor" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_60000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="121" operation="monitor" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_60000" on_node="controller-2" on_node_uuid="3">
         <primitive id="stonith-fence_ipmilan-5254005bdbb5" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="119" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="120" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="45">
     <action_set>
-      <rsc_op id="119" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="120" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="stonith-fence_ipmilan-5254005bdbb5" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="20" operation="all_stopped" operation_key="all_stopped"/>
+        <pseudo_event id="21" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <pseudo_event id="118" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
+        <pseudo_event id="119" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="46">
     <action_set>
-      <pseudo_event id="118" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0">
+      <pseudo_event id="119" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0">
         <attributes CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
       </pseudo_event>
     </action_set>
@@ -659,7 +659,7 @@
   </synapse>
   <synapse id="47">
     <action_set>
-      <crm_event id="127" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1">
+      <crm_event id="123" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1">
         <attributes CRM_meta_last_failure_rabbitmq="1493336946" CRM_meta_on_node="messaging-1" CRM_meta_on_node_uuid="messaging-1" CRM_meta_rabbitmq_role="true" CRM_meta_rmq_node_attr_last_known_rabbitmq="rabbit@messaging-1" CRM_meta_rmq_node_attr_rabbitmq="rabbit@messaging-1" CRM_meta_stonith_action="reboot" />
         <downed>
           <node id="messaging-1"/>
@@ -668,88 +668,88 @@
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="48">
     <action_set>
-      <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2">
-        <attributes CRM_meta_cinder_volume_role="true" CRM_meta_haproxy_role="true" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_redis_role="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="2"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="49">
-    <action_set>
-      <pseudo_event id="121" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="122" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="127" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+        <crm_event id="123" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="50">
+  <synapse id="49">
     <action_set>
-      <pseudo_event id="20" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="21" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="25" operation="stop" operation_key="messaging-1_stop_0"/>
+        <pseudo_event id="26" operation="stop" operation_key="messaging-1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="28" operation="stop" operation_key="galera-0_stop_0"/>
+        <pseudo_event id="29" operation="stop" operation_key="galera-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="33" operation="stop" operation_key="galera-2_stop_0"/>
+        <pseudo_event id="34" operation="stop" operation_key="galera-2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="38" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
+        <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="59" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+        <pseudo_event id="60" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="77" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="78" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="94" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
+        <pseudo_event id="95" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="97" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
+        <pseudo_event id="98" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="102" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+        <pseudo_event id="103" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="105" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
+        <pseudo_event id="106" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="116" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="117" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="117" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="118" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="118" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
+        <pseudo_event id="119" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="121" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="122" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
       <trigger>
-        <pseudo_event id="124" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0"/>
+        <pseudo_event id="125" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0"/>
       </trigger>
       <trigger>
         <pseudo_event id="129" operation="notified" operation_key="rabbitmq_notified_0" internal_operation_key="rabbitmq:2_confirmed-post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="50">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2">
+        <attributes CRM_meta_cinder_volume_role="true" CRM_meta_haproxy_role="true" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_redis_role="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="2"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
diff --git a/pengine/test10/remote-recover-no-resources.scores b/pengine/test10/remote-recover-no-resources.scores
index 36a1ff4..e918fc6 100644
--- a/pengine/test10/remote-recover-no-resources.scores
+++ b/pengine/test10/remote-recover-no-resources.scores
@@ -1,5 +1,3 @@
-  notice: Fencing   controller-1: node is unclean
-  notice: Fencing   messaging-1: node is unclean
 Allocation scores:
 Using the original execution date of: 2017-05-03 13:33:24Z
 clone_color: galera-master allocation score on controller-0: -INFINITY
diff --git a/pengine/test10/remote-recover-no-resources.summary b/pengine/test10/remote-recover-no-resources.summary
index c3cd6a8..19b5181 100644
--- a/pengine/test10/remote-recover-no-resources.summary
+++ b/pengine/test10/remote-recover-no-resources.summary
@@ -37,11 +37,9 @@ RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
  stonith-fence_ipmilan-525400b4f6bd	(stonith:fence_ipmilan):	Started controller-0
  stonith-fence_ipmilan-5254005bdbb5	(stonith:fence_ipmilan):	Started controller-1 (UNCLEAN)
 
-  notice: Fencing   controller-1: node is unclean
-  notice: Fencing   messaging-1: node is unclean
 Transition Summary:
- * Fence (reboot) messaging-1
- * Fence (reboot) controller-1
+ * Fence (reboot) messaging-1 'resources are active and the connection is unrecoverable'
+ * Fence (reboot) controller-1 'peer is no longer part of the cluster'
  * Stop    messaging-1	(controller-1)
  * Move    galera-0	(Started controller-1 -> controller-2)
  * Stop    galera-2	(controller-1)
diff --git a/pengine/test10/remote-recover-unknown.exp b/pengine/test10/remote-recover-unknown.exp
index d63cf81..b8d51be 100644
--- a/pengine/test10/remote-recover-unknown.exp
+++ b/pengine/test10/remote-recover-unknown.exp
@@ -1,69 +1,69 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <pseudo_event id="26" operation="stop" operation_key="messaging-1_stop_0">
+      <pseudo_event id="27" operation="stop" operation_key="messaging-1_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="40" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="31" operation="monitor" operation_key="galera-0_monitor_20000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="32" operation="monitor" operation_key="galera-0_monitor_20000" on_node="controller-2" on_node_uuid="3">
         <primitive id="galera-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_interval="20000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  reconnect_interval="60"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="30" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="31" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="30" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="31" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="galera-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="galera-0_stop_0"/>
+        <pseudo_event id="30" operation="stop" operation_key="galera-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="122" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="123" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="29" operation="stop" operation_key="galera-0_stop_0">
+      <pseudo_event id="30" operation="stop" operation_key="galera-0_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="34" operation="stop" operation_key="galera-2_stop_0">
+      <pseudo_event id="35" operation="stop" operation_key="galera-2_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
@@ -119,107 +119,107 @@
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="129" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+        <crm_event id="124" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0">
+      <pseudo_event id="40" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0">
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_notify_stop_resource="rabbitmq:2" CRM_meta_notify_stop_uname="messaging-1" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="42" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
+        <pseudo_event id="43" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="129" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+        <crm_event id="124" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10" priority="1000000">
     <action_set>
-      <pseudo_event id="43" operation="stopped" operation_key="rabbitmq-clone_stopped_0">
+      <pseudo_event id="44" operation="stopped" operation_key="rabbitmq-clone_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
+        <pseudo_event id="40" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="42" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
+        <pseudo_event id="43" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <pseudo_event id="42" operation="stop" operation_key="rabbitmq-clone_stop_0">
+      <pseudo_event id="43" operation="stop" operation_key="rabbitmq-clone_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="129" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+        <crm_event id="124" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <rsc_op id="13" operation="monitor" operation_key="galera_monitor_10000" internal_operation_key="galera:1_monitor_10000" on_node="galera-0" on_node_uuid="galera-0" router_node="controller-2">
+      <rsc_op id="14" operation="monitor" operation_key="galera_monitor_10000" internal_operation_key="galera:1_monitor_10000" on_node="galera-0" on_node_uuid="galera-0" router_node="controller-2">
         <primitive id="galera" long-id="galera:1" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-0" CRM_meta_on_node_uuid="galera-0" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384"  enable_creation="true" wsrep_cluster_address="gcomm://galera-0,galera-1,galera-2"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="30" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="31" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13" priority="1000000">
     <action_set>
-      <pseudo_event id="125" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0">
+      <pseudo_event id="127" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="124" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+        <pseudo_event id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="128" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="127" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="129" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14" priority="1000000">
     <action_set>
-      <pseudo_event id="124" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0">
+      <pseudo_event id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15">
     <action_set>
-      <pseudo_event id="60" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0">
+      <pseudo_event id="61" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="73" operation="stop" operation_key="redis-master_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="74" operation="stop" operation_key="redis-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -232,23 +232,23 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="75" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+        <pseudo_event id="76" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="17" priority="1000000">
     <action_set>
-      <rsc_op id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="128" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="post" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="77" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+        <pseudo_event id="78" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="124" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+        <pseudo_event id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -261,68 +261,68 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="75" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+        <pseudo_event id="76" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="19" priority="1000000">
     <action_set>
-      <rsc_op id="127" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="129" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="post" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="77" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+        <pseudo_event id="78" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="124" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+        <pseudo_event id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="20" priority="1000000">
     <action_set>
-      <pseudo_event id="78" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0">
+      <pseudo_event id="79" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="77" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+        <pseudo_event id="78" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="128" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="127" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="129" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21" priority="1000000">
     <action_set>
-      <pseudo_event id="77" operation="notify" operation_key="redis-master_post_notify_stopped_0">
+      <pseudo_event id="78" operation="notify" operation_key="redis-master_post_notify_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="74" operation="stopped" operation_key="redis-master_stopped_0"/>
+        <pseudo_event id="75" operation="stopped" operation_key="redis-master_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="76" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="77" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="22">
     <action_set>
-      <pseudo_event id="76" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0">
+      <pseudo_event id="77" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="75" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+        <pseudo_event id="76" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
       </trigger>
       <trigger>
         <rsc_op id="196" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:1_pre_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
@@ -334,7 +334,7 @@
   </synapse>
   <synapse id="23">
     <action_set>
-      <pseudo_event id="75" operation="notify" operation_key="redis-master_pre_notify_stop_0">
+      <pseudo_event id="76" operation="notify" operation_key="redis-master_pre_notify_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -342,211 +342,211 @@
   </synapse>
   <synapse id="24" priority="1000000">
     <action_set>
-      <pseudo_event id="74" operation="stopped" operation_key="redis-master_stopped_0">
+      <pseudo_event id="75" operation="stopped" operation_key="redis-master_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="60" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+        <pseudo_event id="61" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="73" operation="stop" operation_key="redis-master_stop_0"/>
+        <pseudo_event id="74" operation="stop" operation_key="redis-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="25">
     <action_set>
-      <pseudo_event id="73" operation="stop" operation_key="redis-master_stop_0">
+      <pseudo_event id="74" operation="stop" operation_key="redis-master_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="76" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="77" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="26">
     <action_set>
-      <rsc_op id="97" operation="monitor" operation_key="ip-172.17.1.14_monitor_10000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="98" operation="monitor" operation_key="ip-172.17.1.14_monitor_10000" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.14" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="96" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="97" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="27">
     <action_set>
-      <rsc_op id="96" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="97" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.14" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="95" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
+        <pseudo_event id="96" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="122" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="123" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="28">
     <action_set>
-      <pseudo_event id="95" operation="stop" operation_key="ip-172.17.1.14_stop_0">
+      <pseudo_event id="96" operation="stop" operation_key="ip-172.17.1.14_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="114" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="115" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="29">
     <action_set>
-      <rsc_op id="100" operation="monitor" operation_key="ip-172.17.1.17_monitor_10000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="101" operation="monitor" operation_key="ip-172.17.1.17_monitor_10000" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.17" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="99" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="100" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="30">
     <action_set>
-      <rsc_op id="99" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="100" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.17" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="98" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
+        <pseudo_event id="99" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="122" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="123" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="31">
     <action_set>
-      <pseudo_event id="98" operation="stop" operation_key="ip-172.17.1.17_stop_0">
+      <pseudo_event id="99" operation="stop" operation_key="ip-172.17.1.17_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="114" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="115" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="32">
     <action_set>
-      <rsc_op id="105" operation="monitor" operation_key="ip-172.17.4.11_monitor_10000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="106" operation="monitor" operation_key="ip-172.17.4.11_monitor_10000" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="104" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="105" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="33">
     <action_set>
-      <rsc_op id="104" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="105" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="103" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+        <pseudo_event id="104" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="122" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="123" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="34">
     <action_set>
-      <pseudo_event id="103" operation="stop" operation_key="ip-172.17.4.11_stop_0">
+      <pseudo_event id="104" operation="stop" operation_key="ip-172.17.4.11_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="114" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="115" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="35">
     <action_set>
-      <pseudo_event id="106" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0">
+      <pseudo_event id="107" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="200000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="113" operation="stop" operation_key="haproxy-clone_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="114" operation="stop" operation_key="haproxy-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="36" priority="1000000">
     <action_set>
-      <pseudo_event id="114" operation="stopped" operation_key="haproxy-clone_stopped_0">
+      <pseudo_event id="115" operation="stopped" operation_key="haproxy-clone_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="106" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
+        <pseudo_event id="107" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="113" operation="stop" operation_key="haproxy-clone_stop_0"/>
+        <pseudo_event id="114" operation="stop" operation_key="haproxy-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="37">
     <action_set>
-      <pseudo_event id="113" operation="stop" operation_key="haproxy-clone_stop_0">
+      <pseudo_event id="114" operation="stop" operation_key="haproxy-clone_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="38">
     <action_set>
-      <rsc_op id="117" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="118" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
       </rsc_op>
@@ -555,36 +555,36 @@
   </synapse>
   <synapse id="39">
     <action_set>
-      <rsc_op id="21" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="22" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="20" operation="all_stopped" operation_key="all_stopped"/>
+        <pseudo_event id="21" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <rsc_op id="117" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="118" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="40">
     <action_set>
-      <rsc_op id="6" operation="monitor" operation_key="stonith-fence_ipmilan-525400bbf613_monitor_60000" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="7" operation="monitor" operation_key="stonith-fence_ipmilan-525400bbf613_monitor_60000" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="21" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="22" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="41">
     <action_set>
-      <rsc_op id="118" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="119" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
       </rsc_op>
@@ -593,65 +593,65 @@
   </synapse>
   <synapse id="42">
     <action_set>
-      <rsc_op id="22" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="23" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="20" operation="all_stopped" operation_key="all_stopped"/>
+        <pseudo_event id="21" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <rsc_op id="118" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="119" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="43">
     <action_set>
-      <rsc_op id="11" operation="monitor" operation_key="stonith-fence_ipmilan-525400b4f6bd_monitor_60000" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="12" operation="monitor" operation_key="stonith-fence_ipmilan-525400b4f6bd_monitor_60000" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="22" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="23" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="44">
     <action_set>
-      <rsc_op id="121" operation="monitor" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_60000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="122" operation="monitor" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_60000" on_node="controller-2" on_node_uuid="3">
         <primitive id="stonith-fence_ipmilan-5254005bdbb5" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="120" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="121" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="45">
     <action_set>
-      <rsc_op id="120" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="121" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="stonith-fence_ipmilan-5254005bdbb5" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="20" operation="all_stopped" operation_key="all_stopped"/>
+        <pseudo_event id="21" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <pseudo_event id="119" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
+        <pseudo_event id="120" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="46">
     <action_set>
-      <pseudo_event id="119" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0">
+      <pseudo_event id="120" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0">
         <attributes CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
       </pseudo_event>
     </action_set>
@@ -659,112 +659,112 @@
   </synapse>
   <synapse id="47">
     <action_set>
-      <crm_event id="129" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1">
-        <attributes CRM_meta_last_failure_rabbitmq="1493336946" CRM_meta_on_node="messaging-1" CRM_meta_on_node_uuid="messaging-1" CRM_meta_rabbitmq_role="true" CRM_meta_rmq_node_attr_last_known_rabbitmq="rabbit@messaging-1" CRM_meta_rmq_node_attr_rabbitmq="rabbit@messaging-1" CRM_meta_stonith_action="reboot" />
+      <crm_event id="125" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2">
+        <attributes CRM_meta_galera_role="true" CRM_meta_last_failure_galera="1493172798" CRM_meta_master_galera="100" CRM_meta_on_node="galera-2" CRM_meta_on_node_uuid="galera-2" CRM_meta_stonith_action="reboot" />
         <downed>
-          <node id="messaging-1"/>
+          <node id="galera-2"/>
         </downed>
       </crm_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="128" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="48">
     <action_set>
-      <crm_event id="128" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2">
-        <attributes CRM_meta_galera_role="true" CRM_meta_last_failure_galera="1493172798" CRM_meta_master_galera="100" CRM_meta_on_node="galera-2" CRM_meta_on_node_uuid="galera-2" CRM_meta_stonith_action="reboot" />
+      <crm_event id="124" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1">
+        <attributes CRM_meta_last_failure_rabbitmq="1493336946" CRM_meta_on_node="messaging-1" CRM_meta_on_node_uuid="messaging-1" CRM_meta_rabbitmq_role="true" CRM_meta_rmq_node_attr_last_known_rabbitmq="rabbit@messaging-1" CRM_meta_rmq_node_attr_rabbitmq="rabbit@messaging-1" CRM_meta_stonith_action="reboot" />
         <downed>
-          <node id="galera-2"/>
+          <node id="messaging-1"/>
         </downed>
       </crm_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="125" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="49">
     <action_set>
-      <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2">
-        <attributes CRM_meta_cinder_volume_role="true" CRM_meta_haproxy_role="true" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_redis_role="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="2"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="50">
-    <action_set>
-      <pseudo_event id="122" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="123" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="129" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+        <crm_event id="124" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="51">
+  <synapse id="50">
     <action_set>
-      <pseudo_event id="20" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="21" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="26" operation="stop" operation_key="messaging-1_stop_0"/>
+        <pseudo_event id="27" operation="stop" operation_key="messaging-1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="galera-0_stop_0"/>
+        <pseudo_event id="30" operation="stop" operation_key="galera-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="34" operation="stop" operation_key="galera-2_stop_0"/>
+        <pseudo_event id="35" operation="stop" operation_key="galera-2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
+        <pseudo_event id="40" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="60" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+        <pseudo_event id="61" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="78" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="79" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="95" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
+        <pseudo_event id="96" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="98" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
+        <pseudo_event id="99" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="103" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+        <pseudo_event id="104" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="106" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
+        <pseudo_event id="107" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="117" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="118" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="118" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="119" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="119" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
+        <pseudo_event id="120" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="122" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="123" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
       <trigger>
-        <pseudo_event id="125" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0"/>
+        <pseudo_event id="127" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0"/>
       </trigger>
       <trigger>
         <pseudo_event id="131" operation="notified" operation_key="rabbitmq_notified_0" internal_operation_key="rabbitmq:2_confirmed-post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="51">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2">
+        <attributes CRM_meta_cinder_volume_role="true" CRM_meta_haproxy_role="true" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_redis_role="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="2"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
diff --git a/pengine/test10/remote-recover-unknown.scores b/pengine/test10/remote-recover-unknown.scores
index d7d7713..e918fc6 100644
--- a/pengine/test10/remote-recover-unknown.scores
+++ b/pengine/test10/remote-recover-unknown.scores
@@ -1,6 +1,3 @@
-  notice: Fencing   controller-1: node is unclean
-  notice: Fencing   galera-2: node is unclean
-  notice: Fencing   messaging-1: node is unclean
 Allocation scores:
 Using the original execution date of: 2017-05-03 13:33:24Z
 clone_color: galera-master allocation score on controller-0: -INFINITY
diff --git a/pengine/test10/remote-recover-unknown.summary b/pengine/test10/remote-recover-unknown.summary
index 5b03065..772a699 100644
--- a/pengine/test10/remote-recover-unknown.summary
+++ b/pengine/test10/remote-recover-unknown.summary
@@ -37,13 +37,10 @@ RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
  stonith-fence_ipmilan-525400b4f6bd	(stonith:fence_ipmilan):	Started controller-0
  stonith-fence_ipmilan-5254005bdbb5	(stonith:fence_ipmilan):	Started controller-1 (UNCLEAN)
 
-  notice: Fencing   controller-1: node is unclean
-  notice: Fencing   galera-2: node is unclean
-  notice: Fencing   messaging-1: node is unclean
 Transition Summary:
- * Fence (reboot) messaging-1
- * Fence (reboot) galera-2
- * Fence (reboot) controller-1
+ * Fence (reboot) galera-2 'resources are in an unknown state and the connection is unrecoverable'
+ * Fence (reboot) messaging-1 'resources are active and the connection is unrecoverable'
+ * Fence (reboot) controller-1 'peer is no longer part of the cluster'
  * Stop    messaging-1	(controller-1)
  * Move    galera-0	(Started controller-1 -> controller-2)
  * Stop    galera-2	(controller-1)
@@ -72,33 +69,33 @@ Executing cluster transition:
  * Pseudo action:   redis-master_stop_0
  * Pseudo action:   haproxy-clone_stop_0
  * Fencing galera-2 (reboot)
- * Pseudo action:   redis_stop_0
- * Pseudo action:   redis-master_stopped_0
- * Pseudo action:   haproxy_stop_0
- * Pseudo action:   haproxy-clone_stopped_0
  * Fencing messaging-1 (reboot)
  * Pseudo action:   stonith_complete
  * Resource action: galera-0        start on controller-2
  * Pseudo action:   rabbitmq_post_notify_stop_0
  * Pseudo action:   rabbitmq-clone_stop_0
  * Resource action: galera          monitor=10000 on galera-0
- * Pseudo action:   redis-master_post_notify_stopped_0
- * Pseudo action:   ip-172.17.1.14_stop_0
- * Pseudo action:   ip-172.17.1.17_stop_0
- * Pseudo action:   ip-172.17.4.11_stop_0
+ * Pseudo action:   redis_stop_0
+ * Pseudo action:   redis-master_stopped_0
+ * Pseudo action:   haproxy_stop_0
+ * Pseudo action:   haproxy-clone_stopped_0
  * Resource action: galera-0        monitor=20000 on controller-2
  * Resource action: rabbitmq        notify on messaging-2
  * Resource action: rabbitmq        notify on messaging-0
  * Pseudo action:   rabbitmq_notified_0
  * Pseudo action:   rabbitmq_stop_0
  * Pseudo action:   rabbitmq-clone_stopped_0
+ * Pseudo action:   redis-master_post_notify_stopped_0
+ * Pseudo action:   ip-172.17.1.14_stop_0
+ * Pseudo action:   ip-172.17.1.17_stop_0
+ * Pseudo action:   ip-172.17.4.11_stop_0
+ * Pseudo action:   messaging-1_stop_0
  * Resource action: redis           notify on controller-0
  * Resource action: redis           notify on controller-2
  * Pseudo action:   redis-master_confirmed-post_notify_stopped_0
  * Resource action: ip-172.17.1.14  start on controller-2
  * Resource action: ip-172.17.1.17  start on controller-2
  * Resource action: ip-172.17.4.11  start on controller-2
- * Pseudo action:   messaging-1_stop_0
  * Pseudo action:   redis_notified_0
  * Resource action: ip-172.17.1.14  monitor=10000 on controller-2
  * Resource action: ip-172.17.1.17  monitor=10000 on controller-2
diff --git a/pengine/test10/remote-recover.exp b/pengine/test10/remote-recover.exp
index 918db8d..1fab2f1 100644
--- a/pengine/test10/remote-recover.exp
+++ b/pengine/test10/remote-recover.exp
@@ -1,20 +1,20 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="3" operation="monitor" operation_key="shooter_monitor_60000" on_node="rhel7-alt1" on_node_uuid="1">
+      <rsc_op id="4" operation="monitor" operation_key="shooter_monitor_60000" on_node="rhel7-alt1" on_node_uuid="1">
         <primitive id="shooter" class="stonith" type="fence_xvm"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="rhel7-alt1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="2" operation="start" operation_key="shooter_start_0" on_node="rhel7-alt1" on_node_uuid="1"/>
+        <rsc_op id="3" operation="start" operation_key="shooter_start_0" on_node="rhel7-alt1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="2" operation="start" operation_key="shooter_start_0" on_node="rhel7-alt1" on_node_uuid="1">
+      <rsc_op id="3" operation="start" operation_key="shooter_start_0" on_node="rhel7-alt1" on_node_uuid="1">
         <primitive id="shooter" class="stonith" type="fence_xvm"/>
         <attributes CRM_meta_on_node="rhel7-alt1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -23,20 +23,20 @@
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="5" operation="monitor" operation_key="rhel7-alt4_monitor_60000" on_node="rhel7-alt1" on_node_uuid="1">
+      <rsc_op id="6" operation="monitor" operation_key="rhel7-alt4_monitor_60000" on_node="rhel7-alt1" on_node_uuid="1">
         <primitive id="rhel7-alt4" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="rhel7-alt1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="15000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="start" operation_key="rhel7-alt4_start_0" on_node="rhel7-alt1" on_node_uuid="1"/>
+        <rsc_op id="5" operation="start" operation_key="rhel7-alt4_start_0" on_node="rhel7-alt1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="4" operation="start" operation_key="rhel7-alt4_start_0" on_node="rhel7-alt1" on_node_uuid="1">
+      <rsc_op id="5" operation="start" operation_key="rhel7-alt4_start_0" on_node="rhel7-alt1" on_node_uuid="1">
         <primitive id="rhel7-alt4" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="rhel7-alt1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="15000" />
       </rsc_op>
@@ -45,14 +45,14 @@
   </synapse>
   <synapse id="4">
     <action_set>
-      <rsc_op id="8" operation="monitor" operation_key="fake_monitor_10000" on_node="rhel7-alt4" on_node_uuid="rhel7-alt4" router_node="rhel7-alt1">
+      <rsc_op id="9" operation="monitor" operation_key="fake_monitor_10000" on_node="rhel7-alt4" on_node_uuid="rhel7-alt4" router_node="rhel7-alt1">
         <primitive id="fake" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="rhel7-alt4" CRM_meta_on_node_uuid="rhel7-alt4" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="start" operation_key="rhel7-alt4_start_0" on_node="rhel7-alt1" on_node_uuid="1"/>
+        <rsc_op id="5" operation="start" operation_key="rhel7-alt4_start_0" on_node="rhel7-alt1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/remote-recovery.exp b/pengine/test10/remote-recovery.exp
index 62860f0..cf74efb 100644
--- a/pengine/test10/remote-recovery.exp
+++ b/pengine/test10/remote-recovery.exp
@@ -1,163 +1,163 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="28" operation="monitor" operation_key="messaging-1_monitor_20000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="29" operation="monitor" operation_key="messaging-1_monitor_20000" on_node="controller-2" on_node_uuid="3">
         <primitive id="messaging-1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_interval="20000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  reconnect_interval="60"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="27" operation="start" operation_key="messaging-1_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="28" operation="start" operation_key="messaging-1_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="27" operation="start" operation_key="messaging-1_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="28" operation="start" operation_key="messaging-1_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="messaging-1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="26" operation="stop" operation_key="messaging-1_stop_0"/>
+        <pseudo_event id="27" operation="stop" operation_key="messaging-1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="131" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="132" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="26" operation="stop" operation_key="messaging-1_stop_0">
+      <pseudo_event id="27" operation="stop" operation_key="messaging-1_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="33" operation="monitor" operation_key="galera-0_monitor_20000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="34" operation="monitor" operation_key="galera-0_monitor_20000" on_node="controller-2" on_node_uuid="3">
         <primitive id="galera-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_interval="20000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  reconnect_interval="60"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="32" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="33" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <rsc_op id="32" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="33" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="galera-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="31" operation="stop" operation_key="galera-0_stop_0"/>
+        <pseudo_event id="32" operation="stop" operation_key="galera-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="131" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="132" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <pseudo_event id="31" operation="stop" operation_key="galera-0_stop_0">
+      <pseudo_event id="32" operation="stop" operation_key="galera-0_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <rsc_op id="38" operation="monitor" operation_key="galera-2_monitor_20000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="39" operation="monitor" operation_key="galera-2_monitor_20000" on_node="controller-2" on_node_uuid="3">
         <primitive id="galera-2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_interval="20000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  reconnect_interval="60"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="galera-2_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="38" operation="start" operation_key="galera-2_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <rsc_op id="37" operation="start" operation_key="galera-2_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="38" operation="start" operation_key="galera-2_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="galera-2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="36" operation="stop" operation_key="galera-2_stop_0"/>
+        <pseudo_event id="37" operation="stop" operation_key="galera-2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="131" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="132" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <pseudo_event id="36" operation="stop" operation_key="galera-2_stop_0">
+      <pseudo_event id="37" operation="stop" operation_key="galera-2_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <rsc_op id="20" operation="monitor" operation_key="rabbitmq_monitor_10000" internal_operation_key="rabbitmq:2_monitor_10000" on_node="messaging-1" on_node_uuid="messaging-1" router_node="controller-2">
+      <rsc_op id="21" operation="monitor" operation_key="rabbitmq_monitor_10000" internal_operation_key="rabbitmq:2_monitor_10000" on_node="messaging-1" on_node_uuid="messaging-1" router_node="controller-2">
         <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="messaging-1" CRM_meta_on_node_uuid="messaging-1" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="27" operation="start" operation_key="messaging-1_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="28" operation="start" operation_key="messaging-1_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="13" operation="monitor" operation_key="galera_monitor_10000" internal_operation_key="galera:1_monitor_10000" on_node="galera-2" on_node_uuid="galera-2" router_node="controller-2">
+      <rsc_op id="14" operation="monitor" operation_key="galera_monitor_10000" internal_operation_key="galera:1_monitor_10000" on_node="galera-2" on_node_uuid="galera-2" router_node="controller-2">
         <primitive id="galera" long-id="galera:1" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-2" CRM_meta_on_node_uuid="galera-2" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384"  enable_creation="true" wsrep_cluster_address="gcomm://galera-0,galera-1,galera-2"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="galera-2_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="38" operation="start" operation_key="galera-2_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="14" operation="monitor" operation_key="galera_monitor_10000" internal_operation_key="galera:2_monitor_10000" on_node="galera-0" on_node_uuid="galera-0" router_node="controller-2">
+      <rsc_op id="15" operation="monitor" operation_key="galera_monitor_10000" internal_operation_key="galera:2_monitor_10000" on_node="galera-0" on_node_uuid="galera-0" router_node="controller-2">
         <primitive id="galera" long-id="galera:2" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-0" CRM_meta_on_node_uuid="galera-0" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384"  enable_creation="true" wsrep_cluster_address="gcomm://galera-0,galera-1,galera-2"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="32" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="33" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
@@ -187,22 +187,22 @@
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <pseudo_event id="69" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0">
+      <pseudo_event id="70" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="82" operation="stop" operation_key="redis-master_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="83" operation="stop" operation_key="redis-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -215,7 +215,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="84" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+        <pseudo_event id="85" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -228,7 +228,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="86" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+        <pseudo_event id="87" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
         <pseudo_event id="133" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
@@ -244,7 +244,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="84" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+        <pseudo_event id="85" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -257,7 +257,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="86" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+        <pseudo_event id="87" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
         <pseudo_event id="133" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
@@ -266,13 +266,13 @@
   </synapse>
   <synapse id="19" priority="1000000">
     <action_set>
-      <pseudo_event id="87" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0">
+      <pseudo_event id="88" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="86" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+        <pseudo_event id="87" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
         <rsc_op id="135" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
@@ -284,28 +284,28 @@
   </synapse>
   <synapse id="20" priority="1000000">
     <action_set>
-      <pseudo_event id="86" operation="notify" operation_key="redis-master_post_notify_stopped_0">
+      <pseudo_event id="87" operation="notify" operation_key="redis-master_post_notify_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="83" operation="stopped" operation_key="redis-master_stopped_0"/>
+        <pseudo_event id="84" operation="stopped" operation_key="redis-master_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="85" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="86" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21">
     <action_set>
-      <pseudo_event id="85" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0">
+      <pseudo_event id="86" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="84" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+        <pseudo_event id="85" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
       </trigger>
       <trigger>
         <rsc_op id="193" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:1_pre_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
@@ -317,7 +317,7 @@
   </synapse>
   <synapse id="22">
     <action_set>
-      <pseudo_event id="84" operation="notify" operation_key="redis-master_pre_notify_stop_0">
+      <pseudo_event id="85" operation="notify" operation_key="redis-master_pre_notify_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -325,211 +325,211 @@
   </synapse>
   <synapse id="23" priority="1000000">
     <action_set>
-      <pseudo_event id="83" operation="stopped" operation_key="redis-master_stopped_0">
+      <pseudo_event id="84" operation="stopped" operation_key="redis-master_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="69" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+        <pseudo_event id="70" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="82" operation="stop" operation_key="redis-master_stop_0"/>
+        <pseudo_event id="83" operation="stop" operation_key="redis-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="24">
     <action_set>
-      <pseudo_event id="82" operation="stop" operation_key="redis-master_stop_0">
+      <pseudo_event id="83" operation="stop" operation_key="redis-master_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="85" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="86" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="25">
     <action_set>
-      <rsc_op id="106" operation="monitor" operation_key="ip-172.17.1.14_monitor_10000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="107" operation="monitor" operation_key="ip-172.17.1.14_monitor_10000" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.14" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="105" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="106" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="26">
     <action_set>
-      <rsc_op id="105" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="106" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.14" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="104" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
+        <pseudo_event id="105" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="131" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="132" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="27">
     <action_set>
-      <pseudo_event id="104" operation="stop" operation_key="ip-172.17.1.14_stop_0">
+      <pseudo_event id="105" operation="stop" operation_key="ip-172.17.1.14_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="123" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="124" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="28">
     <action_set>
-      <rsc_op id="109" operation="monitor" operation_key="ip-172.17.1.17_monitor_10000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="110" operation="monitor" operation_key="ip-172.17.1.17_monitor_10000" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.17" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="108" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="109" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="29">
     <action_set>
-      <rsc_op id="108" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="109" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.17" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="107" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
+        <pseudo_event id="108" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="131" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="132" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="30">
     <action_set>
-      <pseudo_event id="107" operation="stop" operation_key="ip-172.17.1.17_stop_0">
+      <pseudo_event id="108" operation="stop" operation_key="ip-172.17.1.17_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="123" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="124" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="31">
     <action_set>
-      <rsc_op id="114" operation="monitor" operation_key="ip-172.17.4.11_monitor_10000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="115" operation="monitor" operation_key="ip-172.17.4.11_monitor_10000" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="113" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="114" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="32">
     <action_set>
-      <rsc_op id="113" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="114" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="112" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+        <pseudo_event id="113" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="131" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="132" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="33">
     <action_set>
-      <pseudo_event id="112" operation="stop" operation_key="ip-172.17.4.11_stop_0">
+      <pseudo_event id="113" operation="stop" operation_key="ip-172.17.4.11_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="123" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="124" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="34">
     <action_set>
-      <pseudo_event id="115" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0">
+      <pseudo_event id="116" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="200000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="122" operation="stop" operation_key="haproxy-clone_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <pseudo_event id="123" operation="stop" operation_key="haproxy-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="35" priority="1000000">
     <action_set>
-      <pseudo_event id="123" operation="stopped" operation_key="haproxy-clone_stopped_0">
+      <pseudo_event id="124" operation="stopped" operation_key="haproxy-clone_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="115" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
+        <pseudo_event id="116" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="122" operation="stop" operation_key="haproxy-clone_stop_0"/>
+        <pseudo_event id="123" operation="stop" operation_key="haproxy-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="36">
     <action_set>
-      <pseudo_event id="122" operation="stop" operation_key="haproxy-clone_stop_0">
+      <pseudo_event id="123" operation="stop" operation_key="haproxy-clone_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="37">
     <action_set>
-      <rsc_op id="126" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="127" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
       </rsc_op>
@@ -538,33 +538,33 @@
   </synapse>
   <synapse id="38">
     <action_set>
-      <rsc_op id="22" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="23" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="126" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="127" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="39">
     <action_set>
-      <rsc_op id="6" operation="monitor" operation_key="stonith-fence_ipmilan-525400bbf613_monitor_60000" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="7" operation="monitor" operation_key="stonith-fence_ipmilan-525400bbf613_monitor_60000" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="22" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="23" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="40">
     <action_set>
-      <rsc_op id="127" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="128" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
       </rsc_op>
@@ -573,59 +573,59 @@
   </synapse>
   <synapse id="41">
     <action_set>
-      <rsc_op id="23" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="24" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="127" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="128" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="42">
     <action_set>
-      <rsc_op id="11" operation="monitor" operation_key="stonith-fence_ipmilan-525400b4f6bd_monitor_60000" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="12" operation="monitor" operation_key="stonith-fence_ipmilan-525400b4f6bd_monitor_60000" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="23" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="24" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="43">
     <action_set>
-      <rsc_op id="130" operation="monitor" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_60000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="131" operation="monitor" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_60000" on_node="controller-2" on_node_uuid="3">
         <primitive id="stonith-fence_ipmilan-5254005bdbb5" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="129" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="130" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="44">
     <action_set>
-      <rsc_op id="129" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="130" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="stonith-fence_ipmilan-5254005bdbb5" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="128" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
+        <pseudo_event id="129" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="45">
     <action_set>
-      <pseudo_event id="128" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0">
+      <pseudo_event id="129" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0">
         <attributes CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
       </pseudo_event>
     </action_set>
@@ -633,76 +633,76 @@
   </synapse>
   <synapse id="46">
     <action_set>
-      <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2">
-        <attributes CRM_meta_cinder_volume_role="true" CRM_meta_haproxy_role="true" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_redis_role="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="2"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="47">
-    <action_set>
-      <pseudo_event id="131" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="132" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="132" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="48">
+  <synapse id="47">
     <action_set>
-      <pseudo_event id="21" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="22" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="26" operation="stop" operation_key="messaging-1_stop_0"/>
+        <pseudo_event id="27" operation="stop" operation_key="messaging-1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="31" operation="stop" operation_key="galera-0_stop_0"/>
+        <pseudo_event id="32" operation="stop" operation_key="galera-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="36" operation="stop" operation_key="galera-2_stop_0"/>
+        <pseudo_event id="37" operation="stop" operation_key="galera-2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="69" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+        <pseudo_event id="70" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="87" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="88" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="104" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
+        <pseudo_event id="105" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="107" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
+        <pseudo_event id="108" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="112" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+        <pseudo_event id="113" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="115" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
+        <pseudo_event id="116" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="126" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="127" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="127" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="128" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="128" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
+        <pseudo_event id="129" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="131" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="132" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
       <trigger>
         <pseudo_event id="134" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="48">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2">
+        <attributes CRM_meta_cinder_volume_role="true" CRM_meta_haproxy_role="true" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_redis_role="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="2"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
diff --git a/pengine/test10/remote-recovery.scores b/pengine/test10/remote-recovery.scores
index 3d3beae..56a18eb 100644
--- a/pengine/test10/remote-recovery.scores
+++ b/pengine/test10/remote-recovery.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   controller-1: node is unclean
 Allocation scores:
 Using the original execution date of: 2017-05-03 13:33:24Z
 clone_color: galera-master allocation score on controller-0: -INFINITY
diff --git a/pengine/test10/remote-recovery.summary b/pengine/test10/remote-recovery.summary
index f21b2b5..e0a9d0e 100644
--- a/pengine/test10/remote-recovery.summary
+++ b/pengine/test10/remote-recovery.summary
@@ -37,9 +37,8 @@ RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
  stonith-fence_ipmilan-525400b4f6bd	(stonith:fence_ipmilan):	Started controller-0
  stonith-fence_ipmilan-5254005bdbb5	(stonith:fence_ipmilan):	Started controller-1 (UNCLEAN)
 
-  notice: Fencing   controller-1: node is unclean
 Transition Summary:
- * Fence (reboot) controller-1
+ * Fence (reboot) controller-1 'peer is no longer part of the cluster'
  * Move    messaging-1	(Started controller-1 -> controller-2)
  * Move    galera-0	(Started controller-1 -> controller-2)
  * Move    galera-2	(Started controller-1 -> controller-2)
@@ -62,7 +61,6 @@ Executing cluster transition:
  * Resource action: stonith-fence_ipmilan-525400b4f6bd monitor=60000 on controller-0
  * Pseudo action:   stonith-fence_ipmilan-5254005bdbb5_stop_0
  * Fencing controller-1 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   messaging-1_stop_0
  * Pseudo action:   galera-0_stop_0
  * Pseudo action:   galera-2_stop_0
@@ -73,6 +71,7 @@ Executing cluster transition:
  * Pseudo action:   redis-master_stop_0
  * Pseudo action:   haproxy-clone_stop_0
  * Resource action: stonith-fence_ipmilan-5254005bdbb5 start on controller-2
+ * Pseudo action:   stonith_complete
  * Resource action: messaging-1     start on controller-2
  * Resource action: galera-0        start on controller-2
  * Resource action: galera-2        start on controller-2
diff --git a/pengine/test10/remote-unclean2.exp b/pengine/test10/remote-unclean2.exp
index 045e976..ca0b3ba 100644
--- a/pengine/test10/remote-unclean2.exp
+++ b/pengine/test10/remote-unclean2.exp
@@ -1,23 +1,23 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="7" operation="start" operation_key="rhel7-auto4_start_0" on_node="rhel7-auto1" on_node_uuid="1">
+      <rsc_op id="8" operation="start" operation_key="rhel7-auto4_start_0" on_node="rhel7-auto1" on_node_uuid="1">
         <primitive id="rhel7-auto4" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="rhel7-auto1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="2" operation="stop" operation_key="rhel7-auto4_stop_0" on_node="rhel7-auto1" on_node_uuid="1"/>
+        <rsc_op id="3" operation="stop" operation_key="rhel7-auto4_stop_0" on_node="rhel7-auto1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="8" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="9" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="2" operation="stop" operation_key="rhel7-auto4_stop_0" on_node="rhel7-auto1" on_node_uuid="1">
+      <rsc_op id="3" operation="stop" operation_key="rhel7-auto4_stop_0" on_node="rhel7-auto1" on_node_uuid="1">
         <primitive id="rhel7-auto4" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="rhel7-auto1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="60000" />
         <downed>
@@ -36,46 +36,46 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="7" operation="start" operation_key="rhel7-auto4_start_0" on_node="rhel7-auto1" on_node_uuid="1"/>
+        <rsc_op id="8" operation="start" operation_key="rhel7-auto4_start_0" on_node="rhel7-auto1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <crm_event id="9" operation="stonith" operation_key="stonith-rhel7-auto4-reboot" on_node="rhel7-auto4" on_node_uuid="rhel7-auto4">
-        <attributes CRM_meta_on_node="rhel7-auto4" CRM_meta_on_node_uuid="rhel7-auto4" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="rhel7-auto4"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="4">
-    <action_set>
-      <pseudo_event id="8" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="9" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="9" operation="stonith" operation_key="stonith-rhel7-auto4-reboot" on_node="rhel7-auto4" on_node_uuid="rhel7-auto4"/>
+        <crm_event id="2" operation="stonith" operation_key="stonith-rhel7-auto4-reboot" on_node="rhel7-auto4" on_node_uuid="rhel7-auto4"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="5">
+  <synapse id="4">
     <action_set>
-      <pseudo_event id="4" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="5" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="2" operation="stop" operation_key="rhel7-auto4_stop_0" on_node="rhel7-auto1" on_node_uuid="1"/>
+        <rsc_op id="3" operation="stop" operation_key="rhel7-auto4_stop_0" on_node="rhel7-auto1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="8" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="9" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="5">
+    <action_set>
+      <crm_event id="2" operation="stonith" operation_key="stonith-rhel7-auto4-reboot" on_node="rhel7-auto4" on_node_uuid="rhel7-auto4">
+        <attributes CRM_meta_on_node="rhel7-auto4" CRM_meta_on_node_uuid="rhel7-auto4" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="rhel7-auto4"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
diff --git a/pengine/test10/remote-unclean2.scores b/pengine/test10/remote-unclean2.scores
index 2c2c9a5..72a5953 100644
--- a/pengine/test10/remote-unclean2.scores
+++ b/pengine/test10/remote-unclean2.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   rhel7-auto4: node is unclean
 Allocation scores:
 native_color: rhel7-auto4 allocation score on rhel7-auto1: 0
 native_color: rhel7-auto4 allocation score on rhel7-auto2: 0
diff --git a/pengine/test10/remote-unclean2.summary b/pengine/test10/remote-unclean2.summary
index 06047d1..1408c09 100644
--- a/pengine/test10/remote-unclean2.summary
+++ b/pengine/test10/remote-unclean2.summary
@@ -6,9 +6,8 @@ Online: [ rhel7-auto1 rhel7-auto2 rhel7-auto3 ]
  shooter	(stonith:fence_xvm):	Started rhel7-auto2 
  rhel7-auto4	(ocf::pacemaker:remote):	FAILED rhel7-auto1 
 
-  notice: Fencing   rhel7-auto4: node is unclean
 Transition Summary:
- * Fence (reboot) rhel7-auto4
+ * Fence (reboot) rhel7-auto4 'remote connection is unrecoverable'
  * Recover rhel7-auto4	(Started rhel7-auto1)
 
 Executing cluster transition:
diff --git a/pengine/test10/start-then-stop-with-unfence.scores b/pengine/test10/start-then-stop-with-unfence.scores
index a53e9f2..d353bef 100644
--- a/pengine/test10/start-then-stop-with-unfence.scores
+++ b/pengine/test10/start-then-stop-with-unfence.scores
@@ -1,4 +1,3 @@
-  notice: Unfencing rhel7-node1.example.com: Required by ip1
 Allocation scores:
 clone_color: jrummy-clone allocation score on rhel7-node1.example.com: 500
 clone_color: jrummy-clone allocation score on rhel7-node2.example.com: 500
diff --git a/pengine/test10/start-then-stop-with-unfence.summary b/pengine/test10/start-then-stop-with-unfence.summary
index bb376f5..5e127f7 100644
--- a/pengine/test10/start-then-stop-with-unfence.summary
+++ b/pengine/test10/start-then-stop-with-unfence.summary
@@ -10,9 +10,8 @@ Online: [ rhel7-node1.example.com rhel7-node2.example.com ]
      Started: [ rhel7-node2.example.com ]
      Stopped: [ rhel7-node1.example.com ]
 
-  notice: Unfencing rhel7-node1.example.com: Required by ip1
 Transition Summary:
- * Fence (on) rhel7-node1.example.com
+ * Fence (on) rhel7-node1.example.com 'Required by ip1'
  * Start   mpath-node1	(rhel7-node1.example.com)
  * Move    ip1	(Started rhel7-node2.example.com -> rhel7-node1.example.com)
  * Start   jrummy:1	(rhel7-node1.example.com)
diff --git a/pengine/test10/stonith-0.exp b/pengine/test10/stonith-0.exp
index 2a830b7..c409992 100644
--- a/pengine/test10/stonith-0.exp
+++ b/pengine/test10/stonith-0.exp
@@ -1,153 +1,153 @@
 <transition_graph cluster-delay="3m" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <pseudo_event id="39" operation="stopped" operation_key="group-1_stopped_0">
+      <pseudo_event id="41" operation="stopped" operation_key="group-1_stopped_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="25" operation="stop" operation_key="ocf_192.168.100.181_stop_0"/>
+        <pseudo_event id="27" operation="stop" operation_key="ocf_192.168.100.181_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="26" operation="stop" operation_key="ocf_192.168.100.181_stop_0"/>
+        <pseudo_event id="28" operation="stop" operation_key="ocf_192.168.100.181_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0"/>
+        <pseudo_event id="31" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="32" operation="stop" operation_key="ocf_192.168.100.183_stop_0"/>
+        <pseudo_event id="34" operation="stop" operation_key="ocf_192.168.100.183_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="33" operation="stop" operation_key="ocf_192.168.100.183_stop_0"/>
+        <pseudo_event id="35" operation="stop" operation_key="ocf_192.168.100.183_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="38" operation="stop" operation_key="group-1_stop_0"/>
+        <pseudo_event id="40" operation="stop" operation_key="group-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <pseudo_event id="38" operation="stop" operation_key="group-1_stop_0">
+      <pseudo_event id="40" operation="stop" operation_key="group-1_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="104" operation="stonith" operation_key="stonith-c001n03-reboot" on_node="c001n03" on_node_uuid="f5e1d2de-73da-432a-9d5c-37472253c2ee"/>
+        <crm_event id="2" operation="stonith" operation_key="stonith-c001n03-reboot" on_node="c001n03" on_node_uuid="f5e1d2de-73da-432a-9d5c-37472253c2ee"/>
       </trigger>
       <trigger>
-        <crm_event id="105" operation="stonith" operation_key="stonith-c001n05-reboot" on_node="c001n05" on_node_uuid="52a5ea5e-86ee-442c-b251-0bc9825c517e"/>
+        <crm_event id="14" operation="stonith" operation_key="stonith-c001n05-reboot" on_node="c001n05" on_node_uuid="52a5ea5e-86ee-442c-b251-0bc9825c517e"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="37" operation="running" operation_key="group-1_running_0">
+      <pseudo_event id="39" operation="running" operation_key="group-1_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="27" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5"/>
+        <rsc_op id="29" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5"/>
       </trigger>
       <trigger>
-        <rsc_op id="30" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5"/>
+        <rsc_op id="32" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5"/>
       </trigger>
       <trigger>
-        <rsc_op id="34" operation="start" operation_key="ocf_192.168.100.183_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5"/>
+        <rsc_op id="36" operation="start" operation_key="ocf_192.168.100.183_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5"/>
       </trigger>
       <trigger>
-        <pseudo_event id="36" operation="start" operation_key="group-1_start_0"/>
+        <pseudo_event id="38" operation="start" operation_key="group-1_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="36" operation="start" operation_key="group-1_start_0">
+      <pseudo_event id="38" operation="start" operation_key="group-1_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="39" operation="stopped" operation_key="group-1_stopped_0"/>
+        <pseudo_event id="41" operation="stopped" operation_key="group-1_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <rsc_op id="28" operation="monitor" operation_key="ocf_192.168.100.181_monitor_5000" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5">
+      <rsc_op id="30" operation="monitor" operation_key="ocf_192.168.100.181_monitor_5000" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5">
         <primitive id="ocf_192.168.100.181" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5" CRM_meta_timeout="20000"  ip="192.168.100.181"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="27" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5"/>
+        <rsc_op id="29" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <rsc_op id="27" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5">
+      <rsc_op id="29" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5">
         <primitive id="ocf_192.168.100.181" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5" CRM_meta_timeout="20000"  ip="192.168.100.181"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="25" operation="stop" operation_key="ocf_192.168.100.181_stop_0"/>
+        <pseudo_event id="27" operation="stop" operation_key="ocf_192.168.100.181_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="26" operation="stop" operation_key="ocf_192.168.100.181_stop_0"/>
+        <pseudo_event id="28" operation="stop" operation_key="ocf_192.168.100.181_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="36" operation="start" operation_key="group-1_start_0"/>
+        <pseudo_event id="38" operation="start" operation_key="group-1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="103" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="105" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="26" operation="stop" operation_key="ocf_192.168.100.181_stop_0">
+      <pseudo_event id="28" operation="stop" operation_key="ocf_192.168.100.181_stop_0">
         <attributes CRM_meta_timeout="20000"  ip="192.168.100.181"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0"/>
+        <crm_event id="14" operation="stonith" operation_key="stonith-c001n05-reboot" on_node="c001n05" on_node_uuid="52a5ea5e-86ee-442c-b251-0bc9825c517e"/>
       </trigger>
       <trigger>
-        <pseudo_event id="38" operation="stop" operation_key="group-1_stop_0"/>
+        <pseudo_event id="31" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="105" operation="stonith" operation_key="stonith-c001n05-reboot" on_node="c001n05" on_node_uuid="52a5ea5e-86ee-442c-b251-0bc9825c517e"/>
+        <pseudo_event id="40" operation="stop" operation_key="group-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <pseudo_event id="25" operation="stop" operation_key="ocf_192.168.100.181_stop_0">
+      <pseudo_event id="27" operation="stop" operation_key="ocf_192.168.100.181_stop_0">
         <attributes CRM_meta_timeout="20000"  ip="192.168.100.181"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0"/>
+        <crm_event id="2" operation="stonith" operation_key="stonith-c001n03-reboot" on_node="c001n03" on_node_uuid="f5e1d2de-73da-432a-9d5c-37472253c2ee"/>
       </trigger>
       <trigger>
-        <pseudo_event id="38" operation="stop" operation_key="group-1_stop_0"/>
+        <pseudo_event id="31" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="104" operation="stonith" operation_key="stonith-c001n03-reboot" on_node="c001n03" on_node_uuid="f5e1d2de-73da-432a-9d5c-37472253c2ee"/>
+        <pseudo_event id="40" operation="stop" operation_key="group-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <rsc_op id="31" operation="monitor" operation_key="heartbeat_192.168.100.182_monitor_5000" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5">
+      <rsc_op id="33" operation="monitor" operation_key="heartbeat_192.168.100.182_monitor_5000" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5">
         <primitive id="heartbeat_192.168.100.182" class="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5" CRM_meta_timeout="20000" >
           <param name="1" value="192.168.100.182"/>
@@ -156,13 +156,13 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="30" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5"/>
+        <rsc_op id="32" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <rsc_op id="30" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5">
+      <rsc_op id="32" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5">
         <primitive id="heartbeat_192.168.100.182" class="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5" CRM_meta_timeout="20000" >
           <param name="1" value="192.168.100.182"/>
@@ -171,22 +171,22 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="27" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5"/>
+        <rsc_op id="29" operation="start" operation_key="ocf_192.168.100.181_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0"/>
+        <pseudo_event id="31" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="36" operation="start" operation_key="group-1_start_0"/>
+        <pseudo_event id="38" operation="start" operation_key="group-1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="103" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="105" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <pseudo_event id="29" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0">
+      <pseudo_event id="31" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0">
         <attributes CRM_meta_timeout="20000" >
           <param name="1" value="192.168.100.182"/>
         </attributes>
@@ -194,172 +194,172 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="32" operation="stop" operation_key="ocf_192.168.100.183_stop_0"/>
+        <crm_event id="2" operation="stonith" operation_key="stonith-c001n03-reboot" on_node="c001n03" on_node_uuid="f5e1d2de-73da-432a-9d5c-37472253c2ee"/>
       </trigger>
       <trigger>
-        <pseudo_event id="33" operation="stop" operation_key="ocf_192.168.100.183_stop_0"/>
+        <pseudo_event id="34" operation="stop" operation_key="ocf_192.168.100.183_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="38" operation="stop" operation_key="group-1_stop_0"/>
+        <pseudo_event id="35" operation="stop" operation_key="ocf_192.168.100.183_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="104" operation="stonith" operation_key="stonith-c001n03-reboot" on_node="c001n03" on_node_uuid="f5e1d2de-73da-432a-9d5c-37472253c2ee"/>
+        <pseudo_event id="40" operation="stop" operation_key="group-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="35" operation="monitor" operation_key="ocf_192.168.100.183_monitor_5000" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5">
+      <rsc_op id="37" operation="monitor" operation_key="ocf_192.168.100.183_monitor_5000" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5">
         <primitive id="ocf_192.168.100.183" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5" CRM_meta_timeout="20000"  ip="192.168.100.183"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="34" operation="start" operation_key="ocf_192.168.100.183_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5"/>
+        <rsc_op id="36" operation="start" operation_key="ocf_192.168.100.183_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <rsc_op id="34" operation="start" operation_key="ocf_192.168.100.183_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5">
+      <rsc_op id="36" operation="start" operation_key="ocf_192.168.100.183_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5">
         <primitive id="ocf_192.168.100.183" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n02" CRM_meta_on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5" CRM_meta_timeout="20000"  ip="192.168.100.183"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="30" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5"/>
+        <rsc_op id="32" operation="start" operation_key="heartbeat_192.168.100.182_start_0" on_node="c001n02" on_node_uuid="e8973f32-1c97-40cb-a84a-c489f49664a5"/>
       </trigger>
       <trigger>
-        <pseudo_event id="32" operation="stop" operation_key="ocf_192.168.100.183_stop_0"/>
+        <pseudo_event id="34" operation="stop" operation_key="ocf_192.168.100.183_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="33" operation="stop" operation_key="ocf_192.168.100.183_stop_0"/>
+        <pseudo_event id="35" operation="stop" operation_key="ocf_192.168.100.183_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="36" operation="start" operation_key="group-1_start_0"/>
+        <pseudo_event id="38" operation="start" operation_key="group-1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="103" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="105" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13">
     <action_set>
-      <pseudo_event id="33" operation="stop" operation_key="ocf_192.168.100.183_stop_0">
+      <pseudo_event id="35" operation="stop" operation_key="ocf_192.168.100.183_stop_0">
         <attributes CRM_meta_timeout="20000"  ip="192.168.100.183"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="38" operation="stop" operation_key="group-1_stop_0"/>
+        <crm_event id="14" operation="stonith" operation_key="stonith-c001n05-reboot" on_node="c001n05" on_node_uuid="52a5ea5e-86ee-442c-b251-0bc9825c517e"/>
       </trigger>
       <trigger>
-        <crm_event id="105" operation="stonith" operation_key="stonith-c001n05-reboot" on_node="c001n05" on_node_uuid="52a5ea5e-86ee-442c-b251-0bc9825c517e"/>
+        <pseudo_event id="40" operation="stop" operation_key="group-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <pseudo_event id="32" operation="stop" operation_key="ocf_192.168.100.183_stop_0">
+      <pseudo_event id="34" operation="stop" operation_key="ocf_192.168.100.183_stop_0">
         <attributes CRM_meta_timeout="20000"  ip="192.168.100.183"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="38" operation="stop" operation_key="group-1_stop_0"/>
+        <crm_event id="2" operation="stonith" operation_key="stonith-c001n03-reboot" on_node="c001n03" on_node_uuid="f5e1d2de-73da-432a-9d5c-37472253c2ee"/>
       </trigger>
       <trigger>
-        <crm_event id="104" operation="stonith" operation_key="stonith-c001n03-reboot" on_node="c001n03" on_node_uuid="f5e1d2de-73da-432a-9d5c-37472253c2ee"/>
+        <pseudo_event id="40" operation="stop" operation_key="group-1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15">
     <action_set>
-      <rsc_op id="50" operation="monitor" operation_key="rsc_c001n05_monitor_5000" on_node="c001n07" on_node_uuid="6637ebb5-ab11-4728-b69e-b61222af9a0c">
+      <rsc_op id="52" operation="monitor" operation_key="rsc_c001n05_monitor_5000" on_node="c001n07" on_node_uuid="6637ebb5-ab11-4728-b69e-b61222af9a0c">
         <primitive id="rsc_c001n05" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="c001n07" CRM_meta_on_node_uuid="6637ebb5-ab11-4728-b69e-b61222af9a0c" CRM_meta_timeout="20000"  ip="192.168.100.187"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="49" operation="start" operation_key="rsc_c001n05_start_0" on_node="c001n07" on_node_uuid="6637ebb5-ab11-4728-b69e-b61222af9a0c"/>
+        <rsc_op id="51" operation="start" operation_key="rsc_c001n05_start_0" on_node="c001n07" on_node_uuid="6637ebb5-ab11-4728-b69e-b61222af9a0c"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="16">
     <action_set>
-      <rsc_op id="49" operation="start" operation_key="rsc_c001n05_start_0" on_node="c001n07" on_node_uuid="6637ebb5-ab11-4728-b69e-b61222af9a0c">
+      <rsc_op id="51" operation="start" operation_key="rsc_c001n05_start_0" on_node="c001n07" on_node_uuid="6637ebb5-ab11-4728-b69e-b61222af9a0c">
         <primitive id="rsc_c001n05" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="c001n07" CRM_meta_on_node_uuid="6637ebb5-ab11-4728-b69e-b61222af9a0c" CRM_meta_timeout="40000"  ip="192.168.100.187"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="48" operation="stop" operation_key="rsc_c001n05_stop_0"/>
+        <pseudo_event id="50" operation="stop" operation_key="rsc_c001n05_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="103" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="105" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="17">
     <action_set>
-      <pseudo_event id="48" operation="stop" operation_key="rsc_c001n05_stop_0">
+      <pseudo_event id="50" operation="stop" operation_key="rsc_c001n05_stop_0">
         <attributes CRM_meta_timeout="20000"  ip="192.168.100.187"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="105" operation="stonith" operation_key="stonith-c001n05-reboot" on_node="c001n05" on_node_uuid="52a5ea5e-86ee-442c-b251-0bc9825c517e"/>
+        <crm_event id="14" operation="stonith" operation_key="stonith-c001n05-reboot" on_node="c001n05" on_node_uuid="52a5ea5e-86ee-442c-b251-0bc9825c517e"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="18">
     <action_set>
-      <rsc_op id="55" operation="monitor" operation_key="rsc_c001n07_monitor_5000" on_node="c001n07" on_node_uuid="6637ebb5-ab11-4728-b69e-b61222af9a0c">
+      <rsc_op id="57" operation="monitor" operation_key="rsc_c001n07_monitor_5000" on_node="c001n07" on_node_uuid="6637ebb5-ab11-4728-b69e-b61222af9a0c">
         <primitive id="rsc_c001n07" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="c001n07" CRM_meta_on_node_uuid="6637ebb5-ab11-4728-b69e-b61222af9a0c" CRM_meta_timeout="20000"  ip="192.168.100.189"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="54" operation="start" operation_key="rsc_c001n07_start_0" on_node="c001n07" on_node_uuid="6637ebb5-ab11-4728-b69e-b61222af9a0c"/>
+        <rsc_op id="56" operation="start" operation_key="rsc_c001n07_start_0" on_node="c001n07" on_node_uuid="6637ebb5-ab11-4728-b69e-b61222af9a0c"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="19">
     <action_set>
-      <rsc_op id="54" operation="start" operation_key="rsc_c001n07_start_0" on_node="c001n07" on_node_uuid="6637ebb5-ab11-4728-b69e-b61222af9a0c">
+      <rsc_op id="56" operation="start" operation_key="rsc_c001n07_start_0" on_node="c001n07" on_node_uuid="6637ebb5-ab11-4728-b69e-b61222af9a0c">
         <primitive id="rsc_c001n07" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="c001n07" CRM_meta_on_node_uuid="6637ebb5-ab11-4728-b69e-b61222af9a0c" CRM_meta_timeout="40000"  ip="192.168.100.189"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="53" operation="stop" operation_key="rsc_c001n07_stop_0"/>
+        <pseudo_event id="55" operation="stop" operation_key="rsc_c001n07_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="103" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="105" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="20">
     <action_set>
-      <pseudo_event id="53" operation="stop" operation_key="rsc_c001n07_stop_0">
+      <pseudo_event id="55" operation="stop" operation_key="rsc_c001n07_stop_0">
         <attributes CRM_meta_timeout="20000"  ip="192.168.100.189"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="104" operation="stonith" operation_key="stonith-c001n03-reboot" on_node="c001n03" on_node_uuid="f5e1d2de-73da-432a-9d5c-37472253c2ee"/>
+        <crm_event id="2" operation="stonith" operation_key="stonith-c001n03-reboot" on_node="c001n03" on_node_uuid="f5e1d2de-73da-432a-9d5c-37472253c2ee"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21">
     <action_set>
-      <rsc_op id="68" operation="monitor" operation_key="child_DoFencing:4_monitor_20000" on_node="c001n08" on_node_uuid="f3dcc75c-12da-4949-b01c-1988f7df5238">
+      <rsc_op id="70" operation="monitor" operation_key="child_DoFencing:4_monitor_20000" on_node="c001n08" on_node_uuid="f3dcc75c-12da-4949-b01c-1988f7df5238">
         <primitive id="child_DoFencing" long-id="child_DoFencing:4" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="7" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="c001n08" CRM_meta_on_node_uuid="f3dcc75c-12da-4949-b01c-1988f7df5238" CRM_meta_requires="nothing" CRM_meta_timeout="40000"  hostlist="c001n03 c001n02 c001n04 c001n05 c001n06 c001n07 c001n08 "/>
       </rsc_op>
@@ -368,72 +368,72 @@
   </synapse>
   <synapse id="22">
     <action_set>
-      <crm_event id="105" operation="stonith" operation_key="stonith-c001n05-reboot" on_node="c001n05" on_node_uuid="52a5ea5e-86ee-442c-b251-0bc9825c517e">
-        <attributes CRM_meta_on_node="c001n05" CRM_meta_on_node_uuid="52a5ea5e-86ee-442c-b251-0bc9825c517e" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="52a5ea5e-86ee-442c-b251-0bc9825c517e"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="23">
-    <action_set>
-      <crm_event id="104" operation="stonith" operation_key="stonith-c001n03-reboot" on_node="c001n03" on_node_uuid="f5e1d2de-73da-432a-9d5c-37472253c2ee">
-        <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="f5e1d2de-73da-432a-9d5c-37472253c2ee" CRM_meta_op_no_wait="true" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="f5e1d2de-73da-432a-9d5c-37472253c2ee"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <crm_event id="105" operation="stonith" operation_key="stonith-c001n05-reboot" on_node="c001n05" on_node_uuid="52a5ea5e-86ee-442c-b251-0bc9825c517e"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="24">
-    <action_set>
-      <pseudo_event id="103" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="105" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="104" operation="stonith" operation_key="stonith-c001n03-reboot" on_node="c001n03" on_node_uuid="f5e1d2de-73da-432a-9d5c-37472253c2ee"/>
+        <crm_event id="2" operation="stonith" operation_key="stonith-c001n03-reboot" on_node="c001n03" on_node_uuid="f5e1d2de-73da-432a-9d5c-37472253c2ee"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="25">
+  <synapse id="23">
     <action_set>
-      <pseudo_event id="24" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="26" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="25" operation="stop" operation_key="ocf_192.168.100.181_stop_0"/>
+        <pseudo_event id="27" operation="stop" operation_key="ocf_192.168.100.181_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="28" operation="stop" operation_key="ocf_192.168.100.181_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="26" operation="stop" operation_key="ocf_192.168.100.181_stop_0"/>
+        <pseudo_event id="31" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="heartbeat_192.168.100.182_stop_0"/>
+        <pseudo_event id="34" operation="stop" operation_key="ocf_192.168.100.183_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="32" operation="stop" operation_key="ocf_192.168.100.183_stop_0"/>
+        <pseudo_event id="35" operation="stop" operation_key="ocf_192.168.100.183_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="33" operation="stop" operation_key="ocf_192.168.100.183_stop_0"/>
+        <pseudo_event id="50" operation="stop" operation_key="rsc_c001n05_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="48" operation="stop" operation_key="rsc_c001n05_stop_0"/>
+        <pseudo_event id="55" operation="stop" operation_key="rsc_c001n07_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="53" operation="stop" operation_key="rsc_c001n07_stop_0"/>
+        <pseudo_event id="105" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="24">
+    <action_set>
+      <crm_event id="14" operation="stonith" operation_key="stonith-c001n05-reboot" on_node="c001n05" on_node_uuid="52a5ea5e-86ee-442c-b251-0bc9825c517e">
+        <attributes CRM_meta_on_node="c001n05" CRM_meta_on_node_uuid="52a5ea5e-86ee-442c-b251-0bc9825c517e" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="52a5ea5e-86ee-442c-b251-0bc9825c517e"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="25">
+    <action_set>
+      <crm_event id="2" operation="stonith" operation_key="stonith-c001n03-reboot" on_node="c001n03" on_node_uuid="f5e1d2de-73da-432a-9d5c-37472253c2ee">
+        <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="f5e1d2de-73da-432a-9d5c-37472253c2ee" CRM_meta_op_no_wait="true" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="f5e1d2de-73da-432a-9d5c-37472253c2ee"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs>
       <trigger>
-        <pseudo_event id="103" operation="stonith_complete" operation_key="stonith_complete"/>
+        <crm_event id="14" operation="stonith" operation_key="stonith-c001n05-reboot" on_node="c001n05" on_node_uuid="52a5ea5e-86ee-442c-b251-0bc9825c517e"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/stonith-0.scores b/pengine/test10/stonith-0.scores
index db3ddb9..7aab8cd 100644
--- a/pengine/test10/stonith-0.scores
+++ b/pengine/test10/stonith-0.scores
@@ -1,5 +1,3 @@
-  notice: Fencing   c001n03: node is unclean
-  notice: Fencing   c001n05: node is unclean
 Allocation scores:
 clone_color: DoFencing allocation score on c001n02: 0
 clone_color: DoFencing allocation score on c001n03: 0
diff --git a/pengine/test10/stonith-0.summary b/pengine/test10/stonith-0.summary
index 6983a90..1062520 100644
--- a/pengine/test10/stonith-0.summary
+++ b/pengine/test10/stonith-0.summary
@@ -36,11 +36,9 @@ Online: [ c001n02 c001n04 c001n06 c001n07 c001n08 ]
      ocf_msdummy:12	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n06 
      ocf_msdummy:13	(ocf::heartbeat:/usr/lib/heartbeat/cts/OCFMSDummy):	Slave c001n06 
 
-  notice: Fencing   c001n03: node is unclean
-  notice: Fencing   c001n05: node is unclean
 Transition Summary:
- * Fence (reboot) c001n05
- * Fence (reboot) c001n03
+ * Fence (reboot) c001n05 'ocf_192.168.100.183 failed there'
+ * Fence (reboot) c001n03 'ocf_192.168.100.183 failed there'
  * Move    ocf_192.168.100.181	(Started c001n03 -> c001n02)
  * Move    heartbeat_192.168.100.182	(Started c001n03 -> c001n02)
  * Recover ocf_192.168.100.183	(Started c001n03 -> c001n02)
@@ -51,12 +49,12 @@ Executing cluster transition:
  * Resource action: child_DoFencing:4 monitor=20000 on c001n08
  * Fencing c001n05 (reboot)
  * Fencing c001n03 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   group-1_stop_0
  * Pseudo action:   ocf_192.168.100.183_stop_0
  * Pseudo action:   ocf_192.168.100.183_stop_0
  * Pseudo action:   rsc_c001n05_stop_0
  * Pseudo action:   rsc_c001n07_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   heartbeat_192.168.100.182_stop_0
  * Resource action: rsc_c001n05     start on c001n07
  * Resource action: rsc_c001n07     start on c001n07
diff --git a/pengine/test10/stonith-1.exp b/pengine/test10/stonith-1.exp
index f7499ad..2ccd1ef 100644
--- a/pengine/test10/stonith-1.exp
+++ b/pengine/test10/stonith-1.exp
@@ -1,22 +1,22 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <pseudo_event id="14" operation="running" operation_key="group-1_running_0">
+      <pseudo_event id="15" operation="running" operation_key="group-1_running_0">
         <attributes CRM_meta_timeout="10000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="11" operation="start" operation_key="r192.168.100.183_start_0" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86"/>
+        <rsc_op id="12" operation="start" operation_key="r192.168.100.183_start_0" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86"/>
       </trigger>
       <trigger>
-        <pseudo_event id="13" operation="start" operation_key="group-1_start_0"/>
+        <pseudo_event id="14" operation="start" operation_key="group-1_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <pseudo_event id="13" operation="start" operation_key="group-1_start_0">
+      <pseudo_event id="14" operation="start" operation_key="group-1_start_0">
         <attributes CRM_meta_timeout="10000" />
       </pseudo_event>
     </action_set>
@@ -24,7 +24,7 @@
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="10" operation="monitor" operation_key="r192.168.100.182_monitor_5000" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86">
+      <rsc_op id="11" operation="monitor" operation_key="r192.168.100.182_monitor_5000" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86">
         <primitive id="r192.168.100.182" class="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="sles-1" CRM_meta_on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86" CRM_meta_timeout="10000" >
           <param name="1" value="192.168.100.182"/>
@@ -35,36 +35,36 @@
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="12" operation="monitor" operation_key="r192.168.100.183_monitor_5000" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86">
+      <rsc_op id="13" operation="monitor" operation_key="r192.168.100.183_monitor_5000" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86">
         <primitive id="r192.168.100.183" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="sles-1" CRM_meta_on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86" CRM_meta_timeout="10000"  ip="192.168.100.183"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="11" operation="start" operation_key="r192.168.100.183_start_0" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86"/>
+        <rsc_op id="12" operation="start" operation_key="r192.168.100.183_start_0" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <rsc_op id="11" operation="start" operation_key="r192.168.100.183_start_0" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86">
+      <rsc_op id="12" operation="start" operation_key="r192.168.100.183_start_0" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86">
         <primitive id="r192.168.100.183" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="sles-1" CRM_meta_on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86" CRM_meta_timeout="10000"  ip="192.168.100.183"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="13" operation="start" operation_key="group-1_start_0"/>
+        <pseudo_event id="14" operation="start" operation_key="group-1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="67" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="68" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <rsc_op id="19" operation="monitor" operation_key="lsb_dummy_monitor_5000" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088">
+      <rsc_op id="20" operation="monitor" operation_key="lsb_dummy_monitor_5000" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088">
         <primitive id="lsb_dummy" class="lsb" type="/usr/lib64/heartbeat/cts/LSBDummy"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="sles-2" CRM_meta_on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088" CRM_meta_timeout="10000" />
       </rsc_op>
@@ -73,48 +73,48 @@
   </synapse>
   <synapse id="6">
     <action_set>
-      <rsc_op id="22" operation="monitor" operation_key="migrator_monitor_10000" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
+      <rsc_op id="23" operation="monitor" operation_key="migrator_monitor_10000" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
         <primitive id="migrator" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="sles-4" CRM_meta_on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee" CRM_meta_timeout="10000" allow_migrate="1" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="21" operation="start" operation_key="migrator_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee"/>
+        <rsc_op id="22" operation="start" operation_key="migrator_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <rsc_op id="21" operation="start" operation_key="migrator_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
+      <rsc_op id="22" operation="start" operation_key="migrator_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
         <primitive id="migrator" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_on_node="sles-4" CRM_meta_on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee" CRM_meta_timeout="10000" allow_migrate="1" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="20" operation="stop" operation_key="migrator_stop_0"/>
+        <pseudo_event id="21" operation="stop" operation_key="migrator_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="67" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="68" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <pseudo_event id="20" operation="stop" operation_key="migrator_stop_0">
+      <pseudo_event id="21" operation="stop" operation_key="migrator_stop_0">
         <attributes CRM_meta_timeout="10000" allow_migrate="1" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="68" operation="stonith" operation_key="stonith-sles-3-reboot" on_node="sles-3" on_node_uuid="2298606a-6a8c-499a-9d25-76242f7006ec"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-sles-3-reboot" on_node="sles-3" on_node_uuid="2298606a-6a8c-499a-9d25-76242f7006ec"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <rsc_op id="27" operation="monitor" operation_key="rsc_sles-2_monitor_5000" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088">
+      <rsc_op id="28" operation="monitor" operation_key="rsc_sles-2_monitor_5000" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088">
         <primitive id="rsc_sles-2" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="sles-2" CRM_meta_on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088" CRM_meta_timeout="10000"  ip="192.168.100.185"/>
       </rsc_op>
@@ -123,48 +123,48 @@
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="30" operation="monitor" operation_key="rsc_sles-3_monitor_5000" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
+      <rsc_op id="31" operation="monitor" operation_key="rsc_sles-3_monitor_5000" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
         <primitive id="rsc_sles-3" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="sles-4" CRM_meta_on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee" CRM_meta_timeout="10000"  ip="192.168.100.186"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="29" operation="start" operation_key="rsc_sles-3_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee"/>
+        <rsc_op id="30" operation="start" operation_key="rsc_sles-3_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="29" operation="start" operation_key="rsc_sles-3_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
+      <rsc_op id="30" operation="start" operation_key="rsc_sles-3_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
         <primitive id="rsc_sles-3" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="sles-4" CRM_meta_on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee" CRM_meta_timeout="10000"  ip="192.168.100.186"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="28" operation="stop" operation_key="rsc_sles-3_stop_0"/>
+        <pseudo_event id="29" operation="stop" operation_key="rsc_sles-3_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="67" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="68" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <pseudo_event id="28" operation="stop" operation_key="rsc_sles-3_stop_0">
+      <pseudo_event id="29" operation="stop" operation_key="rsc_sles-3_stop_0">
         <attributes CRM_meta_timeout="10000"  ip="192.168.100.186"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="68" operation="stonith" operation_key="stonith-sles-3-reboot" on_node="sles-3" on_node_uuid="2298606a-6a8c-499a-9d25-76242f7006ec"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-sles-3-reboot" on_node="sles-3" on_node_uuid="2298606a-6a8c-499a-9d25-76242f7006ec"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13">
     <action_set>
-      <rsc_op id="33" operation="monitor" operation_key="rsc_sles-4_monitor_5000" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
+      <rsc_op id="34" operation="monitor" operation_key="rsc_sles-4_monitor_5000" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
         <primitive id="rsc_sles-4" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="sles-4" CRM_meta_on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee" CRM_meta_timeout="10000"  ip="192.168.100.187"/>
       </rsc_op>
@@ -173,63 +173,63 @@
   </synapse>
   <synapse id="14">
     <action_set>
-      <rsc_op id="40" operation="monitor" operation_key="child_DoFencing:2_monitor_60000" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
+      <rsc_op id="41" operation="monitor" operation_key="child_DoFencing:2_monitor_60000" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
         <primitive id="child_DoFencing" long-id="child_DoFencing:2" class="stonith" type="external/vmware"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="sles-4" CRM_meta_on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee" CRM_meta_requires="nothing" CRM_meta_timeout="300000"  device_host="vmhost"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="39" operation="start" operation_key="child_DoFencing:2_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee"/>
+        <rsc_op id="40" operation="start" operation_key="child_DoFencing:2_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15">
     <action_set>
-      <rsc_op id="39" operation="start" operation_key="child_DoFencing:2_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
+      <rsc_op id="40" operation="start" operation_key="child_DoFencing:2_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
         <primitive id="child_DoFencing" long-id="child_DoFencing:2" class="stonith" type="external/vmware"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="sles-4" CRM_meta_on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee" CRM_meta_requires="nothing" CRM_meta_timeout="180000"  device_host="vmhost"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="38" operation="stop" operation_key="child_DoFencing:2_stop_0"/>
+        <pseudo_event id="39" operation="stop" operation_key="child_DoFencing:2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="41" operation="start" operation_key="DoFencing_start_0"/>
+        <pseudo_event id="42" operation="start" operation_key="DoFencing_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="16">
     <action_set>
-      <pseudo_event id="38" operation="stop" operation_key="child_DoFencing:2_stop_0">
+      <pseudo_event id="39" operation="stop" operation_key="child_DoFencing:2_stop_0">
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="180000"  device_host="vmhost"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="43" operation="stop" operation_key="DoFencing_stop_0"/>
+        <pseudo_event id="44" operation="stop" operation_key="DoFencing_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="17" priority="1000000">
     <action_set>
-      <pseudo_event id="44" operation="stopped" operation_key="DoFencing_stopped_0">
+      <pseudo_event id="45" operation="stopped" operation_key="DoFencing_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="10000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="38" operation="stop" operation_key="child_DoFencing:2_stop_0"/>
+        <pseudo_event id="39" operation="stop" operation_key="child_DoFencing:2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="43" operation="stop" operation_key="DoFencing_stop_0"/>
+        <pseudo_event id="44" operation="stop" operation_key="DoFencing_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="18">
     <action_set>
-      <pseudo_event id="43" operation="stop" operation_key="DoFencing_stop_0">
+      <pseudo_event id="44" operation="stop" operation_key="DoFencing_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="10000" />
       </pseudo_event>
     </action_set>
@@ -237,362 +237,361 @@
   </synapse>
   <synapse id="19" priority="1000000">
     <action_set>
-      <pseudo_event id="42" operation="running" operation_key="DoFencing_running_0">
+      <pseudo_event id="43" operation="running" operation_key="DoFencing_running_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="10000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="39" operation="start" operation_key="child_DoFencing:2_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee"/>
+        <rsc_op id="40" operation="start" operation_key="child_DoFencing:2_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee"/>
       </trigger>
       <trigger>
-        <pseudo_event id="41" operation="start" operation_key="DoFencing_start_0"/>
+        <pseudo_event id="42" operation="start" operation_key="DoFencing_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="20">
     <action_set>
-      <pseudo_event id="41" operation="start" operation_key="DoFencing_start_0">
+      <pseudo_event id="42" operation="start" operation_key="DoFencing_start_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="10000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="44" operation="stopped" operation_key="DoFencing_stopped_0"/>
+        <pseudo_event id="45" operation="stopped" operation_key="DoFencing_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21">
     <action_set>
-      <rsc_op id="46" operation="monitor" operation_key="ocf_msdummy:0_monitor_5000" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
+      <rsc_op id="47" operation="monitor" operation_key="ocf_msdummy:0_monitor_5000" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
         <primitive id="ocf_msdummy:0" class="ocf" provider="heartbeat" type="Stateful"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_interval="5000" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="sles-4" CRM_meta_on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee" CRM_meta_timeout="10000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="45" operation="start" operation_key="ocf_msdummy:0_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee"/>
+        <rsc_op id="46" operation="start" operation_key="ocf_msdummy:0_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="22">
     <action_set>
-      <rsc_op id="45" operation="start" operation_key="ocf_msdummy:0_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
+      <rsc_op id="46" operation="start" operation_key="ocf_msdummy:0_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
         <primitive id="ocf_msdummy:0" class="ocf" provider="heartbeat" type="Stateful"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="sles-4" CRM_meta_on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee" CRM_meta_timeout="10000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="59" operation="start" operation_key="master_rsc_1_start_0"/>
+        <pseudo_event id="60" operation="start" operation_key="master_rsc_1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="67" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="68" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="23">
     <action_set>
-      <rsc_op id="48" operation="monitor" operation_key="ocf_msdummy:1_monitor_5000" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86">
+      <rsc_op id="49" operation="monitor" operation_key="ocf_msdummy:1_monitor_5000" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86">
         <primitive id="ocf_msdummy:1" class="ocf" provider="heartbeat" type="Stateful"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_interval="5000" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="sles-1" CRM_meta_on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86" CRM_meta_timeout="10000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="47" operation="start" operation_key="ocf_msdummy:1_start_0" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86"/>
+        <rsc_op id="48" operation="start" operation_key="ocf_msdummy:1_start_0" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="24">
     <action_set>
-      <rsc_op id="47" operation="start" operation_key="ocf_msdummy:1_start_0" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86">
+      <rsc_op id="48" operation="start" operation_key="ocf_msdummy:1_start_0" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86">
         <primitive id="ocf_msdummy:1" class="ocf" provider="heartbeat" type="Stateful"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="sles-1" CRM_meta_on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86" CRM_meta_timeout="10000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="59" operation="start" operation_key="master_rsc_1_start_0"/>
+        <pseudo_event id="60" operation="start" operation_key="master_rsc_1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="67" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="68" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="25">
     <action_set>
-      <rsc_op id="51" operation="monitor" operation_key="ocf_msdummy:2_monitor_5000" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088">
+      <rsc_op id="52" operation="monitor" operation_key="ocf_msdummy:2_monitor_5000" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088">
         <primitive id="ocf_msdummy:2" class="ocf" provider="heartbeat" type="Stateful"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_interval="5000" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="sles-2" CRM_meta_on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088" CRM_meta_timeout="10000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="50" operation="start" operation_key="ocf_msdummy:2_start_0" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088"/>
+        <rsc_op id="51" operation="start" operation_key="ocf_msdummy:2_start_0" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="26">
     <action_set>
-      <rsc_op id="50" operation="start" operation_key="ocf_msdummy:2_start_0" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088">
+      <rsc_op id="51" operation="start" operation_key="ocf_msdummy:2_start_0" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088">
         <primitive id="ocf_msdummy:2" class="ocf" provider="heartbeat" type="Stateful"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="sles-2" CRM_meta_on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088" CRM_meta_timeout="10000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="49" operation="stop" operation_key="ocf_msdummy:2_stop_0"/>
+        <pseudo_event id="50" operation="stop" operation_key="ocf_msdummy:2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="59" operation="start" operation_key="master_rsc_1_start_0"/>
+        <pseudo_event id="60" operation="start" operation_key="master_rsc_1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="67" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="68" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="27">
     <action_set>
-      <pseudo_event id="49" operation="stop" operation_key="ocf_msdummy:2_stop_0">
+      <pseudo_event id="50" operation="stop" operation_key="ocf_msdummy:2_stop_0">
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="10000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="61" operation="stop" operation_key="master_rsc_1_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-sles-3-reboot" on_node="sles-3" on_node_uuid="2298606a-6a8c-499a-9d25-76242f7006ec"/>
       </trigger>
       <trigger>
-        <crm_event id="68" operation="stonith" operation_key="stonith-sles-3-reboot" on_node="sles-3" on_node_uuid="2298606a-6a8c-499a-9d25-76242f7006ec"/>
+        <pseudo_event id="62" operation="stop" operation_key="master_rsc_1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="28">
     <action_set>
-      <rsc_op id="53" operation="monitor" operation_key="ocf_msdummy:3_monitor_5000" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
+      <rsc_op id="54" operation="monitor" operation_key="ocf_msdummy:3_monitor_5000" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
         <primitive id="ocf_msdummy:3" class="ocf" provider="heartbeat" type="Stateful"/>
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_interval="5000" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="sles-4" CRM_meta_on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee" CRM_meta_timeout="10000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="52" operation="start" operation_key="ocf_msdummy:3_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee"/>
+        <rsc_op id="53" operation="start" operation_key="ocf_msdummy:3_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="29">
     <action_set>
-      <rsc_op id="52" operation="start" operation_key="ocf_msdummy:3_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
+      <rsc_op id="53" operation="start" operation_key="ocf_msdummy:3_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee">
         <primitive id="ocf_msdummy:3" class="ocf" provider="heartbeat" type="Stateful"/>
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="sles-4" CRM_meta_on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee" CRM_meta_timeout="10000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="59" operation="start" operation_key="master_rsc_1_start_0"/>
+        <pseudo_event id="60" operation="start" operation_key="master_rsc_1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="67" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="68" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="30">
     <action_set>
-      <rsc_op id="55" operation="monitor" operation_key="ocf_msdummy:4_monitor_5000" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86">
+      <rsc_op id="56" operation="monitor" operation_key="ocf_msdummy:4_monitor_5000" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86">
         <primitive id="ocf_msdummy:4" class="ocf" provider="heartbeat" type="Stateful"/>
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_interval="5000" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="sles-1" CRM_meta_on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86" CRM_meta_timeout="10000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="54" operation="start" operation_key="ocf_msdummy:4_start_0" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86"/>
+        <rsc_op id="55" operation="start" operation_key="ocf_msdummy:4_start_0" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="31">
     <action_set>
-      <rsc_op id="54" operation="start" operation_key="ocf_msdummy:4_start_0" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86">
+      <rsc_op id="55" operation="start" operation_key="ocf_msdummy:4_start_0" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86">
         <primitive id="ocf_msdummy:4" class="ocf" provider="heartbeat" type="Stateful"/>
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="sles-1" CRM_meta_on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86" CRM_meta_timeout="10000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="59" operation="start" operation_key="master_rsc_1_start_0"/>
+        <pseudo_event id="60" operation="start" operation_key="master_rsc_1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="67" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="68" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="32">
     <action_set>
-      <rsc_op id="58" operation="monitor" operation_key="ocf_msdummy:5_monitor_5000" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088">
+      <rsc_op id="59" operation="monitor" operation_key="ocf_msdummy:5_monitor_5000" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088">
         <primitive id="ocf_msdummy:5" class="ocf" provider="heartbeat" type="Stateful"/>
         <attributes CRM_meta_clone="5" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_interval="5000" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="sles-2" CRM_meta_on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088" CRM_meta_timeout="10000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="57" operation="start" operation_key="ocf_msdummy:5_start_0" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088"/>
+        <rsc_op id="58" operation="start" operation_key="ocf_msdummy:5_start_0" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="33">
     <action_set>
-      <rsc_op id="57" operation="start" operation_key="ocf_msdummy:5_start_0" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088">
+      <rsc_op id="58" operation="start" operation_key="ocf_msdummy:5_start_0" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088">
         <primitive id="ocf_msdummy:5" class="ocf" provider="heartbeat" type="Stateful"/>
         <attributes CRM_meta_clone="5" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="sles-2" CRM_meta_on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088" CRM_meta_timeout="10000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="56" operation="stop" operation_key="ocf_msdummy:5_stop_0"/>
+        <pseudo_event id="57" operation="stop" operation_key="ocf_msdummy:5_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="59" operation="start" operation_key="master_rsc_1_start_0"/>
+        <pseudo_event id="60" operation="start" operation_key="master_rsc_1_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="67" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="68" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="34">
     <action_set>
-      <pseudo_event id="56" operation="stop" operation_key="ocf_msdummy:5_stop_0">
+      <pseudo_event id="57" operation="stop" operation_key="ocf_msdummy:5_stop_0">
         <attributes CRM_meta_clone="5" CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="10000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="61" operation="stop" operation_key="master_rsc_1_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-sles-3-reboot" on_node="sles-3" on_node_uuid="2298606a-6a8c-499a-9d25-76242f7006ec"/>
       </trigger>
       <trigger>
-        <crm_event id="68" operation="stonith" operation_key="stonith-sles-3-reboot" on_node="sles-3" on_node_uuid="2298606a-6a8c-499a-9d25-76242f7006ec"/>
+        <pseudo_event id="62" operation="stop" operation_key="master_rsc_1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="35" priority="1000000">
     <action_set>
-      <pseudo_event id="62" operation="stopped" operation_key="master_rsc_1_stopped_0">
+      <pseudo_event id="63" operation="stopped" operation_key="master_rsc_1_stopped_0">
         <attributes CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="10000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="49" operation="stop" operation_key="ocf_msdummy:2_stop_0"/>
+        <pseudo_event id="50" operation="stop" operation_key="ocf_msdummy:2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="56" operation="stop" operation_key="ocf_msdummy:5_stop_0"/>
+        <pseudo_event id="57" operation="stop" operation_key="ocf_msdummy:5_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="61" operation="stop" operation_key="master_rsc_1_stop_0"/>
+        <pseudo_event id="62" operation="stop" operation_key="master_rsc_1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="36">
     <action_set>
-      <pseudo_event id="61" operation="stop" operation_key="master_rsc_1_stop_0">
+      <pseudo_event id="62" operation="stop" operation_key="master_rsc_1_stop_0">
         <attributes CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="10000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="68" operation="stonith" operation_key="stonith-sles-3-reboot" on_node="sles-3" on_node_uuid="2298606a-6a8c-499a-9d25-76242f7006ec"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-sles-3-reboot" on_node="sles-3" on_node_uuid="2298606a-6a8c-499a-9d25-76242f7006ec"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="37" priority="1000000">
     <action_set>
-      <pseudo_event id="60" operation="running" operation_key="master_rsc_1_running_0">
+      <pseudo_event id="61" operation="running" operation_key="master_rsc_1_running_0">
         <attributes CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="10000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="45" operation="start" operation_key="ocf_msdummy:0_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee"/>
+        <rsc_op id="46" operation="start" operation_key="ocf_msdummy:0_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee"/>
       </trigger>
       <trigger>
-        <rsc_op id="47" operation="start" operation_key="ocf_msdummy:1_start_0" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86"/>
+        <rsc_op id="48" operation="start" operation_key="ocf_msdummy:1_start_0" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86"/>
       </trigger>
       <trigger>
-        <rsc_op id="50" operation="start" operation_key="ocf_msdummy:2_start_0" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088"/>
+        <rsc_op id="51" operation="start" operation_key="ocf_msdummy:2_start_0" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088"/>
       </trigger>
       <trigger>
-        <rsc_op id="52" operation="start" operation_key="ocf_msdummy:3_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee"/>
+        <rsc_op id="53" operation="start" operation_key="ocf_msdummy:3_start_0" on_node="sles-4" on_node_uuid="ea7d39f4-3b94-4cfa-ba7a-952956daabee"/>
       </trigger>
       <trigger>
-        <rsc_op id="54" operation="start" operation_key="ocf_msdummy:4_start_0" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86"/>
+        <rsc_op id="55" operation="start" operation_key="ocf_msdummy:4_start_0" on_node="sles-1" on_node_uuid="1186dc9a-324d-425a-966e-d757e693dc86"/>
       </trigger>
       <trigger>
-        <rsc_op id="57" operation="start" operation_key="ocf_msdummy:5_start_0" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088"/>
+        <rsc_op id="58" operation="start" operation_key="ocf_msdummy:5_start_0" on_node="sles-2" on_node_uuid="02fb99a8-e30e-482f-b3ad-0fb3ce27d088"/>
       </trigger>
       <trigger>
-        <pseudo_event id="59" operation="start" operation_key="master_rsc_1_start_0"/>
+        <pseudo_event id="60" operation="start" operation_key="master_rsc_1_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="38">
     <action_set>
-      <pseudo_event id="59" operation="start" operation_key="master_rsc_1_start_0">
+      <pseudo_event id="60" operation="start" operation_key="master_rsc_1_start_0">
         <attributes CRM_meta_clone_max="8" CRM_meta_clone_node_max="2" CRM_meta_globally_unique="true" CRM_meta_master_max="4" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="10000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="62" operation="stopped" operation_key="master_rsc_1_stopped_0"/>
+        <pseudo_event id="63" operation="stopped" operation_key="master_rsc_1_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="39">
     <action_set>
-      <crm_event id="68" operation="stonith" operation_key="stonith-sles-3-reboot" on_node="sles-3" on_node_uuid="2298606a-6a8c-499a-9d25-76242f7006ec">
-        <attributes CRM_meta_on_node="sles-3" CRM_meta_on_node_uuid="2298606a-6a8c-499a-9d25-76242f7006ec" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="2298606a-6a8c-499a-9d25-76242f7006ec"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="40">
-    <action_set>
-      <pseudo_event id="67" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="68" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="68" operation="stonith" operation_key="stonith-sles-3-reboot" on_node="sles-3" on_node_uuid="2298606a-6a8c-499a-9d25-76242f7006ec"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-sles-3-reboot" on_node="sles-3" on_node_uuid="2298606a-6a8c-499a-9d25-76242f7006ec"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="41">
+  <synapse id="40">
     <action_set>
-      <pseudo_event id="5" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="6" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="20" operation="stop" operation_key="migrator_stop_0"/>
+        <pseudo_event id="21" operation="stop" operation_key="migrator_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="28" operation="stop" operation_key="rsc_sles-3_stop_0"/>
+        <pseudo_event id="29" operation="stop" operation_key="rsc_sles-3_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="38" operation="stop" operation_key="child_DoFencing:2_stop_0"/>
+        <pseudo_event id="39" operation="stop" operation_key="child_DoFencing:2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="49" operation="stop" operation_key="ocf_msdummy:2_stop_0"/>
+        <pseudo_event id="50" operation="stop" operation_key="ocf_msdummy:2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="56" operation="stop" operation_key="ocf_msdummy:5_stop_0"/>
+        <pseudo_event id="57" operation="stop" operation_key="ocf_msdummy:5_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="67" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="68" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="41">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-sles-3-reboot" on_node="sles-3" on_node_uuid="2298606a-6a8c-499a-9d25-76242f7006ec">
+        <attributes CRM_meta_on_node="sles-3" CRM_meta_on_node_uuid="2298606a-6a8c-499a-9d25-76242f7006ec" CRM_meta_probe_complete="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="2298606a-6a8c-499a-9d25-76242f7006ec"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/stonith-1.scores b/pengine/test10/stonith-1.scores
index 196b9f5..7422355 100644
--- a/pengine/test10/stonith-1.scores
+++ b/pengine/test10/stonith-1.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   sles-3: node is unclean
 Allocation scores:
 clone_color: DoFencing allocation score on sles-1: 0
 clone_color: DoFencing allocation score on sles-2: 0
diff --git a/pengine/test10/stonith-1.summary b/pengine/test10/stonith-1.summary
index 111bcbe..03c8a39 100644
--- a/pengine/test10/stonith-1.summary
+++ b/pengine/test10/stonith-1.summary
@@ -27,9 +27,8 @@ Online: [ sles-1 sles-2 sles-4 ]
      ocf_msdummy:6	(ocf::heartbeat:Stateful):	Stopped 
      ocf_msdummy:7	(ocf::heartbeat:Stateful):	Stopped 
 
-  notice: Fencing   sles-3: node is unclean
 Transition Summary:
- * Fence (reboot) sles-3
+ * Fence (reboot) sles-3 'peer is no longer part of the cluster'
  * Start   r192.168.100.183	(sles-1)
  * Move    migrator	(Started sles-3 -> sles-4)
  * Move    rsc_sles-3	(Started sles-3 -> sles-4)
@@ -49,16 +48,14 @@ Executing cluster transition:
  * Resource action: rsc_sles-4      monitor=5000 on sles-4
  * Pseudo action:   DoFencing_stop_0
  * Fencing sles-3 (reboot)
- * Pseudo action:   stonith_complete
- * Resource action: r192.168.100.183 start on sles-1
  * Pseudo action:   migrator_stop_0
  * Pseudo action:   rsc_sles-3_stop_0
  * Pseudo action:   child_DoFencing:2_stop_0
  * Pseudo action:   DoFencing_stopped_0
  * Pseudo action:   DoFencing_start_0
  * Pseudo action:   master_rsc_1_stop_0
- * Pseudo action:   group-1_running_0
- * Resource action: r192.168.100.183 monitor=5000 on sles-1
+ * Pseudo action:   stonith_complete
+ * Resource action: r192.168.100.183 start on sles-1
  * Resource action: migrator        start on sles-4
  * Resource action: rsc_sles-3      start on sles-4
  * Resource action: child_DoFencing:2 start on sles-4
@@ -68,6 +65,8 @@ Executing cluster transition:
  * Pseudo action:   master_rsc_1_stopped_0
  * Pseudo action:   master_rsc_1_start_0
  * Pseudo action:   all_stopped
+ * Pseudo action:   group-1_running_0
+ * Resource action: r192.168.100.183 monitor=5000 on sles-1
  * Resource action: migrator        monitor=10000 on sles-4
  * Resource action: rsc_sles-3      monitor=5000 on sles-4
  * Resource action: child_DoFencing:2 monitor=60000 on sles-4
diff --git a/pengine/test10/stonith-2.exp b/pengine/test10/stonith-2.exp
index 1828377..e433e49 100644
--- a/pengine/test10/stonith-2.exp
+++ b/pengine/test10/stonith-2.exp
@@ -1,64 +1,63 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="1"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="50" operation="monitor" operation_key="rsc_sles-5_monitor_5000" on_node="sles-6" on_node_uuid="e7840e57-67e1-44dc-9804-edd22d282394">
+      <rsc_op id="51" operation="monitor" operation_key="rsc_sles-5_monitor_5000" on_node="sles-6" on_node_uuid="e7840e57-67e1-44dc-9804-edd22d282394">
         <primitive id="rsc_sles-5" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_interval="5000" CRM_meta_name="monitor" CRM_meta_on_node="sles-6" CRM_meta_on_node_uuid="e7840e57-67e1-44dc-9804-edd22d282394" CRM_meta_timeout="20000"  ip="192.168.100.188"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="49" operation="start" operation_key="rsc_sles-5_start_0" on_node="sles-6" on_node_uuid="e7840e57-67e1-44dc-9804-edd22d282394"/>
+        <rsc_op id="50" operation="start" operation_key="rsc_sles-5_start_0" on_node="sles-6" on_node_uuid="e7840e57-67e1-44dc-9804-edd22d282394"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="49" operation="start" operation_key="rsc_sles-5_start_0" on_node="sles-6" on_node_uuid="e7840e57-67e1-44dc-9804-edd22d282394">
+      <rsc_op id="50" operation="start" operation_key="rsc_sles-5_start_0" on_node="sles-6" on_node_uuid="e7840e57-67e1-44dc-9804-edd22d282394">
         <primitive id="rsc_sles-5" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="sles-6" CRM_meta_on_node_uuid="e7840e57-67e1-44dc-9804-edd22d282394" CRM_meta_timeout="20000"  ip="192.168.100.188"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="95" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="96" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <crm_event id="96" operation="stonith" operation_key="stonith-sles-5-reboot" on_node="sles-5" on_node_uuid="434915c6-7b40-4d30-95ff-dc0ff3dc005a">
-        <attributes CRM_meta_on_node="sles-5" CRM_meta_on_node_uuid="434915c6-7b40-4d30-95ff-dc0ff3dc005a" CRM_meta_standby="off" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="434915c6-7b40-4d30-95ff-dc0ff3dc005a"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="3">
-    <action_set>
-      <pseudo_event id="95" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="96" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="96" operation="stonith" operation_key="stonith-sles-5-reboot" on_node="sles-5" on_node_uuid="434915c6-7b40-4d30-95ff-dc0ff3dc005a"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-sles-5-reboot" on_node="sles-5" on_node_uuid="434915c6-7b40-4d30-95ff-dc0ff3dc005a"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="4">
+  <synapse id="3">
     <action_set>
-      <pseudo_event id="26" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="27" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="95" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="96" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="4">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-sles-5-reboot" on_node="sles-5" on_node_uuid="434915c6-7b40-4d30-95ff-dc0ff3dc005a">
+        <attributes CRM_meta_on_node="sles-5" CRM_meta_on_node_uuid="434915c6-7b40-4d30-95ff-dc0ff3dc005a" CRM_meta_standby="off" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="434915c6-7b40-4d30-95ff-dc0ff3dc005a"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/stonith-2.scores b/pengine/test10/stonith-2.scores
index 8c11561..e1dd011 100644
--- a/pengine/test10/stonith-2.scores
+++ b/pengine/test10/stonith-2.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   sles-5: node is unclean
 Allocation scores:
 clone_color: DoFencing allocation score on sles-1: 0
 clone_color: DoFencing allocation score on sles-2: 0
diff --git a/pengine/test10/stonith-2.summary b/pengine/test10/stonith-2.summary
index c8e1d70..2a6c218 100644
--- a/pengine/test10/stonith-2.summary
+++ b/pengine/test10/stonith-2.summary
@@ -32,9 +32,8 @@ Online: [ sles-1 sles-2 sles-3 sles-4 sles-6 ]
      ocf_msdummy:10	(ocf::heartbeat:Stateful):	Slave sles-2 
      ocf_msdummy:11	(ocf::heartbeat:Stateful):	Slave sles-3 
 
-  notice: Fencing   sles-5: node is unclean
 Transition Summary:
- * Fence (reboot) sles-5
+ * Fence (reboot) sles-5 'peer is no longer part of the cluster'
  * Start   rsc_sles-5	(sles-6)
 
 Executing cluster transition:
diff --git a/pengine/test10/stonith-3.scores b/pengine/test10/stonith-3.scores
index eef30fc..a1bd3d9 100644
--- a/pengine/test10/stonith-3.scores
+++ b/pengine/test10/stonith-3.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   rh5node1: node is unclean
 Allocation scores:
 clone_color: clnStonith allocation score on rh5node1: 0
 clone_color: clnStonith allocation score on rh5node2: 0
diff --git a/pengine/test10/stonith-3.summary b/pengine/test10/stonith-3.summary
index 015dd77..cc10cf5 100644
--- a/pengine/test10/stonith-3.summary
+++ b/pengine/test10/stonith-3.summary
@@ -7,9 +7,8 @@ Online: [ rh5node2 ]
  Clone Set: clnStonith [grpStonith]
      Stopped: [ rh5node1 rh5node2 ]
 
-  notice: Fencing   rh5node1: node is unclean
 Transition Summary:
- * Fence (reboot) rh5node1
+ * Fence (reboot) rh5node1 'node is unclean'
  * Start   prmIpPostgreSQLDB	(rh5node2)
  * Start   prmStonith:0	(rh5node2)
 
diff --git a/pengine/test10/stonith-4.exp b/pengine/test10/stonith-4.exp
index 298a636..d3e9e67 100644
--- a/pengine/test10/stonith-4.exp
+++ b/pengine/test10/stonith-4.exp
@@ -1,81 +1,81 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <crm_event id="10" operation="stonith" operation_key="stonith-pcmk-8-reboot" on_node="pcmk-8" on_node_uuid="108">
-        <attributes CRM_meta_on_node="pcmk-8" CRM_meta_on_node_uuid="108" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="108"/>
-        </downed>
-      </crm_event>
+      <pseudo_event id="10" operation="stonith_complete" operation_key="stonith_complete">
+        <attributes />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="9" operation="stonith" operation_key="stonith-pcmk-7-reboot" on_node="pcmk-7" on_node_uuid="107"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-pcmk-8-reboot" on_node="pcmk-8" on_node_uuid="108"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <crm_event id="9" operation="stonith" operation_key="stonith-pcmk-7-reboot" on_node="pcmk-7" on_node_uuid="107">
-        <attributes CRM_meta_on_node="pcmk-7" CRM_meta_on_node_uuid="107" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="107"/>
-        </downed>
-      </crm_event>
+      <pseudo_event id="5" operation="all_stopped" operation_key="all_stopped">
+        <attributes />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="8" operation="stonith" operation_key="stonith-pcmk-5-reboot" on_node="pcmk-5" on_node_uuid="105"/>
+        <pseudo_event id="10" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <crm_event id="8" operation="stonith" operation_key="stonith-pcmk-5-reboot" on_node="pcmk-5" on_node_uuid="105">
-        <attributes CRM_meta_on_node="pcmk-5" CRM_meta_on_node_uuid="105" CRM_meta_stonith_action="reboot" />
+      <crm_event id="4" operation="stonith" operation_key="stonith-pcmk-10-reboot" on_node="pcmk-10" on_node_uuid="110">
+        <attributes CRM_meta_on_node="pcmk-10" CRM_meta_on_node_uuid="110" CRM_meta_stonith_action="reboot" />
         <downed>
-          <node id="105"/>
+          <node id="110"/>
         </downed>
       </crm_event>
     </action_set>
-    <inputs>
-      <trigger>
-        <crm_event id="7" operation="stonith" operation_key="stonith-pcmk-10-reboot" on_node="pcmk-10" on_node_uuid="110"/>
-      </trigger>
-    </inputs>
+    <inputs/>
   </synapse>
   <synapse id="3">
     <action_set>
-      <crm_event id="7" operation="stonith" operation_key="stonith-pcmk-10-reboot" on_node="pcmk-10" on_node_uuid="110">
-        <attributes CRM_meta_on_node="pcmk-10" CRM_meta_on_node_uuid="110" CRM_meta_stonith_action="reboot" />
+      <crm_event id="3" operation="stonith" operation_key="stonith-pcmk-8-reboot" on_node="pcmk-8" on_node_uuid="108">
+        <attributes CRM_meta_on_node="pcmk-8" CRM_meta_on_node_uuid="108" CRM_meta_stonith_action="reboot" />
         <downed>
-          <node id="110"/>
+          <node id="108"/>
         </downed>
       </crm_event>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <crm_event id="2" operation="stonith" operation_key="stonith-pcmk-7-reboot" on_node="pcmk-7" on_node_uuid="107"/>
+      </trigger>
+    </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="6" operation="stonith_complete" operation_key="stonith_complete">
-        <attributes />
-      </pseudo_event>
+      <crm_event id="2" operation="stonith" operation_key="stonith-pcmk-7-reboot" on_node="pcmk-7" on_node_uuid="107">
+        <attributes CRM_meta_on_node="pcmk-7" CRM_meta_on_node_uuid="107" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="107"/>
+        </downed>
+      </crm_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="10" operation="stonith" operation_key="stonith-pcmk-8-reboot" on_node="pcmk-8" on_node_uuid="108"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-pcmk-5-reboot" on_node="pcmk-5" on_node_uuid="105"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <pseudo_event id="1" operation="all_stopped" operation_key="all_stopped">
-        <attributes />
-      </pseudo_event>
+      <crm_event id="1" operation="stonith" operation_key="stonith-pcmk-5-reboot" on_node="pcmk-5" on_node_uuid="105">
+        <attributes CRM_meta_on_node="pcmk-5" CRM_meta_on_node_uuid="105" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="105"/>
+        </downed>
+      </crm_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="6" operation="stonith_complete" operation_key="stonith_complete"/>
+        <crm_event id="4" operation="stonith" operation_key="stonith-pcmk-10-reboot" on_node="pcmk-10" on_node_uuid="110"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/stonith-4.scores b/pengine/test10/stonith-4.scores
index 0bf1cf5..ac6fe0b 100644
--- a/pengine/test10/stonith-4.scores
+++ b/pengine/test10/stonith-4.scores
@@ -1,7 +1,3 @@
-  notice: Fencing   pcmk-10: node is unclean
-  notice: Fencing   pcmk-5: node is unclean
-  notice: Fencing   pcmk-7: node is unclean
-  notice: Fencing   pcmk-8: node is unclean
 Allocation scores:
 native_color: Fencing allocation score on pcmk-10: 0
 native_color: Fencing allocation score on pcmk-11: 0
diff --git a/pengine/test10/stonith-4.summary b/pengine/test10/stonith-4.summary
index 0c9b5bd..76b1f44 100644
--- a/pengine/test10/stonith-4.summary
+++ b/pengine/test10/stonith-4.summary
@@ -13,15 +13,11 @@ OFFLINE: [ pcmk-4 pcmk-6 ]
 
  Fencing	(stonith:fence_xvm):	Stopped 
 
-  notice: Fencing   pcmk-10: node is unclean
-  notice: Fencing   pcmk-5: node is unclean
-  notice: Fencing   pcmk-7: node is unclean
-  notice: Fencing   pcmk-8: node is unclean
 Transition Summary:
- * Fence (reboot) pcmk-8
- * Fence (reboot) pcmk-7
- * Fence (reboot) pcmk-5
- * Fence (reboot) pcmk-10
+ * Fence (reboot) pcmk-10 'peer process is no longer available'
+ * Fence (reboot) pcmk-8 'peer has not been seen by the cluster'
+ * Fence (reboot) pcmk-7 'peer failed the pacemaker membership criteria'
+ * Fence (reboot) pcmk-5 'peer has not been seen by the cluster'
  * Start   Fencing	(pcmk-1 - blocked)
 
 Executing cluster transition:
diff --git a/pengine/test10/stop-failure-no-quorum.exp b/pengine/test10/stop-failure-no-quorum.exp
index cf284bd..ddd383d 100644
--- a/pengine/test10/stop-failure-no-quorum.exp
+++ b/pengine/test10/stop-failure-no-quorum.exp
@@ -1,82 +1,82 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <pseudo_event id="8" operation="stop" operation_key="clvm_stop_0" internal_operation_key="clvm:0_stop_0">
+      <pseudo_event id="11" operation="stop" operation_key="clvm_stop_0" internal_operation_key="clvm:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="14" operation="stop" operation_key="clvm-clone_stop_0"/>
+        <crm_event id="2" operation="stonith" operation_key="stonith-pcmk-2-reboot" on_node="pcmk-2" on_node_uuid="102"/>
       </trigger>
       <trigger>
-        <crm_event id="20" operation="stonith" operation_key="stonith-pcmk-2-reboot" on_node="pcmk-2" on_node_uuid="102"/>
+        <pseudo_event id="17" operation="stop" operation_key="clvm-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1" priority="1000000">
     <action_set>
-      <pseudo_event id="15" operation="stopped" operation_key="clvm-clone_stopped_0">
+      <pseudo_event id="18" operation="stopped" operation_key="clvm-clone_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="8" operation="stop" operation_key="clvm_stop_0" internal_operation_key="clvm:0_stop_0"/>
+        <pseudo_event id="11" operation="stop" operation_key="clvm_stop_0" internal_operation_key="clvm:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="14" operation="stop" operation_key="clvm-clone_stop_0"/>
+        <pseudo_event id="17" operation="stop" operation_key="clvm-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="14" operation="stop" operation_key="clvm-clone_stop_0">
+      <pseudo_event id="17" operation="stop" operation_key="clvm-clone_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="20" operation="stonith" operation_key="stonith-pcmk-2-reboot" on_node="pcmk-2" on_node_uuid="102"/>
+        <crm_event id="2" operation="stonith" operation_key="stonith-pcmk-2-reboot" on_node="pcmk-2" on_node_uuid="102"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <crm_event id="20" operation="stonith" operation_key="stonith-pcmk-2-reboot" on_node="pcmk-2" on_node_uuid="102">
-        <attributes CRM_meta_fail_count_clvm="INFINITY" CRM_meta_last_failure_clvm="1371014555" CRM_meta_on_node="pcmk-2" CRM_meta_on_node_uuid="102" CRM_meta_probe_complete="true" CRM_meta_shutdown="1371014551" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="102"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="4">
-    <action_set>
-      <pseudo_event id="19" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="22" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="20" operation="stonith" operation_key="stonith-pcmk-2-reboot" on_node="pcmk-2" on_node_uuid="102"/>
+        <crm_event id="2" operation="stonith" operation_key="stonith-pcmk-2-reboot" on_node="pcmk-2" on_node_uuid="102"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="5">
+  <synapse id="4">
     <action_set>
-      <pseudo_event id="1" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="4" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="8" operation="stop" operation_key="clvm_stop_0" internal_operation_key="clvm:0_stop_0"/>
+        <pseudo_event id="11" operation="stop" operation_key="clvm_stop_0" internal_operation_key="clvm:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="19" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="22" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="5">
+    <action_set>
+      <crm_event id="2" operation="stonith" operation_key="stonith-pcmk-2-reboot" on_node="pcmk-2" on_node_uuid="102">
+        <attributes CRM_meta_fail_count_clvm="INFINITY" CRM_meta_last_failure_clvm="1371014555" CRM_meta_on_node="pcmk-2" CRM_meta_on_node_uuid="102" CRM_meta_probe_complete="true" CRM_meta_shutdown="1371014551" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="102"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
diff --git a/pengine/test10/stop-failure-no-quorum.scores b/pengine/test10/stop-failure-no-quorum.scores
index c1893b6..df30423 100644
--- a/pengine/test10/stop-failure-no-quorum.scores
+++ b/pengine/test10/stop-failure-no-quorum.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   pcmk-2: node is unclean
 Allocation scores:
 clone_color: clvm-clone allocation score on pcmk-1: 0
 clone_color: clvm-clone allocation score on pcmk-2: -INFINITY
diff --git a/pengine/test10/stop-failure-no-quorum.summary b/pengine/test10/stop-failure-no-quorum.summary
index d91edc1..4e337ab 100644
--- a/pengine/test10/stop-failure-no-quorum.summary
+++ b/pengine/test10/stop-failure-no-quorum.summary
@@ -14,9 +14,8 @@ Online: [ pcmk-1 ]
  ClusterIP	(ocf::heartbeat:IPaddr2):	Stopped 
  Fencing	(stonith:fence_xvm):	Stopped 
 
-  notice: Fencing   pcmk-2: node is unclean
 Transition Summary:
- * Fence (reboot) pcmk-2
+ * Fence (reboot) pcmk-2 'clvm:0 failed there'
  * Start   dlm:0	(pcmk-1 - blocked)
  * Stop    clvm:0	(pcmk-2)
  * Start   clvm:2	(pcmk-1 - blocked)
@@ -25,8 +24,8 @@ Transition Summary:
 
 Executing cluster transition:
  * Fencing pcmk-2 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   clvm-clone_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   clvm_stop_0
  * Pseudo action:   clvm-clone_stopped_0
  * Pseudo action:   all_stopped
diff --git a/pengine/test10/stop-failure-with-fencing.exp b/pengine/test10/stop-failure-with-fencing.exp
index 3d8b34a..e7e7ca6 100644
--- a/pengine/test10/stop-failure-with-fencing.exp
+++ b/pengine/test10/stop-failure-with-fencing.exp
@@ -1,49 +1,49 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <pseudo_event id="9" operation="stop" operation_key="clvm_stop_0" internal_operation_key="clvm:0_stop_0">
+      <pseudo_event id="12" operation="stop" operation_key="clvm_stop_0" internal_operation_key="clvm:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="14" operation="stop" operation_key="clvm-clone_stop_0"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-pcmk-2-reboot" on_node="pcmk-2" on_node_uuid="102"/>
       </trigger>
       <trigger>
-        <crm_event id="20" operation="stonith" operation_key="stonith-pcmk-2-reboot" on_node="pcmk-2" on_node_uuid="102"/>
+        <pseudo_event id="17" operation="stop" operation_key="clvm-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1" priority="1000000">
     <action_set>
-      <pseudo_event id="15" operation="stopped" operation_key="clvm-clone_stopped_0">
+      <pseudo_event id="18" operation="stopped" operation_key="clvm-clone_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="9" operation="stop" operation_key="clvm_stop_0" internal_operation_key="clvm:0_stop_0"/>
+        <pseudo_event id="12" operation="stop" operation_key="clvm_stop_0" internal_operation_key="clvm:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="14" operation="stop" operation_key="clvm-clone_stop_0"/>
+        <pseudo_event id="17" operation="stop" operation_key="clvm-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="14" operation="stop" operation_key="clvm-clone_stop_0">
+      <pseudo_event id="17" operation="stop" operation_key="clvm-clone_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="20" operation="stonith" operation_key="stonith-pcmk-2-reboot" on_node="pcmk-2" on_node_uuid="102"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-pcmk-2-reboot" on_node="pcmk-2" on_node_uuid="102"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="2" operation="monitor" operation_key="Fencing_monitor_0" on_node="pcmk-1" on_node_uuid="101">
+      <rsc_op id="5" operation="monitor" operation_key="Fencing_monitor_0" on_node="pcmk-1" on_node_uuid="101">
         <primitive id="Fencing" class="stonith" type="fence_xvm"/>
         <attributes CRM_meta_on_node="pcmk-1" CRM_meta_on_node_uuid="101" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
@@ -52,40 +52,40 @@
   </synapse>
   <synapse id="4">
     <action_set>
-      <crm_event id="20" operation="stonith" operation_key="stonith-pcmk-2-reboot" on_node="pcmk-2" on_node_uuid="102">
-        <attributes CRM_meta_fail_count_clvm="INFINITY" CRM_meta_last_failure_clvm="1371014555" CRM_meta_on_node="pcmk-2" CRM_meta_on_node_uuid="102" CRM_meta_probe_complete="true" CRM_meta_shutdown="1371014551" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="102"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="5">
-    <action_set>
-      <pseudo_event id="19" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="22" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="20" operation="stonith" operation_key="stonith-pcmk-2-reboot" on_node="pcmk-2" on_node_uuid="102"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-pcmk-2-reboot" on_node="pcmk-2" on_node_uuid="102"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="6">
+  <synapse id="5">
     <action_set>
-      <pseudo_event id="1" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="4" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="9" operation="stop" operation_key="clvm_stop_0" internal_operation_key="clvm:0_stop_0"/>
+        <pseudo_event id="12" operation="stop" operation_key="clvm_stop_0" internal_operation_key="clvm:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="19" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="22" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="6">
+    <action_set>
+      <crm_event id="3" operation="stonith" operation_key="stonith-pcmk-2-reboot" on_node="pcmk-2" on_node_uuid="102">
+        <attributes CRM_meta_fail_count_clvm="INFINITY" CRM_meta_last_failure_clvm="1371014555" CRM_meta_on_node="pcmk-2" CRM_meta_on_node_uuid="102" CRM_meta_probe_complete="true" CRM_meta_shutdown="1371014551" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="102"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
diff --git a/pengine/test10/stop-failure-with-fencing.scores b/pengine/test10/stop-failure-with-fencing.scores
index 0dc0813..cf62806 100644
--- a/pengine/test10/stop-failure-with-fencing.scores
+++ b/pengine/test10/stop-failure-with-fencing.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   pcmk-2: node is unclean
 Allocation scores:
 clone_color: clvm-clone allocation score on pcmk-1: 0
 clone_color: clvm-clone allocation score on pcmk-2: -INFINITY
diff --git a/pengine/test10/stop-failure-with-fencing.summary b/pengine/test10/stop-failure-with-fencing.summary
index 79e6105..cdb39b0 100644
--- a/pengine/test10/stop-failure-with-fencing.summary
+++ b/pengine/test10/stop-failure-with-fencing.summary
@@ -13,9 +13,8 @@ Online: [ pcmk-1 ]
  ClusterIP	(ocf::heartbeat:IPaddr2):	Stopped 
  Fencing	(stonith:fence_xvm):	Stopped 
 
-  notice: Fencing   pcmk-2: node is unclean
 Transition Summary:
- * Fence (reboot) pcmk-2
+ * Fence (reboot) pcmk-2 'clvm:0 failed there'
  * Start   dlm:0	(pcmk-1 - blocked)
  * Stop    clvm:0	(pcmk-2)
  * Start   clvm:1	(pcmk-1 - blocked)
@@ -25,8 +24,8 @@ Transition Summary:
 Executing cluster transition:
  * Resource action: Fencing         monitor on pcmk-1
  * Fencing pcmk-2 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   clvm-clone_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   clvm_stop_0
  * Pseudo action:   clvm-clone_stopped_0
  * Pseudo action:   all_stopped
diff --git a/pengine/test10/systemhealth1.scores b/pengine/test10/systemhealth1.scores
index c55f6e2..8a59654 100644
--- a/pengine/test10/systemhealth1.scores
+++ b/pengine/test10/systemhealth1.scores
@@ -1,5 +1,3 @@
-  notice: Fencing   hs21c: node is unclean
-  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealth1.summary b/pengine/test10/systemhealth1.summary
index 335b94a..351d508 100644
--- a/pengine/test10/systemhealth1.summary
+++ b/pengine/test10/systemhealth1.summary
@@ -7,11 +7,9 @@ Node hs21d (737318c6-0f92-4592-9754-45967d45aff7): UNCLEAN (offline)
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
-  notice: Fencing   hs21c: node is unclean
-  notice: Fencing   hs21d: node is unclean
 Transition Summary:
- * Fence (reboot) hs21d
- * Fence (reboot) hs21c
+ * Fence (reboot) hs21d 'node is unclean'
+ * Fence (reboot) hs21c 'node is unclean'
 
 Executing cluster transition:
  * Fencing hs21d (reboot)
diff --git a/pengine/test10/systemhealth2.scores b/pengine/test10/systemhealth2.scores
index b20bd49..8a59654 100644
--- a/pengine/test10/systemhealth2.scores
+++ b/pengine/test10/systemhealth2.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealth2.summary b/pengine/test10/systemhealth2.summary
index b04d5a1..db68783 100644
--- a/pengine/test10/systemhealth2.summary
+++ b/pengine/test10/systemhealth2.summary
@@ -7,9 +7,8 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
-  notice: Fencing   hs21d: node is unclean
 Transition Summary:
- * Fence (reboot) hs21d
+ * Fence (reboot) hs21d 'node is unclean'
  * Start   stonith-1	(hs21c)
  * Start   apache_1	(hs21c)
  * Start   nfs_1	(hs21c)
diff --git a/pengine/test10/systemhealth3.scores b/pengine/test10/systemhealth3.scores
index b20bd49..8a59654 100644
--- a/pengine/test10/systemhealth3.scores
+++ b/pengine/test10/systemhealth3.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealth3.summary b/pengine/test10/systemhealth3.summary
index b04d5a1..db68783 100644
--- a/pengine/test10/systemhealth3.summary
+++ b/pengine/test10/systemhealth3.summary
@@ -7,9 +7,8 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
-  notice: Fencing   hs21d: node is unclean
 Transition Summary:
- * Fence (reboot) hs21d
+ * Fence (reboot) hs21d 'node is unclean'
  * Start   stonith-1	(hs21c)
  * Start   apache_1	(hs21c)
  * Start   nfs_1	(hs21c)
diff --git a/pengine/test10/systemhealthm1.scores b/pengine/test10/systemhealthm1.scores
index c55f6e2..8a59654 100644
--- a/pengine/test10/systemhealthm1.scores
+++ b/pengine/test10/systemhealthm1.scores
@@ -1,5 +1,3 @@
-  notice: Fencing   hs21c: node is unclean
-  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealthm1.summary b/pengine/test10/systemhealthm1.summary
index 335b94a..351d508 100644
--- a/pengine/test10/systemhealthm1.summary
+++ b/pengine/test10/systemhealthm1.summary
@@ -7,11 +7,9 @@ Node hs21d (737318c6-0f92-4592-9754-45967d45aff7): UNCLEAN (offline)
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
-  notice: Fencing   hs21c: node is unclean
-  notice: Fencing   hs21d: node is unclean
 Transition Summary:
- * Fence (reboot) hs21d
- * Fence (reboot) hs21c
+ * Fence (reboot) hs21d 'node is unclean'
+ * Fence (reboot) hs21c 'node is unclean'
 
 Executing cluster transition:
  * Fencing hs21d (reboot)
diff --git a/pengine/test10/systemhealthm2.scores b/pengine/test10/systemhealthm2.scores
index b20bd49..8a59654 100644
--- a/pengine/test10/systemhealthm2.scores
+++ b/pengine/test10/systemhealthm2.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealthm2.summary b/pengine/test10/systemhealthm2.summary
index b04d5a1..db68783 100644
--- a/pengine/test10/systemhealthm2.summary
+++ b/pengine/test10/systemhealthm2.summary
@@ -7,9 +7,8 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
-  notice: Fencing   hs21d: node is unclean
 Transition Summary:
- * Fence (reboot) hs21d
+ * Fence (reboot) hs21d 'node is unclean'
  * Start   stonith-1	(hs21c)
  * Start   apache_1	(hs21c)
  * Start   nfs_1	(hs21c)
diff --git a/pengine/test10/systemhealthm3.scores b/pengine/test10/systemhealthm3.scores
index 00b8d64..7e8804e 100644
--- a/pengine/test10/systemhealthm3.scores
+++ b/pengine/test10/systemhealthm3.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: -INFINITY
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealthm3.summary b/pengine/test10/systemhealthm3.summary
index 55d5cf7..836d8f5 100644
--- a/pengine/test10/systemhealthm3.summary
+++ b/pengine/test10/systemhealthm3.summary
@@ -7,9 +7,8 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
-  notice: Fencing   hs21d: node is unclean
 Transition Summary:
- * Fence (reboot) hs21d
+ * Fence (reboot) hs21d 'node is unclean'
 
 Executing cluster transition:
  * Resource action: stonith-1       monitor on hs21c
diff --git a/pengine/test10/systemhealthn1.scores b/pengine/test10/systemhealthn1.scores
index c55f6e2..8a59654 100644
--- a/pengine/test10/systemhealthn1.scores
+++ b/pengine/test10/systemhealthn1.scores
@@ -1,5 +1,3 @@
-  notice: Fencing   hs21c: node is unclean
-  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealthn1.summary b/pengine/test10/systemhealthn1.summary
index 335b94a..351d508 100644
--- a/pengine/test10/systemhealthn1.summary
+++ b/pengine/test10/systemhealthn1.summary
@@ -7,11 +7,9 @@ Node hs21d (737318c6-0f92-4592-9754-45967d45aff7): UNCLEAN (offline)
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
-  notice: Fencing   hs21c: node is unclean
-  notice: Fencing   hs21d: node is unclean
 Transition Summary:
- * Fence (reboot) hs21d
- * Fence (reboot) hs21c
+ * Fence (reboot) hs21d 'node is unclean'
+ * Fence (reboot) hs21c 'node is unclean'
 
 Executing cluster transition:
  * Fencing hs21d (reboot)
diff --git a/pengine/test10/systemhealthn2.scores b/pengine/test10/systemhealthn2.scores
index b20bd49..8a59654 100644
--- a/pengine/test10/systemhealthn2.scores
+++ b/pengine/test10/systemhealthn2.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealthn2.summary b/pengine/test10/systemhealthn2.summary
index b04d5a1..db68783 100644
--- a/pengine/test10/systemhealthn2.summary
+++ b/pengine/test10/systemhealthn2.summary
@@ -7,9 +7,8 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
-  notice: Fencing   hs21d: node is unclean
 Transition Summary:
- * Fence (reboot) hs21d
+ * Fence (reboot) hs21d 'node is unclean'
  * Start   stonith-1	(hs21c)
  * Start   apache_1	(hs21c)
  * Start   nfs_1	(hs21c)
diff --git a/pengine/test10/systemhealthn3.scores b/pengine/test10/systemhealthn3.scores
index b20bd49..8a59654 100644
--- a/pengine/test10/systemhealthn3.scores
+++ b/pengine/test10/systemhealthn3.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealthn3.summary b/pengine/test10/systemhealthn3.summary
index b04d5a1..db68783 100644
--- a/pengine/test10/systemhealthn3.summary
+++ b/pengine/test10/systemhealthn3.summary
@@ -7,9 +7,8 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
-  notice: Fencing   hs21d: node is unclean
 Transition Summary:
- * Fence (reboot) hs21d
+ * Fence (reboot) hs21d 'node is unclean'
  * Start   stonith-1	(hs21c)
  * Start   apache_1	(hs21c)
  * Start   nfs_1	(hs21c)
diff --git a/pengine/test10/systemhealtho1.scores b/pengine/test10/systemhealtho1.scores
index c55f6e2..8a59654 100644
--- a/pengine/test10/systemhealtho1.scores
+++ b/pengine/test10/systemhealtho1.scores
@@ -1,5 +1,3 @@
-  notice: Fencing   hs21c: node is unclean
-  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealtho1.summary b/pengine/test10/systemhealtho1.summary
index 335b94a..351d508 100644
--- a/pengine/test10/systemhealtho1.summary
+++ b/pengine/test10/systemhealtho1.summary
@@ -7,11 +7,9 @@ Node hs21d (737318c6-0f92-4592-9754-45967d45aff7): UNCLEAN (offline)
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
-  notice: Fencing   hs21c: node is unclean
-  notice: Fencing   hs21d: node is unclean
 Transition Summary:
- * Fence (reboot) hs21d
- * Fence (reboot) hs21c
+ * Fence (reboot) hs21d 'node is unclean'
+ * Fence (reboot) hs21c 'node is unclean'
 
 Executing cluster transition:
  * Fencing hs21d (reboot)
diff --git a/pengine/test10/systemhealtho2.scores b/pengine/test10/systemhealtho2.scores
index 00b8d64..7e8804e 100644
--- a/pengine/test10/systemhealtho2.scores
+++ b/pengine/test10/systemhealtho2.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: -INFINITY
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealtho2.summary b/pengine/test10/systemhealtho2.summary
index 55d5cf7..836d8f5 100644
--- a/pengine/test10/systemhealtho2.summary
+++ b/pengine/test10/systemhealtho2.summary
@@ -7,9 +7,8 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
-  notice: Fencing   hs21d: node is unclean
 Transition Summary:
- * Fence (reboot) hs21d
+ * Fence (reboot) hs21d 'node is unclean'
 
 Executing cluster transition:
  * Resource action: stonith-1       monitor on hs21c
diff --git a/pengine/test10/systemhealtho3.scores b/pengine/test10/systemhealtho3.scores
index 00b8d64..7e8804e 100644
--- a/pengine/test10/systemhealtho3.scores
+++ b/pengine/test10/systemhealtho3.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: -INFINITY
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealtho3.summary b/pengine/test10/systemhealtho3.summary
index 55d5cf7..836d8f5 100644
--- a/pengine/test10/systemhealtho3.summary
+++ b/pengine/test10/systemhealtho3.summary
@@ -7,9 +7,8 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
-  notice: Fencing   hs21d: node is unclean
 Transition Summary:
- * Fence (reboot) hs21d
+ * Fence (reboot) hs21d 'node is unclean'
 
 Executing cluster transition:
  * Resource action: stonith-1       monitor on hs21c
diff --git a/pengine/test10/systemhealthp1.scores b/pengine/test10/systemhealthp1.scores
index c55f6e2..8a59654 100644
--- a/pengine/test10/systemhealthp1.scores
+++ b/pengine/test10/systemhealthp1.scores
@@ -1,5 +1,3 @@
-  notice: Fencing   hs21c: node is unclean
-  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 100
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealthp1.summary b/pengine/test10/systemhealthp1.summary
index 335b94a..351d508 100644
--- a/pengine/test10/systemhealthp1.summary
+++ b/pengine/test10/systemhealthp1.summary
@@ -7,11 +7,9 @@ Node hs21d (737318c6-0f92-4592-9754-45967d45aff7): UNCLEAN (offline)
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
-  notice: Fencing   hs21c: node is unclean
-  notice: Fencing   hs21d: node is unclean
 Transition Summary:
- * Fence (reboot) hs21d
- * Fence (reboot) hs21c
+ * Fence (reboot) hs21d 'node is unclean'
+ * Fence (reboot) hs21c 'node is unclean'
 
 Executing cluster transition:
  * Fencing hs21d (reboot)
diff --git a/pengine/test10/systemhealthp2.scores b/pengine/test10/systemhealthp2.scores
index 7ca75bf..20a08f2 100644
--- a/pengine/test10/systemhealthp2.scores
+++ b/pengine/test10/systemhealthp2.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: 0
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealthp2.summary b/pengine/test10/systemhealthp2.summary
index 6c44a74..36d9675 100644
--- a/pengine/test10/systemhealthp2.summary
+++ b/pengine/test10/systemhealthp2.summary
@@ -7,9 +7,8 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
-  notice: Fencing   hs21d: node is unclean
 Transition Summary:
- * Fence (reboot) hs21d
+ * Fence (reboot) hs21d 'node is unclean'
  * Start   apache_1	(hs21c)
  * Start   nfs_1	(hs21c)
 
diff --git a/pengine/test10/systemhealthp3.scores b/pengine/test10/systemhealthp3.scores
index 00b8d64..7e8804e 100644
--- a/pengine/test10/systemhealthp3.scores
+++ b/pengine/test10/systemhealthp3.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   hs21d: node is unclean
 Allocation scores:
 native_color: apache_1 allocation score on hs21c: -INFINITY
 native_color: apache_1 allocation score on hs21d: 0
diff --git a/pengine/test10/systemhealthp3.summary b/pengine/test10/systemhealthp3.summary
index 55d5cf7..836d8f5 100644
--- a/pengine/test10/systemhealthp3.summary
+++ b/pengine/test10/systemhealthp3.summary
@@ -7,9 +7,8 @@ Online: [ hs21c ]
  apache_1	(ocf::heartbeat:apache):	Stopped 
  nfs_1	(ocf::heartbeat:Filesystem):	Stopped 
 
-  notice: Fencing   hs21d: node is unclean
 Transition Summary:
- * Fence (reboot) hs21d
+ * Fence (reboot) hs21d 'node is unclean'
 
 Executing cluster transition:
  * Resource action: stonith-1       monitor on hs21c
diff --git a/pengine/test10/ticket-clone-21.exp b/pengine/test10/ticket-clone-21.exp
index 23266d4..bc25bf2 100644
--- a/pengine/test10/ticket-clone-21.exp
+++ b/pengine/test10/ticket-clone-21.exp
@@ -1,137 +1,136 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <pseudo_event id="4" operation="stop" operation_key="rsc_stonith_stop_0">
+      <pseudo_event id="6" operation="stop" operation_key="rsc_stonith_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="12" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <pseudo_event id="5" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0">
+      <pseudo_event id="7" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="9" operation="stop" operation_key="clone1_stop_0"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
       </trigger>
       <trigger>
-        <crm_event id="12" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
+        <pseudo_event id="11" operation="stop" operation_key="clone1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="6" operation="stop" operation_key="rsc1:0_stop_0" internal_operation_key="rsc1:1_stop_0">
+      <pseudo_event id="8" operation="stop" operation_key="rsc1:0_stop_0" internal_operation_key="rsc1:1_stop_0">
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="9" operation="stop" operation_key="clone1_stop_0"/>
+        <crm_event id="4" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
       <trigger>
-        <crm_event id="13" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <pseudo_event id="11" operation="stop" operation_key="clone1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3" priority="1000000">
     <action_set>
-      <pseudo_event id="10" operation="stopped" operation_key="clone1_stopped_0">
+      <pseudo_event id="12" operation="stopped" operation_key="clone1_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="5" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc1:0_stop_0" internal_operation_key="rsc1:1_stop_0"/>
+        <pseudo_event id="8" operation="stop" operation_key="rsc1:0_stop_0" internal_operation_key="rsc1:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="9" operation="stop" operation_key="clone1_stop_0"/>
+        <pseudo_event id="11" operation="stop" operation_key="clone1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="9" operation="stop" operation_key="clone1_stop_0">
+      <pseudo_event id="11" operation="stop" operation_key="clone1_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="12" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
       </trigger>
       <trigger>
-        <crm_event id="13" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <crm_event id="4" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <crm_event id="13" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2">
-        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="node2" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="node2"/>
-        </downed>
-      </crm_event>
+      <pseudo_event id="13" operation="stonith_complete" operation_key="stonith_complete">
+        <attributes />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="12" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
+        <crm_event id="4" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <crm_event id="12" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1">
-        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="node1" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="node1"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="7">
-    <action_set>
-      <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="5" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="13" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <pseudo_event id="6" operation="stop" operation_key="rsc_stonith_stop_0"/>
       </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="8">
-    <action_set>
-      <pseudo_event id="3" operation="all_stopped" operation_key="all_stopped">
-        <attributes />
-      </pseudo_event>
-    </action_set>
-    <inputs>
       <trigger>
-        <pseudo_event id="4" operation="stop" operation_key="rsc_stonith_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="5" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0"/>
+        <pseudo_event id="8" operation="stop" operation_key="rsc1:0_stop_0" internal_operation_key="rsc1:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc1:0_stop_0" internal_operation_key="rsc1:1_stop_0"/>
+        <pseudo_event id="13" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="7">
+    <action_set>
+      <crm_event id="4" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2">
+        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="node2" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="node2"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs>
       <trigger>
-        <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="8">
+    <action_set>
+      <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1">
+        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="node1" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="node1"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/ticket-clone-21.scores b/pengine/test10/ticket-clone-21.scores
index e0fc0d8..89e2d0f 100644
--- a/pengine/test10/ticket-clone-21.scores
+++ b/pengine/test10/ticket-clone-21.scores
@@ -1,5 +1,3 @@
-  notice: Fencing   node1: node is unclean
-  notice: Fencing   node2: node is unclean
 Allocation scores:
 clone_color: clone1 allocation score on node1: 0
 clone_color: clone1 allocation score on node2: 0
diff --git a/pengine/test10/ticket-clone-21.summary b/pengine/test10/ticket-clone-21.summary
index 13d2887..ce5335f 100644
--- a/pengine/test10/ticket-clone-21.summary
+++ b/pengine/test10/ticket-clone-21.summary
@@ -6,11 +6,9 @@ Online: [ node1 node2 ]
  Clone Set: clone1 [rsc1]
      Started: [ node1 node2 ]
 
-  notice: Fencing   node1: node is unclean
-  notice: Fencing   node2: node is unclean
 Transition Summary:
- * Fence (reboot) node2
- * Fence (reboot) node1
+ * Fence (reboot) node2 'deadman ticket was lost'
+ * Fence (reboot) node1 'deadman ticket was lost'
  * Stop    rsc_stonith	(node1)
  * Stop    rsc1:0	(node1)
  * Stop    rsc1:1	(node2)
@@ -19,8 +17,8 @@ Executing cluster transition:
  * Fencing node1 (reboot)
  * Pseudo action:   rsc_stonith_stop_0
  * Fencing node2 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   clone1_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   rsc1:1_stop_0
  * Pseudo action:   rsc1:0_stop_0
  * Pseudo action:   clone1_stopped_0
diff --git a/pengine/test10/ticket-clone-9.exp b/pengine/test10/ticket-clone-9.exp
index 23266d4..bc25bf2 100644
--- a/pengine/test10/ticket-clone-9.exp
+++ b/pengine/test10/ticket-clone-9.exp
@@ -1,137 +1,136 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <pseudo_event id="4" operation="stop" operation_key="rsc_stonith_stop_0">
+      <pseudo_event id="6" operation="stop" operation_key="rsc_stonith_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="12" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <pseudo_event id="5" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0">
+      <pseudo_event id="7" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="9" operation="stop" operation_key="clone1_stop_0"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
       </trigger>
       <trigger>
-        <crm_event id="12" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
+        <pseudo_event id="11" operation="stop" operation_key="clone1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="6" operation="stop" operation_key="rsc1:0_stop_0" internal_operation_key="rsc1:1_stop_0">
+      <pseudo_event id="8" operation="stop" operation_key="rsc1:0_stop_0" internal_operation_key="rsc1:1_stop_0">
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="9" operation="stop" operation_key="clone1_stop_0"/>
+        <crm_event id="4" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
       <trigger>
-        <crm_event id="13" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <pseudo_event id="11" operation="stop" operation_key="clone1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3" priority="1000000">
     <action_set>
-      <pseudo_event id="10" operation="stopped" operation_key="clone1_stopped_0">
+      <pseudo_event id="12" operation="stopped" operation_key="clone1_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="5" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc1:0_stop_0" internal_operation_key="rsc1:1_stop_0"/>
+        <pseudo_event id="8" operation="stop" operation_key="rsc1:0_stop_0" internal_operation_key="rsc1:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="9" operation="stop" operation_key="clone1_stop_0"/>
+        <pseudo_event id="11" operation="stop" operation_key="clone1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="9" operation="stop" operation_key="clone1_stop_0">
+      <pseudo_event id="11" operation="stop" operation_key="clone1_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="12" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
       </trigger>
       <trigger>
-        <crm_event id="13" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <crm_event id="4" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <crm_event id="13" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2">
-        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="node2" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="node2"/>
-        </downed>
-      </crm_event>
+      <pseudo_event id="13" operation="stonith_complete" operation_key="stonith_complete">
+        <attributes />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="12" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
+        <crm_event id="4" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <crm_event id="12" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1">
-        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="node1" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="node1"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="7">
-    <action_set>
-      <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="5" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="13" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <pseudo_event id="6" operation="stop" operation_key="rsc_stonith_stop_0"/>
       </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="8">
-    <action_set>
-      <pseudo_event id="3" operation="all_stopped" operation_key="all_stopped">
-        <attributes />
-      </pseudo_event>
-    </action_set>
-    <inputs>
       <trigger>
-        <pseudo_event id="4" operation="stop" operation_key="rsc_stonith_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="5" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0"/>
+        <pseudo_event id="8" operation="stop" operation_key="rsc1:0_stop_0" internal_operation_key="rsc1:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc1:0_stop_0" internal_operation_key="rsc1:1_stop_0"/>
+        <pseudo_event id="13" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="7">
+    <action_set>
+      <crm_event id="4" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2">
+        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="node2" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="node2"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs>
       <trigger>
-        <pseudo_event id="11" operation="stonith_complete" operation_key="stonith_complete"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="8">
+    <action_set>
+      <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1">
+        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="node1" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="node1"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/ticket-clone-9.scores b/pengine/test10/ticket-clone-9.scores
index e0fc0d8..89e2d0f 100644
--- a/pengine/test10/ticket-clone-9.scores
+++ b/pengine/test10/ticket-clone-9.scores
@@ -1,5 +1,3 @@
-  notice: Fencing   node1: node is unclean
-  notice: Fencing   node2: node is unclean
 Allocation scores:
 clone_color: clone1 allocation score on node1: 0
 clone_color: clone1 allocation score on node2: 0
diff --git a/pengine/test10/ticket-clone-9.summary b/pengine/test10/ticket-clone-9.summary
index 13d2887..ce5335f 100644
--- a/pengine/test10/ticket-clone-9.summary
+++ b/pengine/test10/ticket-clone-9.summary
@@ -6,11 +6,9 @@ Online: [ node1 node2 ]
  Clone Set: clone1 [rsc1]
      Started: [ node1 node2 ]
 
-  notice: Fencing   node1: node is unclean
-  notice: Fencing   node2: node is unclean
 Transition Summary:
- * Fence (reboot) node2
- * Fence (reboot) node1
+ * Fence (reboot) node2 'deadman ticket was lost'
+ * Fence (reboot) node1 'deadman ticket was lost'
  * Stop    rsc_stonith	(node1)
  * Stop    rsc1:0	(node1)
  * Stop    rsc1:1	(node2)
@@ -19,8 +17,8 @@ Executing cluster transition:
  * Fencing node1 (reboot)
  * Pseudo action:   rsc_stonith_stop_0
  * Fencing node2 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   clone1_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   rsc1:1_stop_0
  * Pseudo action:   rsc1:0_stop_0
  * Pseudo action:   clone1_stopped_0
diff --git a/pengine/test10/ticket-group-21.exp b/pengine/test10/ticket-group-21.exp
index 82b3fdb..4a51d5f 100644
--- a/pengine/test10/ticket-group-21.exp
+++ b/pengine/test10/ticket-group-21.exp
@@ -1,107 +1,106 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <pseudo_event id="11" operation="stopped" operation_key="group1_stopped_0">
+      <pseudo_event id="12" operation="stopped" operation_key="group1_stopped_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="7" operation="stop" operation_key="rsc2_stop_0"/>
+        <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="10" operation="stop" operation_key="group1_stop_0"/>
+        <pseudo_event id="11" operation="stop" operation_key="group1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <pseudo_event id="10" operation="stop" operation_key="group1_stop_0">
+      <pseudo_event id="11" operation="stop" operation_key="group1_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="13" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0">
+      <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="7" operation="stop" operation_key="rsc2_stop_0"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="10" operation="stop" operation_key="group1_stop_0"/>
+        <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="13" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <pseudo_event id="11" operation="stop" operation_key="group1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="7" operation="stop" operation_key="rsc2_stop_0">
+      <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="10" operation="stop" operation_key="group1_stop_0"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
       <trigger>
-        <crm_event id="13" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <pseudo_event id="11" operation="stop" operation_key="group1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <crm_event id="13" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2">
-        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="node2" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="node2"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="5">
-    <action_set>
-      <pseudo_event id="12" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="13" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="13" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="6">
+  <synapse id="5">
     <action_set>
-      <pseudo_event id="3" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="4" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="7" operation="stop" operation_key="rsc2_stop_0"/>
+        <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="12" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="13" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="6">
+    <action_set>
+      <crm_event id="3" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2">
+        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="node2" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="node2"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/ticket-group-21.scores b/pengine/test10/ticket-group-21.scores
index 8f01379..e5b8167 100644
--- a/pengine/test10/ticket-group-21.scores
+++ b/pengine/test10/ticket-group-21.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   node2: node is unclean
 Allocation scores:
 group_color: group1 allocation score on node1: 0
 group_color: group1 allocation score on node2: 0
diff --git a/pengine/test10/ticket-group-21.summary b/pengine/test10/ticket-group-21.summary
index 80fb33f..385e44f 100644
--- a/pengine/test10/ticket-group-21.summary
+++ b/pengine/test10/ticket-group-21.summary
@@ -7,17 +7,16 @@ Online: [ node1 node2 ]
      rsc1	(ocf::pacemaker:Dummy):	Started node2
      rsc2	(ocf::pacemaker:Dummy):	Started node2
 
-  notice: Fencing   node2: node is unclean
 Transition Summary:
- * Fence (reboot) node2
+ * Fence (reboot) node2 'deadman ticket was lost'
  * Stop    rsc1	(node2)
  * Stop    rsc2	(node2)
 
 Executing cluster transition:
  * Fencing node2 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   group1_stop_0
  * Pseudo action:   rsc2_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   rsc1_stop_0
  * Pseudo action:   all_stopped
  * Pseudo action:   group1_stopped_0
diff --git a/pengine/test10/ticket-group-9.exp b/pengine/test10/ticket-group-9.exp
index 82b3fdb..4a51d5f 100644
--- a/pengine/test10/ticket-group-9.exp
+++ b/pengine/test10/ticket-group-9.exp
@@ -1,107 +1,106 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <pseudo_event id="11" operation="stopped" operation_key="group1_stopped_0">
+      <pseudo_event id="12" operation="stopped" operation_key="group1_stopped_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="7" operation="stop" operation_key="rsc2_stop_0"/>
+        <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="10" operation="stop" operation_key="group1_stop_0"/>
+        <pseudo_event id="11" operation="stop" operation_key="group1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <pseudo_event id="10" operation="stop" operation_key="group1_stop_0">
+      <pseudo_event id="11" operation="stop" operation_key="group1_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="13" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0">
+      <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="7" operation="stop" operation_key="rsc2_stop_0"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="10" operation="stop" operation_key="group1_stop_0"/>
+        <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="13" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <pseudo_event id="11" operation="stop" operation_key="group1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="7" operation="stop" operation_key="rsc2_stop_0">
+      <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="10" operation="stop" operation_key="group1_stop_0"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
       <trigger>
-        <crm_event id="13" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <pseudo_event id="11" operation="stop" operation_key="group1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <crm_event id="13" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2">
-        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="node2" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="node2"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="5">
-    <action_set>
-      <pseudo_event id="12" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="13" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="13" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="6">
+  <synapse id="5">
     <action_set>
-      <pseudo_event id="3" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="4" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0"/>
+        <pseudo_event id="7" operation="stop" operation_key="rsc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="7" operation="stop" operation_key="rsc2_stop_0"/>
+        <pseudo_event id="8" operation="stop" operation_key="rsc2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="12" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="13" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="6">
+    <action_set>
+      <crm_event id="3" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2">
+        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="node2" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="node2"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/ticket-group-9.scores b/pengine/test10/ticket-group-9.scores
index 8f01379..e5b8167 100644
--- a/pengine/test10/ticket-group-9.scores
+++ b/pengine/test10/ticket-group-9.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   node2: node is unclean
 Allocation scores:
 group_color: group1 allocation score on node1: 0
 group_color: group1 allocation score on node2: 0
diff --git a/pengine/test10/ticket-group-9.summary b/pengine/test10/ticket-group-9.summary
index 80fb33f..385e44f 100644
--- a/pengine/test10/ticket-group-9.summary
+++ b/pengine/test10/ticket-group-9.summary
@@ -7,17 +7,16 @@ Online: [ node1 node2 ]
      rsc1	(ocf::pacemaker:Dummy):	Started node2
      rsc2	(ocf::pacemaker:Dummy):	Started node2
 
-  notice: Fencing   node2: node is unclean
 Transition Summary:
- * Fence (reboot) node2
+ * Fence (reboot) node2 'deadman ticket was lost'
  * Stop    rsc1	(node2)
  * Stop    rsc2	(node2)
 
 Executing cluster transition:
  * Fencing node2 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   group1_stop_0
  * Pseudo action:   rsc2_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   rsc1_stop_0
  * Pseudo action:   all_stopped
  * Pseudo action:   group1_stopped_0
diff --git a/pengine/test10/ticket-master-21.exp b/pengine/test10/ticket-master-21.exp
index 71e57be..76114c0 100644
--- a/pengine/test10/ticket-master-21.exp
+++ b/pengine/test10/ticket-master-21.exp
@@ -1,20 +1,20 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="5" operation="start" operation_key="rsc_stonith_start_0" on_node="node2" on_node_uuid="node2">
+      <rsc_op id="6" operation="start" operation_key="rsc_stonith_start_0" on_node="node2" on_node_uuid="node2">
         <primitive id="rsc_stonith" class="stonith" type="null"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="4" operation="stop" operation_key="rsc_stonith_stop_0"/>
+        <pseudo_event id="5" operation="stop" operation_key="rsc_stonith_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <pseudo_event id="4" operation="stop" operation_key="rsc_stonith_stop_0">
+      <pseudo_event id="5" operation="stop" operation_key="rsc_stonith_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -22,55 +22,55 @@
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="7" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0">
+      <pseudo_event id="8" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="6" operation="demote" operation_key="rsc1:1_demote_0" internal_operation_key="rsc1:0_demote_0"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="12" operation="stop" operation_key="ms1_stop_0"/>
+        <pseudo_event id="7" operation="demote" operation_key="rsc1:1_demote_0" internal_operation_key="rsc1:0_demote_0"/>
       </trigger>
       <trigger>
-        <crm_event id="19" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
+        <pseudo_event id="13" operation="stop" operation_key="ms1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="6" operation="demote" operation_key="rsc1:1_demote_0" internal_operation_key="rsc1:0_demote_0">
+      <pseudo_event id="7" operation="demote" operation_key="rsc1:1_demote_0" internal_operation_key="rsc1:0_demote_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="16" operation="demote" operation_key="ms1_demote_0"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
       </trigger>
       <trigger>
-        <crm_event id="19" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
+        <pseudo_event id="17" operation="demote" operation_key="ms1_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4" priority="1000000">
     <action_set>
-      <pseudo_event id="17" operation="demoted" operation_key="ms1_demoted_0">
+      <pseudo_event id="18" operation="demoted" operation_key="ms1_demoted_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="6" operation="demote" operation_key="rsc1:1_demote_0" internal_operation_key="rsc1:0_demote_0"/>
+        <pseudo_event id="7" operation="demote" operation_key="rsc1:1_demote_0" internal_operation_key="rsc1:0_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="16" operation="demote" operation_key="ms1_demote_0"/>
+        <pseudo_event id="17" operation="demote" operation_key="ms1_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <pseudo_event id="16" operation="demote" operation_key="ms1_demote_0">
+      <pseudo_event id="17" operation="demote" operation_key="ms1_demote_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -78,74 +78,73 @@
   </synapse>
   <synapse id="6" priority="1000000">
     <action_set>
-      <pseudo_event id="13" operation="stopped" operation_key="ms1_stopped_0">
+      <pseudo_event id="14" operation="stopped" operation_key="ms1_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="7" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0"/>
+        <pseudo_event id="8" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="12" operation="stop" operation_key="ms1_stop_0"/>
+        <pseudo_event id="13" operation="stop" operation_key="ms1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <pseudo_event id="12" operation="stop" operation_key="ms1_stop_0">
+      <pseudo_event id="13" operation="stop" operation_key="ms1_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="17" operation="demoted" operation_key="ms1_demoted_0"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
       </trigger>
       <trigger>
-        <crm_event id="19" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
+        <pseudo_event id="18" operation="demoted" operation_key="ms1_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <crm_event id="19" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1">
-        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="node1" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="node1"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="9">
-    <action_set>
-      <pseudo_event id="18" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="19" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="19" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10">
+  <synapse id="9">
     <action_set>
-      <pseudo_event id="3" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="4" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="4" operation="stop" operation_key="rsc_stonith_stop_0"/>
+        <pseudo_event id="5" operation="stop" operation_key="rsc_stonith_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="7" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0"/>
+        <pseudo_event id="8" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="18" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="19" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="10">
+    <action_set>
+      <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1">
+        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="node1" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="node1"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/ticket-master-21.scores b/pengine/test10/ticket-master-21.scores
index 89eac5e..dc79d67 100644
--- a/pengine/test10/ticket-master-21.scores
+++ b/pengine/test10/ticket-master-21.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   node1: node is unclean
 Allocation scores:
 clone_color: ms1 allocation score on node1: 0
 clone_color: ms1 allocation score on node2: 0
diff --git a/pengine/test10/ticket-master-21.summary b/pengine/test10/ticket-master-21.summary
index dc2f5db..8fc50eb 100644
--- a/pengine/test10/ticket-master-21.summary
+++ b/pengine/test10/ticket-master-21.summary
@@ -7,9 +7,8 @@ Online: [ node1 node2 ]
      Masters: [ node1 ]
      Slaves: [ node2 ]
 
-  notice: Fencing   node1: node is unclean
 Transition Summary:
- * Fence (reboot) node1
+ * Fence (reboot) node1 'deadman ticket was lost'
  * Move    rsc_stonith	(Started node1 -> node2)
  * Demote  rsc1:0	(Master -> Stopped node1)
 
@@ -17,11 +16,11 @@ Executing cluster transition:
  * Pseudo action:   rsc_stonith_stop_0
  * Pseudo action:   ms1_demote_0
  * Fencing node1 (reboot)
- * Pseudo action:   stonith_complete
  * Resource action: rsc_stonith     start on node2
  * Pseudo action:   rsc1:1_demote_0
  * Pseudo action:   ms1_demoted_0
  * Pseudo action:   ms1_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   rsc1:1_stop_0
  * Pseudo action:   ms1_stopped_0
  * Pseudo action:   all_stopped
diff --git a/pengine/test10/ticket-master-9.exp b/pengine/test10/ticket-master-9.exp
index 71e57be..76114c0 100644
--- a/pengine/test10/ticket-master-9.exp
+++ b/pengine/test10/ticket-master-9.exp
@@ -1,20 +1,20 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="5" operation="start" operation_key="rsc_stonith_start_0" on_node="node2" on_node_uuid="node2">
+      <rsc_op id="6" operation="start" operation_key="rsc_stonith_start_0" on_node="node2" on_node_uuid="node2">
         <primitive id="rsc_stonith" class="stonith" type="null"/>
         <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="4" operation="stop" operation_key="rsc_stonith_stop_0"/>
+        <pseudo_event id="5" operation="stop" operation_key="rsc_stonith_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <pseudo_event id="4" operation="stop" operation_key="rsc_stonith_stop_0">
+      <pseudo_event id="5" operation="stop" operation_key="rsc_stonith_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -22,55 +22,55 @@
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="7" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0">
+      <pseudo_event id="8" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="6" operation="demote" operation_key="rsc1:1_demote_0" internal_operation_key="rsc1:0_demote_0"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="12" operation="stop" operation_key="ms1_stop_0"/>
+        <pseudo_event id="7" operation="demote" operation_key="rsc1:1_demote_0" internal_operation_key="rsc1:0_demote_0"/>
       </trigger>
       <trigger>
-        <crm_event id="19" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
+        <pseudo_event id="13" operation="stop" operation_key="ms1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="6" operation="demote" operation_key="rsc1:1_demote_0" internal_operation_key="rsc1:0_demote_0">
+      <pseudo_event id="7" operation="demote" operation_key="rsc1:1_demote_0" internal_operation_key="rsc1:0_demote_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="16" operation="demote" operation_key="ms1_demote_0"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
       </trigger>
       <trigger>
-        <crm_event id="19" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
+        <pseudo_event id="17" operation="demote" operation_key="ms1_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4" priority="1000000">
     <action_set>
-      <pseudo_event id="17" operation="demoted" operation_key="ms1_demoted_0">
+      <pseudo_event id="18" operation="demoted" operation_key="ms1_demoted_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="6" operation="demote" operation_key="rsc1:1_demote_0" internal_operation_key="rsc1:0_demote_0"/>
+        <pseudo_event id="7" operation="demote" operation_key="rsc1:1_demote_0" internal_operation_key="rsc1:0_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="16" operation="demote" operation_key="ms1_demote_0"/>
+        <pseudo_event id="17" operation="demote" operation_key="ms1_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <pseudo_event id="16" operation="demote" operation_key="ms1_demote_0">
+      <pseudo_event id="17" operation="demote" operation_key="ms1_demote_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -78,74 +78,73 @@
   </synapse>
   <synapse id="6" priority="1000000">
     <action_set>
-      <pseudo_event id="13" operation="stopped" operation_key="ms1_stopped_0">
+      <pseudo_event id="14" operation="stopped" operation_key="ms1_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="7" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0"/>
+        <pseudo_event id="8" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="12" operation="stop" operation_key="ms1_stop_0"/>
+        <pseudo_event id="13" operation="stop" operation_key="ms1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <pseudo_event id="12" operation="stop" operation_key="ms1_stop_0">
+      <pseudo_event id="13" operation="stop" operation_key="ms1_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="17" operation="demoted" operation_key="ms1_demoted_0"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
       </trigger>
       <trigger>
-        <crm_event id="19" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
+        <pseudo_event id="18" operation="demoted" operation_key="ms1_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <crm_event id="19" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1">
-        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="node1" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="node1"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="9">
-    <action_set>
-      <pseudo_event id="18" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="19" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="19" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
+        <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10">
+  <synapse id="9">
     <action_set>
-      <pseudo_event id="3" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="4" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="4" operation="stop" operation_key="rsc_stonith_stop_0"/>
+        <pseudo_event id="5" operation="stop" operation_key="rsc_stonith_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="7" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0"/>
+        <pseudo_event id="8" operation="stop" operation_key="rsc1:1_stop_0" internal_operation_key="rsc1:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="18" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="19" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="10">
+    <action_set>
+      <crm_event id="3" operation="stonith" operation_key="stonith-node1-reboot" on_node="node1" on_node_uuid="node1">
+        <attributes CRM_meta_on_node="node1" CRM_meta_on_node_uuid="node1" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="node1"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/ticket-master-9.scores b/pengine/test10/ticket-master-9.scores
index 89eac5e..dc79d67 100644
--- a/pengine/test10/ticket-master-9.scores
+++ b/pengine/test10/ticket-master-9.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   node1: node is unclean
 Allocation scores:
 clone_color: ms1 allocation score on node1: 0
 clone_color: ms1 allocation score on node2: 0
diff --git a/pengine/test10/ticket-master-9.summary b/pengine/test10/ticket-master-9.summary
index dc2f5db..8fc50eb 100644
--- a/pengine/test10/ticket-master-9.summary
+++ b/pengine/test10/ticket-master-9.summary
@@ -7,9 +7,8 @@ Online: [ node1 node2 ]
      Masters: [ node1 ]
      Slaves: [ node2 ]
 
-  notice: Fencing   node1: node is unclean
 Transition Summary:
- * Fence (reboot) node1
+ * Fence (reboot) node1 'deadman ticket was lost'
  * Move    rsc_stonith	(Started node1 -> node2)
  * Demote  rsc1:0	(Master -> Stopped node1)
 
@@ -17,11 +16,11 @@ Executing cluster transition:
  * Pseudo action:   rsc_stonith_stop_0
  * Pseudo action:   ms1_demote_0
  * Fencing node1 (reboot)
- * Pseudo action:   stonith_complete
  * Resource action: rsc_stonith     start on node2
  * Pseudo action:   rsc1:1_demote_0
  * Pseudo action:   ms1_demoted_0
  * Pseudo action:   ms1_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   rsc1:1_stop_0
  * Pseudo action:   ms1_stopped_0
  * Pseudo action:   all_stopped
diff --git a/pengine/test10/ticket-primitive-21.exp b/pengine/test10/ticket-primitive-21.exp
index bbd949f..7895296 100644
--- a/pengine/test10/ticket-primitive-21.exp
+++ b/pengine/test10/ticket-primitive-21.exp
@@ -1,53 +1,52 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <pseudo_event id="5" operation="stop" operation_key="rsc1_stop_0">
+      <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="7" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <crm_event id="2" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <crm_event id="7" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2">
-        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="node2" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="node2"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="2">
-    <action_set>
-      <pseudo_event id="6" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="7" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="7" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <crm_event id="2" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="3">
+  <synapse id="2">
     <action_set>
-      <pseudo_event id="2" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="3" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="5" operation="stop" operation_key="rsc1_stop_0"/>
+        <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="6" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="7" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="3">
+    <action_set>
+      <crm_event id="2" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2">
+        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="node2" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="node2"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/ticket-primitive-21.scores b/pengine/test10/ticket-primitive-21.scores
index d1147ca..ed3f3cd 100644
--- a/pengine/test10/ticket-primitive-21.scores
+++ b/pengine/test10/ticket-primitive-21.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   node2: node is unclean
 Allocation scores:
 native_color: rsc1 allocation score on node1: -INFINITY
 native_color: rsc1 allocation score on node2: -INFINITY
diff --git a/pengine/test10/ticket-primitive-21.summary b/pengine/test10/ticket-primitive-21.summary
index d3d02fe..9b91672 100644
--- a/pengine/test10/ticket-primitive-21.summary
+++ b/pengine/test10/ticket-primitive-21.summary
@@ -5,15 +5,14 @@ Online: [ node1 node2 ]
  rsc_stonith	(stonith:null):	Started node1
  rsc1	(ocf::pacemaker:Dummy):	Started node2
 
-  notice: Fencing   node2: node is unclean
 Transition Summary:
- * Fence (reboot) node2
+ * Fence (reboot) node2 'deadman ticket was lost'
  * Stop    rsc1	(node2)
 
 Executing cluster transition:
  * Fencing node2 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   rsc1_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   all_stopped
 
 Revised cluster status:
diff --git a/pengine/test10/ticket-primitive-9.exp b/pengine/test10/ticket-primitive-9.exp
index bbd949f..7895296 100644
--- a/pengine/test10/ticket-primitive-9.exp
+++ b/pengine/test10/ticket-primitive-9.exp
@@ -1,53 +1,52 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <pseudo_event id="5" operation="stop" operation_key="rsc1_stop_0">
+      <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="7" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <crm_event id="2" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <crm_event id="7" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2">
-        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="node2" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="node2"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="2">
-    <action_set>
-      <pseudo_event id="6" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="7" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="7" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
+        <crm_event id="2" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="3">
+  <synapse id="2">
     <action_set>
-      <pseudo_event id="2" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="3" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="5" operation="stop" operation_key="rsc1_stop_0"/>
+        <pseudo_event id="6" operation="stop" operation_key="rsc1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="6" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="7" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="3">
+    <action_set>
+      <crm_event id="2" operation="stonith" operation_key="stonith-node2-reboot" on_node="node2" on_node_uuid="node2">
+        <attributes CRM_meta_on_node="node2" CRM_meta_on_node_uuid="node2" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="node2"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
-
diff --git a/pengine/test10/ticket-primitive-9.scores b/pengine/test10/ticket-primitive-9.scores
index d1147ca..ed3f3cd 100644
--- a/pengine/test10/ticket-primitive-9.scores
+++ b/pengine/test10/ticket-primitive-9.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   node2: node is unclean
 Allocation scores:
 native_color: rsc1 allocation score on node1: -INFINITY
 native_color: rsc1 allocation score on node2: -INFINITY
diff --git a/pengine/test10/ticket-primitive-9.summary b/pengine/test10/ticket-primitive-9.summary
index d3d02fe..9b91672 100644
--- a/pengine/test10/ticket-primitive-9.summary
+++ b/pengine/test10/ticket-primitive-9.summary
@@ -5,15 +5,14 @@ Online: [ node1 node2 ]
  rsc_stonith	(stonith:null):	Started node1
  rsc1	(ocf::pacemaker:Dummy):	Started node2
 
-  notice: Fencing   node2: node is unclean
 Transition Summary:
- * Fence (reboot) node2
+ * Fence (reboot) node2 'deadman ticket was lost'
  * Stop    rsc1	(node2)
 
 Executing cluster transition:
  * Fencing node2 (reboot)
- * Pseudo action:   stonith_complete
  * Pseudo action:   rsc1_stop_0
+ * Pseudo action:   stonith_complete
  * Pseudo action:   all_stopped
 
 Revised cluster status:
diff --git a/pengine/test10/unfence-definition.scores b/pengine/test10/unfence-definition.scores
index 3d5aa9f..d9fa9bb 100644
--- a/pengine/test10/unfence-definition.scores
+++ b/pengine/test10/unfence-definition.scores
@@ -1,6 +1,3 @@
-  notice: Fencing   virt-4: node is unclean
-  notice: Unfencing virt-1: Device definition changed
-  notice: Unfencing virt-3: Required by dlm:2
 Allocation scores:
 clone_color: clvmd-clone allocation score on virt-1: 0
 clone_color: clvmd-clone allocation score on virt-2: 0
diff --git a/pengine/test10/unfence-definition.summary b/pengine/test10/unfence-definition.summary
index a31cc20..d776228 100644
--- a/pengine/test10/unfence-definition.summary
+++ b/pengine/test10/unfence-definition.summary
@@ -11,13 +11,10 @@ Online: [ virt-1 virt-2 virt-3 ]
      Started: [ virt-1 ]
      Stopped: [ virt-2 virt-3 virt-4 ]
 
-  notice: Unfencing virt-1: Device definition changed
-  notice: Unfencing virt-3: Required by dlm:2
-  notice: Fencing   virt-4: node is unclean
 Transition Summary:
- * Fence (reboot) virt-4
- * Fence (on) virt-3
- * Fence (on) virt-1
+ * Fence (reboot) virt-4 'node is unclean'
+ * Fence (on) virt-3 'Required by dlm:2'
+ * Fence (on) virt-1 'Device definition changed'
  * Restart fencing	(Started virt-1)
  * Restart dlm:0	(Started virt-1)
  * Start   dlm:2	(virt-3)
diff --git a/pengine/test10/unfence-parameters.scores b/pengine/test10/unfence-parameters.scores
index 5089910..d9fa9bb 100644
--- a/pengine/test10/unfence-parameters.scores
+++ b/pengine/test10/unfence-parameters.scores
@@ -1,7 +1,3 @@
-  notice: Fencing   virt-4: node is unclean
-  notice: Unfencing virt-1: Device parameters changed (reload)
-  notice: Unfencing virt-2: Device parameters changed (reload)
-  notice: Unfencing virt-3: Device parameters changed (reload)
 Allocation scores:
 clone_color: clvmd-clone allocation score on virt-1: 0
 clone_color: clvmd-clone allocation score on virt-2: 0
diff --git a/pengine/test10/unfence-parameters.summary b/pengine/test10/unfence-parameters.summary
index 8effc63..e71eafc 100644
--- a/pengine/test10/unfence-parameters.summary
+++ b/pengine/test10/unfence-parameters.summary
@@ -11,15 +11,11 @@ Online: [ virt-1 virt-2 virt-3 ]
      Started: [ virt-1 ]
      Stopped: [ virt-2 virt-3 virt-4 ]
 
-  notice: Unfencing virt-1: Device parameters changed (reload)
-  notice: Unfencing virt-2: Device parameters changed (reload)
-  notice: Unfencing virt-3: Device parameters changed (reload)
-  notice: Fencing   virt-4: node is unclean
 Transition Summary:
- * Fence (reboot) virt-4
- * Fence (on) virt-3
- * Fence (on) virt-2
- * Fence (on) virt-1
+ * Fence (reboot) virt-4 'node is unclean'
+ * Fence (on) virt-3 'Device parameters changed (reload)'
+ * Fence (on) virt-2 'Device parameters changed (reload)'
+ * Fence (on) virt-1 'Device parameters changed (reload)'
  * Restart fencing	(Started virt-1)
  * Restart dlm:0	(Started virt-1)
  * Restart dlm:1	(Started virt-2)
diff --git a/pengine/test10/unfence-startup.scores b/pengine/test10/unfence-startup.scores
index 0172a9d..d9fa9bb 100644
--- a/pengine/test10/unfence-startup.scores
+++ b/pengine/test10/unfence-startup.scores
@@ -1,5 +1,3 @@
-  notice: Fencing   virt-4: node is unclean
-  notice: Unfencing virt-3: Required by dlm:2
 Allocation scores:
 clone_color: clvmd-clone allocation score on virt-1: 0
 clone_color: clvmd-clone allocation score on virt-2: 0
diff --git a/pengine/test10/unfence-startup.summary b/pengine/test10/unfence-startup.summary
index 6a49f42..276358c 100644
--- a/pengine/test10/unfence-startup.summary
+++ b/pengine/test10/unfence-startup.summary
@@ -11,11 +11,9 @@ Online: [ virt-1 virt-2 virt-3 ]
      Started: [ virt-1 ]
      Stopped: [ virt-2 virt-3 virt-4 ]
 
-  notice: Unfencing virt-3: Required by dlm:2
-  notice: Fencing   virt-4: node is unclean
 Transition Summary:
- * Fence (reboot) virt-4
- * Fence (on) virt-3
+ * Fence (reboot) virt-4 'node is unclean'
+ * Fence (on) virt-3 'Required by dlm:2'
  * Start   dlm:2	(virt-3)
  * Start   clvmd:1	(virt-2)
  * Start   clvmd:2	(virt-3)
diff --git a/pengine/test10/unrunnable-1.exp b/pengine/test10/unrunnable-1.exp
index 56fb4c0..d8f3b69 100644
--- a/pengine/test10/unrunnable-1.exp
+++ b/pengine/test10/unrunnable-1.exp
@@ -1,7 +1,7 @@
  <transition_graph cluster-delay="3m" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
    <synapse id="0">
      <action_set>
-      <rsc_op id="3" operation="monitor" operation_key="DcIPaddr_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="4" operation="monitor" operation_key="DcIPaddr_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="DcIPaddr" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="192.168.100.180"/>
        </rsc_op>
@@ -10,7 +10,7 @@
    </synapse>
    <synapse id="1">
      <action_set>
-      <rsc_op id="4" operation="monitor" operation_key="child_192.168.100.181_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="5" operation="monitor" operation_key="child_192.168.100.181_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="child_192.168.100.181" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="192.168.100.181"/>
        </rsc_op>
@@ -19,7 +19,7 @@
    </synapse>
   <synapse id="2">
      <action_set>
-      <rsc_op id="5" operation="monitor" operation_key="child_192.168.100.182_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="6" operation="monitor" operation_key="child_192.168.100.182_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="child_192.168.100.182" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="192.168.100.182"/>
        </rsc_op>
@@ -28,7 +28,7 @@
    </synapse>
   <synapse id="3">
      <action_set>
-      <rsc_op id="6" operation="monitor" operation_key="child_192.168.100.183_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="7" operation="monitor" operation_key="child_192.168.100.183_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="child_192.168.100.183" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="192.168.100.183"/>
        </rsc_op>
@@ -37,7 +37,7 @@
    </synapse>
   <synapse id="4">
      <action_set>
-      <rsc_op id="7" operation="monitor" operation_key="rsc_c001n08_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="8" operation="monitor" operation_key="rsc_c001n08_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="rsc_c001n08" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="192.168.100.184"/>
        </rsc_op>
@@ -46,7 +46,7 @@
    </synapse>
   <synapse id="5">
      <action_set>
-      <rsc_op id="8" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="9" operation="monitor" operation_key="rsc_c001n02_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="rsc_c001n02" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="192.168.100.185"/>
        </rsc_op>
@@ -55,7 +55,7 @@
    </synapse>
   <synapse id="6">
      <action_set>
-      <rsc_op id="9" operation="monitor" operation_key="rsc_c001n03_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="10" operation="monitor" operation_key="rsc_c001n03_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="rsc_c001n03" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="192.168.100.186"/>
        </rsc_op>
@@ -64,7 +64,7 @@
    </synapse>
   <synapse id="7">
      <action_set>
-      <rsc_op id="10" operation="monitor" operation_key="rsc_c001n01_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="11" operation="monitor" operation_key="rsc_c001n01_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="rsc_c001n01" class="ocf" provider="heartbeat" type="IPaddr"/>
         <attributes CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  ip="192.168.100.187"/>
        </rsc_op>
@@ -73,7 +73,7 @@
    </synapse>
   <synapse id="8">
      <action_set>
-      <rsc_op id="11" operation="monitor" operation_key="child_DoFencing:1_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="12" operation="monitor" operation_key="child_DoFencing:1_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="child_DoFencing:1" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="40000"  hostlist="c001n08 c001n02 c001n03 c001n01 "/>
        </rsc_op>
@@ -82,7 +82,7 @@
    </synapse>
   <synapse id="9">
      <action_set>
-      <rsc_op id="12" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="13" operation="monitor" operation_key="child_DoFencing:2_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="child_DoFencing:2" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="40000"  hostlist="c001n08 c001n02 c001n03 c001n01 "/>
        </rsc_op>
@@ -91,7 +91,7 @@
    </synapse>
   <synapse id="10">
      <action_set>
-      <rsc_op id="13" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
+      <rsc_op id="14" operation="monitor" operation_key="child_DoFencing:3_monitor_0" on_node="c001n03" on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193">
         <primitive id="child_DoFencing:3" class="stonith" type="ssh"/>
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_on_node="c001n03" CRM_meta_on_node_uuid="5d9a8c11-8684-43ea-91.0.6e221530c193" CRM_meta_op_target_rc="7" CRM_meta_timeout="40000"  hostlist="c001n08 c001n02 c001n03 c001n01 "/>
        </rsc_op>
@@ -100,19 +100,19 @@
    </synapse>
   <synapse id="11" priority="1000000">
      <action_set>
-      <pseudo_event id="40" operation="stopped" operation_key="DoFencing_stopped_0">
+      <pseudo_event id="41" operation="stopped" operation_key="DoFencing_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
      <inputs>
        <trigger>
-        <pseudo_event id="39" operation="stop" operation_key="DoFencing_stop_0"/>
+        <pseudo_event id="40" operation="stop" operation_key="DoFencing_stop_0"/>
        </trigger>
      </inputs>
    </synapse>
   <synapse id="12">
      <action_set>
-      <pseudo_event id="39" operation="stop" operation_key="DoFencing_stop_0">
+      <pseudo_event id="40" operation="stop" operation_key="DoFencing_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="true" CRM_meta_notify="false" CRM_meta_timeout="20000" />
        </pseudo_event>
      </action_set>
diff --git a/pengine/test10/whitebox-fail1.scores b/pengine/test10/whitebox-fail1.scores
index 02192a9..4fbbf29 100644
--- a/pengine/test10/whitebox-fail1.scores
+++ b/pengine/test10/whitebox-fail1.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   lxc1: guest is unclean
 Allocation scores:
 clone_color: M-clone allocation score on 18node1: 0
 clone_color: M-clone allocation score on 18node2: 0
diff --git a/pengine/test10/whitebox-fail1.summary b/pengine/test10/whitebox-fail1.summary
index c7b5e19..14b1ee2 100644
--- a/pengine/test10/whitebox-fail1.summary
+++ b/pengine/test10/whitebox-fail1.summary
@@ -13,9 +13,8 @@ Containers: [ lxc2:container2 ]
  C	(ocf::pacemaker:Dummy):	Started lxc2
  D	(ocf::pacemaker:Dummy):	Started 18node1
 
-  notice: Fencing   lxc1: guest is unclean
 Transition Summary:
- * Fence (reboot) lxc1 (resource: container1)
+ * Fence (reboot) lxc1 (resource: container1) 'guest is unclean'
  * Recover container1	(Started 18node2)
  * Recover M:4	(Started lxc1)
  * Recover B	(Started lxc1)
diff --git a/pengine/test10/whitebox-fail2.scores b/pengine/test10/whitebox-fail2.scores
index 02192a9..4fbbf29 100644
--- a/pengine/test10/whitebox-fail2.scores
+++ b/pengine/test10/whitebox-fail2.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   lxc1: guest is unclean
 Allocation scores:
 clone_color: M-clone allocation score on 18node1: 0
 clone_color: M-clone allocation score on 18node2: 0
diff --git a/pengine/test10/whitebox-fail2.summary b/pengine/test10/whitebox-fail2.summary
index 73e968e..06364fb 100644
--- a/pengine/test10/whitebox-fail2.summary
+++ b/pengine/test10/whitebox-fail2.summary
@@ -13,9 +13,8 @@ Containers: [ lxc2:container2 ]
  C	(ocf::pacemaker:Dummy):	Started lxc2
  D	(ocf::pacemaker:Dummy):	Started 18node1
 
-  notice: Fencing   lxc1: guest is unclean
 Transition Summary:
- * Fence (reboot) lxc1 (resource: container1)
+ * Fence (reboot) lxc1 (resource: container1) 'guest is unclean'
  * Recover container1	(Started 18node2)
  * Recover M:4	(Started lxc1)
  * Recover B	(Started lxc1)
diff --git a/pengine/test10/whitebox-imply-stop-on-fence.exp b/pengine/test10/whitebox-imply-stop-on-fence.exp
index e9390bf..9beb51d 100644
--- a/pengine/test10/whitebox-imply-stop-on-fence.exp
+++ b/pengine/test10/whitebox-imply-stop-on-fence.exp
@@ -1,36 +1,36 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="14" operation="monitor" operation_key="fence-kiff-02_monitor_60000" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="15" operation="monitor" operation_key="fence-kiff-02_monitor_60000" on_node="kiff-02" on_node_uuid="2">
         <primitive id="fence-kiff-02" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" action="reboot"  ipaddr="kiff-02-ilo" login="admin" passwd="admin" pcmk_host_check="static-list" pcmk_host_list="kiff-02"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="13" operation="start" operation_key="fence-kiff-02_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="14" operation="start" operation_key="fence-kiff-02_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="13" operation="start" operation_key="fence-kiff-02_start_0" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="14" operation="start" operation_key="fence-kiff-02_start_0" on_node="kiff-02" on_node_uuid="2">
         <primitive id="fence-kiff-02" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" action="reboot"  ipaddr="kiff-02-ilo" login="admin" passwd="admin" pcmk_host_check="static-list" pcmk_host_list="kiff-02"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="9" operation="all_stopped" operation_key="all_stopped"/>
+        <pseudo_event id="10" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <pseudo_event id="12" operation="stop" operation_key="fence-kiff-02_stop_0"/>
+        <pseudo_event id="13" operation="stop" operation_key="fence-kiff-02_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="12" operation="stop" operation_key="fence-kiff-02_stop_0">
+      <pseudo_event id="13" operation="stop" operation_key="fence-kiff-02_stop_0">
         <attributes CRM_meta_timeout="20000" action="reboot"  ipaddr="kiff-02-ilo" login="admin" passwd="admin" pcmk_host_check="static-list" pcmk_host_list="kiff-02"/>
       </pseudo_event>
     </action_set>
@@ -38,277 +38,277 @@
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="15" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:0_stop_0">
+      <pseudo_event id="16" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="100000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="20" operation="stop" operation_key="dlm-clone_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="22" operation="stop" operation_key="clvmd_stop_0" internal_operation_key="clvmd:0_stop_0"/>
+        <pseudo_event id="21" operation="stop" operation_key="dlm-clone_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="60" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
+        <pseudo_event id="23" operation="stop" operation_key="clvmd_stop_0" internal_operation_key="clvmd:0_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4" priority="1000000">
     <action_set>
-      <pseudo_event id="21" operation="stopped" operation_key="dlm-clone_stopped_0">
+      <pseudo_event id="22" operation="stopped" operation_key="dlm-clone_stopped_0">
         <attributes CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="15" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:0_stop_0"/>
+        <pseudo_event id="16" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="20" operation="stop" operation_key="dlm-clone_stop_0"/>
+        <pseudo_event id="21" operation="stop" operation_key="dlm-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <pseudo_event id="20" operation="stop" operation_key="dlm-clone_stop_0">
+      <pseudo_event id="21" operation="stop" operation_key="dlm-clone_stop_0">
         <attributes CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="28" operation="stopped" operation_key="clvmd-clone_stopped_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <crm_event id="60" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
+        <pseudo_event id="29" operation="stopped" operation_key="clvmd-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="22" operation="stop" operation_key="clvmd_stop_0" internal_operation_key="clvmd:0_stop_0">
+      <pseudo_event id="23" operation="stop" operation_key="clvmd_stop_0" internal_operation_key="clvmd:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="90000"  with_cmirrord="1"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="27" operation="stop" operation_key="clvmd-clone_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="shared0_stop_0" internal_operation_key="shared0:0_stop_0"/>
+        <pseudo_event id="28" operation="stop" operation_key="clvmd-clone_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="60" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
+        <pseudo_event id="30" operation="stop" operation_key="shared0_stop_0" internal_operation_key="shared0:0_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7" priority="1000000">
     <action_set>
-      <pseudo_event id="28" operation="stopped" operation_key="clvmd-clone_stopped_0">
+      <pseudo_event id="29" operation="stopped" operation_key="clvmd-clone_stopped_0">
         <attributes CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="22" operation="stop" operation_key="clvmd_stop_0" internal_operation_key="clvmd:0_stop_0"/>
+        <pseudo_event id="23" operation="stop" operation_key="clvmd_stop_0" internal_operation_key="clvmd:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="27" operation="stop" operation_key="clvmd-clone_stop_0"/>
+        <pseudo_event id="28" operation="stop" operation_key="clvmd-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <pseudo_event id="27" operation="stop" operation_key="clvmd-clone_stop_0">
+      <pseudo_event id="28" operation="stop" operation_key="clvmd-clone_stop_0">
         <attributes CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="35" operation="stopped" operation_key="shared0-clone_stopped_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <crm_event id="60" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
+        <pseudo_event id="36" operation="stopped" operation_key="shared0-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <pseudo_event id="29" operation="stop" operation_key="shared0_stop_0" internal_operation_key="shared0:0_stop_0">
+      <pseudo_event id="30" operation="stop" operation_key="shared0_stop_0" internal_operation_key="shared0:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="60000"  device="/dev/shared/shared0" directory="/mnt/shared0" fstype="gfs2" options="errors=panic"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="34" operation="stop" operation_key="shared0-clone_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <crm_event id="60" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
+        <pseudo_event id="35" operation="stop" operation_key="shared0-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10" priority="1000000">
     <action_set>
-      <pseudo_event id="35" operation="stopped" operation_key="shared0-clone_stopped_0">
+      <pseudo_event id="36" operation="stopped" operation_key="shared0-clone_stopped_0">
         <attributes CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="shared0_stop_0" internal_operation_key="shared0:0_stop_0"/>
+        <pseudo_event id="30" operation="stop" operation_key="shared0_stop_0" internal_operation_key="shared0:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="34" operation="stop" operation_key="shared0-clone_stop_0"/>
+        <pseudo_event id="35" operation="stop" operation_key="shared0-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <pseudo_event id="34" operation="stop" operation_key="shared0-clone_stop_0">
+      <pseudo_event id="35" operation="stop" operation_key="shared0-clone_stop_0">
         <attributes CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="36" operation="stop" operation_key="R-lxc-01_kiff-01_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="39" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0"/>
+        <pseudo_event id="37" operation="stop" operation_key="R-lxc-01_kiff-01_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="60" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
+        <pseudo_event id="40" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <rsc_op id="38" operation="monitor" operation_key="R-lxc-01_kiff-01_monitor_10000" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="39" operation="monitor" operation_key="R-lxc-01_kiff-01_monitor_10000" on_node="kiff-02" on_node_uuid="2">
         <primitive id="R-lxc-01_kiff-01" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_remote_node="lxc-01_kiff-01" CRM_meta_timeout="30000" config="/mnt/shared0/test-virtual-domain/lxc/lxc-01_kiff-01.xml"  force_stop="true" hypervisor="lxc:///"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="R-lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="38" operation="start" operation_key="R-lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13">
     <action_set>
-      <rsc_op id="37" operation="start" operation_key="R-lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="38" operation="start" operation_key="R-lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2">
         <primitive id="R-lxc-01_kiff-01" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_remote_node="lxc-01_kiff-01" CRM_meta_timeout="90000" config="/mnt/shared0/test-virtual-domain/lxc/lxc-01_kiff-01.xml"  force_stop="true" hypervisor="lxc:///"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="36" operation="stop" operation_key="R-lxc-01_kiff-01_stop_0"/>
+        <pseudo_event id="37" operation="stop" operation_key="R-lxc-01_kiff-01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="59" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="60" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <pseudo_event id="36" operation="stop" operation_key="R-lxc-01_kiff-01_stop_0">
+      <pseudo_event id="37" operation="stop" operation_key="R-lxc-01_kiff-01_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_remote_node="lxc-01_kiff-01" CRM_meta_timeout="90000" config="/mnt/shared0/test-virtual-domain/lxc/lxc-01_kiff-01.xml"  force_stop="true" hypervisor="lxc:///"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="49" operation="stop" operation_key="lxc-01_kiff-01_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <crm_event id="60" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
+        <pseudo_event id="50" operation="stop" operation_key="lxc-01_kiff-01_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15">
     <action_set>
-      <rsc_op id="41" operation="monitor" operation_key="R-lxc-02_kiff-01_monitor_10000" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="42" operation="monitor" operation_key="R-lxc-02_kiff-01_monitor_10000" on_node="kiff-02" on_node_uuid="2">
         <primitive id="R-lxc-02_kiff-01" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_remote_node="lxc-02_kiff-01" CRM_meta_timeout="30000" config="/mnt/shared0/test-virtual-domain/lxc/lxc-02_kiff-01.xml"  force_stop="true" hypervisor="lxc:///"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="R-lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="41" operation="start" operation_key="R-lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="16">
     <action_set>
-      <rsc_op id="40" operation="start" operation_key="R-lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="41" operation="start" operation_key="R-lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2">
         <primitive id="R-lxc-02_kiff-01" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_remote_node="lxc-02_kiff-01" CRM_meta_timeout="90000" config="/mnt/shared0/test-virtual-domain/lxc/lxc-02_kiff-01.xml"  force_stop="true" hypervisor="lxc:///"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="39" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0"/>
+        <pseudo_event id="40" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="59" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="60" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="17">
     <action_set>
-      <pseudo_event id="39" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0">
+      <pseudo_event id="40" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_remote_node="lxc-02_kiff-01" CRM_meta_timeout="90000" config="/mnt/shared0/test-virtual-domain/lxc/lxc-02_kiff-01.xml"  force_stop="true" hypervisor="lxc:///"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="52" operation="stop" operation_key="lxc-02_kiff-01_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <crm_event id="60" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
+        <pseudo_event id="53" operation="stop" operation_key="lxc-02_kiff-01_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="18">
     <action_set>
-      <rsc_op id="48" operation="monitor" operation_key="vm-fs_monitor_20000" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01" router_node="kiff-02">
+      <rsc_op id="49" operation="monitor" operation_key="vm-fs_monitor_20000" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01" router_node="kiff-02">
         <primitive id="vm-fs" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_interval="20000" CRM_meta_name="monitor" CRM_meta_on_node="lxc-01_kiff-01" CRM_meta_on_node_uuid="lxc-01_kiff-01" CRM_meta_timeout="40000"  device="/root" directory="/mnt/vm-fs" fstype="none" options="bind"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="47" operation="start" operation_key="vm-fs_start_0" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01" router_node="kiff-02"/>
+        <rsc_op id="48" operation="start" operation_key="vm-fs_start_0" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01" router_node="kiff-02"/>
       </trigger>
       <trigger>
-        <rsc_op id="50" operation="start" operation_key="lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="51" operation="start" operation_key="lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="19">
     <action_set>
-      <rsc_op id="47" operation="start" operation_key="vm-fs_start_0" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01" router_node="kiff-02">
+      <rsc_op id="48" operation="start" operation_key="vm-fs_start_0" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01" router_node="kiff-02">
         <primitive id="vm-fs" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="lxc-01_kiff-01" CRM_meta_on_node_uuid="lxc-01_kiff-01" CRM_meta_timeout="60000"  device="/root" directory="/mnt/vm-fs" fstype="none" options="bind"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="R-lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="38" operation="start" operation_key="R-lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="46" operation="stop" operation_key="vm-fs_stop_0"/>
+        <pseudo_event id="47" operation="stop" operation_key="vm-fs_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="50" operation="start" operation_key="lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="51" operation="start" operation_key="lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="59" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="60" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="20">
     <action_set>
-      <pseudo_event id="46" operation="stop" operation_key="vm-fs_stop_0">
+      <pseudo_event id="47" operation="stop" operation_key="vm-fs_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  device="/root" directory="/mnt/vm-fs" fstype="none" options="bind"/>
       </pseudo_event>
     </action_set>
@@ -320,89 +320,89 @@
   </synapse>
   <synapse id="21">
     <action_set>
-      <rsc_op id="51" operation="monitor" operation_key="lxc-01_kiff-01_monitor_30000" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="52" operation="monitor" operation_key="lxc-01_kiff-01_monitor_30000" on_node="kiff-02" on_node_uuid="2">
         <primitive id="lxc-01_kiff-01" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="R-lxc-01_kiff-01" CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="50" operation="start" operation_key="lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="51" operation="start" operation_key="lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="22">
     <action_set>
-      <rsc_op id="50" operation="start" operation_key="lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="51" operation="start" operation_key="lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2">
         <primitive id="lxc-01_kiff-01" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="R-lxc-01_kiff-01" CRM_meta_name="start" CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="R-lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="38" operation="start" operation_key="R-lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="49" operation="stop" operation_key="lxc-01_kiff-01_stop_0"/>
+        <pseudo_event id="50" operation="stop" operation_key="lxc-01_kiff-01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="59" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="60" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="23">
     <action_set>
-      <pseudo_event id="49" operation="stop" operation_key="lxc-01_kiff-01_stop_0">
+      <pseudo_event id="50" operation="stop" operation_key="lxc-01_kiff-01_stop_0">
         <attributes CRM_meta_container="R-lxc-01_kiff-01" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="60" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="24">
     <action_set>
-      <rsc_op id="54" operation="monitor" operation_key="lxc-02_kiff-01_monitor_30000" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="55" operation="monitor" operation_key="lxc-02_kiff-01_monitor_30000" on_node="kiff-02" on_node_uuid="2">
         <primitive id="lxc-02_kiff-01" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="R-lxc-02_kiff-01" CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="53" operation="start" operation_key="lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="54" operation="start" operation_key="lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="25">
     <action_set>
-      <rsc_op id="53" operation="start" operation_key="lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="54" operation="start" operation_key="lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2">
         <primitive id="lxc-02_kiff-01" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="R-lxc-02_kiff-01" CRM_meta_name="start" CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="R-lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="41" operation="start" operation_key="R-lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="52" operation="stop" operation_key="lxc-02_kiff-01_stop_0"/>
+        <pseudo_event id="53" operation="stop" operation_key="lxc-02_kiff-01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="59" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="60" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="26">
     <action_set>
-      <pseudo_event id="52" operation="stop" operation_key="lxc-02_kiff-01_stop_0">
+      <pseudo_event id="53" operation="stop" operation_key="lxc-02_kiff-01_stop_0">
         <attributes CRM_meta_container="R-lxc-02_kiff-01" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="60" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
@@ -417,7 +417,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="39" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0"/>
+        <pseudo_event id="40" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -432,32 +432,19 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="36" operation="stop" operation_key="R-lxc-01_kiff-01_stop_0"/>
+        <pseudo_event id="37" operation="stop" operation_key="R-lxc-01_kiff-01_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="29">
     <action_set>
-      <crm_event id="60" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1">
-        <attributes CRM_meta_on_node="kiff-01" CRM_meta_on_node_uuid="1" CRM_meta_probe_complete="true" CRM_meta_shutdown="0" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="1"/>
-          <node id="lxc-01_kiff-01"/>
-          <node id="lxc-02_kiff-01"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="30">
-    <action_set>
-      <pseudo_event id="59" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="60" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="60" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
       <trigger>
         <pseudo_event id="61" operation="stonith" operation_key="stonith-lxc-01_kiff-01-reboot" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01"/>
@@ -467,43 +454,56 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="31">
+  <synapse id="30">
     <action_set>
-      <pseudo_event id="9" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="10" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="12" operation="stop" operation_key="fence-kiff-02_stop_0"/>
+        <pseudo_event id="13" operation="stop" operation_key="fence-kiff-02_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="15" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:0_stop_0"/>
+        <pseudo_event id="16" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="22" operation="stop" operation_key="clvmd_stop_0" internal_operation_key="clvmd:0_stop_0"/>
+        <pseudo_event id="23" operation="stop" operation_key="clvmd_stop_0" internal_operation_key="clvmd:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="shared0_stop_0" internal_operation_key="shared0:0_stop_0"/>
+        <pseudo_event id="30" operation="stop" operation_key="shared0_stop_0" internal_operation_key="shared0:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="36" operation="stop" operation_key="R-lxc-01_kiff-01_stop_0"/>
+        <pseudo_event id="37" operation="stop" operation_key="R-lxc-01_kiff-01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="39" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0"/>
+        <pseudo_event id="40" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="46" operation="stop" operation_key="vm-fs_stop_0"/>
+        <pseudo_event id="47" operation="stop" operation_key="vm-fs_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="49" operation="stop" operation_key="lxc-01_kiff-01_stop_0"/>
+        <pseudo_event id="50" operation="stop" operation_key="lxc-01_kiff-01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="52" operation="stop" operation_key="lxc-02_kiff-01_stop_0"/>
+        <pseudo_event id="53" operation="stop" operation_key="lxc-02_kiff-01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="59" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="60" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
+  <synapse id="31">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1">
+        <attributes CRM_meta_on_node="kiff-01" CRM_meta_on_node_uuid="1" CRM_meta_probe_complete="true" CRM_meta_shutdown="0" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="1"/>
+          <node id="lxc-01_kiff-01"/>
+          <node id="lxc-02_kiff-01"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
 </transition_graph>
diff --git a/pengine/test10/whitebox-imply-stop-on-fence.scores b/pengine/test10/whitebox-imply-stop-on-fence.scores
index 5c3e325..e50f077 100644
--- a/pengine/test10/whitebox-imply-stop-on-fence.scores
+++ b/pengine/test10/whitebox-imply-stop-on-fence.scores
@@ -1,6 +1,3 @@
-  notice: Fencing   kiff-01: node is unclean
-  notice: Fencing   lxc-01_kiff-01: guest is unclean
-  notice: Fencing   lxc-02_kiff-01: guest is unclean
 Allocation scores:
 clone_color: clvmd-clone allocation score on kiff-01: 0
 clone_color: clvmd-clone allocation score on kiff-02: 0
diff --git a/pengine/test10/whitebox-imply-stop-on-fence.summary b/pengine/test10/whitebox-imply-stop-on-fence.summary
index a74bb72..9dab410 100644
--- a/pengine/test10/whitebox-imply-stop-on-fence.summary
+++ b/pengine/test10/whitebox-imply-stop-on-fence.summary
@@ -24,13 +24,10 @@ Containers: [ lxc-01_kiff-02:R-lxc-01_kiff-02 lxc-02_kiff-02:R-lxc-02_kiff-02 ]
  R-lxc-02_kiff-02	(ocf::heartbeat:VirtualDomain):	Started kiff-02 
  vm-fs	(ocf::heartbeat:Filesystem):	FAILED lxc-01_kiff-01
 
-  notice: Fencing   kiff-01: node is unclean
-  notice: Fencing   lxc-01_kiff-01: guest is unclean
-  notice: Fencing   lxc-02_kiff-01: guest is unclean
 Transition Summary:
- * Fence (reboot) lxc-02_kiff-01 (resource: R-lxc-02_kiff-01)
- * Fence (reboot) lxc-01_kiff-01 (resource: R-lxc-01_kiff-01)
- * Fence (reboot) kiff-01
+ * Fence (reboot) lxc-02_kiff-01 (resource: R-lxc-02_kiff-01) 'guest is unclean'
+ * Fence (reboot) lxc-01_kiff-01 (resource: R-lxc-01_kiff-01) 'guest is unclean'
+ * Fence (reboot) kiff-01 'peer is no longer part of the cluster'
  * Move    fence-kiff-02	(Started kiff-01 -> kiff-02)
  * Stop    dlm:0	(kiff-01)
  * Stop    clvmd:0	(kiff-01)
diff --git a/pengine/test10/whitebox-ms-ordering.scores b/pengine/test10/whitebox-ms-ordering.scores
index 72e6d25..f0e51f5 100644
--- a/pengine/test10/whitebox-ms-ordering.scores
+++ b/pengine/test10/whitebox-ms-ordering.scores
@@ -1,5 +1,3 @@
-  notice: Fencing   lxc1: guest is unclean
-  notice: Fencing   lxc2: guest is unclean
 Allocation scores:
 clone_color: lxc-ms-master allocation score on 18node1: 0
 clone_color: lxc-ms-master allocation score on 18node2: 0
diff --git a/pengine/test10/whitebox-ms-ordering.summary b/pengine/test10/whitebox-ms-ordering.summary
index 41436f8..d8ff62c 100644
--- a/pengine/test10/whitebox-ms-ordering.summary
+++ b/pengine/test10/whitebox-ms-ordering.summary
@@ -8,11 +8,9 @@ Online: [ 18node1 18node2 18node3 ]
  Master/Slave Set: lxc-ms-master [lxc-ms]
      Stopped: [ 18node1 18node2 18node3 ]
 
-  notice: Fencing   lxc1: guest is unclean
-  notice: Fencing   lxc2: guest is unclean
 Transition Summary:
- * Fence (reboot) lxc2 (resource: container2)
- * Fence (reboot) lxc1 (resource: container1)
+ * Fence (reboot) lxc2 (resource: container2) 'guest is unclean'
+ * Fence (reboot) lxc1 (resource: container1) 'guest is unclean'
  * Start   container1	(18node1)
  * Start   container2	(18node1)
  * Recover lxc-ms:0	(Master lxc1)
diff --git a/pengine/test10/whitebox-unexpectedly-running.scores b/pengine/test10/whitebox-unexpectedly-running.scores
index eb8a6f9..7f8a1d9 100644
--- a/pengine/test10/whitebox-unexpectedly-running.scores
+++ b/pengine/test10/whitebox-unexpectedly-running.scores
@@ -1,4 +1,3 @@
-  notice: Fencing   remote1: guest is unclean
 Allocation scores:
 native_color: FAKE allocation score on 18builder: 0
 native_color: FAKE allocation score on remote1: -INFINITY
diff --git a/pengine/test10/whitebox-unexpectedly-running.summary b/pengine/test10/whitebox-unexpectedly-running.summary
index 3888aa2..0e69d3c 100644
--- a/pengine/test10/whitebox-unexpectedly-running.summary
+++ b/pengine/test10/whitebox-unexpectedly-running.summary
@@ -4,9 +4,8 @@ Online: [ 18builder ]
 
  FAKE	(ocf::pacemaker:Dummy):	FAILED 18builder 
 
-  notice: Fencing   remote1: guest is unclean
 Transition Summary:
- * Fence (reboot) remote1 (resource: FAKE)
+ * Fence (reboot) remote1 (resource: FAKE) 'guest is unclean'
  * Recover FAKE	(Started 18builder)
  * Start   remote1	(18builder)
 
-- 
1.8.3.1


From 681d290ca57849b72c2d3eac03ff74cbb63e2df8 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Mon, 31 Jul 2017 14:25:54 +1000
Subject: [PATCH 05/12] Log: PE: Attempt to indicate why resources are changing
 state

---
 include/crm/pengine/internal.h                     |  7 +-
 lib/pengine/utils.c                                | 81 +++++++++++++++++---
 pengine/native.c                                   | 89 ++++++++++++----------
 pengine/test10/10-a-then-bm-b-move-a-clone.summary |  2 +-
 .../11-a-then-bm-b-move-a-clone-starting.summary   |  2 +-
 pengine/test10/1484.summary                        |  2 +-
 pengine/test10/1494.summary                        |  2 +-
 .../test10/5-am-then-bm-a-not-migratable.summary   |  2 +-
 pengine/test10/594.summary                         |  4 +-
 pengine/test10/662.summary                         |  2 +-
 .../7-migrate-group-one-unmigratable.summary       |  2 +-
 pengine/test10/764.summary                         | 10 +--
 pengine/test10/797.summary                         | 12 +--
 pengine/test10/829.summary                         |  2 +-
 .../9-am-then-bm-b-migrating-a-stopping.summary    |  4 +-
 pengine/test10/994-2.summary                       |  2 +-
 pengine/test10/anti-colocation-order.summary       |  4 +-
 pengine/test10/asymmetrical-order-move.summary     |  2 +-
 pengine/test10/bug-1572-1.summary                  |  8 +-
 pengine/test10/bug-1572-2.summary                  |  8 +-
 pengine/test10/bug-1573.summary                    |  2 +-
 pengine/test10/bug-1718.summary                    |  4 +-
 pengine/test10/bug-5014-A-stop-B-started.summary   |  2 +-
 .../test10/bug-5014-A-stopped-B-stopped.summary    |  2 +-
 .../test10/bug-5014-CLONE-A-stop-B-started.summary |  2 +-
 .../test10/bug-5014-CthenAthenB-C-stopped.summary  |  4 +-
 .../bug-5014-GROUP-A-stopped-B-started.summary     |  2 +-
 .../bug-5014-GROUP-A-stopped-B-stopped.summary     |  2 +-
 .../bug-5014-ordered-set-symmetrical-false.summary |  2 +-
 .../bug-5014-ordered-set-symmetrical-true.summary  |  4 +-
 pengine/test10/bug-5028-bottom.summary             |  2 +-
 pengine/test10/bug-5140-require-all-false.summary  |  6 +-
 pengine/test10/bug-5186-partial-migrate.summary    |  6 +-
 pengine/test10/bug-cl-5170.summary                 |  4 +-
 pengine/test10/bug-cl-5212.summary                 |  8 +-
 pengine/test10/bug-cl-5247.summary                 |  2 +-
 pengine/test10/bug-lf-2153.summary                 |  4 +-
 pengine/test10/bug-lf-2171.summary                 |  8 +-
 pengine/test10/bug-lf-2361.summary                 |  4 +-
 pengine/test10/bug-lf-2422.summary                 | 24 +++---
 pengine/test10/bug-lf-2453.summary                 | 10 +--
 pengine/test10/bug-lf-2508.summary                 | 12 +--
 pengine/test10/bug-lf-2551.summary                 | 12 +--
 pengine/test10/bug-lf-2574.summary                 |  2 +-
 pengine/test10/bug-lf-2619.summary                 |  2 +-
 pengine/test10/bug-n-385265.summary                |  2 +-
 pengine/test10/bug-rh-1097457.summary              |  8 +-
 pengine/test10/bug-suse-707150.summary             |  2 +-
 .../test10/bundle-order-partial-start-2.summary    |  4 +-
 pengine/test10/bundle-order-partial-stop.summary   | 34 ++++-----
 pengine/test10/bundle-order-startup-clone.summary  | 12 +--
 pengine/test10/bundle-order-stop-clone.summary     |  8 +-
 pengine/test10/bundle-order-stop.summary           | 34 ++++-----
 pengine/test10/clone-anon-dup.summary              |  2 +-
 pengine/test10/clone-anon-failcount.summary        |  6 +-
 pengine/test10/clone-interleave-2.summary          |  4 +-
 pengine/test10/clone-interleave-3.summary          |  4 +-
 pengine/test10/clone-max-zero.summary              | 12 +--
 pengine/test10/clone-require-all-2.summary         |  8 +-
 pengine/test10/clone-require-all-3.summary         |  8 +-
 pengine/test10/clone-require-all-4.summary         |  2 +-
 pengine/test10/clone-require-all-6.summary         |  4 +-
 .../test10/clone_min_interleave_start_one.summary  | 12 +--
 .../test10/clone_min_interleave_stop_one.summary   |  2 +-
 .../test10/clone_min_interleave_stop_two.summary   | 16 ++--
 pengine/test10/clone_min_start_one.summary         |  2 +-
 pengine/test10/clone_min_stop_all.summary          |  8 +-
 pengine/test10/clone_min_stop_one.summary          |  2 +-
 pengine/test10/clone_min_stop_two.summary          |  6 +-
 pengine/test10/cloned-group-stop.summary           | 32 ++++----
 pengine/test10/cloned-group.summary                |  6 +-
 pengine/test10/cloned_start_one.summary            |  4 +-
 pengine/test10/cloned_start_two.summary            |  2 +-
 pengine/test10/cloned_stop_one.summary             |  4 +-
 pengine/test10/cloned_stop_two.summary             |  8 +-
 .../colocation_constraint_stops_slave.summary      |  2 +-
 pengine/test10/complex_enforce_colo.summary        | 70 ++++++++---------
 pengine/test10/container-2.summary                 |  2 +-
 pengine/test10/container-3.summary                 |  2 +-
 pengine/test10/container-group-2.summary           |  2 +-
 pengine/test10/enforce-colo1.summary               |  8 +-
 pengine/test10/group-fail.summary                  |  4 +-
 pengine/test10/group-unmanaged-stopped.summary     |  2 +-
 pengine/test10/group10.summary                     |  4 +-
 pengine/test10/group11.summary                     |  4 +-
 pengine/test10/group13.summary                     |  2 +-
 pengine/test10/group14.summary                     | 32 ++++----
 pengine/test10/group9.summary                      |  2 +-
 pengine/test10/inc10.summary                       |  4 +-
 pengine/test10/inc12.summary                       | 36 ++++-----
 pengine/test10/inc2.summary                        |  2 +-
 pengine/test10/inc3.summary                        |  2 +-
 pengine/test10/inc4.summary                        |  2 +-
 pengine/test10/inc6.summary                        |  4 +-
 pengine/test10/inc9.summary                        |  6 +-
 pengine/test10/interleave-pseudo-stop.summary      |  8 +-
 pengine/test10/interleave-restart.summary          |  4 +-
 pengine/test10/interleave-stop.summary             |  8 +-
 pengine/test10/master-7.summary                    |  4 +-
 pengine/test10/master-8.summary                    |  2 +-
 pengine/test10/master-9.summary                    | 24 +++---
 pengine/test10/master-asymmetrical-order.summary   |  2 +-
 pengine/test10/master-failed-demote-2.summary      |  2 +-
 pengine/test10/master-failed-demote.summary        |  2 +-
 pengine/test10/master-pseudo.summary               |  2 +-
 pengine/test10/master-stop.summary                 |  2 +-
 pengine/test10/migrate-5.summary                   |  2 +-
 pengine/test10/migrate-both-vms.summary            | 20 ++---
 pengine/test10/migrate-fencing.summary             |  4 +-
 pengine/test10/migrate-shutdown.summary            | 16 ++--
 pengine/test10/migrate-stop-complex.summary        |  4 +-
 pengine/test10/migrate-stop-start-complex.summary  |  2 +-
 pengine/test10/migrate-stop.summary                |  2 +-
 pengine/test10/monitor-recovery.summary            |  2 +-
 pengine/test10/notify-0.summary                    |  2 +-
 pengine/test10/notify-1.summary                    |  2 +-
 pengine/test10/notify-2.summary                    |  2 +-
 pengine/test10/notify-3.summary                    |  2 +-
 pengine/test10/novell-252693.summary               | 10 +--
 pengine/test10/one-or-more-1.summary               |  6 +-
 pengine/test10/one-or-more-3.summary               |  2 +-
 pengine/test10/one-or-more-6.summary               |  2 +-
 pengine/test10/one-or-more-7.summary               |  2 +-
 pengine/test10/order-mandatory.summary             |  4 +-
 pengine/test10/order-required.summary              |  4 +-
 pengine/test10/order-wrong-kind.summary            |  2 +-
 pengine/test10/order7.summary                      |  2 +-
 .../test10/order_constraint_stops_master.summary   |  4 +-
 .../test10/order_constraint_stops_slave.summary    |  4 +-
 pengine/test10/ordered-set-basic-startup.summary   |  6 +-
 pengine/test10/ordered-set-natural.summary         | 12 +--
 pengine/test10/probe-2.summary                     | 12 +--
 pengine/test10/quorum-2.summary                    |  2 +-
 pengine/test10/quorum-3.summary                    |  6 +-
 pengine/test10/rec-node-10.summary                 |  6 +-
 pengine/test10/rec-node-13.summary                 |  2 +-
 pengine/test10/rec-node-8.summary                  |  4 +-
 pengine/test10/rec-node-9.summary                  |  4 +-
 pengine/test10/rec-rsc-9.summary                   |  4 +-
 pengine/test10/remote-disable.summary              |  2 +-
 pengine/test10/remote-orphaned.summary             |  4 +-
 pengine/test10/remote-recover-all.summary          | 10 +--
 pengine/test10/remote-recover-connection.summary   |  4 +-
 pengine/test10/remote-recover-no-resources.summary |  8 +-
 pengine/test10/remote-recover-unknown.summary      | 10 +--
 pengine/test10/remote-recovery.summary             |  4 +-
 pengine/test10/rsc-sets-clone.summary              |  2 +-
 pengine/test10/stop-failure-no-quorum.summary      | 10 +--
 pengine/test10/stop-failure-with-fencing.summary   | 10 +--
 pengine/test10/ticket-clone-14.summary             |  4 +-
 pengine/test10/ticket-clone-15.summary             |  4 +-
 pengine/test10/ticket-clone-17.summary             |  4 +-
 pengine/test10/ticket-clone-18.summary             |  4 +-
 pengine/test10/ticket-clone-20.summary             |  4 +-
 pengine/test10/ticket-clone-21.summary             |  4 +-
 pengine/test10/ticket-clone-23.summary             |  4 +-
 pengine/test10/ticket-clone-3.summary              |  4 +-
 pengine/test10/ticket-clone-6.summary              |  4 +-
 pengine/test10/ticket-clone-9.summary              |  4 +-
 pengine/test10/ticket-group-14.summary             |  4 +-
 pengine/test10/ticket-group-15.summary             |  4 +-
 pengine/test10/ticket-group-17.summary             |  4 +-
 pengine/test10/ticket-group-18.summary             |  4 +-
 pengine/test10/ticket-group-20.summary             |  4 +-
 pengine/test10/ticket-group-21.summary             |  4 +-
 pengine/test10/ticket-group-23.summary             |  4 +-
 pengine/test10/ticket-group-3.summary              |  4 +-
 pengine/test10/ticket-group-6.summary              |  4 +-
 pengine/test10/ticket-group-9.summary              |  4 +-
 pengine/test10/ticket-master-14.summary            |  2 +-
 pengine/test10/ticket-master-15.summary            |  2 +-
 pengine/test10/ticket-master-3.summary             |  2 +-
 pengine/test10/ticket-rsc-sets-10.summary          |  8 +-
 pengine/test10/ticket-rsc-sets-12.summary          |  4 +-
 pengine/test10/ticket-rsc-sets-13.summary          |  8 +-
 pengine/test10/ticket-rsc-sets-14.summary          |  8 +-
 pengine/test10/ticket-rsc-sets-3.summary           |  8 +-
 pengine/test10/ticket-rsc-sets-7.summary           |  8 +-
 pengine/test10/ticket-rsc-sets-9.summary           |  8 +-
 pengine/test10/unfence-definition.summary          |  4 +-
 pengine/test10/unfence-parameters.summary          |  6 +-
 pengine/test10/unmanaged-block-restart.summary     |  4 +-
 pengine/test10/unmanaged-stop-1.summary            |  2 +-
 pengine/test10/unmanaged-stop-2.summary            |  2 +-
 pengine/test10/unmanaged-stop-3.summary            |  2 +-
 pengine/test10/unmanaged-stop-4.summary            |  2 +-
 pengine/test10/unrunnable-1.summary                | 18 ++---
 pengine/test10/unrunnable-2.summary                |  2 +-
 pengine/test10/utilization-order2.summary          |  2 +-
 pengine/test10/utilization-order4.summary          |  8 +-
 pengine/test10/whitebox-fail1.summary              |  2 +-
 .../test10/whitebox-imply-stop-on-fence.summary    |  6 +-
 pengine/test10/whitebox-move.summary               |  4 +-
 pengine/test10/whitebox-ms-ordering-move.summary   |  2 +-
 pengine/test10/whitebox-orphan-ms.summary          |  8 +-
 pengine/test10/whitebox-orphaned.summary           |  6 +-
 pengine/test10/whitebox-stop.summary               |  6 +-
 197 files changed, 704 insertions(+), 633 deletions(-)

diff --git a/include/crm/pengine/internal.h b/include/crm/pengine/internal.h
index 99e2055..5db90aa 100644
--- a/include/crm/pengine/internal.h
+++ b/include/crm/pengine/internal.h
@@ -277,8 +277,11 @@ action_t *pe_fence_op(node_t * node, const char *op, bool optional, const char *
 void trigger_unfencing(
     resource_t * rsc, node_t *node, const char *reason, action_t *dependency, pe_working_set_t * data_set);
 
-void pe_action_required_worker(pe_action_t *action, const char *reason, const char *function, long line);
-#define pe_action_required(action, reason) pe_action_required_worker(action, reason, __FUNCTION__, __LINE__)
+void pe_action_set_reason(pe_action_t *action, const char *reason, bool overwrite);
+void pe_action_set_flag_reason(const char *function, long line, pe_action_t *action, pe_action_t *reason, const char *text, enum pe_action_flags flags, bool overwrite);
+
+#define pe_action_required(action, reason, text) pe_action_set_flag_reason(__FUNCTION__, __LINE__, action, reason, text, pe_action_optional, FALSE)
+#define pe_action_implies(action, reason, flag) pe_action_set_flag_reason(__FUNCTION__, __LINE__, action, reason, NULL, flag, FALSE)
 
 void set_bit_recursive(resource_t * rsc, unsigned long long flag);
 void clear_bit_recursive(resource_t * rsc, unsigned long long flag);
diff --git a/lib/pengine/utils.c b/lib/pengine/utils.c
index a53be6a..bc34323 100644
--- a/lib/pengine/utils.c
+++ b/lib/pengine/utils.c
@@ -500,7 +503,7 @@ custom_action(resource_t * rsc, char *key, const char *task,
 
         } else if (action->node == NULL) {
             pe_rsc_trace(rsc, "Unset runnable on %s", action->uuid);
-            pe_clear_action_bit(action, pe_action_runnable);
+            pe_action_set_flag_reason(__FUNCTION__, __LINE__, action, NULL, "node availability", pe_action_runnable, TRUE);
 
         } else if (is_not_set(rsc->flags, pe_rsc_managed)
                    && g_hash_table_lookup(action->meta, XML_LRM_ATTR_INTERVAL) == NULL) {
@@ -527,6 +530,7 @@ custom_action(resource_t * rsc, char *key, const char *task,
 
         } else if (action->needs == rsc_req_nothing) {
             pe_rsc_trace(rsc, "Action %s does not require anything", action->uuid);
+            free(action->reason); action->reason = NULL;
             pe_set_action_bit(action, pe_action_runnable);
 #if 0
             /*
@@ -540,20 +543,21 @@ custom_action(resource_t * rsc, char *key, const char *task,
 #endif
         } else if (is_set(data_set->flags, pe_flag_have_quorum) == FALSE
                    && data_set->no_quorum_policy == no_quorum_stop) {
-            pe_clear_action_bit(action, pe_action_runnable);
+            pe_action_set_flag_reason(__FUNCTION__, __LINE__, action, NULL, "no quorum", pe_action_runnable, TRUE);
             crm_debug("%s\t%s (cancelled : quorum)", action->node->details->uname, action->uuid);
 
         } else if (is_set(data_set->flags, pe_flag_have_quorum) == FALSE
                    && data_set->no_quorum_policy == no_quorum_freeze) {
             pe_rsc_trace(rsc, "Check resource is already active: %s %s %s %s", rsc->id, action->uuid, role2text(rsc->next_role), role2text(rsc->role));
             if (rsc->fns->active(rsc, TRUE) == FALSE || rsc->next_role > rsc->role) {
-                pe_clear_action_bit(action, pe_action_runnable);
+                pe_action_set_flag_reason(__FUNCTION__, __LINE__, action, NULL, "quorum freeze", pe_action_runnable, TRUE);
                 pe_rsc_debug(rsc, "%s\t%s (cancelled : quorum freeze)",
                              action->node->details->uname, action->uuid);
             }
 
         } else {
             pe_rsc_trace(rsc, "Action %s is runnable", action->uuid);
+            free(action->reason); action->reason = NULL;
             pe_set_action_bit(action, pe_action_runnable);
         }
 
@@ -1880,7 +1882,7 @@ rsc_action_digest(resource_t * rsc, const char *task, const char *key,
             data->digest_secure_calc = calculate_operation_digest(data->params_secure, op_version);
         }
 
-        if(crm_element_value(xml_op, XML_LRM_ATTR_RESTART_DIGEST) != NULL) {
+        if(xml_op && crm_element_value(xml_op, XML_LRM_ATTR_RESTART_DIGEST) != NULL) {
             data->params_restart = copy_xml(data->params_all);
             if (restart_list) {
                 filter_parameters(data->params_restart, restart_list, TRUE);
@@ -2108,7 +2110,7 @@ pe_fence_op(node_t * node, const char *op, bool optional, const char *reason, pe
     }
 
     if(optional == FALSE && pe_can_fence(data_set, node)) {
-        pe_action_required(stonith_op, reason);
+        pe_action_required(stonith_op, NULL, reason);
     } else if(reason && stonith_op->reason == NULL) {
         stonith_op->reason = strdup(reason);
     }
@@ -2187,12 +2189,73 @@ add_tag_ref(GHashTable * tags, const char * tag_name,  const char * obj_ref)
     return TRUE;
 }
 
-void pe_action_required_worker(pe_action_t *action, const char *reason, const char *function, long line) 
+void pe_action_set_flag_reason(const char *function, long line,
+                               pe_action_t *action, pe_action_t *reason, const char *text,
+                               enum pe_action_flags flags, bool overwrite)
+{
+    bool unset = FALSE;
+    bool update = FALSE;
+    const char *change = NULL;
+
+    if(is_set(flags, pe_action_runnable)) {
+        unset = TRUE;
+        change = "unrunnable";
+    } else if(is_set(flags, pe_action_optional)) {
+        unset = TRUE;
+        change = "required";
+    } else if(is_set(flags, pe_action_failure_is_fatal)) {
+        change = "fatally failed";
+    } else if(is_set(flags, pe_action_migrate_runnable)) {
+        unset = TRUE;
+        overwrite = TRUE;
+        change = "unrunnable";
+    } else if(is_set(flags, pe_action_dangle)) {
+        change = "dangling";
+    } else if(is_set(flags, pe_action_requires_any)) {
+        change = "required";
+    } else {
+        crm_err("Unknown flag change to %s by %s: 0x%.16x", flags, action->uuid, reason->uuid);
+    }
+
+    if(unset) {
+        if(is_set(action->flags, flags)) {
+            action->flags = crm_clear_bit(function, line, action->uuid, action->flags, flags);
+            update = TRUE;
+        }
+
+    } else {
+        if(is_not_set(action->flags, flags)) {
+            action->flags = crm_set_bit(function, line, action->uuid, action->flags, flags);
+            update = TRUE;
+        }
+    }
+
+    if((change && update) || text) {
+        char *reason_text = NULL;
+        if(reason == NULL) {
+            pe_action_set_reason(action, text, overwrite);
+
+        } else if(reason->rsc == NULL) {
+            reason_text = crm_strdup_printf("%s %s%c %s", change, reason->task, text?':':0, text?text:"");
+        } else {
+            reason_text = crm_strdup_printf("%s %s %s%c %s", change, reason->rsc->id, reason->task, text?':':0, text?text:"NA");
+        }
+
+        if(reason_text && action->rsc != reason->rsc) {
+            pe_action_set_reason(action, reason_text, overwrite);
+        }
+        free(reason_text);
+    }
+ }
+
+void pe_action_set_reason(pe_action_t *action, const char *reason, bool overwrite) 
 {
-    if(is_set(action->flags, pe_action_optional)) {
-        action->flags = crm_clear_bit(function, line, action->uuid, action->flags, pe_action_optional);
-        if(action->reason == NULL) {
+    if(action->reason == NULL || overwrite) {
+        free(action->reason);
+        if(reason) {
             action->reason = strdup(reason);
+        } else {
+            action->reason = NULL;
         }
     }
 }
diff --git a/pengine/native.c b/pengine/native.c
index 16c9d5a..63666fd 100644
--- a/pengine/native.c
+++ b/pengine/native.c
@@ -1886,8 +1886,9 @@ native_update_actions(action_t * first, action_t * then, node_t * node, enum pe_
         } else if (!(first->flags & pe_action_runnable)) {
             /* prevent 'then' action from happening if 'first' is not runnable and
              * 'then' has not yet occurred. */
-            pe_clear_action_bit(then, pe_action_runnable);
-            pe_clear_action_bit(then, pe_action_optional);
+            pe_action_implies(then, first, pe_action_optional);
+            pe_action_implies(then, first, pe_action_runnable);
+
             pe_rsc_trace(then->rsc, "Unset optional and runnable on %s", then->uuid);
         } else {
             /* ignore... then is allowed to start/stop if it wants to. */
@@ -1895,10 +1896,10 @@ native_update_actions(action_t * first, action_t * then, node_t * node, enum pe_
     }
 
     if (type & pe_order_implies_first) {
-        if ((filter & pe_action_optional) && (flags & pe_action_optional) == 0) {
+        if (is_set(filter, pe_action_optional) && is_not_set(flags /* Should be then_flags? */, pe_action_optional)) {
+            // Needs is_set(first_flags, pe_action_optional) too?
             pe_rsc_trace(first->rsc, "Unset optional on %s because of %s", first->uuid, then->uuid);
-
-            pe_clear_action_bit(first, pe_action_optional);
+            pe_action_implies(first, then, pe_action_optional);
         }
 
         if (is_set(flags, pe_action_migrate_runnable) &&
@@ -1907,7 +1908,7 @@ native_update_actions(action_t * first, action_t * then, node_t * node, enum pe_
 
             pe_rsc_trace(first->rsc, "Unset migrate runnable on %s because of %s",
                          first->uuid, then->uuid);
-            pe_clear_action_bit(first, pe_action_migrate_runnable);
+            pe_action_implies(first, then, pe_action_migrate_runnable);
         }
     }
 
@@ -1915,13 +1916,13 @@ native_update_actions(action_t * first, action_t * then, node_t * node, enum pe_
         if ((filter & pe_action_optional) &&
             ((then->flags & pe_action_optional) == FALSE) &&
             then->rsc && (then->rsc->role == RSC_ROLE_MASTER)) {
-            pe_clear_action_bit(first, pe_action_optional);
+            pe_action_implies(first, then, pe_action_optional);
 
             if (is_set(first->flags, pe_action_migrate_runnable) &&
                 is_set(then->flags, pe_action_migrate_runnable) == FALSE) {
 
                 pe_rsc_trace(first->rsc, "Unset migrate runnable on %s because of %s", first->uuid, then->uuid);
-                pe_clear_action_bit(first, pe_action_migrate_runnable);
+                pe_action_implies(first, then, pe_action_migrate_runnable);
             }
             pe_rsc_trace(then->rsc, "Unset optional on %s because of %s", first->uuid, then->uuid);
         }
@@ -1934,13 +1935,12 @@ native_update_actions(action_t * first, action_t * then, node_t * node, enum pe_
             ((then->flags & pe_action_runnable) == FALSE)) {
 
             pe_rsc_trace(then->rsc, "Unset runnable on %s because %s is neither runnable or migratable", first->uuid, then->uuid);
-            pe_clear_action_bit(first, pe_action_runnable);
+            pe_action_implies(first, then, pe_action_runnable);
         }
 
         if ((then->flags & pe_action_optional) == 0) {
-
             pe_rsc_trace(then->rsc, "Unset optional on %s because %s is not optional", first->uuid, then->uuid);
-            pe_clear_action_bit(first, pe_action_optional);
+            pe_action_implies(first, then, pe_action_optional);
         }
     }
 
@@ -1948,7 +1948,7 @@ native_update_actions(action_t * first, action_t * then, node_t * node, enum pe_
         && is_set(filter, pe_action_optional)) {
 
         if ((first->flags & pe_action_runnable) == FALSE) {
-            pe_clear_action_bit(then, pe_action_migrate_runnable);
+            pe_action_implies(then, first, pe_action_migrate_runnable);
             pe_clear_action_bit(then, pe_action_pseudo);
             pe_rsc_trace(then->rsc, "Unset pseudo on %s because %s is not runnable", then->uuid, first->uuid);
         }
@@ -1960,8 +1960,8 @@ native_update_actions(action_t * first, action_t * then, node_t * node, enum pe_
         && is_set(then->flags, pe_action_runnable)
         && is_set(flags, pe_action_runnable) == FALSE) {
         pe_rsc_trace(then->rsc, "Unset runnable on %s because of %s", then->uuid, first->uuid);
-        pe_clear_action_bit(then, pe_action_runnable);
-        pe_clear_action_bit(then, pe_action_migrate_runnable);
+        pe_action_implies(then, first, pe_action_runnable);
+        pe_action_implies(then, first, pe_action_migrate_runnable);
     }
 
     if (is_set(type, pe_order_implies_then)
@@ -1972,7 +1972,7 @@ native_update_actions(action_t * first, action_t * then, node_t * node, enum pe_
         /* in this case, treat migrate_runnable as if first is optional */
         if (is_set(first->flags, pe_action_migrate_runnable) == FALSE) {
            pe_rsc_trace(then->rsc, "Unset optional on %s because of %s", then->uuid, first->uuid);
-           pe_clear_action_bit(then, pe_action_optional);
+           pe_action_implies(then, first, pe_action_optional);
         }
     }
 
@@ -1996,14 +1996,14 @@ native_update_actions(action_t * first, action_t * then, node_t * node, enum pe_
             if (is_set(first->flags, pe_action_runnable)
                 || is_not_set(then->flags, pe_action_optional)) {
                 pe_rsc_trace(first->rsc, "Handling %s: %s -> %s", reason, first->uuid, then->uuid);
-                pe_clear_action_bit(first, pe_action_optional);
+                pe_action_implies(first, then, pe_action_optional);
             }
         }
 
         if (reason && is_not_set(first->flags, pe_action_optional)
             && is_not_set(first->flags, pe_action_runnable)) {
             pe_rsc_trace(then->rsc, "Handling %s: %s -> %s", reason, first->uuid, then->uuid);
-            pe_clear_action_bit(then, pe_action_runnable);
+            pe_action_implies(then, first, pe_action_runnable);
         }
 
         if (reason &&
@@ -2011,7 +2011,7 @@ native_update_actions(action_t * first, action_t * then, node_t * node, enum pe_
             is_set(first->flags, pe_action_migrate_runnable)  &&
             is_not_set(then->flags, pe_action_migrate_runnable)) {
 
-            pe_clear_action_bit(first, pe_action_migrate_runnable);
+            pe_action_implies(first, then, pe_action_migrate_runnable);
         }
 
     }
@@ -2090,6 +2090,7 @@ native_rsc_location(resource_t * rsc, rsc_to_node_t * constraint)
         } else {
             other_node = node_copy(node);
 
+            pe_rsc_trace(rsc, "%s: %d (insert %d)", other_node->details->uname, other_node->weight, constraint->discover_mode);
             g_hash_table_insert(rsc->allowed_nodes, (gpointer) other_node->details->id, other_node);
         }
 
@@ -2130,12 +2131,16 @@ native_expand(resource_t * rsc, pe_working_set_t * data_set)
     }
 }
 
-#define log_change(fmt, args...)  do {          \
-        if(terminal) {                          \
-            printf(" * "fmt"\n", ##args);       \
-        } else {                                \
-            crm_notice(fmt, ##args);            \
-        }                                       \
+#define log_change(a, fmt, args...)  do {                         \
+        if(a && a->reason && terminal) {                          \
+            printf(" * "fmt" \tdue to %s\n", ##args, a->reason);    \
+        } else if(a && a->reason) {                               \
+            crm_notice(fmt" \tdue to %s", ##args, a->reason);       \
+        } else if(terminal) {                                     \
+            printf(" * "fmt"\n", ##args);                         \
+        } else {                                                  \
+            crm_notice(fmt, ##args);                              \
+        }                                                         \
     } while(0)
 
 #define STOP_SANITY_ASSERT(lineno) do {                                 \
@@ -2264,34 +2269,34 @@ LogActions(resource_t * rsc, pe_working_set_t * data_set, gboolean terminal)
         CRM_CHECK(next != NULL,);
         if (next == NULL) {
         } else if (migrate_to && is_set(migrate_to->flags, pe_action_runnable) && current) {
-            log_change("Migrate %s\t(%s %s -> %s)",
+            log_change(start, "Migrate %s\t(%s %s -> %s)",
                        rsc->id, role2text(rsc->role), current->details->uname,
                        next->details->uname);
 
         } else if (is_set(rsc->flags, pe_rsc_reload)) {
-            log_change("Reload  %s\t(%s %s)", rsc->id, role2text(rsc->role), next->details->uname);
+            log_change(start, "Reload  %s\t(%s %s)", rsc->id, role2text(rsc->role), next->details->uname);
 
         } else if (start == NULL || is_set(start->flags, pe_action_optional)) {
             pe_rsc_info(rsc, "Leave   %s\t(%s %s)", rsc->id, role2text(rsc->role),
                         next->details->uname);
 
         } else if (start && is_set(start->flags, pe_action_runnable) == FALSE) {
-            log_change("Stop    %s\t(%s %s%s)", rsc->id, role2text(rsc->role), current?current->details->uname:"N/A",
+            log_change(start, "Stop    %s\t(%s %s%s)", rsc->id, role2text(rsc->role), current?current->details->uname:"N/A",
                        stop && is_not_set(stop->flags, pe_action_runnable) ? " - blocked" : "");
             STOP_SANITY_ASSERT(__LINE__);
 
         } else if (moving && current) {
-            log_change("%s %s\t(%s %s -> %s)",
+            log_change(stop, "%s %s\t(%s %s -> %s)",
                        is_set(rsc->flags, pe_rsc_failed) ? "Recover" : "Move   ",
                        rsc->id, role2text(rsc->role),
                        current->details->uname, next->details->uname);
 
         } else if (is_set(rsc->flags, pe_rsc_failed)) {
-            log_change("Recover %s\t(%s %s)", rsc->id, role2text(rsc->role), next->details->uname);
+            log_change(stop, "Recover %s\t(%s %s)", rsc->id, role2text(rsc->role), next->details->uname);
             STOP_SANITY_ASSERT(__LINE__);
 
         } else {
-            log_change("Restart %s\t(%s %s)", rsc->id, role2text(rsc->role), next->details->uname);
+            log_change(start, "Restart %s\t(%s %s)", rsc->id, role2text(rsc->role), next->details->uname);
             /* STOP_SANITY_ASSERT(__LINE__); False positive for migrate-fail-7 */
         }
 
@@ -2308,7 +2313,7 @@ LogActions(resource_t * rsc, pe_working_set_t * data_set, gboolean terminal)
                 allowed = TRUE;
             }
 
-            log_change("Demote  %s\t(%s -> %s %s%s)",
+            log_change(demote, "Demote  %s\t(%s -> %s %s%s)",
                        rsc->id,
                        role2text(rsc->role),
                        role2text(rsc->next_role),
@@ -2317,16 +2322,16 @@ LogActions(resource_t * rsc, pe_working_set_t * data_set, gboolean terminal)
             if (stop != NULL && is_not_set(stop->flags, pe_action_optional)
                 && rsc->next_role > RSC_ROLE_STOPPED && moving == FALSE) {
                 if (is_set(rsc->flags, pe_rsc_failed)) {
-                    log_change("Recover %s\t(%s %s)",
+                    log_change(stop, "Recover %s\t(%s %s)",
                                rsc->id, role2text(rsc->role), next->details->uname);
                     STOP_SANITY_ASSERT(__LINE__);
 
                 } else if (is_set(rsc->flags, pe_rsc_reload)) {
-                    log_change("Reload  %s\t(%s %s)", rsc->id, role2text(rsc->role),
+                    log_change(start, "Reload  %s\t(%s %s)", rsc->id, role2text(rsc->role),
                                next->details->uname);
 
                 } else {
-                    log_change("Restart %s\t(%s %s)",
+                    log_change(start, "Restart %s\t(%s %s)",
                                rsc->id, role2text(rsc->next_role), next->details->uname);
                     STOP_SANITY_ASSERT(__LINE__);
                 }
@@ -2355,15 +2360,15 @@ LogActions(resource_t * rsc, pe_working_set_t * data_set, gboolean terminal)
                 allowed = TRUE;
             }
 
-            log_change("Stop    %s\t(%s%s)", rsc->id, node->details->uname,
-                       allowed ? "" : " - blocked");
+            log_change(start, "Stop    %s\t(%s%s) %s", rsc->id, node->details->uname,
+                       allowed ? "" : " - blocked", stop->reason?stop->reason:"");
         }
 
         free(key);
     }
 
     if (moving) {
-        log_change("Move    %s\t(%s %s -> %s)",
+        log_change(stop, "Move    %s\t(%s %s -> %s)",
                    rsc->id, role2text(rsc->next_role), current->details->uname,
                    next->details->uname);
         STOP_SANITY_ASSERT(__LINE__);
@@ -2378,7 +2383,7 @@ LogActions(resource_t * rsc, pe_working_set_t * data_set, gboolean terminal)
 
         CRM_CHECK(next != NULL,);
         if (next != NULL) {
-            log_change("Start   %s\t(%s%s)", rsc->id, next->details->uname,
+            log_change(start, "Start   %s\t(%s%s)", rsc->id, next->details->uname,
                        allowed ? "" : " - blocked");
         }
         if (allowed == FALSE) {
@@ -2393,17 +2398,17 @@ LogActions(resource_t * rsc, pe_working_set_t * data_set, gboolean terminal)
         if (stop != NULL && is_not_set(stop->flags, pe_action_optional)
             && rsc->role > RSC_ROLE_STOPPED) {
             if (is_set(rsc->flags, pe_rsc_failed)) {
-                log_change("Recover %s\t(%s %s)",
+                log_change(stop, "Recover %s\t(%s %s)",
                            rsc->id, role2text(rsc->role), next?next->details->uname:NULL);
                 STOP_SANITY_ASSERT(__LINE__);
 
             } else if (is_set(rsc->flags, pe_rsc_reload)) {
-                log_change("Reload  %s\t(%s %s)", rsc->id, role2text(rsc->role),
+                log_change(start, "Reload  %s\t(%s %s)", rsc->id, role2text(rsc->role),
                            next?next->details->uname:NULL);
                 STOP_SANITY_ASSERT(__LINE__);
 
             } else {
-                log_change("Restart %s\t(%s %s)",
+                log_change(start, "Restart %s\t(%s %s)",
                            rsc->id, role2text(rsc->role), next?next->details->uname:NULL);
                 STOP_SANITY_ASSERT(__LINE__);
             }
@@ -2413,7 +2418,7 @@ LogActions(resource_t * rsc, pe_working_set_t * data_set, gboolean terminal)
             allowed = TRUE;
         }
 
-        log_change("Promote %s\t(%s -> %s %s%s)",
+        log_change(promote, "Promote %s\t(%s -> %s %s%s)",
                    rsc->id,
                    role2text(rsc->role),
                    role2text(rsc->next_role),
diff --git a/pengine/test10/10-a-then-bm-b-move-a-clone.summary b/pengine/test10/10-a-then-bm-b-move-a-clone.summary
index 07b4d2b..b39963f 100644
--- a/pengine/test10/10-a-then-bm-b-move-a-clone.summary
+++ b/pengine/test10/10-a-then-bm-b-move-a-clone.summary
@@ -8,7 +8,7 @@ Online: [ f20node2 ]
  vm	(ocf::heartbeat:Dummy):	Started f20node1 
 
 Transition Summary:
- * Stop    myclone:1	(f20node1)
+ * Stop    myclone:1	(f20node1)  	due to node availability
  * Migrate vm	(Started f20node1 -> f20node2)
 
 Executing cluster transition:
diff --git a/pengine/test10/11-a-then-bm-b-move-a-clone-starting.summary b/pengine/test10/11-a-then-bm-b-move-a-clone-starting.summary
index 4b8e1d0..498cd2b 100644
--- a/pengine/test10/11-a-then-bm-b-move-a-clone-starting.summary
+++ b/pengine/test10/11-a-then-bm-b-move-a-clone-starting.summary
@@ -10,7 +10,7 @@ Online: [ f20node2 ]
 
 Transition Summary:
  * Move    myclone:0	(Started f20node1 -> f20node2)
- * Move    vm	(Started f20node1 -> f20node2)
+ * Move    vm	(Started f20node1 -> f20node2) 	due to unrunnable myclone-clone stop
 
 Executing cluster transition:
  * Resource action: myclone         monitor on f20node2
diff --git a/pengine/test10/1484.summary b/pengine/test10/1484.summary
index 52cfebe..4b5d8a6 100644
--- a/pengine/test10/1484.summary
+++ b/pengine/test10/1484.summary
@@ -6,7 +6,7 @@ OFFLINE: [ hb3 ]
  the-future-of-vaj	(ocf::heartbeat:Dummy):	FAILED hb2 
 
 Transition Summary:
- * Stop    the-future-of-vaj	(hb2)
+ * Stop    the-future-of-vaj	(hb2)  	due to node availability
 
 Executing cluster transition:
  * Resource action: the-future-of-vaj stop on hb2
diff --git a/pengine/test10/1494.summary b/pengine/test10/1494.summary
index 29c3cd6..be13fdd 100644
--- a/pengine/test10/1494.summary
+++ b/pengine/test10/1494.summary
@@ -8,7 +8,7 @@ OFFLINE: [ hb3 ]
      ima_rscid:1	(ocf::heartbeat:Dummy):	Started hb2
 
 Transition Summary:
- * Stop    ima_rscid:0	(hb1)
+ * Stop    ima_rscid:0	(hb1)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   ima_cloneid_stop_0
diff --git a/pengine/test10/5-am-then-bm-a-not-migratable.summary b/pengine/test10/5-am-then-bm-a-not-migratable.summary
index bc73910..7e95dbb 100644
--- a/pengine/test10/5-am-then-bm-a-not-migratable.summary
+++ b/pengine/test10/5-am-then-bm-a-not-migratable.summary
@@ -7,7 +7,7 @@ Online: [ 18node1 18node2 18node3 ]
 
 Transition Summary:
  * Move    A	(Started 18node1 -> 18node2)
- * Move    B	(Started 18node2 -> 18node1)
+ * Move    B	(Started 18node2 -> 18node1) 	due to unrunnable A stop
 
 Executing cluster transition:
  * Resource action: B               stop on 18node2
diff --git a/pengine/test10/594.summary b/pengine/test10/594.summary
index 44ed113..de1d179 100644
--- a/pengine/test10/594.summary
+++ b/pengine/test10/594.summary
@@ -17,8 +17,8 @@ Transition Summary:
  * Fence (reboot) hadev3 'peer is no longer part of the cluster'
  * Move    DcIPaddr	(Started hadev2 -> hadev1)
  * Move    rsc_hadev2	(Started hadev2 -> hadev1)
- * Stop    child_DoFencing:0	(hadev2)
- * Stop    child_DoFencing:2	(hadev1)
+ * Stop    child_DoFencing:0	(hadev2)  	due to node availability
+ * Stop    child_DoFencing:2	(hadev1)  	due to node availability
 
 Executing cluster transition:
  * Resource action: DcIPaddr        monitor on hadev1
diff --git a/pengine/test10/662.summary b/pengine/test10/662.summary
index 1726f35..4a9d911 100644
--- a/pengine/test10/662.summary
+++ b/pengine/test10/662.summary
@@ -16,7 +16,7 @@ Online: [ c001n02 c001n03 c001n04 c001n09 ]
 Transition Summary:
  * Shutdown c001n02
  * Move    rsc_c001n02	(Started c001n02 -> c001n03)
- * Stop    child_DoFencing:0	(c001n02)
+ * Stop    child_DoFencing:0	(c001n02)  	due to node availability
 
 Executing cluster transition:
  * Resource action: DcIPaddr        monitor on c001n04
diff --git a/pengine/test10/7-migrate-group-one-unmigratable.summary b/pengine/test10/7-migrate-group-one-unmigratable.summary
index ab9bcd9..cf1b370 100644
--- a/pengine/test10/7-migrate-group-one-unmigratable.summary
+++ b/pengine/test10/7-migrate-group-one-unmigratable.summary
@@ -10,7 +10,7 @@ Online: [ 18node1 18node2 18node3 ]
 Transition Summary:
  * Migrate A	(Started 18node1 -> 18node2)
  * Move    B	(Started 18node1 -> 18node2)
- * Move    C	(Started 18node1 -> 18node2)
+ * Move    C	(Started 18node1 -> 18node2) 	due to unrunnable B stop
 
 Executing cluster transition:
  * Pseudo action:   thegroup_stop_0
diff --git a/pengine/test10/764.summary b/pengine/test10/764.summary
index 2d43eae..0d5c612 100644
--- a/pengine/test10/764.summary
+++ b/pengine/test10/764.summary
@@ -15,11 +15,11 @@ OFFLINE: [ posic042 posic044 ]
      child_DoFencing:3	(stonith:ssh):	Stopped 
 
 Transition Summary:
- * Stop    DcIPaddr	(Started posic043)
- * Stop    rsc_posic041	(Started posic041)
- * Stop    rsc_posic042	(Started posic041)
- * Stop    rsc_posic043	(Started posic043)
- * Stop    rsc_posic044	(Started posic041)
+ * Stop    DcIPaddr	(Started posic043) 	due to no quorum
+ * Stop    rsc_posic041	(Started posic041) 	due to no quorum
+ * Stop    rsc_posic042	(Started posic041) 	due to no quorum
+ * Stop    rsc_posic043	(Started posic043) 	due to no quorum
+ * Stop    rsc_posic044	(Started posic041) 	due to no quorum
 
 Executing cluster transition:
  * Resource action: DcIPaddr        monitor on posic041
diff --git a/pengine/test10/797.summary b/pengine/test10/797.summary
index 3184eae..9e94003 100644
--- a/pengine/test10/797.summary
+++ b/pengine/test10/797.summary
@@ -16,13 +16,13 @@ Online: [ c001n01 c001n02 c001n03 ]
 
 Transition Summary:
  * Shutdown c001n02
- * Stop    DcIPaddr	(Started c001n03)
- * Stop    rsc_c001n08	(Started c001n02)
- * Stop    rsc_c001n02	(Started c001n02)
- * Stop    rsc_c001n03	(Started c001n03)
- * Stop    rsc_c001n01	(Started c001n01)
+ * Stop    DcIPaddr	(Started c001n03) 	due to no quorum
+ * Stop    rsc_c001n08	(Started c001n02) 	due to no quorum
+ * Stop    rsc_c001n02	(Started c001n02) 	due to no quorum
+ * Stop    rsc_c001n03	(Started c001n03) 	due to no quorum
+ * Stop    rsc_c001n01	(Started c001n01) 	due to no quorum
  * Restart child_DoFencing:0	(Started c001n01)
- * Stop    child_DoFencing:1	(c001n02)
+ * Stop    child_DoFencing:1	(c001n02)  	due to node availability
 
 Executing cluster transition:
  * Resource action: DcIPaddr        monitor on c001n02
diff --git a/pengine/test10/829.summary b/pengine/test10/829.summary
index 9e66733..feca908 100644
--- a/pengine/test10/829.summary
+++ b/pengine/test10/829.summary
@@ -17,7 +17,7 @@ Online: [ c001n01 c001n03 c001n08 ]
 Transition Summary:
  * Fence (reboot) c001n02 'peer is no longer part of the cluster'
  * Move    rsc_c001n02	(Started c001n02 -> c001n01)
- * Stop    child_DoFencing:0	(c001n02)
+ * Stop    child_DoFencing:0	(c001n02)  	due to node availability
 
 Executing cluster transition:
  * Resource action: DcIPaddr        monitor on c001n03
diff --git a/pengine/test10/9-am-then-bm-b-migrating-a-stopping.summary b/pengine/test10/9-am-then-bm-b-migrating-a-stopping.summary
index 37d16be..44fc1a2 100644
--- a/pengine/test10/9-am-then-bm-b-migrating-a-stopping.summary
+++ b/pengine/test10/9-am-then-bm-b-migrating-a-stopping.summary
@@ -7,8 +7,8 @@ Online: [ 18node1 18node2 18node3 ]
  B	(ocf::heartbeat:Dummy):	Started 18node2 
 
 Transition Summary:
- * Stop    A	(18node1)
- * Stop    B	(Started 18node2)
+ * Stop    A	(18node1)  	due to node availability
+ * Stop    B	(Started 18node2) 	due to unrunnable A start
 
 Executing cluster transition:
  * Resource action: B               stop on 18node2
diff --git a/pengine/test10/994-2.summary b/pengine/test10/994-2.summary
index dc4b9d1..a1d477f 100644
--- a/pengine/test10/994-2.summary
+++ b/pengine/test10/994-2.summary
@@ -11,7 +11,7 @@ Online: [ paul ]
 
 Transition Summary:
  * Recover postfix_9	(Started paul)
- * Restart depends	(Started paul)
+ * Restart depends	(Started paul) 	due to required group_1 running
 
 Executing cluster transition:
  * Resource action: depends         stop on paul
diff --git a/pengine/test10/anti-colocation-order.summary b/pengine/test10/anti-colocation-order.summary
index 2447501..052043a 100644
--- a/pengine/test10/anti-colocation-order.summary
+++ b/pengine/test10/anti-colocation-order.summary
@@ -13,8 +13,8 @@ Online: [ node2 ]
 Transition Summary:
  * Move    rsc1	(Started node1 -> node2)
  * Move    rsc2	(Started node1 -> node2)
- * Stop    rsc3	(node2)
- * Stop    rsc4	(node2)
+ * Stop    rsc3	(node2)  	due to node availability
+ * Stop    rsc4	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group1_stop_0
diff --git a/pengine/test10/asymmetrical-order-move.summary b/pengine/test10/asymmetrical-order-move.summary
index a9c1d8f..503813c 100644
--- a/pengine/test10/asymmetrical-order-move.summary
+++ b/pengine/test10/asymmetrical-order-move.summary
@@ -9,7 +9,7 @@ Online: [ sle12sp2-1 sle12sp2-2 ]
  dummy2	(ocf::pacemaker:Dummy):	Started sle12sp2-1 
 
 Transition Summary:
- * Stop    dummy2	(Started sle12sp2-1)
+ * Stop    dummy2	(Started sle12sp2-1) 	due to unrunnable dummy1 start
 
 Executing cluster transition:
  * Resource action: dummy2          stop on sle12sp2-1
diff --git a/pengine/test10/bug-1572-1.summary b/pengine/test10/bug-1572-1.summary
index 6c37bb4..6a24614 100644
--- a/pengine/test10/bug-1572-1.summary
+++ b/pengine/test10/bug-1572-1.summary
@@ -12,11 +12,11 @@ Online: [ arc-dknightlx arc-tkincaidlx.wsicorp.com ]
 
 Transition Summary:
  * Shutdown arc-dknightlx
- * Stop    rsc_drbd_7788:0	(arc-dknightlx)
+ * Stop    rsc_drbd_7788:0	(arc-dknightlx)  	due to node availability
  * Restart rsc_drbd_7788:1	(Master arc-tkincaidlx.wsicorp.com)
- * Restart fs_mirror	(Started arc-tkincaidlx.wsicorp.com)
- * Restart pgsql_5555	(Started arc-tkincaidlx.wsicorp.com)
- * Restart IPaddr_147_81_84_133	(Started arc-tkincaidlx.wsicorp.com)
+ * Restart fs_mirror	(Started arc-tkincaidlx.wsicorp.com) 	due to required ms_drbd_7788 notified
+ * Restart pgsql_5555	(Started arc-tkincaidlx.wsicorp.com) 	due to required fs_mirror start
+ * Restart IPaddr_147_81_84_133	(Started arc-tkincaidlx.wsicorp.com) 	due to required pgsql_5555 start
 
 Executing cluster transition:
  * Pseudo action:   ms_drbd_7788_pre_notify_demote_0
diff --git a/pengine/test10/bug-1572-2.summary b/pengine/test10/bug-1572-2.summary
index a4235a7..96574cf 100644
--- a/pengine/test10/bug-1572-2.summary
+++ b/pengine/test10/bug-1572-2.summary
@@ -12,11 +12,11 @@ Online: [ arc-dknightlx arc-tkincaidlx.wsicorp.com ]
 
 Transition Summary:
  * Shutdown arc-dknightlx
- * Stop    rsc_drbd_7788:0	(arc-dknightlx)
+ * Stop    rsc_drbd_7788:0	(arc-dknightlx)  	due to node availability
  * Demote  rsc_drbd_7788:1	(Master -> Slave arc-tkincaidlx.wsicorp.com)
- * Stop    fs_mirror	(arc-tkincaidlx.wsicorp.com)
- * Stop    pgsql_5555	(arc-tkincaidlx.wsicorp.com)
- * Stop    IPaddr_147_81_84_133	(arc-tkincaidlx.wsicorp.com)
+ * Stop    fs_mirror	(arc-tkincaidlx.wsicorp.com)  	due to node availability
+ * Stop    pgsql_5555	(arc-tkincaidlx.wsicorp.com)  	due to node availability
+ * Stop    IPaddr_147_81_84_133	(arc-tkincaidlx.wsicorp.com)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   ms_drbd_7788_pre_notify_demote_0
diff --git a/pengine/test10/bug-1573.summary b/pengine/test10/bug-1573.summary
index 8fb2820..02d93a6 100644
--- a/pengine/test10/bug-1573.summary
+++ b/pengine/test10/bug-1573.summary
@@ -12,7 +12,7 @@ OFFLINE: [ xen-c ]
 
 Transition Summary:
  * Shutdown xen-b
- * Stop    IPaddr_192_168_1_102	(xen-b)
+ * Stop    IPaddr_192_168_1_102	(xen-b)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group_11_stop_0
diff --git a/pengine/test10/bug-1718.summary b/pengine/test10/bug-1718.summary
index 622a5a8..b539e4e 100644
--- a/pengine/test10/bug-1718.summary
+++ b/pengine/test10/bug-1718.summary
@@ -13,8 +13,8 @@ OFFLINE: [ defiant.ds9 warbird.ds9 ]
      resource_dummy	(ocf::heartbeat:Dummy):	Started ops.ds9
 
 Transition Summary:
- * Stop    resource_IP3	(Started ops.ds9)
- * Stop    resource_dummy	(Started ops.ds9)
+ * Stop    resource_IP3	(Started ops.ds9) 	due to unrunnable Web_Group running
+ * Stop    resource_dummy	(Started ops.ds9) 	due to required resource_IP3 start
 
 Executing cluster transition:
  * Pseudo action:   group_fUN_stop_0
diff --git a/pengine/test10/bug-5014-A-stop-B-started.summary b/pengine/test10/bug-5014-A-stop-B-started.summary
index 20af4ab..a00dfd7 100644
--- a/pengine/test10/bug-5014-A-stop-B-started.summary
+++ b/pengine/test10/bug-5014-A-stop-B-started.summary
@@ -7,7 +7,7 @@ Online: [ fc16-builder ]
  ClusterIP2	(ocf::heartbeat:IPaddr2):	Started fc16-builder
 
 Transition Summary:
- * Stop    ClusterIP	(fc16-builder)
+ * Stop    ClusterIP	(fc16-builder)  	due to node availability
 
 Executing cluster transition:
  * Resource action: ClusterIP       stop on fc16-builder
diff --git a/pengine/test10/bug-5014-A-stopped-B-stopped.summary b/pengine/test10/bug-5014-A-stopped-B-stopped.summary
index 970d81c..95e5b60 100644
--- a/pengine/test10/bug-5014-A-stopped-B-stopped.summary
+++ b/pengine/test10/bug-5014-A-stopped-B-stopped.summary
@@ -7,7 +7,7 @@ Online: [ fc16-builder ]
  ClusterIP2	(ocf::heartbeat:IPaddr2):	Stopped 
 
 Transition Summary:
- * Start   ClusterIP2	(fc16-builder - blocked)
+ * Start   ClusterIP2	(fc16-builder - blocked) 	due to unrunnable ClusterIP start
 
 Executing cluster transition:
  * Resource action: ClusterIP       monitor on fc16-builder
diff --git a/pengine/test10/bug-5014-CLONE-A-stop-B-started.summary b/pengine/test10/bug-5014-CLONE-A-stop-B-started.summary
index 5e9bec0..c3fb6d5 100644
--- a/pengine/test10/bug-5014-CLONE-A-stop-B-started.summary
+++ b/pengine/test10/bug-5014-CLONE-A-stop-B-started.summary
@@ -9,7 +9,7 @@ Online: [ fc16-builder ]
      Started: [ fc16-builder ]
 
 Transition Summary:
- * Stop    ClusterIP:0	(fc16-builder)
+ * Stop    ClusterIP:0	(fc16-builder)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   clone1_stop_0
diff --git a/pengine/test10/bug-5014-CthenAthenB-C-stopped.summary b/pengine/test10/bug-5014-CthenAthenB-C-stopped.summary
index 991e618..fe12fe6 100644
--- a/pengine/test10/bug-5014-CthenAthenB-C-stopped.summary
+++ b/pengine/test10/bug-5014-CthenAthenB-C-stopped.summary
@@ -8,8 +8,8 @@ Online: [ fc16-builder ]
  ClusterIP3	(ocf::heartbeat:IPaddr2):	Stopped ( disabled ) 
 
 Transition Summary:
- * Start   ClusterIP	(fc16-builder - blocked)
- * Start   ClusterIP2	(fc16-builder - blocked)
+ * Start   ClusterIP	(fc16-builder - blocked) 	due to unrunnable ClusterIP3 start
+ * Start   ClusterIP2	(fc16-builder - blocked) 	due to unrunnable ClusterIP start
 
 Executing cluster transition:
  * Resource action: ClusterIP       monitor on fc16-builder
diff --git a/pengine/test10/bug-5014-GROUP-A-stopped-B-started.summary b/pengine/test10/bug-5014-GROUP-A-stopped-B-started.summary
index 67df8d7..5ea35cb 100644
--- a/pengine/test10/bug-5014-GROUP-A-stopped-B-started.summary
+++ b/pengine/test10/bug-5014-GROUP-A-stopped-B-started.summary
@@ -9,7 +9,7 @@ Online: [ fc16-builder ]
      ClusterIP2	(ocf::heartbeat:IPaddr2):	Started fc16-builder
 
 Transition Summary:
- * Stop    ClusterIP	(fc16-builder)
+ * Stop    ClusterIP	(fc16-builder)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group1_stop_0
diff --git a/pengine/test10/bug-5014-GROUP-A-stopped-B-stopped.summary b/pengine/test10/bug-5014-GROUP-A-stopped-B-stopped.summary
index e5251a0..f9b6448 100644
--- a/pengine/test10/bug-5014-GROUP-A-stopped-B-stopped.summary
+++ b/pengine/test10/bug-5014-GROUP-A-stopped-B-stopped.summary
@@ -9,7 +9,7 @@ Online: [ fc16-builder ]
      ClusterIP2	(ocf::heartbeat:IPaddr2):	Stopped 
 
 Transition Summary:
- * Start   ClusterIP2	(fc16-builder - blocked)
+ * Start   ClusterIP2	(fc16-builder - blocked) 	due to unrunnable group1 running
 
 Executing cluster transition:
 
diff --git a/pengine/test10/bug-5014-ordered-set-symmetrical-false.summary b/pengine/test10/bug-5014-ordered-set-symmetrical-false.summary
index 4322db3..89b3416 100644
--- a/pengine/test10/bug-5014-ordered-set-symmetrical-false.summary
+++ b/pengine/test10/bug-5014-ordered-set-symmetrical-false.summary
@@ -9,7 +9,7 @@ OFFLINE: [ fc16-builder2 ]
  C	(ocf::pacemaker:Dummy):	Started fc16-builder ( disabled ) 
 
 Transition Summary:
- * Stop    C	(fc16-builder)
+ * Stop    C	(fc16-builder)  	due to node availability
 
 Executing cluster transition:
  * Resource action: C               stop on fc16-builder
diff --git a/pengine/test10/bug-5014-ordered-set-symmetrical-true.summary b/pengine/test10/bug-5014-ordered-set-symmetrical-true.summary
index af74ba6..7d94d60 100644
--- a/pengine/test10/bug-5014-ordered-set-symmetrical-true.summary
+++ b/pengine/test10/bug-5014-ordered-set-symmetrical-true.summary
@@ -9,8 +9,8 @@ OFFLINE: [ fc16-builder2 ]
  C	(ocf::pacemaker:Dummy):	Started fc16-builder ( disabled ) 
 
 Transition Summary:
- * Stop    A	(Started fc16-builder)
- * Stop    C	(fc16-builder)
+ * Stop    A	(Started fc16-builder) 	due to required C start
+ * Stop    C	(fc16-builder)  	due to node availability
 
 Executing cluster transition:
  * Resource action: A               stop on fc16-builder
diff --git a/pengine/test10/bug-5028-bottom.summary b/pengine/test10/bug-5028-bottom.summary
index b43ba4e..de24e29 100644
--- a/pengine/test10/bug-5028-bottom.summary
+++ b/pengine/test10/bug-5028-bottom.summary
@@ -8,7 +8,7 @@ Online: [ bl460g6a bl460g6b ]
 
 Transition Summary:
  * Shutdown bl460g6a
- * Stop    dummy02	(bl460g6a)
+ * Stop    dummy02	(bl460g6a)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   dummy-g_stop_0
diff --git a/pengine/test10/bug-5140-require-all-false.summary b/pengine/test10/bug-5140-require-all-false.summary
index e06e969..cf5193c 100644
--- a/pengine/test10/bug-5140-require-all-false.summary
+++ b/pengine/test10/bug-5140-require-all-false.summary
@@ -36,9 +36,9 @@ Node hex-3: OFFLINE (standby)
  cluster-md0	(ocf::heartbeat:Raid1):	Stopped 
 
 Transition Summary:
- * Stop    dlm:0	(hex-2)
- * Stop    clvmd:0	(hex-2)
- * Stop    o2cb:0	(hex-2)
+ * Stop    dlm:0	(hex-2)  	due to node availability
+ * Stop    clvmd:0	(hex-2)  	due to node availability
+ * Stop    o2cb:0	(hex-2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   baseclone_stop_0
diff --git a/pengine/test10/bug-5186-partial-migrate.summary b/pengine/test10/bug-5186-partial-migrate.summary
index c2685d8..cd01706 100644
--- a/pengine/test10/bug-5186-partial-migrate.summary
+++ b/pengine/test10/bug-5186-partial-migrate.summary
@@ -30,9 +30,9 @@ Transition Summary:
  * Move    prmVM2	(Started bl460g1n7 -> bl460g1n8)
  * Move    prmStonith8-1	(Started bl460g1n7 -> bl460g1n6)
  * Move    prmStonith8-2	(Started bl460g1n7 -> bl460g1n6)
- * Stop    prmDiskd1:0	(bl460g1n7)
- * Stop    prmDiskd2:0	(bl460g1n7)
- * Stop    prmPing:0	(bl460g1n7)
+ * Stop    prmDiskd1:0	(bl460g1n7)  	due to node availability
+ * Stop    prmDiskd2:0	(bl460g1n7)  	due to node availability
+ * Stop    prmPing:0	(bl460g1n7)  	due to node availability
 
 Executing cluster transition:
  * Resource action: prmVM2          stop on bl460g1n6
diff --git a/pengine/test10/bug-cl-5170.summary b/pengine/test10/bug-cl-5170.summary
index c932a86..70b589e 100644
--- a/pengine/test10/bug-cl-5170.summary
+++ b/pengine/test10/bug-cl-5170.summary
@@ -11,8 +11,8 @@ Online: [ TCS-2 ]
      Stopped: [ TCS-1 ]
 
 Transition Summary:
- * Stop    ip_trf	(TCS-2)
- * Stop    ip_mgmt	(TCS-2)
+ * Stop    ip_trf	(TCS-2)  	due to node availability
+ * Stop    ip_mgmt	(TCS-2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   svc_stop_0
diff --git a/pengine/test10/bug-cl-5212.summary b/pengine/test10/bug-cl-5212.summary
index b5d5146..92d3af3 100644
--- a/pengine/test10/bug-cl-5212.summary
+++ b/pengine/test10/bug-cl-5212.summary
@@ -22,11 +22,11 @@ Online: [ srv03 ]
 Transition Summary:
  * Stop    prmStonith1-1	(Started srv02 - blocked)
  * Stop    prmStonith2-1	(Started srv01 - blocked)
- * Stop    prmStonith3-1	(srv01 - blocked)
- * Stop    pgsql:0	(srv02 - blocked)
+ * Stop    prmStonith3-1	(srv01 - blocked)  	due to node availability
+ * Stop    pgsql:0	(srv02 - blocked)  	due to node availability
  * Demote  pgsql:1	(Master -> Stopped srv01 - blocked)
- * Stop    prmPingd:0	(srv02 - blocked)
- * Stop    prmPingd:1	(srv01 - blocked)
+ * Stop    prmPingd:0	(srv02 - blocked)  	due to node availability
+ * Stop    prmPingd:1	(srv01 - blocked)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   grpStonith1_stop_0
diff --git a/pengine/test10/bug-cl-5247.summary b/pengine/test10/bug-cl-5247.summary
index fc97e8d..0f328cc 100644
--- a/pengine/test10/bug-cl-5247.summary
+++ b/pengine/test10/bug-cl-5247.summary
@@ -19,7 +19,7 @@ Containers: [ pgsr01:prmDB1 ]
 
 Transition Summary:
  * Fence (off) pgsr02 (resource: prmDB2) 'guest is unclean'
- * Stop    prmDB2	(bl460g8n4)
+ * Stop    prmDB2	(bl460g8n4)  	due to node availability
  * Restart prmStonith1-2	(Started bl460g8n4)
  * Restart prmStonith2-2	(Started bl460g8n3)
  * Recover vip-master	(Started pgsr02 -> pgsr01)
diff --git a/pengine/test10/bug-lf-2153.summary b/pengine/test10/bug-lf-2153.summary
index 9995475..e95713e 100644
--- a/pengine/test10/bug-lf-2153.summary
+++ b/pengine/test10/bug-lf-2153.summary
@@ -18,8 +18,8 @@ Online: [ alice ]
      res_portblock_iscsivg01_unblock	(ocf::heartbeat:portblock):	Started alice
 
 Transition Summary:
- * Stop    res_drbd_iscsivg01:0	(bob)
- * Stop    res_tgtd:0	(bob)
+ * Stop    res_drbd_iscsivg01:0	(bob)  	due to node availability
+ * Stop    res_tgtd:0	(bob)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   ms_drbd_iscsivg01_pre_notify_stop_0
diff --git a/pengine/test10/bug-lf-2171.summary b/pengine/test10/bug-lf-2171.summary
index b1413c3..8c1d8a4 100644
--- a/pengine/test10/bug-lf-2171.summary
+++ b/pengine/test10/bug-lf-2171.summary
@@ -10,10 +10,10 @@ Online: [ xenserver1 xenserver2 ]
      res_Dummy3	(ocf::heartbeat:Dummy):	Started xenserver1
 
 Transition Summary:
- * Stop    res_Dummy1:0	(xenserver1)
- * Stop    res_Dummy1:1	(xenserver2)
- * Stop    res_Dummy2	(Started xenserver1)
- * Stop    res_Dummy3	(Started xenserver1)
+ * Stop    res_Dummy1:0	(xenserver1)  	due to node availability
+ * Stop    res_Dummy1:1	(xenserver2)  	due to node availability
+ * Stop    res_Dummy2	(Started xenserver1) 	due to unrunnable cl_res_Dummy1 running
+ * Stop    res_Dummy3	(Started xenserver1) 	due to unrunnable cl_res_Dummy1 running
 
 Executing cluster transition:
  * Pseudo action:   gr_Dummy_stop_0
diff --git a/pengine/test10/bug-lf-2361.summary b/pengine/test10/bug-lf-2361.summary
index b81456c..3089e04 100644
--- a/pengine/test10/bug-lf-2361.summary
+++ b/pengine/test10/bug-lf-2361.summary
@@ -11,8 +11,8 @@ Online: [ alice.demo bob.demo ]
 Transition Summary:
  * Start   stateful:0	(alice.demo)
  * Start   stateful:1	(bob.demo)
- * Start   dummy2:0	(alice.demo - blocked)
- * Start   dummy2:1	(bob.demo - blocked)
+ * Start   dummy2:0	(alice.demo - blocked) 	due to unrunnable dummy1 start
+ * Start   dummy2:1	(bob.demo - blocked) 	due to unrunnable dummy1 start
 
 Executing cluster transition:
  * Pseudo action:   ms_stateful_pre_notify_start_0
diff --git a/pengine/test10/bug-lf-2422.summary b/pengine/test10/bug-lf-2422.summary
index 54341c9..5e22e67 100644
--- a/pengine/test10/bug-lf-2422.summary
+++ b/pengine/test10/bug-lf-2422.summary
@@ -10,18 +10,18 @@ Online: [ qa-suse-1 qa-suse-2 qa-suse-3 qa-suse-4 ]
      Started: [ qa-suse-1 qa-suse-2 qa-suse-3 qa-suse-4 ]
 
 Transition Summary:
- * Stop    o2cb:0	(qa-suse-1)
- * Stop    cmirror:0	(qa-suse-1)
- * Stop    o2cb:1	(qa-suse-4)
- * Stop    cmirror:1	(qa-suse-4)
- * Stop    o2cb:2	(qa-suse-3)
- * Stop    cmirror:2	(qa-suse-3)
- * Stop    o2cb:3	(qa-suse-2)
- * Stop    cmirror:3	(qa-suse-2)
- * Stop    ocfs:0	(qa-suse-1)
- * Stop    ocfs:1	(qa-suse-4)
- * Stop    ocfs:2	(qa-suse-3)
- * Stop    ocfs:3	(qa-suse-2)
+ * Stop    o2cb:0	(qa-suse-1)  	due to node availability
+ * Stop    cmirror:0	(qa-suse-1)  	due to node availability
+ * Stop    o2cb:1	(qa-suse-4)  	due to node availability
+ * Stop    cmirror:1	(qa-suse-4)  	due to node availability
+ * Stop    o2cb:2	(qa-suse-3)  	due to node availability
+ * Stop    cmirror:2	(qa-suse-3)  	due to node availability
+ * Stop    o2cb:3	(qa-suse-2)  	due to node availability
+ * Stop    cmirror:3	(qa-suse-2)  	due to node availability
+ * Stop    ocfs:0	(qa-suse-1)  	due to node availability
+ * Stop    ocfs:1	(qa-suse-4)  	due to node availability
+ * Stop    ocfs:2	(qa-suse-3)  	due to node availability
+ * Stop    ocfs:3	(qa-suse-2)  	due to node availability
 
 Executing cluster transition:
  * Resource action: sbd_stonith     monitor=15000 on qa-suse-2
diff --git a/pengine/test10/bug-lf-2453.summary b/pengine/test10/bug-lf-2453.summary
index 3ff1a6b..398868b 100644
--- a/pengine/test10/bug-lf-2453.summary
+++ b/pengine/test10/bug-lf-2453.summary
@@ -10,11 +10,11 @@ Online: [ domu1 domu2 ]
      Started: [ domu1 domu2 ]
 
 Transition Summary:
- * Stop    PrimitiveResource1	(Started domu1)
- * Stop    apache:0	(domu1)
- * Stop    apache:1	(domu2)
- * Stop    DummyResource:0	(Started domu1)
- * Stop    DummyResource:1	(Started domu2)
+ * Stop    PrimitiveResource1	(Started domu1) 	due to required CloneResource2 running
+ * Stop    apache:0	(domu1)  	due to node availability
+ * Stop    apache:1	(domu2)  	due to node availability
+ * Stop    DummyResource:0	(Started domu1) 	due to unrunnable CloneResource1 running
+ * Stop    DummyResource:1	(Started domu2) 	due to unrunnable CloneResource1 running
 
 Executing cluster transition:
  * Resource action: PrimitiveResource1 stop on domu1
diff --git a/pengine/test10/bug-lf-2508.summary b/pengine/test10/bug-lf-2508.summary
index ddaf1c3..5d0d90c 100644
--- a/pengine/test10/bug-lf-2508.summary
+++ b/pengine/test10/bug-lf-2508.summary
@@ -38,13 +38,13 @@ Transition Summary:
  * Fence (reboot) srv02 'peer is no longer part of the cluster'
  * Start   Dummy01	(srv01)
  * Move    Dummy02	(Started srv02 -> srv04)
- * Stop    prmStonith1-1:1	(srv02)
- * Stop    prmStonith1-3:1	(srv02)
- * Stop    prmStonith3-1:0	(srv02)
- * Stop    prmStonith3-3:0	(srv02)
+ * Stop    prmStonith1-1:1	(srv02)  	due to node availability
+ * Stop    prmStonith1-3:1	(srv02)  	due to node availability
+ * Stop    prmStonith3-1:0	(srv02)  	due to node availability
+ * Stop    prmStonith3-3:0	(srv02)  	due to node availability
  * Start   prmStonith3-3:1	(srv01)
- * Stop    prmStonith4-1:1	(srv02)
- * Stop    prmStonith4-3:1	(srv02)
+ * Stop    prmStonith4-1:1	(srv02)  	due to node availability
+ * Stop    prmStonith4-3:1	(srv02)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   Group01_start_0
diff --git a/pengine/test10/bug-lf-2551.summary b/pengine/test10/bug-lf-2551.summary
index 1b57ea7..9537277 100644
--- a/pengine/test10/bug-lf-2551.summary
+++ b/pengine/test10/bug-lf-2551.summary
@@ -84,12 +84,12 @@ Transition Summary:
  * Fence (reboot) hex-9 'peer is no longer part of the cluster'
  * Move    fencing-sbd	(Started hex-9 -> hex-0)
  * Move    dummy1	(Started hex-9 -> hex-0)
- * Stop    dlm:3	(hex-9)
- * Stop    o2cb:3	(hex-9)
- * Stop    clvm:3	(hex-9)
- * Stop    cmirrord:3	(hex-9)
- * Stop    vg1:3	(hex-9)
- * Stop    ocfs2-1:3	(hex-9)
+ * Stop    dlm:3	(hex-9)  	due to node availability
+ * Stop    o2cb:3	(hex-9)  	due to node availability
+ * Stop    clvm:3	(hex-9)  	due to node availability
+ * Stop    cmirrord:3	(hex-9)  	due to node availability
+ * Stop    vg1:3	(hex-9)  	due to node availability
+ * Stop    ocfs2-1:3	(hex-9)  	due to node availability
  * Stop    vm-03	(hex-9)
  * Stop    vm-06	(hex-9)
  * Stop    vm-09	(hex-9)
diff --git a/pengine/test10/bug-lf-2574.summary b/pengine/test10/bug-lf-2574.summary
index 3024a73..800453c 100644
--- a/pengine/test10/bug-lf-2574.summary
+++ b/pengine/test10/bug-lf-2574.summary
@@ -12,7 +12,7 @@ Online: [ srv01 srv02 srv03 ]
 
 Transition Summary:
  * Move    main_rsc	(Started srv01 -> srv03)
- * Stop    prmPingd:0	(srv01)
+ * Stop    prmPingd:0	(srv01)  	due to node availability
 
 Executing cluster transition:
  * Resource action: main_rsc        stop on srv01
diff --git a/pengine/test10/bug-lf-2619.summary b/pengine/test10/bug-lf-2619.summary
index 2816ac3..9a2213d 100644
--- a/pengine/test10/bug-lf-2619.summary
+++ b/pengine/test10/bug-lf-2619.summary
@@ -34,7 +34,7 @@ Transition Summary:
  * Move    prmFsPostgreSQLDB1-3	(Started act1 -> sby1)
  * Move    prmIpPostgreSQLDB1	(Started act1 -> sby1)
  * Move    prmApPostgreSQLDB1	(Started act1 -> sby1)
- * Stop    prmPingd:0	(act1)
+ * Stop    prmPingd:0	(act1)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   grpPostgreSQLDB1_stop_0
diff --git a/pengine/test10/bug-n-385265.summary b/pengine/test10/bug-n-385265.summary
index 8f95787..e5bc4bc 100644
--- a/pengine/test10/bug-n-385265.summary
+++ b/pengine/test10/bug-n-385265.summary
@@ -7,7 +7,7 @@ Online: [ ih01 ih02 ]
      resource_idvscommon	(ocf::dfs:idvs):	FAILED ih02 
 
 Transition Summary:
- * Stop    resource_idvscommon	(ih02)
+ * Stop    resource_idvscommon	(ih02)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group_common_stop_0
diff --git a/pengine/test10/bug-rh-1097457.summary b/pengine/test10/bug-rh-1097457.summary
index 29dd018..ee21df8 100644
--- a/pengine/test10/bug-rh-1097457.summary
+++ b/pengine/test10/bug-rh-1097457.summary
@@ -35,10 +35,10 @@ Transition Summary:
  * Fence (reboot) lamaVM2 (resource: VM2) 'guest is unclean'
  * Recover VM2	(Started lama3)
  * Recover FSlun3	(Started lamaVM2 -> lama2)
- * Restart FAKE4	(Started lamaVM2)
- * Restart FAKE4-IP	(Started lamaVM2)
- * Restart FAKE6:2	(Started lamaVM2)
- * Restart lamaVM2	(Started lama3)
+ * Restart FAKE4	(Started lamaVM2) 	due to required VM2 start
+ * Restart FAKE4-IP	(Started lamaVM2) 	due to required VM2 start
+ * Restart FAKE6:2	(Started lamaVM2) 	due to required VM2 start
+ * Restart lamaVM2	(Started lama3) 	due to required VM2 start
 
 Executing cluster transition:
  * Resource action: lamaVM2         stop on lama3
diff --git a/pengine/test10/bug-suse-707150.summary b/pengine/test10/bug-suse-707150.summary
index da1d5c4..d6922ab 100644
--- a/pengine/test10/bug-suse-707150.summary
+++ b/pengine/test10/bug-suse-707150.summary
@@ -26,7 +26,7 @@ Transition Summary:
  * Start   o2cb:1	(hex-9)
  * Start   clvm:1	(hex-9)
  * Start   cmirrord:1	(hex-9)
- * Start   vm-01	(hex-9 - blocked)
+ * Start   vm-01	(hex-9 - blocked) 	due to unrunnable base-clone running
 
 Executing cluster transition:
  * Resource action: vg1:1           monitor on hex-9
diff --git a/pengine/test10/bundle-order-partial-start-2.summary b/pengine/test10/bundle-order-partial-start-2.summary
index 5e3927c..d67f8fc 100644
--- a/pengine/test10/bundle-order-partial-start-2.summary
+++ b/pengine/test10/bundle-order-partial-start-2.summary
@@ -22,8 +22,8 @@ Containers: [ galera-bundle-0:galera-bundle-docker-0 rabbitmq-bundle-0:rabbitmq-
 
 Transition Summary:
  * Start   rabbitmq:0	(rabbitmq-bundle-0)
- * Restart galera-bundle-docker-0	(Started undercloud)
- * Restart galera-bundle-0	(Started undercloud)
+ * Restart galera-bundle-docker-0	(Started undercloud) 	due to required haproxy-bundle running
+ * Restart galera-bundle-0	(Started undercloud) 	due to required galera-bundle-docker-0 start
  * Start   galera:0	(galera-bundle-0)
  * Promote redis:0	(Slave -> Master redis-bundle-0)
  * Start   haproxy-bundle-docker-0	(undercloud)
diff --git a/pengine/test10/bundle-order-partial-stop.summary b/pengine/test10/bundle-order-partial-stop.summary
index b30a237..e7bac73 100644
--- a/pengine/test10/bundle-order-partial-stop.summary
+++ b/pengine/test10/bundle-order-partial-stop.summary
@@ -22,25 +22,25 @@ Containers: [ galera-bundle-0:galera-bundle-docker-0 rabbitmq-bundle-0:rabbitmq-
 
 Transition Summary:
  * Shutdown undercloud
- * Stop    rabbitmq-bundle-docker-0	(undercloud)
- * Stop    rabbitmq-bundle-0	(undercloud)
- * Stop    rabbitmq:0	(Started rabbitmq-bundle-0)
- * Stop    galera-bundle-docker-0	(undercloud)
- * Stop    galera-bundle-0	(undercloud)
+ * Stop    rabbitmq-bundle-docker-0	(undercloud)  	due to node availability
+ * Stop    rabbitmq-bundle-0	(undercloud)  	due to node availability
+ * Stop    rabbitmq:0	(Started rabbitmq-bundle-0) 	due to unrunnable rabbitmq-bundle-0 start
+ * Stop    galera-bundle-docker-0	(undercloud)  	due to node availability
+ * Stop    galera-bundle-0	(undercloud)  	due to node availability
  * Demote  galera:0	(Master -> Slave galera-bundle-0)
- * Restart galera:0	(Slave galera-bundle-0)
- * Stop    redis-bundle-docker-0	(undercloud)
- * Stop    redis-bundle-0	(undercloud)
+ * Restart galera:0	(Slave galera-bundle-0) 	due to unrunnable galera-bundle-0 start
+ * Stop    redis-bundle-docker-0	(undercloud)  	due to node availability
+ * Stop    redis-bundle-0	(undercloud)  	due to node availability
  * Demote  redis:0	(Master -> Slave redis-bundle-0)
- * Restart redis:0	(Slave redis-bundle-0)
- * Stop    ip-192.168.122.254	(undercloud)
- * Stop    ip-192.168.122.250	(undercloud)
- * Stop    ip-192.168.122.249	(undercloud)
- * Stop    ip-192.168.122.253	(undercloud)
- * Stop    ip-192.168.122.247	(undercloud)
- * Stop    ip-192.168.122.248	(undercloud)
- * Stop    haproxy-bundle-docker-0	(undercloud)
- * Stop    openstack-cinder-volume-docker-0	(undercloud)
+ * Restart redis:0	(Slave redis-bundle-0) 	due to unrunnable redis-bundle-0 start
+ * Stop    ip-192.168.122.254	(undercloud)  	due to node availability
+ * Stop    ip-192.168.122.250	(undercloud)  	due to node availability
+ * Stop    ip-192.168.122.249	(undercloud)  	due to node availability
+ * Stop    ip-192.168.122.253	(undercloud)  	due to node availability
+ * Stop    ip-192.168.122.247	(undercloud)  	due to node availability
+ * Stop    ip-192.168.122.248	(undercloud)  	due to node availability
+ * Stop    haproxy-bundle-docker-0	(undercloud)  	due to node availability
+ * Stop    openstack-cinder-volume-docker-0	(undercloud)  	due to node availability
 
 Executing cluster transition:
  * Resource action: galera          cancel=10000 on galera-bundle-0
diff --git a/pengine/test10/bundle-order-startup-clone.summary b/pengine/test10/bundle-order-startup-clone.summary
index f3f8be0..0acfd1e 100644
--- a/pengine/test10/bundle-order-startup-clone.summary
+++ b/pengine/test10/bundle-order-startup-clone.summary
@@ -13,12 +13,12 @@ RemoteOFFLINE: [ rabbitmq-bundle-0 ]
    redis-bundle-0	(ocf::heartbeat:redis):	Stopped
 
 Transition Summary:
- * Start   storage:0	(metal-1 - blocked)
- * Start   storage:1	(metal-2 - blocked)
- * Start   storage:2	(metal-3 - blocked)
- * Start   galera-bundle-docker-0	(metal-1 - blocked)
- * Start   galera-bundle-0	(metal-1 - blocked)
- * Start   galera:0	(galera-bundle-0 - blocked)
+ * Start   storage:0	(metal-1 - blocked) 	due to unrunnable redis-bundle promoted
+ * Start   storage:1	(metal-2 - blocked) 	due to unrunnable redis-bundle promoted
+ * Start   storage:2	(metal-3 - blocked) 	due to unrunnable redis-bundle promoted
+ * Start   galera-bundle-docker-0	(metal-1 - blocked) 	due to unrunnable storage-clone notified
+ * Start   galera-bundle-0	(metal-1 - blocked) 	due to unrunnable galera-bundle-docker-0 start
+ * Start   galera:0	(galera-bundle-0 - blocked) 	due to unrunnable galera-bundle-docker-0 start
  * Start   haproxy-bundle-docker-0	(metal-2)
  * Start   redis-bundle-docker-0	(metal-2)
  * Start   redis-bundle-0	(metal-2)
diff --git a/pengine/test10/bundle-order-stop-clone.summary b/pengine/test10/bundle-order-stop-clone.summary
index 404eecd..9a6b0f2 100644
--- a/pengine/test10/bundle-order-stop-clone.summary
+++ b/pengine/test10/bundle-order-stop-clone.summary
@@ -21,10 +21,10 @@ Containers: [ galera-bundle-0:galera-bundle-docker-0 galera-bundle-1:galera-bund
    redis-bundle-2	(ocf::heartbeat:redis):	Master metal-3
 
 Transition Summary:
- * Stop    storage:0	(metal-1)
- * Stop    galera-bundle-docker-0	(metal-1)
- * Stop    galera-bundle-0	(Started metal-1)
- * Stop    galera:0	(Slave galera-bundle-0)
+ * Stop    storage:0	(metal-1)  	due to node availability
+ * Stop    galera-bundle-docker-0	(metal-1)  	due to node availability
+ * Stop    galera-bundle-0	(Started metal-1) 	due to unrunnable galera-bundle-docker-0 start
+ * Stop    galera:0	(Slave galera-bundle-0) 	due to unrunnable galera-bundle-docker-0 start
 
 Executing cluster transition:
  * Pseudo action:   storage-clone_pre_notify_stop_0
diff --git a/pengine/test10/bundle-order-stop.summary b/pengine/test10/bundle-order-stop.summary
index b30a237..e7bac73 100644
--- a/pengine/test10/bundle-order-stop.summary
+++ b/pengine/test10/bundle-order-stop.summary
@@ -22,25 +22,25 @@ Containers: [ galera-bundle-0:galera-bundle-docker-0 rabbitmq-bundle-0:rabbitmq-
 
 Transition Summary:
  * Shutdown undercloud
- * Stop    rabbitmq-bundle-docker-0	(undercloud)
- * Stop    rabbitmq-bundle-0	(undercloud)
- * Stop    rabbitmq:0	(Started rabbitmq-bundle-0)
- * Stop    galera-bundle-docker-0	(undercloud)
- * Stop    galera-bundle-0	(undercloud)
+ * Stop    rabbitmq-bundle-docker-0	(undercloud)  	due to node availability
+ * Stop    rabbitmq-bundle-0	(undercloud)  	due to node availability
+ * Stop    rabbitmq:0	(Started rabbitmq-bundle-0) 	due to unrunnable rabbitmq-bundle-0 start
+ * Stop    galera-bundle-docker-0	(undercloud)  	due to node availability
+ * Stop    galera-bundle-0	(undercloud)  	due to node availability
  * Demote  galera:0	(Master -> Slave galera-bundle-0)
- * Restart galera:0	(Slave galera-bundle-0)
- * Stop    redis-bundle-docker-0	(undercloud)
- * Stop    redis-bundle-0	(undercloud)
+ * Restart galera:0	(Slave galera-bundle-0) 	due to unrunnable galera-bundle-0 start
+ * Stop    redis-bundle-docker-0	(undercloud)  	due to node availability
+ * Stop    redis-bundle-0	(undercloud)  	due to node availability
  * Demote  redis:0	(Master -> Slave redis-bundle-0)
- * Restart redis:0	(Slave redis-bundle-0)
- * Stop    ip-192.168.122.254	(undercloud)
- * Stop    ip-192.168.122.250	(undercloud)
- * Stop    ip-192.168.122.249	(undercloud)
- * Stop    ip-192.168.122.253	(undercloud)
- * Stop    ip-192.168.122.247	(undercloud)
- * Stop    ip-192.168.122.248	(undercloud)
- * Stop    haproxy-bundle-docker-0	(undercloud)
- * Stop    openstack-cinder-volume-docker-0	(undercloud)
+ * Restart redis:0	(Slave redis-bundle-0) 	due to unrunnable redis-bundle-0 start
+ * Stop    ip-192.168.122.254	(undercloud)  	due to node availability
+ * Stop    ip-192.168.122.250	(undercloud)  	due to node availability
+ * Stop    ip-192.168.122.249	(undercloud)  	due to node availability
+ * Stop    ip-192.168.122.253	(undercloud)  	due to node availability
+ * Stop    ip-192.168.122.247	(undercloud)  	due to node availability
+ * Stop    ip-192.168.122.248	(undercloud)  	due to node availability
+ * Stop    haproxy-bundle-docker-0	(undercloud)  	due to node availability
+ * Stop    openstack-cinder-volume-docker-0	(undercloud)  	due to node availability
 
 Executing cluster transition:
  * Resource action: galera          cancel=10000 on galera-bundle-0
diff --git a/pengine/test10/clone-anon-dup.summary b/pengine/test10/clone-anon-dup.summary
index 6ad247f..843972d 100644
--- a/pengine/test10/clone-anon-dup.summary
+++ b/pengine/test10/clone-anon-dup.summary
@@ -11,7 +11,7 @@ Online: [ wc01 wc02 wc03 ]
 
 Transition Summary:
  * Start   stonith-1	(wc01)
- * Stop    apache2:2	(wc02)
+ * Stop    apache2:2	(wc02)  	due to node availability
 
 Executing cluster transition:
  * Resource action: stonith-1       monitor on wc03
diff --git a/pengine/test10/clone-anon-failcount.summary b/pengine/test10/clone-anon-failcount.summary
index cd4349c..3fb39e3 100644
--- a/pengine/test10/clone-anon-failcount.summary
+++ b/pengine/test10/clone-anon-failcount.summary
@@ -42,9 +42,9 @@ Transition Summary:
  * Move    UmDummy01	(Started srv01 -> srv04)
  * Move    UmDummy02	(Started srv01 -> srv04)
  * Recover clnUMdummy01:0	(Started srv04)
- * Restart clnUMdummy02:0	(Started srv04)
- * Stop    clnUMdummy01:1	(srv01)
- * Stop    clnUMdummy02:1	(srv01)
+ * Restart clnUMdummy02:0	(Started srv04) 	due to required clnUMdummy01:0 start
+ * Stop    clnUMdummy01:1	(srv01)  	due to node availability
+ * Stop    clnUMdummy02:1	(srv01)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   UMgroup01_stop_0
diff --git a/pengine/test10/clone-interleave-2.summary b/pengine/test10/clone-interleave-2.summary
index b15a546..78d46cd 100644
--- a/pengine/test10/clone-interleave-2.summary
+++ b/pengine/test10/clone-interleave-2.summary
@@ -11,8 +11,8 @@ Online: [ pcmk-1 pcmk-2 pcmk-3 ]
      Started: [ pcmk-1 pcmk-2 pcmk-3 ]
 
 Transition Summary:
- * Restart dummy	(Started pcmk-1)
- * Stop    child-2:0	(pcmk-1)
+ * Restart dummy	(Started pcmk-1) 	due to required clone-3 running
+ * Stop    child-2:0	(pcmk-1)  	due to node availability
  * Stop    child-3:0	(pcmk-1)
 
 Executing cluster transition:
diff --git a/pengine/test10/clone-interleave-3.summary b/pengine/test10/clone-interleave-3.summary
index 004fa54..8b13dc4 100644
--- a/pengine/test10/clone-interleave-3.summary
+++ b/pengine/test10/clone-interleave-3.summary
@@ -12,9 +12,9 @@ Online: [ pcmk-1 pcmk-2 pcmk-3 ]
      Started: [ pcmk-1 pcmk-2 pcmk-3 ]
 
 Transition Summary:
- * Restart dummy	(Started pcmk-1)
+ * Restart dummy	(Started pcmk-1) 	due to required clone-3 running
  * Recover child-2:0	(Started pcmk-1)
- * Restart child-3:0	(Started pcmk-1)
+ * Restart child-3:0	(Started pcmk-1) 	due to required child-2:0 start
 
 Executing cluster transition:
  * Resource action: dummy           stop on pcmk-1
diff --git a/pengine/test10/clone-max-zero.summary b/pengine/test10/clone-max-zero.summary
index 38aa6ba..33c4e89 100644
--- a/pengine/test10/clone-max-zero.summary
+++ b/pengine/test10/clone-max-zero.summary
@@ -14,12 +14,12 @@ Online: [ c001n11 c001n12 ]
      Started: [ c001n11 c001n12 ]
 
 Transition Summary:
- * Stop    dlm:0	(c001n12)
- * Stop    dlm:1	(c001n11)
- * Stop    o2cb:0	(c001n12)
- * Stop    o2cb:1	(c001n11)
- * Stop    ocfs2-1:0	(c001n12)
- * Stop    ocfs2-1:1	(c001n11)
+ * Stop    dlm:0	(c001n12)  	due to node availability
+ * Stop    dlm:1	(c001n11)  	due to node availability
+ * Stop    o2cb:0	(c001n12)  	due to node availability
+ * Stop    o2cb:1	(c001n11)  	due to node availability
+ * Stop    ocfs2-1:0	(c001n12)  	due to node availability
+ * Stop    ocfs2-1:1	(c001n11)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   c-ocfs2-1_stop_0
diff --git a/pengine/test10/clone-require-all-2.summary b/pengine/test10/clone-require-all-2.summary
index d4b2519..f5861e7 100644
--- a/pengine/test10/clone-require-all-2.summary
+++ b/pengine/test10/clone-require-all-2.summary
@@ -13,10 +13,10 @@ Online: [ rhel7-auto3 rhel7-auto4 ]
 
 Transition Summary:
  * Move    shooter	(Started rhel7-auto1 -> rhel7-auto3)
- * Stop    A:0	(rhel7-auto1)
- * Stop    A:1	(rhel7-auto2)
- * Start   B:0	(rhel7-auto4 - blocked)
- * Start   B:1	(rhel7-auto3 - blocked)
+ * Stop    A:0	(rhel7-auto1)  	due to node availability
+ * Stop    A:1	(rhel7-auto2)  	due to node availability
+ * Start   B:0	(rhel7-auto4 - blocked) 	due to unrunnable clone-one-or-more:order-A-clone-B-clone-mandatory
+ * Start   B:1	(rhel7-auto3 - blocked) 	due to unrunnable clone-one-or-more:order-A-clone-B-clone-mandatory
 
 Executing cluster transition:
  * Resource action: shooter         stop on rhel7-auto1
diff --git a/pengine/test10/clone-require-all-3.summary b/pengine/test10/clone-require-all-3.summary
index 68191b1..1c887e5 100644
--- a/pengine/test10/clone-require-all-3.summary
+++ b/pengine/test10/clone-require-all-3.summary
@@ -14,10 +14,10 @@ Online: [ rhel7-auto3 rhel7-auto4 ]
 
 Transition Summary:
  * Move    shooter	(Started rhel7-auto1 -> rhel7-auto3)
- * Stop    A:0	(rhel7-auto1)
- * Stop    A:1	(rhel7-auto2)
- * Stop    B:0	(Started rhel7-auto3)
- * Stop    B:1	(Started rhel7-auto4)
+ * Stop    A:0	(rhel7-auto1)  	due to node availability
+ * Stop    A:1	(rhel7-auto2)  	due to node availability
+ * Stop    B:0	(Started rhel7-auto3) 	due to unrunnable clone-one-or-more:order-A-clone-B-clone-mandatory
+ * Stop    B:1	(Started rhel7-auto4) 	due to unrunnable clone-one-or-more:order-A-clone-B-clone-mandatory
 
 Executing cluster transition:
  * Resource action: shooter         stop on rhel7-auto1
diff --git a/pengine/test10/clone-require-all-4.summary b/pengine/test10/clone-require-all-4.summary
index 49ae3bd..90d2059 100644
--- a/pengine/test10/clone-require-all-4.summary
+++ b/pengine/test10/clone-require-all-4.summary
@@ -13,7 +13,7 @@ Online: [ rhel7-auto2 rhel7-auto3 rhel7-auto4 ]
 
 Transition Summary:
  * Move    shooter	(Started rhel7-auto1 -> rhel7-auto2)
- * Stop    A:0	(rhel7-auto1)
+ * Stop    A:0	(rhel7-auto1)  	due to node availability
 
 Executing cluster transition:
  * Resource action: shooter         stop on rhel7-auto1
diff --git a/pengine/test10/clone-require-all-6.summary b/pengine/test10/clone-require-all-6.summary
index 6561ea3..20ccf76 100644
--- a/pengine/test10/clone-require-all-6.summary
+++ b/pengine/test10/clone-require-all-6.summary
@@ -11,8 +11,8 @@ Online: [ rhel7-auto1 rhel7-auto2 rhel7-auto3 rhel7-auto4 ]
      Stopped: [ rhel7-auto2 ]
 
 Transition Summary:
- * Stop    A:0	(rhel7-auto1)
- * Stop    A:2	(rhel7-auto3)
+ * Stop    A:0	(rhel7-auto1)  	due to node availability
+ * Stop    A:2	(rhel7-auto3)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   A-clone_stop_0
diff --git a/pengine/test10/clone_min_interleave_start_one.summary b/pengine/test10/clone_min_interleave_start_one.summary
index b15f68a..4ee71c4 100644
--- a/pengine/test10/clone_min_interleave_start_one.summary
+++ b/pengine/test10/clone_min_interleave_start_one.summary
@@ -12,12 +12,12 @@ Online: [ c7auto1 c7auto2 c7auto3 ]
 
 Transition Summary:
  * Start   FAKE1:0	(c7auto1)
- * Start   FAKE2:0	(c7auto2 - blocked)
- * Start   FAKE2:1	(c7auto3 - blocked)
- * Start   FAKE2:2	(c7auto1 - blocked)
- * Start   FAKE3:0	(c7auto2 - blocked)
- * Start   FAKE3:1	(c7auto3 - blocked)
- * Start   FAKE3:2	(c7auto1 - blocked)
+ * Start   FAKE2:0	(c7auto2 - blocked) 	due to unrunnable clone-one-or-more:order-FAKE1-clone-FAKE2-clone-mandatory
+ * Start   FAKE2:1	(c7auto3 - blocked) 	due to unrunnable clone-one-or-more:order-FAKE1-clone-FAKE2-clone-mandatory
+ * Start   FAKE2:2	(c7auto1 - blocked) 	due to unrunnable clone-one-or-more:order-FAKE1-clone-FAKE2-clone-mandatory
+ * Start   FAKE3:0	(c7auto2 - blocked) 	due to unrunnable FAKE2:0 start
+ * Start   FAKE3:1	(c7auto3 - blocked) 	due to unrunnable FAKE2:1 start
+ * Start   FAKE3:2	(c7auto1 - blocked) 	due to unrunnable FAKE2:2 start
 
 Executing cluster transition:
  * Pseudo action:   FAKE1-clone_start_0
diff --git a/pengine/test10/clone_min_interleave_stop_one.summary b/pengine/test10/clone_min_interleave_stop_one.summary
index 9280b7e..4fd094e 100644
--- a/pengine/test10/clone_min_interleave_stop_one.summary
+++ b/pengine/test10/clone_min_interleave_stop_one.summary
@@ -11,7 +11,7 @@ Online: [ c7auto1 c7auto2 c7auto3 ]
      Started: [ c7auto1 c7auto2 c7auto3 ]
 
 Transition Summary:
- * Stop    FAKE1:0	(c7auto3)
+ * Stop    FAKE1:0	(c7auto3)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   FAKE1-clone_stop_0
diff --git a/pengine/test10/clone_min_interleave_stop_two.summary b/pengine/test10/clone_min_interleave_stop_two.summary
index fb28e0d..0866f3c 100644
--- a/pengine/test10/clone_min_interleave_stop_two.summary
+++ b/pengine/test10/clone_min_interleave_stop_two.summary
@@ -11,14 +11,14 @@ Online: [ c7auto1 c7auto2 c7auto3 ]
      Started: [ c7auto1 c7auto2 c7auto3 ]
 
 Transition Summary:
- * Stop    FAKE1:0	(c7auto3)
- * Stop    FAKE1:2	(c7auto2)
- * Stop    FAKE2:0	(Started c7auto3)
- * Stop    FAKE2:1	(Started c7auto1)
- * Stop    FAKE2:2	(Started c7auto2)
- * Stop    FAKE3:0	(Started c7auto3)
- * Stop    FAKE3:1	(Started c7auto1)
- * Stop    FAKE3:2	(Started c7auto2)
+ * Stop    FAKE1:0	(c7auto3)  	due to node availability
+ * Stop    FAKE1:2	(c7auto2)  	due to node availability
+ * Stop    FAKE2:0	(Started c7auto3) 	due to unrunnable clone-one-or-more:order-FAKE1-clone-FAKE2-clone-mandatory
+ * Stop    FAKE2:1	(Started c7auto1) 	due to unrunnable clone-one-or-more:order-FAKE1-clone-FAKE2-clone-mandatory
+ * Stop    FAKE2:2	(Started c7auto2) 	due to unrunnable clone-one-or-more:order-FAKE1-clone-FAKE2-clone-mandatory
+ * Stop    FAKE3:0	(Started c7auto3) 	due to required FAKE2:0 start
+ * Stop    FAKE3:1	(Started c7auto1) 	due to required FAKE2:1 start
+ * Stop    FAKE3:2	(Started c7auto2) 	due to required FAKE2:2 start
 
 Executing cluster transition:
  * Pseudo action:   FAKE3-clone_stop_0
diff --git a/pengine/test10/clone_min_start_one.summary b/pengine/test10/clone_min_start_one.summary
index ee33e01..196f1b3 100644
--- a/pengine/test10/clone_min_start_one.summary
+++ b/pengine/test10/clone_min_start_one.summary
@@ -12,7 +12,7 @@ Online: [ c7auto3 c7auto4 ]
 Transition Summary:
  * Move    shooter	(Started c7auto1 -> c7auto3)
  * Start   FAKECLONE:0	(c7auto3)
- * Start   FAKE	(c7auto4 - blocked)
+ * Start   FAKE	(c7auto4 - blocked) 	due to unrunnable clone-one-or-more:order-FAKECLONE-clone-FAKE-mandatory
 
 Executing cluster transition:
  * Resource action: shooter         stop on c7auto1
diff --git a/pengine/test10/clone_min_stop_all.summary b/pengine/test10/clone_min_stop_all.summary
index eb2944f..877d12f 100644
--- a/pengine/test10/clone_min_stop_all.summary
+++ b/pengine/test10/clone_min_stop_all.summary
@@ -13,10 +13,10 @@ Online: [ c7auto4 ]
 
 Transition Summary:
  * Move    shooter	(Started c7auto1 -> c7auto4)
- * Stop    FAKECLONE:0	(c7auto1)
- * Stop    FAKECLONE:1	(c7auto2)
- * Stop    FAKECLONE:2	(c7auto3)
- * Stop    FAKE	(Started c7auto4)
+ * Stop    FAKECLONE:0	(c7auto1)  	due to node availability
+ * Stop    FAKECLONE:1	(c7auto2)  	due to node availability
+ * Stop    FAKECLONE:2	(c7auto3)  	due to node availability
+ * Stop    FAKE	(Started c7auto4) 	due to unrunnable clone-one-or-more:order-FAKECLONE-clone-FAKE-mandatory
 
 Executing cluster transition:
  * Resource action: shooter         stop on c7auto1
diff --git a/pengine/test10/clone_min_stop_one.summary b/pengine/test10/clone_min_stop_one.summary
index 9206a0d..3fdb675 100644
--- a/pengine/test10/clone_min_stop_one.summary
+++ b/pengine/test10/clone_min_stop_one.summary
@@ -10,7 +10,7 @@ Online: [ c7auto1 c7auto3 c7auto4 ]
  FAKE	(ocf::heartbeat:Dummy):	Started c7auto4
 
 Transition Summary:
- * Stop    FAKECLONE:1	(c7auto2)
+ * Stop    FAKECLONE:1	(c7auto2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   FAKECLONE-clone_stop_0
diff --git a/pengine/test10/clone_min_stop_two.summary b/pengine/test10/clone_min_stop_two.summary
index c009d7d..4d8c38f 100644
--- a/pengine/test10/clone_min_stop_two.summary
+++ b/pengine/test10/clone_min_stop_two.summary
@@ -12,9 +12,9 @@ Online: [ c7auto3 c7auto4 ]
 
 Transition Summary:
  * Move    shooter	(Started c7auto1 -> c7auto3)
- * Stop    FAKECLONE:0	(c7auto1)
- * Stop    FAKECLONE:1	(c7auto2)
- * Stop    FAKE	(Started c7auto4)
+ * Stop    FAKECLONE:0	(c7auto1)  	due to node availability
+ * Stop    FAKECLONE:1	(c7auto2)  	due to node availability
+ * Stop    FAKE	(Started c7auto4) 	due to unrunnable clone-one-or-more:order-FAKECLONE-clone-FAKE-mandatory
 
 Executing cluster transition:
  * Resource action: shooter         stop on c7auto1
diff --git a/pengine/test10/cloned-group-stop.summary b/pengine/test10/cloned-group-stop.summary
index 8357c38..f7a980c 100644
--- a/pengine/test10/cloned-group-stop.summary
+++ b/pengine/test10/cloned-group-stop.summary
@@ -18,22 +18,22 @@ Online: [ rhos4-node3 rhos4-node4 ]
      Started: [ rhos4-node3 rhos4-node4 ]
 
 Transition Summary:
- * Stop    qpidd:0	(rhos4-node4)
- * Stop    qpidd:1	(rhos4-node3)
- * Stop    keystone:0	(Started rhos4-node4)
- * Stop    keystone:1	(Started rhos4-node3)
- * Stop    glance-fs:0	(Started rhos4-node4)
- * Stop    glance-registry:0	(Started rhos4-node4)
- * Stop    glance-api:0	(Started rhos4-node4)
- * Stop    glance-fs:1	(Started rhos4-node3)
- * Stop    glance-registry:1	(Started rhos4-node3)
- * Stop    glance-api:1	(Started rhos4-node3)
- * Stop    cinder-api:0	(Started rhos4-node4)
- * Stop    cinder-scheduler:0	(Started rhos4-node4)
- * Stop    cinder-volume:0	(Started rhos4-node4)
- * Stop    cinder-api:1	(Started rhos4-node3)
- * Stop    cinder-scheduler:1	(Started rhos4-node3)
- * Stop    cinder-volume:1	(Started rhos4-node3)
+ * Stop    qpidd:0	(rhos4-node4)  	due to node availability
+ * Stop    qpidd:1	(rhos4-node3)  	due to node availability
+ * Stop    keystone:0	(Started rhos4-node4) 	due to unrunnable qpidd-clone running
+ * Stop    keystone:1	(Started rhos4-node3) 	due to unrunnable qpidd-clone running
+ * Stop    glance-fs:0	(Started rhos4-node4) 	due to required keystone-clone running
+ * Stop    glance-registry:0	(Started rhos4-node4) 	due to required glance-fs:0 start
+ * Stop    glance-api:0	(Started rhos4-node4) 	due to required glance-registry:0 start
+ * Stop    glance-fs:1	(Started rhos4-node3) 	due to required keystone-clone running
+ * Stop    glance-registry:1	(Started rhos4-node3) 	due to required glance-fs:1 start
+ * Stop    glance-api:1	(Started rhos4-node3) 	due to required glance-registry:1 start
+ * Stop    cinder-api:0	(Started rhos4-node4) 	due to required glance-clone running
+ * Stop    cinder-scheduler:0	(Started rhos4-node4) 	due to required cinder-api:0 start
+ * Stop    cinder-volume:0	(Started rhos4-node4) 	due to required cinder-scheduler:0 start
+ * Stop    cinder-api:1	(Started rhos4-node3) 	due to required glance-clone running
+ * Stop    cinder-scheduler:1	(Started rhos4-node3) 	due to required cinder-api:1 start
+ * Stop    cinder-volume:1	(Started rhos4-node3) 	due to required cinder-scheduler:1 start
 
 Executing cluster transition:
  * Pseudo action:   cinder-clone_stop_0
diff --git a/pengine/test10/cloned-group.summary b/pengine/test10/cloned-group.summary
index 7d64be4..e1456b9 100644
--- a/pengine/test10/cloned-group.summary
+++ b/pengine/test10/cloned-group.summary
@@ -12,9 +12,9 @@ OFFLINE: [ webcluster02 ]
 
 Transition Summary:
  * Restart apache2:0	(Started webcluster01)
- * Restart mysql-proxy:0	(Started webcluster01)
- * Stop    apache2:2	(webcluster01)
- * Stop    mysql-proxy:2	(webcluster01)
+ * Restart mysql-proxy:0	(Started webcluster01) 	due to required apache2:0 start
+ * Stop    apache2:2	(webcluster01)  	due to node availability
+ * Stop    mysql-proxy:2	(webcluster01)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   apache2_clone_stop_0
diff --git a/pengine/test10/cloned_start_one.summary b/pengine/test10/cloned_start_one.summary
index 20ac58f..5dedc18 100644
--- a/pengine/test10/cloned_start_one.summary
+++ b/pengine/test10/cloned_start_one.summary
@@ -13,8 +13,8 @@ Online: [ c7auto1 c7auto4 ]
 
 Transition Summary:
  * Start   FAKECLONE:0	(c7auto1)
- * Stop    FAKECLONE2:0	(c7auto3)
- * Stop    FAKECLONE2:1	(Started c7auto4)
+ * Stop    FAKECLONE2:0	(c7auto3)  	due to node availability
+ * Stop    FAKECLONE2:1	(Started c7auto4) 	due to unrunnable clone-one-or-more:order-FAKECLONE-clone-FAKECLONE2-clone-mandatory
 
 Executing cluster transition:
  * Pseudo action:   FAKECLONE-clone_start_0
diff --git a/pengine/test10/cloned_start_two.summary b/pengine/test10/cloned_start_two.summary
index bea4609..2b47881 100644
--- a/pengine/test10/cloned_start_two.summary
+++ b/pengine/test10/cloned_start_two.summary
@@ -13,7 +13,7 @@ Online: [ c7auto1 c7auto2 c7auto4 ]
 Transition Summary:
  * Start   FAKECLONE:0	(c7auto2)
  * Start   FAKECLONE:1	(c7auto1)
- * Stop    FAKECLONE2:0	(c7auto3)
+ * Stop    FAKECLONE2:0	(c7auto3)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   FAKECLONE-clone_start_0
diff --git a/pengine/test10/cloned_stop_one.summary b/pengine/test10/cloned_stop_one.summary
index 1a952a2..892548d 100644
--- a/pengine/test10/cloned_stop_one.summary
+++ b/pengine/test10/cloned_stop_one.summary
@@ -12,8 +12,8 @@ Online: [ c7auto1 c7auto2 c7auto4 ]
      Stopped: [ c7auto1 c7auto2 ]
 
 Transition Summary:
- * Stop    FAKECLONE:2	(c7auto3)
- * Stop    FAKECLONE2:0	(c7auto3)
+ * Stop    FAKECLONE:2	(c7auto3)  	due to node availability
+ * Stop    FAKECLONE2:0	(c7auto3)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   FAKECLONE2-clone_stop_0
diff --git a/pengine/test10/cloned_stop_two.summary b/pengine/test10/cloned_stop_two.summary
index 531295f..8f1e039 100644
--- a/pengine/test10/cloned_stop_two.summary
+++ b/pengine/test10/cloned_stop_two.summary
@@ -13,10 +13,10 @@ Online: [ c7auto1 c7auto4 ]
      Stopped: [ c7auto1 c7auto2 ]
 
 Transition Summary:
- * Stop    FAKECLONE:1	(c7auto2)
- * Stop    FAKECLONE:2	(c7auto3)
- * Stop    FAKECLONE2:0	(c7auto3)
- * Stop    FAKECLONE2:1	(Started c7auto4)
+ * Stop    FAKECLONE:1	(c7auto2)  	due to node availability
+ * Stop    FAKECLONE:2	(c7auto3)  	due to node availability
+ * Stop    FAKECLONE2:0	(c7auto3)  	due to node availability
+ * Stop    FAKECLONE2:1	(Started c7auto4) 	due to unrunnable clone-one-or-more:order-FAKECLONE-clone-FAKECLONE2-clone-mandatory
 
 Executing cluster transition:
  * Pseudo action:   FAKECLONE2-clone_stop_0
diff --git a/pengine/test10/colocation_constraint_stops_slave.summary b/pengine/test10/colocation_constraint_stops_slave.summary
index fe9e044..a97b74b 100644
--- a/pengine/test10/colocation_constraint_stops_slave.summary
+++ b/pengine/test10/colocation_constraint_stops_slave.summary
@@ -9,7 +9,7 @@ OFFLINE: [ fc16-builder2 ]
  NATIVE_RSC_B	(ocf::pacemaker:Dummy):	Started fc16-builder ( disabled ) 
 
 Transition Summary:
- * Stop    NATIVE_RSC_A:0	(fc16-builder)
+ * Stop    NATIVE_RSC_A:0	(fc16-builder)  	due to node availability
  * Stop    NATIVE_RSC_B	(fc16-builder)
 
 Executing cluster transition:
diff --git a/pengine/test10/complex_enforce_colo.summary b/pengine/test10/complex_enforce_colo.summary
index dd838b2..a21d5c1 100644
--- a/pengine/test10/complex_enforce_colo.summary
+++ b/pengine/test10/complex_enforce_colo.summary
@@ -102,17 +102,17 @@ Online: [ rhos6-node1 rhos6-node2 rhos6-node3 ]
      Started: [ rhos6-node1 rhos6-node2 rhos6-node3 ]
 
 Transition Summary:
- * Stop    keystone:0	(rhos6-node1)
- * Stop    keystone:1	(rhos6-node2)
- * Stop    keystone:2	(rhos6-node3)
+ * Stop    keystone:0	(rhos6-node1)  	due to node availability
+ * Stop    keystone:1	(rhos6-node2)  	due to node availability
+ * Stop    keystone:2	(rhos6-node3)  	due to node availability
  * Stop    glance-registry:0	(rhos6-node1)
  * Stop    glance-registry:1	(rhos6-node2)
  * Stop    glance-registry:2	(rhos6-node3)
  * Stop    glance-api:0	(rhos6-node1)
  * Stop    glance-api:1	(rhos6-node2)
  * Stop    glance-api:2	(rhos6-node3)
- * Stop    cinder-api	(Started rhos6-node1)
- * Stop    cinder-scheduler	(Started rhos6-node1)
+ * Stop    cinder-api	(Started rhos6-node1) 	due to unrunnable keystone-clone running
+ * Stop    cinder-scheduler	(Started rhos6-node1) 	due to required cinder-api start
  * Stop    cinder-volume	(Started rhos6-node1)
  * Stop    swift-account:0	(rhos6-node1)
  * Stop    swift-account:1	(rhos6-node2)
@@ -126,7 +126,7 @@ Transition Summary:
  * Stop    swift-proxy:0	(rhos6-node1)
  * Stop    swift-proxy:1	(rhos6-node2)
  * Stop    swift-proxy:2	(rhos6-node3)
- * Stop    swift-object-expirer	(Started rhos6-node2)
+ * Stop    swift-object-expirer	(Started rhos6-node2) 	due to required swift-proxy-clone running
  * Stop    neutron-server:0	(rhos6-node1)
  * Stop    neutron-server:1	(rhos6-node2)
  * Stop    neutron-server:2	(rhos6-node3)
@@ -166,35 +166,35 @@ Transition Summary:
  * Stop    nova-conductor:0	(rhos6-node1)
  * Stop    nova-conductor:1	(rhos6-node2)
  * Stop    nova-conductor:2	(rhos6-node3)
- * Stop    ceilometer-central	(Started rhos6-node3)
- * Stop    ceilometer-collector:0	(Started rhos6-node1)
- * Stop    ceilometer-collector:1	(Started rhos6-node2)
- * Stop    ceilometer-collector:2	(Started rhos6-node3)
- * Stop    ceilometer-api:0	(Started rhos6-node1)
- * Stop    ceilometer-api:1	(Started rhos6-node2)
- * Stop    ceilometer-api:2	(Started rhos6-node3)
- * Stop    ceilometer-delay:0	(Started rhos6-node1)
- * Stop    ceilometer-delay:1	(Started rhos6-node2)
- * Stop    ceilometer-delay:2	(Started rhos6-node3)
- * Stop    ceilometer-alarm-evaluator:0	(Started rhos6-node1)
- * Stop    ceilometer-alarm-evaluator:1	(Started rhos6-node2)
- * Stop    ceilometer-alarm-evaluator:2	(Started rhos6-node3)
- * Stop    ceilometer-alarm-notifier:0	(Started rhos6-node1)
- * Stop    ceilometer-alarm-notifier:1	(Started rhos6-node2)
- * Stop    ceilometer-alarm-notifier:2	(Started rhos6-node3)
- * Stop    ceilometer-notification:0	(Started rhos6-node1)
- * Stop    ceilometer-notification:1	(Started rhos6-node2)
- * Stop    ceilometer-notification:2	(Started rhos6-node3)
- * Stop    heat-api:0	(Started rhos6-node1)
- * Stop    heat-api:1	(Started rhos6-node2)
- * Stop    heat-api:2	(Started rhos6-node3)
- * Stop    heat-api-cfn:0	(Started rhos6-node1)
- * Stop    heat-api-cfn:1	(Started rhos6-node2)
- * Stop    heat-api-cfn:2	(Started rhos6-node3)
- * Stop    heat-api-cloudwatch:0	(Started rhos6-node1)
- * Stop    heat-api-cloudwatch:1	(Started rhos6-node2)
- * Stop    heat-api-cloudwatch:2	(Started rhos6-node3)
- * Stop    heat-engine	(Started rhos6-node2)
+ * Stop    ceilometer-central	(Started rhos6-node3) 	due to unrunnable keystone-clone running
+ * Stop    ceilometer-collector:0	(Started rhos6-node1) 	due to required ceilometer-central start
+ * Stop    ceilometer-collector:1	(Started rhos6-node2) 	due to required ceilometer-central start
+ * Stop    ceilometer-collector:2	(Started rhos6-node3) 	due to required ceilometer-central start
+ * Stop    ceilometer-api:0	(Started rhos6-node1) 	due to required ceilometer-collector:0 start
+ * Stop    ceilometer-api:1	(Started rhos6-node2) 	due to required ceilometer-collector:1 start
+ * Stop    ceilometer-api:2	(Started rhos6-node3) 	due to required ceilometer-collector:2 start
+ * Stop    ceilometer-delay:0	(Started rhos6-node1) 	due to required ceilometer-api:0 start
+ * Stop    ceilometer-delay:1	(Started rhos6-node2) 	due to required ceilometer-api:1 start
+ * Stop    ceilometer-delay:2	(Started rhos6-node3) 	due to required ceilometer-api:2 start
+ * Stop    ceilometer-alarm-evaluator:0	(Started rhos6-node1) 	due to required ceilometer-delay:0 start
+ * Stop    ceilometer-alarm-evaluator:1	(Started rhos6-node2) 	due to required ceilometer-delay:1 start
+ * Stop    ceilometer-alarm-evaluator:2	(Started rhos6-node3) 	due to required ceilometer-delay:2 start
+ * Stop    ceilometer-alarm-notifier:0	(Started rhos6-node1) 	due to required ceilometer-alarm-evaluator:0 start
+ * Stop    ceilometer-alarm-notifier:1	(Started rhos6-node2) 	due to required ceilometer-alarm-evaluator:1 start
+ * Stop    ceilometer-alarm-notifier:2	(Started rhos6-node3) 	due to required ceilometer-alarm-evaluator:2 start
+ * Stop    ceilometer-notification:0	(Started rhos6-node1) 	due to required ceilometer-alarm-notifier:0 start
+ * Stop    ceilometer-notification:1	(Started rhos6-node2) 	due to required ceilometer-alarm-notifier:1 start
+ * Stop    ceilometer-notification:2	(Started rhos6-node3) 	due to required ceilometer-alarm-notifier:2 start
+ * Stop    heat-api:0	(Started rhos6-node1) 	due to required ceilometer-notification:0 start
+ * Stop    heat-api:1	(Started rhos6-node2) 	due to required ceilometer-notification:1 start
+ * Stop    heat-api:2	(Started rhos6-node3) 	due to required ceilometer-notification:2 start
+ * Stop    heat-api-cfn:0	(Started rhos6-node1) 	due to required heat-api:0 start
+ * Stop    heat-api-cfn:1	(Started rhos6-node2) 	due to required heat-api:1 start
+ * Stop    heat-api-cfn:2	(Started rhos6-node3) 	due to required heat-api:2 start
+ * Stop    heat-api-cloudwatch:0	(Started rhos6-node1) 	due to required heat-api-cfn:0 start
+ * Stop    heat-api-cloudwatch:1	(Started rhos6-node2) 	due to required heat-api-cfn:1 start
+ * Stop    heat-api-cloudwatch:2	(Started rhos6-node3) 	due to required heat-api-cfn:2 start
+ * Stop    heat-engine	(Started rhos6-node2) 	due to required heat-api-cloudwatch-clone running
 
 Executing cluster transition:
  * Pseudo action:   glance-api-clone_stop_0
diff --git a/pengine/test10/container-2.summary b/pengine/test10/container-2.summary
index b0c08b8..f011cd3 100644
--- a/pengine/test10/container-2.summary
+++ b/pengine/test10/container-2.summary
@@ -9,7 +9,7 @@ Online: [ node1 node2 ]
 Transition Summary:
  * Restart container1	(Started node1)
  * Recover rsc1	(Started node1)
- * Restart rsc2	(Started node1)
+ * Restart rsc2	(Started node1) 	due to required container1 start
 
 Executing cluster transition:
  * Resource action: rsc1            stop on node1
diff --git a/pengine/test10/container-3.summary b/pengine/test10/container-3.summary
index 194c687..f853ab2 100644
--- a/pengine/test10/container-3.summary
+++ b/pengine/test10/container-3.summary
@@ -9,7 +9,7 @@ Online: [ node1 node2 ]
 Transition Summary:
  * Restart container1	(Started node1)
  * Start   rsc1	(node1)
- * Restart rsc2	(Started node1)
+ * Restart rsc2	(Started node1) 	due to required container1 start
 
 Executing cluster transition:
  * Resource action: rsc2            stop on node1
diff --git a/pengine/test10/container-group-2.summary b/pengine/test10/container-group-2.summary
index 4451c63..c0dbbf8 100644
--- a/pengine/test10/container-group-2.summary
+++ b/pengine/test10/container-group-2.summary
@@ -10,7 +10,7 @@ Online: [ node1 node2 ]
 Transition Summary:
  * Restart container1	(Started node1)
  * Recover rsc1	(Started node1)
- * Restart rsc2	(Started node1)
+ * Restart rsc2	(Started node1) 	due to required rsc1 start
 
 Executing cluster transition:
  * Pseudo action:   container-group_stop_0
diff --git a/pengine/test10/enforce-colo1.summary b/pengine/test10/enforce-colo1.summary
index 9859073..b79b8cb 100644
--- a/pengine/test10/enforce-colo1.summary
+++ b/pengine/test10/enforce-colo1.summary
@@ -11,10 +11,10 @@ Online: [ rhel7-auto1 rhel7-auto2 rhel7-auto3 ]
 
 Transition Summary:
  * Stop    engine	(Started rhel7-auto3)
- * Stop    keystone:0	(rhel7-auto2)
- * Stop    keystone:1	(rhel7-auto3)
- * Stop    keystone:2	(rhel7-auto1)
- * Stop    central	(Started rhel7-auto3)
+ * Stop    keystone:0	(rhel7-auto2)  	due to node availability
+ * Stop    keystone:1	(rhel7-auto3)  	due to node availability
+ * Stop    keystone:2	(rhel7-auto1)  	due to node availability
+ * Stop    central	(Started rhel7-auto3) 	due to unrunnable keystone-clone running
 
 Executing cluster transition:
  * Resource action: engine          stop on rhel7-auto3
diff --git a/pengine/test10/group-fail.summary b/pengine/test10/group-fail.summary
index aa03d21..9067bf6 100644
--- a/pengine/test10/group-fail.summary
+++ b/pengine/test10/group-fail.summary
@@ -10,9 +10,9 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Start   rsc1	(node1)
- * Restart rsc2	(Started node1)
+ * Restart rsc2	(Started node1) 	due to required rsc1 start
  * Start   rsc3	(node1)
- * Restart rsc4	(Started node1)
+ * Restart rsc4	(Started node1) 	due to required rsc3 start
 
 Executing cluster transition:
  * Pseudo action:   group1_stop_0
diff --git a/pengine/test10/group-unmanaged-stopped.summary b/pengine/test10/group-unmanaged-stopped.summary
index 9f542ff..de0586a 100644
--- a/pengine/test10/group-unmanaged-stopped.summary
+++ b/pengine/test10/group-unmanaged-stopped.summary
@@ -8,7 +8,7 @@ Online: [ pcmk-1 pcmk-2 ]
      r192.168.122.115	(ocf::heartbeat:IPaddr2):	Started pcmk-1 
 
 Transition Summary:
- * Stop    r192.168.122.115	(pcmk-1)
+ * Stop    r192.168.122.115	(pcmk-1)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group-1_stop_0
diff --git a/pengine/test10/group10.summary b/pengine/test10/group10.summary
index c630a21..570fd28 100644
--- a/pengine/test10/group10.summary
+++ b/pengine/test10/group10.summary
@@ -19,8 +19,8 @@ Online: [ c001n01 c001n02 c001n03 c001n08 ]
 
 Transition Summary:
  * Recover child_192.168.100.181	(Started c001n01)
- * Restart child_192.168.100.182	(Started c001n01)
- * Restart child_192.168.100.183	(Started c001n01)
+ * Restart child_192.168.100.182	(Started c001n01) 	due to required child_192.168.100.181 start
+ * Restart child_192.168.100.183	(Started c001n01) 	due to required child_192.168.100.182 start
 
 Executing cluster transition:
  * Pseudo action:   group-1_stop_0
diff --git a/pengine/test10/group11.summary b/pengine/test10/group11.summary
index 9619e51..204d632 100644
--- a/pengine/test10/group11.summary
+++ b/pengine/test10/group11.summary
@@ -9,8 +9,8 @@ Online: [ node1 ]
      rsc3	(heartbeat:apache):	Started node1
 
 Transition Summary:
- * Stop    rsc2	(node1)
- * Stop    rsc3	(node1)
+ * Stop    rsc2	(node1)  	due to node availability
+ * Stop    rsc3	(node1)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group1_stop_0
diff --git a/pengine/test10/group13.summary b/pengine/test10/group13.summary
index e728b2e..5f92a4f 100644
--- a/pengine/test10/group13.summary
+++ b/pengine/test10/group13.summary
@@ -8,7 +8,7 @@ Online: [ jamesltc ]
      resource_fs	(ocf::heartbeat:Filesystem):	Stopped 
 
 Transition Summary:
- * Stop    resource_nfs	(jamesltc)
+ * Stop    resource_nfs	(jamesltc)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   nfs_stop_0
diff --git a/pengine/test10/group14.summary b/pengine/test10/group14.summary
index 451aeda..69e688b 100644
--- a/pengine/test10/group14.summary
+++ b/pengine/test10/group14.summary
@@ -33,24 +33,24 @@ OFFLINE: [ c001n02 c001n03 c001n04 c001n05 ]
      ocf_msdummy:11	(ocf::heartbeat:Stateful):	Stopped 
 
 Transition Summary:
- * Start   DcIPaddr	(c001n06 - blocked)
- * Stop    r192.168.100.181	(Started c001n06)
- * Start   r192.168.100.182	(c001n07 - blocked)
- * Start   r192.168.100.183	(c001n07 - blocked)
- * Start   lsb_dummy	(c001n06 - blocked)
- * Start   migrator	(c001n06 - blocked)
- * Start   rsc_c001n03	(c001n06 - blocked)
- * Start   rsc_c001n02	(c001n07 - blocked)
- * Start   rsc_c001n04	(c001n06 - blocked)
- * Start   rsc_c001n05	(c001n07 - blocked)
- * Start   rsc_c001n06	(c001n06 - blocked)
- * Start   rsc_c001n07	(c001n07 - blocked)
+ * Start   DcIPaddr	(c001n06 - blocked) 	due to no quorum
+ * Stop    r192.168.100.181	(Started c001n06) 	due to no quorum
+ * Start   r192.168.100.182	(c001n07 - blocked) 	due to no quorum
+ * Start   r192.168.100.183	(c001n07 - blocked) 	due to no quorum
+ * Start   lsb_dummy	(c001n06 - blocked) 	due to no quorum
+ * Start   migrator	(c001n06 - blocked) 	due to no quorum
+ * Start   rsc_c001n03	(c001n06 - blocked) 	due to no quorum
+ * Start   rsc_c001n02	(c001n07 - blocked) 	due to no quorum
+ * Start   rsc_c001n04	(c001n06 - blocked) 	due to no quorum
+ * Start   rsc_c001n05	(c001n07 - blocked) 	due to no quorum
+ * Start   rsc_c001n06	(c001n06 - blocked) 	due to no quorum
+ * Start   rsc_c001n07	(c001n07 - blocked) 	due to no quorum
  * Start   child_DoFencing:0	(c001n06)
  * Start   child_DoFencing:1	(c001n07)
- * Start   ocf_msdummy:0	(c001n06 - blocked)
- * Start   ocf_msdummy:1	(c001n07 - blocked)
- * Start   ocf_msdummy:2	(c001n06 - blocked)
- * Start   ocf_msdummy:3	(c001n07 - blocked)
+ * Start   ocf_msdummy:0	(c001n06 - blocked) 	due to no quorum
+ * Start   ocf_msdummy:1	(c001n07 - blocked) 	due to no quorum
+ * Start   ocf_msdummy:2	(c001n06 - blocked) 	due to no quorum
+ * Start   ocf_msdummy:3	(c001n07 - blocked) 	due to no quorum
 
 Executing cluster transition:
  * Pseudo action:   group-1_stop_0
diff --git a/pengine/test10/group9.summary b/pengine/test10/group9.summary
index 6989f1d..f6755b9 100644
--- a/pengine/test10/group9.summary
+++ b/pengine/test10/group9.summary
@@ -15,7 +15,7 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Recover rsc4	(Started node1)
- * Restart rsc5	(Started node1)
+ * Restart rsc5	(Started node1) 	due to required rsc4 start
  * Move    rsc6	(Started node1 -> node2)
  * Recover rsc7	(Started node1 -> node2)
  * Move    rsc8	(Started node1 -> node2)
diff --git a/pengine/test10/inc10.summary b/pengine/test10/inc10.summary
index 77552e7..053a9ba 100644
--- a/pengine/test10/inc10.summary
+++ b/pengine/test10/inc10.summary
@@ -9,8 +9,8 @@ Online: [ xen-1 xen-3 xen-4 ]
      Started: [ xen-1 xen-2 xen-3 xen-4 ]
 
 Transition Summary:
- * Stop    child_DoFencing:1	(xen-2)
- * Stop    ocfs2:1	(xen-2)
+ * Stop    child_DoFencing:1	(xen-2)  	due to node availability
+ * Stop    ocfs2:1	(xen-2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   DoFencing_stop_0
diff --git a/pengine/test10/inc12.summary b/pengine/test10/inc12.summary
index 5068b7e..e950c67 100644
--- a/pengine/test10/inc12.summary
+++ b/pengine/test10/inc12.summary
@@ -38,9 +38,9 @@ Transition Summary:
  * Shutdown c001n04
  * Shutdown c001n03
  * Shutdown c001n02
- * Stop    ocf_192.168.100.181	(c001n02)
- * Stop    heartbeat_192.168.100.182	(c001n02)
- * Stop    ocf_192.168.100.183	(c001n02)
+ * Stop    ocf_192.168.100.181	(c001n02)  	due to node availability
+ * Stop    heartbeat_192.168.100.182	(c001n02)  	due to node availability
+ * Stop    ocf_192.168.100.183	(c001n02)  	due to node availability
  * Stop    lsb_dummy	(c001n04)
  * Stop    rsc_c001n03	(c001n05)
  * Stop    rsc_c001n02	(c001n02)
@@ -48,21 +48,21 @@ Transition Summary:
  * Stop    rsc_c001n05	(c001n05)
  * Stop    rsc_c001n06	(c001n06)
  * Stop    rsc_c001n07	(c001n07)
- * Stop    child_DoFencing:0	(c001n02)
- * Stop    child_DoFencing:1	(c001n04)
- * Stop    child_DoFencing:2	(c001n05)
- * Stop    child_DoFencing:3	(c001n06)
- * Stop    child_DoFencing:4	(c001n07)
- * Stop    ocf_msdummy:10	(c001n02)
- * Stop    ocf_msdummy:11	(c001n02)
- * Stop    ocf_msdummy:2	(c001n04)
- * Stop    ocf_msdummy:3	(c001n04)
- * Stop    ocf_msdummy:4	(c001n05)
- * Stop    ocf_msdummy:5	(c001n05)
- * Stop    ocf_msdummy:6	(c001n06)
- * Stop    ocf_msdummy:7	(c001n06)
- * Stop    ocf_msdummy:8	(c001n07)
- * Stop    ocf_msdummy:9	(c001n07)
+ * Stop    child_DoFencing:0	(c001n02)  	due to node availability
+ * Stop    child_DoFencing:1	(c001n04)  	due to node availability
+ * Stop    child_DoFencing:2	(c001n05)  	due to node availability
+ * Stop    child_DoFencing:3	(c001n06)  	due to node availability
+ * Stop    child_DoFencing:4	(c001n07)  	due to node availability
+ * Stop    ocf_msdummy:10	(c001n02)  	due to node availability
+ * Stop    ocf_msdummy:11	(c001n02)  	due to node availability
+ * Stop    ocf_msdummy:2	(c001n04)  	due to node availability
+ * Stop    ocf_msdummy:3	(c001n04)  	due to node availability
+ * Stop    ocf_msdummy:4	(c001n05)  	due to node availability
+ * Stop    ocf_msdummy:5	(c001n05)  	due to node availability
+ * Stop    ocf_msdummy:6	(c001n06)  	due to node availability
+ * Stop    ocf_msdummy:7	(c001n06)  	due to node availability
+ * Stop    ocf_msdummy:8	(c001n07)  	due to node availability
+ * Stop    ocf_msdummy:9	(c001n07)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group-1_stop_0
diff --git a/pengine/test10/inc2.summary b/pengine/test10/inc2.summary
index 7c6a9bb..898729f 100644
--- a/pengine/test10/inc2.summary
+++ b/pengine/test10/inc2.summary
@@ -12,7 +12,7 @@ Online: [ node1 node2 ]
 Transition Summary:
  * Move    child_rsc1:2	(Started node1 -> node2)
  * Move    child_rsc1:3	(Started node1 -> node2)
- * Stop    child_rsc1:4	(node1)
+ * Stop    child_rsc1:4	(node1)  	due to node availability
 
 Executing cluster transition:
  * Resource action: child_rsc1:0    monitor on node2
diff --git a/pengine/test10/inc3.summary b/pengine/test10/inc3.summary
index adc59e7..955ff3b 100644
--- a/pengine/test10/inc3.summary
+++ b/pengine/test10/inc3.summary
@@ -18,7 +18,7 @@ Online: [ node1 node2 ]
 Transition Summary:
  * Move    child_rsc1:2	(Started node1 -> node2)
  * Move    child_rsc1:3	(Started node1 -> node2)
- * Stop    child_rsc1:4	(node1)
+ * Stop    child_rsc1:4	(node1)  	due to node availability
  * Move    child_rsc2:3	(Started node2 -> node1)
  * Move    child_rsc2:4	(Started node2 -> node1)
 
diff --git a/pengine/test10/inc4.summary b/pengine/test10/inc4.summary
index 03947cd..e730360 100644
--- a/pengine/test10/inc4.summary
+++ b/pengine/test10/inc4.summary
@@ -18,7 +18,7 @@ Online: [ node1 node2 ]
 Transition Summary:
  * Move    child_rsc1:2	(Started node1 -> node2)
  * Move    child_rsc1:3	(Started node1 -> node2)
- * Stop    child_rsc1:4	(node1)
+ * Stop    child_rsc1:4	(node1)  	due to node availability
  * Move    child_rsc2:3	(Started node2 -> node1)
  * Move    child_rsc2:4	(Started node2 -> node1)
 
diff --git a/pengine/test10/inc6.summary b/pengine/test10/inc6.summary
index cf84c1f..4c754d7 100644
--- a/pengine/test10/inc6.summary
+++ b/pengine/test10/inc6.summary
@@ -31,8 +31,8 @@ Transition Summary:
  * Move    child_rsc2:1	(Started node1 -> node2)
  * Move    child_rsc4:1	(Started node1 -> node2)
  * Move    child_rsc5:1	(Started node2 -> node1)
- * Restart child_rsc6:0	(Started node1)
- * Restart child_rsc6:1	(Started node2)
+ * Restart child_rsc6:0	(Started node1) 	due to required rsc5 running
+ * Restart child_rsc6:1	(Started node2) 	due to required rsc5 running
  * Move    child_rsc7:1	(Started node2 -> node1)
 
 Executing cluster transition:
diff --git a/pengine/test10/inc9.summary b/pengine/test10/inc9.summary
index 5a7f123..3c35aee 100644
--- a/pengine/test10/inc9.summary
+++ b/pengine/test10/inc9.summary
@@ -9,9 +9,9 @@ Online: [ node1 node2 ]
      Started: [ node1 node2 ]
 
 Transition Summary:
- * Stop    child_rsc1:5	(node1)
- * Stop    child_rsc1:6	(node1)
- * Stop    child_rsc1:7	(node2)
+ * Stop    child_rsc1:5	(node1)  	due to node availability
+ * Stop    child_rsc1:6	(node1)  	due to node availability
+ * Stop    child_rsc1:7	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   rsc1_stop_0
diff --git a/pengine/test10/interleave-pseudo-stop.summary b/pengine/test10/interleave-pseudo-stop.summary
index 01ce0ec..ee3fa29 100644
--- a/pengine/test10/interleave-pseudo-stop.summary
+++ b/pengine/test10/interleave-pseudo-stop.summary
@@ -18,10 +18,10 @@ Online: [ node2 ]
 
 Transition Summary:
  * Fence (reboot) node1 'peer is no longer part of the cluster'
- * Stop    stonithclone:1	(node1)
- * Stop    evmsclone:1	(node1)
- * Stop    imagestoreclone:1	(node1)
- * Stop    configstoreclone:1	(node1)
+ * Stop    stonithclone:1	(node1)  	due to node availability
+ * Stop    evmsclone:1	(node1)  	due to node availability
+ * Stop    imagestoreclone:1	(node1)  	due to node availability
+ * Stop    configstoreclone:1	(node1)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   evmscloneset_pre_notify_stop_0
diff --git a/pengine/test10/interleave-restart.summary b/pengine/test10/interleave-restart.summary
index 7f1b1e4..5ac19b9 100644
--- a/pengine/test10/interleave-restart.summary
+++ b/pengine/test10/interleave-restart.summary
@@ -14,8 +14,8 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Recover evmsclone:1	(Started node1)
- * Restart imagestoreclone:1	(Started node1)
- * Restart configstoreclone:1	(Started node1)
+ * Restart imagestoreclone:1	(Started node1) 	due to required evmsclone:1 start
+ * Restart configstoreclone:1	(Started node1) 	due to required evmsclone:1 start
 
 Executing cluster transition:
  * Pseudo action:   evmscloneset_pre_notify_stop_0
diff --git a/pengine/test10/interleave-stop.summary b/pengine/test10/interleave-stop.summary
index b5a1a98..529e33a 100644
--- a/pengine/test10/interleave-stop.summary
+++ b/pengine/test10/interleave-stop.summary
@@ -13,10 +13,10 @@ Online: [ node2 ]
      Started: [ node1 node2 ]
 
 Transition Summary:
- * Stop    stonithclone:1	(node1)
- * Stop    evmsclone:1	(node1)
- * Stop    imagestoreclone:1	(node1)
- * Stop    configstoreclone:1	(node1)
+ * Stop    stonithclone:1	(node1)  	due to node availability
+ * Stop    evmsclone:1	(node1)  	due to node availability
+ * Stop    imagestoreclone:1	(node1)  	due to node availability
+ * Stop    configstoreclone:1	(node1)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   stonithcloneset_stop_0
diff --git a/pengine/test10/master-7.summary b/pengine/test10/master-7.summary
index 4c58184..58ef275 100644
--- a/pengine/test10/master-7.summary
+++ b/pengine/test10/master-7.summary
@@ -36,9 +36,9 @@ Transition Summary:
  * Move    ocf_192.168.100.183	(Started c001n03 -> c001n02)
  * Move    lsb_dummy	(Started c001n02 -> c001n08)
  * Move    rsc_c001n01	(Started c001n01 -> c001n03)
- * Stop    child_DoFencing:0	(c001n01)
+ * Stop    child_DoFencing:0	(c001n01)  	due to node availability
  * Demote  ocf_msdummy:0	(Master -> Stopped c001n01)
- * Stop    ocf_msdummy:4	(c001n01)
+ * Stop    ocf_msdummy:4	(c001n01)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group-1_stop_0
diff --git a/pengine/test10/master-8.summary b/pengine/test10/master-8.summary
index e8d90d2..c18e884 100644
--- a/pengine/test10/master-8.summary
+++ b/pengine/test10/master-8.summary
@@ -36,7 +36,7 @@ Transition Summary:
  * Move    ocf_192.168.100.183	(Started c001n03 -> c001n02)
  * Move    lsb_dummy	(Started c001n02 -> c001n08)
  * Move    rsc_c001n01	(Started c001n01 -> c001n03)
- * Stop    child_DoFencing:0	(c001n01)
+ * Stop    child_DoFencing:0	(c001n01)  	due to node availability
  * Demote  ocf_msdummy:0	(Master -> Slave c001n01 - blocked)
  * Move    ocf_msdummy:0	(Slave c001n01 -> c001n03)
 
diff --git a/pengine/test10/master-9.summary b/pengine/test10/master-9.summary
index c1cd4a1..ef59602 100644
--- a/pengine/test10/master-9.summary
+++ b/pengine/test10/master-9.summary
@@ -31,18 +31,18 @@ Online: [ ibm1 va1 ]
 
 Transition Summary:
  * Shutdown ibm1
- * Start   DcIPaddr	(va1 - blocked)
- * Start   ocf_127.0.0.11	(va1 - blocked)
- * Start   heartbeat_127.0.0.12	(va1 - blocked)
- * Start   ocf_127.0.0.13	(va1 - blocked)
- * Start   lsb_dummy	(va1 - blocked)
- * Start   rsc_sgi2	(va1 - blocked)
- * Start   rsc_ibm1	(va1 - blocked)
- * Start   rsc_va1	(va1 - blocked)
- * Start   rsc_test02	(va1 - blocked)
- * Stop    child_DoFencing:1	(ibm1)
- * Start   ocf_msdummy:0	(va1 - blocked)
- * Start   ocf_msdummy:1	(va1 - blocked)
+ * Start   DcIPaddr	(va1 - blocked) 	due to no quorum
+ * Start   ocf_127.0.0.11	(va1 - blocked) 	due to no quorum
+ * Start   heartbeat_127.0.0.12	(va1 - blocked) 	due to no quorum
+ * Start   ocf_127.0.0.13	(va1 - blocked) 	due to no quorum
+ * Start   lsb_dummy	(va1 - blocked) 	due to no quorum
+ * Start   rsc_sgi2	(va1 - blocked) 	due to no quorum
+ * Start   rsc_ibm1	(va1 - blocked) 	due to no quorum
+ * Start   rsc_va1	(va1 - blocked) 	due to no quorum
+ * Start   rsc_test02	(va1 - blocked) 	due to no quorum
+ * Stop    child_DoFencing:1	(ibm1)  	due to node availability
+ * Start   ocf_msdummy:0	(va1 - blocked) 	due to no quorum
+ * Start   ocf_msdummy:1	(va1 - blocked) 	due to no quorum
 
 Executing cluster transition:
  * Resource action: child_DoFencing:1 monitor on va1
diff --git a/pengine/test10/master-asymmetrical-order.summary b/pengine/test10/master-asymmetrical-order.summary
index 1ff2836..d09f62e 100644
--- a/pengine/test10/master-asymmetrical-order.summary
+++ b/pengine/test10/master-asymmetrical-order.summary
@@ -12,7 +12,7 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Demote  rsc1:0	(Master -> Stopped node1)
- * Stop    rsc1:1	(node2)
+ * Stop    rsc1:1	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   ms1_demote_0
diff --git a/pengine/test10/master-failed-demote-2.summary b/pengine/test10/master-failed-demote-2.summary
index 847e0a1..086d02e 100644
--- a/pengine/test10/master-failed-demote-2.summary
+++ b/pengine/test10/master-failed-demote-2.summary
@@ -11,7 +11,7 @@ Online: [ dl380g5a dl380g5b ]
          stateful-2:1	(ocf::heartbeat:Stateful):	Slave dl380g5a 
 
 Transition Summary:
- * Stop    stateful-1:0	(dl380g5b)
+ * Stop    stateful-1:0	(dl380g5b)  	due to node availability
  * Promote stateful-1:1	(Slave -> Master dl380g5a)
  * Promote stateful-2:1	(Slave -> Master dl380g5a)
 
diff --git a/pengine/test10/master-failed-demote.summary b/pengine/test10/master-failed-demote.summary
index cc3fbee..0f6c410 100644
--- a/pengine/test10/master-failed-demote.summary
+++ b/pengine/test10/master-failed-demote.summary
@@ -11,7 +11,7 @@ Online: [ dl380g5a dl380g5b ]
          stateful-2:1	(ocf::heartbeat:Stateful):	Slave dl380g5a 
 
 Transition Summary:
- * Stop    stateful-1:0	(dl380g5b)
+ * Stop    stateful-1:0	(dl380g5b)  	due to node availability
  * Promote stateful-1:1	(Slave -> Master dl380g5a)
  * Promote stateful-2:1	(Slave -> Master dl380g5a)
 
diff --git a/pengine/test10/master-pseudo.summary b/pengine/test10/master-pseudo.summary
index 4ac7605..2ee2d03 100644
--- a/pengine/test10/master-pseudo.summary
+++ b/pengine/test10/master-pseudo.summary
@@ -12,7 +12,7 @@ Online: [ sambuca.linbit ]
 
 Transition Summary:
  * Start   ip_float_right	(sambuca.linbit)
- * Restart drbd_float:0	(Slave sambuca.linbit)
+ * Restart drbd_float:0	(Slave sambuca.linbit) 	due to required ip_float_right start
  * Promote drbd_float:0	(Slave -> Master sambuca.linbit)
  * Start   ip_nfs	(sambuca.linbit)
 
diff --git a/pengine/test10/master-stop.summary b/pengine/test10/master-stop.summary
index cbe6683..8b802d4 100644
--- a/pengine/test10/master-stop.summary
+++ b/pengine/test10/master-stop.summary
@@ -6,7 +6,7 @@ Online: [ node1 node2 node3 ]
      Slaves: [ node1 node2 node3 ]
 
 Transition Summary:
- * Stop    dummy:2	(node3)
+ * Stop    dummy:2	(node3)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   m_stop_0
diff --git a/pengine/test10/migrate-5.summary b/pengine/test10/migrate-5.summary
index 9a98330..a9d5771 100644
--- a/pengine/test10/migrate-5.summary
+++ b/pengine/test10/migrate-5.summary
@@ -9,7 +9,7 @@ Online: [ dom0-01 ]
 
 Transition Summary:
  * Migrate domU-test01	(Started dom0-02 -> dom0-01)
- * Stop    dom0-iscsi1-cnx1:1	(dom0-02)
+ * Stop    dom0-iscsi1-cnx1:1	(dom0-02)  	due to node availability
 
 Executing cluster transition:
  * Resource action: domU-test01     migrate_to on dom0-02
diff --git a/pengine/test10/migrate-both-vms.summary b/pengine/test10/migrate-both-vms.summary
index 531fd4c..5b60727 100644
--- a/pengine/test10/migrate-both-vms.summary
+++ b/pengine/test10/migrate-both-vms.summary
@@ -22,16 +22,16 @@ Online: [ cvmh01 cvmh02 ]
  vm-swbuildsl6	(ocf::ccni:xcatVirtualDomain):	Started cvmh04 
 
 Transition Summary:
- * Stop    fs-libvirt-VM-xcm:0	(cvmh04)
- * Stop    fs-libvirt-VM-xcm:2	(cvmh03)
- * Stop    p-watch-ib0:0	(cvmh04)
- * Stop    p-watch-ib0:2	(cvmh03)
- * Stop    p-fs-gpfs:0	(cvmh04)
- * Stop    p-fs-gpfs:2	(cvmh03)
- * Stop    p-libvirtd:0	(cvmh04)
- * Stop    p-libvirtd:2	(cvmh03)
- * Stop    fs-bind-libvirt-VM-cvmh:0	(cvmh04)
- * Stop    fs-bind-libvirt-VM-cvmh:2	(cvmh03)
+ * Stop    fs-libvirt-VM-xcm:0	(cvmh04)  	due to node availability
+ * Stop    fs-libvirt-VM-xcm:2	(cvmh03)  	due to node availability
+ * Stop    p-watch-ib0:0	(cvmh04)  	due to node availability
+ * Stop    p-watch-ib0:2	(cvmh03)  	due to node availability
+ * Stop    p-fs-gpfs:0	(cvmh04)  	due to node availability
+ * Stop    p-fs-gpfs:2	(cvmh03)  	due to node availability
+ * Stop    p-libvirtd:0	(cvmh04)  	due to node availability
+ * Stop    p-libvirtd:2	(cvmh03)  	due to node availability
+ * Stop    fs-bind-libvirt-VM-cvmh:0	(cvmh04)  	due to node availability
+ * Stop    fs-bind-libvirt-VM-cvmh:2	(cvmh03)  	due to node availability
  * Migrate vm-compute-test	(Started cvmh03 -> cvmh01)
  * Migrate vm-swbuildsl6	(Started cvmh04 -> cvmh02)
 
diff --git a/pengine/test10/migrate-fencing.summary b/pengine/test10/migrate-fencing.summary
index 7468fe2..cfd4eb8 100644
--- a/pengine/test10/migrate-fencing.summary
+++ b/pengine/test10/migrate-fencing.summary
@@ -23,14 +23,14 @@ Online: [ pcmk-1 pcmk-2 pcmk-3 ]
 
 Transition Summary:
  * Fence (reboot) pcmk-4 'termination was requested'
- * Stop    FencingChild:0	(pcmk-4)
+ * Stop    FencingChild:0	(pcmk-4)  	due to node availability
  * Move    r192.168.101.181	(Started pcmk-4 -> pcmk-1)
  * Move    r192.168.101.182	(Started pcmk-4 -> pcmk-1)
  * Move    r192.168.101.183	(Started pcmk-4 -> pcmk-1)
  * Move    rsc_pcmk-4	(Started pcmk-4 -> pcmk-2)
  * Move    lsb-dummy	(Started pcmk-4 -> pcmk-1)
  * Migrate migrator	(Started pcmk-1 -> pcmk-3)
- * Stop    ping-1:0	(pcmk-4)
+ * Stop    ping-1:0	(pcmk-4)  	due to node availability
  * Demote  stateful-1:0	(Master -> Stopped pcmk-4)
  * Promote stateful-1:1	(Slave -> Master pcmk-1)
 
diff --git a/pengine/test10/migrate-shutdown.summary b/pengine/test10/migrate-shutdown.summary
index 630d58d..b9aa5b2 100644
--- a/pengine/test10/migrate-shutdown.summary
+++ b/pengine/test10/migrate-shutdown.summary
@@ -27,20 +27,20 @@ Transition Summary:
  * Shutdown pcmk-2
  * Shutdown pcmk-1
  * Stop    Fencing	(pcmk-1)
- * Stop    r192.168.122.105	(pcmk-2)
- * Stop    r192.168.122.106	(pcmk-2)
- * Stop    r192.168.122.107	(pcmk-2)
+ * Stop    r192.168.122.105	(pcmk-2)  	due to node availability
+ * Stop    r192.168.122.106	(pcmk-2)  	due to node availability
+ * Stop    r192.168.122.107	(pcmk-2)  	due to node availability
  * Stop    rsc_pcmk-1	(pcmk-1)
  * Stop    rsc_pcmk-2	(pcmk-2)
  * Stop    rsc_pcmk-4	(pcmk-4)
  * Stop    lsb-dummy	(pcmk-2)
  * Stop    migrator	(pcmk-1)
- * Stop    ping-1:0	(pcmk-1)
- * Stop    ping-1:1	(pcmk-2)
- * Stop    ping-1:2	(pcmk-4)
- * Stop    stateful-1:0	(pcmk-1)
+ * Stop    ping-1:0	(pcmk-1)  	due to node availability
+ * Stop    ping-1:1	(pcmk-2)  	due to node availability
+ * Stop    ping-1:2	(pcmk-4)  	due to node availability
+ * Stop    stateful-1:0	(pcmk-1)  	due to node availability
  * Demote  stateful-1:1	(Master -> Stopped pcmk-2)
- * Stop    stateful-1:2	(pcmk-4)
+ * Stop    stateful-1:2	(pcmk-4)  	due to node availability
 
 Executing cluster transition:
  * Resource action: Fencing         stop on pcmk-1
diff --git a/pengine/test10/migrate-stop-complex.summary b/pengine/test10/migrate-stop-complex.summary
index e8f148c..04dce1a 100644
--- a/pengine/test10/migrate-stop-complex.summary
+++ b/pengine/test10/migrate-stop-complex.summary
@@ -13,8 +13,8 @@ Online: [ dom0-01 ]
 Transition Summary:
  * Move    top	(Started dom0-02 -> dom0-01)
  * Migrate domU-test01	(Started dom0-02 -> dom0-01)
- * Stop    dom0-iscsi1-cnx1:1	(dom0-02)
- * Stop    bottom:1	(dom0-02)
+ * Stop    dom0-iscsi1-cnx1:1	(dom0-02)  	due to node availability
+ * Stop    bottom:1	(dom0-02)  	due to node availability
 
 Executing cluster transition:
  * Resource action: top             stop on dom0-02
diff --git a/pengine/test10/migrate-stop-start-complex.summary b/pengine/test10/migrate-stop-start-complex.summary
index 162f73b..5408bb6 100644
--- a/pengine/test10/migrate-stop-start-complex.summary
+++ b/pengine/test10/migrate-stop-start-complex.summary
@@ -13,7 +13,7 @@ Online: [ dom0-01 ]
 
 Transition Summary:
  * Migrate domU-test01	(Started dom0-02 -> dom0-01)
- * Stop    dom0-iscsi1-cnx1:1	(dom0-02)
+ * Stop    dom0-iscsi1-cnx1:1	(dom0-02)  	due to node availability
  * Move    bottom:0	(Started dom0-02 -> dom0-01)
 
 Executing cluster transition:
diff --git a/pengine/test10/migrate-stop.summary b/pengine/test10/migrate-stop.summary
index 9a98330..a9d5771 100644
--- a/pengine/test10/migrate-stop.summary
+++ b/pengine/test10/migrate-stop.summary
@@ -9,7 +9,7 @@ Online: [ dom0-01 ]
 
 Transition Summary:
  * Migrate domU-test01	(Started dom0-02 -> dom0-01)
- * Stop    dom0-iscsi1-cnx1:1	(dom0-02)
+ * Stop    dom0-iscsi1-cnx1:1	(dom0-02)  	due to node availability
 
 Executing cluster transition:
  * Resource action: domU-test01     migrate_to on dom0-02
diff --git a/pengine/test10/monitor-recovery.summary b/pengine/test10/monitor-recovery.summary
index cae6d07..d8a13fe 100644
--- a/pengine/test10/monitor-recovery.summary
+++ b/pengine/test10/monitor-recovery.summary
@@ -11,7 +11,7 @@ OFFLINE: [ CSE-2 ]
      Stopped: [ CSE-2 ]
 
 Transition Summary:
- * Stop    d_tomcat:0	(CSE-1)
+ * Stop    d_tomcat:0	(CSE-1)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   cl_tomcat_stop_0
diff --git a/pengine/test10/notify-0.summary b/pengine/test10/notify-0.summary
index 2d95b26..69112da 100644
--- a/pengine/test10/notify-0.summary
+++ b/pengine/test10/notify-0.summary
@@ -12,7 +12,7 @@ OFFLINE: [ node2 ]
 
 Transition Summary:
  * Start   child_rsc1:1	(node1)
- * Stop    child_rsc2:0	(node1)
+ * Stop    child_rsc2:0	(node1)  	due to node availability
 
 Executing cluster transition:
  * Resource action: child_rsc1:1    monitor on node1
diff --git a/pengine/test10/notify-1.summary b/pengine/test10/notify-1.summary
index d670be7..0a734a6 100644
--- a/pengine/test10/notify-1.summary
+++ b/pengine/test10/notify-1.summary
@@ -12,7 +12,7 @@ OFFLINE: [ node2 ]
 
 Transition Summary:
  * Start   child_rsc1:1	(node1)
- * Stop    child_rsc2:0	(node1)
+ * Stop    child_rsc2:0	(node1)  	due to node availability
 
 Executing cluster transition:
  * Resource action: child_rsc1:1    monitor on node1
diff --git a/pengine/test10/notify-2.summary b/pengine/test10/notify-2.summary
index d670be7..0a734a6 100644
--- a/pengine/test10/notify-2.summary
+++ b/pengine/test10/notify-2.summary
@@ -12,7 +12,7 @@ OFFLINE: [ node2 ]
 
 Transition Summary:
  * Start   child_rsc1:1	(node1)
- * Stop    child_rsc2:0	(node1)
+ * Stop    child_rsc2:0	(node1)  	due to node availability
 
 Executing cluster transition:
  * Resource action: child_rsc1:1    monitor on node1
diff --git a/pengine/test10/notify-3.summary b/pengine/test10/notify-3.summary
index efc3a07..03a3d4e 100644
--- a/pengine/test10/notify-3.summary
+++ b/pengine/test10/notify-3.summary
@@ -11,7 +11,7 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Move    child_rsc1:1	(Started node2 -> node1)
- * Stop    child_rsc2:0	(node1)
+ * Stop    child_rsc2:0	(node1)  	due to node availability
 
 Executing cluster transition:
  * Resource action: child_rsc1:0    monitor on node2
diff --git a/pengine/test10/novell-252693.summary b/pengine/test10/novell-252693.summary
index 23f0632..0682119 100644
--- a/pengine/test10/novell-252693.summary
+++ b/pengine/test10/novell-252693.summary
@@ -16,11 +16,11 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Shutdown node1
- * Stop    stonithclone:1	(node1)
- * Stop    evmsdclone:1	(node1)
- * Stop    evmsclone:1	(node1)
- * Stop    imagestoreclone:1	(node1)
- * Stop    configstoreclone:1	(node1)
+ * Stop    stonithclone:1	(node1)  	due to node availability
+ * Stop    evmsdclone:1	(node1)  	due to node availability
+ * Stop    evmsclone:1	(node1)  	due to node availability
+ * Stop    imagestoreclone:1	(node1)  	due to node availability
+ * Stop    configstoreclone:1	(node1)  	due to node availability
  * Migrate sles10	(Started node1 -> node2)
 
 Executing cluster transition:
diff --git a/pengine/test10/one-or-more-1.summary b/pengine/test10/one-or-more-1.summary
index f26919c..af31a46 100644
--- a/pengine/test10/one-or-more-1.summary
+++ b/pengine/test10/one-or-more-1.summary
@@ -10,9 +10,9 @@ OFFLINE: [ fc16-builder2 ]
  D	(ocf::pacemaker:Dummy):	Stopped 
 
 Transition Summary:
- * Start   B	(fc16-builder - blocked)
- * Start   C	(fc16-builder - blocked)
- * Start   D	(fc16-builder - blocked)
+ * Start   B	(fc16-builder - blocked) 	due to unrunnable A start
+ * Start   C	(fc16-builder - blocked) 	due to unrunnable A start
+ * Start   D	(fc16-builder - blocked) 	due to unrunnable one-or-more:require-all-set-1
 
 Executing cluster transition:
  * Resource action: A               monitor on fc16-builder
diff --git a/pengine/test10/one-or-more-3.summary b/pengine/test10/one-or-more-3.summary
index f0ee084..abf4081 100644
--- a/pengine/test10/one-or-more-3.summary
+++ b/pengine/test10/one-or-more-3.summary
@@ -11,7 +11,7 @@ OFFLINE: [ fc16-builder2 ]
 
 Transition Summary:
  * Start   A	(fc16-builder)
- * Start   D	(fc16-builder - blocked)
+ * Start   D	(fc16-builder - blocked) 	due to unrunnable one-or-more:require-all-set-1
 
 Executing cluster transition:
  * Resource action: A               monitor on fc16-builder
diff --git a/pengine/test10/one-or-more-6.summary b/pengine/test10/one-or-more-6.summary
index 18cab2e..665ac52 100644
--- a/pengine/test10/one-or-more-6.summary
+++ b/pengine/test10/one-or-more-6.summary
@@ -9,7 +9,7 @@ OFFLINE: [ fc16-builder2 ]
  C	(ocf::pacemaker:Dummy):	Started fc16-builder
 
 Transition Summary:
- * Stop    B	(fc16-builder)
+ * Stop    B	(fc16-builder)  	due to node availability
 
 Executing cluster transition:
  * Resource action: B               stop on fc16-builder
diff --git a/pengine/test10/one-or-more-7.summary b/pengine/test10/one-or-more-7.summary
index 4322db3..89b3416 100644
--- a/pengine/test10/one-or-more-7.summary
+++ b/pengine/test10/one-or-more-7.summary
@@ -9,7 +9,7 @@ OFFLINE: [ fc16-builder2 ]
  C	(ocf::pacemaker:Dummy):	Started fc16-builder ( disabled ) 
 
 Transition Summary:
- * Stop    C	(fc16-builder)
+ * Stop    C	(fc16-builder)  	due to node availability
 
 Executing cluster transition:
  * Resource action: C               stop on fc16-builder
diff --git a/pengine/test10/order-mandatory.summary b/pengine/test10/order-mandatory.summary
index a1d2b4b..021d8fe 100644
--- a/pengine/test10/order-mandatory.summary
+++ b/pengine/test10/order-mandatory.summary
@@ -9,8 +9,8 @@ Online: [ node1 ]
 
 Transition Summary:
  * Start   rsc1	(node1)
- * Restart rsc2	(Started node1)
- * Stop    rsc4	(Started node1)
+ * Restart rsc2	(Started node1) 	due to required rsc1 start
+ * Stop    rsc4	(Started node1) 	due to unrunnable rsc3 start
 
 Executing cluster transition:
  * Resource action: rsc1            start on node1
diff --git a/pengine/test10/order-required.summary b/pengine/test10/order-required.summary
index a1d2b4b..021d8fe 100644
--- a/pengine/test10/order-required.summary
+++ b/pengine/test10/order-required.summary
@@ -9,8 +9,8 @@ Online: [ node1 ]
 
 Transition Summary:
  * Start   rsc1	(node1)
- * Restart rsc2	(Started node1)
- * Stop    rsc4	(Started node1)
+ * Restart rsc2	(Started node1) 	due to required rsc1 start
+ * Stop    rsc4	(Started node1) 	due to unrunnable rsc3 start
 
 Executing cluster transition:
  * Resource action: rsc1            start on node1
diff --git a/pengine/test10/order-wrong-kind.summary b/pengine/test10/order-wrong-kind.summary
index 8525b52..c498caf 100644
--- a/pengine/test10/order-wrong-kind.summary
+++ b/pengine/test10/order-wrong-kind.summary
@@ -10,7 +10,7 @@ Online: [ node1 ]
 
 Transition Summary:
  * Start   rsc1	(node1)
- * Restart rsc2	(Started node1)
+ * Restart rsc2	(Started node1) 	due to required rsc1 start
 
 Executing cluster transition:
  * Resource action: rsc1            start on node1
diff --git a/pengine/test10/order7.summary b/pengine/test10/order7.summary
index 74c4b60..6648bff 100644
--- a/pengine/test10/order7.summary
+++ b/pengine/test10/order7.summary
@@ -13,7 +13,7 @@ Transition Summary:
  * Start   rsc2	(node1)
  * Start   rsc3	(node1)
  * Start   rscB	(node1)
- * Start   rscC	(node1 - blocked)
+ * Start   rscC	(node1 - blocked) 	due to unrunnable rscA start
 
 Executing cluster transition:
  * Resource action: rsc2            monitor on node1
diff --git a/pengine/test10/order_constraint_stops_master.summary b/pengine/test10/order_constraint_stops_master.summary
index f1125a1..d3d8891 100644
--- a/pengine/test10/order_constraint_stops_master.summary
+++ b/pengine/test10/order_constraint_stops_master.summary
@@ -8,8 +8,8 @@ Online: [ fc16-builder fc16-builder2 ]
  NATIVE_RSC_B	(ocf::pacemaker:Dummy):	Started fc16-builder2 ( disabled ) 
 
 Transition Summary:
- * Stop    NATIVE_RSC_A:0	(Master fc16-builder)
- * Stop    NATIVE_RSC_B	(fc16-builder2)
+ * Stop    NATIVE_RSC_A:0	(Master fc16-builder) 	due to required NATIVE_RSC_B start
+ * Stop    NATIVE_RSC_B	(fc16-builder2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   MASTER_RSC_A_pre_notify_demote_0
diff --git a/pengine/test10/order_constraint_stops_slave.summary b/pengine/test10/order_constraint_stops_slave.summary
index 843d3b6..896c9c3 100644
--- a/pengine/test10/order_constraint_stops_slave.summary
+++ b/pengine/test10/order_constraint_stops_slave.summary
@@ -9,8 +9,8 @@ OFFLINE: [ fc16-builder2 ]
  NATIVE_RSC_B	(ocf::pacemaker:Dummy):	Started fc16-builder ( disabled ) 
 
 Transition Summary:
- * Stop    NATIVE_RSC_A:0	(Slave fc16-builder)
- * Stop    NATIVE_RSC_B	(fc16-builder)
+ * Stop    NATIVE_RSC_A:0	(Slave fc16-builder) 	due to required NATIVE_RSC_B start
+ * Stop    NATIVE_RSC_B	(fc16-builder)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   MASTER_RSC_A_pre_notify_stop_0
diff --git a/pengine/test10/ordered-set-basic-startup.summary b/pengine/test10/ordered-set-basic-startup.summary
index 182dd08..cfa8f8b 100644
--- a/pengine/test10/ordered-set-basic-startup.summary
+++ b/pengine/test10/ordered-set-basic-startup.summary
@@ -12,10 +12,10 @@ OFFLINE: [ fc16-builder2 ]
  F	(ocf::pacemaker:Dummy):	Stopped 
 
 Transition Summary:
- * Start   A	(fc16-builder - blocked)
+ * Start   A	(fc16-builder - blocked) 	due to unrunnable C start
  * Start   B	(fc16-builder)
- * Start   E	(fc16-builder - blocked)
- * Start   F	(fc16-builder - blocked)
+ * Start   E	(fc16-builder - blocked) 	due to unrunnable A start
+ * Start   F	(fc16-builder - blocked) 	due to unrunnable D start
 
 Executing cluster transition:
  * Resource action: A               monitor on fc16-builder
diff --git a/pengine/test10/ordered-set-natural.summary b/pengine/test10/ordered-set-natural.summary
index a3ba453..1888d66 100644
--- a/pengine/test10/ordered-set-natural.summary
+++ b/pengine/test10/ordered-set-natural.summary
@@ -21,12 +21,12 @@ Online: [ node1 node2 ]
  dummy2-5	(ocf::heartbeat:Dummy):	Stopped 
 
 Transition Summary:
- * Start   dummy1-1	(node1 - blocked)
- * Start   dummy1-2	(node1 - blocked)
- * Start   dummy2-1	(node2 - blocked)
- * Start   dummy2-2	(node2 - blocked)
- * Start   dummy3-4	(node1 - blocked)
- * Start   dummy3-5	(node1 - blocked)
+ * Start   dummy1-1	(node1 - blocked) 	due to no quorum
+ * Start   dummy1-2	(node1 - blocked) 	due to no quorum
+ * Start   dummy2-1	(node2 - blocked) 	due to no quorum
+ * Start   dummy2-2	(node2 - blocked) 	due to no quorum
+ * Start   dummy3-4	(node1 - blocked) 	due to no quorum
+ * Start   dummy3-5	(node1 - blocked) 	due to no quorum
 
 Executing cluster transition:
 
diff --git a/pengine/test10/probe-2.summary b/pengine/test10/probe-2.summary
index e8a2269..05588c8 100644
--- a/pengine/test10/probe-2.summary
+++ b/pengine/test10/probe-2.summary
@@ -36,13 +36,13 @@ Transition Summary:
  * Move    fs_mysql	(Started wc02 -> wc01)
  * Move    intip_sql	(Started wc02 -> wc01)
  * Move    mysql-server	(Started wc02 -> wc01)
- * Stop    drbd_www:1	(wc02)
- * Stop    nfs-common:1	(wc02)
- * Stop    mysql-proxy:1	(wc02)
- * Stop    fs_www:1	(wc02)
- * Stop    apache2:1	(wc02)
+ * Stop    drbd_www:1	(wc02)  	due to node availability
+ * Stop    nfs-common:1	(wc02)  	due to node availability
+ * Stop    mysql-proxy:1	(wc02)  	due to node availability
+ * Stop    fs_www:1	(wc02)  	due to node availability
+ * Stop    apache2:1	(wc02)  	due to node availability
  * Restart stonith_rackpdu:0	(Started wc01)
- * Stop    stonith_rackpdu:1	(wc02)
+ * Stop    stonith_rackpdu:1	(wc02)  	due to node availability
 
 Executing cluster transition:
  * Resource action: drbd_mysql:0    cancel=10000 on wc01
diff --git a/pengine/test10/quorum-2.summary b/pengine/test10/quorum-2.summary
index 9854fda..1dce96c 100644
--- a/pengine/test10/quorum-2.summary
+++ b/pengine/test10/quorum-2.summary
@@ -8,7 +8,7 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Move    rsc2	(Started node1 -> node2)
- * Start   rsc3	(node1 - blocked)
+ * Start   rsc3	(node1 - blocked) 	due to quorum freeze
 
 Executing cluster transition:
  * Resource action: rsc1            monitor on node2
diff --git a/pengine/test10/quorum-3.summary b/pengine/test10/quorum-3.summary
index 2ff7561..e8e4bf3 100644
--- a/pengine/test10/quorum-3.summary
+++ b/pengine/test10/quorum-3.summary
@@ -7,9 +7,9 @@ Online: [ node1 node2 ]
  rsc3	(heartbeat:apache):	Stopped 
 
 Transition Summary:
- * Stop    rsc1	(Started node1)
- * Stop    rsc2	(Started node1)
- * Start   rsc3	(node1 - blocked)
+ * Stop    rsc1	(Started node1) 	due to no quorum
+ * Stop    rsc2	(Started node1) 	due to no quorum
+ * Start   rsc3	(node1 - blocked) 	due to no quorum
 
 Executing cluster transition:
  * Resource action: rsc1            monitor on node2
diff --git a/pengine/test10/rec-node-10.summary b/pengine/test10/rec-node-10.summary
index 6daec5c..503dd0d 100644
--- a/pengine/test10/rec-node-10.summary
+++ b/pengine/test10/rec-node-10.summary
@@ -8,9 +8,9 @@ Online: [ node2 ]
  rsc2	(heartbeat:apache):	Started node1 (UNCLEAN)
 
 Transition Summary:
- * Start   stonith-1	(node2 - blocked)
- * Stop    rsc1	(Started node1 - blocked)
- * Stop    rsc2	(Started node1 - blocked)
+ * Start   stonith-1	(node2 - blocked) 	due to no quorum
+ * Stop    rsc1	(Started node1 - blocked) 	due to no quorum
+ * Stop    rsc2	(Started node1 - blocked) 	due to no quorum
 
 Executing cluster transition:
  * Resource action: stonith-1       monitor on node2
diff --git a/pengine/test10/rec-node-13.summary b/pengine/test10/rec-node-13.summary
index 9873757..de2fa28 100644
--- a/pengine/test10/rec-node-13.summary
+++ b/pengine/test10/rec-node-13.summary
@@ -35,7 +35,7 @@ OFFLINE: [ c001n03 c001n05 ]
 
 Transition Summary:
  * Fence (reboot) c001n04 'ocf_msdummy:6 failed there'
- * Stop    ocf_msdummy:6	(c001n04)
+ * Stop    ocf_msdummy:6	(c001n04)  	due to node availability
 
 Executing cluster transition:
  * Fencing c001n04 (reboot)
diff --git a/pengine/test10/rec-node-8.summary b/pengine/test10/rec-node-8.summary
index 4cd6724..1a7232e 100644
--- a/pengine/test10/rec-node-8.summary
+++ b/pengine/test10/rec-node-8.summary
@@ -9,10 +9,10 @@ Online: [ node2 ]
  rsc3	(heartbeat:apache):	Stopped 
 
 Transition Summary:
- * Start   stonith-1	(node2 - blocked)
+ * Start   stonith-1	(node2 - blocked) 	due to quorum freeze
  * Stop    rsc1	(Started node1 - blocked)
  * Stop    rsc2	(Started node1 - blocked)
- * Start   rsc3	(node2 - blocked)
+ * Start   rsc3	(node2 - blocked) 	due to quorum freeze
 
 Executing cluster transition:
  * Resource action: stonith-1       monitor on node2
diff --git a/pengine/test10/rec-node-9.summary b/pengine/test10/rec-node-9.summary
index 09ca805..7f6d8ae 100644
--- a/pengine/test10/rec-node-9.summary
+++ b/pengine/test10/rec-node-9.summary
@@ -7,8 +7,8 @@ OFFLINE: [ node1 ]
  rsc2	(heartbeat:apache):	Stopped 
 
 Transition Summary:
- * Start   rsc1	(node2 - blocked)
- * Start   rsc2	(node2 - blocked)
+ * Start   rsc1	(node2 - blocked) 	due to no quorum
+ * Start   rsc2	(node2 - blocked) 	due to no quorum
 
 Executing cluster transition:
  * Resource action: rsc1            monitor on node2
diff --git a/pengine/test10/rec-rsc-9.summary b/pengine/test10/rec-rsc-9.summary
index 1c06087..02a2fe5 100644
--- a/pengine/test10/rec-rsc-9.summary
+++ b/pengine/test10/rec-rsc-9.summary
@@ -9,8 +9,8 @@ Online: [ node1 ]
      rsc3	(heartbeat:apache):	FAILED node1 
 
 Transition Summary:
- * Restart rsc1	(Started node1)
- * Restart rsc2	(Started node1)
+ * Restart rsc1	(Started node1) 	due to required bar running
+ * Restart rsc2	(Started node1) 	due to required bar running
  * Recover rsc3	(Started node1)
 
 Executing cluster transition:
diff --git a/pengine/test10/remote-disable.summary b/pengine/test10/remote-disable.summary
index 69b4b62..2ec1748 100644
--- a/pengine/test10/remote-disable.summary
+++ b/pengine/test10/remote-disable.summary
@@ -12,7 +12,7 @@ RemoteOnline: [ remote1 ]
  FAKE4	(ocf::heartbeat:Dummy):	Started 18node1 
 
 Transition Summary:
- * Stop    remote1	(18builder)
+ * Stop    remote1	(18builder)  	due to node availability
  * Stop    FAKE2	(remote1)
 
 Executing cluster transition:
diff --git a/pengine/test10/remote-orphaned.summary b/pengine/test10/remote-orphaned.summary
index 84762b2..2b9add7 100644
--- a/pengine/test10/remote-orphaned.summary
+++ b/pengine/test10/remote-orphaned.summary
@@ -26,8 +26,8 @@ RemoteOnline: [ remote1 ]
 
 Transition Summary:
  * Move    rsc_18node2	(Started remote1 -> 18node1)
- * Stop    ping-1:2	(remote1)
- * Stop    remote1	(18node1)
+ * Stop    ping-1:2	(remote1)  	due to node availability
+ * Stop    remote1	(18node1)  	due to node availability
 
 Executing cluster transition:
  * Resource action: rsc_18node2     stop on remote1
diff --git a/pengine/test10/remote-recover-all.summary b/pengine/test10/remote-recover-all.summary
index 35f3d58..a8dac38 100644
--- a/pengine/test10/remote-recover-all.summary
+++ b/pengine/test10/remote-recover-all.summary
@@ -41,16 +41,16 @@ Transition Summary:
  * Fence (reboot) messaging-1 'resources are active and the connection is unrecoverable'
  * Fence (reboot) galera-2 'resources are active and the connection is unrecoverable'
  * Fence (reboot) controller-1 'peer is no longer part of the cluster'
- * Stop    messaging-1	(controller-1)
+ * Stop    messaging-1	(controller-1)  	due to node availability
  * Move    galera-0	(Started controller-1 -> controller-2)
- * Stop    galera-2	(controller-1)
- * Stop    rabbitmq:2	(messaging-1)
+ * Stop    galera-2	(controller-1)  	due to node availability
+ * Stop    rabbitmq:2	(messaging-1)  	due to node availability
  * Demote  galera:1	(Master -> Stopped galera-2)
- * Stop    redis:0	(controller-1)
+ * Stop    redis:0	(controller-1)  	due to node availability
  * Move    ip-172.17.1.14	(Started controller-1 -> controller-2)
  * Move    ip-172.17.1.17	(Started controller-1 -> controller-2)
  * Move    ip-172.17.4.11	(Started controller-1 -> controller-2)
- * Stop    haproxy:0	(controller-1)
+ * Stop    haproxy:0	(controller-1)  	due to node availability
  * Restart stonith-fence_ipmilan-525400bbf613	(Started controller-0)
  * Restart stonith-fence_ipmilan-525400b4f6bd	(Started controller-0)
  * Move    stonith-fence_ipmilan-5254005bdbb5	(Started controller-1 -> controller-2)
diff --git a/pengine/test10/remote-recover-connection.summary b/pengine/test10/remote-recover-connection.summary
index e0a9d0e..7b5b5fc 100644
--- a/pengine/test10/remote-recover-connection.summary
+++ b/pengine/test10/remote-recover-connection.summary
@@ -42,11 +42,11 @@ Transition Summary:
  * Move    messaging-1	(Started controller-1 -> controller-2)
  * Move    galera-0	(Started controller-1 -> controller-2)
  * Move    galera-2	(Started controller-1 -> controller-2)
- * Stop    redis:0	(controller-1)
+ * Stop    redis:0	(controller-1)  	due to node availability
  * Move    ip-172.17.1.14	(Started controller-1 -> controller-2)
  * Move    ip-172.17.1.17	(Started controller-1 -> controller-2)
  * Move    ip-172.17.4.11	(Started controller-1 -> controller-2)
- * Stop    haproxy:0	(controller-1)
+ * Stop    haproxy:0	(controller-1)  	due to node availability
  * Restart stonith-fence_ipmilan-525400bbf613	(Started controller-0)
  * Restart stonith-fence_ipmilan-525400b4f6bd	(Started controller-0)
  * Move    stonith-fence_ipmilan-5254005bdbb5	(Started controller-1 -> controller-2)
diff --git a/pengine/test10/remote-recover-no-resources.summary b/pengine/test10/remote-recover-no-resources.summary
index 19b5181..4383e81 100644
--- a/pengine/test10/remote-recover-no-resources.summary
+++ b/pengine/test10/remote-recover-no-resources.summary
@@ -40,15 +40,15 @@ RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
 Transition Summary:
  * Fence (reboot) messaging-1 'resources are active and the connection is unrecoverable'
  * Fence (reboot) controller-1 'peer is no longer part of the cluster'
- * Stop    messaging-1	(controller-1)
+ * Stop    messaging-1	(controller-1)  	due to node availability
  * Move    galera-0	(Started controller-1 -> controller-2)
  * Stop    galera-2	(controller-1)
- * Stop    rabbitmq:2	(messaging-1)
- * Stop    redis:0	(controller-1)
+ * Stop    rabbitmq:2	(messaging-1)  	due to node availability
+ * Stop    redis:0	(controller-1)  	due to node availability
  * Move    ip-172.17.1.14	(Started controller-1 -> controller-2)
  * Move    ip-172.17.1.17	(Started controller-1 -> controller-2)
  * Move    ip-172.17.4.11	(Started controller-1 -> controller-2)
- * Stop    haproxy:0	(controller-1)
+ * Stop    haproxy:0	(controller-1)  	due to node availability
  * Restart stonith-fence_ipmilan-525400bbf613	(Started controller-0)
  * Restart stonith-fence_ipmilan-525400b4f6bd	(Started controller-0)
  * Move    stonith-fence_ipmilan-5254005bdbb5	(Started controller-1 -> controller-2)
diff --git a/pengine/test10/remote-recover-unknown.summary b/pengine/test10/remote-recover-unknown.summary
index 772a699..3ffb5f4 100644
--- a/pengine/test10/remote-recover-unknown.summary
+++ b/pengine/test10/remote-recover-unknown.summary
@@ -41,15 +41,15 @@ Transition Summary:
  * Fence (reboot) galera-2 'resources are in an unknown state and the connection is unrecoverable'
  * Fence (reboot) messaging-1 'resources are active and the connection is unrecoverable'
  * Fence (reboot) controller-1 'peer is no longer part of the cluster'
- * Stop    messaging-1	(controller-1)
+ * Stop    messaging-1	(controller-1)  	due to node availability
  * Move    galera-0	(Started controller-1 -> controller-2)
- * Stop    galera-2	(controller-1)
- * Stop    rabbitmq:2	(messaging-1)
- * Stop    redis:0	(controller-1)
+ * Stop    galera-2	(controller-1)  	due to node availability
+ * Stop    rabbitmq:2	(messaging-1)  	due to node availability
+ * Stop    redis:0	(controller-1)  	due to node availability
  * Move    ip-172.17.1.14	(Started controller-1 -> controller-2)
  * Move    ip-172.17.1.17	(Started controller-1 -> controller-2)
  * Move    ip-172.17.4.11	(Started controller-1 -> controller-2)
- * Stop    haproxy:0	(controller-1)
+ * Stop    haproxy:0	(controller-1)  	due to node availability
  * Restart stonith-fence_ipmilan-525400bbf613	(Started controller-0)
  * Restart stonith-fence_ipmilan-525400b4f6bd	(Started controller-0)
  * Move    stonith-fence_ipmilan-5254005bdbb5	(Started controller-1 -> controller-2)
diff --git a/pengine/test10/remote-recovery.summary b/pengine/test10/remote-recovery.summary
index e0a9d0e..7b5b5fc 100644
--- a/pengine/test10/remote-recovery.summary
+++ b/pengine/test10/remote-recovery.summary
@@ -42,11 +42,11 @@ Transition Summary:
  * Move    messaging-1	(Started controller-1 -> controller-2)
  * Move    galera-0	(Started controller-1 -> controller-2)
  * Move    galera-2	(Started controller-1 -> controller-2)
- * Stop    redis:0	(controller-1)
+ * Stop    redis:0	(controller-1)  	due to node availability
  * Move    ip-172.17.1.14	(Started controller-1 -> controller-2)
  * Move    ip-172.17.1.17	(Started controller-1 -> controller-2)
  * Move    ip-172.17.4.11	(Started controller-1 -> controller-2)
- * Stop    haproxy:0	(controller-1)
+ * Stop    haproxy:0	(controller-1)  	due to node availability
  * Restart stonith-fence_ipmilan-525400bbf613	(Started controller-0)
  * Restart stonith-fence_ipmilan-525400b4f6bd	(Started controller-0)
  * Move    stonith-fence_ipmilan-5254005bdbb5	(Started controller-1 -> controller-2)
diff --git a/pengine/test10/rsc-sets-clone.summary b/pengine/test10/rsc-sets-clone.summary
index 7ee23a2..70570e6 100644
--- a/pengine/test10/rsc-sets-clone.summary
+++ b/pengine/test10/rsc-sets-clone.summary
@@ -12,7 +12,7 @@ Online: [ node2 ]
 Transition Summary:
  * Move    rsc1	(Started node1 -> node2)
  * Move    rsc3	(Started node1 -> node2)
- * Stop    rsc:0	(node1)
+ * Stop    rsc:0	(node1)  	due to node availability
 
 Executing cluster transition:
  * Resource action: rsc1            stop on node1
diff --git a/pengine/test10/stop-failure-no-quorum.summary b/pengine/test10/stop-failure-no-quorum.summary
index 4e337ab..75945b1 100644
--- a/pengine/test10/stop-failure-no-quorum.summary
+++ b/pengine/test10/stop-failure-no-quorum.summary
@@ -16,11 +16,11 @@ Online: [ pcmk-1 ]
 
 Transition Summary:
  * Fence (reboot) pcmk-2 'clvm:0 failed there'
- * Start   dlm:0	(pcmk-1 - blocked)
- * Stop    clvm:0	(pcmk-2)
- * Start   clvm:2	(pcmk-1 - blocked)
- * Start   ClusterIP	(pcmk-1 - blocked)
- * Start   Fencing	(pcmk-1 - blocked)
+ * Start   dlm:0	(pcmk-1 - blocked) 	due to no quorum
+ * Stop    clvm:0	(pcmk-2)  	due to node availability
+ * Start   clvm:2	(pcmk-1 - blocked) 	due to no quorum
+ * Start   ClusterIP	(pcmk-1 - blocked) 	due to no quorum
+ * Start   Fencing	(pcmk-1 - blocked) 	due to no quorum
 
 Executing cluster transition:
  * Fencing pcmk-2 (reboot)
diff --git a/pengine/test10/stop-failure-with-fencing.summary b/pengine/test10/stop-failure-with-fencing.summary
index cdb39b0..09680c8 100644
--- a/pengine/test10/stop-failure-with-fencing.summary
+++ b/pengine/test10/stop-failure-with-fencing.summary
@@ -15,11 +15,11 @@ Online: [ pcmk-1 ]
 
 Transition Summary:
  * Fence (reboot) pcmk-2 'clvm:0 failed there'
- * Start   dlm:0	(pcmk-1 - blocked)
- * Stop    clvm:0	(pcmk-2)
- * Start   clvm:1	(pcmk-1 - blocked)
- * Start   ClusterIP	(pcmk-1 - blocked)
- * Start   Fencing	(pcmk-1 - blocked)
+ * Start   dlm:0	(pcmk-1 - blocked) 	due to no quorum
+ * Stop    clvm:0	(pcmk-2)  	due to node availability
+ * Start   clvm:1	(pcmk-1 - blocked) 	due to no quorum
+ * Start   ClusterIP	(pcmk-1 - blocked) 	due to no quorum
+ * Start   Fencing	(pcmk-1 - blocked) 	due to no quorum
 
 Executing cluster transition:
  * Resource action: Fencing         monitor on pcmk-1
diff --git a/pengine/test10/ticket-clone-14.summary b/pengine/test10/ticket-clone-14.summary
index c807656..ceb76bf 100644
--- a/pengine/test10/ticket-clone-14.summary
+++ b/pengine/test10/ticket-clone-14.summary
@@ -7,8 +7,8 @@ Online: [ node1 node2 ]
      Started: [ node1 node2 ]
 
 Transition Summary:
- * Stop    rsc1:0	(node1)
- * Stop    rsc1:1	(node2)
+ * Stop    rsc1:0	(node1)  	due to node availability
+ * Stop    rsc1:1	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   clone1_stop_0
diff --git a/pengine/test10/ticket-clone-15.summary b/pengine/test10/ticket-clone-15.summary
index c807656..ceb76bf 100644
--- a/pengine/test10/ticket-clone-15.summary
+++ b/pengine/test10/ticket-clone-15.summary
@@ -7,8 +7,8 @@ Online: [ node1 node2 ]
      Started: [ node1 node2 ]
 
 Transition Summary:
- * Stop    rsc1:0	(node1)
- * Stop    rsc1:1	(node2)
+ * Stop    rsc1:0	(node1)  	due to node availability
+ * Stop    rsc1:1	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   clone1_stop_0
diff --git a/pengine/test10/ticket-clone-17.summary b/pengine/test10/ticket-clone-17.summary
index c807656..ceb76bf 100644
--- a/pengine/test10/ticket-clone-17.summary
+++ b/pengine/test10/ticket-clone-17.summary
@@ -7,8 +7,8 @@ Online: [ node1 node2 ]
      Started: [ node1 node2 ]
 
 Transition Summary:
- * Stop    rsc1:0	(node1)
- * Stop    rsc1:1	(node2)
+ * Stop    rsc1:0	(node1)  	due to node availability
+ * Stop    rsc1:1	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   clone1_stop_0
diff --git a/pengine/test10/ticket-clone-18.summary b/pengine/test10/ticket-clone-18.summary
index c807656..ceb76bf 100644
--- a/pengine/test10/ticket-clone-18.summary
+++ b/pengine/test10/ticket-clone-18.summary
@@ -7,8 +7,8 @@ Online: [ node1 node2 ]
      Started: [ node1 node2 ]
 
 Transition Summary:
- * Stop    rsc1:0	(node1)
- * Stop    rsc1:1	(node2)
+ * Stop    rsc1:0	(node1)  	due to node availability
+ * Stop    rsc1:1	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   clone1_stop_0
diff --git a/pengine/test10/ticket-clone-20.summary b/pengine/test10/ticket-clone-20.summary
index c807656..ceb76bf 100644
--- a/pengine/test10/ticket-clone-20.summary
+++ b/pengine/test10/ticket-clone-20.summary
@@ -7,8 +7,8 @@ Online: [ node1 node2 ]
      Started: [ node1 node2 ]
 
 Transition Summary:
- * Stop    rsc1:0	(node1)
- * Stop    rsc1:1	(node2)
+ * Stop    rsc1:0	(node1)  	due to node availability
+ * Stop    rsc1:1	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   clone1_stop_0
diff --git a/pengine/test10/ticket-clone-21.summary b/pengine/test10/ticket-clone-21.summary
index ce5335f..6b18cfa 100644
--- a/pengine/test10/ticket-clone-21.summary
+++ b/pengine/test10/ticket-clone-21.summary
@@ -10,8 +10,8 @@ Transition Summary:
  * Fence (reboot) node2 'deadman ticket was lost'
  * Fence (reboot) node1 'deadman ticket was lost'
  * Stop    rsc_stonith	(node1)
- * Stop    rsc1:0	(node1)
- * Stop    rsc1:1	(node2)
+ * Stop    rsc1:0	(node1)  	due to node availability
+ * Stop    rsc1:1	(node2)  	due to node availability
 
 Executing cluster transition:
  * Fencing node1 (reboot)
diff --git a/pengine/test10/ticket-clone-23.summary b/pengine/test10/ticket-clone-23.summary
index c807656..ceb76bf 100644
--- a/pengine/test10/ticket-clone-23.summary
+++ b/pengine/test10/ticket-clone-23.summary
@@ -7,8 +7,8 @@ Online: [ node1 node2 ]
      Started: [ node1 node2 ]
 
 Transition Summary:
- * Stop    rsc1:0	(node1)
- * Stop    rsc1:1	(node2)
+ * Stop    rsc1:0	(node1)  	due to node availability
+ * Stop    rsc1:1	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   clone1_stop_0
diff --git a/pengine/test10/ticket-clone-3.summary b/pengine/test10/ticket-clone-3.summary
index c807656..ceb76bf 100644
--- a/pengine/test10/ticket-clone-3.summary
+++ b/pengine/test10/ticket-clone-3.summary
@@ -7,8 +7,8 @@ Online: [ node1 node2 ]
      Started: [ node1 node2 ]
 
 Transition Summary:
- * Stop    rsc1:0	(node1)
- * Stop    rsc1:1	(node2)
+ * Stop    rsc1:0	(node1)  	due to node availability
+ * Stop    rsc1:1	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   clone1_stop_0
diff --git a/pengine/test10/ticket-clone-6.summary b/pengine/test10/ticket-clone-6.summary
index c807656..ceb76bf 100644
--- a/pengine/test10/ticket-clone-6.summary
+++ b/pengine/test10/ticket-clone-6.summary
@@ -7,8 +7,8 @@ Online: [ node1 node2 ]
      Started: [ node1 node2 ]
 
 Transition Summary:
- * Stop    rsc1:0	(node1)
- * Stop    rsc1:1	(node2)
+ * Stop    rsc1:0	(node1)  	due to node availability
+ * Stop    rsc1:1	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   clone1_stop_0
diff --git a/pengine/test10/ticket-clone-9.summary b/pengine/test10/ticket-clone-9.summary
index ce5335f..6b18cfa 100644
--- a/pengine/test10/ticket-clone-9.summary
+++ b/pengine/test10/ticket-clone-9.summary
@@ -10,8 +10,8 @@ Transition Summary:
  * Fence (reboot) node2 'deadman ticket was lost'
  * Fence (reboot) node1 'deadman ticket was lost'
  * Stop    rsc_stonith	(node1)
- * Stop    rsc1:0	(node1)
- * Stop    rsc1:1	(node2)
+ * Stop    rsc1:0	(node1)  	due to node availability
+ * Stop    rsc1:1	(node2)  	due to node availability
 
 Executing cluster transition:
  * Fencing node1 (reboot)
diff --git a/pengine/test10/ticket-group-14.summary b/pengine/test10/ticket-group-14.summary
index c0aaf74..824bb70 100644
--- a/pengine/test10/ticket-group-14.summary
+++ b/pengine/test10/ticket-group-14.summary
@@ -8,8 +8,8 @@ Online: [ node1 node2 ]
      rsc2	(ocf::pacemaker:Dummy):	Started node2
 
 Transition Summary:
- * Stop    rsc1	(node2)
- * Stop    rsc2	(node2)
+ * Stop    rsc1	(node2)  	due to node availability
+ * Stop    rsc2	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group1_stop_0
diff --git a/pengine/test10/ticket-group-15.summary b/pengine/test10/ticket-group-15.summary
index c0aaf74..824bb70 100644
--- a/pengine/test10/ticket-group-15.summary
+++ b/pengine/test10/ticket-group-15.summary
@@ -8,8 +8,8 @@ Online: [ node1 node2 ]
      rsc2	(ocf::pacemaker:Dummy):	Started node2
 
 Transition Summary:
- * Stop    rsc1	(node2)
- * Stop    rsc2	(node2)
+ * Stop    rsc1	(node2)  	due to node availability
+ * Stop    rsc2	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group1_stop_0
diff --git a/pengine/test10/ticket-group-17.summary b/pengine/test10/ticket-group-17.summary
index c0aaf74..824bb70 100644
--- a/pengine/test10/ticket-group-17.summary
+++ b/pengine/test10/ticket-group-17.summary
@@ -8,8 +8,8 @@ Online: [ node1 node2 ]
      rsc2	(ocf::pacemaker:Dummy):	Started node2
 
 Transition Summary:
- * Stop    rsc1	(node2)
- * Stop    rsc2	(node2)
+ * Stop    rsc1	(node2)  	due to node availability
+ * Stop    rsc2	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group1_stop_0
diff --git a/pengine/test10/ticket-group-18.summary b/pengine/test10/ticket-group-18.summary
index c0aaf74..824bb70 100644
--- a/pengine/test10/ticket-group-18.summary
+++ b/pengine/test10/ticket-group-18.summary
@@ -8,8 +8,8 @@ Online: [ node1 node2 ]
      rsc2	(ocf::pacemaker:Dummy):	Started node2
 
 Transition Summary:
- * Stop    rsc1	(node2)
- * Stop    rsc2	(node2)
+ * Stop    rsc1	(node2)  	due to node availability
+ * Stop    rsc2	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group1_stop_0
diff --git a/pengine/test10/ticket-group-20.summary b/pengine/test10/ticket-group-20.summary
index c0aaf74..824bb70 100644
--- a/pengine/test10/ticket-group-20.summary
+++ b/pengine/test10/ticket-group-20.summary
@@ -8,8 +8,8 @@ Online: [ node1 node2 ]
      rsc2	(ocf::pacemaker:Dummy):	Started node2
 
 Transition Summary:
- * Stop    rsc1	(node2)
- * Stop    rsc2	(node2)
+ * Stop    rsc1	(node2)  	due to node availability
+ * Stop    rsc2	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group1_stop_0
diff --git a/pengine/test10/ticket-group-21.summary b/pengine/test10/ticket-group-21.summary
index 385e44f..e397a42 100644
--- a/pengine/test10/ticket-group-21.summary
+++ b/pengine/test10/ticket-group-21.summary
@@ -9,8 +9,8 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Fence (reboot) node2 'deadman ticket was lost'
- * Stop    rsc1	(node2)
- * Stop    rsc2	(node2)
+ * Stop    rsc1	(node2)  	due to node availability
+ * Stop    rsc2	(node2)  	due to node availability
 
 Executing cluster transition:
  * Fencing node2 (reboot)
diff --git a/pengine/test10/ticket-group-23.summary b/pengine/test10/ticket-group-23.summary
index c0aaf74..824bb70 100644
--- a/pengine/test10/ticket-group-23.summary
+++ b/pengine/test10/ticket-group-23.summary
@@ -8,8 +8,8 @@ Online: [ node1 node2 ]
      rsc2	(ocf::pacemaker:Dummy):	Started node2
 
 Transition Summary:
- * Stop    rsc1	(node2)
- * Stop    rsc2	(node2)
+ * Stop    rsc1	(node2)  	due to node availability
+ * Stop    rsc2	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group1_stop_0
diff --git a/pengine/test10/ticket-group-3.summary b/pengine/test10/ticket-group-3.summary
index c0aaf74..824bb70 100644
--- a/pengine/test10/ticket-group-3.summary
+++ b/pengine/test10/ticket-group-3.summary
@@ -8,8 +8,8 @@ Online: [ node1 node2 ]
      rsc2	(ocf::pacemaker:Dummy):	Started node2
 
 Transition Summary:
- * Stop    rsc1	(node2)
- * Stop    rsc2	(node2)
+ * Stop    rsc1	(node2)  	due to node availability
+ * Stop    rsc2	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group1_stop_0
diff --git a/pengine/test10/ticket-group-6.summary b/pengine/test10/ticket-group-6.summary
index c0aaf74..824bb70 100644
--- a/pengine/test10/ticket-group-6.summary
+++ b/pengine/test10/ticket-group-6.summary
@@ -8,8 +8,8 @@ Online: [ node1 node2 ]
      rsc2	(ocf::pacemaker:Dummy):	Started node2
 
 Transition Summary:
- * Stop    rsc1	(node2)
- * Stop    rsc2	(node2)
+ * Stop    rsc1	(node2)  	due to node availability
+ * Stop    rsc2	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group1_stop_0
diff --git a/pengine/test10/ticket-group-9.summary b/pengine/test10/ticket-group-9.summary
index 385e44f..e397a42 100644
--- a/pengine/test10/ticket-group-9.summary
+++ b/pengine/test10/ticket-group-9.summary
@@ -9,8 +9,8 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Fence (reboot) node2 'deadman ticket was lost'
- * Stop    rsc1	(node2)
- * Stop    rsc2	(node2)
+ * Stop    rsc1	(node2)  	due to node availability
+ * Stop    rsc2	(node2)  	due to node availability
 
 Executing cluster transition:
  * Fencing node2 (reboot)
diff --git a/pengine/test10/ticket-master-14.summary b/pengine/test10/ticket-master-14.summary
index 9f7b89d..9a42d78 100644
--- a/pengine/test10/ticket-master-14.summary
+++ b/pengine/test10/ticket-master-14.summary
@@ -9,7 +9,7 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Demote  rsc1:0	(Master -> Stopped node1)
- * Stop    rsc1:1	(node2)
+ * Stop    rsc1:1	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   ms1_demote_0
diff --git a/pengine/test10/ticket-master-15.summary b/pengine/test10/ticket-master-15.summary
index 9f7b89d..9a42d78 100644
--- a/pengine/test10/ticket-master-15.summary
+++ b/pengine/test10/ticket-master-15.summary
@@ -9,7 +9,7 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Demote  rsc1:0	(Master -> Stopped node1)
- * Stop    rsc1:1	(node2)
+ * Stop    rsc1:1	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   ms1_demote_0
diff --git a/pengine/test10/ticket-master-3.summary b/pengine/test10/ticket-master-3.summary
index 9f7b89d..9a42d78 100644
--- a/pengine/test10/ticket-master-3.summary
+++ b/pengine/test10/ticket-master-3.summary
@@ -9,7 +9,7 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Demote  rsc1:0	(Master -> Stopped node1)
- * Stop    rsc1:1	(node2)
+ * Stop    rsc1:1	(node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   ms1_demote_0
diff --git a/pengine/test10/ticket-rsc-sets-10.summary b/pengine/test10/ticket-rsc-sets-10.summary
index 66f807a..8ef03e0 100644
--- a/pengine/test10/ticket-rsc-sets-10.summary
+++ b/pengine/test10/ticket-rsc-sets-10.summary
@@ -15,10 +15,10 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Stop    rsc1	(node2)
- * Stop    rsc2	(node1)
- * Stop    rsc3	(node1)
- * Stop    rsc4:0	(node1)
- * Stop    rsc4:1	(node2)
+ * Stop    rsc2	(node1)  	due to node availability
+ * Stop    rsc3	(node1)  	due to node availability
+ * Stop    rsc4:0	(node1)  	due to node availability
+ * Stop    rsc4:1	(node2)  	due to node availability
  * Demote  rsc5:0	(Master -> Slave node1)
 
 Executing cluster transition:
diff --git a/pengine/test10/ticket-rsc-sets-12.summary b/pengine/test10/ticket-rsc-sets-12.summary
index 6801c64..616a2a2 100644
--- a/pengine/test10/ticket-rsc-sets-12.summary
+++ b/pengine/test10/ticket-rsc-sets-12.summary
@@ -14,8 +14,8 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Stop    rsc1	(node2)
- * Stop    rsc2	(node1)
- * Stop    rsc3	(node1)
+ * Stop    rsc2	(node1)  	due to node availability
+ * Stop    rsc3	(node1)  	due to node availability
 
 Executing cluster transition:
  * Resource action: rsc1            stop on node2
diff --git a/pengine/test10/ticket-rsc-sets-13.summary b/pengine/test10/ticket-rsc-sets-13.summary
index 66f807a..8ef03e0 100644
--- a/pengine/test10/ticket-rsc-sets-13.summary
+++ b/pengine/test10/ticket-rsc-sets-13.summary
@@ -15,10 +15,10 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Stop    rsc1	(node2)
- * Stop    rsc2	(node1)
- * Stop    rsc3	(node1)
- * Stop    rsc4:0	(node1)
- * Stop    rsc4:1	(node2)
+ * Stop    rsc2	(node1)  	due to node availability
+ * Stop    rsc3	(node1)  	due to node availability
+ * Stop    rsc4:0	(node1)  	due to node availability
+ * Stop    rsc4:1	(node2)  	due to node availability
  * Demote  rsc5:0	(Master -> Slave node1)
 
 Executing cluster transition:
diff --git a/pengine/test10/ticket-rsc-sets-14.summary b/pengine/test10/ticket-rsc-sets-14.summary
index 66f807a..8ef03e0 100644
--- a/pengine/test10/ticket-rsc-sets-14.summary
+++ b/pengine/test10/ticket-rsc-sets-14.summary
@@ -15,10 +15,10 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Stop    rsc1	(node2)
- * Stop    rsc2	(node1)
- * Stop    rsc3	(node1)
- * Stop    rsc4:0	(node1)
- * Stop    rsc4:1	(node2)
+ * Stop    rsc2	(node1)  	due to node availability
+ * Stop    rsc3	(node1)  	due to node availability
+ * Stop    rsc4:0	(node1)  	due to node availability
+ * Stop    rsc4:1	(node2)  	due to node availability
  * Demote  rsc5:0	(Master -> Slave node1)
 
 Executing cluster transition:
diff --git a/pengine/test10/ticket-rsc-sets-3.summary b/pengine/test10/ticket-rsc-sets-3.summary
index 66f807a..8ef03e0 100644
--- a/pengine/test10/ticket-rsc-sets-3.summary
+++ b/pengine/test10/ticket-rsc-sets-3.summary
@@ -15,10 +15,10 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Stop    rsc1	(node2)
- * Stop    rsc2	(node1)
- * Stop    rsc3	(node1)
- * Stop    rsc4:0	(node1)
- * Stop    rsc4:1	(node2)
+ * Stop    rsc2	(node1)  	due to node availability
+ * Stop    rsc3	(node1)  	due to node availability
+ * Stop    rsc4:0	(node1)  	due to node availability
+ * Stop    rsc4:1	(node2)  	due to node availability
  * Demote  rsc5:0	(Master -> Slave node1)
 
 Executing cluster transition:
diff --git a/pengine/test10/ticket-rsc-sets-7.summary b/pengine/test10/ticket-rsc-sets-7.summary
index 66f807a..8ef03e0 100644
--- a/pengine/test10/ticket-rsc-sets-7.summary
+++ b/pengine/test10/ticket-rsc-sets-7.summary
@@ -15,10 +15,10 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Stop    rsc1	(node2)
- * Stop    rsc2	(node1)
- * Stop    rsc3	(node1)
- * Stop    rsc4:0	(node1)
- * Stop    rsc4:1	(node2)
+ * Stop    rsc2	(node1)  	due to node availability
+ * Stop    rsc3	(node1)  	due to node availability
+ * Stop    rsc4:0	(node1)  	due to node availability
+ * Stop    rsc4:1	(node2)  	due to node availability
  * Demote  rsc5:0	(Master -> Slave node1)
 
 Executing cluster transition:
diff --git a/pengine/test10/ticket-rsc-sets-9.summary b/pengine/test10/ticket-rsc-sets-9.summary
index 66f807a..8ef03e0 100644
--- a/pengine/test10/ticket-rsc-sets-9.summary
+++ b/pengine/test10/ticket-rsc-sets-9.summary
@@ -15,10 +15,10 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Stop    rsc1	(node2)
- * Stop    rsc2	(node1)
- * Stop    rsc3	(node1)
- * Stop    rsc4:0	(node1)
- * Stop    rsc4:1	(node2)
+ * Stop    rsc2	(node1)  	due to node availability
+ * Stop    rsc3	(node1)  	due to node availability
+ * Stop    rsc4:0	(node1)  	due to node availability
+ * Stop    rsc4:1	(node2)  	due to node availability
  * Demote  rsc5:0	(Master -> Slave node1)
 
 Executing cluster transition:
diff --git a/pengine/test10/unfence-definition.summary b/pengine/test10/unfence-definition.summary
index d776228..f728e39 100644
--- a/pengine/test10/unfence-definition.summary
+++ b/pengine/test10/unfence-definition.summary
@@ -16,9 +16,9 @@ Transition Summary:
  * Fence (on) virt-3 'Required by dlm:2'
  * Fence (on) virt-1 'Device definition changed'
  * Restart fencing	(Started virt-1)
- * Restart dlm:0	(Started virt-1)
+ * Restart dlm:0	(Started virt-1) 	due to required stonith
  * Start   dlm:2	(virt-3)
- * Restart clvmd:0	(Started virt-1)
+ * Restart clvmd:0	(Started virt-1) 	due to required stonith
  * Start   clvmd:1	(virt-2)
  * Start   clvmd:2	(virt-3)
 
diff --git a/pengine/test10/unfence-parameters.summary b/pengine/test10/unfence-parameters.summary
index e71eafc..e8b15ec 100644
--- a/pengine/test10/unfence-parameters.summary
+++ b/pengine/test10/unfence-parameters.summary
@@ -17,10 +17,10 @@ Transition Summary:
  * Fence (on) virt-2 'Device parameters changed (reload)'
  * Fence (on) virt-1 'Device parameters changed (reload)'
  * Restart fencing	(Started virt-1)
- * Restart dlm:0	(Started virt-1)
- * Restart dlm:1	(Started virt-2)
+ * Restart dlm:0	(Started virt-1) 	due to required stonith
+ * Restart dlm:1	(Started virt-2) 	due to required stonith
  * Start   dlm:2	(virt-3)
- * Restart clvmd:0	(Started virt-1)
+ * Restart clvmd:0	(Started virt-1) 	due to required stonith
  * Start   clvmd:1	(virt-2)
  * Start   clvmd:2	(virt-3)
 
diff --git a/pengine/test10/unmanaged-block-restart.summary b/pengine/test10/unmanaged-block-restart.summary
index 0b70481..01dffeb 100644
--- a/pengine/test10/unmanaged-block-restart.summary
+++ b/pengine/test10/unmanaged-block-restart.summary
@@ -10,8 +10,8 @@ Online: [ yingying.site ]
 
 Transition Summary:
  * Start   rsc1	(yingying.site)
- * Stop    rsc2	(Started yingying.site - blocked)
- * Stop    rsc3	(Started yingying.site - blocked)
+ * Stop    rsc2	(Started yingying.site - blocked) 	due to required rsc1 start
+ * Stop    rsc3	(Started yingying.site - blocked) 	due to required rsc2 start
 
 Executing cluster transition:
  * Pseudo action:   group1_stop_0
diff --git a/pengine/test10/unmanaged-stop-1.summary b/pengine/test10/unmanaged-stop-1.summary
index 978ddc1..94e0908 100644
--- a/pengine/test10/unmanaged-stop-1.summary
+++ b/pengine/test10/unmanaged-stop-1.summary
@@ -7,7 +7,7 @@ Online: [ yingying.site ]
  rsc2	(ocf::pacemaker:Dummy):	FAILED yingying.site ( blocked ) 
 
 Transition Summary:
- * Stop    rsc1	(yingying.site - blocked)
+ * Stop    rsc1	(yingying.site - blocked)  	due to node availability
 
 Executing cluster transition:
 
diff --git a/pengine/test10/unmanaged-stop-2.summary b/pengine/test10/unmanaged-stop-2.summary
index 978ddc1..94e0908 100644
--- a/pengine/test10/unmanaged-stop-2.summary
+++ b/pengine/test10/unmanaged-stop-2.summary
@@ -7,7 +7,7 @@ Online: [ yingying.site ]
  rsc2	(ocf::pacemaker:Dummy):	FAILED yingying.site ( blocked ) 
 
 Transition Summary:
- * Stop    rsc1	(yingying.site - blocked)
+ * Stop    rsc1	(yingying.site - blocked)  	due to node availability
 
 Executing cluster transition:
 
diff --git a/pengine/test10/unmanaged-stop-3.summary b/pengine/test10/unmanaged-stop-3.summary
index 74829a1..c72d451 100644
--- a/pengine/test10/unmanaged-stop-3.summary
+++ b/pengine/test10/unmanaged-stop-3.summary
@@ -8,7 +8,7 @@ Online: [ yingying.site ]
      rsc2	(ocf::pacemaker:Dummy):	FAILED yingying.site ( disabled, blocked ) 
 
 Transition Summary:
- * Stop    rsc1	(yingying.site - blocked)
+ * Stop    rsc1	(yingying.site - blocked) unrunnable rsc2 stop 	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group1_stop_0
diff --git a/pengine/test10/unmanaged-stop-4.summary b/pengine/test10/unmanaged-stop-4.summary
index 457e41f..2704e98 100644
--- a/pengine/test10/unmanaged-stop-4.summary
+++ b/pengine/test10/unmanaged-stop-4.summary
@@ -9,7 +9,7 @@ Online: [ yingying.site ]
      rsc3	(ocf::heartbeat:Dummy):	Stopped ( disabled ) 
 
 Transition Summary:
- * Stop    rsc1	(yingying.site - blocked)
+ * Stop    rsc1	(yingying.site - blocked) unrunnable rsc2 stop 	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group1_stop_0
diff --git a/pengine/test10/unrunnable-1.summary b/pengine/test10/unrunnable-1.summary
index 92f4031..8c27e45 100644
--- a/pengine/test10/unrunnable-1.summary
+++ b/pengine/test10/unrunnable-1.summary
@@ -19,15 +19,15 @@ Online: [ c001n03 ]
      child_DoFencing:3	(stonith:ssh):	Stopped 
 
 Transition Summary:
- * Start   DcIPaddr	(c001n03 - blocked)
- * Start   child_192.168.100.181	(c001n03 - blocked)
- * Start   child_192.168.100.182	(c001n03 - blocked)
- * Start   child_192.168.100.183	(c001n03 - blocked)
- * Start   rsc_c001n08	(c001n03 - blocked)
- * Start   rsc_c001n02	(c001n03 - blocked)
- * Start   rsc_c001n03	(c001n03 - blocked)
- * Start   rsc_c001n01	(c001n03 - blocked)
- * Stop    child_DoFencing:1	(c001n02 - blocked)
+ * Start   DcIPaddr	(c001n03 - blocked) 	due to no quorum
+ * Start   child_192.168.100.181	(c001n03 - blocked) 	due to no quorum
+ * Start   child_192.168.100.182	(c001n03 - blocked) 	due to no quorum
+ * Start   child_192.168.100.183	(c001n03 - blocked) 	due to no quorum
+ * Start   rsc_c001n08	(c001n03 - blocked) 	due to no quorum
+ * Start   rsc_c001n02	(c001n03 - blocked) 	due to no quorum
+ * Start   rsc_c001n03	(c001n03 - blocked) 	due to no quorum
+ * Start   rsc_c001n01	(c001n03 - blocked) 	due to no quorum
+ * Stop    child_DoFencing:1	(c001n02 - blocked)  	due to node availability
 
 Executing cluster transition:
  * Resource action: DcIPaddr        monitor on c001n03
diff --git a/pengine/test10/unrunnable-2.summary b/pengine/test10/unrunnable-2.summary
index 0c0c765..b67f7cb 100644
--- a/pengine/test10/unrunnable-2.summary
+++ b/pengine/test10/unrunnable-2.summary
@@ -85,7 +85,7 @@ Online: [ overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 ]
      Stopped: [ overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 ]
 
 Transition Summary:
- * Start   openstack-cinder-volume	(overcloud-controller-2 - blocked)
+ * Start   openstack-cinder-volume	(overcloud-controller-2 - blocked) 	due to unrunnable openstack-cinder-scheduler-clone running
 
 Executing cluster transition:
 
diff --git a/pengine/test10/utilization-order2.summary b/pengine/test10/utilization-order2.summary
index 7871579..db65a16 100644
--- a/pengine/test10/utilization-order2.summary
+++ b/pengine/test10/utilization-order2.summary
@@ -11,7 +11,7 @@ Online: [ node1 node2 ]
 Transition Summary:
  * Start   rsc4	(node1)
  * Move    rsc3	(Started node1 -> node2)
- * Stop    rsc2:0	(node1)
+ * Stop    rsc2:0	(node1)  	due to node availability
  * Stop    rsc1	(node2)
 
 Executing cluster transition:
diff --git a/pengine/test10/utilization-order4.summary b/pengine/test10/utilization-order4.summary
index efb5958..09a8c31 100644
--- a/pengine/test10/utilization-order4.summary
+++ b/pengine/test10/utilization-order4.summary
@@ -17,10 +17,10 @@ Online: [ deglxen001 ]
 Transition Summary:
  * Migrate degllx62-vm	(Started deglxen002 -> deglxen001)
  * Stop    degllx61-vm	(deglxen001)
- * Stop    nfs-xen_config:1	(deglxen002)
- * Stop    nfs-xen_swapfiles:1	(deglxen002)
- * Stop    nfs-xen_images:1	(deglxen002)
- * Stop    prim-ping:1	(deglxen002)
+ * Stop    nfs-xen_config:1	(deglxen002)  	due to node availability
+ * Stop    nfs-xen_swapfiles:1	(deglxen002)  	due to node availability
+ * Stop    nfs-xen_images:1	(deglxen002)  	due to node availability
+ * Stop    prim-ping:1	(deglxen002)  	due to node availability
 
 Executing cluster transition:
  * Resource action: degllx61-vm     stop on deglxen001
diff --git a/pengine/test10/whitebox-fail1.summary b/pengine/test10/whitebox-fail1.summary
index 14b1ee2..1d06552 100644
--- a/pengine/test10/whitebox-fail1.summary
+++ b/pengine/test10/whitebox-fail1.summary
@@ -18,7 +18,7 @@ Transition Summary:
  * Recover container1	(Started 18node2)
  * Recover M:4	(Started lxc1)
  * Recover B	(Started lxc1)
- * Restart lxc1	(Started 18node2)
+ * Restart lxc1	(Started 18node2) 	due to required container1 start
 
 Executing cluster transition:
  * Resource action: lxc1            stop on 18node2
diff --git a/pengine/test10/whitebox-imply-stop-on-fence.summary b/pengine/test10/whitebox-imply-stop-on-fence.summary
index 9dab410..bea75a2 100644
--- a/pengine/test10/whitebox-imply-stop-on-fence.summary
+++ b/pengine/test10/whitebox-imply-stop-on-fence.summary
@@ -29,9 +29,9 @@ Transition Summary:
  * Fence (reboot) lxc-01_kiff-01 (resource: R-lxc-01_kiff-01) 'guest is unclean'
  * Fence (reboot) kiff-01 'peer is no longer part of the cluster'
  * Move    fence-kiff-02	(Started kiff-01 -> kiff-02)
- * Stop    dlm:0	(kiff-01)
- * Stop    clvmd:0	(kiff-01)
- * Stop    shared0:0	(kiff-01)
+ * Stop    dlm:0	(kiff-01)  	due to node availability
+ * Stop    clvmd:0	(kiff-01)  	due to node availability
+ * Stop    shared0:0	(kiff-01)  	due to node availability
  * Recover R-lxc-01_kiff-01	(Started kiff-01 -> kiff-02)
  * Move    R-lxc-02_kiff-01	(Started kiff-01 -> kiff-02)
  * Recover vm-fs	(Started lxc-01_kiff-01)
diff --git a/pengine/test10/whitebox-move.summary b/pengine/test10/whitebox-move.summary
index 3422ac7..dbf0780 100644
--- a/pengine/test10/whitebox-move.summary
+++ b/pengine/test10/whitebox-move.summary
@@ -12,8 +12,8 @@ Containers: [ lxc1:container1 lxc2:container2 ]
 
 Transition Summary:
  * Move    container1	(Started 18node1 -> 18node2)
- * Restart M:3	(Started lxc1)
- * Restart A	(Started lxc1)
+ * Restart M:3	(Started lxc1) 	due to required container1 start
+ * Restart A	(Started lxc1) 	due to required container1 start
  * Move    lxc1	(Started 18node1 -> 18node2)
 
 Executing cluster transition:
diff --git a/pengine/test10/whitebox-ms-ordering-move.summary b/pengine/test10/whitebox-ms-ordering-move.summary
index d5f133b..b48d988 100644
--- a/pengine/test10/whitebox-ms-ordering-move.summary
+++ b/pengine/test10/whitebox-ms-ordering-move.summary
@@ -31,7 +31,7 @@ Containers: [ lxc1:container1 lxc2:container2 ]
 
 Transition Summary:
  * Move    container1	(Started rhel7-1 -> rhel7-2)
- * Restart lxc-ms:0	(Master lxc1)
+ * Restart lxc-ms:0	(Master lxc1) 	due to required container1 start
  * Move    lxc1	(Started rhel7-1 -> rhel7-2)
 
 Executing cluster transition:
diff --git a/pengine/test10/whitebox-orphan-ms.summary b/pengine/test10/whitebox-orphan-ms.summary
index 30c6a3b..3efa6bd 100644
--- a/pengine/test10/whitebox-orphan-ms.summary
+++ b/pengine/test10/whitebox-orphan-ms.summary
@@ -28,11 +28,11 @@ Containers: [ lxc1:container1 lxc2:container2 ]
 
 Transition Summary:
  * Move    FencingFail	(Started 18node3 -> 18node1)
- * Stop    container2	(18node1)
- * Stop    lxc1	(18node1)
+ * Stop    container2	(18node1)  	due to node availability
+ * Stop    lxc1	(18node1)  	due to node availability
  * Demote  lxc-ms	(Master -> Stopped lxc1)
- * Stop    lxc2	(18node1)
- * Stop    container1	(18node1)
+ * Stop    lxc2	(18node1)  	due to node availability
+ * Stop    container1	(18node1)  	due to node availability
 
 Executing cluster transition:
  * Resource action: FencingFail     stop on 18node3
diff --git a/pengine/test10/whitebox-orphaned.summary b/pengine/test10/whitebox-orphaned.summary
index 7be8453..52b54aa 100644
--- a/pengine/test10/whitebox-orphaned.summary
+++ b/pengine/test10/whitebox-orphaned.summary
@@ -16,10 +16,10 @@ Containers: [ lxc1:container1 lxc2:container2 ]
  lxc1	(ocf::pacemaker:remote):	 ORPHANED Started 18node2 
 
 Transition Summary:
- * Stop    M:4	(lxc1)
+ * Stop    M:4	(lxc1)  	due to node availability
  * Move    B	(Started lxc1 -> lxc2)
- * Stop    container1	(18node2)
- * Stop    lxc1	(18node2)
+ * Stop    container1	(18node2)  	due to node availability
+ * Stop    lxc1	(18node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   M-clone_stop_0
diff --git a/pengine/test10/whitebox-stop.summary b/pengine/test10/whitebox-stop.summary
index b6a2954..89094da 100644
--- a/pengine/test10/whitebox-stop.summary
+++ b/pengine/test10/whitebox-stop.summary
@@ -15,10 +15,10 @@ Containers: [ lxc1:container1 lxc2:container2 ]
  D	(ocf::pacemaker:Dummy):	Started 18node1
 
 Transition Summary:
- * Stop    container1	(18node2)
- * Stop    M:4	(lxc1)
+ * Stop    container1	(18node2)  	due to node availability
+ * Stop    M:4	(lxc1)  	due to node availability
  * Move    B	(Started lxc1 -> lxc2)
- * Stop    lxc1	(18node2)
+ * Stop    lxc1	(18node2)  	due to node availability
 
 Executing cluster transition:
  * Pseudo action:   M-clone_stop_0
-- 
1.8.3.1


From ab87380e8800a1b1f867450e61049e9becbaec21 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Tue, 1 Aug 2017 16:18:06 +1000
Subject: [PATCH 06/12] Log: PE: Output resource changes in a friendlier format

---
 lib/pengine/utils.c                                |   1 +
 pengine/native.c                                   | 235 ++++++++++++---------
 pengine/test10/1-a-then-bm-move-b.summary          |   2 +-
 pengine/test10/10-a-then-bm-b-move-a-clone.summary |   2 +-
 .../11-a-then-bm-b-move-a-clone-starting.summary   |   4 +-
 pengine/test10/1360.summary                        |   2 +-
 pengine/test10/2-am-then-b-move-a.summary          |   2 +-
 pengine/test10/3-am-then-bm-both-migrate.summary   |   4 +-
 .../test10/4-am-then-bm-b-not-migratable.summary   |   4 +-
 .../test10/5-am-then-bm-a-not-migratable.summary   |   4 +-
 pengine/test10/594.summary                         |   4 +-
 pengine/test10/6-migrate-group.summary             |   6 +-
 pengine/test10/662.summary                         |   2 +-
 pengine/test10/696.summary                         |   2 +-
 .../7-migrate-group-one-unmigratable.summary       |   6 +-
 pengine/test10/726.summary                         |   2 +-
 pengine/test10/735.summary                         |   2 +-
 pengine/test10/764.summary                         |  10 +-
 pengine/test10/797.summary                         |  12 +-
 .../8-am-then-bm-a-migrating-b-stopping.summary    |   2 +-
 pengine/test10/829.summary                         |   2 +-
 .../9-am-then-bm-b-migrating-a-stopping.summary    |   2 +-
 pengine/test10/994-2.summary                       |   4 +-
 pengine/test10/994.summary                         |   2 +-
 pengine/test10/a-demote-then-b-migrate.summary     |   4 +-
 pengine/test10/a-promote-then-b-migrate.summary    |   2 +-
 pengine/test10/anti-colocation-master.summary      |   4 +-
 pengine/test10/anti-colocation-order.summary       |   4 +-
 pengine/test10/anti-colocation-slave.summary       |   4 +-
 pengine/test10/asymmetrical-order-move.summary     |   2 +-
 pengine/test10/bug-1572-1.summary                  |   8 +-
 pengine/test10/bug-1572-2.summary                  |   2 +-
 pengine/test10/bug-1718.summary                    |   4 +-
 pengine/test10/bug-1820-1.summary                  |   4 +-
 pengine/test10/bug-1820.summary                    |   4 +-
 pengine/test10/bug-1822.summary                    |   4 +-
 .../test10/bug-5007-masterslave_colocation.summary |   4 +-
 .../test10/bug-5014-A-stopped-B-stopped.summary    |   2 +-
 .../test10/bug-5014-CthenAthenB-C-stopped.summary  |   4 +-
 .../bug-5014-GROUP-A-stopped-B-stopped.summary     |   2 +-
 .../bug-5014-ordered-set-symmetrical-true.summary  |   2 +-
 pengine/test10/bug-5025-1.summary                  |   2 +-
 pengine/test10/bug-5025-3.summary                  |   2 +-
 pengine/test10/bug-5028.summary                    |   2 +-
 pengine/test10/bug-5059.summary                    |   1 -
 pengine/test10/bug-5186-partial-migrate.summary    |   8 +-
 pengine/test10/bug-cl-5212.summary                 |  14 +-
 pengine/test10/bug-cl-5247.summary                 |  10 +-
 pengine/test10/bug-lf-2106.summary                 |   4 +-
 pengine/test10/bug-lf-2153.summary                 |   2 +-
 pengine/test10/bug-lf-2171.summary                 |   4 +-
 pengine/test10/bug-lf-2361.summary                 |   4 +-
 pengine/test10/bug-lf-2435.summary                 |   2 +-
 pengine/test10/bug-lf-2445.summary                 |   2 +-
 pengine/test10/bug-lf-2453.summary                 |   6 +-
 pengine/test10/bug-lf-2508.summary                 |   2 +-
 pengine/test10/bug-lf-2551.summary                 |   4 +-
 pengine/test10/bug-lf-2574.summary                 |   2 +-
 pengine/test10/bug-lf-2606.summary                 |   4 +-
 pengine/test10/bug-lf-2613.summary                 |  12 +-
 pengine/test10/bug-lf-2619.summary                 |  12 +-
 pengine/test10/bug-n-385265-2.summary              |   4 +-
 pengine/test10/bug-n-387749.summary                |   4 +-
 pengine/test10/bug-pm-11.summary                   |   1 -
 pengine/test10/bug-rh-1097457.summary              |  12 +-
 pengine/test10/bug-rh-880249.summary               |   3 +-
 pengine/test10/bug-suse-707150.summary             |   2 +-
 pengine/test10/bundle-nested-colocation.summary    |   6 +-
 .../test10/bundle-order-partial-start-2.summary    |   4 +-
 pengine/test10/bundle-order-partial-stop.summary   |   8 +-
 .../test10/bundle-order-startup-clone-2.summary    |   3 -
 pengine/test10/bundle-order-startup-clone.summary  |  12 +-
 pengine/test10/bundle-order-stop-clone.summary     |   2 +-
 pengine/test10/bundle-order-stop.summary           |   8 +-
 pengine/test10/clone-anon-failcount.summary        |  12 +-
 pengine/test10/clone-fail-block-colocation.summary |   8 +-
 pengine/test10/clone-interleave-2.summary          |   2 +-
 pengine/test10/clone-interleave-3.summary          |   6 +-
 pengine/test10/clone-no-shuffle.summary            |   2 +-
 pengine/test10/clone-require-all-2.summary         |   6 +-
 pengine/test10/clone-require-all-3.summary         |   6 +-
 pengine/test10/clone-require-all-4.summary         |   2 +-
 .../clone-require-all-no-interleave-3.summary      |   6 +-
 .../test10/clone_min_interleave_start_one.summary  |  12 +-
 .../test10/clone_min_interleave_stop_two.summary   |  12 +-
 pengine/test10/clone_min_start_one.summary         |   4 +-
 pengine/test10/clone_min_stop_all.summary          |   4 +-
 pengine/test10/clone_min_stop_two.summary          |   4 +-
 pengine/test10/cloned-group-stop.summary           |  28 +--
 pengine/test10/cloned-group.summary                |   4 +-
 pengine/test10/cloned_start_one.summary            |   2 +-
 pengine/test10/cloned_stop_two.summary             |   2 +-
 pengine/test10/colo_master_w_native.summary        |   2 +-
 pengine/test10/colo_slave_w_native.summary         |   4 +-
 pengine/test10/coloc-clone-stays-active.summary    |   2 +-
 pengine/test10/coloc-intra-set.summary             |   4 +-
 pengine/test10/coloc_fp_logic.summary              |   2 +-
 .../colocation_constraint_stops_master.summary     |   2 +-
 .../colocation_constraint_stops_slave.summary      |   2 +-
 pengine/test10/complex_enforce_colo.summary        |  66 +++---
 pengine/test10/container-2.summary                 |   6 +-
 pengine/test10/container-3.summary                 |   4 +-
 pengine/test10/container-4.summary                 |   6 +-
 pengine/test10/container-group-2.summary           |   6 +-
 pengine/test10/container-group-3.summary           |   2 +-
 pengine/test10/container-group-4.summary           |   6 +-
 pengine/test10/enforce-colo1.summary               |   4 +-
 pengine/test10/group-dependents.summary            |  28 +--
 pengine/test10/group-fail.summary                  |   4 +-
 pengine/test10/group10.summary                     |   6 +-
 pengine/test10/group14.summary                     |  32 +--
 pengine/test10/group5.summary                      |  10 +-
 pengine/test10/group6.summary                      |  12 +-
 pengine/test10/group9.summary                      |  10 +-
 pengine/test10/guest-node-host-dies.summary        |  12 +-
 pengine/test10/inc11.summary                       |   3 +-
 pengine/test10/inc12.summary                       |  20 +-
 pengine/test10/inc2.summary                        |   4 +-
 pengine/test10/inc3.summary                        |   8 +-
 pengine/test10/inc4.summary                        |   8 +-
 pengine/test10/inc5.summary                        |   8 +-
 pengine/test10/inc6.summary                        |  12 +-
 pengine/test10/interleave-restart.summary          |   6 +-
 pengine/test10/isolation-restart-all.summary       |  22 +-
 pengine/test10/load-stopped-loop-2.summary         |  16 +-
 pengine/test10/load-stopped-loop.summary           |  20 +-
 pengine/test10/master-1.summary                    |   1 -
 pengine/test10/master-10.summary                   |   1 -
 pengine/test10/master-11.summary                   |   1 -
 pengine/test10/master-2.summary                    |   1 -
 pengine/test10/master-3.summary                    |   1 -
 pengine/test10/master-7.summary                    |  16 +-
 pengine/test10/master-8.summary                    |  15 +-
 pengine/test10/master-9.summary                    |  22 +-
 pengine/test10/master-asymmetrical-order.summary   |   4 +-
 pengine/test10/master-demote.summary               |   2 +-
 pengine/test10/master-failed-demote-2.summary      |   2 +-
 pengine/test10/master-failed-demote.summary        |   2 +-
 pengine/test10/master-move.summary                 |   4 +-
 .../test10/master-partially-demoted-group.summary  |  12 +-
 pengine/test10/master-probed-score.summary         |   6 +-
 pengine/test10/master-pseudo.summary               |   3 +-
 pengine/test10/master-stop.summary                 |   2 +-
 pengine/test10/migrate-1.summary                   |   2 +-
 pengine/test10/migrate-3.summary                   |   2 +-
 pengine/test10/migrate-4.summary                   |   2 +-
 pengine/test10/migrate-5.summary                   |   2 +-
 pengine/test10/migrate-begin.summary               |   2 +-
 pengine/test10/migrate-both-vms.summary            |   4 +-
 pengine/test10/migrate-fail-2.summary              |   2 +-
 pengine/test10/migrate-fail-3.summary              |   2 +-
 pengine/test10/migrate-fail-4.summary              |   2 +-
 pengine/test10/migrate-fail-6.summary              |   2 +-
 pengine/test10/migrate-fail-7.summary              |   2 +-
 pengine/test10/migrate-fail-8.summary              |   2 +-
 pengine/test10/migrate-fail-9.summary              |   2 +-
 pengine/test10/migrate-fencing.summary             |  14 +-
 pengine/test10/migrate-partial-2.summary           |   2 +-
 pengine/test10/migrate-partial-3.summary           |   2 +-
 pengine/test10/migrate-partial-4.summary           |   4 +-
 pengine/test10/migrate-shutdown.summary            |   6 +-
 pengine/test10/migrate-start-complex.summary       |   4 +-
 pengine/test10/migrate-start.summary               |   2 +-
 pengine/test10/migrate-stop-complex.summary        |   4 +-
 pengine/test10/migrate-stop-start-complex.summary  |   4 +-
 pengine/test10/migrate-stop.summary                |   2 +-
 pengine/test10/migrate-stop_start.summary          |   4 +-
 pengine/test10/mon-rsc-2.summary                   |   2 +-
 pengine/test10/mon-rsc-4.summary                   |   2 +-
 pengine/test10/monitor-onfail-restart.summary      |   2 +-
 pengine/test10/multi1.summary                      |   2 +-
 pengine/test10/multiple-monitor-one-failed.summary |   2 +-
 pengine/test10/not-installed-agent.summary         |   4 +-
 pengine/test10/not-installed-tools.summary         |   2 +-
 .../test10/not-reschedule-unneeded-monitor.summary |   2 +-
 pengine/test10/notify-3.summary                    |   2 +-
 pengine/test10/novell-239082.summary               |   4 +-
 pengine/test10/novell-252693-2.summary             |   2 +-
 pengine/test10/novell-252693-3.summary             |   4 +-
 pengine/test10/novell-252693.summary               |   2 +-
 pengine/test10/one-or-more-1.summary               |   6 +-
 pengine/test10/one-or-more-3.summary               |   2 +-
 pengine/test10/order-mandatory.summary             |   4 +-
 pengine/test10/order-required.summary              |   4 +-
 pengine/test10/order-serialize-set.summary         |  12 +-
 pengine/test10/order-serialize.summary             |  12 +-
 pengine/test10/order-sets.summary                  |   8 +-
 pengine/test10/order-wrong-kind.summary            |   2 +-
 pengine/test10/order3.summary                      |   8 +-
 pengine/test10/order5.summary                      |   8 +-
 pengine/test10/order6.summary                      |   8 +-
 pengine/test10/order7.summary                      |   2 +-
 pengine/test10/ordered-set-basic-startup.summary   |   6 +-
 pengine/test10/ordered-set-natural.summary         |  12 +-
 pengine/test10/params-1.summary                    |   2 +-
 pengine/test10/params-2.summary                    |   2 +-
 pengine/test10/params-4.summary                    |   2 +-
 pengine/test10/params-5.summary                    |   2 +-
 pengine/test10/params-6.summary                    |   2 +-
 pengine/test10/probe-2.summary                     |  12 +-
 pengine/test10/probe-4.summary                     |   2 +-
 pengine/test10/quorum-1.summary                    |   2 +-
 pengine/test10/quorum-2.summary                    |   4 +-
 pengine/test10/quorum-3.summary                    |   6 +-
 pengine/test10/rec-node-10.summary                 |   6 +-
 pengine/test10/rec-node-11.summary                 |   6 +-
 pengine/test10/rec-node-13.summary                 |   2 +-
 pengine/test10/rec-node-15.summary                 |   6 +-
 pengine/test10/rec-node-4.summary                  |   4 +-
 pengine/test10/rec-node-6.summary                  |   4 +-
 pengine/test10/rec-node-7.summary                  |   4 +-
 pengine/test10/rec-node-8.summary                  |   8 +-
 pengine/test10/rec-node-9.summary                  |   4 +-
 pengine/test10/rec-rsc-1.summary                   |   2 +-
 pengine/test10/rec-rsc-2.summary                   |   2 +-
 pengine/test10/rec-rsc-5.summary                   |   4 +-
 pengine/test10/rec-rsc-6.summary                   |   2 +-
 pengine/test10/rec-rsc-9.summary                   |   6 +-
 .../test10/remote-fence-before-reconnect.summary   |   2 +-
 pengine/test10/remote-fence-unclean.summary        |   8 +-
 pengine/test10/remote-move.summary                 |   4 +-
 pengine/test10/remote-orphaned.summary             |   2 +-
 pengine/test10/remote-partial-migrate.summary      |  14 +-
 pengine/test10/remote-partial-migrate2.summary     |  34 +--
 pengine/test10/remote-recover-all.summary          |  18 +-
 pengine/test10/remote-recover-connection.summary   |  20 +-
 pengine/test10/remote-recover-fail.summary         |   6 +-
 pengine/test10/remote-recover-no-resources.summary |  16 +-
 pengine/test10/remote-recover-unknown.summary      |  16 +-
 pengine/test10/remote-recovery.summary             |  20 +-
 pengine/test10/remote-start-fail.summary           |   2 +-
 pengine/test10/remote-startup-probes.summary       |   4 +-
 pengine/test10/remote-startup.summary              |   2 +-
 pengine/test10/remote-unclean2.summary             |   2 +-
 pengine/test10/rsc-discovery-per-node.summary      |   6 +-
 pengine/test10/rsc-sets-clone-1.summary            |   2 +-
 pengine/test10/rsc-sets-clone.summary              |   4 +-
 pengine/test10/rsc-sets-master.summary             |   8 +-
 pengine/test10/rsc-sets-seq-false.summary          |  12 +-
 pengine/test10/rsc-sets-seq-true.summary           |  12 +-
 pengine/test10/rsc_dep4.summary                    |   2 +-
 pengine/test10/standby.summary                     |  16 +-
 .../test10/start-then-stop-with-unfence.summary    |   2 +-
 pengine/test10/stonith-0.summary                   |  10 +-
 pengine/test10/stonith-1.summary                   |  10 +-
 pengine/test10/stonith-4.summary                   |   2 +-
 pengine/test10/stop-failure-no-quorum.summary      |   8 +-
 pengine/test10/stop-failure-with-fencing.summary   |   8 +-
 pengine/test10/stopped-monitor-01.summary          |   2 +-
 pengine/test10/stopped-monitor-02.summary          |   2 +-
 pengine/test10/stopped-monitor-08.summary          |   2 +-
 pengine/test10/ticket-master-14.summary            |   4 +-
 pengine/test10/ticket-master-15.summary            |   4 +-
 pengine/test10/ticket-master-2.summary             |   1 -
 pengine/test10/ticket-master-21.summary            |   4 +-
 pengine/test10/ticket-master-3.summary             |   4 +-
 pengine/test10/ticket-master-9.summary             |   4 +-
 pengine/test10/unfence-definition.summary          |   6 +-
 pengine/test10/unfence-parameters.summary          |   8 +-
 pengine/test10/unmanaged-block-restart.summary     |   4 +-
 pengine/test10/unmanaged-stop-1.summary            |   2 +-
 pengine/test10/unmanaged-stop-2.summary            |   2 +-
 pengine/test10/unmanaged-stop-3.summary            |   2 +-
 pengine/test10/unmanaged-stop-4.summary            |   2 +-
 pengine/test10/unrunnable-1.summary                |  18 +-
 pengine/test10/unrunnable-2.summary                |   2 +-
 pengine/test10/utilization-order2.summary          |   2 +-
 pengine/test10/utilization-order3.summary          |   2 +-
 pengine/test10/utilization-order4.summary          |   2 +-
 pengine/test10/whitebox-fail1.summary              |   8 +-
 pengine/test10/whitebox-fail2.summary              |   8 +-
 pengine/test10/whitebox-fail3.summary              |   2 +-
 .../test10/whitebox-imply-stop-on-fence.summary    |  12 +-
 pengine/test10/whitebox-migrate1.summary           |   8 +-
 pengine/test10/whitebox-move.summary               |   8 +-
 pengine/test10/whitebox-ms-ordering-move.summary   |   4 +-
 pengine/test10/whitebox-orphan-ms.summary          |   5 +-
 pengine/test10/whitebox-orphaned.summary           |   2 +-
 pengine/test10/whitebox-start.summary              |   4 +-
 pengine/test10/whitebox-stop.summary               |   2 +-
 .../test10/whitebox-unexpectedly-running.summary   |   2 +-
 280 files changed, 924 insertions(+), 915 deletions(-)

diff --git a/lib/pengine/utils.c b/lib/pengine/utils.c
index bc34323..222a3e2 100644
--- a/lib/pengine/utils.c
+++ b/lib/pengine/utils.c
@@ -2253,6 +2253,7 @@ void pe_action_set_reason(pe_action_t *action, const char *reason, bool overwrit
     if(action->reason == NULL || overwrite) {
         free(action->reason);
         if(reason) {
+            crm_trace("Set %s reason to '%s'", action->uuid, reason);
             action->reason = strdup(reason);
         } else {
             action->reason = NULL;
diff --git a/pengine/native.c b/pengine/native.c
index 63666fd..5281f36 100644
--- a/pengine/native.c
+++ b/pengine/native.c
@@ -2155,6 +2155,108 @@ native_expand(resource_t * rsc, pe_working_set_t * data_set)
         }                                                               \
     } while(0)
 
+static int rsc_width = 5;
+static int detail_width = 5;
+static void
+LogAction(const char *change, resource_t *rsc, pe_node_t *origin, pe_node_t *destination, pe_action_t *action, pe_action_t *source, gboolean terminal)
+{
+    int len = 0;
+    char *reason = NULL;
+    char *details = NULL;
+    bool same_host = FALSE;
+    bool same_role = FALSE;
+    bool need_role = FALSE;
+
+    CRM_ASSERT(action);
+    CRM_ASSERT(destination != NULL || origin != NULL);
+
+    if(source == NULL) {
+        source = action;
+    }
+
+    len = strlen(rsc->id);
+    if(len > rsc_width) {
+        rsc_width = len + 2;
+    }
+
+    if(rsc->role > RSC_ROLE_STARTED || rsc->next_role > RSC_ROLE_SLAVE) {
+        need_role = TRUE;
+    }
+
+    if(origin != NULL && destination != NULL && origin->details == destination->details) {
+        same_host = TRUE;
+    }
+
+    if(rsc->role == rsc->next_role) {
+        same_role = TRUE;
+    }
+
+    if(need_role && origin == NULL) {
+        /* Promoting from Stopped */
+        details = crm_strdup_printf("%s -> %s %s", role2text(rsc->role), role2text(rsc->next_role), destination->details->uname);
+
+    } else if(need_role && destination == NULL) {
+        /* Demoting a Master or Stopping a Slave */
+        details = crm_strdup_printf("%s %s", role2text(rsc->role), origin->details->uname);
+
+    } else if(origin == NULL || destination == NULL) {
+        /* Starting or stopping a resource */
+        details = crm_strdup_printf("%s", origin?origin->details->uname:destination->details->uname);
+
+    } else if(need_role && same_role && same_host) {
+        /* Recovering or Restarting a Master/Slave resource */
+        details = crm_strdup_printf("%s %s", role2text(rsc->role), origin->details->uname);
+
+    } else if(same_role && same_host) {
+        /* Recovering or Restarting a normal resource */
+        details = crm_strdup_printf("%s", origin->details->uname);
+
+    } else if(same_role && need_role) {
+        /* Moving a Master/Slave resource */
+        details = crm_strdup_printf("%s -> %s %s", origin->details->uname, destination->details->uname, role2text(rsc->role));
+
+    } else if(same_role) {
+        /* Moving a normal resource */
+        details = crm_strdup_printf("%s -> %s", origin->details->uname, destination->details->uname);
+
+    } else if(same_host) {
+        /* Promoting or Demoting a Master/Slave resource */
+        details = crm_strdup_printf("%s -> %s %s", role2text(rsc->role), role2text(rsc->next_role), origin->details->uname);
+
+    } else {
+        /* Moving and promoting/demoting */
+        details = crm_strdup_printf("%s %s -> %s %s", role2text(rsc->role), origin->details->uname, role2text(rsc->next_role), destination->details->uname);
+    }
+
+    len = strlen(details);
+    if(len > detail_width) {
+        detail_width = len;
+    }
+
+    if(source->reason && is_not_set(action->flags, pe_action_runnable)) {
+        reason = crm_strdup_printf(" due to %s (blocked)", source->reason);
+
+    } else if(source->reason) {
+        reason = crm_strdup_printf(" due to %s", source->reason);
+
+    } else if(is_not_set(action->flags, pe_action_runnable)) {
+        reason = strdup(" blocked");
+
+    } else {
+        reason = strdup("");
+    }
+
+    if(terminal) {
+        printf(" * %-8s   %-*s   ( %*s )  %s\n", change, rsc_width, rsc->id, detail_width, details, reason);
+    } else {
+        crm_notice(" * %-8s   %-*s   ( %*s )  %s", change, rsc_width, rsc->id, detail_width, details, reason);
+    }
+
+    free(details);
+    free(reason);
+}
+
+
 void
 LogActions(resource_t * rsc, pe_working_set_t * data_set, gboolean terminal)
 {
@@ -2234,11 +2336,11 @@ LogActions(resource_t * rsc, pe_working_set_t * data_set, gboolean terminal)
     } else {
         possible_matches = find_actions(rsc->actions, key, current);
     }
-    free(key);
     if (possible_matches) {
         stop = possible_matches->data;
         g_list_free(possible_matches);
     }
+    free(key);
 
     key = promote_key(rsc);
     possible_matches = find_actions(rsc->actions, key, next);
@@ -2269,34 +2371,29 @@ LogActions(resource_t * rsc, pe_working_set_t * data_set, gboolean terminal)
         CRM_CHECK(next != NULL,);
         if (next == NULL) {
         } else if (migrate_to && is_set(migrate_to->flags, pe_action_runnable) && current) {
-            log_change(start, "Migrate %s\t(%s %s -> %s)",
-                       rsc->id, role2text(rsc->role), current->details->uname,
-                       next->details->uname);
+            LogAction("Migrate", rsc, current, next, start, NULL, terminal);
 
         } else if (is_set(rsc->flags, pe_rsc_reload)) {
-            log_change(start, "Reload  %s\t(%s %s)", rsc->id, role2text(rsc->role), next->details->uname);
+            LogAction("Reload", rsc, current, next, start, NULL, terminal);
 
         } else if (start == NULL || is_set(start->flags, pe_action_optional)) {
             pe_rsc_info(rsc, "Leave   %s\t(%s %s)", rsc->id, role2text(rsc->role),
                         next->details->uname);
 
         } else if (start && is_set(start->flags, pe_action_runnable) == FALSE) {
-            log_change(start, "Stop    %s\t(%s %s%s)", rsc->id, role2text(rsc->role), current?current->details->uname:"N/A",
-                       stop && is_not_set(stop->flags, pe_action_runnable) ? " - blocked" : "");
+            LogAction("Stop", rsc, current, NULL, stop, start, terminal);
             STOP_SANITY_ASSERT(__LINE__);
 
         } else if (moving && current) {
-            log_change(stop, "%s %s\t(%s %s -> %s)",
-                       is_set(rsc->flags, pe_rsc_failed) ? "Recover" : "Move   ",
-                       rsc->id, role2text(rsc->role),
-                       current->details->uname, next->details->uname);
+            LogAction(is_set(rsc->flags, pe_rsc_failed) ? "Recover" : "Move",
+                      rsc, current, next, stop, NULL, terminal);
 
         } else if (is_set(rsc->flags, pe_rsc_failed)) {
-            log_change(stop, "Recover %s\t(%s %s)", rsc->id, role2text(rsc->role), next->details->uname);
+            LogAction("Recover", rsc, current, NULL, stop, NULL, terminal);
             STOP_SANITY_ASSERT(__LINE__);
 
         } else {
-            log_change(start, "Restart %s\t(%s %s)", rsc->id, role2text(rsc->role), next->details->uname);
+            LogAction("Restart", rsc, current, next, start, NULL, terminal);
             /* STOP_SANITY_ASSERT(__LINE__); False positive for migrate-fail-7 */
         }
 
@@ -2304,50 +2401,16 @@ LogActions(resource_t * rsc, pe_working_set_t * data_set, gboolean terminal)
         return;
     }
 
-    if (rsc->role > RSC_ROLE_SLAVE && rsc->role > rsc->next_role) {
-        CRM_CHECK(current != NULL,);
-        if (current != NULL) {
-            gboolean allowed = FALSE;
-
-            if (demote != NULL && (demote->flags & pe_action_runnable)) {
-                allowed = TRUE;
-            }
-
-            log_change(demote, "Demote  %s\t(%s -> %s %s%s)",
-                       rsc->id,
-                       role2text(rsc->role),
-                       role2text(rsc->next_role),
-                       current->details->uname, allowed ? "" : " - blocked");
-
-            if (stop != NULL && is_not_set(stop->flags, pe_action_optional)
-                && rsc->next_role > RSC_ROLE_STOPPED && moving == FALSE) {
-                if (is_set(rsc->flags, pe_rsc_failed)) {
-                    log_change(stop, "Recover %s\t(%s %s)",
-                               rsc->id, role2text(rsc->role), next->details->uname);
-                    STOP_SANITY_ASSERT(__LINE__);
-
-                } else if (is_set(rsc->flags, pe_rsc_reload)) {
-                    log_change(start, "Reload  %s\t(%s %s)", rsc->id, role2text(rsc->role),
-                               next->details->uname);
-
-                } else {
-                    log_change(start, "Restart %s\t(%s %s)",
-                               rsc->id, role2text(rsc->next_role), next->details->uname);
-                    STOP_SANITY_ASSERT(__LINE__);
-                }
-            }
-        }
+    if(stop
+       && (rsc->next_role == RSC_ROLE_STOPPED
+           || (start && is_not_set(start->flags, pe_action_runnable)))) {
 
-    } else if (rsc->next_role == RSC_ROLE_STOPPED) {
         GListPtr gIter = NULL;
 
-        CRM_CHECK(current != NULL,);
-
         key = stop_key(rsc);
         for (gIter = rsc->running_on; gIter != NULL; gIter = gIter->next) {
             node_t *node = (node_t *) gIter->data;
             action_t *stop_op = NULL;
-            gboolean allowed = FALSE;
 
             possible_matches = find_actions(rsc->actions, key, node);
             if (possible_matches) {
@@ -2357,73 +2420,39 @@ LogActions(resource_t * rsc, pe_working_set_t * data_set, gboolean terminal)
 
             if (stop_op && (stop_op->flags & pe_action_runnable)) {
                 STOP_SANITY_ASSERT(__LINE__);
-                allowed = TRUE;
             }
 
-            log_change(start, "Stop    %s\t(%s%s) %s", rsc->id, node->details->uname,
-                       allowed ? "" : " - blocked", stop->reason?stop->reason:"");
+            LogAction("Stop", rsc, node, NULL, stop_op, start, terminal);
         }
 
         free(key);
-    }
 
-    if (moving) {
-        log_change(stop, "Move    %s\t(%s %s -> %s)",
-                   rsc->id, role2text(rsc->next_role), current->details->uname,
-                   next->details->uname);
+    } else if (stop && is_set(rsc->flags, pe_rsc_failed)) {
+        /* 'stop' may be NULL if the failure was ignored */
+        LogAction("Recover", rsc, current, next, stop, start, terminal);
         STOP_SANITY_ASSERT(__LINE__);
-    }
 
-    if (rsc->role == RSC_ROLE_STOPPED) {
-        gboolean allowed = FALSE;
+    } else if (moving) {
+        LogAction("Move", rsc, current, next, stop, NULL, terminal);
+        STOP_SANITY_ASSERT(__LINE__);
 
-        if (start && (start->flags & pe_action_runnable)) {
-            allowed = TRUE;
-        }
+    } else if (is_set(rsc->flags, pe_rsc_reload)) {
+        LogAction("Reload", rsc, current, next, start, NULL, terminal);
 
-        CRM_CHECK(next != NULL,);
-        if (next != NULL) {
-            log_change(start, "Start   %s\t(%s%s)", rsc->id, next->details->uname,
-                       allowed ? "" : " - blocked");
-        }
-        if (allowed == FALSE) {
-            return;
-        }
-    }
+    } else if (stop != NULL && is_not_set(stop->flags, pe_action_optional)) {
+        LogAction("Restart", rsc, current, next, start, NULL, terminal);
+        STOP_SANITY_ASSERT(__LINE__);
 
-    if (rsc->next_role > RSC_ROLE_SLAVE && rsc->role < rsc->next_role) {
-        gboolean allowed = FALSE;
+    } else if (rsc->role == RSC_ROLE_MASTER) {
+        CRM_LOG_ASSERT(current != NULL);
+        LogAction("Demote", rsc, current, next, demote, NULL, terminal);
 
+    } else if(rsc->next_role == RSC_ROLE_MASTER) {
         CRM_LOG_ASSERT(next);
-        if (stop != NULL && is_not_set(stop->flags, pe_action_optional)
-            && rsc->role > RSC_ROLE_STOPPED) {
-            if (is_set(rsc->flags, pe_rsc_failed)) {
-                log_change(stop, "Recover %s\t(%s %s)",
-                           rsc->id, role2text(rsc->role), next?next->details->uname:NULL);
-                STOP_SANITY_ASSERT(__LINE__);
-
-            } else if (is_set(rsc->flags, pe_rsc_reload)) {
-                log_change(start, "Reload  %s\t(%s %s)", rsc->id, role2text(rsc->role),
-                           next?next->details->uname:NULL);
-                STOP_SANITY_ASSERT(__LINE__);
-
-            } else {
-                log_change(start, "Restart %s\t(%s %s)",
-                           rsc->id, role2text(rsc->role), next?next->details->uname:NULL);
-                STOP_SANITY_ASSERT(__LINE__);
-            }
-        }
-
-        if (promote && (promote->flags & pe_action_runnable)) {
-            allowed = TRUE;
-        }
+        LogAction("Promote", rsc, current, next, promote, NULL, terminal);
 
-        log_change(promote, "Promote %s\t(%s -> %s %s%s)",
-                   rsc->id,
-                   role2text(rsc->role),
-                   role2text(rsc->next_role),
-                   next?next->details->uname:NULL,
-                   allowed ? "" : " - blocked");
+    } else if (rsc->role == RSC_ROLE_STOPPED && rsc->next_role > RSC_ROLE_STOPPED) {
+        LogAction("Start", rsc, current, next, start, NULL, terminal);
     }
 }
 
diff --git a/pengine/test10/1-a-then-bm-move-b.summary b/pengine/test10/1-a-then-bm-move-b.summary
index 571feda..f4d6207 100644
--- a/pengine/test10/1-a-then-bm-move-b.summary
+++ b/pengine/test10/1-a-then-bm-move-b.summary
@@ -6,7 +6,7 @@ Online: [ 18node1 18node2 18node3 ]
  B	(ocf::heartbeat:Dummy):	Started 18node2 
 
 Transition Summary:
- * Migrate B	(Started 18node2 -> 18node1)
+ * Migrate    B       ( 18node2 -> 18node1 )  
 
 Executing cluster transition:
  * Resource action: B               migrate_to on 18node2
diff --git a/pengine/test10/10-a-then-bm-b-move-a-clone.summary b/pengine/test10/10-a-then-bm-b-move-a-clone.summary
index b39963f..ee7697f 100644
--- a/pengine/test10/10-a-then-bm-b-move-a-clone.summary
+++ b/pengine/test10/10-a-then-bm-b-move-a-clone.summary
@@ -9,7 +9,7 @@ Online: [ f20node2 ]
 
 Transition Summary:
  * Stop    myclone:1	(f20node1)  	due to node availability
- * Migrate vm	(Started f20node1 -> f20node2)
+ * Migrate    vm            ( f20node1 -> f20node2 )  
 
 Executing cluster transition:
  * Resource action: vm              migrate_to on f20node1
diff --git a/pengine/test10/11-a-then-bm-b-move-a-clone-starting.summary b/pengine/test10/11-a-then-bm-b-move-a-clone-starting.summary
index 498cd2b..9138c81 100644
--- a/pengine/test10/11-a-then-bm-b-move-a-clone-starting.summary
+++ b/pengine/test10/11-a-then-bm-b-move-a-clone-starting.summary
@@ -9,8 +9,8 @@ Online: [ f20node2 ]
  vm	(ocf::heartbeat:Dummy):	Started f20node1 
 
 Transition Summary:
- * Move    myclone:0	(Started f20node1 -> f20node2)
- * Move    vm	(Started f20node1 -> f20node2) 	due to unrunnable myclone-clone stop
+ * Move       myclone:0     ( f20node1 -> f20node2 )  
+ * Move       vm            ( f20node1 -> f20node2 )   due to unrunnable myclone-clone stop
 
 Executing cluster transition:
  * Resource action: myclone         monitor on f20node2
diff --git a/pengine/test10/1360.summary b/pengine/test10/1360.summary
index 04ec941..acff1b8 100644
--- a/pengine/test10/1360.summary
+++ b/pengine/test10/1360.summary
@@ -8,7 +8,7 @@ Online: [ ssgtest1a ssgtest1b ]
      Started: [ ssgtest1a ]
 
 Transition Summary:
- * Move    dollies:0	(Started ssgtest1a -> ssgtest1b)
+ * Move       dollies:0     ( ssgtest1a -> ssgtest1b )  
 
 Executing cluster transition:
  * Pseudo action:   dolly_stop_0
diff --git a/pengine/test10/2-am-then-b-move-a.summary b/pengine/test10/2-am-then-b-move-a.summary
index 1d74081..a238cf6 100644
--- a/pengine/test10/2-am-then-b-move-a.summary
+++ b/pengine/test10/2-am-then-b-move-a.summary
@@ -6,7 +6,7 @@ Online: [ 18node1 18node2 18node3 ]
  B	(ocf::heartbeat:Dummy):	Started 18node2 
 
 Transition Summary:
- * Migrate A	(Started 18node1 -> 18node2)
+ * Migrate    A       ( 18node1 -> 18node2 )  
 
 Executing cluster transition:
  * Resource action: A               migrate_to on 18node1
diff --git a/pengine/test10/3-am-then-bm-both-migrate.summary b/pengine/test10/3-am-then-bm-both-migrate.summary
index 6e1e33a..d938449 100644
--- a/pengine/test10/3-am-then-bm-both-migrate.summary
+++ b/pengine/test10/3-am-then-bm-both-migrate.summary
@@ -6,8 +6,8 @@ Online: [ 18node1 18node2 18node3 ]
  B	(ocf::heartbeat:Dummy):	Started 18node2 
 
 Transition Summary:
- * Migrate A	(Started 18node1 -> 18node2)
- * Migrate B	(Started 18node2 -> 18node1)
+ * Migrate    A       ( 18node1 -> 18node2 )  
+ * Migrate    B       ( 18node2 -> 18node1 )  
 
 Executing cluster transition:
  * Resource action: A               migrate_to on 18node1
diff --git a/pengine/test10/4-am-then-bm-b-not-migratable.summary b/pengine/test10/4-am-then-bm-b-not-migratable.summary
index 2283c8b..16ce149 100644
--- a/pengine/test10/4-am-then-bm-b-not-migratable.summary
+++ b/pengine/test10/4-am-then-bm-b-not-migratable.summary
@@ -6,8 +6,8 @@ Online: [ 18node1 18node2 18node3 ]
  B	(ocf::heartbeat:Dummy):	Started 18node2 
 
 Transition Summary:
- * Migrate A	(Started 18node1 -> 18node2)
- * Move    B	(Started 18node2 -> 18node1)
+ * Migrate    A       ( 18node1 -> 18node2 )  
+ * Move       B       ( 18node2 -> 18node1 )  
 
 Executing cluster transition:
  * Resource action: B               stop on 18node2
diff --git a/pengine/test10/5-am-then-bm-a-not-migratable.summary b/pengine/test10/5-am-then-bm-a-not-migratable.summary
index 7e95dbb..fa1dc33 100644
--- a/pengine/test10/5-am-then-bm-a-not-migratable.summary
+++ b/pengine/test10/5-am-then-bm-a-not-migratable.summary
@@ -6,8 +6,8 @@ Online: [ 18node1 18node2 18node3 ]
  B	(ocf::heartbeat:Dummy):	Started 18node2 
 
 Transition Summary:
- * Move    A	(Started 18node1 -> 18node2)
- * Move    B	(Started 18node2 -> 18node1) 	due to unrunnable A stop
+ * Move       A       ( 18node1 -> 18node2 )  
+ * Move       B       ( 18node2 -> 18node1 )   due to unrunnable A stop
 
 Executing cluster transition:
  * Resource action: B               stop on 18node2
diff --git a/pengine/test10/594.summary b/pengine/test10/594.summary
index de1d179..4a36789 100644
--- a/pengine/test10/594.summary
+++ b/pengine/test10/594.summary
@@ -15,8 +15,8 @@ Online: [ hadev1 hadev2 ]
 Transition Summary:
  * Shutdown hadev2
  * Fence (reboot) hadev3 'peer is no longer part of the cluster'
- * Move    DcIPaddr	(Started hadev2 -> hadev1)
- * Move    rsc_hadev2	(Started hadev2 -> hadev1)
+ * Move       DcIPaddr              ( hadev2 -> hadev1 )  
+ * Move       rsc_hadev2            ( hadev2 -> hadev1 )  
  * Stop    child_DoFencing:0	(hadev2)  	due to node availability
  * Stop    child_DoFencing:2	(hadev1)  	due to node availability
 
diff --git a/pengine/test10/6-migrate-group.summary b/pengine/test10/6-migrate-group.summary
index 3c4e7c6..c7c9f6d 100644
--- a/pengine/test10/6-migrate-group.summary
+++ b/pengine/test10/6-migrate-group.summary
@@ -8,9 +8,9 @@ Online: [ 18node1 18node2 18node3 ]
      C	(ocf::heartbeat:Dummy):	Started 18node1 
 
 Transition Summary:
- * Migrate A	(Started 18node1 -> 18node2)
- * Migrate B	(Started 18node1 -> 18node2)
- * Migrate C	(Started 18node1 -> 18node2)
+ * Migrate    A       ( 18node1 -> 18node2 )  
+ * Migrate    B       ( 18node1 -> 18node2 )  
+ * Migrate    C       ( 18node1 -> 18node2 )  
 
 Executing cluster transition:
  * Pseudo action:   thegroup_stop_0
diff --git a/pengine/test10/662.summary b/pengine/test10/662.summary
index 4a9d911..a19f71e 100644
--- a/pengine/test10/662.summary
+++ b/pengine/test10/662.summary
@@ -15,7 +15,7 @@ Online: [ c001n02 c001n03 c001n04 c001n09 ]
 
 Transition Summary:
  * Shutdown c001n02
- * Move    rsc_c001n02	(Started c001n02 -> c001n03)
+ * Move       rsc_c001n02           ( c001n02 -> c001n03 )  
  * Stop    child_DoFencing:0	(c001n02)  	due to node availability
 
 Executing cluster transition:
diff --git a/pengine/test10/696.summary b/pengine/test10/696.summary
index af16c93..78e40d1 100644
--- a/pengine/test10/696.summary
+++ b/pengine/test10/696.summary
@@ -12,7 +12,7 @@ Online: [ hadev1 hadev2 hadev3 ]
      child_DoFencing:2	(stonith:ssh):	Stopped 
 
 Transition Summary:
- * Move    rsc_hadev1	(Started hadev3 -> hadev1)
+ * Move       rsc_hadev1            ( hadev3 -> hadev1 )  
  * Start   child_DoFencing:2	(hadev1)
 
 Executing cluster transition:
diff --git a/pengine/test10/7-migrate-group-one-unmigratable.summary b/pengine/test10/7-migrate-group-one-unmigratable.summary
index cf1b370..6c6b127 100644
--- a/pengine/test10/7-migrate-group-one-unmigratable.summary
+++ b/pengine/test10/7-migrate-group-one-unmigratable.summary
@@ -8,9 +8,9 @@ Online: [ 18node1 18node2 18node3 ]
      C	(ocf::heartbeat:Dummy):	Started 18node1 
 
 Transition Summary:
- * Migrate A	(Started 18node1 -> 18node2)
- * Move    B	(Started 18node1 -> 18node2)
- * Move    C	(Started 18node1 -> 18node2) 	due to unrunnable B stop
+ * Migrate    A       ( 18node1 -> 18node2 )  
+ * Move       B       ( 18node1 -> 18node2 )  
+ * Move       C       ( 18node1 -> 18node2 )   due to unrunnable B stop
 
 Executing cluster transition:
  * Pseudo action:   thegroup_stop_0
diff --git a/pengine/test10/726.summary b/pengine/test10/726.summary
index 920aefe..b3cd4e4 100644
--- a/pengine/test10/726.summary
+++ b/pengine/test10/726.summary
@@ -15,7 +15,7 @@ Online: [ ibm1 sgi2 test02 test03 ]
 
 Transition Summary:
  * Start   rsc_sgi2	(sgi2)
- * Move    rsc_ibm1	(Started test03 -> ibm1)
+ * Move       rsc_ibm1              ( test03 -> ibm1 )  
  * Start   rsc_test02	(test02)
  * Start   child_DoFencing:2	(ibm1)
  * Start   child_DoFencing:3	(sgi2)
diff --git a/pengine/test10/735.summary b/pengine/test10/735.summary
index 69538de..2db520a 100644
--- a/pengine/test10/735.summary
+++ b/pengine/test10/735.summary
@@ -13,7 +13,7 @@ OFFLINE: [ hadev1 ]
      child_DoFencing:2	(stonith:ssh):	Stopped 
 
 Transition Summary:
- * Move    rsc_hadev1	(Started hadev2 -> hadev3)
+ * Move       rsc_hadev1            ( hadev2 -> hadev3 )  
  * Start   rsc_hadev3	(hadev3)
  * Start   child_DoFencing:0	(hadev2)
  * Start   child_DoFencing:1	(hadev3)
diff --git a/pengine/test10/764.summary b/pengine/test10/764.summary
index 0d5c612..ea62931 100644
--- a/pengine/test10/764.summary
+++ b/pengine/test10/764.summary
@@ -15,11 +15,11 @@ OFFLINE: [ posic042 posic044 ]
      child_DoFencing:3	(stonith:ssh):	Stopped 
 
 Transition Summary:
- * Stop    DcIPaddr	(Started posic043) 	due to no quorum
- * Stop    rsc_posic041	(Started posic041) 	due to no quorum
- * Stop    rsc_posic042	(Started posic041) 	due to no quorum
- * Stop    rsc_posic043	(Started posic043) 	due to no quorum
- * Stop    rsc_posic044	(Started posic041) 	due to no quorum
+ * Stop       DcIPaddr         ( posic043 )   due to no quorum
+ * Stop       rsc_posic041     ( posic041 )   due to no quorum
+ * Stop       rsc_posic042     ( posic041 )   due to no quorum
+ * Stop       rsc_posic043     ( posic043 )   due to no quorum
+ * Stop       rsc_posic044     ( posic041 )   due to no quorum
 
 Executing cluster transition:
  * Resource action: DcIPaddr        monitor on posic041
diff --git a/pengine/test10/797.summary b/pengine/test10/797.summary
index 9e94003..61afbf1 100644
--- a/pengine/test10/797.summary
+++ b/pengine/test10/797.summary
@@ -16,12 +16,12 @@ Online: [ c001n01 c001n02 c001n03 ]
 
 Transition Summary:
  * Shutdown c001n02
- * Stop    DcIPaddr	(Started c001n03) 	due to no quorum
- * Stop    rsc_c001n08	(Started c001n02) 	due to no quorum
- * Stop    rsc_c001n02	(Started c001n02) 	due to no quorum
- * Stop    rsc_c001n03	(Started c001n03) 	due to no quorum
- * Stop    rsc_c001n01	(Started c001n01) 	due to no quorum
- * Restart child_DoFencing:0	(Started c001n01)
+ * Stop       DcIPaddr              ( c001n03 )   due to no quorum
+ * Stop       rsc_c001n08           ( c001n02 )   due to no quorum
+ * Stop       rsc_c001n02           ( c001n02 )   due to no quorum
+ * Stop       rsc_c001n03           ( c001n03 )   due to no quorum
+ * Stop       rsc_c001n01           ( c001n01 )   due to no quorum
+ * Restart    child_DoFencing:0     ( c001n01 )  
  * Stop    child_DoFencing:1	(c001n02)  	due to node availability
 
 Executing cluster transition:
diff --git a/pengine/test10/8-am-then-bm-a-migrating-b-stopping.summary b/pengine/test10/8-am-then-bm-a-migrating-b-stopping.summary
index 2aa3f07..06a1356 100644
--- a/pengine/test10/8-am-then-bm-a-migrating-b-stopping.summary
+++ b/pengine/test10/8-am-then-bm-a-migrating-b-stopping.summary
@@ -7,7 +7,7 @@ Online: [ 18node1 18node2 18node3 ]
  B	(ocf::heartbeat:Dummy):	Started 18node2 ( disabled ) 
 
 Transition Summary:
- * Migrate A	(Started 18node1 -> 18node2)
+ * Migrate    A       ( 18node1 -> 18node2 )  
  * Stop    B	(18node2)
 
 Executing cluster transition:
diff --git a/pengine/test10/829.summary b/pengine/test10/829.summary
index feca908..8cc27dc 100644
--- a/pengine/test10/829.summary
+++ b/pengine/test10/829.summary
@@ -16,7 +16,7 @@ Online: [ c001n01 c001n03 c001n08 ]
 
 Transition Summary:
  * Fence (reboot) c001n02 'peer is no longer part of the cluster'
- * Move    rsc_c001n02	(Started c001n02 -> c001n01)
+ * Move       rsc_c001n02           ( c001n02 -> c001n01 )  
  * Stop    child_DoFencing:0	(c001n02)  	due to node availability
 
 Executing cluster transition:
diff --git a/pengine/test10/9-am-then-bm-b-migrating-a-stopping.summary b/pengine/test10/9-am-then-bm-b-migrating-a-stopping.summary
index 44fc1a2..250d888 100644
--- a/pengine/test10/9-am-then-bm-b-migrating-a-stopping.summary
+++ b/pengine/test10/9-am-then-bm-b-migrating-a-stopping.summary
@@ -8,7 +8,7 @@ Online: [ 18node1 18node2 18node3 ]
 
 Transition Summary:
  * Stop    A	(18node1)  	due to node availability
- * Stop    B	(Started 18node2) 	due to unrunnable A start
+ * Stop       B       ( 18node2 )   due to unrunnable A start
 
 Executing cluster transition:
  * Resource action: B               stop on 18node2
diff --git a/pengine/test10/994-2.summary b/pengine/test10/994-2.summary
index a1d477f..0f7def7 100644
--- a/pengine/test10/994-2.summary
+++ b/pengine/test10/994-2.summary
@@ -10,8 +10,8 @@ Online: [ paul ]
  depends	(lsb:postfix):	Started paul
 
 Transition Summary:
- * Recover postfix_9	(Started paul)
- * Restart depends	(Started paul) 	due to required group_1 running
+ * Recover    postfix_9     (  paul )  
+ * Restart    depends       (  paul )   due to required group_1 running
 
 Executing cluster transition:
  * Resource action: depends         stop on paul
diff --git a/pengine/test10/994.summary b/pengine/test10/994.summary
index 6e8e4a2..4f0c42f 100644
--- a/pengine/test10/994.summary
+++ b/pengine/test10/994.summary
@@ -9,7 +9,7 @@ Online: [ paul ]
      postfix_9	(lsb:postfix):	FAILED paul 
 
 Transition Summary:
- * Recover postfix_9	(Started paul)
+ * Recover    postfix_9     (  paul )  
 
 Executing cluster transition:
  * Pseudo action:   group_1_stop_0
diff --git a/pengine/test10/a-demote-then-b-migrate.summary b/pengine/test10/a-demote-then-b-migrate.summary
index 84b250e..9e461e8 100644
--- a/pengine/test10/a-demote-then-b-migrate.summary
+++ b/pengine/test10/a-demote-then-b-migrate.summary
@@ -8,9 +8,9 @@ Online: [ node1 node2 ]
  rsc2	(ocf::pacemaker:Dummy):	Started node1 
 
 Transition Summary:
- * Demote  rsc1:0	(Master -> Slave node1)
+ * Demote     rsc1:0     ( Master -> Slave node1 )  
  * Promote rsc1:1	(Slave -> Master node2)
- * Migrate rsc2	(Started node1 -> node2)
+ * Migrate    rsc2       (        node1 -> node2 )  
 
 Executing cluster transition:
  * Resource action: rsc1:1          cancel=5000 on node1
diff --git a/pengine/test10/a-promote-then-b-migrate.summary b/pengine/test10/a-promote-then-b-migrate.summary
index c7d791b..166b7b0 100644
--- a/pengine/test10/a-promote-then-b-migrate.summary
+++ b/pengine/test10/a-promote-then-b-migrate.summary
@@ -9,7 +9,7 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Promote rsc1:1	(Slave -> Master node2)
- * Migrate rsc2	(Started node1 -> node2)
+ * Migrate    rsc2       (        node1 -> node2 )  
 
 Executing cluster transition:
  * Resource action: rsc1:1          cancel=10000 on node2
diff --git a/pengine/test10/anti-colocation-master.summary b/pengine/test10/anti-colocation-master.summary
index 31fd635..df4c4ed 100644
--- a/pengine/test10/anti-colocation-master.summary
+++ b/pengine/test10/anti-colocation-master.summary
@@ -10,9 +10,9 @@ Online: [ sle12sp2-1 sle12sp2-2 ]
      Slaves: [ sle12sp2-2 ]
 
 Transition Summary:
- * Move    dummy1	(Started sle12sp2-2 -> sle12sp2-1)
+ * Move       dummy1     (   sle12sp2-2 -> sle12sp2-1 )  
  * Promote state1:0	(Slave -> Master sle12sp2-2)
- * Demote  state1:1	(Master -> Slave sle12sp2-1)
+ * Demote     state1:1   ( Master -> Slave sle12sp2-1 )  
 
 Executing cluster transition:
  * Resource action: dummy1          stop on sle12sp2-2
diff --git a/pengine/test10/anti-colocation-order.summary b/pengine/test10/anti-colocation-order.summary
index 052043a..4f03a68 100644
--- a/pengine/test10/anti-colocation-order.summary
+++ b/pengine/test10/anti-colocation-order.summary
@@ -11,8 +11,8 @@ Online: [ node2 ]
      rsc4	(ocf::pacemaker:Dummy):	Started node2 
 
 Transition Summary:
- * Move    rsc1	(Started node1 -> node2)
- * Move    rsc2	(Started node1 -> node2)
+ * Move       rsc1    ( node1 -> node2 )  
+ * Move       rsc2    ( node1 -> node2 )  
  * Stop    rsc3	(node2)  	due to node availability
  * Stop    rsc4	(node2)  	due to node availability
 
diff --git a/pengine/test10/anti-colocation-slave.summary b/pengine/test10/anti-colocation-slave.summary
index 9179e9f..0d77064 100644
--- a/pengine/test10/anti-colocation-slave.summary
+++ b/pengine/test10/anti-colocation-slave.summary
@@ -9,9 +9,9 @@ Online: [ sle12sp2-1 sle12sp2-2 ]
  dummy1	(ocf::pacemaker:Dummy):	Started sle12sp2-1 
 
 Transition Summary:
- * Demote  state1:0	(Master -> Slave sle12sp2-1)
+ * Demote     state1:0     ( Master -> Slave sle12sp2-1 )  
  * Promote state1:1	(Slave -> Master sle12sp2-2)
- * Move    dummy1	(Started sle12sp2-1 -> sle12sp2-2)
+ * Move       dummy1       (   sle12sp2-1 -> sle12sp2-2 )  
 
 Executing cluster transition:
  * Resource action: dummy1          stop on sle12sp2-1
diff --git a/pengine/test10/asymmetrical-order-move.summary b/pengine/test10/asymmetrical-order-move.summary
index 503813c..34869d5 100644
--- a/pengine/test10/asymmetrical-order-move.summary
+++ b/pengine/test10/asymmetrical-order-move.summary
@@ -9,7 +9,7 @@ Online: [ sle12sp2-1 sle12sp2-2 ]
  dummy2	(ocf::pacemaker:Dummy):	Started sle12sp2-1 
 
 Transition Summary:
- * Stop    dummy2	(Started sle12sp2-1) 	due to unrunnable dummy1 start
+ * Stop       dummy2     ( sle12sp2-1 )   due to unrunnable dummy1 start
 
 Executing cluster transition:
  * Resource action: dummy2          stop on sle12sp2-1
diff --git a/pengine/test10/bug-1572-1.summary b/pengine/test10/bug-1572-1.summary
index 6a24614..7715980 100644
--- a/pengine/test10/bug-1572-1.summary
+++ b/pengine/test10/bug-1572-1.summary
@@ -12,11 +12,11 @@ Online: [ arc-dknightlx arc-tkincaidlx.wsicorp.com ]
 
 Transition Summary:
  * Shutdown arc-dknightlx
- * Stop    rsc_drbd_7788:0	(arc-dknightlx)  	due to node availability
+ * Stop       rsc_drbd_7788:0          (               Slave arc-dknightlx )   due to node availability
  * Restart rsc_drbd_7788:1	(Master arc-tkincaidlx.wsicorp.com)
- * Restart fs_mirror	(Started arc-tkincaidlx.wsicorp.com) 	due to required ms_drbd_7788 notified
- * Restart pgsql_5555	(Started arc-tkincaidlx.wsicorp.com) 	due to required fs_mirror start
- * Restart IPaddr_147_81_84_133	(Started arc-tkincaidlx.wsicorp.com) 	due to required pgsql_5555 start
+ * Restart    fs_mirror                (        arc-tkincaidlx.wsicorp.com )   due to required ms_drbd_7788 notified
+ * Restart    pgsql_5555               (        arc-tkincaidlx.wsicorp.com )   due to required fs_mirror start
+ * Restart    IPaddr_147_81_84_133     (        arc-tkincaidlx.wsicorp.com )   due to required pgsql_5555 start
 
 Executing cluster transition:
  * Pseudo action:   ms_drbd_7788_pre_notify_demote_0
diff --git a/pengine/test10/bug-1572-2.summary b/pengine/test10/bug-1572-2.summary
index 96574cf..9d2b885 100644
--- a/pengine/test10/bug-1572-2.summary
+++ b/pengine/test10/bug-1572-2.summary
@@ -12,7 +12,7 @@ Online: [ arc-dknightlx arc-tkincaidlx.wsicorp.com ]
 
 Transition Summary:
  * Shutdown arc-dknightlx
- * Stop    rsc_drbd_7788:0	(arc-dknightlx)  	due to node availability
+ * Stop       rsc_drbd_7788:0          (                        Slave arc-dknightlx )   due to node availability
  * Demote  rsc_drbd_7788:1	(Master -> Slave arc-tkincaidlx.wsicorp.com)
  * Stop    fs_mirror	(arc-tkincaidlx.wsicorp.com)  	due to node availability
  * Stop    pgsql_5555	(arc-tkincaidlx.wsicorp.com)  	due to node availability
diff --git a/pengine/test10/bug-1718.summary b/pengine/test10/bug-1718.summary
index b539e4e..aec182e 100644
--- a/pengine/test10/bug-1718.summary
+++ b/pengine/test10/bug-1718.summary
@@ -13,8 +13,8 @@ OFFLINE: [ defiant.ds9 warbird.ds9 ]
      resource_dummy	(ocf::heartbeat:Dummy):	Started ops.ds9
 
 Transition Summary:
- * Stop    resource_IP3	(Started ops.ds9) 	due to unrunnable Web_Group running
- * Stop    resource_dummy	(Started ops.ds9) 	due to required resource_IP3 start
+ * Stop       resource_IP3     ( ops.ds9 )   due to unrunnable Web_Group running
+ * Stop       resource_dummy   ( ops.ds9 )   due to required resource_IP3 start
 
 Executing cluster transition:
  * Pseudo action:   group_fUN_stop_0
diff --git a/pengine/test10/bug-1820-1.summary b/pengine/test10/bug-1820-1.summary
index db41ac4..2b0673a 100644
--- a/pengine/test10/bug-1820-1.summary
+++ b/pengine/test10/bug-1820-1.summary
@@ -10,8 +10,8 @@ Online: [ star world ]
 Transition Summary:
  * Shutdown star
  * Start   p1	(world)
- * Migrate test1	(Started star -> world)
- * Migrate test2	(Started star -> world)
+ * Migrate    test1   ( star -> world )  
+ * Migrate    test2   ( star -> world )  
 
 Executing cluster transition:
  * Resource action: p1              monitor on world
diff --git a/pengine/test10/bug-1820.summary b/pengine/test10/bug-1820.summary
index 6d9c021..e13f8ad 100644
--- a/pengine/test10/bug-1820.summary
+++ b/pengine/test10/bug-1820.summary
@@ -8,8 +8,8 @@ Online: [ star world ]
 
 Transition Summary:
  * Shutdown star
- * Migrate test1	(Started star -> world)
- * Migrate test2	(Started star -> world)
+ * Migrate    test1   ( star -> world )  
+ * Migrate    test2   ( star -> world )  
 
 Executing cluster transition:
  * Pseudo action:   gr1_stop_0
diff --git a/pengine/test10/bug-1822.summary b/pengine/test10/bug-1822.summary
index 325e408..5bf91b9 100644
--- a/pengine/test10/bug-1822.summary
+++ b/pengine/test10/bug-1822.summary
@@ -12,8 +12,8 @@ Online: [ process1a process2b ]
 
 Transition Summary:
  * Shutdown process1a
- * Demote  master_slave_Stateful:1	(Master -> Stopped process1a)
- * Demote  master_slave_procdctl:1	(Master -> Stopped process1a)
+ * Stop       master_slave_Stateful:1     ( Master process1a )   due to node availability
+ * Stop       master_slave_procdctl:1     ( Master process1a )   due to node availability
 
 Executing cluster transition:
  * Pseudo action:   ms-sf_demote_0
diff --git a/pengine/test10/bug-5007-masterslave_colocation.summary b/pengine/test10/bug-5007-masterslave_colocation.summary
index 06a81e1..adbc1f1 100644
--- a/pengine/test10/bug-5007-masterslave_colocation.summary
+++ b/pengine/test10/bug-5007-masterslave_colocation.summary
@@ -9,8 +9,8 @@ Online: [ fc16-builder fc16-builder2 ]
  MASTER_IP	(ocf::pacemaker:Dummy):	Started fc16-builder2
 
 Transition Summary:
- * Move    SLAVE_IP	(Started fc16-builder -> fc16-builder2)
- * Move    MASTER_IP	(Started fc16-builder2 -> fc16-builder)
+ * Move       SLAVE_IP     ( fc16-builder -> fc16-builder2 )  
+ * Move       MASTER_IP    ( fc16-builder2 -> fc16-builder )  
 
 Executing cluster transition:
  * Resource action: SLAVE_IP        stop on fc16-builder
diff --git a/pengine/test10/bug-5014-A-stopped-B-stopped.summary b/pengine/test10/bug-5014-A-stopped-B-stopped.summary
index 95e5b60..ba0a5e1 100644
--- a/pengine/test10/bug-5014-A-stopped-B-stopped.summary
+++ b/pengine/test10/bug-5014-A-stopped-B-stopped.summary
@@ -7,7 +7,7 @@ Online: [ fc16-builder ]
  ClusterIP2	(ocf::heartbeat:IPaddr2):	Stopped 
 
 Transition Summary:
- * Start   ClusterIP2	(fc16-builder - blocked) 	due to unrunnable ClusterIP start
+ * Start      ClusterIP2     ( fc16-builder )   due to unrunnable ClusterIP start (blocked)
 
 Executing cluster transition:
  * Resource action: ClusterIP       monitor on fc16-builder
diff --git a/pengine/test10/bug-5014-CthenAthenB-C-stopped.summary b/pengine/test10/bug-5014-CthenAthenB-C-stopped.summary
index fe12fe6..d15d1b2 100644
--- a/pengine/test10/bug-5014-CthenAthenB-C-stopped.summary
+++ b/pengine/test10/bug-5014-CthenAthenB-C-stopped.summary
@@ -8,8 +8,8 @@ Online: [ fc16-builder ]
  ClusterIP3	(ocf::heartbeat:IPaddr2):	Stopped ( disabled ) 
 
 Transition Summary:
- * Start   ClusterIP	(fc16-builder - blocked) 	due to unrunnable ClusterIP3 start
- * Start   ClusterIP2	(fc16-builder - blocked) 	due to unrunnable ClusterIP start
+ * Start      ClusterIP     ( fc16-builder )   due to unrunnable ClusterIP3 start (blocked)
+ * Start      ClusterIP2    ( fc16-builder )   due to unrunnable ClusterIP start (blocked)
 
 Executing cluster transition:
  * Resource action: ClusterIP       monitor on fc16-builder
diff --git a/pengine/test10/bug-5014-GROUP-A-stopped-B-stopped.summary b/pengine/test10/bug-5014-GROUP-A-stopped-B-stopped.summary
index f9b6448..aa4b699 100644
--- a/pengine/test10/bug-5014-GROUP-A-stopped-B-stopped.summary
+++ b/pengine/test10/bug-5014-GROUP-A-stopped-B-stopped.summary
@@ -9,7 +9,7 @@ Online: [ fc16-builder ]
      ClusterIP2	(ocf::heartbeat:IPaddr2):	Stopped 
 
 Transition Summary:
- * Start   ClusterIP2	(fc16-builder - blocked) 	due to unrunnable group1 running
+ * Start      ClusterIP2     ( fc16-builder )   due to unrunnable group1 running (blocked)
 
 Executing cluster transition:
 
diff --git a/pengine/test10/bug-5014-ordered-set-symmetrical-true.summary b/pengine/test10/bug-5014-ordered-set-symmetrical-true.summary
index 7d94d60..7c28340 100644
--- a/pengine/test10/bug-5014-ordered-set-symmetrical-true.summary
+++ b/pengine/test10/bug-5014-ordered-set-symmetrical-true.summary
@@ -9,7 +9,7 @@ OFFLINE: [ fc16-builder2 ]
  C	(ocf::pacemaker:Dummy):	Started fc16-builder ( disabled ) 
 
 Transition Summary:
- * Stop    A	(Started fc16-builder) 	due to required C start
+ * Stop       A       ( fc16-builder )   due to required C start
  * Stop    C	(fc16-builder)  	due to node availability
 
 Executing cluster transition:
diff --git a/pengine/test10/bug-5025-1.summary b/pengine/test10/bug-5025-1.summary
index 9f9baa2..34f7b34 100644
--- a/pengine/test10/bug-5025-1.summary
+++ b/pengine/test10/bug-5025-1.summary
@@ -7,7 +7,7 @@ OFFLINE: [ fc16-builder2 fc16-builder3 ]
  A	(ocf::pacemaker:Dummy):	Started fc16-builder
 
 Transition Summary:
- * Reload  A	(Started fc16-builder)
+ * Reload     A       ( fc16-builder )  
 
 Executing cluster transition:
  * Cluster action:  clear_failcount for A on fc16-builder
diff --git a/pengine/test10/bug-5025-3.summary b/pengine/test10/bug-5025-3.summary
index 0d843d2..9072771 100644
--- a/pengine/test10/bug-5025-3.summary
+++ b/pengine/test10/bug-5025-3.summary
@@ -8,7 +8,7 @@ OFFLINE: [ fc16-builder2 fc16-builder3 ]
  B	(ocf::pacemaker:Dummy):	Started fc16-builder
 
 Transition Summary:
- * Restart A	(Started fc16-builder)
+ * Restart    A       ( fc16-builder )  
 
 Executing cluster transition:
  * Resource action: A               stop on fc16-builder
diff --git a/pengine/test10/bug-5028.summary b/pengine/test10/bug-5028.summary
index a85f75b..f1c6f63 100644
--- a/pengine/test10/bug-5028.summary
+++ b/pengine/test10/bug-5028.summary
@@ -8,7 +8,7 @@ Online: [ bl460g6a bl460g6b ]
 
 Transition Summary:
  * Shutdown bl460g6a
- * Stop    dummy01	(Started bl460g6a - blocked)
+ * Stop       dummy01     ( bl460g6a )   blocked
 
 Executing cluster transition:
  * Pseudo action:   dummy-g_stop_0
diff --git a/pengine/test10/bug-5059.summary b/pengine/test10/bug-5059.summary
index 36a5c67..3122cf9 100644
--- a/pengine/test10/bug-5059.summary
+++ b/pengine/test10/bug-5059.summary
@@ -17,7 +17,6 @@ OFFLINE: [ gluster04.h ]
 
 Transition Summary:
  * Promote p_stateful1:0	(Slave -> Master gluster01.h)
- * Start   p_stateful2:0	(gluster01.h)
  * Promote p_stateful2:0	(Stopped -> Master gluster01.h)
  * Start   p_stateful2:1	(gluster02.h)
 
diff --git a/pengine/test10/bug-5186-partial-migrate.summary b/pengine/test10/bug-5186-partial-migrate.summary
index cd01706..4d7f0bf 100644
--- a/pengine/test10/bug-5186-partial-migrate.summary
+++ b/pengine/test10/bug-5186-partial-migrate.summary
@@ -26,10 +26,10 @@ Online: [ bl460g1n6 bl460g1n8 ]
 
 Transition Summary:
  * Fence (reboot) bl460g1n7 'prmDummy is thought to be active there'
- * Move    prmDummy	(Started bl460g1n7 -> bl460g1n6)
- * Move    prmVM2	(Started bl460g1n7 -> bl460g1n8)
- * Move    prmStonith8-1	(Started bl460g1n7 -> bl460g1n6)
- * Move    prmStonith8-2	(Started bl460g1n7 -> bl460g1n6)
+ * Move       prmDummy          ( bl460g1n7 -> bl460g1n6 )  
+ * Move       prmVM2            ( bl460g1n7 -> bl460g1n8 )  
+ * Move       prmStonith8-1     ( bl460g1n7 -> bl460g1n6 )  
+ * Move       prmStonith8-2     ( bl460g1n7 -> bl460g1n6 )  
  * Stop    prmDiskd1:0	(bl460g1n7)  	due to node availability
  * Stop    prmDiskd2:0	(bl460g1n7)  	due to node availability
  * Stop    prmPing:0	(bl460g1n7)  	due to node availability
diff --git a/pengine/test10/bug-cl-5212.summary b/pengine/test10/bug-cl-5212.summary
index 92d3af3..1800f06 100644
--- a/pengine/test10/bug-cl-5212.summary
+++ b/pengine/test10/bug-cl-5212.summary
@@ -20,13 +20,13 @@ Online: [ srv03 ]
      Started: [ srv03 ]
 
 Transition Summary:
- * Stop    prmStonith1-1	(Started srv02 - blocked)
- * Stop    prmStonith2-1	(Started srv01 - blocked)
- * Stop    prmStonith3-1	(srv01 - blocked)  	due to node availability
- * Stop    pgsql:0	(srv02 - blocked)  	due to node availability
- * Demote  pgsql:1	(Master -> Stopped srv01 - blocked)
- * Stop    prmPingd:0	(srv02 - blocked)  	due to node availability
- * Stop    prmPingd:1	(srv01 - blocked)  	due to node availability
+ * Stop       prmStonith1-1     (        srv02 )   blocked
+ * Stop       prmStonith2-1     (        srv01 )   blocked
+ * Stop       prmStonith3-1     (        srv01 )   due to node availability (blocked)
+ * Stop       pgsql:0           (  Slave srv02 )   due to node availability (blocked)
+ * Stop       pgsql:1           ( Master srv01 )   due to node availability (blocked)
+ * Stop       prmPingd:0        (        srv02 )   due to node availability (blocked)
+ * Stop       prmPingd:1        (        srv01 )   due to node availability (blocked)
 
 Executing cluster transition:
  * Pseudo action:   grpStonith1_stop_0
diff --git a/pengine/test10/bug-cl-5247.summary b/pengine/test10/bug-cl-5247.summary
index 0f328cc..3e5511d 100644
--- a/pengine/test10/bug-cl-5247.summary
+++ b/pengine/test10/bug-cl-5247.summary
@@ -20,11 +20,11 @@ Containers: [ pgsr01:prmDB1 ]
 Transition Summary:
  * Fence (off) pgsr02 (resource: prmDB2) 'guest is unclean'
  * Stop    prmDB2	(bl460g8n4)  	due to node availability
- * Restart prmStonith1-2	(Started bl460g8n4)
- * Restart prmStonith2-2	(Started bl460g8n3)
- * Recover vip-master	(Started pgsr02 -> pgsr01)
- * Recover vip-rep	(Started pgsr02 -> pgsr01)
- * Demote  pgsql:0	(Master -> Stopped pgsr02)
+ * Restart    prmStonith1-2     (        bl460g8n4 )  
+ * Restart    prmStonith2-2     (        bl460g8n3 )  
+ * Recover    vip-master        ( pgsr02 -> pgsr01 )  
+ * Recover    vip-rep           ( pgsr02 -> pgsr01 )  
+ * Stop       pgsql:0           (    Master pgsr02 )   due to node availability
  * Stop    pgsr02	(bl460g8n4)
 
 Executing cluster transition:
diff --git a/pengine/test10/bug-lf-2106.summary b/pengine/test10/bug-lf-2106.summary
index 9a71125..1cea829 100644
--- a/pengine/test10/bug-lf-2106.summary
+++ b/pengine/test10/bug-lf-2106.summary
@@ -35,8 +35,8 @@ Online: [ cl-virt-1 cl-virt-2 ]
      Slaves: [ cl-virt-1 ]
 
 Transition Summary:
- * Restart pingd:0	(Started cl-virt-1)
- * Restart pingd:1	(Started cl-virt-2)
+ * Restart    pingd:0     ( cl-virt-1 )  
+ * Restart    pingd:1     ( cl-virt-2 )  
 
 Executing cluster transition:
  * Cluster action:  clear_failcount for pingd on cl-virt-1
diff --git a/pengine/test10/bug-lf-2153.summary b/pengine/test10/bug-lf-2153.summary
index e95713e..01567b5 100644
--- a/pengine/test10/bug-lf-2153.summary
+++ b/pengine/test10/bug-lf-2153.summary
@@ -18,7 +18,7 @@ Online: [ alice ]
      res_portblock_iscsivg01_unblock	(ocf::heartbeat:portblock):	Started alice
 
 Transition Summary:
- * Stop    res_drbd_iscsivg01:0	(bob)  	due to node availability
+ * Stop       res_drbd_iscsivg01:0     ( Slave bob )   due to node availability
  * Stop    res_tgtd:0	(bob)  	due to node availability
 
 Executing cluster transition:
diff --git a/pengine/test10/bug-lf-2171.summary b/pengine/test10/bug-lf-2171.summary
index 8c1d8a4..41a7b94 100644
--- a/pengine/test10/bug-lf-2171.summary
+++ b/pengine/test10/bug-lf-2171.summary
@@ -12,8 +12,8 @@ Online: [ xenserver1 xenserver2 ]
 Transition Summary:
  * Stop    res_Dummy1:0	(xenserver1)  	due to node availability
  * Stop    res_Dummy1:1	(xenserver2)  	due to node availability
- * Stop    res_Dummy2	(Started xenserver1) 	due to unrunnable cl_res_Dummy1 running
- * Stop    res_Dummy3	(Started xenserver1) 	due to unrunnable cl_res_Dummy1 running
+ * Stop       res_Dummy2       ( xenserver1 )   due to unrunnable cl_res_Dummy1 running
+ * Stop       res_Dummy3       ( xenserver1 )   due to unrunnable cl_res_Dummy1 running
 
 Executing cluster transition:
  * Pseudo action:   gr_Dummy_stop_0
diff --git a/pengine/test10/bug-lf-2361.summary b/pengine/test10/bug-lf-2361.summary
index 3089e04..b88cd90 100644
--- a/pengine/test10/bug-lf-2361.summary
+++ b/pengine/test10/bug-lf-2361.summary
@@ -11,8 +11,8 @@ Online: [ alice.demo bob.demo ]
 Transition Summary:
  * Start   stateful:0	(alice.demo)
  * Start   stateful:1	(bob.demo)
- * Start   dummy2:0	(alice.demo - blocked) 	due to unrunnable dummy1 start
- * Start   dummy2:1	(bob.demo - blocked) 	due to unrunnable dummy1 start
+ * Start      dummy2:0       ( alice.demo )   due to unrunnable dummy1 start (blocked)
+ * Start      dummy2:1       (   bob.demo )   due to unrunnable dummy1 start (blocked)
 
 Executing cluster transition:
  * Pseudo action:   ms_stateful_pre_notify_start_0
diff --git a/pengine/test10/bug-lf-2435.summary b/pengine/test10/bug-lf-2435.summary
index a538342..bb07089 100644
--- a/pengine/test10/bug-lf-2435.summary
+++ b/pengine/test10/bug-lf-2435.summary
@@ -9,7 +9,7 @@ Online: [ c19.chepkov.lan c21.chepkov.lan ]
  dummy3	(ocf::pacemaker:Dummy):	Started c21.chepkov.lan
 
 Transition Summary:
- * Move    dummy2	(Started c20.chepkov.lan -> c21.chepkov.lan)
+ * Move       dummy2     ( c20.chepkov.lan -> c21.chepkov.lan )  
  * Stop    dummy3	(c21.chepkov.lan)
 
 Executing cluster transition:
diff --git a/pengine/test10/bug-lf-2445.summary b/pengine/test10/bug-lf-2445.summary
index 4523d9b..12f5031 100644
--- a/pengine/test10/bug-lf-2445.summary
+++ b/pengine/test10/bug-lf-2445.summary
@@ -7,7 +7,7 @@ Online: [ node1 node2 ]
      P:1	(ocf::pacemaker:Dummy):	Started node1
 
 Transition Summary:
- * Move    P:1	(Started node1 -> node2)
+ * Move       P:1     ( node1 -> node2 )  
 
 Executing cluster transition:
  * Pseudo action:   C_stop_0
diff --git a/pengine/test10/bug-lf-2453.summary b/pengine/test10/bug-lf-2453.summary
index 398868b..f038cbb 100644
--- a/pengine/test10/bug-lf-2453.summary
+++ b/pengine/test10/bug-lf-2453.summary
@@ -10,11 +10,11 @@ Online: [ domu1 domu2 ]
      Started: [ domu1 domu2 ]
 
 Transition Summary:
- * Stop    PrimitiveResource1	(Started domu1) 	due to required CloneResource2 running
+ * Stop       PrimitiveResource1     ( domu1 )   due to required CloneResource2 running
  * Stop    apache:0	(domu1)  	due to node availability
  * Stop    apache:1	(domu2)  	due to node availability
- * Stop    DummyResource:0	(Started domu1) 	due to unrunnable CloneResource1 running
- * Stop    DummyResource:1	(Started domu2) 	due to unrunnable CloneResource1 running
+ * Stop       DummyResource:0        ( domu1 )   due to unrunnable CloneResource1 running
+ * Stop       DummyResource:1        ( domu2 )   due to unrunnable CloneResource1 running
 
 Executing cluster transition:
  * Resource action: PrimitiveResource1 stop on domu1
diff --git a/pengine/test10/bug-lf-2508.summary b/pengine/test10/bug-lf-2508.summary
index 5d0d90c..d4e548a 100644
--- a/pengine/test10/bug-lf-2508.summary
+++ b/pengine/test10/bug-lf-2508.summary
@@ -37,7 +37,7 @@ Online: [ srv01 srv03 srv04 ]
 Transition Summary:
  * Fence (reboot) srv02 'peer is no longer part of the cluster'
  * Start   Dummy01	(srv01)
- * Move    Dummy02	(Started srv02 -> srv04)
+ * Move       Dummy02             ( srv02 -> srv04 )  
  * Stop    prmStonith1-1:1	(srv02)  	due to node availability
  * Stop    prmStonith1-3:1	(srv02)  	due to node availability
  * Stop    prmStonith3-1:0	(srv02)  	due to node availability
diff --git a/pengine/test10/bug-lf-2551.summary b/pengine/test10/bug-lf-2551.summary
index 9537277..1cd5108 100644
--- a/pengine/test10/bug-lf-2551.summary
+++ b/pengine/test10/bug-lf-2551.summary
@@ -82,8 +82,8 @@ Online: [ hex-0 hex-7 hex-8 ]
 
 Transition Summary:
  * Fence (reboot) hex-9 'peer is no longer part of the cluster'
- * Move    fencing-sbd	(Started hex-9 -> hex-0)
- * Move    dummy1	(Started hex-9 -> hex-0)
+ * Move       fencing-sbd     ( hex-9 -> hex-0 )  
+ * Move       dummy1          ( hex-9 -> hex-0 )  
  * Stop    dlm:3	(hex-9)  	due to node availability
  * Stop    o2cb:3	(hex-9)  	due to node availability
  * Stop    clvm:3	(hex-9)  	due to node availability
diff --git a/pengine/test10/bug-lf-2574.summary b/pengine/test10/bug-lf-2574.summary
index 800453c..8033616 100644
--- a/pengine/test10/bug-lf-2574.summary
+++ b/pengine/test10/bug-lf-2574.summary
@@ -11,7 +11,7 @@ Online: [ srv01 srv02 srv03 ]
      Started: [ srv01 srv02 srv03 ]
 
 Transition Summary:
- * Move    main_rsc	(Started srv01 -> srv03)
+ * Move       main_rsc     ( srv01 -> srv03 )  
  * Stop    prmPingd:0	(srv01)  	due to node availability
 
 Executing cluster transition:
diff --git a/pengine/test10/bug-lf-2606.summary b/pengine/test10/bug-lf-2606.summary
index 7e889c9..d3fdb24 100644
--- a/pengine/test10/bug-lf-2606.summary
+++ b/pengine/test10/bug-lf-2606.summary
@@ -14,8 +14,8 @@ Online: [ node1 ]
 Transition Summary:
  * Fence (reboot) node2 'rsc1 failed there'
  * Stop    rsc1	(node2)
- * Move    rsc2	(Started node2 -> node1)
- * Demote  rsc3:1	(Master -> Stopped node2)
+ * Move       rsc2       ( node2 -> node1 )  
+ * Stop       rsc3:1     (   Master node2 )   due to node availability
 
 Executing cluster transition:
  * Pseudo action:   ms3_demote_0
diff --git a/pengine/test10/bug-lf-2613.summary b/pengine/test10/bug-lf-2613.summary
index 4312c51..51078c0 100644
--- a/pengine/test10/bug-lf-2613.summary
+++ b/pengine/test10/bug-lf-2613.summary
@@ -25,12 +25,12 @@ Online: [ act1 act2 act3 sby1 sby2 ]
      prmApPostgreSQLDB3	(ocf::pacemaker:Dummy):	Started act3
 
 Transition Summary:
- * Move    prmExPostgreSQLDB1	(Started act1 -> sby1)
- * Move    prmFsPostgreSQLDB1-1	(Started act1 -> sby1)
- * Move    prmFsPostgreSQLDB1-2	(Started act1 -> sby1)
- * Move    prmFsPostgreSQLDB1-3	(Started act1 -> sby1)
- * Move    prmIpPostgreSQLDB1	(Started act1 -> sby1)
- * Recover prmApPostgreSQLDB1	(Started act1 -> sby1)
+ * Move       prmExPostgreSQLDB1     ( act1 -> sby1 )  
+ * Move       prmFsPostgreSQLDB1-1   ( act1 -> sby1 )  
+ * Move       prmFsPostgreSQLDB1-2   ( act1 -> sby1 )  
+ * Move       prmFsPostgreSQLDB1-3   ( act1 -> sby1 )  
+ * Move       prmIpPostgreSQLDB1     ( act1 -> sby1 )  
+ * Recover    prmApPostgreSQLDB1     ( act1 -> sby1 )  
 
 Executing cluster transition:
  * Pseudo action:   grpPostgreSQLDB1_stop_0
diff --git a/pengine/test10/bug-lf-2619.summary b/pengine/test10/bug-lf-2619.summary
index 9a2213d..a704be8 100644
--- a/pengine/test10/bug-lf-2619.summary
+++ b/pengine/test10/bug-lf-2619.summary
@@ -28,12 +28,12 @@ Online: [ act1 act2 act3 sby1 sby2 ]
      Started: [ act2 act3 sby1 sby2 ]
 
 Transition Summary:
- * Move    prmExPostgreSQLDB1	(Started act1 -> sby1)
- * Move    prmFsPostgreSQLDB1-1	(Started act1 -> sby1)
- * Move    prmFsPostgreSQLDB1-2	(Started act1 -> sby1)
- * Move    prmFsPostgreSQLDB1-3	(Started act1 -> sby1)
- * Move    prmIpPostgreSQLDB1	(Started act1 -> sby1)
- * Move    prmApPostgreSQLDB1	(Started act1 -> sby1)
+ * Move       prmExPostgreSQLDB1     ( act1 -> sby1 )  
+ * Move       prmFsPostgreSQLDB1-1   ( act1 -> sby1 )  
+ * Move       prmFsPostgreSQLDB1-2   ( act1 -> sby1 )  
+ * Move       prmFsPostgreSQLDB1-3   ( act1 -> sby1 )  
+ * Move       prmIpPostgreSQLDB1     ( act1 -> sby1 )  
+ * Move       prmApPostgreSQLDB1     ( act1 -> sby1 )  
  * Stop    prmPingd:0	(act1)  	due to node availability
 
 Executing cluster transition:
diff --git a/pengine/test10/bug-n-385265-2.summary b/pengine/test10/bug-n-385265-2.summary
index f02554d..2e0f7c1 100644
--- a/pengine/test10/bug-n-385265-2.summary
+++ b/pengine/test10/bug-n-385265-2.summary
@@ -7,8 +7,8 @@ Online: [ ih01 ih02 ]
      resource_idvscommon	(ocf::dfs:idvs):	Started ih02
 
 Transition Summary:
- * Recover resource_ip_common	(Started ih02 -> ih01)
- * Move    resource_idvscommon	(Started ih02 -> ih01)
+ * Recover    resource_ip_common     ( ih02 -> ih01 )  
+ * Move       resource_idvscommon    ( ih02 -> ih01 )  
 
 Executing cluster transition:
  * Pseudo action:   group_common_stop_0
diff --git a/pengine/test10/bug-n-387749.summary b/pengine/test10/bug-n-387749.summary
index 2532d35..9ef7e70 100644
--- a/pengine/test10/bug-n-387749.summary
+++ b/pengine/test10/bug-n-387749.summary
@@ -13,8 +13,8 @@ OFFLINE: [ power720-4 ]
 
 Transition Summary:
  * Start   export_home_ocfs2:0	(power720-1)
- * Move    resource_ipaddr1_single	(Started power720-2 -> power720-1)
- * Move    resource_nfsserver_single	(Started power720-2 -> power720-1)
+ * Move       resource_ipaddr1_single     ( power720-2 -> power720-1 )  
+ * Move       resource_nfsserver_single   ( power720-2 -> power720-1 )  
 
 Executing cluster transition:
  * Resource action: export_home_ocfs2:0 monitor on power720-1
diff --git a/pengine/test10/bug-pm-11.summary b/pengine/test10/bug-pm-11.summary
index 07f2d9a..dc26a2e 100644
--- a/pengine/test10/bug-pm-11.summary
+++ b/pengine/test10/bug-pm-11.summary
@@ -12,7 +12,6 @@ Online: [ node-a node-b ]
 
 Transition Summary:
  * Start   stateful-2:0	(node-b)
- * Start   stateful-2:1	(node-a)
  * Promote stateful-2:1	(Stopped -> Master node-a)
 
 Executing cluster transition:
diff --git a/pengine/test10/bug-rh-1097457.summary b/pengine/test10/bug-rh-1097457.summary
index ee21df8..c50df5f 100644
--- a/pengine/test10/bug-rh-1097457.summary
+++ b/pengine/test10/bug-rh-1097457.summary
@@ -33,12 +33,12 @@ Containers: [ lamaVM1:VM1 lamaVM2:VM2 lamaVM3:VM3 ]
 
 Transition Summary:
  * Fence (reboot) lamaVM2 (resource: VM2) 'guest is unclean'
- * Recover VM2	(Started lama3)
- * Recover FSlun3	(Started lamaVM2 -> lama2)
- * Restart FAKE4	(Started lamaVM2) 	due to required VM2 start
- * Restart FAKE4-IP	(Started lamaVM2) 	due to required VM2 start
- * Restart FAKE6:2	(Started lamaVM2) 	due to required VM2 start
- * Restart lamaVM2	(Started lama3) 	due to required VM2 start
+ * Recover    VM2        (            lama3 )  
+ * Recover    FSlun3     ( lamaVM2 -> lama2 )  
+ * Restart    FAKE4      (          lamaVM2 )   due to required VM2 start
+ * Restart    FAKE4-IP   (          lamaVM2 )   due to required VM2 start
+ * Restart    FAKE6:2    (          lamaVM2 )   due to required VM2 start
+ * Restart    lamaVM2    (            lama3 )   due to required VM2 start
 
 Executing cluster transition:
  * Resource action: lamaVM2         stop on lama3
diff --git a/pengine/test10/bug-rh-880249.summary b/pengine/test10/bug-rh-880249.summary
index d4f5333..766d326 100644
--- a/pengine/test10/bug-rh-880249.summary
+++ b/pengine/test10/bug-rh-880249.summary
@@ -7,8 +7,7 @@ Online: [ 18node1 18node2 18node3 ]
  dummystateful	(ocf::pacemaker:Stateful):	Master [ 18node2 18node1 18node3 ]
 
 Transition Summary:
- * Demote  dummystateful	(Master -> Started 18node2)
- * Move    dummystateful	(Started 18node2 -> 18node3)
+ * Move       dummystateful     ( Master 18node2 -> Started 18node3 )  
 
 Executing cluster transition:
  * Resource action: dummystateful   demote on 18node3
diff --git a/pengine/test10/bug-suse-707150.summary b/pengine/test10/bug-suse-707150.summary
index d6922ab..6e5a025 100644
--- a/pengine/test10/bug-suse-707150.summary
+++ b/pengine/test10/bug-suse-707150.summary
@@ -26,7 +26,7 @@ Transition Summary:
  * Start   o2cb:1	(hex-9)
  * Start   clvm:1	(hex-9)
  * Start   cmirrord:1	(hex-9)
- * Start   vm-01	(hex-9 - blocked) 	due to unrunnable base-clone running
+ * Start      vm-01          ( hex-9 )   due to unrunnable base-clone running (blocked)
 
 Executing cluster transition:
  * Resource action: vg1:1           monitor on hex-9
diff --git a/pengine/test10/bundle-nested-colocation.summary b/pengine/test10/bundle-nested-colocation.summary
index 9755e5f..0e2a68d 100644
--- a/pengine/test10/bundle-nested-colocation.summary
+++ b/pengine/test10/bundle-nested-colocation.summary
@@ -17,13 +17,13 @@ RemoteOnline: [ overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 ]
    galera-bundle-docker-2	(ocf::heartbeat:docker):	Started overcloud-galera-2
 
 Transition Summary:
- * Restart rabbitmq-bundle-docker-0	(Started overcloud-rabbit-0)
+ * Restart    rabbitmq-bundle-docker-0     (     overcloud-rabbit-0 )  
  * Start   rabbitmq-bundle-0	(overcloud-controller-0)
  * Start   rabbitmq:0	(rabbitmq-bundle-0)
- * Restart rabbitmq-bundle-docker-1	(Started overcloud-rabbit-1)
+ * Restart    rabbitmq-bundle-docker-1     (     overcloud-rabbit-1 )  
  * Start   rabbitmq-bundle-1	(overcloud-controller-1)
  * Start   rabbitmq:1	(rabbitmq-bundle-1)
- * Restart rabbitmq-bundle-docker-2	(Started overcloud-rabbit-2)
+ * Restart    rabbitmq-bundle-docker-2     (     overcloud-rabbit-2 )  
  * Start   rabbitmq-bundle-2	(overcloud-controller-2)
  * Start   rabbitmq:2	(rabbitmq-bundle-2)
 
diff --git a/pengine/test10/bundle-order-partial-start-2.summary b/pengine/test10/bundle-order-partial-start-2.summary
index d67f8fc..790bd17 100644
--- a/pengine/test10/bundle-order-partial-start-2.summary
+++ b/pengine/test10/bundle-order-partial-start-2.summary
@@ -22,8 +22,8 @@ Containers: [ galera-bundle-0:galera-bundle-docker-0 rabbitmq-bundle-0:rabbitmq-
 
 Transition Summary:
  * Start   rabbitmq:0	(rabbitmq-bundle-0)
- * Restart galera-bundle-docker-0	(Started undercloud) 	due to required haproxy-bundle running
- * Restart galera-bundle-0	(Started undercloud) 	due to required galera-bundle-docker-0 start
+ * Restart    galera-bundle-docker-0     (                     undercloud )   due to required haproxy-bundle running
+ * Restart    galera-bundle-0            (                     undercloud )   due to required galera-bundle-docker-0 start
  * Start   galera:0	(galera-bundle-0)
  * Promote redis:0	(Slave -> Master redis-bundle-0)
  * Start   haproxy-bundle-docker-0	(undercloud)
diff --git a/pengine/test10/bundle-order-partial-stop.summary b/pengine/test10/bundle-order-partial-stop.summary
index e7bac73..7bc24d2 100644
--- a/pengine/test10/bundle-order-partial-stop.summary
+++ b/pengine/test10/bundle-order-partial-stop.summary
@@ -24,15 +24,13 @@ Transition Summary:
  * Shutdown undercloud
  * Stop    rabbitmq-bundle-docker-0	(undercloud)  	due to node availability
  * Stop    rabbitmq-bundle-0	(undercloud)  	due to node availability
- * Stop    rabbitmq:0	(Started rabbitmq-bundle-0) 	due to unrunnable rabbitmq-bundle-0 start
+ * Stop       rabbitmq:0                           (               rabbitmq-bundle-0 )   due to unrunnable rabbitmq-bundle-0 start
  * Stop    galera-bundle-docker-0	(undercloud)  	due to node availability
  * Stop    galera-bundle-0	(undercloud)  	due to node availability
- * Demote  galera:0	(Master -> Slave galera-bundle-0)
- * Restart galera:0	(Slave galera-bundle-0) 	due to unrunnable galera-bundle-0 start
+ * Stop       galera:0                             ( Master galera-bundle-0 )   due to unrunnable galera-bundle-0 start
  * Stop    redis-bundle-docker-0	(undercloud)  	due to node availability
  * Stop    redis-bundle-0	(undercloud)  	due to node availability
- * Demote  redis:0	(Master -> Slave redis-bundle-0)
- * Restart redis:0	(Slave redis-bundle-0) 	due to unrunnable redis-bundle-0 start
+ * Stop       redis:0                              (  Master redis-bundle-0 )   due to unrunnable redis-bundle-0 start
  * Stop    ip-192.168.122.254	(undercloud)  	due to node availability
  * Stop    ip-192.168.122.250	(undercloud)  	due to node availability
  * Stop    ip-192.168.122.249	(undercloud)  	due to node availability
diff --git a/pengine/test10/bundle-order-startup-clone-2.summary b/pengine/test10/bundle-order-startup-clone-2.summary
index e23d933..9b0eeaa 100644
--- a/pengine/test10/bundle-order-startup-clone-2.summary
+++ b/pengine/test10/bundle-order-startup-clone-2.summary
@@ -36,15 +36,12 @@ Transition Summary:
  * Start   haproxy-bundle-docker-2	(metal-3)
  * Start   redis-bundle-docker-0	(metal-1)
  * Start   redis-bundle-0	(metal-1)
- * Start   redis:0	(redis-bundle-0)
  * Promote redis:0	(Stopped -> Master redis-bundle-0)
  * Start   redis-bundle-docker-1	(metal-2)
  * Start   redis-bundle-1	(metal-2)
- * Start   redis:1	(redis-bundle-1)
  * Promote redis:1	(Stopped -> Master redis-bundle-1)
  * Start   redis-bundle-docker-2	(metal-3)
  * Start   redis-bundle-2	(metal-3)
- * Start   redis:2	(redis-bundle-2)
  * Promote redis:2	(Stopped -> Master redis-bundle-2)
 
 Executing cluster transition:
diff --git a/pengine/test10/bundle-order-startup-clone.summary b/pengine/test10/bundle-order-startup-clone.summary
index 0acfd1e..5e826dc 100644
--- a/pengine/test10/bundle-order-startup-clone.summary
+++ b/pengine/test10/bundle-order-startup-clone.summary
@@ -13,12 +13,12 @@ RemoteOFFLINE: [ rabbitmq-bundle-0 ]
    redis-bundle-0	(ocf::heartbeat:redis):	Stopped
 
 Transition Summary:
- * Start   storage:0	(metal-1 - blocked) 	due to unrunnable redis-bundle promoted
- * Start   storage:1	(metal-2 - blocked) 	due to unrunnable redis-bundle promoted
- * Start   storage:2	(metal-3 - blocked) 	due to unrunnable redis-bundle promoted
- * Start   galera-bundle-docker-0	(metal-1 - blocked) 	due to unrunnable storage-clone notified
- * Start   galera-bundle-0	(metal-1 - blocked) 	due to unrunnable galera-bundle-docker-0 start
- * Start   galera:0	(galera-bundle-0 - blocked) 	due to unrunnable galera-bundle-docker-0 start
+ * Start      storage:0                  (         metal-1 )   due to unrunnable redis-bundle promoted (blocked)
+ * Start      storage:1                  (         metal-2 )   due to unrunnable redis-bundle promoted (blocked)
+ * Start      storage:2                  (         metal-3 )   due to unrunnable redis-bundle promoted (blocked)
+ * Start      galera-bundle-docker-0     (         metal-1 )   due to unrunnable storage-clone notified (blocked)
+ * Start      galera-bundle-0            (         metal-1 )   due to unrunnable galera-bundle-docker-0 start (blocked)
+ * Start      galera:0                   ( galera-bundle-0 )   due to unrunnable galera-bundle-docker-0 start (blocked)
  * Start   haproxy-bundle-docker-0	(metal-2)
  * Start   redis-bundle-docker-0	(metal-2)
  * Start   redis-bundle-0	(metal-2)
diff --git a/pengine/test10/bundle-order-stop-clone.summary b/pengine/test10/bundle-order-stop-clone.summary
index 9a6b0f2..66cb82a 100644
--- a/pengine/test10/bundle-order-stop-clone.summary
+++ b/pengine/test10/bundle-order-stop-clone.summary
@@ -23,7 +23,7 @@ Containers: [ galera-bundle-0:galera-bundle-docker-0 galera-bundle-1:galera-bund
 Transition Summary:
  * Stop    storage:0	(metal-1)  	due to node availability
  * Stop    galera-bundle-docker-0	(metal-1)  	due to node availability
- * Stop    galera-bundle-0	(Started metal-1) 	due to unrunnable galera-bundle-docker-0 start
+ * Stop       galera-bundle-0            (               metal-1 )   due to unrunnable galera-bundle-docker-0 start
  * Stop    galera:0	(Slave galera-bundle-0) 	due to unrunnable galera-bundle-docker-0 start
 
 Executing cluster transition:
diff --git a/pengine/test10/bundle-order-stop.summary b/pengine/test10/bundle-order-stop.summary
index e7bac73..7bc24d2 100644
--- a/pengine/test10/bundle-order-stop.summary
+++ b/pengine/test10/bundle-order-stop.summary
@@ -24,15 +24,13 @@ Transition Summary:
  * Shutdown undercloud
  * Stop    rabbitmq-bundle-docker-0	(undercloud)  	due to node availability
  * Stop    rabbitmq-bundle-0	(undercloud)  	due to node availability
- * Stop    rabbitmq:0	(Started rabbitmq-bundle-0) 	due to unrunnable rabbitmq-bundle-0 start
+ * Stop       rabbitmq:0                           (               rabbitmq-bundle-0 )   due to unrunnable rabbitmq-bundle-0 start
  * Stop    galera-bundle-docker-0	(undercloud)  	due to node availability
  * Stop    galera-bundle-0	(undercloud)  	due to node availability
- * Demote  galera:0	(Master -> Slave galera-bundle-0)
- * Restart galera:0	(Slave galera-bundle-0) 	due to unrunnable galera-bundle-0 start
+ * Stop       galera:0                             ( Master galera-bundle-0 )   due to unrunnable galera-bundle-0 start
  * Stop    redis-bundle-docker-0	(undercloud)  	due to node availability
  * Stop    redis-bundle-0	(undercloud)  	due to node availability
- * Demote  redis:0	(Master -> Slave redis-bundle-0)
- * Restart redis:0	(Slave redis-bundle-0) 	due to unrunnable redis-bundle-0 start
+ * Stop       redis:0                              (  Master redis-bundle-0 )   due to unrunnable redis-bundle-0 start
  * Stop    ip-192.168.122.254	(undercloud)  	due to node availability
  * Stop    ip-192.168.122.250	(undercloud)  	due to node availability
  * Stop    ip-192.168.122.249	(undercloud)  	due to node availability
diff --git a/pengine/test10/clone-anon-failcount.summary b/pengine/test10/clone-anon-failcount.summary
index 3fb39e3..098b772 100644
--- a/pengine/test10/clone-anon-failcount.summary
+++ b/pengine/test10/clone-anon-failcount.summary
@@ -37,12 +37,12 @@ Online: [ srv01 srv02 srv03 srv04 ]
      Started: [ srv01 srv02 srv03 srv04 ]
 
 Transition Summary:
- * Move    UmVIPcheck	(Started srv01 -> srv04)
- * Move    UmIPaddr	(Started srv01 -> srv04)
- * Move    UmDummy01	(Started srv01 -> srv04)
- * Move    UmDummy02	(Started srv01 -> srv04)
- * Recover clnUMdummy01:0	(Started srv04)
- * Restart clnUMdummy02:0	(Started srv04) 	due to required clnUMdummy01:0 start
+ * Move       UmVIPcheck         ( srv01 -> srv04 )  
+ * Move       UmIPaddr           ( srv01 -> srv04 )  
+ * Move       UmDummy01          ( srv01 -> srv04 )  
+ * Move       UmDummy02          ( srv01 -> srv04 )  
+ * Recover    clnUMdummy01:0     (          srv04 )  
+ * Restart    clnUMdummy02:0     (          srv04 )   due to required clnUMdummy01:0 start
  * Stop    clnUMdummy01:1	(srv01)  	due to node availability
  * Stop    clnUMdummy02:1	(srv01)  	due to node availability
 
diff --git a/pengine/test10/clone-fail-block-colocation.summary b/pengine/test10/clone-fail-block-colocation.summary
index 9b9167a..7f3f765 100644
--- a/pengine/test10/clone-fail-block-colocation.summary
+++ b/pengine/test10/clone-fail-block-colocation.summary
@@ -16,10 +16,10 @@ Online: [ DEM-1 DEM-2 ]
      Started: [ DEM-1 DEM-2 ]
 
 Transition Summary:
- * Move    ipv6_dem_tas_dns	(Started DEM-1 -> DEM-2)
- * Move    d_bird_subnet_state	(Started DEM-1 -> DEM-2)
- * Move    ip_mgmt	(Started DEM-1 -> DEM-2)
- * Move    ip_trf_tas	(Started DEM-1 -> DEM-2)
+ * Move       ipv6_dem_tas_dns        ( DEM-1 -> DEM-2 )  
+ * Move       d_bird_subnet_state     ( DEM-1 -> DEM-2 )  
+ * Move       ip_mgmt                 ( DEM-1 -> DEM-2 )  
+ * Move       ip_trf_tas              ( DEM-1 -> DEM-2 )  
 
 Executing cluster transition:
  * Pseudo action:   svc_stop_0
diff --git a/pengine/test10/clone-interleave-2.summary b/pengine/test10/clone-interleave-2.summary
index 78d46cd..e4c9aa4 100644
--- a/pengine/test10/clone-interleave-2.summary
+++ b/pengine/test10/clone-interleave-2.summary
@@ -11,7 +11,7 @@ Online: [ pcmk-1 pcmk-2 pcmk-3 ]
      Started: [ pcmk-1 pcmk-2 pcmk-3 ]
 
 Transition Summary:
- * Restart dummy	(Started pcmk-1) 	due to required clone-3 running
+ * Restart    dummy         ( pcmk-1 )   due to required clone-3 running
  * Stop    child-2:0	(pcmk-1)  	due to node availability
  * Stop    child-3:0	(pcmk-1)
 
diff --git a/pengine/test10/clone-interleave-3.summary b/pengine/test10/clone-interleave-3.summary
index 8b13dc4..a40dc1d 100644
--- a/pengine/test10/clone-interleave-3.summary
+++ b/pengine/test10/clone-interleave-3.summary
@@ -12,9 +12,9 @@ Online: [ pcmk-1 pcmk-2 pcmk-3 ]
      Started: [ pcmk-1 pcmk-2 pcmk-3 ]
 
 Transition Summary:
- * Restart dummy	(Started pcmk-1) 	due to required clone-3 running
- * Recover child-2:0	(Started pcmk-1)
- * Restart child-3:0	(Started pcmk-1) 	due to required child-2:0 start
+ * Restart    dummy         ( pcmk-1 )   due to required clone-3 running
+ * Recover    child-2:0     ( pcmk-1 )  
+ * Restart    child-3:0     ( pcmk-1 )   due to required child-2:0 start
 
 Executing cluster transition:
  * Resource action: dummy           stop on pcmk-1
diff --git a/pengine/test10/clone-no-shuffle.summary b/pengine/test10/clone-no-shuffle.summary
index 59ffbbe..c69d8f3 100644
--- a/pengine/test10/clone-no-shuffle.summary
+++ b/pengine/test10/clone-no-shuffle.summary
@@ -10,7 +10,7 @@ Online: [ dktest1sles10 dktest2sles10 ]
 
 Transition Summary:
  * Start   stonith-1	(dktest1sles10)
- * Demote  drbd1:0	(Master -> Stopped dktest2sles10)
+ * Stop       drbd1:0       ( Master dktest2sles10 )   due to node availability
  * Start   drbd1:1	(dktest1sles10)
  * Stop    testip	(dktest2sles10)
 
diff --git a/pengine/test10/clone-require-all-2.summary b/pengine/test10/clone-require-all-2.summary
index f5861e7..2ebd230 100644
--- a/pengine/test10/clone-require-all-2.summary
+++ b/pengine/test10/clone-require-all-2.summary
@@ -12,11 +12,11 @@ Online: [ rhel7-auto3 rhel7-auto4 ]
      Stopped: [ rhel7-auto1 rhel7-auto2 rhel7-auto3 rhel7-auto4 ]
 
 Transition Summary:
- * Move    shooter	(Started rhel7-auto1 -> rhel7-auto3)
+ * Move       shooter     ( rhel7-auto1 -> rhel7-auto3 )  
  * Stop    A:0	(rhel7-auto1)  	due to node availability
  * Stop    A:1	(rhel7-auto2)  	due to node availability
- * Start   B:0	(rhel7-auto4 - blocked) 	due to unrunnable clone-one-or-more:order-A-clone-B-clone-mandatory
- * Start   B:1	(rhel7-auto3 - blocked) 	due to unrunnable clone-one-or-more:order-A-clone-B-clone-mandatory
+ * Start      B:0         (                rhel7-auto4 )   due to unrunnable clone-one-or-more:order-A-clone-B-clone-mandatory (blocked)
+ * Start      B:1         (                rhel7-auto3 )   due to unrunnable clone-one-or-more:order-A-clone-B-clone-mandatory (blocked)
 
 Executing cluster transition:
  * Resource action: shooter         stop on rhel7-auto1
diff --git a/pengine/test10/clone-require-all-3.summary b/pengine/test10/clone-require-all-3.summary
index 1c887e5..78076e5 100644
--- a/pengine/test10/clone-require-all-3.summary
+++ b/pengine/test10/clone-require-all-3.summary
@@ -13,11 +13,11 @@ Online: [ rhel7-auto3 rhel7-auto4 ]
      Stopped: [ rhel7-auto1 rhel7-auto2 ]
 
 Transition Summary:
- * Move    shooter	(Started rhel7-auto1 -> rhel7-auto3)
+ * Move       shooter     ( rhel7-auto1 -> rhel7-auto3 )  
  * Stop    A:0	(rhel7-auto1)  	due to node availability
  * Stop    A:1	(rhel7-auto2)  	due to node availability
- * Stop    B:0	(Started rhel7-auto3) 	due to unrunnable clone-one-or-more:order-A-clone-B-clone-mandatory
- * Stop    B:1	(Started rhel7-auto4) 	due to unrunnable clone-one-or-more:order-A-clone-B-clone-mandatory
+ * Stop       B:0         (                rhel7-auto3 )   due to unrunnable clone-one-or-more:order-A-clone-B-clone-mandatory
+ * Stop       B:1         (                rhel7-auto4 )   due to unrunnable clone-one-or-more:order-A-clone-B-clone-mandatory
 
 Executing cluster transition:
  * Resource action: shooter         stop on rhel7-auto1
diff --git a/pengine/test10/clone-require-all-4.summary b/pengine/test10/clone-require-all-4.summary
index 90d2059..5b50e04 100644
--- a/pengine/test10/clone-require-all-4.summary
+++ b/pengine/test10/clone-require-all-4.summary
@@ -12,7 +12,7 @@ Online: [ rhel7-auto2 rhel7-auto3 rhel7-auto4 ]
      Stopped: [ rhel7-auto1 rhel7-auto2 ]
 
 Transition Summary:
- * Move    shooter	(Started rhel7-auto1 -> rhel7-auto2)
+ * Move       shooter     ( rhel7-auto1 -> rhel7-auto2 )  
  * Stop    A:0	(rhel7-auto1)  	due to node availability
 
 Executing cluster transition:
diff --git a/pengine/test10/clone-require-all-no-interleave-3.summary b/pengine/test10/clone-require-all-no-interleave-3.summary
index 4379644..d45d078 100644
--- a/pengine/test10/clone-require-all-no-interleave-3.summary
+++ b/pengine/test10/clone-require-all-no-interleave-3.summary
@@ -15,9 +15,9 @@ Online: [ rhel7-auto1 rhel7-auto2 rhel7-auto3 ]
      Stopped: [ rhel7-auto3 ]
 
 Transition Summary:
- * Move    A:0	(Started rhel7-auto4 -> rhel7-auto3)
- * Move    B:0	(Started rhel7-auto4 -> rhel7-auto3)
- * Move    C:0	(Started rhel7-auto4 -> rhel7-auto3)
+ * Move       A:0     ( rhel7-auto4 -> rhel7-auto3 )  
+ * Move       B:0     ( rhel7-auto4 -> rhel7-auto3 )  
+ * Move       C:0     ( rhel7-auto4 -> rhel7-auto3 )  
 
 Executing cluster transition:
  * Pseudo action:   C-clone_stop_0
diff --git a/pengine/test10/clone_min_interleave_start_one.summary b/pengine/test10/clone_min_interleave_start_one.summary
index 4ee71c4..f2e0c0c 100644
--- a/pengine/test10/clone_min_interleave_start_one.summary
+++ b/pengine/test10/clone_min_interleave_start_one.summary
@@ -12,12 +12,12 @@ Online: [ c7auto1 c7auto2 c7auto3 ]
 
 Transition Summary:
  * Start   FAKE1:0	(c7auto1)
- * Start   FAKE2:0	(c7auto2 - blocked) 	due to unrunnable clone-one-or-more:order-FAKE1-clone-FAKE2-clone-mandatory
- * Start   FAKE2:1	(c7auto3 - blocked) 	due to unrunnable clone-one-or-more:order-FAKE1-clone-FAKE2-clone-mandatory
- * Start   FAKE2:2	(c7auto1 - blocked) 	due to unrunnable clone-one-or-more:order-FAKE1-clone-FAKE2-clone-mandatory
- * Start   FAKE3:0	(c7auto2 - blocked) 	due to unrunnable FAKE2:0 start
- * Start   FAKE3:1	(c7auto3 - blocked) 	due to unrunnable FAKE2:1 start
- * Start   FAKE3:2	(c7auto1 - blocked) 	due to unrunnable FAKE2:2 start
+ * Start      FAKE2:0     ( c7auto2 )   due to unrunnable clone-one-or-more:order-FAKE1-clone-FAKE2-clone-mandatory (blocked)
+ * Start      FAKE2:1     ( c7auto3 )   due to unrunnable clone-one-or-more:order-FAKE1-clone-FAKE2-clone-mandatory (blocked)
+ * Start      FAKE2:2     ( c7auto1 )   due to unrunnable clone-one-or-more:order-FAKE1-clone-FAKE2-clone-mandatory (blocked)
+ * Start      FAKE3:0     ( c7auto2 )   due to unrunnable FAKE2:0 start (blocked)
+ * Start      FAKE3:1     ( c7auto3 )   due to unrunnable FAKE2:1 start (blocked)
+ * Start      FAKE3:2     ( c7auto1 )   due to unrunnable FAKE2:2 start (blocked)
 
 Executing cluster transition:
  * Pseudo action:   FAKE1-clone_start_0
diff --git a/pengine/test10/clone_min_interleave_stop_two.summary b/pengine/test10/clone_min_interleave_stop_two.summary
index 0866f3c..ccdb5e9 100644
--- a/pengine/test10/clone_min_interleave_stop_two.summary
+++ b/pengine/test10/clone_min_interleave_stop_two.summary
@@ -13,12 +13,12 @@ Online: [ c7auto1 c7auto2 c7auto3 ]
 Transition Summary:
  * Stop    FAKE1:0	(c7auto3)  	due to node availability
  * Stop    FAKE1:2	(c7auto2)  	due to node availability
- * Stop    FAKE2:0	(Started c7auto3) 	due to unrunnable clone-one-or-more:order-FAKE1-clone-FAKE2-clone-mandatory
- * Stop    FAKE2:1	(Started c7auto1) 	due to unrunnable clone-one-or-more:order-FAKE1-clone-FAKE2-clone-mandatory
- * Stop    FAKE2:2	(Started c7auto2) 	due to unrunnable clone-one-or-more:order-FAKE1-clone-FAKE2-clone-mandatory
- * Stop    FAKE3:0	(Started c7auto3) 	due to required FAKE2:0 start
- * Stop    FAKE3:1	(Started c7auto1) 	due to required FAKE2:1 start
- * Stop    FAKE3:2	(Started c7auto2) 	due to required FAKE2:2 start
+ * Stop       FAKE2:0     ( c7auto3 )   due to unrunnable clone-one-or-more:order-FAKE1-clone-FAKE2-clone-mandatory
+ * Stop       FAKE2:1     ( c7auto1 )   due to unrunnable clone-one-or-more:order-FAKE1-clone-FAKE2-clone-mandatory
+ * Stop       FAKE2:2     ( c7auto2 )   due to unrunnable clone-one-or-more:order-FAKE1-clone-FAKE2-clone-mandatory
+ * Stop       FAKE3:0     ( c7auto3 )   due to required FAKE2:0 start
+ * Stop       FAKE3:1     ( c7auto1 )   due to required FAKE2:1 start
+ * Stop       FAKE3:2     ( c7auto2 )   due to required FAKE2:2 start
 
 Executing cluster transition:
  * Pseudo action:   FAKE3-clone_stop_0
diff --git a/pengine/test10/clone_min_start_one.summary b/pengine/test10/clone_min_start_one.summary
index 196f1b3..504b81f 100644
--- a/pengine/test10/clone_min_start_one.summary
+++ b/pengine/test10/clone_min_start_one.summary
@@ -10,9 +10,9 @@ Online: [ c7auto3 c7auto4 ]
  FAKE	(ocf::heartbeat:Dummy):	Stopped
 
 Transition Summary:
- * Move    shooter	(Started c7auto1 -> c7auto3)
+ * Move       shooter         ( c7auto1 -> c7auto3 )  
  * Start   FAKECLONE:0	(c7auto3)
- * Start   FAKE	(c7auto4 - blocked) 	due to unrunnable clone-one-or-more:order-FAKECLONE-clone-FAKE-mandatory
+ * Start      FAKE            (            c7auto4 )   due to unrunnable clone-one-or-more:order-FAKECLONE-clone-FAKE-mandatory (blocked)
 
 Executing cluster transition:
  * Resource action: shooter         stop on c7auto1
diff --git a/pengine/test10/clone_min_stop_all.summary b/pengine/test10/clone_min_stop_all.summary
index 877d12f..c12b0a3 100644
--- a/pengine/test10/clone_min_stop_all.summary
+++ b/pengine/test10/clone_min_stop_all.summary
@@ -12,11 +12,11 @@ Online: [ c7auto4 ]
  FAKE	(ocf::heartbeat:Dummy):	Started c7auto4
 
 Transition Summary:
- * Move    shooter	(Started c7auto1 -> c7auto4)
+ * Move       shooter         ( c7auto1 -> c7auto4 )  
  * Stop    FAKECLONE:0	(c7auto1)  	due to node availability
  * Stop    FAKECLONE:1	(c7auto2)  	due to node availability
  * Stop    FAKECLONE:2	(c7auto3)  	due to node availability
- * Stop    FAKE	(Started c7auto4) 	due to unrunnable clone-one-or-more:order-FAKECLONE-clone-FAKE-mandatory
+ * Stop       FAKE            (            c7auto4 )   due to unrunnable clone-one-or-more:order-FAKECLONE-clone-FAKE-mandatory
 
 Executing cluster transition:
  * Resource action: shooter         stop on c7auto1
diff --git a/pengine/test10/clone_min_stop_two.summary b/pengine/test10/clone_min_stop_two.summary
index 4d8c38f..5223501 100644
--- a/pengine/test10/clone_min_stop_two.summary
+++ b/pengine/test10/clone_min_stop_two.summary
@@ -11,10 +11,10 @@ Online: [ c7auto3 c7auto4 ]
  FAKE	(ocf::heartbeat:Dummy):	Started c7auto4
 
 Transition Summary:
- * Move    shooter	(Started c7auto1 -> c7auto3)
+ * Move       shooter         ( c7auto1 -> c7auto3 )  
  * Stop    FAKECLONE:0	(c7auto1)  	due to node availability
  * Stop    FAKECLONE:1	(c7auto2)  	due to node availability
- * Stop    FAKE	(Started c7auto4) 	due to unrunnable clone-one-or-more:order-FAKECLONE-clone-FAKE-mandatory
+ * Stop       FAKE            (            c7auto4 )   due to unrunnable clone-one-or-more:order-FAKECLONE-clone-FAKE-mandatory
 
 Executing cluster transition:
  * Resource action: shooter         stop on c7auto1
diff --git a/pengine/test10/cloned-group-stop.summary b/pengine/test10/cloned-group-stop.summary
index f7a980c..4d5f390 100644
--- a/pengine/test10/cloned-group-stop.summary
+++ b/pengine/test10/cloned-group-stop.summary
@@ -20,20 +20,20 @@ Online: [ rhos4-node3 rhos4-node4 ]
 Transition Summary:
  * Stop    qpidd:0	(rhos4-node4)  	due to node availability
  * Stop    qpidd:1	(rhos4-node3)  	due to node availability
- * Stop    keystone:0	(Started rhos4-node4) 	due to unrunnable qpidd-clone running
- * Stop    keystone:1	(Started rhos4-node3) 	due to unrunnable qpidd-clone running
- * Stop    glance-fs:0	(Started rhos4-node4) 	due to required keystone-clone running
- * Stop    glance-registry:0	(Started rhos4-node4) 	due to required glance-fs:0 start
- * Stop    glance-api:0	(Started rhos4-node4) 	due to required glance-registry:0 start
- * Stop    glance-fs:1	(Started rhos4-node3) 	due to required keystone-clone running
- * Stop    glance-registry:1	(Started rhos4-node3) 	due to required glance-fs:1 start
- * Stop    glance-api:1	(Started rhos4-node3) 	due to required glance-registry:1 start
- * Stop    cinder-api:0	(Started rhos4-node4) 	due to required glance-clone running
- * Stop    cinder-scheduler:0	(Started rhos4-node4) 	due to required cinder-api:0 start
- * Stop    cinder-volume:0	(Started rhos4-node4) 	due to required cinder-scheduler:0 start
- * Stop    cinder-api:1	(Started rhos4-node3) 	due to required glance-clone running
- * Stop    cinder-scheduler:1	(Started rhos4-node3) 	due to required cinder-api:1 start
- * Stop    cinder-volume:1	(Started rhos4-node3) 	due to required cinder-scheduler:1 start
+ * Stop       keystone:0            ( rhos4-node4 )   due to unrunnable qpidd-clone running
+ * Stop       keystone:1            ( rhos4-node3 )   due to unrunnable qpidd-clone running
+ * Stop       glance-fs:0           ( rhos4-node4 )   due to required keystone-clone running
+ * Stop       glance-registry:0     ( rhos4-node4 )   due to required glance-fs:0 start
+ * Stop       glance-api:0          ( rhos4-node4 )   due to required glance-registry:0 start
+ * Stop       glance-fs:1           ( rhos4-node3 )   due to required keystone-clone running
+ * Stop       glance-registry:1     ( rhos4-node3 )   due to required glance-fs:1 start
+ * Stop       glance-api:1          ( rhos4-node3 )   due to required glance-registry:1 start
+ * Stop       cinder-api:0          ( rhos4-node4 )   due to required glance-clone running
+ * Stop       cinder-scheduler:0    ( rhos4-node4 )   due to required cinder-api:0 start
+ * Stop       cinder-volume:0       ( rhos4-node4 )   due to required cinder-scheduler:0 start
+ * Stop       cinder-api:1          ( rhos4-node3 )   due to required glance-clone running
+ * Stop       cinder-scheduler:1    ( rhos4-node3 )   due to required cinder-api:1 start
+ * Stop       cinder-volume:1       ( rhos4-node3 )   due to required cinder-scheduler:1 start
 
 Executing cluster transition:
  * Pseudo action:   cinder-clone_stop_0
diff --git a/pengine/test10/cloned-group.summary b/pengine/test10/cloned-group.summary
index e1456b9..1c4f277 100644
--- a/pengine/test10/cloned-group.summary
+++ b/pengine/test10/cloned-group.summary
@@ -11,8 +11,8 @@ OFFLINE: [ webcluster02 ]
      Stopped: [ webcluster02 ]
 
 Transition Summary:
- * Restart apache2:0	(Started webcluster01)
- * Restart mysql-proxy:0	(Started webcluster01) 	due to required apache2:0 start
+ * Restart    apache2:0         ( webcluster01 )  
+ * Restart    mysql-proxy:0     ( webcluster01 )   due to required apache2:0 start
  * Stop    apache2:2	(webcluster01)  	due to node availability
  * Stop    mysql-proxy:2	(webcluster01)  	due to node availability
 
diff --git a/pengine/test10/cloned_start_one.summary b/pengine/test10/cloned_start_one.summary
index 5dedc18..38bf2ae 100644
--- a/pengine/test10/cloned_start_one.summary
+++ b/pengine/test10/cloned_start_one.summary
@@ -14,7 +14,7 @@ Online: [ c7auto1 c7auto4 ]
 Transition Summary:
  * Start   FAKECLONE:0	(c7auto1)
  * Stop    FAKECLONE2:0	(c7auto3)  	due to node availability
- * Stop    FAKECLONE2:1	(Started c7auto4) 	due to unrunnable clone-one-or-more:order-FAKECLONE-clone-FAKECLONE2-clone-mandatory
+ * Stop       FAKECLONE2:1    ( c7auto4 )   due to unrunnable clone-one-or-more:order-FAKECLONE-clone-FAKECLONE2-clone-mandatory
 
 Executing cluster transition:
  * Pseudo action:   FAKECLONE-clone_start_0
diff --git a/pengine/test10/cloned_stop_two.summary b/pengine/test10/cloned_stop_two.summary
index 8f1e039..d6a4f2c 100644
--- a/pengine/test10/cloned_stop_two.summary
+++ b/pengine/test10/cloned_stop_two.summary
@@ -16,7 +16,7 @@ Transition Summary:
  * Stop    FAKECLONE:1	(c7auto2)  	due to node availability
  * Stop    FAKECLONE:2	(c7auto3)  	due to node availability
  * Stop    FAKECLONE2:0	(c7auto3)  	due to node availability
- * Stop    FAKECLONE2:1	(Started c7auto4) 	due to unrunnable clone-one-or-more:order-FAKECLONE-clone-FAKECLONE2-clone-mandatory
+ * Stop       FAKECLONE2:1    ( c7auto4 )   due to unrunnable clone-one-or-more:order-FAKECLONE-clone-FAKECLONE2-clone-mandatory
 
 Executing cluster transition:
  * Pseudo action:   FAKECLONE2-clone_stop_0
diff --git a/pengine/test10/colo_master_w_native.summary b/pengine/test10/colo_master_w_native.summary
index 98774c1..fda8e85 100644
--- a/pengine/test10/colo_master_w_native.summary
+++ b/pengine/test10/colo_master_w_native.summary
@@ -8,7 +8,7 @@ Online: [ node1 node2 ]
      Slaves: [ node1 ]
 
 Transition Summary:
- * Demote  MS_RSC_NATIVE:0	(Master -> Slave node2)
+ * Demote     MS_RSC_NATIVE:0     ( Master -> Slave node2 )  
  * Promote MS_RSC_NATIVE:1	(Slave -> Master node1)
 
 Executing cluster transition:
diff --git a/pengine/test10/colo_slave_w_native.summary b/pengine/test10/colo_slave_w_native.summary
index 705935e..f59d93b 100644
--- a/pengine/test10/colo_slave_w_native.summary
+++ b/pengine/test10/colo_slave_w_native.summary
@@ -8,8 +8,8 @@ Online: [ node1 node2 ]
      Slaves: [ node1 ]
 
 Transition Summary:
- * Move    A	(Started node1 -> node2)
- * Demote  MS_RSC_NATIVE:0	(Master -> Slave node2)
+ * Move       A                   (        node1 -> node2 )  
+ * Demote     MS_RSC_NATIVE:0     ( Master -> Slave node2 )  
  * Promote MS_RSC_NATIVE:1	(Slave -> Master node1)
 
 Executing cluster transition:
diff --git a/pengine/test10/coloc-clone-stays-active.summary b/pengine/test10/coloc-clone-stays-active.summary
index b017137..df9b92c 100644
--- a/pengine/test10/coloc-clone-stays-active.summary
+++ b/pengine/test10/coloc-clone-stays-active.summary
@@ -98,7 +98,7 @@ Online: [ s01-0 s01-1 ]
      Started: [ s01-0 s01-1 ]
 
 Transition Summary:
- * Migrate mgmt-vm	(Started s01-0 -> s01-1)
+ * Migrate    mgmt-vm     ( s01-0 -> s01-1 )  
 
 Executing cluster transition:
  * Resource action: mgmt-vm         migrate_to on s01-0
diff --git a/pengine/test10/coloc-intra-set.summary b/pengine/test10/coloc-intra-set.summary
index caefd3e..e313d5a 100644
--- a/pengine/test10/coloc-intra-set.summary
+++ b/pengine/test10/coloc-intra-set.summary
@@ -9,8 +9,8 @@ Online: [ hex-13 hex-14 ]
  dummy3	(ocf::heartbeat:Dummy):	Started hex-13
 
 Transition Summary:
- * Move    dummy1	(Started hex-13 -> hex-14)
- * Move    dummy3	(Started hex-13 -> hex-14)
+ * Move       dummy1     ( hex-13 -> hex-14 )  
+ * Move       dummy3     ( hex-13 -> hex-14 )  
 
 Executing cluster transition:
  * Resource action: dummy1          stop on hex-13
diff --git a/pengine/test10/coloc_fp_logic.summary b/pengine/test10/coloc_fp_logic.summary
index bf479d8..0c2f4b9 100644
--- a/pengine/test10/coloc_fp_logic.summary
+++ b/pengine/test10/coloc_fp_logic.summary
@@ -6,7 +6,7 @@ Online: [ node1 node2 ]
  B	(ocf::pacemaker:Dummy):	Started node2
 
 Transition Summary:
- * Move    A	(Started node1 -> node2)
+ * Move       A       ( node1 -> node2 )  
 
 Executing cluster transition:
  * Resource action: A               stop on node1
diff --git a/pengine/test10/colocation_constraint_stops_master.summary b/pengine/test10/colocation_constraint_stops_master.summary
index e0b6976..e4b8697 100644
--- a/pengine/test10/colocation_constraint_stops_master.summary
+++ b/pengine/test10/colocation_constraint_stops_master.summary
@@ -6,7 +6,7 @@ Online: [ fc16-builder fc16-builder2 ]
      Masters: [ fc16-builder ]
 
 Transition Summary:
- * Demote  NATIVE_RSC_A:0	(Master -> Stopped fc16-builder)
+ * Stop       NATIVE_RSC_A:0     ( Master fc16-builder )   due to node availability
 
 Executing cluster transition:
  * Pseudo action:   MASTER_RSC_A_pre_notify_demote_0
diff --git a/pengine/test10/colocation_constraint_stops_slave.summary b/pengine/test10/colocation_constraint_stops_slave.summary
index a97b74b..4af4415 100644
--- a/pengine/test10/colocation_constraint_stops_slave.summary
+++ b/pengine/test10/colocation_constraint_stops_slave.summary
@@ -9,7 +9,7 @@ OFFLINE: [ fc16-builder2 ]
  NATIVE_RSC_B	(ocf::pacemaker:Dummy):	Started fc16-builder ( disabled ) 
 
 Transition Summary:
- * Stop    NATIVE_RSC_A:0	(fc16-builder)  	due to node availability
+ * Stop       NATIVE_RSC_A:0     ( Slave fc16-builder )   due to node availability
  * Stop    NATIVE_RSC_B	(fc16-builder)
 
 Executing cluster transition:
diff --git a/pengine/test10/complex_enforce_colo.summary b/pengine/test10/complex_enforce_colo.summary
index a21d5c1..2332269 100644
--- a/pengine/test10/complex_enforce_colo.summary
+++ b/pengine/test10/complex_enforce_colo.summary
@@ -111,9 +111,9 @@ Transition Summary:
  * Stop    glance-api:0	(rhos6-node1)
  * Stop    glance-api:1	(rhos6-node2)
  * Stop    glance-api:2	(rhos6-node3)
- * Stop    cinder-api	(Started rhos6-node1) 	due to unrunnable keystone-clone running
- * Stop    cinder-scheduler	(Started rhos6-node1) 	due to required cinder-api start
- * Stop    cinder-volume	(Started rhos6-node1)
+ * Stop       cinder-api                      ( rhos6-node1 )   due to unrunnable keystone-clone running
+ * Stop       cinder-scheduler                ( rhos6-node1 )   due to required cinder-api start
+ * Stop       cinder-volume                   ( rhos6-node1 )  
  * Stop    swift-account:0	(rhos6-node1)
  * Stop    swift-account:1	(rhos6-node2)
  * Stop    swift-account:2	(rhos6-node3)
@@ -126,7 +126,7 @@ Transition Summary:
  * Stop    swift-proxy:0	(rhos6-node1)
  * Stop    swift-proxy:1	(rhos6-node2)
  * Stop    swift-proxy:2	(rhos6-node3)
- * Stop    swift-object-expirer	(Started rhos6-node2) 	due to required swift-proxy-clone running
+ * Stop       swift-object-expirer            ( rhos6-node2 )   due to required swift-proxy-clone running
  * Stop    neutron-server:0	(rhos6-node1)
  * Stop    neutron-server:1	(rhos6-node2)
  * Stop    neutron-server:2	(rhos6-node3)
@@ -166,35 +166,35 @@ Transition Summary:
  * Stop    nova-conductor:0	(rhos6-node1)
  * Stop    nova-conductor:1	(rhos6-node2)
  * Stop    nova-conductor:2	(rhos6-node3)
- * Stop    ceilometer-central	(Started rhos6-node3) 	due to unrunnable keystone-clone running
- * Stop    ceilometer-collector:0	(Started rhos6-node1) 	due to required ceilometer-central start
- * Stop    ceilometer-collector:1	(Started rhos6-node2) 	due to required ceilometer-central start
- * Stop    ceilometer-collector:2	(Started rhos6-node3) 	due to required ceilometer-central start
- * Stop    ceilometer-api:0	(Started rhos6-node1) 	due to required ceilometer-collector:0 start
- * Stop    ceilometer-api:1	(Started rhos6-node2) 	due to required ceilometer-collector:1 start
- * Stop    ceilometer-api:2	(Started rhos6-node3) 	due to required ceilometer-collector:2 start
- * Stop    ceilometer-delay:0	(Started rhos6-node1) 	due to required ceilometer-api:0 start
- * Stop    ceilometer-delay:1	(Started rhos6-node2) 	due to required ceilometer-api:1 start
- * Stop    ceilometer-delay:2	(Started rhos6-node3) 	due to required ceilometer-api:2 start
- * Stop    ceilometer-alarm-evaluator:0	(Started rhos6-node1) 	due to required ceilometer-delay:0 start
- * Stop    ceilometer-alarm-evaluator:1	(Started rhos6-node2) 	due to required ceilometer-delay:1 start
- * Stop    ceilometer-alarm-evaluator:2	(Started rhos6-node3) 	due to required ceilometer-delay:2 start
- * Stop    ceilometer-alarm-notifier:0	(Started rhos6-node1) 	due to required ceilometer-alarm-evaluator:0 start
- * Stop    ceilometer-alarm-notifier:1	(Started rhos6-node2) 	due to required ceilometer-alarm-evaluator:1 start
- * Stop    ceilometer-alarm-notifier:2	(Started rhos6-node3) 	due to required ceilometer-alarm-evaluator:2 start
- * Stop    ceilometer-notification:0	(Started rhos6-node1) 	due to required ceilometer-alarm-notifier:0 start
- * Stop    ceilometer-notification:1	(Started rhos6-node2) 	due to required ceilometer-alarm-notifier:1 start
- * Stop    ceilometer-notification:2	(Started rhos6-node3) 	due to required ceilometer-alarm-notifier:2 start
- * Stop    heat-api:0	(Started rhos6-node1) 	due to required ceilometer-notification:0 start
- * Stop    heat-api:1	(Started rhos6-node2) 	due to required ceilometer-notification:1 start
- * Stop    heat-api:2	(Started rhos6-node3) 	due to required ceilometer-notification:2 start
- * Stop    heat-api-cfn:0	(Started rhos6-node1) 	due to required heat-api:0 start
- * Stop    heat-api-cfn:1	(Started rhos6-node2) 	due to required heat-api:1 start
- * Stop    heat-api-cfn:2	(Started rhos6-node3) 	due to required heat-api:2 start
- * Stop    heat-api-cloudwatch:0	(Started rhos6-node1) 	due to required heat-api-cfn:0 start
- * Stop    heat-api-cloudwatch:1	(Started rhos6-node2) 	due to required heat-api-cfn:1 start
- * Stop    heat-api-cloudwatch:2	(Started rhos6-node3) 	due to required heat-api-cfn:2 start
- * Stop    heat-engine	(Started rhos6-node2) 	due to required heat-api-cloudwatch-clone running
+ * Stop       ceilometer-central              ( rhos6-node3 )   due to unrunnable keystone-clone running
+ * Stop       ceilometer-collector:0          ( rhos6-node1 )   due to required ceilometer-central start
+ * Stop       ceilometer-collector:1          ( rhos6-node2 )   due to required ceilometer-central start
+ * Stop       ceilometer-collector:2          ( rhos6-node3 )   due to required ceilometer-central start
+ * Stop       ceilometer-api:0                ( rhos6-node1 )   due to required ceilometer-collector:0 start
+ * Stop       ceilometer-api:1                ( rhos6-node2 )   due to required ceilometer-collector:1 start
+ * Stop       ceilometer-api:2                ( rhos6-node3 )   due to required ceilometer-collector:2 start
+ * Stop       ceilometer-delay:0              ( rhos6-node1 )   due to required ceilometer-api:0 start
+ * Stop       ceilometer-delay:1              ( rhos6-node2 )   due to required ceilometer-api:1 start
+ * Stop       ceilometer-delay:2              ( rhos6-node3 )   due to required ceilometer-api:2 start
+ * Stop       ceilometer-alarm-evaluator:0    ( rhos6-node1 )   due to required ceilometer-delay:0 start
+ * Stop       ceilometer-alarm-evaluator:1    ( rhos6-node2 )   due to required ceilometer-delay:1 start
+ * Stop       ceilometer-alarm-evaluator:2    ( rhos6-node3 )   due to required ceilometer-delay:2 start
+ * Stop       ceilometer-alarm-notifier:0     ( rhos6-node1 )   due to required ceilometer-alarm-evaluator:0 start
+ * Stop       ceilometer-alarm-notifier:1     ( rhos6-node2 )   due to required ceilometer-alarm-evaluator:1 start
+ * Stop       ceilometer-alarm-notifier:2     ( rhos6-node3 )   due to required ceilometer-alarm-evaluator:2 start
+ * Stop       ceilometer-notification:0       ( rhos6-node1 )   due to required ceilometer-alarm-notifier:0 start
+ * Stop       ceilometer-notification:1       ( rhos6-node2 )   due to required ceilometer-alarm-notifier:1 start
+ * Stop       ceilometer-notification:2       ( rhos6-node3 )   due to required ceilometer-alarm-notifier:2 start
+ * Stop       heat-api:0                      ( rhos6-node1 )   due to required ceilometer-notification:0 start
+ * Stop       heat-api:1                      ( rhos6-node2 )   due to required ceilometer-notification:1 start
+ * Stop       heat-api:2                      ( rhos6-node3 )   due to required ceilometer-notification:2 start
+ * Stop       heat-api-cfn:0                  ( rhos6-node1 )   due to required heat-api:0 start
+ * Stop       heat-api-cfn:1                  ( rhos6-node2 )   due to required heat-api:1 start
+ * Stop       heat-api-cfn:2                  ( rhos6-node3 )   due to required heat-api:2 start
+ * Stop       heat-api-cloudwatch:0           ( rhos6-node1 )   due to required heat-api-cfn:0 start
+ * Stop       heat-api-cloudwatch:1           ( rhos6-node2 )   due to required heat-api-cfn:1 start
+ * Stop       heat-api-cloudwatch:2           ( rhos6-node3 )   due to required heat-api-cfn:2 start
+ * Stop       heat-engine                     ( rhos6-node2 )   due to required heat-api-cloudwatch-clone running
 
 Executing cluster transition:
  * Pseudo action:   glance-api-clone_stop_0
diff --git a/pengine/test10/container-2.summary b/pengine/test10/container-2.summary
index f011cd3..011dbe4 100644
--- a/pengine/test10/container-2.summary
+++ b/pengine/test10/container-2.summary
@@ -7,9 +7,9 @@ Online: [ node1 node2 ]
  rsc2	(ocf::pacemaker:Dummy):	Started node1
 
 Transition Summary:
- * Restart container1	(Started node1)
- * Recover rsc1	(Started node1)
- * Restart rsc2	(Started node1) 	due to required container1 start
+ * Restart    container1     ( node1 )  
+ * Recover    rsc1           ( node1 )  
+ * Restart    rsc2           ( node1 )   due to required container1 start
 
 Executing cluster transition:
  * Resource action: rsc1            stop on node1
diff --git a/pengine/test10/container-3.summary b/pengine/test10/container-3.summary
index f853ab2..424f27e 100644
--- a/pengine/test10/container-3.summary
+++ b/pengine/test10/container-3.summary
@@ -7,9 +7,9 @@ Online: [ node1 node2 ]
  rsc2	(ocf::pacemaker:Dummy):	Started node1
 
 Transition Summary:
- * Restart container1	(Started node1)
+ * Restart    container1     ( node1 )  
  * Start   rsc1	(node1)
- * Restart rsc2	(Started node1) 	due to required container1 start
+ * Restart    rsc2           ( node1 )   due to required container1 start
 
 Executing cluster transition:
  * Resource action: rsc2            stop on node1
diff --git a/pengine/test10/container-4.summary b/pengine/test10/container-4.summary
index c5852de..387db8f 100644
--- a/pengine/test10/container-4.summary
+++ b/pengine/test10/container-4.summary
@@ -7,9 +7,9 @@ Online: [ node1 node2 ]
  rsc2	(ocf::pacemaker:Dummy):	Started node1
 
 Transition Summary:
- * Move    container1	(Started node1 -> node2)
- * Recover rsc1	(Started node1 -> node2)
- * Move    rsc2	(Started node1 -> node2)
+ * Move       container1     ( node1 -> node2 )  
+ * Recover    rsc1           ( node1 -> node2 )  
+ * Move       rsc2           ( node1 -> node2 )  
 
 Executing cluster transition:
  * Resource action: rsc1            stop on node1
diff --git a/pengine/test10/container-group-2.summary b/pengine/test10/container-group-2.summary
index c0dbbf8..68d62aa 100644
--- a/pengine/test10/container-group-2.summary
+++ b/pengine/test10/container-group-2.summary
@@ -8,9 +8,9 @@ Online: [ node1 node2 ]
      rsc2	(ocf::pacemaker:Dummy):	Started node1
 
 Transition Summary:
- * Restart container1	(Started node1)
- * Recover rsc1	(Started node1)
- * Restart rsc2	(Started node1) 	due to required rsc1 start
+ * Restart    container1     ( node1 )  
+ * Recover    rsc1           ( node1 )  
+ * Restart    rsc2           ( node1 )   due to required rsc1 start
 
 Executing cluster transition:
  * Pseudo action:   container-group_stop_0
diff --git a/pengine/test10/container-group-3.summary b/pengine/test10/container-group-3.summary
index d5fac46..3e327ff 100644
--- a/pengine/test10/container-group-3.summary
+++ b/pengine/test10/container-group-3.summary
@@ -8,7 +8,7 @@ Online: [ node1 node2 ]
      rsc2	(ocf::pacemaker:Dummy):	Stopped 
 
 Transition Summary:
- * Restart container1	(Started node1)
+ * Restart    container1     ( node1 )  
  * Start   rsc1	(node1)
  * Start   rsc2	(node1)
 
diff --git a/pengine/test10/container-group-4.summary b/pengine/test10/container-group-4.summary
index 3ee85bc..8ab682b 100644
--- a/pengine/test10/container-group-4.summary
+++ b/pengine/test10/container-group-4.summary
@@ -8,9 +8,9 @@ Online: [ node1 node2 ]
      rsc2	(ocf::pacemaker:Dummy):	Started node1
 
 Transition Summary:
- * Move    container1	(Started node1 -> node2)
- * Recover rsc1	(Started node1 -> node2)
- * Move    rsc2	(Started node1 -> node2)
+ * Move       container1     ( node1 -> node2 )  
+ * Recover    rsc1           ( node1 -> node2 )  
+ * Move       rsc2           ( node1 -> node2 )  
 
 Executing cluster transition:
  * Pseudo action:   container-group_stop_0
diff --git a/pengine/test10/enforce-colo1.summary b/pengine/test10/enforce-colo1.summary
index b79b8cb..64815ae 100644
--- a/pengine/test10/enforce-colo1.summary
+++ b/pengine/test10/enforce-colo1.summary
@@ -10,11 +10,11 @@ Online: [ rhel7-auto1 rhel7-auto2 rhel7-auto3 ]
  central	(ocf::heartbeat:Dummy):	Started rhel7-auto3 
 
 Transition Summary:
- * Stop    engine	(Started rhel7-auto3)
+ * Stop       engine         ( rhel7-auto3 )  
  * Stop    keystone:0	(rhel7-auto2)  	due to node availability
  * Stop    keystone:1	(rhel7-auto3)  	due to node availability
  * Stop    keystone:2	(rhel7-auto1)  	due to node availability
- * Stop    central	(Started rhel7-auto3) 	due to unrunnable keystone-clone running
+ * Stop       central        ( rhel7-auto3 )   due to unrunnable keystone-clone running
 
 Executing cluster transition:
  * Resource action: engine          stop on rhel7-auto3
diff --git a/pengine/test10/group-dependents.summary b/pengine/test10/group-dependents.summary
index c136656..15b750b 100644
--- a/pengine/test10/group-dependents.summary
+++ b/pengine/test10/group-dependents.summary
@@ -30,25 +30,25 @@ Online: [ asttest1 asttest2 ]
      Slaves: [ asttest2 ]
 
 Transition Summary:
- * Migrate mysqld	(Started asttest1 -> asttest2)
- * Migrate dahdi	(Started asttest1 -> asttest2)
+ * Migrate    mysqld                  (     asttest1 -> asttest2 )  
+ * Migrate    dahdi                   (     asttest1 -> asttest2 )  
  * Start   fonulator	(asttest2)
  * Start   asterisk	(asttest2)
  * Start   iax2_mon	(asttest2)
  * Start   httpd	(asttest2)
  * Start   tftp	(asttest2)
- * Migrate ip_voip_route_test1	(Started asttest1 -> asttest2)
- * Migrate ip_voip_route_test2	(Started asttest1 -> asttest2)
- * Migrate ip_voip_vlan850	(Started asttest1 -> asttest2)
- * Migrate ip_voip_vlan998	(Started asttest1 -> asttest2)
- * Migrate ip_voip_vlan851	(Started asttest1 -> asttest2)
- * Migrate ip_voip_vlan852	(Started asttest1 -> asttest2)
- * Migrate ip_voip_vlan853	(Started asttest1 -> asttest2)
- * Migrate ip_voip_vlan854	(Started asttest1 -> asttest2)
- * Migrate ip_voip_vlan855	(Started asttest1 -> asttest2)
- * Migrate ip_voip_vlan856	(Started asttest1 -> asttest2)
- * Move    fs_drbd	(Started asttest1 -> asttest2)
- * Demote  drbd:0	(Master -> Slave asttest1)
+ * Migrate    ip_voip_route_test1     (     asttest1 -> asttest2 )  
+ * Migrate    ip_voip_route_test2     (     asttest1 -> asttest2 )  
+ * Migrate    ip_voip_vlan850         (     asttest1 -> asttest2 )  
+ * Migrate    ip_voip_vlan998         (     asttest1 -> asttest2 )  
+ * Migrate    ip_voip_vlan851         (     asttest1 -> asttest2 )  
+ * Migrate    ip_voip_vlan852         (     asttest1 -> asttest2 )  
+ * Migrate    ip_voip_vlan853         (     asttest1 -> asttest2 )  
+ * Migrate    ip_voip_vlan854         (     asttest1 -> asttest2 )  
+ * Migrate    ip_voip_vlan855         (     asttest1 -> asttest2 )  
+ * Migrate    ip_voip_vlan856         (     asttest1 -> asttest2 )  
+ * Move       fs_drbd                 (     asttest1 -> asttest2 )  
+ * Demote     drbd:0                  ( Master -> Slave asttest1 )  
  * Promote drbd:1	(Slave -> Master asttest2)
 
 Executing cluster transition:
diff --git a/pengine/test10/group-fail.summary b/pengine/test10/group-fail.summary
index 9067bf6..8ed59ca 100644
--- a/pengine/test10/group-fail.summary
+++ b/pengine/test10/group-fail.summary
@@ -10,9 +10,9 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Start   rsc1	(node1)
- * Restart rsc2	(Started node1) 	due to required rsc1 start
+ * Restart    rsc2    ( node1 )   due to required rsc1 start
  * Start   rsc3	(node1)
- * Restart rsc4	(Started node1) 	due to required rsc3 start
+ * Restart    rsc4    ( node1 )   due to required rsc3 start
 
 Executing cluster transition:
  * Pseudo action:   group1_stop_0
diff --git a/pengine/test10/group10.summary b/pengine/test10/group10.summary
index 570fd28..f7d0eef 100644
--- a/pengine/test10/group10.summary
+++ b/pengine/test10/group10.summary
@@ -18,9 +18,9 @@ Online: [ c001n01 c001n02 c001n03 c001n08 ]
      child_DoFencing:3	(stonith:ssh):	Started c001n08
 
 Transition Summary:
- * Recover child_192.168.100.181	(Started c001n01)
- * Restart child_192.168.100.182	(Started c001n01) 	due to required child_192.168.100.181 start
- * Restart child_192.168.100.183	(Started c001n01) 	due to required child_192.168.100.182 start
+ * Recover    child_192.168.100.181     ( c001n01 )  
+ * Restart    child_192.168.100.182     ( c001n01 )   due to required child_192.168.100.181 start
+ * Restart    child_192.168.100.183     ( c001n01 )   due to required child_192.168.100.182 start
 
 Executing cluster transition:
  * Pseudo action:   group-1_stop_0
diff --git a/pengine/test10/group14.summary b/pengine/test10/group14.summary
index 69e688b..f7a5d7d 100644
--- a/pengine/test10/group14.summary
+++ b/pengine/test10/group14.summary
@@ -33,24 +33,24 @@ OFFLINE: [ c001n02 c001n03 c001n04 c001n05 ]
      ocf_msdummy:11	(ocf::heartbeat:Stateful):	Stopped 
 
 Transition Summary:
- * Start   DcIPaddr	(c001n06 - blocked) 	due to no quorum
- * Stop    r192.168.100.181	(Started c001n06) 	due to no quorum
- * Start   r192.168.100.182	(c001n07 - blocked) 	due to no quorum
- * Start   r192.168.100.183	(c001n07 - blocked) 	due to no quorum
- * Start   lsb_dummy	(c001n06 - blocked) 	due to no quorum
- * Start   migrator	(c001n06 - blocked) 	due to no quorum
- * Start   rsc_c001n03	(c001n06 - blocked) 	due to no quorum
- * Start   rsc_c001n02	(c001n07 - blocked) 	due to no quorum
- * Start   rsc_c001n04	(c001n06 - blocked) 	due to no quorum
- * Start   rsc_c001n05	(c001n07 - blocked) 	due to no quorum
- * Start   rsc_c001n06	(c001n06 - blocked) 	due to no quorum
- * Start   rsc_c001n07	(c001n07 - blocked) 	due to no quorum
+ * Start      DcIPaddr             ( c001n06 )   due to no quorum (blocked)
+ * Stop       r192.168.100.181     ( c001n06 )   due to no quorum
+ * Start      r192.168.100.182     ( c001n07 )   due to no quorum (blocked)
+ * Start      r192.168.100.183     ( c001n07 )   due to no quorum (blocked)
+ * Start      lsb_dummy            ( c001n06 )   due to no quorum (blocked)
+ * Start      migrator             ( c001n06 )   due to no quorum (blocked)
+ * Start      rsc_c001n03          ( c001n06 )   due to no quorum (blocked)
+ * Start      rsc_c001n02          ( c001n07 )   due to no quorum (blocked)
+ * Start      rsc_c001n04          ( c001n06 )   due to no quorum (blocked)
+ * Start      rsc_c001n05          ( c001n07 )   due to no quorum (blocked)
+ * Start      rsc_c001n06          ( c001n06 )   due to no quorum (blocked)
+ * Start      rsc_c001n07          ( c001n07 )   due to no quorum (blocked)
  * Start   child_DoFencing:0	(c001n06)
  * Start   child_DoFencing:1	(c001n07)
- * Start   ocf_msdummy:0	(c001n06 - blocked) 	due to no quorum
- * Start   ocf_msdummy:1	(c001n07 - blocked) 	due to no quorum
- * Start   ocf_msdummy:2	(c001n06 - blocked) 	due to no quorum
- * Start   ocf_msdummy:3	(c001n07 - blocked) 	due to no quorum
+ * Start      ocf_msdummy:0        ( c001n06 )   due to no quorum (blocked)
+ * Start      ocf_msdummy:1        ( c001n07 )   due to no quorum (blocked)
+ * Start      ocf_msdummy:2        ( c001n06 )   due to no quorum (blocked)
+ * Start      ocf_msdummy:3        ( c001n07 )   due to no quorum (blocked)
 
 Executing cluster transition:
  * Pseudo action:   group-1_stop_0
diff --git a/pengine/test10/group5.summary b/pengine/test10/group5.summary
index 68a0e91..f709b9d 100644
--- a/pengine/test10/group5.summary
+++ b/pengine/test10/group5.summary
@@ -10,11 +10,11 @@ Online: [ node1 node2 ]
  rsc3	(heartbeat:apache):	Started node1
 
 Transition Summary:
- * Move    rsc1	(Started node1 -> node2)
- * Move    child_rsc1	(Started node1 -> node2)
- * Move    child_rsc2	(Started node1 -> node2)
- * Move    child_rsc3	(Started node1 -> node2)
- * Move    rsc3	(Started node1 -> node2)
+ * Move       rsc1           ( node1 -> node2 )  
+ * Move       child_rsc1     ( node1 -> node2 )  
+ * Move       child_rsc2     ( node1 -> node2 )  
+ * Move       child_rsc3     ( node1 -> node2 )  
+ * Move       rsc3           ( node1 -> node2 )  
 
 Executing cluster transition:
  * Resource action: rsc1            monitor on node2
diff --git a/pengine/test10/group6.summary b/pengine/test10/group6.summary
index f2fa1e2..0d18868 100644
--- a/pengine/test10/group6.summary
+++ b/pengine/test10/group6.summary
@@ -12,12 +12,12 @@ Online: [ node1 node2 ]
      child_rsc6	(heartbeat:apache):	Started node1
 
 Transition Summary:
- * Move    child_rsc1	(Started node1 -> node2)
- * Move    child_rsc2	(Started node1 -> node2)
- * Move    child_rsc3	(Started node1 -> node2)
- * Move    child_rsc4	(Started node1 -> node2)
- * Move    child_rsc5	(Started node1 -> node2)
- * Move    child_rsc6	(Started node1 -> node2)
+ * Move       child_rsc1     ( node1 -> node2 )  
+ * Move       child_rsc2     ( node1 -> node2 )  
+ * Move       child_rsc3     ( node1 -> node2 )  
+ * Move       child_rsc4     ( node1 -> node2 )  
+ * Move       child_rsc5     ( node1 -> node2 )  
+ * Move       child_rsc6     ( node1 -> node2 )  
 
 Executing cluster transition:
  * Resource action: child_rsc1      monitor on node2
diff --git a/pengine/test10/group9.summary b/pengine/test10/group9.summary
index f6755b9..ede3c82 100644
--- a/pengine/test10/group9.summary
+++ b/pengine/test10/group9.summary
@@ -14,11 +14,11 @@ Online: [ node1 node2 ]
      rsc8	(heartbeat:apache):	Started node1
 
 Transition Summary:
- * Recover rsc4	(Started node1)
- * Restart rsc5	(Started node1) 	due to required rsc4 start
- * Move    rsc6	(Started node1 -> node2)
- * Recover rsc7	(Started node1 -> node2)
- * Move    rsc8	(Started node1 -> node2)
+ * Recover    rsc4    (          node1 )  
+ * Restart    rsc5    (          node1 )   due to required rsc4 start
+ * Move       rsc6    ( node1 -> node2 )  
+ * Recover    rsc7    ( node1 -> node2 )  
+ * Move       rsc8    ( node1 -> node2 )  
 
 Executing cluster transition:
  * Resource action: rsc1            monitor on node2
diff --git a/pengine/test10/guest-node-host-dies.summary b/pengine/test10/guest-node-host-dies.summary
index d22fe3d..ea0fa4c 100644
--- a/pengine/test10/guest-node-host-dies.summary
+++ b/pengine/test10/guest-node-host-dies.summary
@@ -14,14 +14,14 @@ Transition Summary:
  * Fence (reboot) lxc2 (resource: container2) 'guest is unclean'
  * Fence (reboot) lxc1 (resource: container1) 'guest is unclean'
  * Fence (reboot) rhel7-1 'rsc_rhel7-1 is thought to be active there'
- * Restart Fencing	(Started rhel7-4)
- * Move    rsc_rhel7-1	(Started rhel7-1 -> rhel7-5)
- * Recover container1	(Started rhel7-1 -> rhel7-2)
- * Recover container2	(Started rhel7-1 -> rhel7-3)
+ * Restart    Fencing         (            rhel7-4 )  
+ * Move       rsc_rhel7-1     ( rhel7-1 -> rhel7-5 )  
+ * Recover    container1      ( rhel7-1 -> rhel7-2 )  
+ * Recover    container2      ( rhel7-1 -> rhel7-3 )  
  * Recover lxc-ms:0	(Master lxc1)
  * Recover lxc-ms:1	(Slave lxc2)
- * Move    lxc1	(Started rhel7-1 -> rhel7-2)
- * Move    lxc2	(Started rhel7-1 -> rhel7-3)
+ * Move       lxc1            ( rhel7-1 -> rhel7-2 )  
+ * Move       lxc2            ( rhel7-1 -> rhel7-3 )  
 
 Executing cluster transition:
  * Resource action: Fencing         stop on rhel7-4
diff --git a/pengine/test10/inc11.summary b/pengine/test10/inc11.summary
index 6f4d8ef..08d024d 100644
--- a/pengine/test10/inc11.summary
+++ b/pengine/test10/inc11.summary
@@ -10,8 +10,7 @@ Online: [ node0 node1 node2 ]
 Transition Summary:
  * Start   simple-rsc	(node2)
  * Start   child_rsc1:0	(node1)
- * Start   child_rsc1:1	(node2)
- * Promote child_rsc1:1	(Stopped -> Master node2)
+ * Promote    child_rsc1:1   ( Stopped -> Master node2 )  
 
 Executing cluster transition:
  * Resource action: simple-rsc      monitor on node2
diff --git a/pengine/test10/inc12.summary b/pengine/test10/inc12.summary
index e950c67..cfe99c5 100644
--- a/pengine/test10/inc12.summary
+++ b/pengine/test10/inc12.summary
@@ -53,16 +53,16 @@ Transition Summary:
  * Stop    child_DoFencing:2	(c001n05)  	due to node availability
  * Stop    child_DoFencing:3	(c001n06)  	due to node availability
  * Stop    child_DoFencing:4	(c001n07)  	due to node availability
- * Stop    ocf_msdummy:10	(c001n02)  	due to node availability
- * Stop    ocf_msdummy:11	(c001n02)  	due to node availability
- * Stop    ocf_msdummy:2	(c001n04)  	due to node availability
- * Stop    ocf_msdummy:3	(c001n04)  	due to node availability
- * Stop    ocf_msdummy:4	(c001n05)  	due to node availability
- * Stop    ocf_msdummy:5	(c001n05)  	due to node availability
- * Stop    ocf_msdummy:6	(c001n06)  	due to node availability
- * Stop    ocf_msdummy:7	(c001n06)  	due to node availability
- * Stop    ocf_msdummy:8	(c001n07)  	due to node availability
- * Stop    ocf_msdummy:9	(c001n07)  	due to node availability
+ * Stop       ocf_msdummy:10                ( Slave c001n02 )   due to node availability
+ * Stop       ocf_msdummy:11                ( Slave c001n02 )   due to node availability
+ * Stop       ocf_msdummy:2                 ( Slave c001n04 )   due to node availability
+ * Stop       ocf_msdummy:3                 ( Slave c001n04 )   due to node availability
+ * Stop       ocf_msdummy:4                 ( Slave c001n05 )   due to node availability
+ * Stop       ocf_msdummy:5                 ( Slave c001n05 )   due to node availability
+ * Stop       ocf_msdummy:6                 ( Slave c001n06 )   due to node availability
+ * Stop       ocf_msdummy:7                 ( Slave c001n06 )   due to node availability
+ * Stop       ocf_msdummy:8                 ( Slave c001n07 )   due to node availability
+ * Stop       ocf_msdummy:9                 ( Slave c001n07 )   due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group-1_stop_0
diff --git a/pengine/test10/inc2.summary b/pengine/test10/inc2.summary
index 898729f..b3049be 100644
--- a/pengine/test10/inc2.summary
+++ b/pengine/test10/inc2.summary
@@ -10,8 +10,8 @@ Online: [ node1 node2 ]
      child_rsc1:4	(heartbeat:apache):	Started node1
 
 Transition Summary:
- * Move    child_rsc1:2	(Started node1 -> node2)
- * Move    child_rsc1:3	(Started node1 -> node2)
+ * Move       child_rsc1:2     ( node1 -> node2 )  
+ * Move       child_rsc1:3     ( node1 -> node2 )  
  * Stop    child_rsc1:4	(node1)  	due to node availability
 
 Executing cluster transition:
diff --git a/pengine/test10/inc3.summary b/pengine/test10/inc3.summary
index 955ff3b..5ceab72 100644
--- a/pengine/test10/inc3.summary
+++ b/pengine/test10/inc3.summary
@@ -16,11 +16,11 @@ Online: [ node1 node2 ]
      child_rsc2:4	(heartbeat:apache):	Started node2
 
 Transition Summary:
- * Move    child_rsc1:2	(Started node1 -> node2)
- * Move    child_rsc1:3	(Started node1 -> node2)
+ * Move       child_rsc1:2     ( node1 -> node2 )  
+ * Move       child_rsc1:3     ( node1 -> node2 )  
  * Stop    child_rsc1:4	(node1)  	due to node availability
- * Move    child_rsc2:3	(Started node2 -> node1)
- * Move    child_rsc2:4	(Started node2 -> node1)
+ * Move       child_rsc2:3     ( node2 -> node1 )  
+ * Move       child_rsc2:4     ( node2 -> node1 )  
 
 Executing cluster transition:
  * Resource action: child_rsc1:0    monitor on node2
diff --git a/pengine/test10/inc4.summary b/pengine/test10/inc4.summary
index e730360..3b3f10b 100644
--- a/pengine/test10/inc4.summary
+++ b/pengine/test10/inc4.summary
@@ -16,11 +16,11 @@ Online: [ node1 node2 ]
      child_rsc2:4	(heartbeat:apache):	Started node2
 
 Transition Summary:
- * Move    child_rsc1:2	(Started node1 -> node2)
- * Move    child_rsc1:3	(Started node1 -> node2)
+ * Move       child_rsc1:2     ( node1 -> node2 )  
+ * Move       child_rsc1:3     ( node1 -> node2 )  
  * Stop    child_rsc1:4	(node1)  	due to node availability
- * Move    child_rsc2:3	(Started node2 -> node1)
- * Move    child_rsc2:4	(Started node2 -> node1)
+ * Move       child_rsc2:3     ( node2 -> node1 )  
+ * Move       child_rsc2:4     ( node2 -> node1 )  
 
 Executing cluster transition:
  * Resource action: child_rsc1:0    monitor on node2
diff --git a/pengine/test10/inc5.summary b/pengine/test10/inc5.summary
index d4e8863..93e0d8e 100644
--- a/pengine/test10/inc5.summary
+++ b/pengine/test10/inc5.summary
@@ -36,10 +36,10 @@ Online: [ node1 node2 ]
      child_rsc8:2	(heartbeat:apache):	Stopped 
 
 Transition Summary:
- * Move    child_rsc2:1	(Started node1 -> node2)
- * Move    child_rsc4:1	(Started node1 -> node2)
- * Move    child_rsc5:1	(Started node2 -> node1)
- * Move    child_rsc7:1	(Started node2 -> node1)
+ * Move       child_rsc2:1     ( node1 -> node2 )  
+ * Move       child_rsc4:1     ( node1 -> node2 )  
+ * Move       child_rsc5:1     ( node2 -> node1 )  
+ * Move       child_rsc7:1     ( node2 -> node1 )  
 
 Executing cluster transition:
  * Resource action: child_rsc1:0    monitor on node2
diff --git a/pengine/test10/inc6.summary b/pengine/test10/inc6.summary
index 4c754d7..99f3702 100644
--- a/pengine/test10/inc6.summary
+++ b/pengine/test10/inc6.summary
@@ -28,12 +28,12 @@ Online: [ node1 node2 ]
      Started: [ node1 node2 ]
 
 Transition Summary:
- * Move    child_rsc2:1	(Started node1 -> node2)
- * Move    child_rsc4:1	(Started node1 -> node2)
- * Move    child_rsc5:1	(Started node2 -> node1)
- * Restart child_rsc6:0	(Started node1) 	due to required rsc5 running
- * Restart child_rsc6:1	(Started node2) 	due to required rsc5 running
- * Move    child_rsc7:1	(Started node2 -> node1)
+ * Move       child_rsc2:1     ( node1 -> node2 )  
+ * Move       child_rsc4:1     ( node1 -> node2 )  
+ * Move       child_rsc5:1     ( node2 -> node1 )  
+ * Restart    child_rsc6:0     (          node1 )   due to required rsc5 running
+ * Restart    child_rsc6:1     (          node2 )   due to required rsc5 running
+ * Move       child_rsc7:1     ( node2 -> node1 )  
 
 Executing cluster transition:
  * Pseudo action:   rsc2_stop_0
diff --git a/pengine/test10/interleave-restart.summary b/pengine/test10/interleave-restart.summary
index 5ac19b9..c151581 100644
--- a/pengine/test10/interleave-restart.summary
+++ b/pengine/test10/interleave-restart.summary
@@ -13,9 +13,9 @@ Online: [ node1 node2 ]
      Started: [ node1 node2 ]
 
 Transition Summary:
- * Recover evmsclone:1	(Started node1)
- * Restart imagestoreclone:1	(Started node1) 	due to required evmsclone:1 start
- * Restart configstoreclone:1	(Started node1) 	due to required evmsclone:1 start
+ * Recover    evmsclone:1           ( node1 )  
+ * Restart    imagestoreclone:1     ( node1 )   due to required evmsclone:1 start
+ * Restart    configstoreclone:1    ( node1 )   due to required evmsclone:1 start
 
 Executing cluster transition:
  * Pseudo action:   evmscloneset_pre_notify_stop_0
diff --git a/pengine/test10/isolation-restart-all.summary b/pengine/test10/isolation-restart-all.summary
index a2939f1..595c254 100644
--- a/pengine/test10/isolation-restart-all.summary
+++ b/pengine/test10/isolation-restart-all.summary
@@ -22,17 +22,17 @@ OFFLINE: [ rhel7-auto4 ]
      iso_mem2	(ocf::heartbeat:Dummy):	Started rhel7-auto5 
 
 Transition Summary:
- * Restart fake	(Started rhel7-auto5)
- * Restart replicated:0	(Started rhel7-auto5)
- * Restart replicated:1	(Started rhel7-auto5)
- * Restart s1	(Started rhel7-auto5)
- * Restart s2	(Started rhel7-auto5)
- * Restart g1:0	(Started rhel7-auto5)
- * Restart g2:0	(Started rhel7-auto5)
- * Restart g1:1	(Started rhel7-auto5)
- * Restart g2:1	(Started rhel7-auto5)
- * Restart iso_mem1	(Started rhel7-auto5)
- * Restart iso_mem2	(Started rhel7-auto5)
+ * Restart    fake             ( rhel7-auto5 )  
+ * Restart    replicated:0     ( rhel7-auto5 )  
+ * Restart    replicated:1     ( rhel7-auto5 )  
+ * Restart    s1               ( rhel7-auto5 )  
+ * Restart    s2               ( rhel7-auto5 )  
+ * Restart    g1:0             ( rhel7-auto5 )  
+ * Restart    g2:0             ( rhel7-auto5 )  
+ * Restart    g1:1             ( rhel7-auto5 )  
+ * Restart    g2:1             ( rhel7-auto5 )  
+ * Restart    iso_mem1         ( rhel7-auto5 )  
+ * Restart    iso_mem2         ( rhel7-auto5 )  
 
 Executing cluster transition:
  * Resource action: fake            stop on rhel7-auto5
diff --git a/pengine/test10/load-stopped-loop-2.summary b/pengine/test10/load-stopped-loop-2.summary
index 5da41e4..d4fbf14 100644
--- a/pengine/test10/load-stopped-loop-2.summary
+++ b/pengine/test10/load-stopped-loop-2.summary
@@ -26,14 +26,14 @@ Online: [ xfc0 xfc1 xfc2 xfc3 ]
  xu-test9	(ocf::heartbeat:Xen):	Started xfc0
 
 Transition Summary:
- * Migrate xu-test12	(Started xfc2 -> xfc3)
- * Migrate xu-test2	(Started xfc3 -> xfc1)
- * Migrate xu-test3	(Started xfc1 -> xfc0)
- * Migrate xu-test4	(Started xfc0 -> xfc2)
- * Migrate xu-test5	(Started xfc2 -> xfc3)
- * Migrate xu-test6	(Started xfc3 -> xfc1)
- * Migrate xu-test7	(Started xfc1 -> xfc0)
- * Migrate xu-test9	(Started xfc0 -> xfc2)
+ * Migrate    xu-test12     ( xfc2 -> xfc3 )  
+ * Migrate    xu-test2      ( xfc3 -> xfc1 )  
+ * Migrate    xu-test3      ( xfc1 -> xfc0 )  
+ * Migrate    xu-test4      ( xfc0 -> xfc2 )  
+ * Migrate    xu-test5      ( xfc2 -> xfc3 )  
+ * Migrate    xu-test6      ( xfc3 -> xfc1 )  
+ * Migrate    xu-test7      ( xfc1 -> xfc0 )  
+ * Migrate    xu-test9      ( xfc0 -> xfc2 )  
  * Start   xu-test13	(xfc3)
 
 Executing cluster transition:
diff --git a/pengine/test10/load-stopped-loop.summary b/pengine/test10/load-stopped-loop.summary
index 2ff5bae..bc5a0f9 100644
--- a/pengine/test10/load-stopped-loop.summary
+++ b/pengine/test10/load-stopped-loop.summary
@@ -143,16 +143,16 @@ Online: [ mgmt01 v03-a v03-b ]
      Stopped: [ mgmt01 ]
 
 Transition Summary:
- * Reload  vds-ok-pool-0-iscsi:0	(Started mgmt01)
- * Reload  vds-ok-pool-0-iscsi:1	(Started v03-b)
- * Reload  vds-ok-pool-0-iscsi:2	(Started v03-a)
- * Reload  vds-ok-pool-1-iscsi:0	(Started mgmt01)
- * Reload  vds-ok-pool-1-iscsi:1	(Started v03-b)
- * Reload  vds-ok-pool-1-iscsi:2	(Started v03-a)
- * Restart stonith-v03-b	(Started v03-a)
- * Restart stonith-v03-a	(Started v03-b)
- * Migrate license.anbriz.vds-ok.com-vm	(Started v03-b -> v03-a)
- * Migrate terminal0.anbriz.vds-ok.com-vm	(Started v03-a -> v03-b)
+ * Reload     vds-ok-pool-0-iscsi:0                       (         mgmt01 )  
+ * Reload     vds-ok-pool-0-iscsi:1                       (          v03-b )  
+ * Reload     vds-ok-pool-0-iscsi:2                       (          v03-a )  
+ * Reload     vds-ok-pool-1-iscsi:0                       (         mgmt01 )  
+ * Reload     vds-ok-pool-1-iscsi:1                       (          v03-b )  
+ * Reload     vds-ok-pool-1-iscsi:2                       (          v03-a )  
+ * Restart    stonith-v03-b                               (          v03-a )  
+ * Restart    stonith-v03-a                               (          v03-b )  
+ * Migrate    license.anbriz.vds-ok.com-vm                ( v03-b -> v03-a )  
+ * Migrate    terminal0.anbriz.vds-ok.com-vm              ( v03-a -> v03-b )  
  * Start   vd01-d.cdev.ttc.prague.cz.vds-ok.com-vm	(v03-a)
 
 Executing cluster transition:
diff --git a/pengine/test10/master-1.summary b/pengine/test10/master-1.summary
index a45943c..b0e5025 100644
--- a/pengine/test10/master-1.summary
+++ b/pengine/test10/master-1.summary
@@ -11,7 +11,6 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Start   child_rsc1:0	(node1)
- * Start   child_rsc1:1	(node2)
  * Promote child_rsc1:1	(Stopped -> Master node2)
  * Start   child_rsc1:2	(node1)
  * Start   child_rsc1:3	(node2)
diff --git a/pengine/test10/master-10.summary b/pengine/test10/master-10.summary
index cd0efc3..d736f7c 100644
--- a/pengine/test10/master-10.summary
+++ b/pengine/test10/master-10.summary
@@ -10,7 +10,6 @@ Online: [ node1 node2 ]
      child_rsc1:4	(ocf::heartbeat:apache):	Stopped 
 
 Transition Summary:
- * Start   child_rsc1:0	(node1)
  * Promote child_rsc1:0	(Stopped -> Master node1)
  * Start   child_rsc1:1	(node2)
  * Start   child_rsc1:2	(node1)
diff --git a/pengine/test10/master-11.summary b/pengine/test10/master-11.summary
index a13760f..b88e5be 100644
--- a/pengine/test10/master-11.summary
+++ b/pengine/test10/master-11.summary
@@ -10,7 +10,6 @@ Online: [ node1 node2 ]
 Transition Summary:
  * Start   simple-rsc	(node2)
  * Start   child_rsc1:0	(node1)
- * Start   child_rsc1:1	(node2)
  * Promote child_rsc1:1	(Stopped -> Master node2)
 
 Executing cluster transition:
diff --git a/pengine/test10/master-2.summary b/pengine/test10/master-2.summary
index b8f5447..391bf83 100644
--- a/pengine/test10/master-2.summary
+++ b/pengine/test10/master-2.summary
@@ -10,7 +10,6 @@ Online: [ node1 node2 ]
      child_rsc1:4	(ocf::heartbeat:apache):	Stopped 
 
 Transition Summary:
- * Start   child_rsc1:0	(node1)
  * Promote child_rsc1:0	(Stopped -> Master node1)
  * Start   child_rsc1:1	(node2)
  * Start   child_rsc1:2	(node1)
diff --git a/pengine/test10/master-3.summary b/pengine/test10/master-3.summary
index a45943c..b0e5025 100644
--- a/pengine/test10/master-3.summary
+++ b/pengine/test10/master-3.summary
@@ -11,7 +11,6 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Start   child_rsc1:0	(node1)
- * Start   child_rsc1:1	(node2)
  * Promote child_rsc1:1	(Stopped -> Master node2)
  * Start   child_rsc1:2	(node1)
  * Start   child_rsc1:3	(node2)
diff --git a/pengine/test10/master-7.summary b/pengine/test10/master-7.summary
index 58ef275..105966f 100644
--- a/pengine/test10/master-7.summary
+++ b/pengine/test10/master-7.summary
@@ -30,15 +30,15 @@ Online: [ c001n02 c001n03 c001n08 ]
 
 Transition Summary:
  * Fence (reboot) c001n01 'peer is no longer part of the cluster'
- * Move    DcIPaddr	(Started c001n01 -> c001n03)
- * Move    ocf_192.168.100.181	(Started c001n03 -> c001n02)
- * Move    heartbeat_192.168.100.182	(Started c001n03 -> c001n02)
- * Move    ocf_192.168.100.183	(Started c001n03 -> c001n02)
- * Move    lsb_dummy	(Started c001n02 -> c001n08)
- * Move    rsc_c001n01	(Started c001n01 -> c001n03)
+ * Move       DcIPaddr                      ( c001n01 -> c001n03 )  
+ * Move       ocf_192.168.100.181           ( c001n03 -> c001n02 )  
+ * Move       heartbeat_192.168.100.182     ( c001n03 -> c001n02 )  
+ * Move       ocf_192.168.100.183           ( c001n03 -> c001n02 )  
+ * Move       lsb_dummy                     ( c001n02 -> c001n08 )  
+ * Move       rsc_c001n01                   ( c001n01 -> c001n03 )  
  * Stop    child_DoFencing:0	(c001n01)  	due to node availability
- * Demote  ocf_msdummy:0	(Master -> Stopped c001n01)
- * Stop    ocf_msdummy:4	(c001n01)  	due to node availability
+ * Stop       ocf_msdummy:0                 (     Master c001n01 )   due to node availability
+ * Stop       ocf_msdummy:4                 (      Slave c001n01 )   due to node availability
 
 Executing cluster transition:
  * Pseudo action:   group-1_stop_0
diff --git a/pengine/test10/master-8.summary b/pengine/test10/master-8.summary
index c18e884..5792e16 100644
--- a/pengine/test10/master-8.summary
+++ b/pengine/test10/master-8.summary
@@ -30,15 +30,14 @@ Online: [ c001n02 c001n03 c001n08 ]
 
 Transition Summary:
  * Fence (reboot) c001n01 'peer is no longer part of the cluster'
- * Move    DcIPaddr	(Started c001n01 -> c001n03)
- * Move    ocf_192.168.100.181	(Started c001n03 -> c001n02)
- * Move    heartbeat_192.168.100.182	(Started c001n03 -> c001n02)
- * Move    ocf_192.168.100.183	(Started c001n03 -> c001n02)
- * Move    lsb_dummy	(Started c001n02 -> c001n08)
- * Move    rsc_c001n01	(Started c001n01 -> c001n03)
+ * Move       DcIPaddr                      (              c001n01 -> c001n03 )  
+ * Move       ocf_192.168.100.181           (              c001n03 -> c001n02 )  
+ * Move       heartbeat_192.168.100.182     (              c001n03 -> c001n02 )  
+ * Move       ocf_192.168.100.183           (              c001n03 -> c001n02 )  
+ * Move       lsb_dummy                     (              c001n02 -> c001n08 )  
+ * Move       rsc_c001n01                   (              c001n01 -> c001n03 )  
  * Stop    child_DoFencing:0	(c001n01)  	due to node availability
- * Demote  ocf_msdummy:0	(Master -> Slave c001n01 - blocked)
- * Move    ocf_msdummy:0	(Slave c001n01 -> c001n03)
+ * Move       ocf_msdummy:0                 ( Master c001n01 -> Slave c001n03 )  
 
 Executing cluster transition:
  * Pseudo action:   group-1_stop_0
diff --git a/pengine/test10/master-9.summary b/pengine/test10/master-9.summary
index ef59602..55ccf50 100644
--- a/pengine/test10/master-9.summary
+++ b/pengine/test10/master-9.summary
@@ -31,18 +31,18 @@ Online: [ ibm1 va1 ]
 
 Transition Summary:
  * Shutdown ibm1
- * Start   DcIPaddr	(va1 - blocked) 	due to no quorum
- * Start   ocf_127.0.0.11	(va1 - blocked) 	due to no quorum
- * Start   heartbeat_127.0.0.12	(va1 - blocked) 	due to no quorum
- * Start   ocf_127.0.0.13	(va1 - blocked) 	due to no quorum
- * Start   lsb_dummy	(va1 - blocked) 	due to no quorum
- * Start   rsc_sgi2	(va1 - blocked) 	due to no quorum
- * Start   rsc_ibm1	(va1 - blocked) 	due to no quorum
- * Start   rsc_va1	(va1 - blocked) 	due to no quorum
- * Start   rsc_test02	(va1 - blocked) 	due to no quorum
+ * Start      DcIPaddr                 (   va1 )   due to no quorum (blocked)
+ * Start      ocf_127.0.0.11           (   va1 )   due to no quorum (blocked)
+ * Start      heartbeat_127.0.0.12     (   va1 )   due to no quorum (blocked)
+ * Start      ocf_127.0.0.13           (   va1 )   due to no quorum (blocked)
+ * Start      lsb_dummy                (   va1 )   due to no quorum (blocked)
+ * Start      rsc_sgi2                 (   va1 )   due to no quorum (blocked)
+ * Start      rsc_ibm1                 (   va1 )   due to no quorum (blocked)
+ * Start      rsc_va1                  (   va1 )   due to no quorum (blocked)
+ * Start      rsc_test02               (   va1 )   due to no quorum (blocked)
  * Stop    child_DoFencing:1	(ibm1)  	due to node availability
- * Start   ocf_msdummy:0	(va1 - blocked) 	due to no quorum
- * Start   ocf_msdummy:1	(va1 - blocked) 	due to no quorum
+ * Promote    ocf_msdummy:0            ( Stopped -> Master va1 )   due to node availability (blocked)
+ * Start      ocf_msdummy:1            (   va1 )   due to no quorum (blocked)
 
 Executing cluster transition:
  * Resource action: child_DoFencing:1 monitor on va1
diff --git a/pengine/test10/master-asymmetrical-order.summary b/pengine/test10/master-asymmetrical-order.summary
index d09f62e..50f717e 100644
--- a/pengine/test10/master-asymmetrical-order.summary
+++ b/pengine/test10/master-asymmetrical-order.summary
@@ -11,8 +11,8 @@ Online: [ node1 node2 ]
      Slaves: [ node1 ]
 
 Transition Summary:
- * Demote  rsc1:0	(Master -> Stopped node1)
- * Stop    rsc1:1	(node2)  	due to node availability
+ * Stop       rsc1:0     ( Master node1 )   due to node availability
+ * Stop       rsc1:1     (  Slave node2 )   due to node availability
 
 Executing cluster transition:
  * Pseudo action:   ms1_demote_0
diff --git a/pengine/test10/master-demote.summary b/pengine/test10/master-demote.summary
index 678e20c..b50fb90 100644
--- a/pengine/test10/master-demote.summary
+++ b/pengine/test10/master-demote.summary
@@ -23,7 +23,7 @@ Online: [ cxa1 cxb1 ]
      Started: [ cxa1 cxb1 ]
 
 Transition Summary:
- * Move    named_address	(Started cxa1 -> cxb1)
+ * Move       named_address         (         cxa1 -> cxb1 )  
  * Promote named_drbd_node:1	(Slave -> Master cxb1)
 
 Executing cluster transition:
diff --git a/pengine/test10/master-failed-demote-2.summary b/pengine/test10/master-failed-demote-2.summary
index 086d02e..f5f535c 100644
--- a/pengine/test10/master-failed-demote-2.summary
+++ b/pengine/test10/master-failed-demote-2.summary
@@ -11,7 +11,7 @@ Online: [ dl380g5a dl380g5b ]
          stateful-2:1	(ocf::heartbeat:Stateful):	Slave dl380g5a 
 
 Transition Summary:
- * Stop    stateful-1:0	(dl380g5b)  	due to node availability
+ * Stop       stateful-1:0     (           Slave dl380g5b )   due to node availability
  * Promote stateful-1:1	(Slave -> Master dl380g5a)
  * Promote stateful-2:1	(Slave -> Master dl380g5a)
 
diff --git a/pengine/test10/master-failed-demote.summary b/pengine/test10/master-failed-demote.summary
index 0f6c410..ec31e42 100644
--- a/pengine/test10/master-failed-demote.summary
+++ b/pengine/test10/master-failed-demote.summary
@@ -11,7 +11,7 @@ Online: [ dl380g5a dl380g5b ]
          stateful-2:1	(ocf::heartbeat:Stateful):	Slave dl380g5a 
 
 Transition Summary:
- * Stop    stateful-1:0	(dl380g5b)  	due to node availability
+ * Stop       stateful-1:0     (           Slave dl380g5b )   due to node availability
  * Promote stateful-1:1	(Slave -> Master dl380g5a)
  * Promote stateful-2:1	(Slave -> Master dl380g5a)
 
diff --git a/pengine/test10/master-move.summary b/pengine/test10/master-move.summary
index 2f7d877..e42fa27 100644
--- a/pengine/test10/master-move.summary
+++ b/pengine/test10/master-move.summary
@@ -11,8 +11,8 @@ Online: [ bl460g1n13 bl460g1n14 ]
      Slaves: [ bl460g1n14 ]
 
 Transition Summary:
- * Recover dummy01	(Started bl460g1n13 -> bl460g1n14)
- * Move    dummy02	(Started bl460g1n13 -> bl460g1n14)
+ * Recover    dummy01     (   bl460g1n13 -> bl460g1n14 )  
+ * Move       dummy02     (   bl460g1n13 -> bl460g1n14 )  
  * Start   dummy03	(bl460g1n14)
  * Demote  prmDRBD:0	(Master -> Slave bl460g1n13)
  * Promote prmDRBD:1	(Slave -> Master bl460g1n14)
diff --git a/pengine/test10/master-partially-demoted-group.summary b/pengine/test10/master-partially-demoted-group.summary
index 0bda605..0abf07c 100644
--- a/pengine/test10/master-partially-demoted-group.summary
+++ b/pengine/test10/master-partially-demoted-group.summary
@@ -22,14 +22,14 @@ Online: [ sd01-0 sd01-1 ]
      Slaves: [ sd01-0 ]
 
 Transition Summary:
- * Move    vip-164	(Started sd01-1 -> sd01-0)
- * Move    vip-165	(Started sd01-1 -> sd01-0)
- * Move    cdev-pool-0-iscsi-target	(Started sd01-1 -> sd01-0)
- * Move    cdev-pool-0-iscsi-lun-1	(Started sd01-1 -> sd01-0)
- * Demote  vip-164-fw:0	(Master -> Slave sd01-1)
+ * Move       vip-164                      (       sd01-1 -> sd01-0 )  
+ * Move       vip-165                      (       sd01-1 -> sd01-0 )  
+ * Move       cdev-pool-0-iscsi-target     (       sd01-1 -> sd01-0 )  
+ * Move       cdev-pool-0-iscsi-lun-1      (       sd01-1 -> sd01-0 )  
+ * Demote     vip-164-fw:0                 ( Master -> Slave sd01-1 )  
  * Promote vip-164-fw:1	(Slave -> Master sd01-0)
  * Promote vip-165-fw:1	(Slave -> Master sd01-0)
- * Demote  cdev-pool-0-drbd:0	(Master -> Slave sd01-1)
+ * Demote     cdev-pool-0-drbd:0           ( Master -> Slave sd01-1 )  
  * Promote cdev-pool-0-drbd:1	(Slave -> Master sd01-0)
 
 Executing cluster transition:
diff --git a/pengine/test10/master-probed-score.summary b/pengine/test10/master-probed-score.summary
index e7f2ba3..3c67fe9 100644
--- a/pengine/test10/master-probed-score.summary
+++ b/pengine/test10/master-probed-score.summary
@@ -37,10 +37,8 @@ Online: [ hypatia-corosync.nevis.columbia.edu orestes-corosync.nevis.columbia.ed
  Proxy	(ocf::heartbeat:VirtualDomain):	Stopped 
 
 Transition Summary:
- * Start   AdminDrbd:0	(hypatia-corosync.nevis.columbia.edu)
- * Promote AdminDrbd:0	(Stopped -> Master hypatia-corosync.nevis.columbia.edu)
- * Start   AdminDrbd:1	(orestes-corosync.nevis.columbia.edu)
- * Promote AdminDrbd:1	(Stopped -> Master orestes-corosync.nevis.columbia.edu)
+ * Promote    AdminDrbd:0                ( Stopped -> Master hypatia-corosync.nevis.columbia.edu )  
+ * Promote    AdminDrbd:1                ( Stopped -> Master orestes-corosync.nevis.columbia.edu )  
  * Start   CronAmbientTemperature	(hypatia-corosync.nevis.columbia.edu)
  * Start   StonithHypatia	(orestes-corosync.nevis.columbia.edu)
  * Start   StonithOrestes	(hypatia-corosync.nevis.columbia.edu)
diff --git a/pengine/test10/master-pseudo.summary b/pengine/test10/master-pseudo.summary
index 2ee2d03..8f67a68 100644
--- a/pengine/test10/master-pseudo.summary
+++ b/pengine/test10/master-pseudo.summary
@@ -12,8 +12,7 @@ Online: [ sambuca.linbit ]
 
 Transition Summary:
  * Start   ip_float_right	(sambuca.linbit)
- * Restart drbd_float:0	(Slave sambuca.linbit) 	due to required ip_float_right start
- * Promote drbd_float:0	(Slave -> Master sambuca.linbit)
+ * Restart    drbd_float:0       ( Slave -> Master sambuca.linbit )   due to required ip_float_right start
  * Start   ip_nfs	(sambuca.linbit)
 
 Executing cluster transition:
diff --git a/pengine/test10/master-stop.summary b/pengine/test10/master-stop.summary
index 8b802d4..8b861df 100644
--- a/pengine/test10/master-stop.summary
+++ b/pengine/test10/master-stop.summary
@@ -6,7 +6,7 @@ Online: [ node1 node2 node3 ]
      Slaves: [ node1 node2 node3 ]
 
 Transition Summary:
- * Stop    dummy:2	(node3)  	due to node availability
+ * Stop       dummy:2     ( Slave node3 )   due to node availability
 
 Executing cluster transition:
  * Pseudo action:   m_stop_0
diff --git a/pengine/test10/migrate-1.summary b/pengine/test10/migrate-1.summary
index 8df4fdb..ee3d352 100644
--- a/pengine/test10/migrate-1.summary
+++ b/pengine/test10/migrate-1.summary
@@ -6,7 +6,7 @@ Online: [ node2 ]
  rsc3	(heartbeat:apache):	Started node1
 
 Transition Summary:
- * Migrate rsc3	(Started node1 -> node2)
+ * Migrate    rsc3    ( node1 -> node2 )  
 
 Executing cluster transition:
  * Resource action: rsc3            monitor on node2
diff --git a/pengine/test10/migrate-3.summary b/pengine/test10/migrate-3.summary
index 9ccc062..9288be3 100644
--- a/pengine/test10/migrate-3.summary
+++ b/pengine/test10/migrate-3.summary
@@ -6,7 +6,7 @@ Online: [ node2 ]
  rsc3	(heartbeat:apache):	FAILED node1 
 
 Transition Summary:
- * Recover rsc3	(Started node1 -> node2)
+ * Recover    rsc3    ( node1 -> node2 )  
 
 Executing cluster transition:
  * Resource action: rsc3            monitor on node2
diff --git a/pengine/test10/migrate-4.summary b/pengine/test10/migrate-4.summary
index 32449a7..b95521a 100644
--- a/pengine/test10/migrate-4.summary
+++ b/pengine/test10/migrate-4.summary
@@ -6,7 +6,7 @@ Online: [ node2 ]
  rsc3	(heartbeat:apache):	FAILED node2 
 
 Transition Summary:
- * Recover rsc3	(Started node2)
+ * Recover    rsc3    ( node2 )  
 
 Executing cluster transition:
  * Resource action: rsc3            stop on node2
diff --git a/pengine/test10/migrate-5.summary b/pengine/test10/migrate-5.summary
index a9d5771..0a939dd 100644
--- a/pengine/test10/migrate-5.summary
+++ b/pengine/test10/migrate-5.summary
@@ -8,7 +8,7 @@ Online: [ dom0-01 ]
      Started: [ dom0-01 dom0-02 ]
 
 Transition Summary:
- * Migrate domU-test01	(Started dom0-02 -> dom0-01)
+ * Migrate    domU-test01            ( dom0-02 -> dom0-01 )  
  * Stop    dom0-iscsi1-cnx1:1	(dom0-02)  	due to node availability
 
 Executing cluster transition:
diff --git a/pengine/test10/migrate-begin.summary b/pengine/test10/migrate-begin.summary
index b4b5870..56e0f33 100644
--- a/pengine/test10/migrate-begin.summary
+++ b/pengine/test10/migrate-begin.summary
@@ -7,7 +7,7 @@ Online: [ hex-13 hex-14 ]
      Started: [ hex-13 hex-14 ]
 
 Transition Summary:
- * Migrate test-vm	(Started hex-14 -> hex-13)
+ * Migrate    test-vm     ( hex-14 -> hex-13 )  
 
 Executing cluster transition:
  * Pseudo action:   load_stopped_hex-13
diff --git a/pengine/test10/migrate-both-vms.summary b/pengine/test10/migrate-both-vms.summary
index 5b60727..d45d267 100644
--- a/pengine/test10/migrate-both-vms.summary
+++ b/pengine/test10/migrate-both-vms.summary
@@ -32,8 +32,8 @@ Transition Summary:
  * Stop    p-libvirtd:2	(cvmh03)  	due to node availability
  * Stop    fs-bind-libvirt-VM-cvmh:0	(cvmh04)  	due to node availability
  * Stop    fs-bind-libvirt-VM-cvmh:2	(cvmh03)  	due to node availability
- * Migrate vm-compute-test	(Started cvmh03 -> cvmh01)
- * Migrate vm-swbuildsl6	(Started cvmh04 -> cvmh02)
+ * Migrate    vm-compute-test               ( cvmh03 -> cvmh01 )  
+ * Migrate    vm-swbuildsl6                 ( cvmh04 -> cvmh02 )  
 
 Executing cluster transition:
  * Pseudo action:   c-watch-ib0_stop_0
diff --git a/pengine/test10/migrate-fail-2.summary b/pengine/test10/migrate-fail-2.summary
index 3786533..f3709c4 100644
--- a/pengine/test10/migrate-fail-2.summary
+++ b/pengine/test10/migrate-fail-2.summary
@@ -7,7 +7,7 @@ Online: [ hex-13 hex-14 ]
      Started: [ hex-13 hex-14 ]
 
 Transition Summary:
- * Recover test-vm	(Started hex-13)
+ * Recover    test-vm     ( hex-13 )  
 
 Executing cluster transition:
  * Resource action: test-vm         stop on hex-14
diff --git a/pengine/test10/migrate-fail-3.summary b/pengine/test10/migrate-fail-3.summary
index 547c110..35ec75f 100644
--- a/pengine/test10/migrate-fail-3.summary
+++ b/pengine/test10/migrate-fail-3.summary
@@ -7,7 +7,7 @@ Online: [ hex-13 hex-14 ]
      Started: [ hex-13 hex-14 ]
 
 Transition Summary:
- * Recover test-vm	(Started hex-13)
+ * Recover    test-vm     ( hex-13 )  
 
 Executing cluster transition:
  * Resource action: test-vm         stop on hex-13
diff --git a/pengine/test10/migrate-fail-4.summary b/pengine/test10/migrate-fail-4.summary
index cda25ad..d36c61b 100644
--- a/pengine/test10/migrate-fail-4.summary
+++ b/pengine/test10/migrate-fail-4.summary
@@ -7,7 +7,7 @@ Online: [ hex-13 hex-14 ]
      Started: [ hex-13 hex-14 ]
 
 Transition Summary:
- * Restart test-vm	(Started hex-13)
+ * Restart    test-vm     ( hex-13 )  
 
 Executing cluster transition:
  * Resource action: test-vm         stop on hex-14
diff --git a/pengine/test10/migrate-fail-6.summary b/pengine/test10/migrate-fail-6.summary
index dfde8bb..7cabcf3 100644
--- a/pengine/test10/migrate-fail-6.summary
+++ b/pengine/test10/migrate-fail-6.summary
@@ -7,7 +7,7 @@ Online: [ hex-13 hex-14 ]
      Started: [ hex-13 hex-14 ]
 
 Transition Summary:
- * Recover test-vm	(Started hex-13)
+ * Recover    test-vm     ( hex-13 )  
 
 Executing cluster transition:
  * Resource action: test-vm         stop on hex-13
diff --git a/pengine/test10/migrate-fail-7.summary b/pengine/test10/migrate-fail-7.summary
index 7a41758..f05bb75 100644
--- a/pengine/test10/migrate-fail-7.summary
+++ b/pengine/test10/migrate-fail-7.summary
@@ -7,7 +7,7 @@ Online: [ hex-13 hex-14 ]
      Started: [ hex-13 hex-14 ]
 
 Transition Summary:
- * Restart test-vm	(Started hex-13)
+ * Restart    test-vm     ( hex-13 )  
 
 Executing cluster transition:
  * Pseudo action:   load_stopped_hex-14
diff --git a/pengine/test10/migrate-fail-8.summary b/pengine/test10/migrate-fail-8.summary
index 9a651eb..018a466 100644
--- a/pengine/test10/migrate-fail-8.summary
+++ b/pengine/test10/migrate-fail-8.summary
@@ -7,7 +7,7 @@ Online: [ hex-13 hex-14 ]
      Started: [ hex-13 hex-14 ]
 
 Transition Summary:
- * Recover test-vm	(Started hex-14 -> hex-13)
+ * Recover    test-vm     ( hex-14 -> hex-13 )  
 
 Executing cluster transition:
  * Resource action: test-vm         stop on hex-14
diff --git a/pengine/test10/migrate-fail-9.summary b/pengine/test10/migrate-fail-9.summary
index 82ded68..0f99e92 100644
--- a/pengine/test10/migrate-fail-9.summary
+++ b/pengine/test10/migrate-fail-9.summary
@@ -7,7 +7,7 @@ Online: [ hex-13 hex-14 ]
      Started: [ hex-13 hex-14 ]
 
 Transition Summary:
- * Start   test-vm	(hex-13)
+ * Restart    test-vm     ( hex-13 )  
 
 Executing cluster transition:
  * Resource action: test-vm         stop on hex-14
diff --git a/pengine/test10/migrate-fencing.summary b/pengine/test10/migrate-fencing.summary
index cfd4eb8..44f3262 100644
--- a/pengine/test10/migrate-fencing.summary
+++ b/pengine/test10/migrate-fencing.summary
@@ -24,14 +24,14 @@ Online: [ pcmk-1 pcmk-2 pcmk-3 ]
 Transition Summary:
  * Fence (reboot) pcmk-4 'termination was requested'
  * Stop    FencingChild:0	(pcmk-4)  	due to node availability
- * Move    r192.168.101.181	(Started pcmk-4 -> pcmk-1)
- * Move    r192.168.101.182	(Started pcmk-4 -> pcmk-1)
- * Move    r192.168.101.183	(Started pcmk-4 -> pcmk-1)
- * Move    rsc_pcmk-4	(Started pcmk-4 -> pcmk-2)
- * Move    lsb-dummy	(Started pcmk-4 -> pcmk-1)
- * Migrate migrator	(Started pcmk-1 -> pcmk-3)
+ * Move       r192.168.101.181   (       pcmk-4 -> pcmk-1 )  
+ * Move       r192.168.101.182   (       pcmk-4 -> pcmk-1 )  
+ * Move       r192.168.101.183   (       pcmk-4 -> pcmk-1 )  
+ * Move       rsc_pcmk-4         (       pcmk-4 -> pcmk-2 )  
+ * Move       lsb-dummy          (       pcmk-4 -> pcmk-1 )  
+ * Migrate    migrator           (       pcmk-1 -> pcmk-3 )  
  * Stop    ping-1:0	(pcmk-4)  	due to node availability
- * Demote  stateful-1:0	(Master -> Stopped pcmk-4)
+ * Stop       stateful-1:0       (          Master pcmk-4 )   due to node availability
  * Promote stateful-1:1	(Slave -> Master pcmk-1)
 
 Executing cluster transition:
diff --git a/pengine/test10/migrate-partial-2.summary b/pengine/test10/migrate-partial-2.summary
index 0cf3c75..7ef1a5d 100644
--- a/pengine/test10/migrate-partial-2.summary
+++ b/pengine/test10/migrate-partial-2.summary
@@ -7,7 +7,7 @@ Online: [ hex-13 hex-14 ]
      Started: [ hex-13 hex-14 ]
 
 Transition Summary:
- * Migrate test-vm	(Started hex-14 -> hex-13)
+ * Migrate    test-vm     ( hex-14 -> hex-13 )  
 
 Executing cluster transition:
  * Resource action: test-vm         migrate_from on hex-13
diff --git a/pengine/test10/migrate-partial-3.summary b/pengine/test10/migrate-partial-3.summary
index 516e470..0dbe46a 100644
--- a/pengine/test10/migrate-partial-3.summary
+++ b/pengine/test10/migrate-partial-3.summary
@@ -9,7 +9,7 @@ OFFLINE: [ hex-15 ]
      Stopped: [ hex-15 ]
 
 Transition Summary:
- * Recover test-vm	(Started hex-14 -> hex-13)
+ * Recover    test-vm     ( hex-14 -> hex-13 )  
 
 Executing cluster transition:
  * Resource action: test-vm         stop on hex-14
diff --git a/pengine/test10/migrate-partial-4.summary b/pengine/test10/migrate-partial-4.summary
index c3f7012..8fd1d4c 100644
--- a/pengine/test10/migrate-partial-4.summary
+++ b/pengine/test10/migrate-partial-4.summary
@@ -48,8 +48,8 @@ Online: [ lustre01-left lustre02-left lustre03-left lustre04-left ]
 Transition Summary:
  * Start   drbd-stacked	(lustre02-left)
  * Start   drbd-testfs-local	(lustre03-left)
- * Migrate lustre	(Started lustre03-left -> lustre04-left)
- * Move    testfs	(Started lustre02-left -> lustre03-left)
+ * Migrate    lustre                ( lustre03-left -> lustre04-left )  
+ * Move       testfs                ( lustre02-left -> lustre03-left )  
  * Start   drbd-mgs:0	(lustre01-left)
  * Start   drbd-mgs:1	(lustre02-left)
 
diff --git a/pengine/test10/migrate-shutdown.summary b/pengine/test10/migrate-shutdown.summary
index b9aa5b2..508c399 100644
--- a/pengine/test10/migrate-shutdown.summary
+++ b/pengine/test10/migrate-shutdown.summary
@@ -38,9 +38,9 @@ Transition Summary:
  * Stop    ping-1:0	(pcmk-1)  	due to node availability
  * Stop    ping-1:1	(pcmk-2)  	due to node availability
  * Stop    ping-1:2	(pcmk-4)  	due to node availability
- * Stop    stateful-1:0	(pcmk-1)  	due to node availability
- * Demote  stateful-1:1	(Master -> Stopped pcmk-2)
- * Stop    stateful-1:2	(pcmk-4)  	due to node availability
+ * Stop       stateful-1:0         (  Slave pcmk-1 )   due to node availability
+ * Stop       stateful-1:1         ( Master pcmk-2 )   due to node availability
+ * Stop       stateful-1:2         (  Slave pcmk-4 )   due to node availability
 
 Executing cluster transition:
  * Resource action: Fencing         stop on pcmk-1
diff --git a/pengine/test10/migrate-start-complex.summary b/pengine/test10/migrate-start-complex.summary
index ed88398..9dd0924 100644
--- a/pengine/test10/migrate-start-complex.summary
+++ b/pengine/test10/migrate-start-complex.summary
@@ -11,8 +11,8 @@ Online: [ dom0-01 dom0-02 ]
      Stopped: [ dom0-01 dom0-02 ]
 
 Transition Summary:
- * Move    top	(Started dom0-02 -> dom0-01)
- * Migrate domU-test01	(Started dom0-02 -> dom0-01)
+ * Move       top                    ( dom0-02 -> dom0-01 )  
+ * Migrate    domU-test01            ( dom0-02 -> dom0-01 )  
  * Start   dom0-iscsi1-cnx1:1	(dom0-01)
  * Start   bottom:0	(dom0-01)
  * Start   bottom:1	(dom0-02)
diff --git a/pengine/test10/migrate-start.summary b/pengine/test10/migrate-start.summary
index 8bbe3e5..fb6fdef 100644
--- a/pengine/test10/migrate-start.summary
+++ b/pengine/test10/migrate-start.summary
@@ -8,7 +8,7 @@ Online: [ dom0-01 dom0-02 ]
      Stopped: [ dom0-01 ]
 
 Transition Summary:
- * Migrate domU-test01	(Started dom0-02 -> dom0-01)
+ * Migrate    domU-test01            ( dom0-02 -> dom0-01 )  
  * Start   dom0-iscsi1-cnx1:1	(dom0-01)
 
 Executing cluster transition:
diff --git a/pengine/test10/migrate-stop-complex.summary b/pengine/test10/migrate-stop-complex.summary
index 04dce1a..4aa6cf7 100644
--- a/pengine/test10/migrate-stop-complex.summary
+++ b/pengine/test10/migrate-stop-complex.summary
@@ -11,8 +11,8 @@ Online: [ dom0-01 ]
      Started: [ dom0-01 dom0-02 ]
 
 Transition Summary:
- * Move    top	(Started dom0-02 -> dom0-01)
- * Migrate domU-test01	(Started dom0-02 -> dom0-01)
+ * Move       top                    ( dom0-02 -> dom0-01 )  
+ * Migrate    domU-test01            ( dom0-02 -> dom0-01 )  
  * Stop    dom0-iscsi1-cnx1:1	(dom0-02)  	due to node availability
  * Stop    bottom:1	(dom0-02)  	due to node availability
 
diff --git a/pengine/test10/migrate-stop-start-complex.summary b/pengine/test10/migrate-stop-start-complex.summary
index 5408bb6..f0f5843 100644
--- a/pengine/test10/migrate-stop-start-complex.summary
+++ b/pengine/test10/migrate-stop-start-complex.summary
@@ -12,9 +12,9 @@ Online: [ dom0-01 ]
      Stopped: [ dom0-01 ]
 
 Transition Summary:
- * Migrate domU-test01	(Started dom0-02 -> dom0-01)
+ * Migrate    domU-test01            ( dom0-02 -> dom0-01 )  
  * Stop    dom0-iscsi1-cnx1:1	(dom0-02)  	due to node availability
- * Move    bottom:0	(Started dom0-02 -> dom0-01)
+ * Move       bottom:0               ( dom0-02 -> dom0-01 )  
 
 Executing cluster transition:
  * Resource action: domU-test01     migrate_to on dom0-02
diff --git a/pengine/test10/migrate-stop.summary b/pengine/test10/migrate-stop.summary
index a9d5771..0a939dd 100644
--- a/pengine/test10/migrate-stop.summary
+++ b/pengine/test10/migrate-stop.summary
@@ -8,7 +8,7 @@ Online: [ dom0-01 ]
      Started: [ dom0-01 dom0-02 ]
 
 Transition Summary:
- * Migrate domU-test01	(Started dom0-02 -> dom0-01)
+ * Migrate    domU-test01            ( dom0-02 -> dom0-01 )  
  * Stop    dom0-iscsi1-cnx1:1	(dom0-02)  	due to node availability
 
 Executing cluster transition:
diff --git a/pengine/test10/migrate-stop_start.summary b/pengine/test10/migrate-stop_start.summary
index cadb24f..de89651 100644
--- a/pengine/test10/migrate-stop_start.summary
+++ b/pengine/test10/migrate-stop_start.summary
@@ -9,8 +9,8 @@ Online: [ dom0-01 ]
      Stopped: [ dom0-01 ]
 
 Transition Summary:
- * Migrate domU-test01	(Started dom0-02 -> dom0-01)
- * Move    dom0-iscsi1-cnx1:0	(Started dom0-02 -> dom0-01)
+ * Migrate    domU-test01            ( dom0-02 -> dom0-01 )  
+ * Move       dom0-iscsi1-cnx1:0     ( dom0-02 -> dom0-01 )  
 
 Executing cluster transition:
  * Pseudo action:   clone-dom0-iscsi1_stop_0
diff --git a/pengine/test10/mon-rsc-2.summary b/pengine/test10/mon-rsc-2.summary
index 3f649e5..6c219b5 100644
--- a/pengine/test10/mon-rsc-2.summary
+++ b/pengine/test10/mon-rsc-2.summary
@@ -6,7 +6,7 @@ Online: [ node1 ]
  rsc1	(heartbeat:apache):	Started node2
 
 Transition Summary:
- * Move    rsc1	(Started node2 -> node1)
+ * Move       rsc1    ( node2 -> node1 )  
 
 Executing cluster transition:
  * Resource action: rsc1            monitor on node1
diff --git a/pengine/test10/mon-rsc-4.summary b/pengine/test10/mon-rsc-4.summary
index 92b0f68..d4debf3 100644
--- a/pengine/test10/mon-rsc-4.summary
+++ b/pengine/test10/mon-rsc-4.summary
@@ -6,7 +6,7 @@ Online: [ node1 ]
  rsc1	(heartbeat:apache):	Starting node2
 
 Transition Summary:
- * Move    rsc1	(Started node2 -> node1)
+ * Move       rsc1    ( node2 -> node1 )  
 
 Executing cluster transition:
  * Resource action: rsc1            monitor on node1
diff --git a/pengine/test10/monitor-onfail-restart.summary b/pengine/test10/monitor-onfail-restart.summary
index 34bc76a..b15c321 100644
--- a/pengine/test10/monitor-onfail-restart.summary
+++ b/pengine/test10/monitor-onfail-restart.summary
@@ -6,7 +6,7 @@ OFFLINE: [ fc16-builder2 ]
  A	(ocf::pacemaker:Dummy):	FAILED fc16-builder 
 
 Transition Summary:
- * Recover A	(Started fc16-builder)
+ * Recover    A       ( fc16-builder )  
 
 Executing cluster transition:
  * Resource action: A               stop on fc16-builder
diff --git a/pengine/test10/multi1.summary b/pengine/test10/multi1.summary
index c782e98..40222fc 100644
--- a/pengine/test10/multi1.summary
+++ b/pengine/test10/multi1.summary
@@ -5,7 +5,7 @@ Online: [ node1 node2 ]
  rsc1	(heartbeat:apache):	Started [ node1 node2 ]
 
 Transition Summary:
- * Restart rsc1	(Started node1)
+ * Restart    rsc1    ( node1 )  
 
 Executing cluster transition:
  * Resource action: rsc1            stop on node2
diff --git a/pengine/test10/multiple-monitor-one-failed.summary b/pengine/test10/multiple-monitor-one-failed.summary
index b10abbe..0691ebf 100644
--- a/pengine/test10/multiple-monitor-one-failed.summary
+++ b/pengine/test10/multiple-monitor-one-failed.summary
@@ -5,7 +5,7 @@ Online: [ dhcp180 dhcp69 ]
  Dummy-test2	(ocf::test:Dummy):	FAILED dhcp180 
 
 Transition Summary:
- * Recover Dummy-test2	(Started dhcp180)
+ * Recover    Dummy-test2     ( dhcp180 )  
 
 Executing cluster transition:
  * Resource action: Dummy-test2     stop on dhcp180
diff --git a/pengine/test10/not-installed-agent.summary b/pengine/test10/not-installed-agent.summary
index 5d0b311..b32cdd4 100644
--- a/pengine/test10/not-installed-agent.summary
+++ b/pengine/test10/not-installed-agent.summary
@@ -7,8 +7,8 @@ Online: [ sles11-1 sles11-2 ]
  rsc2	(ocf::pacemaker:Dummy):	FAILED sles11-1 
 
 Transition Summary:
- * Recover rsc1	(Started sles11-1 -> sles11-2)
- * Recover rsc2	(Started sles11-1 -> sles11-2)
+ * Recover    rsc1    ( sles11-1 -> sles11-2 )  
+ * Recover    rsc2    ( sles11-1 -> sles11-2 )  
 
 Executing cluster transition:
  * Resource action: rsc1            stop on sles11-1
diff --git a/pengine/test10/not-installed-tools.summary b/pengine/test10/not-installed-tools.summary
index e429333..01ae7f7 100644
--- a/pengine/test10/not-installed-tools.summary
+++ b/pengine/test10/not-installed-tools.summary
@@ -7,7 +7,7 @@ Online: [ sles11-1 sles11-2 ]
  rsc2	(ocf::pacemaker:Dummy):	Started sles11-1 (failure ignored)
 
 Transition Summary:
- * Recover rsc1	(Started sles11-1 -> sles11-2)
+ * Recover    rsc1    ( sles11-1 -> sles11-2 )  
 
 Executing cluster transition:
  * Resource action: rsc1            stop on sles11-1
diff --git a/pengine/test10/not-reschedule-unneeded-monitor.summary b/pengine/test10/not-reschedule-unneeded-monitor.summary
index 2a872d5..429ea24 100644
--- a/pengine/test10/not-reschedule-unneeded-monitor.summary
+++ b/pengine/test10/not-reschedule-unneeded-monitor.summary
@@ -14,7 +14,7 @@ Online: [ castor kimball ]
      Started: [ castor kimball ]
 
 Transition Summary:
- * Recover sle12-kvm	(Started castor -> kimball)
+ * Recover    sle12-kvm     ( castor -> kimball )  
 
 Executing cluster transition:
  * Resource action: sle12-kvm       stop on castor
diff --git a/pengine/test10/notify-3.summary b/pengine/test10/notify-3.summary
index 03a3d4e..6c3367e 100644
--- a/pengine/test10/notify-3.summary
+++ b/pengine/test10/notify-3.summary
@@ -10,7 +10,7 @@ Online: [ node1 node2 ]
      child_rsc2:1	(heartbeat:apache):	Stopped 
 
 Transition Summary:
- * Move    child_rsc1:1	(Started node2 -> node1)
+ * Move       child_rsc1:1     ( node2 -> node1 )  
  * Stop    child_rsc2:0	(node1)  	due to node availability
 
 Executing cluster transition:
diff --git a/pengine/test10/novell-239082.summary b/pengine/test10/novell-239082.summary
index b596de4..2bafd1b 100644
--- a/pengine/test10/novell-239082.summary
+++ b/pengine/test10/novell-239082.summary
@@ -9,9 +9,9 @@ Online: [ xen-1 xen-2 ]
 
 Transition Summary:
  * Shutdown xen-1
- * Move    fs_1	(Started xen-1 -> xen-2)
+ * Move       fs_1        (        xen-1 -> xen-2 )  
  * Promote drbd0:0	(Slave -> Master xen-2)
- * Demote  drbd0:1	(Master -> Stopped xen-1)
+ * Stop       drbd0:1     (          Master xen-1 )   due to node availability
 
 Executing cluster transition:
  * Resource action: fs_1            stop on xen-1
diff --git a/pengine/test10/novell-252693-2.summary b/pengine/test10/novell-252693-2.summary
index 2e8e4b5..392d26e 100644
--- a/pengine/test10/novell-252693-2.summary
+++ b/pengine/test10/novell-252693-2.summary
@@ -25,7 +25,7 @@ Transition Summary:
  * Start   evmsclone:1	(node1)
  * Start   imagestoreclone:1	(node1)
  * Start   configstoreclone:1	(node1)
- * Migrate sles10	(Started node2 -> node1)
+ * Migrate    sles10                ( node2 -> node1 )  
 
 Executing cluster transition:
  * Resource action: stonithclone:1  monitor on node1
diff --git a/pengine/test10/novell-252693-3.summary b/pengine/test10/novell-252693-3.summary
index 741c957..5c3b0ca 100644
--- a/pengine/test10/novell-252693-3.summary
+++ b/pengine/test10/novell-252693-3.summary
@@ -23,10 +23,10 @@ Transition Summary:
  * Start   stonithclone:1	(node1)
  * Start   evmsdclone:1	(node1)
  * Start   evmsclone:1	(node1)
- * Recover imagestoreclone:0	(Started node2 -> node1)
+ * Recover    imagestoreclone:0     ( node2 -> node1 )  
  * Start   imagestoreclone:1	(node2)
  * Start   configstoreclone:1	(node1)
- * Migrate sles10	(Started node2 -> node1)
+ * Migrate    sles10                ( node2 -> node1 )  
 
 Executing cluster transition:
  * Resource action: stonithclone:1  monitor on node1
diff --git a/pengine/test10/novell-252693.summary b/pengine/test10/novell-252693.summary
index 0682119..27cf315 100644
--- a/pengine/test10/novell-252693.summary
+++ b/pengine/test10/novell-252693.summary
@@ -21,7 +21,7 @@ Transition Summary:
  * Stop    evmsclone:1	(node1)  	due to node availability
  * Stop    imagestoreclone:1	(node1)  	due to node availability
  * Stop    configstoreclone:1	(node1)  	due to node availability
- * Migrate sles10	(Started node1 -> node2)
+ * Migrate    sles10                ( node1 -> node2 )  
 
 Executing cluster transition:
  * Pseudo action:   stonithcloneset_stop_0
diff --git a/pengine/test10/one-or-more-1.summary b/pengine/test10/one-or-more-1.summary
index af31a46..d2e79bc 100644
--- a/pengine/test10/one-or-more-1.summary
+++ b/pengine/test10/one-or-more-1.summary
@@ -10,9 +10,9 @@ OFFLINE: [ fc16-builder2 ]
  D	(ocf::pacemaker:Dummy):	Stopped 
 
 Transition Summary:
- * Start   B	(fc16-builder - blocked) 	due to unrunnable A start
- * Start   C	(fc16-builder - blocked) 	due to unrunnable A start
- * Start   D	(fc16-builder - blocked) 	due to unrunnable one-or-more:require-all-set-1
+ * Start      B       ( fc16-builder )   due to unrunnable A start (blocked)
+ * Start      C       ( fc16-builder )   due to unrunnable A start (blocked)
+ * Start      D       ( fc16-builder )   due to unrunnable one-or-more:require-all-set-1 (blocked)
 
 Executing cluster transition:
  * Resource action: A               monitor on fc16-builder
diff --git a/pengine/test10/one-or-more-3.summary b/pengine/test10/one-or-more-3.summary
index abf4081..97511e8 100644
--- a/pengine/test10/one-or-more-3.summary
+++ b/pengine/test10/one-or-more-3.summary
@@ -11,7 +11,7 @@ OFFLINE: [ fc16-builder2 ]
 
 Transition Summary:
  * Start   A	(fc16-builder)
- * Start   D	(fc16-builder - blocked) 	due to unrunnable one-or-more:require-all-set-1
+ * Start      D       ( fc16-builder )   due to unrunnable one-or-more:require-all-set-1 (blocked)
 
 Executing cluster transition:
  * Resource action: A               monitor on fc16-builder
diff --git a/pengine/test10/order-mandatory.summary b/pengine/test10/order-mandatory.summary
index 021d8fe..955a281 100644
--- a/pengine/test10/order-mandatory.summary
+++ b/pengine/test10/order-mandatory.summary
@@ -9,8 +9,8 @@ Online: [ node1 ]
 
 Transition Summary:
  * Start   rsc1	(node1)
- * Restart rsc2	(Started node1) 	due to required rsc1 start
- * Stop    rsc4	(Started node1) 	due to unrunnable rsc3 start
+ * Restart    rsc2    ( node1 )   due to required rsc1 start
+ * Stop       rsc4    ( node1 )   due to unrunnable rsc3 start
 
 Executing cluster transition:
  * Resource action: rsc1            start on node1
diff --git a/pengine/test10/order-required.summary b/pengine/test10/order-required.summary
index 021d8fe..955a281 100644
--- a/pengine/test10/order-required.summary
+++ b/pengine/test10/order-required.summary
@@ -9,8 +9,8 @@ Online: [ node1 ]
 
 Transition Summary:
  * Start   rsc1	(node1)
- * Restart rsc2	(Started node1) 	due to required rsc1 start
- * Stop    rsc4	(Started node1) 	due to unrunnable rsc3 start
+ * Restart    rsc2    ( node1 )   due to required rsc1 start
+ * Stop       rsc4    ( node1 )   due to unrunnable rsc3 start
 
 Executing cluster transition:
  * Resource action: rsc1            start on node1
diff --git a/pengine/test10/order-serialize-set.summary b/pengine/test10/order-serialize-set.summary
index 5483cca..a9f97a3 100644
--- a/pengine/test10/order-serialize-set.summary
+++ b/pengine/test10/order-serialize-set.summary
@@ -15,13 +15,13 @@ Online: [ xen-b ]
  Email_Alerting	(ocf::heartbeat:MailTo):	Started xen-b
 
 Transition Summary:
- * Restart xen-a-fencing	(Started xen-b)
+ * Restart    xen-a-fencing     (          xen-b )  
  * Stop    xen-b-fencing	(xen-a)
- * Migrate db	(Started xen-a -> xen-b)
- * Migrate core-101	(Started xen-a -> xen-b)
- * Migrate core-200	(Started xen-a -> xen-b)
- * Migrate edge	(Started xen-a -> xen-b)
- * Migrate base	(Started xen-a -> xen-b)
+ * Migrate    db                ( xen-a -> xen-b )  
+ * Migrate    core-101          ( xen-a -> xen-b )  
+ * Migrate    core-200          ( xen-a -> xen-b )  
+ * Migrate    edge              ( xen-a -> xen-b )  
+ * Migrate    base              ( xen-a -> xen-b )  
 
 Executing cluster transition:
  * Resource action: xen-a-fencing   stop on xen-b
diff --git a/pengine/test10/order-serialize.summary b/pengine/test10/order-serialize.summary
index b2114eb..f58a6bc 100644
--- a/pengine/test10/order-serialize.summary
+++ b/pengine/test10/order-serialize.summary
@@ -15,13 +15,13 @@ Online: [ xen-b ]
  Email_Alerting	(ocf::heartbeat:MailTo):	Started xen-b
 
 Transition Summary:
- * Restart xen-a-fencing	(Started xen-b)
+ * Restart    xen-a-fencing     (          xen-b )  
  * Stop    xen-b-fencing	(xen-a)
- * Migrate db	(Started xen-a -> xen-b)
- * Migrate core-101	(Started xen-a -> xen-b)
- * Migrate core-200	(Started xen-a -> xen-b)
- * Migrate edge	(Started xen-a -> xen-b)
- * Migrate base	(Started xen-a -> xen-b)
+ * Migrate    db                ( xen-a -> xen-b )  
+ * Migrate    core-101          ( xen-a -> xen-b )  
+ * Migrate    core-200          ( xen-a -> xen-b )  
+ * Migrate    edge              ( xen-a -> xen-b )  
+ * Migrate    base              ( xen-a -> xen-b )  
 
 Executing cluster transition:
  * Resource action: xen-a-fencing   stop on xen-b
diff --git a/pengine/test10/order-sets.summary b/pengine/test10/order-sets.summary
index 0d5de5e..e16e1f4 100644
--- a/pengine/test10/order-sets.summary
+++ b/pengine/test10/order-sets.summary
@@ -9,10 +9,10 @@ Online: [ ubuntu_1 ]
  world4	(ocf::bbnd:world4test):	Started ubuntu_2
 
 Transition Summary:
- * Move    world1	(Started ubuntu_2 -> ubuntu_1)
- * Move    world2	(Started ubuntu_2 -> ubuntu_1)
- * Move    world3	(Started ubuntu_2 -> ubuntu_1)
- * Move    world4	(Started ubuntu_2 -> ubuntu_1)
+ * Move       world1     ( ubuntu_2 -> ubuntu_1 )  
+ * Move       world2     ( ubuntu_2 -> ubuntu_1 )  
+ * Move       world3     ( ubuntu_2 -> ubuntu_1 )  
+ * Move       world4     ( ubuntu_2 -> ubuntu_1 )  
 
 Executing cluster transition:
  * Resource action: world4          stop on ubuntu_2
diff --git a/pengine/test10/order-wrong-kind.summary b/pengine/test10/order-wrong-kind.summary
index c498caf..df3bd80 100644
--- a/pengine/test10/order-wrong-kind.summary
+++ b/pengine/test10/order-wrong-kind.summary
@@ -10,7 +10,7 @@ Online: [ node1 ]
 
 Transition Summary:
  * Start   rsc1	(node1)
- * Restart rsc2	(Started node1) 	due to required rsc1 start
+ * Restart    rsc2    ( node1 )   due to required rsc1 start
 
 Executing cluster transition:
  * Resource action: rsc1            start on node1
diff --git a/pengine/test10/order3.summary b/pengine/test10/order3.summary
index 4289a47..6694c0e 100644
--- a/pengine/test10/order3.summary
+++ b/pengine/test10/order3.summary
@@ -8,10 +8,10 @@ Online: [ node1 node2 ]
  rsc4	(heartbeat:apache):	Started node1
 
 Transition Summary:
- * Move    rsc1	(Started node1 -> node2)
- * Move    rsc2	(Started node1 -> node2)
- * Move    rsc3	(Started node1 -> node2)
- * Move    rsc4	(Started node1 -> node2)
+ * Move       rsc1    ( node1 -> node2 )  
+ * Move       rsc2    ( node1 -> node2 )  
+ * Move       rsc3    ( node1 -> node2 )  
+ * Move       rsc4    ( node1 -> node2 )  
 
 Executing cluster transition:
  * Resource action: rsc1            monitor on node2
diff --git a/pengine/test10/order5.summary b/pengine/test10/order5.summary
index 0c3e0bc..db222c4 100644
--- a/pengine/test10/order5.summary
+++ b/pengine/test10/order5.summary
@@ -12,10 +12,10 @@ Online: [ node1 node2 ]
  rsc8	(heartbeat:apache):	Started node2
 
 Transition Summary:
- * Move    rsc2	(Started node1 -> node2)
- * Move    rsc4	(Started node1 -> node2)
- * Move    rsc6	(Started node2 -> node1)
- * Move    rsc8	(Started node2 -> node1)
+ * Move       rsc2    ( node1 -> node2 )  
+ * Move       rsc4    ( node1 -> node2 )  
+ * Move       rsc6    ( node2 -> node1 )  
+ * Move       rsc8    ( node2 -> node1 )  
 
 Executing cluster transition:
  * Resource action: rsc1            monitor on node2
diff --git a/pengine/test10/order6.summary b/pengine/test10/order6.summary
index 0c3e0bc..db222c4 100644
--- a/pengine/test10/order6.summary
+++ b/pengine/test10/order6.summary
@@ -12,10 +12,10 @@ Online: [ node1 node2 ]
  rsc8	(heartbeat:apache):	Started node2
 
 Transition Summary:
- * Move    rsc2	(Started node1 -> node2)
- * Move    rsc4	(Started node1 -> node2)
- * Move    rsc6	(Started node2 -> node1)
- * Move    rsc8	(Started node2 -> node1)
+ * Move       rsc2    ( node1 -> node2 )  
+ * Move       rsc4    ( node1 -> node2 )  
+ * Move       rsc6    ( node2 -> node1 )  
+ * Move       rsc8    ( node2 -> node1 )  
 
 Executing cluster transition:
  * Resource action: rsc1            monitor on node2
diff --git a/pengine/test10/order7.summary b/pengine/test10/order7.summary
index 6648bff..a8610e9 100644
--- a/pengine/test10/order7.summary
+++ b/pengine/test10/order7.summary
@@ -13,7 +13,7 @@ Transition Summary:
  * Start   rsc2	(node1)
  * Start   rsc3	(node1)
  * Start   rscB	(node1)
- * Start   rscC	(node1 - blocked) 	due to unrunnable rscA start
+ * Start      rscC    ( node1 )   due to unrunnable rscA start (blocked)
 
 Executing cluster transition:
  * Resource action: rsc2            monitor on node1
diff --git a/pengine/test10/ordered-set-basic-startup.summary b/pengine/test10/ordered-set-basic-startup.summary
index cfa8f8b..ef546ed 100644
--- a/pengine/test10/ordered-set-basic-startup.summary
+++ b/pengine/test10/ordered-set-basic-startup.summary
@@ -12,10 +12,10 @@ OFFLINE: [ fc16-builder2 ]
  F	(ocf::pacemaker:Dummy):	Stopped 
 
 Transition Summary:
- * Start   A	(fc16-builder - blocked) 	due to unrunnable C start
+ * Start      A       ( fc16-builder )   due to unrunnable C start (blocked)
  * Start   B	(fc16-builder)
- * Start   E	(fc16-builder - blocked) 	due to unrunnable A start
- * Start   F	(fc16-builder - blocked) 	due to unrunnable D start
+ * Start      E       ( fc16-builder )   due to unrunnable A start (blocked)
+ * Start      F       ( fc16-builder )   due to unrunnable D start (blocked)
 
 Executing cluster transition:
  * Resource action: A               monitor on fc16-builder
diff --git a/pengine/test10/ordered-set-natural.summary b/pengine/test10/ordered-set-natural.summary
index 1888d66..e9667fd 100644
--- a/pengine/test10/ordered-set-natural.summary
+++ b/pengine/test10/ordered-set-natural.summary
@@ -21,12 +21,12 @@ Online: [ node1 node2 ]
  dummy2-5	(ocf::heartbeat:Dummy):	Stopped 
 
 Transition Summary:
- * Start   dummy1-1	(node1 - blocked) 	due to no quorum
- * Start   dummy1-2	(node1 - blocked) 	due to no quorum
- * Start   dummy2-1	(node2 - blocked) 	due to no quorum
- * Start   dummy2-2	(node2 - blocked) 	due to no quorum
- * Start   dummy3-4	(node1 - blocked) 	due to no quorum
- * Start   dummy3-5	(node1 - blocked) 	due to no quorum
+ * Start      dummy1-1     ( node1 )   due to no quorum (blocked)
+ * Start      dummy1-2     ( node1 )   due to no quorum (blocked)
+ * Start      dummy2-1     ( node2 )   due to no quorum (blocked)
+ * Start      dummy2-2     ( node2 )   due to no quorum (blocked)
+ * Start      dummy3-4     ( node1 )   due to no quorum (blocked)
+ * Start      dummy3-5     ( node1 )   due to no quorum (blocked)
 
 Executing cluster transition:
 
diff --git a/pengine/test10/params-1.summary b/pengine/test10/params-1.summary
index 357c2ac..26fdecf 100644
--- a/pengine/test10/params-1.summary
+++ b/pengine/test10/params-1.summary
@@ -9,7 +9,7 @@ Online: [ c001n01 c001n02 c001n03 c001n08 ]
  rsc_c001n01	(ocf::heartbeat:IPaddr):	Started c001n01
 
 Transition Summary:
- * Restart DcIPaddr	(Started c001n02)
+ * Restart    DcIPaddr     ( c001n02 )  
 
 Executing cluster transition:
  * Resource action: DcIPaddr        monitor on c001n08
diff --git a/pengine/test10/params-2.summary b/pengine/test10/params-2.summary
index f4169f2..1e73e77 100644
--- a/pengine/test10/params-2.summary
+++ b/pengine/test10/params-2.summary
@@ -9,7 +9,7 @@ Online: [ node1 node2 node3 ]
 Transition Summary:
  * Shutdown node1
  * Stop    rsc1	(node1)
- * Restart rsc2	(Started node2)
+ * Restart    rsc2    ( node2 )  
  * Start   rsc3	(node3)
 
 Executing cluster transition:
diff --git a/pengine/test10/params-4.summary b/pengine/test10/params-4.summary
index 67b0426..dfd3122 100644
--- a/pengine/test10/params-4.summary
+++ b/pengine/test10/params-4.summary
@@ -9,7 +9,7 @@ Online: [ c001n01 c001n02 c001n03 c001n08 ]
  rsc_c001n01	(ocf::heartbeat:IPaddr):	Started c001n01
 
 Transition Summary:
- * Reload  DcIPaddr	(Started c001n02)
+ * Reload     DcIPaddr     ( c001n02 )  
 
 Executing cluster transition:
  * Resource action: DcIPaddr        monitor on c001n08
diff --git a/pengine/test10/params-5.summary b/pengine/test10/params-5.summary
index 357c2ac..26fdecf 100644
--- a/pengine/test10/params-5.summary
+++ b/pengine/test10/params-5.summary
@@ -9,7 +9,7 @@ Online: [ c001n01 c001n02 c001n03 c001n08 ]
  rsc_c001n01	(ocf::heartbeat:IPaddr):	Started c001n01
 
 Transition Summary:
- * Restart DcIPaddr	(Started c001n02)
+ * Restart    DcIPaddr     ( c001n02 )  
 
 Executing cluster transition:
  * Resource action: DcIPaddr        monitor on c001n08
diff --git a/pengine/test10/params-6.summary b/pengine/test10/params-6.summary
index b7c9ff4..20ba745 100644
--- a/pengine/test10/params-6.summary
+++ b/pengine/test10/params-6.summary
@@ -182,7 +182,7 @@ Online: [ mgmt01 v03-a v03-b ]
  dist.fly-uni.org-vm	(ocf::vds-ok:VirtualDomain):	Stopped ( disabled ) 
 
 Transition Summary:
- * Reload  c5-x64-devel.vds-ok.com-vm	(Started v03-a)
+ * Reload     c5-x64-devel.vds-ok.com-vm     ( v03-a )  
 
 Executing cluster transition:
  * Resource action: vd01-b.cdev.ttc.prague.cz.vds-ok.com-vm monitor=10000 on v03-b
diff --git a/pengine/test10/probe-2.summary b/pengine/test10/probe-2.summary
index 05588c8..7e74efc 100644
--- a/pengine/test10/probe-2.summary
+++ b/pengine/test10/probe-2.summary
@@ -32,16 +32,16 @@ Online: [ wc01 ]
 
 Transition Summary:
  * Promote drbd_mysql:0	(Slave -> Master wc01)
- * Demote  drbd_mysql:1	(Master -> Stopped wc02)
- * Move    fs_mysql	(Started wc02 -> wc01)
- * Move    intip_sql	(Started wc02 -> wc01)
- * Move    mysql-server	(Started wc02 -> wc01)
- * Stop    drbd_www:1	(wc02)  	due to node availability
+ * Stop       drbd_mysql:1          (          Master wc02 )   due to node availability
+ * Move       fs_mysql              (         wc02 -> wc01 )  
+ * Move       intip_sql             (         wc02 -> wc01 )  
+ * Move       mysql-server          (         wc02 -> wc01 )  
+ * Stop       drbd_www:1            (           Slave wc02 )   due to node availability
  * Stop    nfs-common:1	(wc02)  	due to node availability
  * Stop    mysql-proxy:1	(wc02)  	due to node availability
  * Stop    fs_www:1	(wc02)  	due to node availability
  * Stop    apache2:1	(wc02)  	due to node availability
- * Restart stonith_rackpdu:0	(Started wc01)
+ * Restart    stonith_rackpdu:0     (                 wc01 )  
  * Stop    stonith_rackpdu:1	(wc02)  	due to node availability
 
 Executing cluster transition:
diff --git a/pengine/test10/probe-4.summary b/pengine/test10/probe-4.summary
index 00ecbc2..691c4b6 100644
--- a/pengine/test10/probe-4.summary
+++ b/pengine/test10/probe-4.summary
@@ -25,7 +25,7 @@ Online: [ pcmk-1 pcmk-2 pcmk-3 ]
      Stopped: [ pcmk-4 ]
 
 Transition Summary:
- * Start   migrator	(pcmk-3 - blocked)
+ * Start      migrator     ( pcmk-3 )   blocked
 
 Executing cluster transition:
 
diff --git a/pengine/test10/quorum-1.summary b/pengine/test10/quorum-1.summary
index 83428d4..fd01941 100644
--- a/pengine/test10/quorum-1.summary
+++ b/pengine/test10/quorum-1.summary
@@ -7,7 +7,7 @@ Online: [ node1 node2 ]
  rsc3	(heartbeat:apache):	Stopped 
 
 Transition Summary:
- * Move    rsc2	(Started node1 -> node2)
+ * Move       rsc2    ( node1 -> node2 )  
  * Start   rsc3	(node1)
 
 Executing cluster transition:
diff --git a/pengine/test10/quorum-2.summary b/pengine/test10/quorum-2.summary
index 1dce96c..f603bfa 100644
--- a/pengine/test10/quorum-2.summary
+++ b/pengine/test10/quorum-2.summary
@@ -7,8 +7,8 @@ Online: [ node1 node2 ]
  rsc3	(heartbeat:apache):	Stopped 
 
 Transition Summary:
- * Move    rsc2	(Started node1 -> node2)
- * Start   rsc3	(node1 - blocked) 	due to quorum freeze
+ * Move       rsc2    ( node1 -> node2 )  
+ * Start      rsc3    (          node1 )   due to quorum freeze (blocked)
 
 Executing cluster transition:
  * Resource action: rsc1            monitor on node2
diff --git a/pengine/test10/quorum-3.summary b/pengine/test10/quorum-3.summary
index e8e4bf3..cda0278 100644
--- a/pengine/test10/quorum-3.summary
+++ b/pengine/test10/quorum-3.summary
@@ -7,9 +7,9 @@ Online: [ node1 node2 ]
  rsc3	(heartbeat:apache):	Stopped 
 
 Transition Summary:
- * Stop    rsc1	(Started node1) 	due to no quorum
- * Stop    rsc2	(Started node1) 	due to no quorum
- * Start   rsc3	(node1 - blocked) 	due to no quorum
+ * Stop       rsc1    ( node1 )   due to no quorum
+ * Stop       rsc2    ( node1 )   due to no quorum
+ * Start      rsc3    ( node1 )   due to no quorum (blocked)
 
 Executing cluster transition:
  * Resource action: rsc1            monitor on node2
diff --git a/pengine/test10/rec-node-10.summary b/pengine/test10/rec-node-10.summary
index 503dd0d..296a018 100644
--- a/pengine/test10/rec-node-10.summary
+++ b/pengine/test10/rec-node-10.summary
@@ -8,9 +8,9 @@ Online: [ node2 ]
  rsc2	(heartbeat:apache):	Started node1 (UNCLEAN)
 
 Transition Summary:
- * Start   stonith-1	(node2 - blocked) 	due to no quorum
- * Stop    rsc1	(Started node1 - blocked) 	due to no quorum
- * Stop    rsc2	(Started node1 - blocked) 	due to no quorum
+ * Start      stonith-1     ( node2 )   due to no quorum (blocked)
+ * Stop       rsc1          ( node1 )   due to no quorum (blocked)
+ * Stop       rsc2          ( node1 )   due to no quorum (blocked)
 
 Executing cluster transition:
  * Resource action: stonith-1       monitor on node2
diff --git a/pengine/test10/rec-node-11.summary b/pengine/test10/rec-node-11.summary
index e884ffa..a354e49 100644
--- a/pengine/test10/rec-node-11.summary
+++ b/pengine/test10/rec-node-11.summary
@@ -12,9 +12,9 @@ Online: [ node2 ]
 Transition Summary:
  * Fence (reboot) node1 'peer process is no longer available'
  * Start   stonith-1	(node2)
- * Move    rsc1	(Started node1 -> node2)
- * Move    rsc2	(Started node1 -> node2)
- * Restart rsc3	(Started node2)
+ * Move       rsc1          ( node1 -> node2 )  
+ * Move       rsc2          ( node1 -> node2 )  
+ * Restart    rsc3          (          node2 )  
 
 Executing cluster transition:
  * Resource action: stonith-1       monitor on node2
diff --git a/pengine/test10/rec-node-13.summary b/pengine/test10/rec-node-13.summary
index de2fa28..8bab0db 100644
--- a/pengine/test10/rec-node-13.summary
+++ b/pengine/test10/rec-node-13.summary
@@ -35,7 +35,7 @@ OFFLINE: [ c001n03 c001n05 ]
 
 Transition Summary:
  * Fence (reboot) c001n04 'ocf_msdummy:6 failed there'
- * Stop    ocf_msdummy:6	(c001n04)  	due to node availability
+ * Stop       ocf_msdummy:6     ( Slave c001n04 )   due to node availability
 
 Executing cluster transition:
  * Fencing c001n04 (reboot)
diff --git a/pengine/test10/rec-node-15.summary b/pengine/test10/rec-node-15.summary
index 760942c..07355c7 100644
--- a/pengine/test10/rec-node-15.summary
+++ b/pengine/test10/rec-node-15.summary
@@ -23,9 +23,9 @@ Online: [ sapcl01 ]
 Transition Summary:
  * Fence (reboot) sapcl03 'peer is no longer part of the cluster'
  * Start   stonith-1	(sapcl01)
- * Move    IPaddr_192_168_1_102	(Started sapcl02 -> sapcl01)
- * Move    LVM_12	(Started sapcl02 -> sapcl01)
- * Move    Filesystem_13	(Started sapcl02 -> sapcl01)
+ * Move       IPaddr_192_168_1_102     ( sapcl02 -> sapcl01 )  
+ * Move       LVM_12                   ( sapcl02 -> sapcl01 )  
+ * Move       Filesystem_13            ( sapcl02 -> sapcl01 )  
  * Start   IPaddr_192_168_1_104	(sapcl01)
  * Start   LVM_22	(sapcl01)
  * Start   Filesystem_23	(sapcl01)
diff --git a/pengine/test10/rec-node-4.summary b/pengine/test10/rec-node-4.summary
index 4a39615..30c9667 100644
--- a/pengine/test10/rec-node-4.summary
+++ b/pengine/test10/rec-node-4.summary
@@ -10,8 +10,8 @@ Online: [ node2 ]
 Transition Summary:
  * Fence (reboot) node1 'peer is no longer part of the cluster'
  * Start   stonith-1	(node2)
- * Move    rsc1	(Started node1 -> node2)
- * Move    rsc2	(Started node1 -> node2)
+ * Move       rsc1          ( node1 -> node2 )  
+ * Move       rsc2          ( node1 -> node2 )  
 
 Executing cluster transition:
  * Resource action: stonith-1       monitor on node2
diff --git a/pengine/test10/rec-node-6.summary b/pengine/test10/rec-node-6.summary
index 6cb8d01..9a45360 100644
--- a/pengine/test10/rec-node-6.summary
+++ b/pengine/test10/rec-node-6.summary
@@ -10,8 +10,8 @@ Online: [ node2 ]
 Transition Summary:
  * Fence (reboot) node1 'peer process is no longer available'
  * Start   stonith-1	(node2)
- * Move    rsc1	(Started node1 -> node2)
- * Move    rsc2	(Started node1 -> node2)
+ * Move       rsc1          ( node1 -> node2 )  
+ * Move       rsc2          ( node1 -> node2 )  
 
 Executing cluster transition:
  * Resource action: stonith-1       monitor on node2
diff --git a/pengine/test10/rec-node-7.summary b/pengine/test10/rec-node-7.summary
index 4a39615..30c9667 100644
--- a/pengine/test10/rec-node-7.summary
+++ b/pengine/test10/rec-node-7.summary
@@ -10,8 +10,8 @@ Online: [ node2 ]
 Transition Summary:
  * Fence (reboot) node1 'peer is no longer part of the cluster'
  * Start   stonith-1	(node2)
- * Move    rsc1	(Started node1 -> node2)
- * Move    rsc2	(Started node1 -> node2)
+ * Move       rsc1          ( node1 -> node2 )  
+ * Move       rsc2          ( node1 -> node2 )  
 
 Executing cluster transition:
  * Resource action: stonith-1       monitor on node2
diff --git a/pengine/test10/rec-node-8.summary b/pengine/test10/rec-node-8.summary
index 1a7232e..bc23fb4 100644
--- a/pengine/test10/rec-node-8.summary
+++ b/pengine/test10/rec-node-8.summary
@@ -9,10 +9,10 @@ Online: [ node2 ]
  rsc3	(heartbeat:apache):	Stopped 
 
 Transition Summary:
- * Start   stonith-1	(node2 - blocked) 	due to quorum freeze
- * Stop    rsc1	(Started node1 - blocked)
- * Stop    rsc2	(Started node1 - blocked)
- * Start   rsc3	(node2 - blocked) 	due to quorum freeze
+ * Start      stonith-1     ( node2 )   due to quorum freeze (blocked)
+ * Stop       rsc1          ( node1 )   blocked
+ * Stop       rsc2          ( node1 )   blocked
+ * Start      rsc3          ( node2 )   due to quorum freeze (blocked)
 
 Executing cluster transition:
  * Resource action: stonith-1       monitor on node2
diff --git a/pengine/test10/rec-node-9.summary b/pengine/test10/rec-node-9.summary
index 7f6d8ae..545d16c 100644
--- a/pengine/test10/rec-node-9.summary
+++ b/pengine/test10/rec-node-9.summary
@@ -7,8 +7,8 @@ OFFLINE: [ node1 ]
  rsc2	(heartbeat:apache):	Stopped 
 
 Transition Summary:
- * Start   rsc1	(node2 - blocked) 	due to no quorum
- * Start   rsc2	(node2 - blocked) 	due to no quorum
+ * Start      rsc1    ( node2 )   due to no quorum (blocked)
+ * Start      rsc2    ( node2 )   due to no quorum (blocked)
 
 Executing cluster transition:
  * Resource action: rsc1            monitor on node2
diff --git a/pengine/test10/rec-rsc-1.summary b/pengine/test10/rec-rsc-1.summary
index 13e8f60..c8f27d6 100644
--- a/pengine/test10/rec-rsc-1.summary
+++ b/pengine/test10/rec-rsc-1.summary
@@ -5,7 +5,7 @@ Online: [ node1 node2 ]
  rsc1	(heartbeat:apache):	FAILED node1 
 
 Transition Summary:
- * Recover rsc1	(Started node1 -> node2)
+ * Recover    rsc1    ( node1 -> node2 )  
 
 Executing cluster transition:
  * Resource action: rsc1            monitor on node2
diff --git a/pengine/test10/rec-rsc-2.summary b/pengine/test10/rec-rsc-2.summary
index b639599..8dd3a5a 100644
--- a/pengine/test10/rec-rsc-2.summary
+++ b/pengine/test10/rec-rsc-2.summary
@@ -5,7 +5,7 @@ Online: [ node1 node2 ]
  rsc1	(heartbeat:apache):	FAILED node1 
 
 Transition Summary:
- * Recover rsc1	(Started node1)
+ * Recover    rsc1    ( node1 )  
 
 Executing cluster transition:
  * Resource action: rsc1            monitor on node2
diff --git a/pengine/test10/rec-rsc-5.summary b/pengine/test10/rec-rsc-5.summary
index 28e29b5..4717750 100644
--- a/pengine/test10/rec-rsc-5.summary
+++ b/pengine/test10/rec-rsc-5.summary
@@ -10,8 +10,8 @@ Online: [ node1 ]
 Transition Summary:
  * Fence (reboot) node2 'rsc1 failed there'
  * Start   stonith-1	(node1)
- * Recover rsc1	(Started node2 -> node1)
- * Move    rsc2	(Started node2 -> node1)
+ * Recover    rsc1          ( node2 -> node1 )  
+ * Move       rsc2          ( node2 -> node1 )  
 
 Executing cluster transition:
  * Resource action: stonith-1       monitor on node1
diff --git a/pengine/test10/rec-rsc-6.summary b/pengine/test10/rec-rsc-6.summary
index c782e98..40222fc 100644
--- a/pengine/test10/rec-rsc-6.summary
+++ b/pengine/test10/rec-rsc-6.summary
@@ -5,7 +5,7 @@ Online: [ node1 node2 ]
  rsc1	(heartbeat:apache):	Started [ node1 node2 ]
 
 Transition Summary:
- * Restart rsc1	(Started node1)
+ * Restart    rsc1    ( node1 )  
 
 Executing cluster transition:
  * Resource action: rsc1            stop on node2
diff --git a/pengine/test10/rec-rsc-9.summary b/pengine/test10/rec-rsc-9.summary
index 02a2fe5..f7beb14 100644
--- a/pengine/test10/rec-rsc-9.summary
+++ b/pengine/test10/rec-rsc-9.summary
@@ -9,9 +9,9 @@ Online: [ node1 ]
      rsc3	(heartbeat:apache):	FAILED node1 
 
 Transition Summary:
- * Restart rsc1	(Started node1) 	due to required bar running
- * Restart rsc2	(Started node1) 	due to required bar running
- * Recover rsc3	(Started node1)
+ * Restart    rsc1    ( node1 )   due to required bar running
+ * Restart    rsc2    ( node1 )   due to required bar running
+ * Recover    rsc3    ( node1 )  
 
 Executing cluster transition:
  * Resource action: rsc1            stop on node1
diff --git a/pengine/test10/remote-fence-before-reconnect.summary b/pengine/test10/remote-fence-before-reconnect.summary
index 7a22551..3aee89d 100644
--- a/pengine/test10/remote-fence-before-reconnect.summary
+++ b/pengine/test10/remote-fence-before-reconnect.summary
@@ -14,7 +14,7 @@ Online: [ c7auto1 c7auto2 c7auto3 ]
 Transition Summary:
  * Fence (reboot) c7auto4 'remote connection is unrecoverable'
  * Stop    c7auto4	(c7auto1)
- * Move    fake2	(Started c7auto4 -> c7auto1)
+ * Move       fake2       ( c7auto4 -> c7auto1 )  
 
 Executing cluster transition:
  * Fencing c7auto4 (reboot)
diff --git a/pengine/test10/remote-fence-unclean.summary b/pengine/test10/remote-fence-unclean.summary
index 9830b96..adfe730 100644
--- a/pengine/test10/remote-fence-unclean.summary
+++ b/pengine/test10/remote-fence-unclean.summary
@@ -12,10 +12,10 @@ Online: [ 18builder 18node1 18node2 ]
 
 Transition Summary:
  * Fence (reboot) remote1 'remote connection is unrecoverable'
- * Recover remote1	(Started 18node1)
- * Move    FAKE2	(Started remote1 -> 18builder)
- * Move    FAKE3	(Started 18builder -> 18node1)
- * Move    FAKE4	(Started 18node1 -> 18node2)
+ * Recover    remote1     (              18node1 )  
+ * Move       FAKE2       ( remote1 -> 18builder )  
+ * Move       FAKE3       ( 18builder -> 18node1 )  
+ * Move       FAKE4       (   18node1 -> 18node2 )  
 
 Executing cluster transition:
  * Resource action: FAKE3           stop on 18builder
diff --git a/pengine/test10/remote-move.summary b/pengine/test10/remote-move.summary
index de223fd..d876a3f 100644
--- a/pengine/test10/remote-move.summary
+++ b/pengine/test10/remote-move.summary
@@ -11,8 +11,8 @@ RemoteOnline: [ remote1 ]
  FAKE4	(ocf::heartbeat:Dummy):	Started 18node1 
 
 Transition Summary:
- * Move    shooter	(Started 18node1 -> 18builder)
- * Migrate remote1	(Started 18builder -> 18node1)
+ * Move       shooter     ( 18node1 -> 18builder )  
+ * Migrate    remote1     ( 18builder -> 18node1 )  
 
 Executing cluster transition:
  * Resource action: shooter         stop on 18node1
diff --git a/pengine/test10/remote-orphaned.summary b/pengine/test10/remote-orphaned.summary
index 2b9add7..f205007 100644
--- a/pengine/test10/remote-orphaned.summary
+++ b/pengine/test10/remote-orphaned.summary
@@ -25,7 +25,7 @@ RemoteOnline: [ remote1 ]
  remote1	(ocf::pacemaker:remote):	 ORPHANED Started 18node1 
 
 Transition Summary:
- * Move    rsc_18node2	(Started remote1 -> 18node1)
+ * Move       rsc_18node2     ( remote1 -> 18node1 )  
  * Stop    ping-1:2	(remote1)  	due to node availability
  * Stop    remote1	(18node1)  	due to node availability
 
diff --git a/pengine/test10/remote-partial-migrate.summary b/pengine/test10/remote-partial-migrate.summary
index e8abf92..7d28db4 100644
--- a/pengine/test10/remote-partial-migrate.summary
+++ b/pengine/test10/remote-partial-migrate.summary
@@ -62,22 +62,22 @@ RemoteOFFLINE: [ pcmk_remote5 ]
  FAKE50	(ocf::heartbeat:Dummy):	Stopped 
 
 Transition Summary:
- * Migrate pcmk_remote3	(Started pcmk1 -> pcmk2)
+ * Migrate    pcmk_remote3     (        pcmk1 -> pcmk2 )  
  * Start   FAKE4	(pcmk_remote3)
- * Move    FAKE9	(Started pcmk_remote3 -> pcmk1)
+ * Move       FAKE9            ( pcmk_remote3 -> pcmk1 )  
  * Start   FAKE10	(pcmk1)
  * Start   FAKE13	(pcmk2)
  * Start   FAKE15	(pcmk3)
- * Move    FAKE16	(Started pcmk1 -> pcmk_remote3)
+ * Move       FAKE16           ( pcmk1 -> pcmk_remote3 )  
  * Start   FAKE22	(pcmk1)
- * Move    FAKE23	(Started pcmk1 -> pcmk_remote1)
+ * Move       FAKE23           ( pcmk1 -> pcmk_remote1 )  
  * Start   FAKE26	(pcmk1)
  * Start   FAKE29	(pcmk2)
- * Move    FAKE30	(Started pcmk1 -> pcmk_remote2)
+ * Move       FAKE30           ( pcmk1 -> pcmk_remote2 )  
  * Start   FAKE36	(pcmk1)
- * Move    FAKE37	(Started pcmk1 -> pcmk2)
+ * Move       FAKE37           (        pcmk1 -> pcmk2 )  
  * Start   FAKE43	(pcmk1)
- * Move    FAKE44	(Started pcmk1 -> pcmk2)
+ * Move       FAKE44           (        pcmk1 -> pcmk2 )  
  * Start   FAKE50	(pcmk1)
 
 Executing cluster transition:
diff --git a/pengine/test10/remote-partial-migrate2.summary b/pengine/test10/remote-partial-migrate2.summary
index 17fee27..2a242bd 100644
--- a/pengine/test10/remote-partial-migrate2.summary
+++ b/pengine/test10/remote-partial-migrate2.summary
@@ -64,24 +64,24 @@ RemoteOFFLINE: [ pcmk_remote4 ]
 
 Transition Summary:
  * Fence (reboot) pcmk4 'peer is no longer part of the cluster'
- * Migrate pcmk_remote2	(Started pcmk3 -> pcmk1)
+ * Migrate    pcmk_remote2     (               pcmk3 -> pcmk1 )  
  * Start   pcmk_remote4	(pcmk2)
- * Migrate pcmk_remote5	(Started pcmk1 -> pcmk2)
- * Move    FAKE5	(Started pcmk1 -> pcmk_remote4)
- * Move    FAKE9	(Started pcmk2 -> pcmk_remote4)
- * Move    FAKE12	(Started pcmk1 -> pcmk2)
- * Move    FAKE14	(Started pcmk2 -> pcmk_remote1)
- * Move    FAKE17	(Started pcmk_remote1 -> pcmk_remote4)
- * Move    FAKE25	(Started pcmk_remote1 -> pcmk_remote4)
- * Move    FAKE28	(Started pcmk3 -> pcmk1)
- * Move    FAKE30	(Started pcmk1 -> pcmk_remote1)
- * Move    FAKE33	(Started pcmk_remote1 -> pcmk_remote4)
- * Move    FAKE38	(Started pcmk2 -> pcmk_remote1)
- * Move    FAKE39	(Started pcmk1 -> pcmk_remote2)
- * Move    FAKE41	(Started pcmk_remote2 -> pcmk_remote4)
- * Move    FAKE47	(Started pcmk_remote1 -> pcmk_remote2)
- * Move    FAKE48	(Started pcmk1 -> pcmk_remote3)
- * Move    FAKE49	(Started pcmk_remote3 -> pcmk_remote4)
+ * Migrate    pcmk_remote5     (               pcmk1 -> pcmk2 )  
+ * Move       FAKE5            (        pcmk1 -> pcmk_remote4 )  
+ * Move       FAKE9            (        pcmk2 -> pcmk_remote4 )  
+ * Move       FAKE12           (               pcmk1 -> pcmk2 )  
+ * Move       FAKE14           (        pcmk2 -> pcmk_remote1 )  
+ * Move       FAKE17           ( pcmk_remote1 -> pcmk_remote4 )  
+ * Move       FAKE25           ( pcmk_remote1 -> pcmk_remote4 )  
+ * Move       FAKE28           (               pcmk3 -> pcmk1 )  
+ * Move       FAKE30           (        pcmk1 -> pcmk_remote1 )  
+ * Move       FAKE33           ( pcmk_remote1 -> pcmk_remote4 )  
+ * Move       FAKE38           (        pcmk2 -> pcmk_remote1 )  
+ * Move       FAKE39           (        pcmk1 -> pcmk_remote2 )  
+ * Move       FAKE41           ( pcmk_remote2 -> pcmk_remote4 )  
+ * Move       FAKE47           ( pcmk_remote1 -> pcmk_remote2 )  
+ * Move       FAKE48           (        pcmk1 -> pcmk_remote3 )  
+ * Move       FAKE49           ( pcmk_remote3 -> pcmk_remote4 )  
 
 Executing cluster transition:
  * Resource action: FAKE5           stop on pcmk1
diff --git a/pengine/test10/remote-recover-all.summary b/pengine/test10/remote-recover-all.summary
index a8dac38..de31212 100644
--- a/pengine/test10/remote-recover-all.summary
+++ b/pengine/test10/remote-recover-all.summary
@@ -42,18 +42,18 @@ Transition Summary:
  * Fence (reboot) galera-2 'resources are active and the connection is unrecoverable'
  * Fence (reboot) controller-1 'peer is no longer part of the cluster'
  * Stop    messaging-1	(controller-1)  	due to node availability
- * Move    galera-0	(Started controller-1 -> controller-2)
+ * Move       galera-0                               ( controller-1 -> controller-2 )  
  * Stop    galera-2	(controller-1)  	due to node availability
  * Stop    rabbitmq:2	(messaging-1)  	due to node availability
- * Demote  galera:1	(Master -> Stopped galera-2)
- * Stop    redis:0	(controller-1)  	due to node availability
- * Move    ip-172.17.1.14	(Started controller-1 -> controller-2)
- * Move    ip-172.17.1.17	(Started controller-1 -> controller-2)
- * Move    ip-172.17.4.11	(Started controller-1 -> controller-2)
+ * Stop       galera:1                               (              Master galera-2 )   due to node availability
+ * Stop       redis:0                                (           Slave controller-1 )   due to node availability
+ * Move       ip-172.17.1.14                         ( controller-1 -> controller-2 )  
+ * Move       ip-172.17.1.17                         ( controller-1 -> controller-2 )  
+ * Move       ip-172.17.4.11                         ( controller-1 -> controller-2 )  
  * Stop    haproxy:0	(controller-1)  	due to node availability
- * Restart stonith-fence_ipmilan-525400bbf613	(Started controller-0)
- * Restart stonith-fence_ipmilan-525400b4f6bd	(Started controller-0)
- * Move    stonith-fence_ipmilan-5254005bdbb5	(Started controller-1 -> controller-2)
+ * Restart    stonith-fence_ipmilan-525400bbf613     (                 controller-0 )  
+ * Restart    stonith-fence_ipmilan-525400b4f6bd     (                 controller-0 )  
+ * Move       stonith-fence_ipmilan-5254005bdbb5     ( controller-1 -> controller-2 )  
 
 Executing cluster transition:
  * Pseudo action:   galera-master_demote_0
diff --git a/pengine/test10/remote-recover-connection.summary b/pengine/test10/remote-recover-connection.summary
index 7b5b5fc..8e91068 100644
--- a/pengine/test10/remote-recover-connection.summary
+++ b/pengine/test10/remote-recover-connection.summary
@@ -39,17 +39,17 @@ RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
 
 Transition Summary:
  * Fence (reboot) controller-1 'peer is no longer part of the cluster'
- * Move    messaging-1	(Started controller-1 -> controller-2)
- * Move    galera-0	(Started controller-1 -> controller-2)
- * Move    galera-2	(Started controller-1 -> controller-2)
- * Stop    redis:0	(controller-1)  	due to node availability
- * Move    ip-172.17.1.14	(Started controller-1 -> controller-2)
- * Move    ip-172.17.1.17	(Started controller-1 -> controller-2)
- * Move    ip-172.17.4.11	(Started controller-1 -> controller-2)
+ * Move       messaging-1                            ( controller-1 -> controller-2 )  
+ * Move       galera-0                               ( controller-1 -> controller-2 )  
+ * Move       galera-2                               ( controller-1 -> controller-2 )  
+ * Stop       redis:0                                (           Slave controller-1 )   due to node availability
+ * Move       ip-172.17.1.14                         ( controller-1 -> controller-2 )  
+ * Move       ip-172.17.1.17                         ( controller-1 -> controller-2 )  
+ * Move       ip-172.17.4.11                         ( controller-1 -> controller-2 )  
  * Stop    haproxy:0	(controller-1)  	due to node availability
- * Restart stonith-fence_ipmilan-525400bbf613	(Started controller-0)
- * Restart stonith-fence_ipmilan-525400b4f6bd	(Started controller-0)
- * Move    stonith-fence_ipmilan-5254005bdbb5	(Started controller-1 -> controller-2)
+ * Restart    stonith-fence_ipmilan-525400bbf613     (                 controller-0 )  
+ * Restart    stonith-fence_ipmilan-525400b4f6bd     (                 controller-0 )  
+ * Move       stonith-fence_ipmilan-5254005bdbb5     ( controller-1 -> controller-2 )  
 
 Executing cluster transition:
  * Pseudo action:   redis-master_pre_notify_stop_0
diff --git a/pengine/test10/remote-recover-fail.summary b/pengine/test10/remote-recover-fail.summary
index 302b716..d4e1aab 100644
--- a/pengine/test10/remote-recover-fail.summary
+++ b/pengine/test10/remote-recover-fail.summary
@@ -15,10 +15,10 @@ OFFLINE: [ rhel7-auto1 ]
 
 Transition Summary:
  * Fence (reboot) rhel7-auto4 'FAKE2 is thought to be active there'
- * Recover rhel7-auto4	(Started rhel7-auto2)
+ * Recover    rhel7-auto4     (                rhel7-auto2 )  
  * Start   FAKE1	(rhel7-auto2)
- * Move    FAKE2	(Started rhel7-auto4 -> rhel7-auto3)
- * Move    FAKE6	(Started rhel7-auto4 -> rhel7-auto2)
+ * Move       FAKE2           ( rhel7-auto4 -> rhel7-auto3 )  
+ * Move       FAKE6           ( rhel7-auto4 -> rhel7-auto2 )  
 
 Executing cluster transition:
  * Resource action: FAKE3           monitor=10000 on rhel7-auto2
diff --git a/pengine/test10/remote-recover-no-resources.summary b/pengine/test10/remote-recover-no-resources.summary
index 4383e81..c05e355 100644
--- a/pengine/test10/remote-recover-no-resources.summary
+++ b/pengine/test10/remote-recover-no-resources.summary
@@ -41,17 +41,17 @@ Transition Summary:
  * Fence (reboot) messaging-1 'resources are active and the connection is unrecoverable'
  * Fence (reboot) controller-1 'peer is no longer part of the cluster'
  * Stop    messaging-1	(controller-1)  	due to node availability
- * Move    galera-0	(Started controller-1 -> controller-2)
+ * Move       galera-0                               ( controller-1 -> controller-2 )  
  * Stop    galera-2	(controller-1)
  * Stop    rabbitmq:2	(messaging-1)  	due to node availability
- * Stop    redis:0	(controller-1)  	due to node availability
- * Move    ip-172.17.1.14	(Started controller-1 -> controller-2)
- * Move    ip-172.17.1.17	(Started controller-1 -> controller-2)
- * Move    ip-172.17.4.11	(Started controller-1 -> controller-2)
+ * Stop       redis:0                                (           Slave controller-1 )   due to node availability
+ * Move       ip-172.17.1.14                         ( controller-1 -> controller-2 )  
+ * Move       ip-172.17.1.17                         ( controller-1 -> controller-2 )  
+ * Move       ip-172.17.4.11                         ( controller-1 -> controller-2 )  
  * Stop    haproxy:0	(controller-1)  	due to node availability
- * Restart stonith-fence_ipmilan-525400bbf613	(Started controller-0)
- * Restart stonith-fence_ipmilan-525400b4f6bd	(Started controller-0)
- * Move    stonith-fence_ipmilan-5254005bdbb5	(Started controller-1 -> controller-2)
+ * Restart    stonith-fence_ipmilan-525400bbf613     (                 controller-0 )  
+ * Restart    stonith-fence_ipmilan-525400b4f6bd     (                 controller-0 )  
+ * Move       stonith-fence_ipmilan-5254005bdbb5     ( controller-1 -> controller-2 )  
 
 Executing cluster transition:
  * Pseudo action:   redis-master_pre_notify_stop_0
diff --git a/pengine/test10/remote-recover-unknown.summary b/pengine/test10/remote-recover-unknown.summary
index 3ffb5f4..bfbe7d3 100644
--- a/pengine/test10/remote-recover-unknown.summary
+++ b/pengine/test10/remote-recover-unknown.summary
@@ -42,17 +42,17 @@ Transition Summary:
  * Fence (reboot) messaging-1 'resources are active and the connection is unrecoverable'
  * Fence (reboot) controller-1 'peer is no longer part of the cluster'
  * Stop    messaging-1	(controller-1)  	due to node availability
- * Move    galera-0	(Started controller-1 -> controller-2)
+ * Move       galera-0                               ( controller-1 -> controller-2 )  
  * Stop    galera-2	(controller-1)  	due to node availability
  * Stop    rabbitmq:2	(messaging-1)  	due to node availability
- * Stop    redis:0	(controller-1)  	due to node availability
- * Move    ip-172.17.1.14	(Started controller-1 -> controller-2)
- * Move    ip-172.17.1.17	(Started controller-1 -> controller-2)
- * Move    ip-172.17.4.11	(Started controller-1 -> controller-2)
+ * Stop       redis:0                                (           Slave controller-1 )   due to node availability
+ * Move       ip-172.17.1.14                         ( controller-1 -> controller-2 )  
+ * Move       ip-172.17.1.17                         ( controller-1 -> controller-2 )  
+ * Move       ip-172.17.4.11                         ( controller-1 -> controller-2 )  
  * Stop    haproxy:0	(controller-1)  	due to node availability
- * Restart stonith-fence_ipmilan-525400bbf613	(Started controller-0)
- * Restart stonith-fence_ipmilan-525400b4f6bd	(Started controller-0)
- * Move    stonith-fence_ipmilan-5254005bdbb5	(Started controller-1 -> controller-2)
+ * Restart    stonith-fence_ipmilan-525400bbf613     (                 controller-0 )  
+ * Restart    stonith-fence_ipmilan-525400b4f6bd     (                 controller-0 )  
+ * Move       stonith-fence_ipmilan-5254005bdbb5     ( controller-1 -> controller-2 )  
 
 Executing cluster transition:
  * Pseudo action:   redis-master_pre_notify_stop_0
diff --git a/pengine/test10/remote-recovery.summary b/pengine/test10/remote-recovery.summary
index 7b5b5fc..8e91068 100644
--- a/pengine/test10/remote-recovery.summary
+++ b/pengine/test10/remote-recovery.summary
@@ -39,17 +39,17 @@ RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
 
 Transition Summary:
  * Fence (reboot) controller-1 'peer is no longer part of the cluster'
- * Move    messaging-1	(Started controller-1 -> controller-2)
- * Move    galera-0	(Started controller-1 -> controller-2)
- * Move    galera-2	(Started controller-1 -> controller-2)
- * Stop    redis:0	(controller-1)  	due to node availability
- * Move    ip-172.17.1.14	(Started controller-1 -> controller-2)
- * Move    ip-172.17.1.17	(Started controller-1 -> controller-2)
- * Move    ip-172.17.4.11	(Started controller-1 -> controller-2)
+ * Move       messaging-1                            ( controller-1 -> controller-2 )  
+ * Move       galera-0                               ( controller-1 -> controller-2 )  
+ * Move       galera-2                               ( controller-1 -> controller-2 )  
+ * Stop       redis:0                                (           Slave controller-1 )   due to node availability
+ * Move       ip-172.17.1.14                         ( controller-1 -> controller-2 )  
+ * Move       ip-172.17.1.17                         ( controller-1 -> controller-2 )  
+ * Move       ip-172.17.4.11                         ( controller-1 -> controller-2 )  
  * Stop    haproxy:0	(controller-1)  	due to node availability
- * Restart stonith-fence_ipmilan-525400bbf613	(Started controller-0)
- * Restart stonith-fence_ipmilan-525400b4f6bd	(Started controller-0)
- * Move    stonith-fence_ipmilan-5254005bdbb5	(Started controller-1 -> controller-2)
+ * Restart    stonith-fence_ipmilan-525400bbf613     (                 controller-0 )  
+ * Restart    stonith-fence_ipmilan-525400b4f6bd     (                 controller-0 )  
+ * Move       stonith-fence_ipmilan-5254005bdbb5     ( controller-1 -> controller-2 )  
 
 Executing cluster transition:
  * Pseudo action:   redis-master_pre_notify_stop_0
diff --git a/pengine/test10/remote-start-fail.summary b/pengine/test10/remote-start-fail.summary
index 4f64c75..aa08600 100644
--- a/pengine/test10/remote-start-fail.summary
+++ b/pengine/test10/remote-start-fail.summary
@@ -7,7 +7,7 @@ RemoteOFFLINE: [ rhel7-auto4 ]
  rhel7-auto4	(ocf::pacemaker:remote):	FAILED rhel7-auto2 
 
 Transition Summary:
- * Recover rhel7-auto4	(Started rhel7-auto2 -> rhel7-auto3)
+ * Recover    rhel7-auto4     ( rhel7-auto2 -> rhel7-auto3 )  
 
 Executing cluster transition:
  * Resource action: rhel7-auto4     stop on rhel7-auto2
diff --git a/pengine/test10/remote-startup-probes.summary b/pengine/test10/remote-startup-probes.summary
index d7a382e..f47bf47 100644
--- a/pengine/test10/remote-startup-probes.summary
+++ b/pengine/test10/remote-startup-probes.summary
@@ -12,8 +12,8 @@ RemoteOFFLINE: [ remote1 ]
 
 Transition Summary:
  * Start   remote1	(18builder)
- * Move    FAKE1	(Started 18builder -> 18node2)
- * Move    FAKE2	(Started 18node2 -> remote1)
+ * Move       FAKE1       ( 18builder -> 18node2 )  
+ * Move       FAKE2       (   18node2 -> remote1 )  
 
 Executing cluster transition:
  * Resource action: remote1         start on 18builder
diff --git a/pengine/test10/remote-startup.summary b/pengine/test10/remote-startup.summary
index 56c9a95..4eb6887 100644
--- a/pengine/test10/remote-startup.summary
+++ b/pengine/test10/remote-startup.summary
@@ -8,7 +8,7 @@ Online: [ 18builder 18node1 18node2 ]
  remote1	(ocf::pacemaker:remote):	Stopped 
 
 Transition Summary:
- * Move    shooter	(Started 18builder -> 18node1)
+ * Move       shooter     ( 18builder -> 18node1 )  
  * Start   fake	(18node2)
  * Start   remote1	(18builder)
 
diff --git a/pengine/test10/remote-unclean2.summary b/pengine/test10/remote-unclean2.summary
index 1408c09..e1666b5 100644
--- a/pengine/test10/remote-unclean2.summary
+++ b/pengine/test10/remote-unclean2.summary
@@ -8,7 +8,7 @@ Online: [ rhel7-auto1 rhel7-auto2 rhel7-auto3 ]
 
 Transition Summary:
  * Fence (reboot) rhel7-auto4 'remote connection is unrecoverable'
- * Recover rhel7-auto4	(Started rhel7-auto1)
+ * Recover    rhel7-auto4     ( rhel7-auto1 )  
 
 Executing cluster transition:
  * Resource action: rhel7-auto4     stop on rhel7-auto1
diff --git a/pengine/test10/rsc-discovery-per-node.summary b/pengine/test10/rsc-discovery-per-node.summary
index ea82c3e..13dff85 100644
--- a/pengine/test10/rsc-discovery-per-node.summary
+++ b/pengine/test10/rsc-discovery-per-node.summary
@@ -18,9 +18,9 @@ RemoteOFFLINE: [ remote1 ]
 Transition Summary:
  * Start   remote1	(18builder)
  * Start   FAKE1	(18node2)
- * Move    FAKE2	(Started 18node2 -> 18node3)
- * Move    FAKE3	(Started 18builder -> 18node4)
- * Move    FAKE4	(Started 18node1 -> remote1)
+ * Move       FAKE2            (   18node2 -> 18node3 )  
+ * Move       FAKE3            ( 18builder -> 18node4 )  
+ * Move       FAKE4            (   18node1 -> remote1 )  
  * Start   FAKE5	(18builder)
  * Start   FAKECLONE1:0	(18node1)
  * Start   FAKECLONE1:1	(18node2)
diff --git a/pengine/test10/rsc-sets-clone-1.summary b/pengine/test10/rsc-sets-clone-1.summary
index afafc55..211ad97 100644
--- a/pengine/test10/rsc-sets-clone-1.summary
+++ b/pengine/test10/rsc-sets-clone-1.summary
@@ -16,7 +16,7 @@ Online: [ sys2 sys3 ]
      Stopped (disabled): [ sys2 sys3 ]
 
 Transition Summary:
- * Restart stonithsys3	(Started sys2)
+ * Restart    stonithsys3     (  sys2 )  
  * Start   controld:1	(sys3)
  * Start   clvmd:1	(sys3)
  * Start   o2cb:1	(sys3)
diff --git a/pengine/test10/rsc-sets-clone.summary b/pengine/test10/rsc-sets-clone.summary
index 70570e6..43f9e0f 100644
--- a/pengine/test10/rsc-sets-clone.summary
+++ b/pengine/test10/rsc-sets-clone.summary
@@ -10,8 +10,8 @@ Online: [ node2 ]
      Started: [ node1 node2 ]
 
 Transition Summary:
- * Move    rsc1	(Started node1 -> node2)
- * Move    rsc3	(Started node1 -> node2)
+ * Move       rsc1    ( node1 -> node2 )  
+ * Move       rsc3    ( node1 -> node2 )  
  * Stop    rsc:0	(node1)  	due to node availability
 
 Executing cluster transition:
diff --git a/pengine/test10/rsc-sets-master.summary b/pengine/test10/rsc-sets-master.summary
index 5415cda..126edc7 100644
--- a/pengine/test10/rsc-sets-master.summary
+++ b/pengine/test10/rsc-sets-master.summary
@@ -11,11 +11,11 @@ Online: [ node2 ]
  rsc3	(ocf::pacemaker:Dummy):	Started node1
 
 Transition Summary:
- * Demote  rsc:0	(Master -> Stopped node1)
+ * Stop       rsc:0   (          Master node1 )   due to node availability
  * Promote rsc:1	(Slave -> Master node2)
- * Move    rsc1	(Started node1 -> node2)
- * Move    rsc2	(Started node1 -> node2)
- * Move    rsc3	(Started node1 -> node2)
+ * Move       rsc1    (        node1 -> node2 )  
+ * Move       rsc2    (        node1 -> node2 )  
+ * Move       rsc3    (        node1 -> node2 )  
 
 Executing cluster transition:
  * Resource action: rsc1            stop on node1
diff --git a/pengine/test10/rsc-sets-seq-false.summary b/pengine/test10/rsc-sets-seq-false.summary
index 2d6dccf..5774f69 100644
--- a/pengine/test10/rsc-sets-seq-false.summary
+++ b/pengine/test10/rsc-sets-seq-false.summary
@@ -11,12 +11,12 @@ Online: [ node2 ]
  rsc6	(ocf::pacemaker:Dummy):	Started node1
 
 Transition Summary:
- * Move    rsc1	(Started node1 -> node2)
- * Move    rsc2	(Started node1 -> node2)
- * Move    rsc3	(Started node1 -> node2)
- * Move    rsc4	(Started node1 -> node2)
- * Move    rsc5	(Started node1 -> node2)
- * Move    rsc6	(Started node1 -> node2)
+ * Move       rsc1    ( node1 -> node2 )  
+ * Move       rsc2    ( node1 -> node2 )  
+ * Move       rsc3    ( node1 -> node2 )  
+ * Move       rsc4    ( node1 -> node2 )  
+ * Move       rsc5    ( node1 -> node2 )  
+ * Move       rsc6    ( node1 -> node2 )  
 
 Executing cluster transition:
  * Resource action: rsc4            stop on node1
diff --git a/pengine/test10/rsc-sets-seq-true.summary b/pengine/test10/rsc-sets-seq-true.summary
index e4fca51..aba86c6 100644
--- a/pengine/test10/rsc-sets-seq-true.summary
+++ b/pengine/test10/rsc-sets-seq-true.summary
@@ -11,12 +11,12 @@ Online: [ node2 ]
  rsc6	(ocf::pacemaker:Dummy):	Started node1
 
 Transition Summary:
- * Move    rsc1	(Started node1 -> node2)
- * Move    rsc2	(Started node1 -> node2)
- * Move    rsc3	(Started node1 -> node2)
- * Move    rsc4	(Started node1 -> node2)
- * Move    rsc5	(Started node1 -> node2)
- * Move    rsc6	(Started node1 -> node2)
+ * Move       rsc1    ( node1 -> node2 )  
+ * Move       rsc2    ( node1 -> node2 )  
+ * Move       rsc3    ( node1 -> node2 )  
+ * Move       rsc4    ( node1 -> node2 )  
+ * Move       rsc5    ( node1 -> node2 )  
+ * Move       rsc6    ( node1 -> node2 )  
 
 Executing cluster transition:
  * Resource action: rsc6            stop on node1
diff --git a/pengine/test10/rsc_dep4.summary b/pengine/test10/rsc_dep4.summary
index 2fe21cf..b911b46 100644
--- a/pengine/test10/rsc_dep4.summary
+++ b/pengine/test10/rsc_dep4.summary
@@ -9,7 +9,7 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Start   rsc2	(node1)
- * Move    rsc4	(Started node1 -> node2)
+ * Move       rsc4    ( node1 -> node2 )  
  * Start   rsc3	(node2)
 
 Executing cluster transition:
diff --git a/pengine/test10/standby.summary b/pengine/test10/standby.summary
index 89534cb..f4d53a1 100644
--- a/pengine/test10/standby.summary
+++ b/pengine/test10/standby.summary
@@ -20,14 +20,14 @@ Online: [ sapcl01 ]
      oralsnr_25	(ocf::heartbeat:oralsnr):	Started sapcl03
 
 Transition Summary:
- * Move    IPaddr_192_168_1_102	(Started sapcl02 -> sapcl01)
- * Move    LVM_12	(Started sapcl02 -> sapcl01)
- * Move    Filesystem_13	(Started sapcl02 -> sapcl01)
- * Move    IPaddr_192_168_1_104	(Started sapcl03 -> sapcl01)
- * Move    LVM_22	(Started sapcl03 -> sapcl01)
- * Move    Filesystem_23	(Started sapcl03 -> sapcl01)
- * Move    oracle_24	(Started sapcl03 -> sapcl01)
- * Move    oralsnr_25	(Started sapcl03 -> sapcl01)
+ * Move       IPaddr_192_168_1_102     ( sapcl02 -> sapcl01 )  
+ * Move       LVM_12                   ( sapcl02 -> sapcl01 )  
+ * Move       Filesystem_13            ( sapcl02 -> sapcl01 )  
+ * Move       IPaddr_192_168_1_104     ( sapcl03 -> sapcl01 )  
+ * Move       LVM_22                   ( sapcl03 -> sapcl01 )  
+ * Move       Filesystem_23            ( sapcl03 -> sapcl01 )  
+ * Move       oracle_24                ( sapcl03 -> sapcl01 )  
+ * Move       oralsnr_25               ( sapcl03 -> sapcl01 )  
 
 Executing cluster transition:
  * Pseudo action:   app02_stop_0
diff --git a/pengine/test10/start-then-stop-with-unfence.summary b/pengine/test10/start-then-stop-with-unfence.summary
index 5e127f7..2e02a21 100644
--- a/pengine/test10/start-then-stop-with-unfence.summary
+++ b/pengine/test10/start-then-stop-with-unfence.summary
@@ -13,7 +13,7 @@ Online: [ rhel7-node1.example.com rhel7-node2.example.com ]
 Transition Summary:
  * Fence (on) rhel7-node1.example.com 'Required by ip1'
  * Start   mpath-node1	(rhel7-node1.example.com)
- * Move    ip1	(Started rhel7-node2.example.com -> rhel7-node1.example.com)
+ * Move       ip1             ( rhel7-node2.example.com -> rhel7-node1.example.com )  
  * Start   jrummy:1	(rhel7-node1.example.com)
 
 Executing cluster transition:
diff --git a/pengine/test10/stonith-0.summary b/pengine/test10/stonith-0.summary
index 1062520..78f0bbc 100644
--- a/pengine/test10/stonith-0.summary
+++ b/pengine/test10/stonith-0.summary
@@ -39,11 +39,11 @@ Online: [ c001n02 c001n04 c001n06 c001n07 c001n08 ]
 Transition Summary:
  * Fence (reboot) c001n05 'ocf_192.168.100.183 failed there'
  * Fence (reboot) c001n03 'ocf_192.168.100.183 failed there'
- * Move    ocf_192.168.100.181	(Started c001n03 -> c001n02)
- * Move    heartbeat_192.168.100.182	(Started c001n03 -> c001n02)
- * Recover ocf_192.168.100.183	(Started c001n03 -> c001n02)
- * Move    rsc_c001n05	(Started c001n05 -> c001n07)
- * Move    rsc_c001n07	(Started c001n03 -> c001n07)
+ * Move       ocf_192.168.100.181           ( c001n03 -> c001n02 )  
+ * Move       heartbeat_192.168.100.182     ( c001n03 -> c001n02 )  
+ * Recover    ocf_192.168.100.183           ( c001n03 -> c001n02 )  
+ * Move       rsc_c001n05                   ( c001n05 -> c001n07 )  
+ * Move       rsc_c001n07                   ( c001n03 -> c001n07 )  
 
 Executing cluster transition:
  * Resource action: child_DoFencing:4 monitor=20000 on c001n08
diff --git a/pengine/test10/stonith-1.summary b/pengine/test10/stonith-1.summary
index 03c8a39..0e9c2a1 100644
--- a/pengine/test10/stonith-1.summary
+++ b/pengine/test10/stonith-1.summary
@@ -30,15 +30,15 @@ Online: [ sles-1 sles-2 sles-4 ]
 Transition Summary:
  * Fence (reboot) sles-3 'peer is no longer part of the cluster'
  * Start   r192.168.100.183	(sles-1)
- * Move    migrator	(Started sles-3 -> sles-4)
- * Move    rsc_sles-3	(Started sles-3 -> sles-4)
- * Move    child_DoFencing:2	(Started sles-3 -> sles-4)
+ * Move       migrator             (       sles-3 -> sles-4 )  
+ * Move       rsc_sles-3           (       sles-3 -> sles-4 )  
+ * Move       child_DoFencing:2    (       sles-3 -> sles-4 )  
  * Start   ocf_msdummy:0	(sles-4)
  * Start   ocf_msdummy:1	(sles-1)
- * Move    ocf_msdummy:2	(Slave sles-3 -> sles-2)
+ * Move       ocf_msdummy:2        ( sles-3 -> sles-2 Slave )  
  * Start   ocf_msdummy:3	(sles-4)
  * Start   ocf_msdummy:4	(sles-1)
- * Move    ocf_msdummy:5	(Slave sles-3 -> sles-2)
+ * Move       ocf_msdummy:5        ( sles-3 -> sles-2 Slave )  
 
 Executing cluster transition:
  * Pseudo action:   group-1_start_0
diff --git a/pengine/test10/stonith-4.summary b/pengine/test10/stonith-4.summary
index 76b1f44..7502dad 100644
--- a/pengine/test10/stonith-4.summary
+++ b/pengine/test10/stonith-4.summary
@@ -18,7 +18,7 @@ Transition Summary:
  * Fence (reboot) pcmk-8 'peer has not been seen by the cluster'
  * Fence (reboot) pcmk-7 'peer failed the pacemaker membership criteria'
  * Fence (reboot) pcmk-5 'peer has not been seen by the cluster'
- * Start   Fencing	(pcmk-1 - blocked)
+ * Start      Fencing     ( pcmk-1 )   blocked
 
 Executing cluster transition:
  * Fencing pcmk-10 (reboot)
diff --git a/pengine/test10/stop-failure-no-quorum.summary b/pengine/test10/stop-failure-no-quorum.summary
index 75945b1..52ec84f 100644
--- a/pengine/test10/stop-failure-no-quorum.summary
+++ b/pengine/test10/stop-failure-no-quorum.summary
@@ -16,11 +16,11 @@ Online: [ pcmk-1 ]
 
 Transition Summary:
  * Fence (reboot) pcmk-2 'clvm:0 failed there'
- * Start   dlm:0	(pcmk-1 - blocked) 	due to no quorum
+ * Start      dlm:0         ( pcmk-1 )   due to no quorum (blocked)
  * Stop    clvm:0	(pcmk-2)  	due to node availability
- * Start   clvm:2	(pcmk-1 - blocked) 	due to no quorum
- * Start   ClusterIP	(pcmk-1 - blocked) 	due to no quorum
- * Start   Fencing	(pcmk-1 - blocked) 	due to no quorum
+ * Start      clvm:2        ( pcmk-1 )   due to no quorum (blocked)
+ * Start      ClusterIP     ( pcmk-1 )   due to no quorum (blocked)
+ * Start      Fencing       ( pcmk-1 )   due to no quorum (blocked)
 
 Executing cluster transition:
  * Fencing pcmk-2 (reboot)
diff --git a/pengine/test10/stop-failure-with-fencing.summary b/pengine/test10/stop-failure-with-fencing.summary
index 09680c8..50c5f97 100644
--- a/pengine/test10/stop-failure-with-fencing.summary
+++ b/pengine/test10/stop-failure-with-fencing.summary
@@ -15,11 +15,11 @@ Online: [ pcmk-1 ]
 
 Transition Summary:
  * Fence (reboot) pcmk-2 'clvm:0 failed there'
- * Start   dlm:0	(pcmk-1 - blocked) 	due to no quorum
+ * Start      dlm:0         ( pcmk-1 )   due to no quorum (blocked)
  * Stop    clvm:0	(pcmk-2)  	due to node availability
- * Start   clvm:1	(pcmk-1 - blocked) 	due to no quorum
- * Start   ClusterIP	(pcmk-1 - blocked) 	due to no quorum
- * Start   Fencing	(pcmk-1 - blocked) 	due to no quorum
+ * Start      clvm:1        ( pcmk-1 )   due to no quorum (blocked)
+ * Start      ClusterIP     ( pcmk-1 )   due to no quorum (blocked)
+ * Start      Fencing       ( pcmk-1 )   due to no quorum (blocked)
 
 Executing cluster transition:
  * Resource action: Fencing         monitor on pcmk-1
diff --git a/pengine/test10/stopped-monitor-01.summary b/pengine/test10/stopped-monitor-01.summary
index 43cc177..7baf2b9 100644
--- a/pengine/test10/stopped-monitor-01.summary
+++ b/pengine/test10/stopped-monitor-01.summary
@@ -5,7 +5,7 @@ Online: [ node1 node2 ]
  rsc1	(ocf::pacemaker:Dummy):	FAILED node1 
 
 Transition Summary:
- * Recover rsc1	(Started node1)
+ * Recover    rsc1    ( node1 )  
 
 Executing cluster transition:
  * Resource action: rsc1            stop on node1
diff --git a/pengine/test10/stopped-monitor-02.summary b/pengine/test10/stopped-monitor-02.summary
index 6d97bfb..e1d44b5 100644
--- a/pengine/test10/stopped-monitor-02.summary
+++ b/pengine/test10/stopped-monitor-02.summary
@@ -5,7 +5,7 @@ Online: [ node1 node2 ]
  rsc1	(ocf::pacemaker:Dummy):	FAILED [ node1 node2 ]
 
 Transition Summary:
- * Recover rsc1	(Started node1)
+ * Recover    rsc1    ( node1 )  
 
 Executing cluster transition:
  * Resource action: rsc1            stop on node1
diff --git a/pengine/test10/stopped-monitor-08.summary b/pengine/test10/stopped-monitor-08.summary
index 6646859..a15a906 100644
--- a/pengine/test10/stopped-monitor-08.summary
+++ b/pengine/test10/stopped-monitor-08.summary
@@ -6,7 +6,7 @@ Online: [ node2 ]
  rsc1	(ocf::pacemaker:Dummy):	Started node1
 
 Transition Summary:
- * Move    rsc1	(Started node1 -> node2)
+ * Move       rsc1    ( node1 -> node2 )  
 
 Executing cluster transition:
  * Resource action: rsc1            stop on node1
diff --git a/pengine/test10/ticket-master-14.summary b/pengine/test10/ticket-master-14.summary
index 9a42d78..fa14935 100644
--- a/pengine/test10/ticket-master-14.summary
+++ b/pengine/test10/ticket-master-14.summary
@@ -8,8 +8,8 @@ Online: [ node1 node2 ]
      Slaves: [ node2 ]
 
 Transition Summary:
- * Demote  rsc1:0	(Master -> Stopped node1)
- * Stop    rsc1:1	(node2)  	due to node availability
+ * Stop       rsc1:0     ( Master node1 )   due to node availability
+ * Stop       rsc1:1     (  Slave node2 )   due to node availability
 
 Executing cluster transition:
  * Pseudo action:   ms1_demote_0
diff --git a/pengine/test10/ticket-master-15.summary b/pengine/test10/ticket-master-15.summary
index 9a42d78..fa14935 100644
--- a/pengine/test10/ticket-master-15.summary
+++ b/pengine/test10/ticket-master-15.summary
@@ -8,8 +8,8 @@ Online: [ node1 node2 ]
      Slaves: [ node2 ]
 
 Transition Summary:
- * Demote  rsc1:0	(Master -> Stopped node1)
- * Stop    rsc1:1	(node2)  	due to node availability
+ * Stop       rsc1:0     ( Master node1 )   due to node availability
+ * Stop       rsc1:1     (  Slave node2 )   due to node availability
 
 Executing cluster transition:
  * Pseudo action:   ms1_demote_0
diff --git a/pengine/test10/ticket-master-2.summary b/pengine/test10/ticket-master-2.summary
index 96a797e..6f5be53 100644
--- a/pengine/test10/ticket-master-2.summary
+++ b/pengine/test10/ticket-master-2.summary
@@ -8,7 +8,6 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Start   rsc1:0	(node2)
- * Start   rsc1:1	(node1)
  * Promote rsc1:1	(Stopped -> Master node1)
 
 Executing cluster transition:
diff --git a/pengine/test10/ticket-master-21.summary b/pengine/test10/ticket-master-21.summary
index 8fc50eb..88f62fd 100644
--- a/pengine/test10/ticket-master-21.summary
+++ b/pengine/test10/ticket-master-21.summary
@@ -9,8 +9,8 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Fence (reboot) node1 'deadman ticket was lost'
- * Move    rsc_stonith	(Started node1 -> node2)
- * Demote  rsc1:0	(Master -> Stopped node1)
+ * Move       rsc_stonith     ( node1 -> node2 )  
+ * Stop       rsc1:0          (   Master node1 )   due to node availability
 
 Executing cluster transition:
  * Pseudo action:   rsc_stonith_stop_0
diff --git a/pengine/test10/ticket-master-3.summary b/pengine/test10/ticket-master-3.summary
index 9a42d78..fa14935 100644
--- a/pengine/test10/ticket-master-3.summary
+++ b/pengine/test10/ticket-master-3.summary
@@ -8,8 +8,8 @@ Online: [ node1 node2 ]
      Slaves: [ node2 ]
 
 Transition Summary:
- * Demote  rsc1:0	(Master -> Stopped node1)
- * Stop    rsc1:1	(node2)  	due to node availability
+ * Stop       rsc1:0     ( Master node1 )   due to node availability
+ * Stop       rsc1:1     (  Slave node2 )   due to node availability
 
 Executing cluster transition:
  * Pseudo action:   ms1_demote_0
diff --git a/pengine/test10/ticket-master-9.summary b/pengine/test10/ticket-master-9.summary
index 8fc50eb..88f62fd 100644
--- a/pengine/test10/ticket-master-9.summary
+++ b/pengine/test10/ticket-master-9.summary
@@ -9,8 +9,8 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Fence (reboot) node1 'deadman ticket was lost'
- * Move    rsc_stonith	(Started node1 -> node2)
- * Demote  rsc1:0	(Master -> Stopped node1)
+ * Move       rsc_stonith     ( node1 -> node2 )  
+ * Stop       rsc1:0          (   Master node1 )   due to node availability
 
 Executing cluster transition:
  * Pseudo action:   rsc_stonith_stop_0
diff --git a/pengine/test10/unfence-definition.summary b/pengine/test10/unfence-definition.summary
index f728e39..4ca9344 100644
--- a/pengine/test10/unfence-definition.summary
+++ b/pengine/test10/unfence-definition.summary
@@ -15,10 +15,10 @@ Transition Summary:
  * Fence (reboot) virt-4 'node is unclean'
  * Fence (on) virt-3 'Required by dlm:2'
  * Fence (on) virt-1 'Device definition changed'
- * Restart fencing	(Started virt-1)
- * Restart dlm:0	(Started virt-1) 	due to required stonith
+ * Restart    fencing     ( virt-1 )  
+ * Restart    dlm:0       ( virt-1 )   due to required stonith
  * Start   dlm:2	(virt-3)
- * Restart clvmd:0	(Started virt-1) 	due to required stonith
+ * Restart    clvmd:0     ( virt-1 )   due to required stonith
  * Start   clvmd:1	(virt-2)
  * Start   clvmd:2	(virt-3)
 
diff --git a/pengine/test10/unfence-parameters.summary b/pengine/test10/unfence-parameters.summary
index e8b15ec..8a6356c 100644
--- a/pengine/test10/unfence-parameters.summary
+++ b/pengine/test10/unfence-parameters.summary
@@ -16,11 +16,11 @@ Transition Summary:
  * Fence (on) virt-3 'Device parameters changed (reload)'
  * Fence (on) virt-2 'Device parameters changed (reload)'
  * Fence (on) virt-1 'Device parameters changed (reload)'
- * Restart fencing	(Started virt-1)
- * Restart dlm:0	(Started virt-1) 	due to required stonith
- * Restart dlm:1	(Started virt-2) 	due to required stonith
+ * Restart    fencing     ( virt-1 )  
+ * Restart    dlm:0       ( virt-1 )   due to required stonith
+ * Restart    dlm:1       ( virt-2 )   due to required stonith
  * Start   dlm:2	(virt-3)
- * Restart clvmd:0	(Started virt-1) 	due to required stonith
+ * Restart    clvmd:0     ( virt-1 )   due to required stonith
  * Start   clvmd:1	(virt-2)
  * Start   clvmd:2	(virt-3)
 
diff --git a/pengine/test10/unmanaged-block-restart.summary b/pengine/test10/unmanaged-block-restart.summary
index 01dffeb..d7725c9 100644
--- a/pengine/test10/unmanaged-block-restart.summary
+++ b/pengine/test10/unmanaged-block-restart.summary
@@ -10,8 +10,8 @@ Online: [ yingying.site ]
 
 Transition Summary:
  * Start   rsc1	(yingying.site)
- * Stop    rsc2	(Started yingying.site - blocked) 	due to required rsc1 start
- * Stop    rsc3	(Started yingying.site - blocked) 	due to required rsc2 start
+ * Stop       rsc2    ( yingying.site )   due to required rsc1 start (blocked)
+ * Stop       rsc3    ( yingying.site )   due to required rsc2 start (blocked)
 
 Executing cluster transition:
  * Pseudo action:   group1_stop_0
diff --git a/pengine/test10/unmanaged-stop-1.summary b/pengine/test10/unmanaged-stop-1.summary
index 94e0908..b02c7dc 100644
--- a/pengine/test10/unmanaged-stop-1.summary
+++ b/pengine/test10/unmanaged-stop-1.summary
@@ -7,7 +7,7 @@ Online: [ yingying.site ]
  rsc2	(ocf::pacemaker:Dummy):	FAILED yingying.site ( blocked ) 
 
 Transition Summary:
- * Stop    rsc1	(yingying.site - blocked)  	due to node availability
+ * Stop       rsc1    ( yingying.site )   due to node availability (blocked)
 
 Executing cluster transition:
 
diff --git a/pengine/test10/unmanaged-stop-2.summary b/pengine/test10/unmanaged-stop-2.summary
index 94e0908..b02c7dc 100644
--- a/pengine/test10/unmanaged-stop-2.summary
+++ b/pengine/test10/unmanaged-stop-2.summary
@@ -7,7 +7,7 @@ Online: [ yingying.site ]
  rsc2	(ocf::pacemaker:Dummy):	FAILED yingying.site ( blocked ) 
 
 Transition Summary:
- * Stop    rsc1	(yingying.site - blocked)  	due to node availability
+ * Stop       rsc1    ( yingying.site )   due to node availability (blocked)
 
 Executing cluster transition:
 
diff --git a/pengine/test10/unmanaged-stop-3.summary b/pengine/test10/unmanaged-stop-3.summary
index c72d451..d457157 100644
--- a/pengine/test10/unmanaged-stop-3.summary
+++ b/pengine/test10/unmanaged-stop-3.summary
@@ -8,7 +8,7 @@ Online: [ yingying.site ]
      rsc2	(ocf::pacemaker:Dummy):	FAILED yingying.site ( disabled, blocked ) 
 
 Transition Summary:
- * Stop    rsc1	(yingying.site - blocked) unrunnable rsc2 stop 	due to node availability
+ * Stop       rsc1    ( yingying.site )   due to node availability (blocked)
 
 Executing cluster transition:
  * Pseudo action:   group1_stop_0
diff --git a/pengine/test10/unmanaged-stop-4.summary b/pengine/test10/unmanaged-stop-4.summary
index 2704e98..1ddd68b 100644
--- a/pengine/test10/unmanaged-stop-4.summary
+++ b/pengine/test10/unmanaged-stop-4.summary
@@ -9,7 +9,7 @@ Online: [ yingying.site ]
      rsc3	(ocf::heartbeat:Dummy):	Stopped ( disabled ) 
 
 Transition Summary:
- * Stop    rsc1	(yingying.site - blocked) unrunnable rsc2 stop 	due to node availability
+ * Stop       rsc1    ( yingying.site )   due to node availability (blocked)
 
 Executing cluster transition:
  * Pseudo action:   group1_stop_0
diff --git a/pengine/test10/unrunnable-1.summary b/pengine/test10/unrunnable-1.summary
index 8c27e45..54ca0d7 100644
--- a/pengine/test10/unrunnable-1.summary
+++ b/pengine/test10/unrunnable-1.summary
@@ -19,15 +19,15 @@ Online: [ c001n03 ]
      child_DoFencing:3	(stonith:ssh):	Stopped 
 
 Transition Summary:
- * Start   DcIPaddr	(c001n03 - blocked) 	due to no quorum
- * Start   child_192.168.100.181	(c001n03 - blocked) 	due to no quorum
- * Start   child_192.168.100.182	(c001n03 - blocked) 	due to no quorum
- * Start   child_192.168.100.183	(c001n03 - blocked) 	due to no quorum
- * Start   rsc_c001n08	(c001n03 - blocked) 	due to no quorum
- * Start   rsc_c001n02	(c001n03 - blocked) 	due to no quorum
- * Start   rsc_c001n03	(c001n03 - blocked) 	due to no quorum
- * Start   rsc_c001n01	(c001n03 - blocked) 	due to no quorum
- * Stop    child_DoFencing:1	(c001n02 - blocked)  	due to node availability
+ * Start      DcIPaddr                  ( c001n03 )   due to no quorum (blocked)
+ * Start      child_192.168.100.181     ( c001n03 )   due to no quorum (blocked)
+ * Start      child_192.168.100.182     ( c001n03 )   due to no quorum (blocked)
+ * Start      child_192.168.100.183     ( c001n03 )   due to no quorum (blocked)
+ * Start      rsc_c001n08               ( c001n03 )   due to no quorum (blocked)
+ * Start      rsc_c001n02               ( c001n03 )   due to no quorum (blocked)
+ * Start      rsc_c001n03               ( c001n03 )   due to no quorum (blocked)
+ * Start      rsc_c001n01               ( c001n03 )   due to no quorum (blocked)
+ * Stop       child_DoFencing:1         ( c001n02 )   due to node availability (blocked)
 
 Executing cluster transition:
  * Resource action: DcIPaddr        monitor on c001n03
diff --git a/pengine/test10/unrunnable-2.summary b/pengine/test10/unrunnable-2.summary
index b67f7cb..4bbacec 100644
--- a/pengine/test10/unrunnable-2.summary
+++ b/pengine/test10/unrunnable-2.summary
@@ -85,7 +85,7 @@ Online: [ overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 ]
      Stopped: [ overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 ]
 
 Transition Summary:
- * Start   openstack-cinder-volume	(overcloud-controller-2 - blocked) 	due to unrunnable openstack-cinder-scheduler-clone running
+ * Start      openstack-cinder-volume     ( overcloud-controller-2 )   due to unrunnable openstack-cinder-scheduler-clone running (blocked)
 
 Executing cluster transition:
 
diff --git a/pengine/test10/utilization-order2.summary b/pengine/test10/utilization-order2.summary
index db65a16..ad3fd38 100644
--- a/pengine/test10/utilization-order2.summary
+++ b/pengine/test10/utilization-order2.summary
@@ -10,7 +10,7 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Start   rsc4	(node1)
- * Move    rsc3	(Started node1 -> node2)
+ * Move       rsc3       ( node1 -> node2 )  
  * Stop    rsc2:0	(node1)  	due to node availability
  * Stop    rsc1	(node2)
 
diff --git a/pengine/test10/utilization-order3.summary b/pengine/test10/utilization-order3.summary
index cfeea48..9d59f37 100644
--- a/pengine/test10/utilization-order3.summary
+++ b/pengine/test10/utilization-order3.summary
@@ -7,7 +7,7 @@ Online: [ node1 node2 ]
 
 Transition Summary:
  * Start   rsc2	(node1)
- * Migrate rsc1	(Started node1 -> node2)
+ * Migrate    rsc1    ( node1 -> node2 )  
 
 Executing cluster transition:
  * Pseudo action:   load_stopped_node2
diff --git a/pengine/test10/utilization-order4.summary b/pengine/test10/utilization-order4.summary
index 09a8c31..04c5f93 100644
--- a/pengine/test10/utilization-order4.summary
+++ b/pengine/test10/utilization-order4.summary
@@ -15,7 +15,7 @@ Online: [ deglxen001 ]
      Started: [ deglxen001 deglxen002 ]
 
 Transition Summary:
- * Migrate degllx62-vm	(Started deglxen002 -> deglxen001)
+ * Migrate    degllx62-vm             ( deglxen002 -> deglxen001 )  
  * Stop    degllx61-vm	(deglxen001)
  * Stop    nfs-xen_config:1	(deglxen002)  	due to node availability
  * Stop    nfs-xen_swapfiles:1	(deglxen002)  	due to node availability
diff --git a/pengine/test10/whitebox-fail1.summary b/pengine/test10/whitebox-fail1.summary
index 1d06552..1271d4f 100644
--- a/pengine/test10/whitebox-fail1.summary
+++ b/pengine/test10/whitebox-fail1.summary
@@ -15,10 +15,10 @@ Containers: [ lxc2:container2 ]
 
 Transition Summary:
  * Fence (reboot) lxc1 (resource: container1) 'guest is unclean'
- * Recover container1	(Started 18node2)
- * Recover M:4	(Started lxc1)
- * Recover B	(Started lxc1)
- * Restart lxc1	(Started 18node2) 	due to required container1 start
+ * Recover    container1     ( 18node2 )  
+ * Recover    M:4            (    lxc1 )  
+ * Recover    B              (    lxc1 )  
+ * Restart    lxc1           ( 18node2 )   due to required container1 start
 
 Executing cluster transition:
  * Resource action: lxc1            stop on 18node2
diff --git a/pengine/test10/whitebox-fail2.summary b/pengine/test10/whitebox-fail2.summary
index 06364fb..5fd1ebd 100644
--- a/pengine/test10/whitebox-fail2.summary
+++ b/pengine/test10/whitebox-fail2.summary
@@ -15,10 +15,10 @@ Containers: [ lxc2:container2 ]
 
 Transition Summary:
  * Fence (reboot) lxc1 (resource: container1) 'guest is unclean'
- * Recover container1	(Started 18node2)
- * Recover M:4	(Started lxc1)
- * Recover B	(Started lxc1)
- * Recover lxc1	(Started 18node2)
+ * Recover    container1     ( 18node2 )  
+ * Recover    M:4            (    lxc1 )  
+ * Recover    B              (    lxc1 )  
+ * Recover    lxc1           ( 18node2 )  
 
 Executing cluster transition:
  * Resource action: lxc1            stop on 18node2
diff --git a/pengine/test10/whitebox-fail3.summary b/pengine/test10/whitebox-fail3.summary
index 19b2e3d..eded099 100644
--- a/pengine/test10/whitebox-fail3.summary
+++ b/pengine/test10/whitebox-fail3.summary
@@ -14,7 +14,7 @@ Online: [ dvossel-laptop2 ]
 
 Transition Summary:
  * Start   vm	(dvossel-laptop2)
- * Move    FAKE	(Started dvossel-laptop2 -> 18builder)
+ * Move       FAKE          ( dvossel-laptop2 -> 18builder )  
  * Start   W:1	(18builder)
  * Start   X:1	(18builder)
  * Start   18builder	(dvossel-laptop2)
diff --git a/pengine/test10/whitebox-imply-stop-on-fence.summary b/pengine/test10/whitebox-imply-stop-on-fence.summary
index bea75a2..a3e9ce8 100644
--- a/pengine/test10/whitebox-imply-stop-on-fence.summary
+++ b/pengine/test10/whitebox-imply-stop-on-fence.summary
@@ -28,15 +28,15 @@ Transition Summary:
  * Fence (reboot) lxc-02_kiff-01 (resource: R-lxc-02_kiff-01) 'guest is unclean'
  * Fence (reboot) lxc-01_kiff-01 (resource: R-lxc-01_kiff-01) 'guest is unclean'
  * Fence (reboot) kiff-01 'peer is no longer part of the cluster'
- * Move    fence-kiff-02	(Started kiff-01 -> kiff-02)
+ * Move       fence-kiff-02        ( kiff-01 -> kiff-02 )  
  * Stop    dlm:0	(kiff-01)  	due to node availability
  * Stop    clvmd:0	(kiff-01)  	due to node availability
  * Stop    shared0:0	(kiff-01)  	due to node availability
- * Recover R-lxc-01_kiff-01	(Started kiff-01 -> kiff-02)
- * Move    R-lxc-02_kiff-01	(Started kiff-01 -> kiff-02)
- * Recover vm-fs	(Started lxc-01_kiff-01)
- * Move    lxc-01_kiff-01	(Started kiff-01 -> kiff-02)
- * Move    lxc-02_kiff-01	(Started kiff-01 -> kiff-02)
+ * Recover    R-lxc-01_kiff-01     ( kiff-01 -> kiff-02 )  
+ * Move       R-lxc-02_kiff-01     ( kiff-01 -> kiff-02 )  
+ * Recover    vm-fs                (     lxc-01_kiff-01 )  
+ * Move       lxc-01_kiff-01       ( kiff-01 -> kiff-02 )  
+ * Move       lxc-02_kiff-01       ( kiff-01 -> kiff-02 )  
 
 Executing cluster transition:
  * Pseudo action:   fence-kiff-02_stop_0
diff --git a/pengine/test10/whitebox-migrate1.summary b/pengine/test10/whitebox-migrate1.summary
index a6e4c00..0fc0f9a 100644
--- a/pengine/test10/whitebox-migrate1.summary
+++ b/pengine/test10/whitebox-migrate1.summary
@@ -14,10 +14,10 @@ Containers: [ rhel7-node1:remote-rsc ]
  remote-rsc	(ocf::heartbeat:Dummy):	Started rhel7-node2 
 
 Transition Summary:
- * Move    shooter1	(Started rhel7-node3 -> rhel7-node2)
- * Move    FAKE3	(Started rhel7-node3 -> rhel7-node2)
- * Migrate remote-rsc	(Started rhel7-node2 -> rhel7-node3)
- * Migrate rhel7-node1	(Started rhel7-node2 -> rhel7-node3)
+ * Move       shooter1        ( rhel7-node3 -> rhel7-node2 )  
+ * Move       FAKE3           ( rhel7-node3 -> rhel7-node2 )  
+ * Migrate    remote-rsc      ( rhel7-node2 -> rhel7-node3 )  
+ * Migrate    rhel7-node1     ( rhel7-node2 -> rhel7-node3 )  
 
 Executing cluster transition:
  * Resource action: shooter1        stop on rhel7-node3
diff --git a/pengine/test10/whitebox-move.summary b/pengine/test10/whitebox-move.summary
index dbf0780..5e27a67 100644
--- a/pengine/test10/whitebox-move.summary
+++ b/pengine/test10/whitebox-move.summary
@@ -11,10 +11,10 @@ Containers: [ lxc1:container1 lxc2:container2 ]
  A	(ocf::pacemaker:Dummy):	Started lxc1
 
 Transition Summary:
- * Move    container1	(Started 18node1 -> 18node2)
- * Restart M:3	(Started lxc1) 	due to required container1 start
- * Restart A	(Started lxc1) 	due to required container1 start
- * Move    lxc1	(Started 18node1 -> 18node2)
+ * Move       container1     ( 18node1 -> 18node2 )  
+ * Restart    M:3            (               lxc1 )   due to required container1 start
+ * Restart    A              (               lxc1 )   due to required container1 start
+ * Move       lxc1           ( 18node1 -> 18node2 )  
 
 Executing cluster transition:
  * Pseudo action:   M-clone_stop_0
diff --git a/pengine/test10/whitebox-ms-ordering-move.summary b/pengine/test10/whitebox-ms-ordering-move.summary
index b48d988..80156b0 100644
--- a/pengine/test10/whitebox-ms-ordering-move.summary
+++ b/pengine/test10/whitebox-ms-ordering-move.summary
@@ -30,9 +30,9 @@ Containers: [ lxc1:container1 lxc2:container2 ]
      Slaves: [ lxc2 ]
 
 Transition Summary:
- * Move    container1	(Started rhel7-1 -> rhel7-2)
+ * Move       container1     ( rhel7-1 -> rhel7-2 )  
  * Restart lxc-ms:0	(Master lxc1) 	due to required container1 start
- * Move    lxc1	(Started rhel7-1 -> rhel7-2)
+ * Move       lxc1           ( rhel7-1 -> rhel7-2 )  
 
 Executing cluster transition:
  * Pseudo action:   lxc-ms-master_demote_0
diff --git a/pengine/test10/whitebox-orphan-ms.summary b/pengine/test10/whitebox-orphan-ms.summary
index 3efa6bd..2b0234b 100644
--- a/pengine/test10/whitebox-orphan-ms.summary
+++ b/pengine/test10/whitebox-orphan-ms.summary
@@ -27,10 +27,11 @@ Containers: [ lxc1:container1 lxc2:container2 ]
  container1	(ocf::heartbeat:VirtualDomain):	 ORPHANED Started 18node1 
 
 Transition Summary:
- * Move    FencingFail	(Started 18node3 -> 18node1)
+ * Move       FencingFail     ( 18node3 -> 18node1 )  
  * Stop    container2	(18node1)  	due to node availability
  * Stop    lxc1	(18node1)  	due to node availability
- * Demote  lxc-ms	(Master -> Stopped lxc1)
+ * Stop       lxc-ms          (        Master lxc1 )  
+ * Stop       lxc-ms          (        Master lxc2 )  
  * Stop    lxc2	(18node1)  	due to node availability
  * Stop    container1	(18node1)  	due to node availability
 
diff --git a/pengine/test10/whitebox-orphaned.summary b/pengine/test10/whitebox-orphaned.summary
index 52b54aa..7d173b2 100644
--- a/pengine/test10/whitebox-orphaned.summary
+++ b/pengine/test10/whitebox-orphaned.summary
@@ -17,7 +17,7 @@ Containers: [ lxc1:container1 lxc2:container2 ]
 
 Transition Summary:
  * Stop    M:4	(lxc1)  	due to node availability
- * Move    B	(Started lxc1 -> lxc2)
+ * Move       B              ( lxc1 -> lxc2 )  
  * Stop    container1	(18node2)  	due to node availability
  * Stop    lxc1	(18node2)  	due to node availability
 
diff --git a/pengine/test10/whitebox-start.summary b/pengine/test10/whitebox-start.summary
index 6819ebc..e76e28a 100644
--- a/pengine/test10/whitebox-start.summary
+++ b/pengine/test10/whitebox-start.summary
@@ -17,8 +17,8 @@ Containers: [ lxc2:container2 ]
 Transition Summary:
  * Start   container1	(18node1)
  * Start   M:4	(lxc1)
- * Move    A	(Started 18node1 -> lxc1)
- * Move    B	(Started lxc2 -> 18node3)
+ * Move       A              ( 18node1 -> lxc1 )  
+ * Move       B              ( lxc2 -> 18node3 )  
  * Start   lxc1	(18node1)
 
 Executing cluster transition:
diff --git a/pengine/test10/whitebox-stop.summary b/pengine/test10/whitebox-stop.summary
index 89094da..9b15ea0 100644
--- a/pengine/test10/whitebox-stop.summary
+++ b/pengine/test10/whitebox-stop.summary
@@ -17,7 +17,7 @@ Containers: [ lxc1:container1 lxc2:container2 ]
 Transition Summary:
  * Stop    container1	(18node2)  	due to node availability
  * Stop    M:4	(lxc1)  	due to node availability
- * Move    B	(Started lxc1 -> lxc2)
+ * Move       B              ( lxc1 -> lxc2 )  
  * Stop    lxc1	(18node2)  	due to node availability
 
 Executing cluster transition:
diff --git a/pengine/test10/whitebox-unexpectedly-running.summary b/pengine/test10/whitebox-unexpectedly-running.summary
index 0e69d3c..eef4f63 100644
--- a/pengine/test10/whitebox-unexpectedly-running.summary
+++ b/pengine/test10/whitebox-unexpectedly-running.summary
@@ -6,7 +6,7 @@ Online: [ 18builder ]
 
 Transition Summary:
  * Fence (reboot) remote1 (resource: FAKE) 'guest is unclean'
- * Recover FAKE	(Started 18builder)
+ * Recover    FAKE        ( 18builder )  
  * Start   remote1	(18builder)
 
 Executing cluster transition:
-- 
1.8.3.1


From b5c48ca0bf52c9a03c81ba4fb74dbc5c1a7f6dbc Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Tue, 1 Aug 2017 13:36:04 +1000
Subject: [PATCH 07/12] Fix: PE: Only retrigger unfencing on nodes that ran
 operations with the old parameters

---
 pengine/allocate.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/pengine/allocate.c b/pengine/allocate.c
index ef26245..f169db3 100644
--- a/pengine/allocate.c
+++ b/pengine/allocate.c
@@ -329,7 +329,7 @@ check_action_definition(resource_t * rsc, node_t * active_node, xmlNode * xml_op
                  op_version, crm_element_value(xml_op, XML_ATTR_TRANSITION_MAGIC));
 
         custom_action(rsc, key, task, NULL, FALSE, TRUE, data_set);
-        trigger_unfencing(rsc, NULL, "Device parameters changed", NULL, data_set);
+        trigger_unfencing(rsc, active_node, "Device parameters changed", NULL, data_set);
 
     } else if ((digest_data->rc == RSC_DIGEST_ALL) || (digest_data->rc == RSC_DIGEST_UNKNOWN)) {
         /* Changes that can potentially be handled by a reload */
@@ -337,7 +337,7 @@ check_action_definition(resource_t * rsc, node_t * active_node, xmlNode * xml_op
         const char *digest_all = crm_element_value(xml_op, XML_LRM_ATTR_OP_DIGEST);
 
         did_change = TRUE;
-        trigger_unfencing(rsc, NULL, "Device parameters changed (reload)", NULL, data_set);
+        trigger_unfencing(rsc, active_node, "Device parameters changed (reload)", NULL, data_set);
         crm_log_xml_info(digest_data->params_all, "params:reload");
         key = generate_op_key(rsc->id, task, interval);
         pe_rsc_info(rsc, "Parameters to %s on %s changed: was %s vs. now %s (reload:%s) %s",
-- 
1.8.3.1


From a8e0c440577bd082b70e69bc5b6539fc999cbac7 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Mon, 14 Aug 2017 12:35:16 +1000
Subject: [PATCH 08/12] PE: Unfencing: Correctly detect changes to device
 definitions

---
 lib/pengine/utils.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lib/pengine/utils.c b/lib/pengine/utils.c
index 222a3e2..d4943a7 100644
--- a/lib/pengine/utils.c
+++ b/lib/pengine/utils.c
@@ -1952,7 +1952,7 @@ fencing_action_digest_cmp(resource_t * rsc, node_t * node, pe_working_set_t * da
      * We use the resource id + agent + digest so that we can detect
      * changes to the agent and/or the parameters used
      */
-    char *search_all = crm_strdup_printf("%s:%s:%s", rsc->id, (const char*)g_hash_table_lookup(rsc->meta, XML_ATTR_TYPE), data->digest_secure_calc);
+    char *search_all = crm_strdup_printf("%s:%s:%s", rsc->id, (const char*)g_hash_table_lookup(rsc->meta, XML_ATTR_TYPE), data->digest_all_calc);
     char *search_secure = crm_strdup_printf("%s:%s:%s", rsc->id, (const char*)g_hash_table_lookup(rsc->meta, XML_ATTR_TYPE), data->digest_secure_calc);
 
     data->rc = RSC_DIGEST_ALL;
-- 
1.8.3.1


From 7a3dbd5fd5481ecc3a375d9874f01daac6512943 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Wed, 16 Aug 2017 13:50:07 +1000
Subject: [PATCH 09/12] Test: PE: Update unfencing device change test output

---
 pengine/test10/unfence-parameters.dot     |  22 ------
 pengine/test10/unfence-parameters.exp     | 117 ++++++------------------------
 pengine/test10/unfence-parameters.summary |   9 +--
 3 files changed, 23 insertions(+), 125 deletions(-)

diff --git a/pengine/test10/unfence-parameters.dot b/pengine/test10/unfence-parameters.dot
index dee850e..ccbddbd 100644
--- a/pengine/test10/unfence-parameters.dot
+++ b/pengine/test10/unfence-parameters.dot
@@ -21,10 +21,7 @@ digraph "g" {
 "clvmd:2_monitor_0 virt-3" -> "clvmd-clone_start_0" [ style = bold]
 "clvmd:2_monitor_0 virt-3" [ style=bold color="green" fontcolor="black"]
 "clvmd:2_start_0 virt-3" -> "clvmd-clone_running_0" [ style = bold]
-"clvmd:2_start_0 virt-3" -> "clvmd:3_start_0 <none>" [ style = dashed]
 "clvmd:2_start_0 virt-3" [ style=bold color="green" fontcolor="black"]
-"clvmd:3_start_0 <none>" -> "clvmd-clone_running_0" [ style = dashed]
-"clvmd:3_start_0 <none>" [ style=dashed color="red" fontcolor="black"]
 "clvmd_start_0 virt-1" -> "clvmd-clone_running_0" [ style = bold]
 "clvmd_start_0 virt-1" -> "clvmd:1_start_0 virt-2" [ style = bold]
 "clvmd_start_0 virt-1" [ style=bold color="green" fontcolor="black"]
@@ -39,11 +36,9 @@ digraph "g" {
 "dlm-clone_start_0" -> "dlm-clone_running_0" [ style = bold]
 "dlm-clone_start_0" -> "dlm:2_start_0 virt-3" [ style = bold]
 "dlm-clone_start_0" -> "dlm_start_0 virt-1" [ style = bold]
-"dlm-clone_start_0" -> "dlm_start_0 virt-2" [ style = bold]
 "dlm-clone_start_0" [ style=bold color="green" fontcolor="orange"]
 "dlm-clone_stop_0" -> "dlm-clone_stopped_0" [ style = bold]
 "dlm-clone_stop_0" -> "dlm_stop_0 virt-1" [ style = bold]
-"dlm-clone_stop_0" -> "dlm_stop_0 virt-2" [ style = bold]
 "dlm-clone_stop_0" [ style=bold color="green" fontcolor="orange"]
 "dlm-clone_stopped_0" -> "dlm-clone_start_0" [ style = bold]
 "dlm-clone_stopped_0" [ style=bold color="green" fontcolor="orange"]
@@ -54,24 +49,12 @@ digraph "g" {
 "dlm:2_start_0 virt-3" [ style=bold color="green" fontcolor="black"]
 "dlm_start_0 virt-1" -> "clvmd_start_0 virt-1" [ style = bold]
 "dlm_start_0 virt-1" -> "dlm-clone_running_0" [ style = bold]
-"dlm_start_0 virt-1" -> "dlm_start_0 virt-2" [ style = bold]
 "dlm_start_0 virt-1" [ style=bold color="green" fontcolor="black"]
-"dlm_start_0 virt-2" -> "clvmd:1_start_0 virt-2" [ style = bold]
-"dlm_start_0 virt-2" -> "clvmd:3_start_0 <none>" [ style = dashed]
-"dlm_start_0 virt-2" -> "dlm-clone_running_0" [ style = bold]
-"dlm_start_0 virt-2" -> "dlm:2_start_0 virt-3" [ style = bold]
-"dlm_start_0 virt-2" [ style=bold color="green" fontcolor="black"]
 "dlm_stop_0 virt-1" -> "all_stopped" [ style = bold]
 "dlm_stop_0 virt-1" -> "dlm-clone_stopped_0" [ style = bold]
 "dlm_stop_0 virt-1" -> "dlm_start_0 virt-1" [ style = bold]
 "dlm_stop_0 virt-1" -> "stonith 'on' virt-1" [ style = bold]
 "dlm_stop_0 virt-1" [ style=bold color="green" fontcolor="black"]
-"dlm_stop_0 virt-2" -> "all_stopped" [ style = bold]
-"dlm_stop_0 virt-2" -> "dlm-clone_stopped_0" [ style = bold]
-"dlm_stop_0 virt-2" -> "dlm_start_0 virt-2" [ style = bold]
-"dlm_stop_0 virt-2" -> "dlm_stop_0 virt-1" [ style = bold]
-"dlm_stop_0 virt-2" -> "stonith 'on' virt-2" [ style = bold]
-"dlm_stop_0 virt-2" [ style=bold color="green" fontcolor="black"]
 "fencing_monitor_0 virt-3" -> "fencing_start_0 virt-1" [ style = bold]
 "fencing_monitor_0 virt-3" -> "fencing_stop_0 virt-1" [ style = bold]
 "fencing_monitor_0 virt-3" [ style=bold color="green" fontcolor="black"]
@@ -82,10 +65,6 @@ digraph "g" {
 "stonith 'on' virt-1" -> "clvmd_start_0 virt-1" [ style = bold]
 "stonith 'on' virt-1" -> "dlm_start_0 virt-1" [ style = bold]
 "stonith 'on' virt-1" [ style=bold color="green" fontcolor="black"]
-"stonith 'on' virt-2" -> "clvmd:1_monitor_0 virt-2" [ style = bold]
-"stonith 'on' virt-2" -> "clvmd:1_start_0 virt-2" [ style = bold]
-"stonith 'on' virt-2" -> "dlm_start_0 virt-2" [ style = bold]
-"stonith 'on' virt-2" [ style=bold color="green" fontcolor="black"]
 "stonith 'on' virt-3" -> "clvmd:2_monitor_0 virt-3" [ style = bold]
 "stonith 'on' virt-3" -> "clvmd:2_start_0 virt-3" [ style = bold]
 "stonith 'on' virt-3" -> "dlm:2_monitor_0 virt-3" [ style = bold]
@@ -99,6 +78,5 @@ digraph "g" {
 "stonith_complete" -> "clvmd_start_0 virt-1" [ style = bold]
 "stonith_complete" -> "dlm:2_start_0 virt-3" [ style = bold]
 "stonith_complete" -> "dlm_start_0 virt-1" [ style = bold]
-"stonith_complete" -> "dlm_start_0 virt-2" [ style = bold]
 "stonith_complete" [ style=bold color="green" fontcolor="orange"]
 }
diff --git a/pengine/test10/unfence-parameters.exp b/pengine/test10/unfence-parameters.exp
index 54c242a..64286a8 100644
--- a/pengine/test10/unfence-parameters.exp
+++ b/pengine/test10/unfence-parameters.exp
@@ -71,9 +71,6 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="14" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:1_stop_0" on_node="virt-2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
         <pseudo_event id="19" operation="stop" operation_key="dlm-clone_stop_0"/>
       </trigger>
       <trigger>
@@ -83,44 +80,6 @@
   </synapse>
   <synapse id="5">
     <action_set>
-      <rsc_op id="15" operation="start" operation_key="dlm_start_0" internal_operation_key="dlm:1_start_0" on_node="virt-2" on_node_uuid="2">
-        <primitive id="dlm" long-id="dlm:1" class="ocf" provider="pacemaker" type="controld"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="virt-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
-      </rsc_op>
-    </action_set>
-    <inputs>
-      <trigger>
-        <crm_event id="3" operation="stonith" operation_key="stonith-virt-2-on" on_node="virt-2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="13" operation="start" operation_key="dlm_start_0" internal_operation_key="dlm:0_start_0" on_node="virt-1" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="14" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:1_stop_0" on_node="virt-2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="17" operation="start" operation_key="dlm-clone_start_0"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="29" operation="stonith_complete" operation_key="stonith_complete"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="6">
-    <action_set>
-      <rsc_op id="14" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:1_stop_0" on_node="virt-2" on_node_uuid="2">
-        <primitive id="dlm" long-id="dlm:1" class="ocf" provider="pacemaker" type="controld"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="virt-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
-      </rsc_op>
-    </action_set>
-    <inputs>
-      <trigger>
-        <pseudo_event id="19" operation="stop" operation_key="dlm-clone_stop_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="7">
-    <action_set>
       <rsc_op id="16" operation="start" operation_key="dlm:2_start_0" on_node="virt-3" on_node_uuid="3">
         <primitive id="dlm" long-id="dlm:2" class="ocf" provider="pacemaker" type="controld"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="virt-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" />
@@ -131,9 +90,6 @@
         <crm_event id="4" operation="stonith" operation_key="stonith-virt-3-on" on_node="virt-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="15" operation="start" operation_key="dlm_start_0" internal_operation_key="dlm:1_start_0" on_node="virt-2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
         <pseudo_event id="17" operation="start" operation_key="dlm-clone_start_0"/>
       </trigger>
       <trigger>
@@ -141,7 +97,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="8">
+  <synapse id="6">
     <action_set>
       <rsc_op id="9" operation="monitor" operation_key="dlm:2_monitor_0" on_node="virt-3" on_node_uuid="3">
         <primitive id="dlm" long-id="dlm:2" class="ocf" provider="pacemaker" type="controld"/>
@@ -154,7 +110,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="9" priority="1000000">
+  <synapse id="7" priority="1000000">
     <action_set>
       <pseudo_event id="20" operation="stopped" operation_key="dlm-clone_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
@@ -165,14 +121,11 @@
         <rsc_op id="12" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:0_stop_0" on_node="virt-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="14" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:1_stop_0" on_node="virt-2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
         <pseudo_event id="19" operation="stop" operation_key="dlm-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10">
+  <synapse id="8">
     <action_set>
       <pseudo_event id="19" operation="stop" operation_key="dlm-clone_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
@@ -184,7 +137,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="11" priority="1000000">
+  <synapse id="9" priority="1000000">
     <action_set>
       <pseudo_event id="18" operation="running" operation_key="dlm-clone_running_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
@@ -195,9 +148,6 @@
         <rsc_op id="13" operation="start" operation_key="dlm_start_0" internal_operation_key="dlm:0_start_0" on_node="virt-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="15" operation="start" operation_key="dlm_start_0" internal_operation_key="dlm:1_start_0" on_node="virt-2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
         <rsc_op id="16" operation="start" operation_key="dlm:2_start_0" on_node="virt-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
@@ -205,7 +155,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12">
+  <synapse id="10">
     <action_set>
       <pseudo_event id="17" operation="start" operation_key="dlm-clone_start_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
@@ -220,7 +170,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="13">
+  <synapse id="11">
     <action_set>
       <rsc_op id="22" operation="start" operation_key="clvmd_start_0" internal_operation_key="clvmd:0_start_0" on_node="virt-1" on_node_uuid="1">
         <primitive id="clvmd" long-id="clvmd:0" class="ocf" provider="heartbeat" type="clvm"/>
@@ -245,7 +195,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14">
+  <synapse id="12">
     <action_set>
       <rsc_op id="21" operation="stop" operation_key="clvmd_stop_0" internal_operation_key="clvmd:0_stop_0" on_node="virt-1" on_node_uuid="1">
         <primitive id="clvmd" long-id="clvmd:0" class="ocf" provider="heartbeat" type="clvm"/>
@@ -258,7 +208,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="13">
     <action_set>
       <rsc_op id="23" operation="start" operation_key="clvmd:1_start_0" on_node="virt-2" on_node_uuid="2">
         <primitive id="clvmd" long-id="clvmd:1" class="ocf" provider="heartbeat" type="clvm"/>
@@ -267,12 +217,6 @@
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="3" operation="stonith" operation_key="stonith-virt-2-on" on_node="virt-2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="15" operation="start" operation_key="dlm_start_0" internal_operation_key="dlm:1_start_0" on_node="virt-2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
         <rsc_op id="22" operation="start" operation_key="clvmd_start_0" internal_operation_key="clvmd:0_start_0" on_node="virt-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
@@ -283,20 +227,16 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="16">
+  <synapse id="14">
     <action_set>
       <rsc_op id="7" operation="monitor" operation_key="clvmd:1_monitor_0" on_node="virt-2" on_node_uuid="2">
         <primitive id="clvmd" long-id="clvmd:1" class="ocf" provider="heartbeat" type="clvm"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="virt-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
-    <inputs>
-      <trigger>
-        <crm_event id="3" operation="stonith" operation_key="stonith-virt-2-on" on_node="virt-2" on_node_uuid="2"/>
-      </trigger>
-    </inputs>
+    <inputs/>
   </synapse>
-  <synapse id="17">
+  <synapse id="15">
     <action_set>
       <rsc_op id="24" operation="start" operation_key="clvmd:2_start_0" on_node="virt-3" on_node_uuid="3">
         <primitive id="clvmd" long-id="clvmd:2" class="ocf" provider="heartbeat" type="clvm"/>
@@ -321,7 +261,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="18">
+  <synapse id="16">
     <action_set>
       <rsc_op id="10" operation="monitor" operation_key="clvmd:2_monitor_0" on_node="virt-3" on_node_uuid="3">
         <primitive id="clvmd" long-id="clvmd:2" class="ocf" provider="heartbeat" type="clvm"/>
@@ -334,7 +274,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="19" priority="1000000">
+  <synapse id="17" priority="1000000">
     <action_set>
       <pseudo_event id="28" operation="stopped" operation_key="clvmd-clone_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
@@ -349,7 +289,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="20">
+  <synapse id="18">
     <action_set>
       <pseudo_event id="27" operation="stop" operation_key="clvmd-clone_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
@@ -357,7 +297,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="21" priority="1000000">
+  <synapse id="19" priority="1000000">
     <action_set>
       <pseudo_event id="26" operation="running" operation_key="clvmd-clone_running_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
@@ -378,7 +318,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="22">
+  <synapse id="20">
     <action_set>
       <pseudo_event id="25" operation="start" operation_key="clvmd-clone_start_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
@@ -399,7 +339,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="23">
+  <synapse id="21">
     <action_set>
       <crm_event id="30" operation="stonith" operation_key="stonith-virt-4-reboot" on_node="virt-4" on_node_uuid="4">
         <attributes CRM_meta_on_node="virt-4" CRM_meta_on_node_uuid="4" CRM_meta_stonith_action="reboot" />
@@ -410,7 +350,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="24">
+  <synapse id="22">
     <action_set>
       <pseudo_event id="29" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
@@ -422,7 +362,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="25">
+  <synapse id="23">
     <action_set>
       <crm_event id="4" operation="stonith" operation_key="stonith-virt-3-on" on_node="virt-3" on_node_uuid="3">
         <attributes CRM_meta_on_node="virt-3" CRM_meta_on_node_uuid="3" CRM_meta_stonith_action="on" />
@@ -430,19 +370,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="26">
-    <action_set>
-      <crm_event id="3" operation="stonith" operation_key="stonith-virt-2-on" on_node="virt-2" on_node_uuid="2">
-        <attributes CRM_meta_node_unfenced="1234567" CRM_meta_on_node="virt-2" CRM_meta_on_node_uuid="2" CRM_meta_stonith_action="on" />
-      </crm_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="14" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:1_stop_0" on_node="virt-2" on_node_uuid="2"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="27">
+  <synapse id="24">
     <action_set>
       <crm_event id="2" operation="stonith" operation_key="stonith-virt-1-on" on_node="virt-1" on_node_uuid="1">
         <attributes CRM_meta_node_unfenced="1234567" CRM_meta_on_node="virt-1" CRM_meta_on_node_uuid="1" CRM_meta_stonith_action="on" />
@@ -457,7 +385,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="28">
+  <synapse id="25">
     <action_set>
       <pseudo_event id="1" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -471,9 +399,6 @@
         <rsc_op id="12" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:0_stop_0" on_node="virt-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="14" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:1_stop_0" on_node="virt-2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
         <rsc_op id="21" operation="stop" operation_key="clvmd_stop_0" internal_operation_key="clvmd:0_stop_0" on_node="virt-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
diff --git a/pengine/test10/unfence-parameters.summary b/pengine/test10/unfence-parameters.summary
index 8a6356c..b9f4953 100644
--- a/pengine/test10/unfence-parameters.summary
+++ b/pengine/test10/unfence-parameters.summary
@@ -13,12 +13,10 @@ Online: [ virt-1 virt-2 virt-3 ]
 
 Transition Summary:
  * Fence (reboot) virt-4 'node is unclean'
- * Fence (on) virt-3 'Device parameters changed (reload)'
- * Fence (on) virt-2 'Device parameters changed (reload)'
+ * Fence (on) virt-3 'Required by dlm:2'
  * Fence (on) virt-1 'Device parameters changed (reload)'
  * Restart    fencing     ( virt-1 )  
  * Restart    dlm:0       ( virt-1 )   due to required stonith
- * Restart    dlm:1       ( virt-2 )   due to required stonith
  * Start   dlm:2	(virt-3)
  * Restart    clvmd:0     ( virt-1 )   due to required stonith
  * Start   clvmd:1	(virt-2)
@@ -26,6 +24,7 @@ Transition Summary:
 
 Executing cluster transition:
  * Resource action: fencing         monitor on virt-3
+ * Resource action: clvmd           monitor on virt-2
  * Pseudo action:   clvmd-clone_stop_0
  * Fencing virt-4 (reboot)
  * Pseudo action:   stonith_complete
@@ -36,17 +35,13 @@ Executing cluster transition:
  * Resource action: clvmd           monitor on virt-3
  * Pseudo action:   clvmd-clone_stopped_0
  * Pseudo action:   dlm-clone_stop_0
- * Resource action: dlm             stop on virt-2
- * Fencing virt-2 (on)
  * Resource action: dlm             stop on virt-1
  * Pseudo action:   dlm-clone_stopped_0
  * Pseudo action:   dlm-clone_start_0
- * Resource action: clvmd           monitor on virt-2
  * Fencing virt-1 (on)
  * Pseudo action:   all_stopped
  * Resource action: fencing         start on virt-1
  * Resource action: dlm             start on virt-1
- * Resource action: dlm             start on virt-2
  * Resource action: dlm             start on virt-3
  * Pseudo action:   dlm-clone_running_0
  * Pseudo action:   clvmd-clone_start_0
-- 
1.8.3.1


From d86c8d491d8ed2beb13c86a32e96658f54caae62 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Mon, 14 Aug 2017 12:51:25 +1000
Subject: [PATCH 10/12] Fix: crmd: Correctly record that unfencing is complete

---
 crmd/te_callbacks.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/crmd/te_callbacks.c b/crmd/te_callbacks.c
index b5c857d..4476d4a 100644
--- a/crmd/te_callbacks.c
+++ b/crmd/te_callbacks.c
@@ -799,10 +799,11 @@ tengine_stonith_callback(stonith_t * stonith, stonith_callback_data_t * data)
             if (safe_str_eq("on", op)) {
                 const char *key = NULL;
                 const char *value = NULL;
+                char *now = crm_itoa(time(NULL));
 
                 key = XML_NODE_IS_UNFENCED;
-                value = crm_meta_value(action->params, key);
-                update_attrd(target, key, value, NULL, FALSE);
+                update_attrd(target, key, now, NULL, FALSE);
+                free(now);
 
                 key = "digests-all";
                 value = crm_meta_value(action->params, key);
-- 
1.8.3.1


From 31d4f2e01d47312ff21da845f0fc6816630c00ec Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Mon, 7 Aug 2017 17:07:54 +1000
Subject: [PATCH 11/12] Fix: PE: Allow resources inside bundles to receive
 notifications

---
 lib/pengine/container.c | 5 +++++
 pengine/container.c     | 8 +++++---
 2 files changed, 10 insertions(+), 3 deletions(-)

diff --git a/lib/pengine/container.c b/lib/pengine/container.c
index 175a366..118e716 100644
--- a/lib/pengine/container.c
+++ b/lib/pengine/container.c
@@ -757,6 +757,11 @@ container_unpack(resource_t * rsc, pe_working_set_t * data_set)
             tuple->child = childIter->data;
             tuple->offset = lpc++;
 
+            // Ensure the child's notify gets set based on the underlying primitive's value
+            if(is_set(tuple->child->flags, pe_rsc_notify)) {
+                set_bit(container_data->child->flags, pe_rsc_notify);
+            }
+
             offset += allocate_ip(container_data, tuple, buffer+offset, max-offset);
             container_data->tuples = g_list_append(container_data->tuples, tuple);
         }
diff --git a/pengine/container.c b/pengine/container.c
index 280a61a..1e9b971 100644
--- a/pengine/container.c
+++ b/pengine/container.c
@@ -770,6 +770,11 @@ container_expand(resource_t * rsc, pe_working_set_t * data_set)
     CRM_CHECK(rsc != NULL, return);
 
     get_container_variant_data(container_data, rsc);
+
+    if(container_data->child) {
+        container_data->child->cmds->expand(container_data->child, data_set);
+    }
+
     for (GListPtr gIter = container_data->tuples; gIter != NULL; gIter = gIter->next) {
         container_grouping_t *tuple = (container_grouping_t *)gIter->data;
 
@@ -787,9 +792,6 @@ container_expand(resource_t * rsc, pe_working_set_t * data_set)
         if(tuple->ip) {
             tuple->ip->cmds->expand(tuple->ip, data_set);
         }
-        if(tuple->child) {
-            tuple->child->cmds->expand(tuple->child, data_set);
-        }
         if(tuple->docker) {
             tuple->docker->cmds->expand(tuple->docker, data_set);
         }
-- 
1.8.3.1


From 5ce481caa150564ae04b71d87b8737fcf88b5852 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Wed, 16 Aug 2017 14:09:56 +1000
Subject: [PATCH 12/12] Test: PE: Update bundle regression tests now that
 notify works

---
 pengine/test10/bundle-nested-colocation.dot        |   23 +-
 pengine/test10/bundle-nested-colocation.exp        |  355 +++---
 pengine/test10/bundle-nested-colocation.summary    |   15 +-
 pengine/test10/bundle-order-partial-start-2.dot    |   33 +-
 pengine/test10/bundle-order-partial-start-2.exp    |  414 ++++---
 .../test10/bundle-order-partial-start-2.summary    |   25 +-
 pengine/test10/bundle-order-partial-start.dot      |   33 +-
 pengine/test10/bundle-order-partial-start.exp      |  400 ++++---
 pengine/test10/bundle-order-partial-start.summary  |   27 +-
 pengine/test10/bundle-order-partial-stop.dot       |   78 +-
 pengine/test10/bundle-order-partial-stop.exp       |  772 ++++++++-----
 pengine/test10/bundle-order-partial-stop.summary   |   40 +-
 pengine/test10/bundle-order-startup-clone-2.dot    |   56 +-
 pengine/test10/bundle-order-startup-clone-2.exp    | 1146 ++++++++++++--------
 .../test10/bundle-order-startup-clone-2.summary    |   37 +-
 pengine/test10/bundle-order-startup-clone.dot      |   16 +-
 pengine/test10/bundle-order-startup-clone.exp      |  162 ++-
 pengine/test10/bundle-order-startup-clone.summary  |    9 +-
 pengine/test10/bundle-order-startup.dot            |   31 +-
 pengine/test10/bundle-order-startup.exp            |  597 ++++++----
 pengine/test10/bundle-order-startup.summary        |   26 +-
 pengine/test10/bundle-order-stop-clone.exp         |   88 +-
 pengine/test10/bundle-order-stop-clone.summary     |    2 +-
 pengine/test10/bundle-order-stop.dot               |   78 +-
 pengine/test10/bundle-order-stop.exp               |  772 ++++++++-----
 pengine/test10/bundle-order-stop.summary           |   40 +-
 pengine/test10/remote-fence-unclean-3.exp          |    4 +-
 27 files changed, 3511 insertions(+), 1768 deletions(-)

diff --git a/pengine/test10/bundle-nested-colocation.dot b/pengine/test10/bundle-nested-colocation.dot
index a84f857..2a2d71a 100644
--- a/pengine/test10/bundle-nested-colocation.dot
+++ b/pengine/test10/bundle-nested-colocation.dot
@@ -15,7 +15,22 @@ digraph "g" {
 "rabbitmq-bundle-2_start_0 overcloud-controller-2" -> "rabbitmq:2_monitor_10000 rabbitmq-bundle-2" [ style = bold]
 "rabbitmq-bundle-2_start_0 overcloud-controller-2" -> "rabbitmq:2_start_0 rabbitmq-bundle-2" [ style = bold]
 "rabbitmq-bundle-2_start_0 overcloud-controller-2" [ style=bold color="green" fontcolor="black"]
-"rabbitmq-bundle-clone_running_0" -> "rabbitmq-bundle_running_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" -> "rabbitmq-bundle_running_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" -> "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" -> "rabbitmq:1_monitor_10000 rabbitmq-bundle-1" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" -> "rabbitmq:2_monitor_10000 rabbitmq-bundle-2" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" -> "rabbitmq-bundle-clone_post_notify_running_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" -> "rabbitmq-bundle-clone_start_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_post_notify_running_0" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = bold]
+"rabbitmq-bundle-clone_post_notify_running_0" -> "rabbitmq:0_post_notify_start_0 rabbitmq-bundle-0" [ style = bold]
+"rabbitmq-bundle-clone_post_notify_running_0" -> "rabbitmq:1_post_notify_start_0 rabbitmq-bundle-1" [ style = bold]
+"rabbitmq-bundle-clone_post_notify_running_0" -> "rabbitmq:2_post_notify_start_0 rabbitmq-bundle-2" [ style = bold]
+"rabbitmq-bundle-clone_post_notify_running_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_pre_notify_start_0" -> "rabbitmq-bundle-clone_confirmed-pre_notify_start_0" [ style = bold]
+"rabbitmq-bundle-clone_pre_notify_start_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_running_0" -> "rabbitmq-bundle-clone_post_notify_running_0" [ style = bold]
 "rabbitmq-bundle-clone_running_0" [ style=bold color="green" fontcolor="orange"]
 "rabbitmq-bundle-clone_start_0" -> "rabbitmq-bundle-clone_running_0" [ style = bold]
 "rabbitmq-bundle-clone_start_0" -> "rabbitmq:0_start_0 rabbitmq-bundle-0" [ style = bold]
@@ -56,16 +71,22 @@ digraph "g" {
 "rabbitmq-bundle_start_0" -> "rabbitmq-bundle-docker-2_start_0 overcloud-rabbit-2" [ style = bold]
 "rabbitmq-bundle_start_0" [ style=bold color="green" fontcolor="orange"]
 "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
+"rabbitmq:0_post_notify_start_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = bold]
+"rabbitmq:0_post_notify_start_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
 "rabbitmq:0_start_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_running_0" [ style = bold]
 "rabbitmq:0_start_0 rabbitmq-bundle-0" -> "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style = bold]
 "rabbitmq:0_start_0 rabbitmq-bundle-0" -> "rabbitmq:1_start_0 rabbitmq-bundle-1" [ style = bold]
 "rabbitmq:0_start_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
 "rabbitmq:1_monitor_10000 rabbitmq-bundle-1" [ style=bold color="green" fontcolor="black"]
+"rabbitmq:1_post_notify_start_0 rabbitmq-bundle-1" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = bold]
+"rabbitmq:1_post_notify_start_0 rabbitmq-bundle-1" [ style=bold color="green" fontcolor="black"]
 "rabbitmq:1_start_0 rabbitmq-bundle-1" -> "rabbitmq-bundle-clone_running_0" [ style = bold]
 "rabbitmq:1_start_0 rabbitmq-bundle-1" -> "rabbitmq:1_monitor_10000 rabbitmq-bundle-1" [ style = bold]
 "rabbitmq:1_start_0 rabbitmq-bundle-1" -> "rabbitmq:2_start_0 rabbitmq-bundle-2" [ style = bold]
 "rabbitmq:1_start_0 rabbitmq-bundle-1" [ style=bold color="green" fontcolor="black"]
 "rabbitmq:2_monitor_10000 rabbitmq-bundle-2" [ style=bold color="green" fontcolor="black"]
+"rabbitmq:2_post_notify_start_0 rabbitmq-bundle-2" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = bold]
+"rabbitmq:2_post_notify_start_0 rabbitmq-bundle-2" [ style=bold color="green" fontcolor="black"]
 "rabbitmq:2_start_0 rabbitmq-bundle-2" -> "rabbitmq-bundle-clone_running_0" [ style = bold]
 "rabbitmq:2_start_0 rabbitmq-bundle-2" -> "rabbitmq:2_monitor_10000 rabbitmq-bundle-2" [ style = bold]
 "rabbitmq:2_start_0 rabbitmq-bundle-2" [ style=bold color="green" fontcolor="black"]
diff --git a/pengine/test10/bundle-nested-colocation.exp b/pengine/test10/bundle-nested-colocation.exp
index 3daf7d6..c82ee16 100644
--- a/pengine/test10/bundle-nested-colocation.exp
+++ b/pengine/test10/bundle-nested-colocation.exp
@@ -1,9 +1,22 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
-  <synapse id="0">
+  <synapse id="0" priority="1000000">
+    <action_set>
+      <rsc_op id="62" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
+        <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="43" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="1">
     <action_set>
       <rsc_op id="34" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -13,13 +26,16 @@
       <trigger>
         <rsc_op id="33" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
       </trigger>
+      <trigger>
+        <pseudo_event id="44" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+      </trigger>
     </inputs>
   </synapse>
-  <synapse id="1">
+  <synapse id="2">
     <action_set>
       <rsc_op id="33" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -34,211 +50,335 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="2">
+  <synapse id="3" priority="1000000">
     <action_set>
-      <rsc_op id="20" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0">
-        <primitive id="rabbitmq-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_on_node="overcloud-rabbit-0" CRM_meta_on_node_uuid="overcloud-rabbit-0" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-0:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      <rsc_op id="63" operation="notify" operation_key="rabbitmq:1_post_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
+        <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <pseudo_event id="43" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+      </trigger>
+    </inputs>
   </synapse>
-  <synapse id="3">
+  <synapse id="4">
     <action_set>
-      <rsc_op id="11" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0">
-        <primitive id="rabbitmq-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_on_node="overcloud-rabbit-0" CRM_meta_on_node_uuid="overcloud-rabbit-0" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-0:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      <rsc_op id="36" operation="monitor" operation_key="rabbitmq:1_monitor_10000" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
+        <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="20" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0"/>
+        <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+        <rsc_op id="35" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="44" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="4">
+  <synapse id="5">
     <action_set>
-      <rsc_op id="7" operation="monitor" operation_key="rabbitmq-bundle-docker-0_monitor_60000" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0">
-        <primitive id="rabbitmq-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="overcloud-rabbit-0" CRM_meta_on_node_uuid="overcloud-rabbit-0" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-0:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      <rsc_op id="35" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
+        <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="11" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0"/>
+        <rsc_op id="12" operation="start" operation_key="rabbitmq-bundle-docker-1_start_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="33" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="39" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="5">
+  <synapse id="6" priority="1000000">
     <action_set>
-      <rsc_op id="22" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_60000" on_node="overcloud-controller-0" on_node_uuid="1">
-        <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
-        <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="overcloud-rabbit-0"  port="3121"/>
+      <rsc_op id="64" operation="notify" operation_key="rabbitmq:2_post_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
+        <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="21" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
+        <pseudo_event id="43" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="6">
+  <synapse id="7">
     <action_set>
-      <rsc_op id="21" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1">
-        <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
-        <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="overcloud-rabbit-0"  port="3121"/>
+      <rsc_op id="38" operation="monitor" operation_key="rabbitmq:2_monitor_10000" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
+        <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="11" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0"/>
+        <rsc_op id="27" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="37" operation="start" operation_key="rabbitmq:2_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="44" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="7">
+  <synapse id="8">
     <action_set>
-      <rsc_op id="36" operation="monitor" operation_key="rabbitmq:1_monitor_10000" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
-        <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      <rsc_op id="37" operation="start" operation_key="rabbitmq:2_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
+        <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
+        <rsc_op id="13" operation="start" operation_key="rabbitmq-bundle-docker-2_start_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="27" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
       </trigger>
       <trigger>
         <rsc_op id="35" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
       </trigger>
+      <trigger>
+        <pseudo_event id="39" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+      </trigger>
     </inputs>
   </synapse>
-  <synapse id="8">
+  <synapse id="9" priority="1000000">
     <action_set>
-      <rsc_op id="35" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
-        <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
-      </rsc_op>
+      <pseudo_event id="44" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="12" operation="start" operation_key="rabbitmq-bundle-docker-1_start_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1"/>
+        <pseudo_event id="43" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
+        <rsc_op id="62" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="63" operation="notify" operation_key="rabbitmq:1_post_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="64" operation="notify" operation_key="rabbitmq:2_post_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="10" priority="1000000">
+    <action_set>
+      <pseudo_event id="43" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="40" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="42" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="11">
+    <action_set>
+      <pseudo_event id="42" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="41" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="12">
+    <action_set>
+      <pseudo_event id="41" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="13" priority="1000000">
+    <action_set>
+      <pseudo_event id="40" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
       <trigger>
         <rsc_op id="33" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
       </trigger>
       <trigger>
+        <rsc_op id="35" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="37" operation="start" operation_key="rabbitmq:2_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
+      </trigger>
+      <trigger>
         <pseudo_event id="39" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="9">
+  <synapse id="14">
     <action_set>
-      <rsc_op id="23" operation="stop" operation_key="rabbitmq-bundle-docker-1_stop_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1">
-        <primitive id="rabbitmq-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_on_node="overcloud-rabbit-1" CRM_meta_on_node_uuid="overcloud-rabbit-1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-1" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-1:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      <pseudo_event id="39" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="29" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="42" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="15">
+    <action_set>
+      <rsc_op id="20" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0">
+        <primitive id="rabbitmq-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_on_node="overcloud-rabbit-0" CRM_meta_on_node_uuid="overcloud-rabbit-0" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-0:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="10">
+  <synapse id="16">
     <action_set>
-      <rsc_op id="12" operation="start" operation_key="rabbitmq-bundle-docker-1_start_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1">
-        <primitive id="rabbitmq-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_on_node="overcloud-rabbit-1" CRM_meta_on_node_uuid="overcloud-rabbit-1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-1" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-1:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      <rsc_op id="11" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0">
+        <primitive id="rabbitmq-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_on_node="overcloud-rabbit-0" CRM_meta_on_node_uuid="overcloud-rabbit-0" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-0:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="23" operation="stop" operation_key="rabbitmq-bundle-docker-1_stop_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1"/>
+        <rsc_op id="20" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0"/>
       </trigger>
       <trigger>
         <pseudo_event id="29" operation="start" operation_key="rabbitmq-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="11">
+  <synapse id="17">
     <action_set>
-      <rsc_op id="8" operation="monitor" operation_key="rabbitmq-bundle-docker-1_monitor_60000" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1">
-        <primitive id="rabbitmq-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="overcloud-rabbit-1" CRM_meta_on_node_uuid="overcloud-rabbit-1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-1" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-1:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      <rsc_op id="7" operation="monitor" operation_key="rabbitmq-bundle-docker-0_monitor_60000" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0">
+        <primitive id="rabbitmq-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="overcloud-rabbit-0" CRM_meta_on_node_uuid="overcloud-rabbit-0" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-0:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="12" operation="start" operation_key="rabbitmq-bundle-docker-1_start_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1"/>
+        <rsc_op id="11" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12">
+  <synapse id="18">
     <action_set>
-      <rsc_op id="25" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_60000" on_node="overcloud-controller-1" on_node_uuid="2">
-        <primitive id="rabbitmq-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
-        <attributes CRM_meta_container="rabbitmq-bundle-docker-1" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="overcloud-controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" addr="overcloud-rabbit-1"  port="3121"/>
+      <rsc_op id="22" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_60000" on_node="overcloud-controller-0" on_node_uuid="1">
+        <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="overcloud-rabbit-0"  port="3121"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
+        <rsc_op id="21" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="13">
+  <synapse id="19">
     <action_set>
-      <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2">
-        <primitive id="rabbitmq-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
-        <attributes CRM_meta_container="rabbitmq-bundle-docker-1" CRM_meta_on_node="overcloud-controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" addr="overcloud-rabbit-1"  port="3121"/>
+      <rsc_op id="21" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1">
+        <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="overcloud-rabbit-0"  port="3121"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="12" operation="start" operation_key="rabbitmq-bundle-docker-1_start_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1"/>
+        <rsc_op id="11" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14">
+  <synapse id="20">
     <action_set>
-      <rsc_op id="38" operation="monitor" operation_key="rabbitmq:2_monitor_10000" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
-        <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      <rsc_op id="23" operation="stop" operation_key="rabbitmq-bundle-docker-1_stop_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1">
+        <primitive id="rabbitmq-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_on_node="overcloud-rabbit-1" CRM_meta_on_node_uuid="overcloud-rabbit-1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-1" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-1:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="21">
+    <action_set>
+      <rsc_op id="12" operation="start" operation_key="rabbitmq-bundle-docker-1_start_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1">
+        <primitive id="rabbitmq-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_on_node="overcloud-rabbit-1" CRM_meta_on_node_uuid="overcloud-rabbit-1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-1" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-1:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="27" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
+        <rsc_op id="23" operation="stop" operation_key="rabbitmq-bundle-docker-1_stop_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="rabbitmq:2_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
+        <pseudo_event id="29" operation="start" operation_key="rabbitmq-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="22">
     <action_set>
-      <rsc_op id="37" operation="start" operation_key="rabbitmq:2_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
-        <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      <rsc_op id="8" operation="monitor" operation_key="rabbitmq-bundle-docker-1_monitor_60000" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1">
+        <primitive id="rabbitmq-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="overcloud-rabbit-1" CRM_meta_on_node_uuid="overcloud-rabbit-1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-1" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-1:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="13" operation="start" operation_key="rabbitmq-bundle-docker-2_start_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="27" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
+        <rsc_op id="12" operation="start" operation_key="rabbitmq-bundle-docker-1_start_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="23">
+    <action_set>
+      <rsc_op id="25" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_60000" on_node="overcloud-controller-1" on_node_uuid="2">
+        <primitive id="rabbitmq-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-1" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="overcloud-controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" addr="overcloud-rabbit-1"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
+        <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="24">
+    <action_set>
+      <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2">
+        <primitive id="rabbitmq-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-1" CRM_meta_on_node="overcloud-controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" addr="overcloud-rabbit-1"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
       <trigger>
-        <pseudo_event id="39" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <rsc_op id="12" operation="start" operation_key="rabbitmq-bundle-docker-1_start_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="16">
+  <synapse id="25">
     <action_set>
       <rsc_op id="26" operation="stop" operation_key="rabbitmq-bundle-docker-2_stop_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2">
         <primitive id="rabbitmq-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -247,7 +387,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="17">
+  <synapse id="26">
     <action_set>
       <rsc_op id="13" operation="start" operation_key="rabbitmq-bundle-docker-2_start_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2">
         <primitive id="rabbitmq-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -263,7 +403,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="18">
+  <synapse id="27">
     <action_set>
       <rsc_op id="9" operation="monitor" operation_key="rabbitmq-bundle-docker-2_monitor_60000" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2">
         <primitive id="rabbitmq-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -276,7 +416,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="19">
+  <synapse id="28">
     <action_set>
       <rsc_op id="28" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_60000" on_node="overcloud-controller-2" on_node_uuid="3">
         <primitive id="rabbitmq-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
@@ -289,7 +429,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="20">
+  <synapse id="29">
     <action_set>
       <rsc_op id="27" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3">
         <primitive id="rabbitmq-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
@@ -302,40 +442,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="21" priority="1000000">
-    <action_set>
-      <pseudo_event id="40" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
-        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="33" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="35" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="37" operation="start" operation_key="rabbitmq:2_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="39" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="22">
-    <action_set>
-      <pseudo_event id="39" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
-        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <pseudo_event id="29" operation="start" operation_key="rabbitmq-bundle_start_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="23" priority="1000000">
+  <synapse id="30" priority="1000000">
     <action_set>
       <pseudo_event id="30" operation="running" operation_key="rabbitmq-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
@@ -352,11 +459,11 @@
         <rsc_op id="13" operation="start" operation_key="rabbitmq-bundle-docker-2_start_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="40" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
+        <pseudo_event id="44" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="24">
+  <synapse id="31">
     <action_set>
       <pseudo_event id="29" operation="start" operation_key="rabbitmq-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
@@ -364,7 +471,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="25">
+  <synapse id="32">
     <action_set>
       <pseudo_event id="10" operation="all_stopped" operation_key="all_stopped">
         <attributes />
diff --git a/pengine/test10/bundle-nested-colocation.summary b/pengine/test10/bundle-nested-colocation.summary
index 0e2a68d..b2cec51 100644
--- a/pengine/test10/bundle-nested-colocation.summary
+++ b/pengine/test10/bundle-nested-colocation.summary
@@ -28,11 +28,14 @@ Transition Summary:
  * Start   rabbitmq:2	(rabbitmq-bundle-2)
 
 Executing cluster transition:
+ * Pseudo action:   rabbitmq-bundle-clone_pre_notify_start_0
  * Resource action: rabbitmq-bundle-docker-0 stop on overcloud-rabbit-0
  * Resource action: rabbitmq-bundle-docker-1 stop on overcloud-rabbit-1
  * Resource action: rabbitmq-bundle-docker-2 stop on overcloud-rabbit-2
  * Pseudo action:   rabbitmq-bundle_start_0
  * Pseudo action:   all_stopped
+ * Pseudo action:   rabbitmq-bundle-clone_confirmed-pre_notify_start_0
+ * Pseudo action:   rabbitmq-bundle-clone_start_0
  * Resource action: rabbitmq-bundle-docker-0 start on overcloud-rabbit-0
  * Resource action: rabbitmq-bundle-docker-0 monitor=60000 on overcloud-rabbit-0
  * Resource action: rabbitmq-bundle-0 start on overcloud-controller-0
@@ -42,14 +45,18 @@ Executing cluster transition:
  * Resource action: rabbitmq-bundle-docker-2 start on overcloud-rabbit-2
  * Resource action: rabbitmq-bundle-docker-2 monitor=60000 on overcloud-rabbit-2
  * Resource action: rabbitmq-bundle-2 start on overcloud-controller-2
- * Pseudo action:   rabbitmq-bundle-clone_start_0
  * Resource action: rabbitmq:0      start on rabbitmq-bundle-0
- * Resource action: rabbitmq-bundle-0 monitor=60000 on overcloud-controller-0
  * Resource action: rabbitmq:1      start on rabbitmq-bundle-1
- * Resource action: rabbitmq-bundle-1 monitor=60000 on overcloud-controller-1
  * Resource action: rabbitmq:2      start on rabbitmq-bundle-2
- * Resource action: rabbitmq-bundle-2 monitor=60000 on overcloud-controller-2
  * Pseudo action:   rabbitmq-bundle-clone_running_0
+ * Resource action: rabbitmq-bundle-0 monitor=60000 on overcloud-controller-0
+ * Resource action: rabbitmq-bundle-1 monitor=60000 on overcloud-controller-1
+ * Resource action: rabbitmq-bundle-2 monitor=60000 on overcloud-controller-2
+ * Pseudo action:   rabbitmq-bundle-clone_post_notify_running_0
+ * Resource action: rabbitmq:0      notify on rabbitmq-bundle-0
+ * Resource action: rabbitmq:1      notify on rabbitmq-bundle-1
+ * Resource action: rabbitmq:2      notify on rabbitmq-bundle-2
+ * Pseudo action:   rabbitmq-bundle-clone_confirmed-post_notify_running_0
  * Pseudo action:   rabbitmq-bundle_running_0
  * Resource action: rabbitmq:0      monitor=10000 on rabbitmq-bundle-0
  * Resource action: rabbitmq:1      monitor=10000 on rabbitmq-bundle-1
diff --git a/pengine/test10/bundle-order-partial-start-2.dot b/pengine/test10/bundle-order-partial-start-2.dot
index b5ecaf5..d58e809 100644
--- a/pengine/test10/bundle-order-partial-start-2.dot
+++ b/pengine/test10/bundle-order-partial-start-2.dot
@@ -44,7 +44,18 @@ digraph "g" {
 "haproxy-bundle_running_0" [ style=bold color="green" fontcolor="orange"]
 "haproxy-bundle_start_0" -> "haproxy-bundle-docker-0_start_0 undercloud" [ style = bold]
 "haproxy-bundle_start_0" [ style=bold color="green" fontcolor="orange"]
-"rabbitmq-bundle-clone_running_0" -> "rabbitmq-bundle_running_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" -> "rabbitmq-bundle_running_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" -> "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" -> "rabbitmq-bundle-clone_post_notify_running_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" -> "rabbitmq-bundle-clone_start_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_post_notify_running_0" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = bold]
+"rabbitmq-bundle-clone_post_notify_running_0" -> "rabbitmq:0_post_notify_start_0 rabbitmq-bundle-0" [ style = bold]
+"rabbitmq-bundle-clone_post_notify_running_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_pre_notify_start_0" -> "rabbitmq-bundle-clone_confirmed-pre_notify_start_0" [ style = bold]
+"rabbitmq-bundle-clone_pre_notify_start_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_running_0" -> "rabbitmq-bundle-clone_post_notify_running_0" [ style = bold]
 "rabbitmq-bundle-clone_running_0" [ style=bold color="green" fontcolor="orange"]
 "rabbitmq-bundle-clone_start_0" -> "rabbitmq-bundle-clone_running_0" [ style = bold]
 "rabbitmq-bundle-clone_start_0" -> "rabbitmq:0_start_0 rabbitmq-bundle-0" [ style = bold]
@@ -54,18 +65,36 @@ digraph "g" {
 "rabbitmq-bundle_start_0" -> "rabbitmq-bundle-clone_start_0" [ style = bold]
 "rabbitmq-bundle_start_0" [ style=bold color="green" fontcolor="orange"]
 "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
+"rabbitmq:0_post_notify_start_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = bold]
+"rabbitmq:0_post_notify_start_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
 "rabbitmq:0_start_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_running_0" [ style = bold]
 "rabbitmq:0_start_0 rabbitmq-bundle-0" -> "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style = bold]
 "rabbitmq:0_start_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-master_confirmed-post_notify_promoted_0" -> "redis-bundle_promoted_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_promoted_0" -> "redis_monitor_20000 redis-bundle-0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_promoted_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-pre_notify_promote_0" -> "redis-bundle-master_post_notify_promoted_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_promote_0" -> "redis-bundle-master_promote_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_promote_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_post_notify_promoted_0" -> "redis-bundle-master_confirmed-post_notify_promoted_0" [ style = bold]
+"redis-bundle-master_post_notify_promoted_0" -> "redis_post_notify_promoted_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_post_notify_promoted_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_pre_notify_promote_0" -> "redis-bundle-master_confirmed-pre_notify_promote_0" [ style = bold]
+"redis-bundle-master_pre_notify_promote_0" -> "redis_pre_notify_promote_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_pre_notify_promote_0" [ style=bold color="green" fontcolor="orange"]
 "redis-bundle-master_promote_0" -> "redis_promote_0 redis-bundle-0" [ style = bold]
 "redis-bundle-master_promote_0" [ style=bold color="green" fontcolor="orange"]
-"redis-bundle-master_promoted_0" -> "redis-bundle_promoted_0" [ style = bold]
+"redis-bundle-master_promoted_0" -> "redis-bundle-master_post_notify_promoted_0" [ style = bold]
 "redis-bundle-master_promoted_0" [ style=bold color="green" fontcolor="orange"]
 "redis-bundle_promote_0" -> "redis-bundle-master_promote_0" [ style = bold]
 "redis-bundle_promote_0" [ style=bold color="green" fontcolor="orange"]
 "redis-bundle_promoted_0" -> "galera-bundle_start_0" [ style = bold]
 "redis-bundle_promoted_0" [ style=bold color="green" fontcolor="orange"]
 "redis_monitor_20000 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis_post_notify_promoted_0 redis-bundle-0" -> "redis-bundle-master_confirmed-post_notify_promoted_0" [ style = bold]
+"redis_post_notify_promoted_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis_pre_notify_promote_0 redis-bundle-0" -> "redis-bundle-master_confirmed-pre_notify_promote_0" [ style = bold]
+"redis_pre_notify_promote_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
 "redis_promote_0 redis-bundle-0" -> "redis-bundle-master_promoted_0" [ style = bold]
 "redis_promote_0 redis-bundle-0" -> "redis_monitor_20000 redis-bundle-0" [ style = bold]
 "redis_promote_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
diff --git a/pengine/test10/bundle-order-partial-start-2.exp b/pengine/test10/bundle-order-partial-start-2.exp
index a2740d7..b533469 100644
--- a/pengine/test10/bundle-order-partial-start-2.exp
+++ b/pengine/test10/bundle-order-partial-start-2.exp
@@ -1,22 +1,38 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
-  <synapse id="0">
+  <synapse id="0" priority="1000000">
+    <action_set>
+      <rsc_op id="128" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+        <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="30" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="1">
     <action_set>
       <rsc_op id="25" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
         <rsc_op id="24" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
+      <trigger>
+        <pseudo_event id="31" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+      </trigger>
     </inputs>
   </synapse>
-  <synapse id="1">
+  <synapse id="2">
     <action_set>
       <rsc_op id="24" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -25,87 +41,194 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="2">
+  <synapse id="3" priority="1000000">
     <action_set>
-      <rsc_op id="40" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <pseudo_event id="31" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="30" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="128" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="4" priority="1000000">
+    <action_set>
+      <pseudo_event id="30" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="27" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="29" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="5">
+    <action_set>
+      <pseudo_event id="29" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="28" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="6">
+    <action_set>
+      <pseudo_event id="28" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="7" priority="1000000">
+    <action_set>
+      <pseudo_event id="27" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="24" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="26" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="8">
+    <action_set>
+      <pseudo_event id="26" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="20" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="29" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="9">
+    <action_set>
+      <rsc_op id="48" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="33" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="41" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="3">
+  <synapse id="10">
     <action_set>
-      <rsc_op id="39" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="47" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="33" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="41" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="4">
+  <synapse id="11">
     <action_set>
-      <rsc_op id="38" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="31" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="39" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="33" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="41" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="41" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <pseudo_event id="49" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="5">
+  <synapse id="12" priority="1000000">
+    <action_set>
+      <pseudo_event id="50" operation="running" operation_key="galera-bundle-master_running_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="49" operation="start" operation_key="galera-bundle-master_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="13">
+    <action_set>
+      <pseudo_event id="49" operation="start" operation_key="galera-bundle-master_start_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="42" operation="start" operation_key="galera-bundle_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="14">
     <action_set>
-      <rsc_op id="31" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="39" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="30" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="38" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="34" operation="start" operation_key="galera-bundle_start_0"/>
+        <pseudo_event id="42" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="6">
+  <synapse id="15">
     <action_set>
-      <rsc_op id="30" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="38" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="32" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="40" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="7">
+  <synapse id="16">
     <action_set>
       <rsc_op id="3" operation="monitor" operation_key="galera-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -114,29 +237,29 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="31" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="39" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="8">
+  <synapse id="17">
     <action_set>
-      <rsc_op id="33" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="41" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3123"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="31" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="39" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="32" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="40" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="9">
+  <synapse id="18">
     <action_set>
-      <rsc_op id="32" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="40" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3123"/>
         <downed>
@@ -146,7 +269,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="10">
+  <synapse id="19">
     <action_set>
       <rsc_op id="4" operation="monitor" operation_key="galera-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
@@ -155,226 +278,257 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="33" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="41" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="11">
+  <synapse id="20" priority="1000000">
     <action_set>
-      <rsc_op id="64" operation="monitor" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="134" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="63" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <pseudo_event id="89" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12">
+  <synapse id="21">
     <action_set>
-      <rsc_op id="63" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="133" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="69" operation="promote" operation_key="redis-bundle-master_promote_0"/>
+        <pseudo_event id="87" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="13">
+  <synapse id="22">
     <action_set>
-      <rsc_op id="90" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
-        <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      <rsc_op id="72" operation="monitor" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="89" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="71" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="90" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14">
+  <synapse id="23">
     <action_set>
-      <rsc_op id="89" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      <rsc_op id="71" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="15" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="91" operation="start" operation_key="haproxy-bundle_start_0"/>
+        <pseudo_event id="85" operation="promote" operation_key="redis-bundle-master_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
-    <action_set>
-      <rsc_op id="15" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
-      </rsc_op>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="16" priority="1000000">
+  <synapse id="24" priority="1000000">
     <action_set>
-      <pseudo_event id="92" operation="running" operation_key="haproxy-bundle_running_0">
-        <attributes CRM_meta_timeout="20000" />
+      <pseudo_event id="90" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="89" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="89" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="134" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="17">
+  <synapse id="25" priority="1000000">
     <action_set>
-      <pseudo_event id="91" operation="start" operation_key="haproxy-bundle_start_0">
-        <attributes CRM_meta_timeout="20000" />
+      <pseudo_event id="89" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <pseudo_event id="86" operation="promoted" operation_key="redis-bundle-master_promoted_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="88" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+      </trigger>
+    </inputs>
   </synapse>
-  <synapse id="18" priority="1000000">
+  <synapse id="26">
     <action_set>
-      <pseudo_event id="74" operation="promoted" operation_key="redis-bundle_promoted_0">
-        <attributes CRM_meta_timeout="20000" />
+      <pseudo_event id="88" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="70" operation="promoted" operation_key="redis-bundle-master_promoted_0"/>
+        <pseudo_event id="87" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="133" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="19">
+  <synapse id="27">
     <action_set>
-      <pseudo_event id="73" operation="promote" operation_key="redis-bundle_promote_0">
-        <attributes CRM_meta_timeout="20000" />
+      <pseudo_event id="87" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="20" priority="1000000">
+  <synapse id="28" priority="1000000">
     <action_set>
-      <pseudo_event id="70" operation="promoted" operation_key="redis-bundle-master_promoted_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="86" operation="promoted" operation_key="redis-bundle-master_promoted_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="63" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="71" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="21">
+  <synapse id="29">
     <action_set>
-      <pseudo_event id="69" operation="promote" operation_key="redis-bundle-master_promote_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="85" operation="promote" operation_key="redis-bundle-master_promote_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="73" operation="promote" operation_key="redis-bundle_promote_0"/>
+        <pseudo_event id="88" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="97" operation="promote" operation_key="redis-bundle_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="22" priority="1000000">
+  <synapse id="30">
     <action_set>
-      <pseudo_event id="42" operation="running" operation_key="galera-bundle-master_running_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="114" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+        <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="41" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <rsc_op id="113" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="23">
+  <synapse id="31">
     <action_set>
-      <pseudo_event id="41" operation="start" operation_key="galera-bundle-master_start_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="113" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="34" operation="start" operation_key="galera-bundle_start_0"/>
+        <rsc_op id="15" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="115" operation="start" operation_key="haproxy-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="24" priority="1000000">
+  <synapse id="32">
+    <action_set>
+      <rsc_op id="15" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="33" priority="1000000">
     <action_set>
-      <pseudo_event id="35" operation="running" operation_key="galera-bundle_running_0">
+      <pseudo_event id="116" operation="running" operation_key="haproxy-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="31" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="42" operation="running" operation_key="galera-bundle-master_running_0"/>
+        <rsc_op id="113" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="25">
+  <synapse id="34">
+    <action_set>
+      <pseudo_event id="115" operation="start" operation_key="haproxy-bundle_start_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="35" priority="1000000">
     <action_set>
-      <pseudo_event id="34" operation="start" operation_key="galera-bundle_start_0">
+      <pseudo_event id="98" operation="promoted" operation_key="redis-bundle_promoted_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="21" operation="running" operation_key="rabbitmq-bundle_running_0"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="74" operation="promoted" operation_key="redis-bundle_promoted_0"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="92" operation="running" operation_key="haproxy-bundle_running_0"/>
+        <pseudo_event id="90" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="26" priority="1000000">
+  <synapse id="36">
     <action_set>
-      <pseudo_event id="27" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="97" operation="promote" operation_key="redis-bundle_promote_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="37" priority="1000000">
+    <action_set>
+      <pseudo_event id="43" operation="running" operation_key="galera-bundle_running_0">
+        <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="24" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="39" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="26" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="50" operation="running" operation_key="galera-bundle-master_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="27">
+  <synapse id="38">
     <action_set>
-      <pseudo_event id="26" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="42" operation="start" operation_key="galera-bundle_start_0">
+        <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="20" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+        <pseudo_event id="21" operation="running" operation_key="rabbitmq-bundle_running_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="98" operation="promoted" operation_key="redis-bundle_promoted_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="116" operation="running" operation_key="haproxy-bundle_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="28" priority="1000000">
+  <synapse id="39" priority="1000000">
     <action_set>
       <pseudo_event id="21" operation="running" operation_key="rabbitmq-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
@@ -382,11 +536,11 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="27" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
+        <pseudo_event id="31" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="29">
+  <synapse id="40">
     <action_set>
       <pseudo_event id="20" operation="start" operation_key="rabbitmq-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
@@ -394,7 +548,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="30">
+  <synapse id="41">
     <action_set>
       <pseudo_event id="14" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -402,10 +556,10 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="30" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="38" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="32" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="40" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/bundle-order-partial-start-2.summary b/pengine/test10/bundle-order-partial-start-2.summary
index 790bd17..bf14db0 100644
--- a/pengine/test10/bundle-order-partial-start-2.summary
+++ b/pengine/test10/bundle-order-partial-start-2.summary
@@ -29,32 +29,43 @@ Transition Summary:
  * Start   haproxy-bundle-docker-0	(undercloud)
 
 Executing cluster transition:
+ * Pseudo action:   rabbitmq-bundle-clone_pre_notify_start_0
  * Resource action: galera-bundle-0 stop on undercloud
+ * Pseudo action:   redis-bundle-master_pre_notify_promote_0
  * Resource action: haproxy-bundle-docker-0 monitor on undercloud
  * Pseudo action:   haproxy-bundle_start_0
  * Pseudo action:   redis-bundle_promote_0
- * Pseudo action:   redis-bundle-master_promote_0
  * Pseudo action:   rabbitmq-bundle_start_0
+ * Pseudo action:   rabbitmq-bundle-clone_confirmed-pre_notify_start_0
+ * Pseudo action:   rabbitmq-bundle-clone_start_0
  * Resource action: galera-bundle-docker-0 stop on undercloud
- * Resource action: redis           promote on redis-bundle-0
+ * Resource action: redis           notify on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_confirmed-pre_notify_promote_0
+ * Pseudo action:   redis-bundle-master_promote_0
  * Resource action: haproxy-bundle-docker-0 start on undercloud
  * Pseudo action:   haproxy-bundle_running_0
- * Pseudo action:   redis-bundle-master_promoted_0
- * Pseudo action:   rabbitmq-bundle-clone_start_0
  * Pseudo action:   all_stopped
  * Resource action: rabbitmq:0      start on rabbitmq-bundle-0
- * Resource action: redis           monitor=20000 on redis-bundle-0
+ * Pseudo action:   rabbitmq-bundle-clone_running_0
+ * Resource action: redis           promote on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_promoted_0
  * Resource action: haproxy-bundle-docker-0 monitor=60000 on undercloud
+ * Pseudo action:   rabbitmq-bundle-clone_post_notify_running_0
+ * Pseudo action:   redis-bundle-master_post_notify_promoted_0
+ * Resource action: rabbitmq:0      notify on rabbitmq-bundle-0
+ * Pseudo action:   rabbitmq-bundle-clone_confirmed-post_notify_running_0
+ * Resource action: redis           notify on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_confirmed-post_notify_promoted_0
  * Pseudo action:   redis-bundle_promoted_0
- * Pseudo action:   rabbitmq-bundle-clone_running_0
  * Pseudo action:   rabbitmq-bundle_running_0
  * Resource action: rabbitmq:0      monitor=10000 on rabbitmq-bundle-0
+ * Resource action: redis           monitor=20000 on redis-bundle-0
  * Pseudo action:   galera-bundle_start_0
+ * Pseudo action:   galera-bundle-master_start_0
  * Resource action: galera-bundle-docker-0 start on undercloud
  * Resource action: galera-bundle-docker-0 monitor=60000 on undercloud
  * Resource action: galera-bundle-0 start on undercloud
  * Resource action: galera-bundle-0 monitor=60000 on undercloud
- * Pseudo action:   galera-bundle-master_start_0
  * Resource action: galera:0        start on galera-bundle-0
  * Pseudo action:   galera-bundle-master_running_0
  * Pseudo action:   galera-bundle_running_0
diff --git a/pengine/test10/bundle-order-partial-start.dot b/pengine/test10/bundle-order-partial-start.dot
index 756acfd..796749d 100644
--- a/pengine/test10/bundle-order-partial-start.dot
+++ b/pengine/test10/bundle-order-partial-start.dot
@@ -38,7 +38,18 @@ digraph "g" {
 "haproxy-bundle_running_0" [ style=bold color="green" fontcolor="orange"]
 "haproxy-bundle_start_0" -> "haproxy-bundle-docker-0_start_0 undercloud" [ style = bold]
 "haproxy-bundle_start_0" [ style=bold color="green" fontcolor="orange"]
-"rabbitmq-bundle-clone_running_0" -> "rabbitmq-bundle_running_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" -> "rabbitmq-bundle_running_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" -> "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" -> "rabbitmq-bundle-clone_post_notify_running_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" -> "rabbitmq-bundle-clone_start_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_post_notify_running_0" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = bold]
+"rabbitmq-bundle-clone_post_notify_running_0" -> "rabbitmq:0_post_notify_start_0 rabbitmq-bundle-0" [ style = bold]
+"rabbitmq-bundle-clone_post_notify_running_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_pre_notify_start_0" -> "rabbitmq-bundle-clone_confirmed-pre_notify_start_0" [ style = bold]
+"rabbitmq-bundle-clone_pre_notify_start_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_running_0" -> "rabbitmq-bundle-clone_post_notify_running_0" [ style = bold]
 "rabbitmq-bundle-clone_running_0" [ style=bold color="green" fontcolor="orange"]
 "rabbitmq-bundle-clone_start_0" -> "rabbitmq-bundle-clone_running_0" [ style = bold]
 "rabbitmq-bundle-clone_start_0" -> "rabbitmq:0_start_0 rabbitmq-bundle-0" [ style = bold]
@@ -48,18 +59,36 @@ digraph "g" {
 "rabbitmq-bundle_start_0" -> "rabbitmq-bundle-clone_start_0" [ style = bold]
 "rabbitmq-bundle_start_0" [ style=bold color="green" fontcolor="orange"]
 "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
+"rabbitmq:0_post_notify_start_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = bold]
+"rabbitmq:0_post_notify_start_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
 "rabbitmq:0_start_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_running_0" [ style = bold]
 "rabbitmq:0_start_0 rabbitmq-bundle-0" -> "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style = bold]
 "rabbitmq:0_start_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-master_confirmed-post_notify_promoted_0" -> "redis-bundle_promoted_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_promoted_0" -> "redis_monitor_20000 redis-bundle-0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_promoted_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-pre_notify_promote_0" -> "redis-bundle-master_post_notify_promoted_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_promote_0" -> "redis-bundle-master_promote_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_promote_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_post_notify_promoted_0" -> "redis-bundle-master_confirmed-post_notify_promoted_0" [ style = bold]
+"redis-bundle-master_post_notify_promoted_0" -> "redis_post_notify_promoted_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_post_notify_promoted_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_pre_notify_promote_0" -> "redis-bundle-master_confirmed-pre_notify_promote_0" [ style = bold]
+"redis-bundle-master_pre_notify_promote_0" -> "redis_pre_notify_promote_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_pre_notify_promote_0" [ style=bold color="green" fontcolor="orange"]
 "redis-bundle-master_promote_0" -> "redis_promote_0 redis-bundle-0" [ style = bold]
 "redis-bundle-master_promote_0" [ style=bold color="green" fontcolor="orange"]
-"redis-bundle-master_promoted_0" -> "redis-bundle_promoted_0" [ style = bold]
+"redis-bundle-master_promoted_0" -> "redis-bundle-master_post_notify_promoted_0" [ style = bold]
 "redis-bundle-master_promoted_0" [ style=bold color="green" fontcolor="orange"]
 "redis-bundle_promote_0" -> "redis-bundle-master_promote_0" [ style = bold]
 "redis-bundle_promote_0" [ style=bold color="green" fontcolor="orange"]
 "redis-bundle_promoted_0" -> "galera-bundle_start_0" [ style = bold]
 "redis-bundle_promoted_0" [ style=bold color="green" fontcolor="orange"]
 "redis_monitor_20000 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis_post_notify_promoted_0 redis-bundle-0" -> "redis-bundle-master_confirmed-post_notify_promoted_0" [ style = bold]
+"redis_post_notify_promoted_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis_pre_notify_promote_0 redis-bundle-0" -> "redis-bundle-master_confirmed-pre_notify_promote_0" [ style = bold]
+"redis_pre_notify_promote_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
 "redis_promote_0 redis-bundle-0" -> "redis-bundle-master_promoted_0" [ style = bold]
 "redis_promote_0 redis-bundle-0" -> "redis_monitor_20000 redis-bundle-0" [ style = bold]
 "redis_promote_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
diff --git a/pengine/test10/bundle-order-partial-start.exp b/pengine/test10/bundle-order-partial-start.exp
index ebd5785..1f8a3e1 100644
--- a/pengine/test10/bundle-order-partial-start.exp
+++ b/pengine/test10/bundle-order-partial-start.exp
@@ -1,22 +1,38 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
-  <synapse id="0">
+  <synapse id="0" priority="1000000">
+    <action_set>
+      <rsc_op id="127" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+        <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="29" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="1">
     <action_set>
       <rsc_op id="24" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
         <rsc_op id="23" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
+      <trigger>
+        <pseudo_event id="30" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+      </trigger>
     </inputs>
   </synapse>
-  <synapse id="1">
+  <synapse id="2">
     <action_set>
       <rsc_op id="23" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -25,73 +41,180 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="2">
+  <synapse id="3" priority="1000000">
+    <action_set>
+      <pseudo_event id="30" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="29" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="127" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="4" priority="1000000">
+    <action_set>
+      <pseudo_event id="29" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="26" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="28" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="5">
+    <action_set>
+      <pseudo_event id="28" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="27" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="6">
+    <action_set>
+      <pseudo_event id="27" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="7" priority="1000000">
     <action_set>
-      <rsc_op id="39" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <pseudo_event id="26" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="23" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="25" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="8">
+    <action_set>
+      <pseudo_event id="25" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="19" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="28" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="9">
+    <action_set>
+      <rsc_op id="47" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="31" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="39" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="45" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="3">
+  <synapse id="10">
     <action_set>
-      <rsc_op id="38" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="46" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="31" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="39" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="45" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="4">
+  <synapse id="11">
     <action_set>
-      <rsc_op id="37" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="45" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="29" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="37" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="31" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="39" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="40" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <pseudo_event id="48" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="5">
+  <synapse id="12" priority="1000000">
     <action_set>
-      <rsc_op id="30" operation="monitor" operation_key="galera-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <pseudo_event id="49" operation="running" operation_key="galera-bundle-master_running_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="45" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="48" operation="start" operation_key="galera-bundle-master_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="13">
+    <action_set>
+      <pseudo_event id="48" operation="start" operation_key="galera-bundle-master_start_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="41" operation="start" operation_key="galera-bundle_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="14">
+    <action_set>
+      <rsc_op id="38" operation="monitor" operation_key="galera-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="29" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="37" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="6">
+  <synapse id="15">
     <action_set>
-      <rsc_op id="29" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="37" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
@@ -101,11 +224,11 @@
         <rsc_op id="13" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="33" operation="start" operation_key="galera-bundle_start_0"/>
+        <pseudo_event id="41" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="7">
+  <synapse id="16">
     <action_set>
       <rsc_op id="13" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -114,248 +237,279 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="8">
+  <synapse id="17">
     <action_set>
-      <rsc_op id="32" operation="monitor" operation_key="galera-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="40" operation="monitor" operation_key="galera-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3123"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="31" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="39" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="9">
+  <synapse id="18">
     <action_set>
-      <rsc_op id="31" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="39" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3123"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="29" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="37" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10">
+  <synapse id="19" priority="1000000">
     <action_set>
-      <rsc_op id="63" operation="monitor" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="133" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="62" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <pseudo_event id="88" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="11">
+  <synapse id="20">
     <action_set>
-      <rsc_op id="62" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="132" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="68" operation="promote" operation_key="redis-bundle-master_promote_0"/>
+        <pseudo_event id="86" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12">
+  <synapse id="21">
     <action_set>
-      <rsc_op id="89" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
-        <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      <rsc_op id="71" operation="monitor" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="88" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="70" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="89" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="13">
+  <synapse id="22">
     <action_set>
-      <rsc_op id="88" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      <rsc_op id="70" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="14" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="90" operation="start" operation_key="haproxy-bundle_start_0"/>
+        <pseudo_event id="84" operation="promote" operation_key="redis-bundle-master_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14">
-    <action_set>
-      <rsc_op id="14" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
-      </rsc_op>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="15" priority="1000000">
+  <synapse id="23" priority="1000000">
     <action_set>
-      <pseudo_event id="91" operation="running" operation_key="haproxy-bundle_running_0">
-        <attributes CRM_meta_timeout="20000" />
+      <pseudo_event id="89" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="88" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="88" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="133" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="16">
+  <synapse id="24" priority="1000000">
     <action_set>
-      <pseudo_event id="90" operation="start" operation_key="haproxy-bundle_start_0">
-        <attributes CRM_meta_timeout="20000" />
+      <pseudo_event id="88" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <pseudo_event id="85" operation="promoted" operation_key="redis-bundle-master_promoted_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="87" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+      </trigger>
+    </inputs>
   </synapse>
-  <synapse id="17" priority="1000000">
+  <synapse id="25">
     <action_set>
-      <pseudo_event id="73" operation="promoted" operation_key="redis-bundle_promoted_0">
-        <attributes CRM_meta_timeout="20000" />
+      <pseudo_event id="87" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="69" operation="promoted" operation_key="redis-bundle-master_promoted_0"/>
+        <pseudo_event id="86" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="132" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="18">
+  <synapse id="26">
     <action_set>
-      <pseudo_event id="72" operation="promote" operation_key="redis-bundle_promote_0">
-        <attributes CRM_meta_timeout="20000" />
+      <pseudo_event id="86" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="19" priority="1000000">
+  <synapse id="27" priority="1000000">
     <action_set>
-      <pseudo_event id="69" operation="promoted" operation_key="redis-bundle-master_promoted_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="85" operation="promoted" operation_key="redis-bundle-master_promoted_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="62" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="70" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="20">
+  <synapse id="28">
     <action_set>
-      <pseudo_event id="68" operation="promote" operation_key="redis-bundle-master_promote_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="84" operation="promote" operation_key="redis-bundle-master_promote_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="72" operation="promote" operation_key="redis-bundle_promote_0"/>
+        <pseudo_event id="87" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="96" operation="promote" operation_key="redis-bundle_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="21" priority="1000000">
+  <synapse id="29">
     <action_set>
-      <pseudo_event id="41" operation="running" operation_key="galera-bundle-master_running_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="113" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+        <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="40" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <rsc_op id="112" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="22">
+  <synapse id="30">
     <action_set>
-      <pseudo_event id="40" operation="start" operation_key="galera-bundle-master_start_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="112" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="33" operation="start" operation_key="galera-bundle_start_0"/>
+        <rsc_op id="14" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="114" operation="start" operation_key="haproxy-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="23" priority="1000000">
+  <synapse id="31">
+    <action_set>
+      <rsc_op id="14" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="32" priority="1000000">
     <action_set>
-      <pseudo_event id="34" operation="running" operation_key="galera-bundle_running_0">
+      <pseudo_event id="115" operation="running" operation_key="haproxy-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="29" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="41" operation="running" operation_key="galera-bundle-master_running_0"/>
+        <rsc_op id="112" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="24">
+  <synapse id="33">
+    <action_set>
+      <pseudo_event id="114" operation="start" operation_key="haproxy-bundle_start_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="34" priority="1000000">
     <action_set>
-      <pseudo_event id="33" operation="start" operation_key="galera-bundle_start_0">
+      <pseudo_event id="97" operation="promoted" operation_key="redis-bundle_promoted_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="20" operation="running" operation_key="rabbitmq-bundle_running_0"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="73" operation="promoted" operation_key="redis-bundle_promoted_0"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="91" operation="running" operation_key="haproxy-bundle_running_0"/>
+        <pseudo_event id="89" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="25" priority="1000000">
+  <synapse id="35">
     <action_set>
-      <pseudo_event id="26" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="96" operation="promote" operation_key="redis-bundle_promote_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="36" priority="1000000">
+    <action_set>
+      <pseudo_event id="42" operation="running" operation_key="galera-bundle_running_0">
+        <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="23" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="37" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="25" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="49" operation="running" operation_key="galera-bundle-master_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="26">
+  <synapse id="37">
     <action_set>
-      <pseudo_event id="25" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="41" operation="start" operation_key="galera-bundle_start_0">
+        <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="19" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+        <pseudo_event id="20" operation="running" operation_key="rabbitmq-bundle_running_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="97" operation="promoted" operation_key="redis-bundle_promoted_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="115" operation="running" operation_key="haproxy-bundle_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="27" priority="1000000">
+  <synapse id="38" priority="1000000">
     <action_set>
       <pseudo_event id="20" operation="running" operation_key="rabbitmq-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
@@ -363,11 +517,11 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="26" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
+        <pseudo_event id="30" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="28">
+  <synapse id="39">
     <action_set>
       <pseudo_event id="19" operation="start" operation_key="rabbitmq-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
diff --git a/pengine/test10/bundle-order-partial-start.summary b/pengine/test10/bundle-order-partial-start.summary
index e56e55f..4e02e88 100644
--- a/pengine/test10/bundle-order-partial-start.summary
+++ b/pengine/test10/bundle-order-partial-start.summary
@@ -29,32 +29,43 @@ Transition Summary:
  * Start   haproxy-bundle-docker-0	(undercloud)
 
 Executing cluster transition:
+ * Pseudo action:   rabbitmq-bundle-clone_pre_notify_start_0
  * Resource action: galera-bundle-docker-0 monitor on undercloud
+ * Pseudo action:   redis-bundle-master_pre_notify_promote_0
  * Resource action: haproxy-bundle-docker-0 monitor on undercloud
  * Pseudo action:   haproxy-bundle_start_0
  * Pseudo action:   redis-bundle_promote_0
- * Pseudo action:   redis-bundle-master_promote_0
  * Pseudo action:   rabbitmq-bundle_start_0
- * Resource action: redis           promote on redis-bundle-0
+ * Pseudo action:   rabbitmq-bundle-clone_confirmed-pre_notify_start_0
+ * Pseudo action:   rabbitmq-bundle-clone_start_0
+ * Resource action: redis           notify on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_confirmed-pre_notify_promote_0
+ * Pseudo action:   redis-bundle-master_promote_0
  * Resource action: haproxy-bundle-docker-0 start on undercloud
  * Pseudo action:   haproxy-bundle_running_0
- * Pseudo action:   redis-bundle-master_promoted_0
- * Pseudo action:   rabbitmq-bundle-clone_start_0
  * Resource action: rabbitmq:0      start on rabbitmq-bundle-0
- * Resource action: redis           monitor=20000 on redis-bundle-0
+ * Pseudo action:   rabbitmq-bundle-clone_running_0
+ * Resource action: redis           promote on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_promoted_0
  * Resource action: haproxy-bundle-docker-0 monitor=60000 on undercloud
+ * Pseudo action:   rabbitmq-bundle-clone_post_notify_running_0
+ * Pseudo action:   redis-bundle-master_post_notify_promoted_0
+ * Resource action: rabbitmq:0      notify on rabbitmq-bundle-0
+ * Pseudo action:   rabbitmq-bundle-clone_confirmed-post_notify_running_0
+ * Resource action: redis           notify on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_confirmed-post_notify_promoted_0
  * Pseudo action:   redis-bundle_promoted_0
- * Pseudo action:   rabbitmq-bundle-clone_running_0
  * Pseudo action:   rabbitmq-bundle_running_0
  * Resource action: rabbitmq:0      monitor=10000 on rabbitmq-bundle-0
+ * Resource action: redis           monitor=20000 on redis-bundle-0
  * Pseudo action:   galera-bundle_start_0
+ * Pseudo action:   galera-bundle-master_start_0
  * Resource action: galera-bundle-docker-0 start on undercloud
  * Resource action: galera-bundle-0 start on undercloud
- * Pseudo action:   galera-bundle-master_start_0
  * Resource action: galera:0        start on galera-bundle-0
+ * Pseudo action:   galera-bundle-master_running_0
  * Resource action: galera-bundle-docker-0 monitor=60000 on undercloud
  * Resource action: galera-bundle-0 monitor=60000 on undercloud
- * Pseudo action:   galera-bundle-master_running_0
  * Pseudo action:   galera-bundle_running_0
  * Resource action: galera:0        monitor=30000 on galera-bundle-0
  * Resource action: galera:0        monitor=20000 on galera-bundle-0
diff --git a/pengine/test10/bundle-order-partial-stop.dot b/pengine/test10/bundle-order-partial-stop.dot
index c0e6616..3fade95 100644
--- a/pengine/test10/bundle-order-partial-stop.dot
+++ b/pengine/test10/bundle-order-partial-stop.dot
@@ -118,7 +118,29 @@ digraph "g" {
 "rabbitmq-bundle-0_stop_0 undercloud" -> "do_shutdown undercloud" [ style = bold]
 "rabbitmq-bundle-0_stop_0 undercloud" -> "rabbitmq-bundle-docker-0_stop_0 undercloud" [ style = bold]
 "rabbitmq-bundle-0_stop_0 undercloud" [ style=bold color="green" fontcolor="black"]
-"rabbitmq-bundle-clone_running_0" -> "rabbitmq-bundle_running_0" [ style = dashed]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" -> "rabbitmq-bundle_running_0" [ style = dashed]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" -> "rabbitmq_monitor_10000 rabbitmq-bundle-0" [ style = dashed]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style=dashed color="red" fontcolor="orange"]
+"rabbitmq-bundle-clone_confirmed-post_notify_stopped_0" -> "all_stopped" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_stopped_0" -> "rabbitmq-bundle-clone_pre_notify_start_0" [ style = dashed]
+"rabbitmq-bundle-clone_confirmed-post_notify_stopped_0" -> "rabbitmq-bundle_stopped_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" -> "rabbitmq-bundle-clone_post_notify_running_0" [ style = dashed]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" -> "rabbitmq-bundle-clone_start_0" [ style = dashed]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" [ style=dashed color="red" fontcolor="orange"]
+"rabbitmq-bundle-clone_confirmed-pre_notify_stop_0" -> "rabbitmq-bundle-clone_post_notify_stopped_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-pre_notify_stop_0" -> "rabbitmq-bundle-clone_stop_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-pre_notify_stop_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_post_notify_running_0" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = dashed]
+"rabbitmq-bundle-clone_post_notify_running_0" [ style=dashed color="red" fontcolor="orange"]
+"rabbitmq-bundle-clone_post_notify_stopped_0" -> "rabbitmq-bundle-clone_confirmed-post_notify_stopped_0" [ style = bold]
+"rabbitmq-bundle-clone_post_notify_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_pre_notify_start_0" -> "rabbitmq-bundle-clone_confirmed-pre_notify_start_0" [ style = dashed]
+"rabbitmq-bundle-clone_pre_notify_start_0" [ style=dashed color="red" fontcolor="orange"]
+"rabbitmq-bundle-clone_pre_notify_stop_0" -> "rabbitmq-bundle-clone_confirmed-pre_notify_stop_0" [ style = bold]
+"rabbitmq-bundle-clone_pre_notify_stop_0" -> "rabbitmq_pre_notify_stop_0 rabbitmq-bundle-0" [ style = bold]
+"rabbitmq-bundle-clone_pre_notify_stop_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_running_0" -> "rabbitmq-bundle-clone_post_notify_running_0" [ style = dashed]
 "rabbitmq-bundle-clone_running_0" [ style=dashed color="red" fontcolor="orange"]
 "rabbitmq-bundle-clone_start_0" -> "rabbitmq-bundle-clone_running_0" [ style = dashed]
 "rabbitmq-bundle-clone_start_0" -> "rabbitmq_start_0 rabbitmq-bundle-0" [ style = dashed]
@@ -126,8 +148,8 @@ digraph "g" {
 "rabbitmq-bundle-clone_stop_0" -> "rabbitmq-bundle-clone_stopped_0" [ style = bold]
 "rabbitmq-bundle-clone_stop_0" -> "rabbitmq_stop_0 rabbitmq-bundle-0" [ style = bold]
 "rabbitmq-bundle-clone_stop_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_stopped_0" -> "rabbitmq-bundle-clone_post_notify_stopped_0" [ style = bold]
 "rabbitmq-bundle-clone_stopped_0" -> "rabbitmq-bundle-clone_start_0" [ style = dashed]
-"rabbitmq-bundle-clone_stopped_0" -> "rabbitmq-bundle_stopped_0" [ style = bold]
 "rabbitmq-bundle-clone_stopped_0" [ style=bold color="green" fontcolor="orange"]
 "rabbitmq-bundle-docker-0_stop_0 undercloud" -> "all_stopped" [ style = bold]
 "rabbitmq-bundle-docker-0_stop_0 undercloud" -> "do_shutdown undercloud" [ style = bold]
@@ -140,6 +162,8 @@ digraph "g" {
 "rabbitmq-bundle_stop_0" [ style=bold color="green" fontcolor="orange"]
 "rabbitmq-bundle_stopped_0" [ style=bold color="green" fontcolor="orange"]
 "rabbitmq_monitor_10000 rabbitmq-bundle-0" [ style=dashed color="red" fontcolor="black"]
+"rabbitmq_pre_notify_stop_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_confirmed-pre_notify_stop_0" [ style = bold]
+"rabbitmq_pre_notify_stop_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
 "rabbitmq_start_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_running_0" [ style = dashed]
 "rabbitmq_start_0 rabbitmq-bundle-0" -> "rabbitmq_monitor_10000 rabbitmq-bundle-0" [ style = dashed]
 "rabbitmq_start_0 rabbitmq-bundle-0" [ style=dashed color="red" fontcolor="black"]
@@ -156,14 +180,52 @@ digraph "g" {
 "redis-bundle-docker-0_stop_0 undercloud" -> "do_shutdown undercloud" [ style = bold]
 "redis-bundle-docker-0_stop_0 undercloud" -> "redis-bundle_stopped_0" [ style = bold]
 "redis-bundle-docker-0_stop_0 undercloud" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-master_confirmed-post_notify_demoted_0" -> "redis-bundle-master_pre_notify_start_0" [ style = dashed]
+"redis-bundle-master_confirmed-post_notify_demoted_0" -> "redis-bundle-master_pre_notify_stop_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_demoted_0" -> "redis-bundle_demoted_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_demoted_0" -> "redis_monitor_45000 redis-bundle-0" [ style = dashed]
+"redis-bundle-master_confirmed-post_notify_demoted_0" -> "redis_monitor_60000 redis-bundle-0" [ style = dashed]
+"redis-bundle-master_confirmed-post_notify_demoted_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis-bundle_running_0" [ style = dashed]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis_monitor_45000 redis-bundle-0" [ style = dashed]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis_monitor_60000 redis-bundle-0" [ style = dashed]
+"redis-bundle-master_confirmed-post_notify_running_0" [ style=dashed color="red" fontcolor="orange"]
+"redis-bundle-master_confirmed-post_notify_stopped_0" -> "all_stopped" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_stopped_0" -> "redis-bundle-master_pre_notify_start_0" [ style = dashed]
+"redis-bundle-master_confirmed-post_notify_stopped_0" -> "redis-bundle_stopped_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-pre_notify_demote_0" -> "redis-bundle-master_demote_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_demote_0" -> "redis-bundle-master_post_notify_demoted_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_demote_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-pre_notify_start_0" -> "redis-bundle-master_post_notify_running_0" [ style = dashed]
+"redis-bundle-master_confirmed-pre_notify_start_0" -> "redis-bundle-master_start_0" [ style = dashed]
+"redis-bundle-master_confirmed-pre_notify_start_0" [ style=dashed color="red" fontcolor="orange"]
+"redis-bundle-master_confirmed-pre_notify_stop_0" -> "redis-bundle-master_post_notify_stopped_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_stop_0" -> "redis-bundle-master_stop_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_stop_0" [ style=bold color="green" fontcolor="orange"]
 "redis-bundle-master_demote_0" -> "redis-bundle-master_demoted_0" [ style = bold]
 "redis-bundle-master_demote_0" -> "redis_demote_0 redis-bundle-0" [ style = bold]
 "redis-bundle-master_demote_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_demoted_0" -> "redis-bundle-master_post_notify_demoted_0" [ style = bold]
 "redis-bundle-master_demoted_0" -> "redis-bundle-master_start_0" [ style = dashed]
 "redis-bundle-master_demoted_0" -> "redis-bundle-master_stop_0" [ style = bold]
-"redis-bundle-master_demoted_0" -> "redis-bundle_demoted_0" [ style = bold]
 "redis-bundle-master_demoted_0" [ style=bold color="green" fontcolor="orange"]
-"redis-bundle-master_running_0" -> "redis-bundle_running_0" [ style = dashed]
+"redis-bundle-master_post_notify_demoted_0" -> "redis-bundle-master_confirmed-post_notify_demoted_0" [ style = bold]
+"redis-bundle-master_post_notify_demoted_0" -> "redis_post_notify_demoted_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_post_notify_demoted_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_post_notify_running_0" -> "redis-bundle-master_confirmed-post_notify_running_0" [ style = dashed]
+"redis-bundle-master_post_notify_running_0" [ style=dashed color="red" fontcolor="orange"]
+"redis-bundle-master_post_notify_stopped_0" -> "redis-bundle-master_confirmed-post_notify_stopped_0" [ style = bold]
+"redis-bundle-master_post_notify_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_pre_notify_demote_0" -> "redis-bundle-master_confirmed-pre_notify_demote_0" [ style = bold]
+"redis-bundle-master_pre_notify_demote_0" -> "redis_pre_notify_demote_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_pre_notify_demote_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_pre_notify_start_0" -> "redis-bundle-master_confirmed-pre_notify_start_0" [ style = dashed]
+"redis-bundle-master_pre_notify_start_0" [ style=dashed color="red" fontcolor="orange"]
+"redis-bundle-master_pre_notify_stop_0" -> "redis-bundle-master_confirmed-pre_notify_stop_0" [ style = bold]
+"redis-bundle-master_pre_notify_stop_0" -> "redis_pre_notify_stop_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_pre_notify_stop_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_running_0" -> "redis-bundle-master_post_notify_running_0" [ style = dashed]
 "redis-bundle-master_running_0" [ style=dashed color="red" fontcolor="orange"]
 "redis-bundle-master_start_0" -> "redis-bundle-master_running_0" [ style = dashed]
 "redis-bundle-master_start_0" -> "redis_start_0 redis-bundle-0" [ style = dashed]
@@ -171,8 +233,8 @@ digraph "g" {
 "redis-bundle-master_stop_0" -> "redis-bundle-master_stopped_0" [ style = bold]
 "redis-bundle-master_stop_0" -> "redis_stop_0 redis-bundle-0" [ style = bold]
 "redis-bundle-master_stop_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_stopped_0" -> "redis-bundle-master_post_notify_stopped_0" [ style = bold]
 "redis-bundle-master_stopped_0" -> "redis-bundle-master_start_0" [ style = dashed]
-"redis-bundle-master_stopped_0" -> "redis-bundle_stopped_0" [ style = bold]
 "redis-bundle-master_stopped_0" [ style=bold color="green" fontcolor="orange"]
 "redis-bundle_demote_0" -> "redis-bundle-master_demote_0" [ style = bold]
 "redis-bundle_demote_0" -> "redis-bundle_demoted_0" [ style = bold]
@@ -199,6 +261,12 @@ digraph "g" {
 "redis_demote_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
 "redis_monitor_45000 redis-bundle-0" [ style=dashed color="red" fontcolor="black"]
 "redis_monitor_60000 redis-bundle-0" [ style=dashed color="red" fontcolor="black"]
+"redis_post_notify_demoted_0 redis-bundle-0" -> "redis-bundle-master_confirmed-post_notify_demoted_0" [ style = bold]
+"redis_post_notify_demoted_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis_pre_notify_demote_0 redis-bundle-0" -> "redis-bundle-master_confirmed-pre_notify_demote_0" [ style = bold]
+"redis_pre_notify_demote_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis_pre_notify_stop_0 redis-bundle-0" -> "redis-bundle-master_confirmed-pre_notify_stop_0" [ style = bold]
+"redis_pre_notify_stop_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
 "redis_start_0 redis-bundle-0" -> "redis-bundle-master_running_0" [ style = dashed]
 "redis_start_0 redis-bundle-0" -> "redis_monitor_45000 redis-bundle-0" [ style = dashed]
 "redis_start_0 redis-bundle-0" -> "redis_monitor_60000 redis-bundle-0" [ style = dashed]
diff --git a/pengine/test10/bundle-order-partial-stop.exp b/pengine/test10/bundle-order-partial-stop.exp
index 27ae320..937bc59 100644
--- a/pengine/test10/bundle-order-partial-stop.exp
+++ b/pengine/test10/bundle-order-partial-stop.exp
@@ -1,9 +1,22 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
+      <rsc_op id="135" operation="notify" operation_key="rabbitmq_pre_notify_stop_0" internal_operation_key="rabbitmq:0_pre_notify_stop_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+        <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0" CRM_meta_notify_active_uname="rabbitmq-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="35" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="1">
+    <action_set>
       <rsc_op id="25" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:0_stop_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0" CRM_meta_notify_active_uname="rabbitmq-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -11,11 +24,91 @@
         <pseudo_event id="23" operation="stop" operation_key="rabbitmq-bundle_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0"/>
+        <pseudo_event id="33" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="1">
+  <synapse id="2" priority="1000000">
+    <action_set>
+      <pseudo_event id="38" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_stopped_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="37" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_stopped_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="3" priority="1000000">
+    <action_set>
+      <pseudo_event id="37" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_stopped_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="34" operation="stopped" operation_key="rabbitmq-bundle-clone_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="36" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="4">
+    <action_set>
+      <pseudo_event id="36" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_stop_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="35" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_stop_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="135" operation="notify" operation_key="rabbitmq_pre_notify_stop_0" internal_operation_key="rabbitmq:0_pre_notify_stop_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="5">
+    <action_set>
+      <pseudo_event id="35" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_stop_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="6" priority="1000000">
+    <action_set>
+      <pseudo_event id="34" operation="stopped" operation_key="rabbitmq-bundle-clone_stopped_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="25" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:0_stop_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="33" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="7">
+    <action_set>
+      <pseudo_event id="33" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="23" operation="stop" operation_key="rabbitmq-bundle_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="36" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="8">
     <action_set>
       <rsc_op id="19" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="rabbitmq-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -31,7 +124,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="2">
+  <synapse id="9">
     <action_set>
       <rsc_op id="20" operation="stop" operation_key="rabbitmq-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
@@ -47,28 +140,28 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="3">
+  <synapse id="10">
     <action_set>
-      <rsc_op id="39" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="47" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="35" operation="stop" operation_key="galera-bundle_stop_0"/>
+        <pseudo_event id="43" operation="stop" operation_key="galera-bundle_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="38" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="46" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="44" operation="stop" operation_key="galera-bundle-master_stop_0"/>
+        <pseudo_event id="52" operation="stop" operation_key="galera-bundle-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="4">
+  <synapse id="11">
     <action_set>
-      <rsc_op id="38" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="46" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
@@ -78,11 +171,11 @@
         <rsc_op id="16" operation="cancel" operation_key="galera_monitor_10000" internal_operation_key="galera:0_monitor_10000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="48" operation="demote" operation_key="galera-bundle-master_demote_0"/>
+        <pseudo_event id="56" operation="demote" operation_key="galera-bundle-master_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="5">
+  <synapse id="12">
     <action_set>
       <rsc_op id="16" operation="cancel" operation_key="galera_monitor_10000" internal_operation_key="galera:0_monitor_10000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
@@ -91,567 +184,692 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="6">
+  <synapse id="13" priority="1000000">
     <action_set>
-      <rsc_op id="31" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
-      </rsc_op>
+      <pseudo_event id="57" operation="demoted" operation_key="galera-bundle-master_demoted_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="32" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="46" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="35" operation="stop" operation_key="galera-bundle_stop_0"/>
+        <pseudo_event id="56" operation="demote" operation_key="galera-bundle-master_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="7">
+  <synapse id="14">
     <action_set>
-      <rsc_op id="32" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
-        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="#uname"  port="3123"/>
-        <downed>
-          <node id="galera-bundle-0"/>
-        </downed>
-      </rsc_op>
+      <pseudo_event id="56" operation="demote" operation_key="galera-bundle-master_demote_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="39" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <pseudo_event id="60" operation="demote" operation_key="galera-bundle_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="8">
+  <synapse id="15" priority="1000000">
     <action_set>
-      <rsc_op id="62" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
-        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
-      </rsc_op>
+      <pseudo_event id="53" operation="stopped" operation_key="galera-bundle-master_stopped_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="58" operation="stop" operation_key="redis-bundle_stop_0"/>
+        <rsc_op id="47" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <rsc_op id="61" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="67" operation="stop" operation_key="redis-bundle-master_stop_0"/>
+        <pseudo_event id="52" operation="stop" operation_key="galera-bundle-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="9">
+  <synapse id="16">
     <action_set>
-      <rsc_op id="61" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
-        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
-      </rsc_op>
+      <pseudo_event id="52" operation="stop" operation_key="galera-bundle-master_stop_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="17" operation="cancel" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <pseudo_event id="43" operation="stop" operation_key="galera-bundle_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="71" operation="demote" operation_key="redis-bundle-master_demote_0"/>
+        <pseudo_event id="57" operation="demoted" operation_key="galera-bundle-master_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10">
-    <action_set>
-      <rsc_op id="17" operation="cancel" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
-        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_operation="monitor" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
-      </rsc_op>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="11">
+  <synapse id="17">
     <action_set>
-      <rsc_op id="54" operation="stop" operation_key="redis-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      <rsc_op id="39" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="55" operation="stop" operation_key="redis-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="40" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="58" operation="stop" operation_key="redis-bundle_stop_0"/>
+        <pseudo_event id="43" operation="stop" operation_key="galera-bundle_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12">
+  <synapse id="18">
     <action_set>
-      <rsc_op id="55" operation="stop" operation_key="redis-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
-        <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="#uname"  port="3124"/>
+      <rsc_op id="40" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="#uname"  port="3123"/>
         <downed>
-          <node id="redis-bundle-0"/>
+          <node id="galera-bundle-0"/>
         </downed>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="61" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="46" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <rsc_op id="62" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="47" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="13">
+  <synapse id="19" priority="1000000">
     <action_set>
-      <rsc_op id="77" operation="stop" operation_key="ip-192.168.122.254_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="ip-192.168.122.254" class="ocf" provider="heartbeat" type="IPaddr2"/>
-        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.254"/>
+      <rsc_op id="138" operation="notify" operation_key="redis_post_notify_demote_0" internal_operation_key="redis:0_post_notify_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="87" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
+        <pseudo_event id="95" operation="notify" operation_key="redis-bundle-master_post_notify_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14">
+  <synapse id="20">
     <action_set>
-      <rsc_op id="78" operation="stop" operation_key="ip-192.168.122.250_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="ip-192.168.122.250" class="ocf" provider="heartbeat" type="IPaddr2"/>
-        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.250"/>
+      <rsc_op id="137" operation="notify" operation_key="redis_pre_notify_demote_0" internal_operation_key="redis:0_pre_notify_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="87" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
+        <pseudo_event id="93" operation="notify" operation_key="redis-bundle-master_pre_notify_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="21">
     <action_set>
-      <rsc_op id="79" operation="stop" operation_key="ip-192.168.122.249_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="ip-192.168.122.249" class="ocf" provider="heartbeat" type="IPaddr2"/>
-        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.249"/>
+      <rsc_op id="136" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:0_pre_notify_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="87" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
+        <pseudo_event id="81" operation="notify" operation_key="redis-bundle-master_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="16">
+  <synapse id="22">
     <action_set>
-      <rsc_op id="80" operation="stop" operation_key="ip-192.168.122.253_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="ip-192.168.122.253" class="ocf" provider="heartbeat" type="IPaddr2"/>
-        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.253"/>
+      <rsc_op id="70" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="87" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
+        <pseudo_event id="66" operation="stop" operation_key="redis-bundle_stop_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="69" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="79" operation="stop" operation_key="redis-bundle-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="17">
+  <synapse id="23">
     <action_set>
-      <rsc_op id="81" operation="stop" operation_key="ip-192.168.122.247_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="ip-192.168.122.247" class="ocf" provider="heartbeat" type="IPaddr2"/>
-        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.247"/>
+      <rsc_op id="69" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="87" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
+        <rsc_op id="17" operation="cancel" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="91" operation="demote" operation_key="redis-bundle-master_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="18">
+  <synapse id="24">
     <action_set>
-      <rsc_op id="82" operation="stop" operation_key="ip-192.168.122.248_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="ip-192.168.122.248" class="ocf" provider="heartbeat" type="IPaddr2"/>
-        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.248"/>
+      <rsc_op id="17" operation="cancel" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_operation="monitor" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
-    <inputs>
-      <trigger>
-        <pseudo_event id="87" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
-      </trigger>
-    </inputs>
+    <inputs/>
   </synapse>
-  <synapse id="19">
+  <synapse id="25" priority="1000000">
     <action_set>
-      <rsc_op id="83" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
-      </rsc_op>
+      <pseudo_event id="96" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="demote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="86" operation="stop" operation_key="haproxy-bundle_stop_0"/>
+        <pseudo_event id="95" operation="notify" operation_key="redis-bundle-master_post_notify_demoted_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="138" operation="notify" operation_key="redis_post_notify_demote_0" internal_operation_key="redis:0_post_notify_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="20">
+  <synapse id="26" priority="1000000">
     <action_set>
-      <rsc_op id="88" operation="stop" operation_key="openstack-cinder-volume-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="openstack-cinder-volume-docker-0" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-cinder-volume:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/cinder_volume.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/cinder/etc/cinder:/etc/cinder:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /dev:/dev:rw -v /run:/run:rw -v /sys:/sys:rw -v /lib/modules:/lib/modules:ro -v /etc/iscsi:/etc/iscsi:rw -v /var/lib/cinder:/var/lib/cinder:rw -v /var/log/containers/cinder:/var/log/cinder:rw --ipc=host --privileged=true --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
-      </rsc_op>
+      <pseudo_event id="95" operation="notify" operation_key="redis-bundle-master_post_notify_demoted_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="demote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="91" operation="stop" operation_key="openstack-cinder-volume_stop_0"/>
+        <pseudo_event id="92" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="94" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="21">
+  <synapse id="27">
     <action_set>
-      <crm_event id="94" operation="do_shutdown" operation_key="do_shutdown-undercloud" on_node="undercloud" on_node_uuid="1">
-        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_no_wait="true" />
-        <downed>
-          <node id="1"/>
-        </downed>
-      </crm_event>
+      <pseudo_event id="94" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_demote_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="demote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="19" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="20" operation="stop" operation_key="rabbitmq-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="31" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="93" operation="notify" operation_key="redis-bundle-master_pre_notify_demote_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="32" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="54" operation="stop" operation_key="redis-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="137" operation="notify" operation_key="redis_pre_notify_demote_0" internal_operation_key="redis:0_pre_notify_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="28">
+    <action_set>
+      <pseudo_event id="93" operation="notify" operation_key="redis-bundle-master_pre_notify_demote_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="demote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="29" priority="1000000">
+    <action_set>
+      <pseudo_event id="92" operation="demoted" operation_key="redis-bundle-master_demoted_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
       <trigger>
-        <rsc_op id="55" operation="stop" operation_key="redis-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="69" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <rsc_op id="77" operation="stop" operation_key="ip-192.168.122.254_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="91" operation="demote" operation_key="redis-bundle-master_demote_0"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="30">
+    <action_set>
+      <pseudo_event id="91" operation="demote" operation_key="redis-bundle-master_demote_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
       <trigger>
-        <rsc_op id="78" operation="stop" operation_key="ip-192.168.122.250_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="94" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_demote_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="79" operation="stop" operation_key="ip-192.168.122.249_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="99" operation="demote" operation_key="redis-bundle_demote_0"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="31" priority="1000000">
+    <action_set>
+      <pseudo_event id="84" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
       <trigger>
-        <rsc_op id="80" operation="stop" operation_key="ip-192.168.122.253_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="83" operation="notify" operation_key="redis-bundle-master_post_notify_stopped_0"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="32" priority="1000000">
+    <action_set>
+      <pseudo_event id="83" operation="notify" operation_key="redis-bundle-master_post_notify_stopped_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
       <trigger>
-        <rsc_op id="81" operation="stop" operation_key="ip-192.168.122.247_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="80" operation="stopped" operation_key="redis-bundle-master_stopped_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="82" operation="stop" operation_key="ip-192.168.122.248_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="82" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_stop_0"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="33">
+    <action_set>
+      <pseudo_event id="82" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_stop_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
       <trigger>
-        <rsc_op id="83" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="81" operation="notify" operation_key="redis-bundle-master_pre_notify_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="88" operation="stop" operation_key="openstack-cinder-volume-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="136" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:0_pre_notify_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="22" priority="1000000">
+  <synapse id="34">
     <action_set>
-      <pseudo_event id="92" operation="stopped" operation_key="openstack-cinder-volume_stopped_0">
-        <attributes CRM_meta_timeout="20000" />
+      <pseudo_event id="81" operation="notify" operation_key="redis-bundle-master_pre_notify_stop_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="88" operation="stop" operation_key="openstack-cinder-volume-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="96" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="23">
+  <synapse id="35" priority="1000000">
     <action_set>
-      <pseudo_event id="91" operation="stop" operation_key="openstack-cinder-volume_stop_0">
-        <attributes CRM_meta_timeout="20000" />
+      <pseudo_event id="80" operation="stopped" operation_key="redis-bundle-master_stopped_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <rsc_op id="70" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="79" operation="stop" operation_key="redis-bundle-master_stop_0"/>
+      </trigger>
+    </inputs>
   </synapse>
-  <synapse id="24" priority="1000000">
+  <synapse id="36">
     <action_set>
-      <pseudo_event id="87" operation="stopped" operation_key="haproxy-bundle_stopped_0">
-        <attributes CRM_meta_timeout="20000" />
+      <pseudo_event id="79" operation="stop" operation_key="redis-bundle-master_stop_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="83" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="66" operation="stop" operation_key="redis-bundle_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="82" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="92" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="25">
+  <synapse id="37">
     <action_set>
-      <pseudo_event id="86" operation="stop" operation_key="haproxy-bundle_stop_0">
-        <attributes CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="62" operation="stop" operation_key="redis-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="59" operation="stopped" operation_key="redis-bundle_stopped_0"/>
+        <rsc_op id="63" operation="stop" operation_key="redis-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="66" operation="stop" operation_key="redis-bundle_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="26" priority="1000000">
+  <synapse id="38">
     <action_set>
-      <pseudo_event id="76" operation="demoted" operation_key="redis-bundle_demoted_0">
-        <attributes CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="63" operation="stop" operation_key="redis-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="#uname"  port="3124"/>
+        <downed>
+          <node id="redis-bundle-0"/>
+        </downed>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="72" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
+        <rsc_op id="69" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="75" operation="demote" operation_key="redis-bundle_demote_0"/>
+        <rsc_op id="70" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="27">
+  <synapse id="39">
     <action_set>
-      <pseudo_event id="75" operation="demote" operation_key="redis-bundle_demote_0">
-        <attributes CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="101" operation="stop" operation_key="ip-192.168.122.254_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="ip-192.168.122.254" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.254"/>
+      </rsc_op>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <pseudo_event id="111" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
+      </trigger>
+    </inputs>
   </synapse>
-  <synapse id="28" priority="1000000">
+  <synapse id="40">
     <action_set>
-      <pseudo_event id="72" operation="demoted" operation_key="redis-bundle-master_demoted_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="102" operation="stop" operation_key="ip-192.168.122.250_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="ip-192.168.122.250" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.250"/>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="61" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="71" operation="demote" operation_key="redis-bundle-master_demote_0"/>
+        <pseudo_event id="111" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="29">
+  <synapse id="41">
     <action_set>
-      <pseudo_event id="71" operation="demote" operation_key="redis-bundle-master_demote_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="103" operation="stop" operation_key="ip-192.168.122.249_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="ip-192.168.122.249" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.249"/>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="75" operation="demote" operation_key="redis-bundle_demote_0"/>
+        <pseudo_event id="111" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="30" priority="1000000">
+  <synapse id="42">
     <action_set>
-      <pseudo_event id="68" operation="stopped" operation_key="redis-bundle-master_stopped_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="104" operation="stop" operation_key="ip-192.168.122.253_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="ip-192.168.122.253" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.253"/>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="62" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="67" operation="stop" operation_key="redis-bundle-master_stop_0"/>
+        <pseudo_event id="111" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="31">
+  <synapse id="43">
     <action_set>
-      <pseudo_event id="67" operation="stop" operation_key="redis-bundle-master_stop_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="105" operation="stop" operation_key="ip-192.168.122.247_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="ip-192.168.122.247" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.247"/>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="58" operation="stop" operation_key="redis-bundle_stop_0"/>
+        <pseudo_event id="111" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="44">
+    <action_set>
+      <rsc_op id="106" operation="stop" operation_key="ip-192.168.122.248_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="ip-192.168.122.248" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.248"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
       <trigger>
-        <pseudo_event id="72" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
+        <pseudo_event id="111" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="32" priority="1000000">
+  <synapse id="45">
     <action_set>
-      <pseudo_event id="59" operation="stopped" operation_key="redis-bundle_stopped_0">
-        <attributes CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="107" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="54" operation="stop" operation_key="redis-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="110" operation="stop" operation_key="haproxy-bundle_stop_0"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="46">
+    <action_set>
+      <rsc_op id="112" operation="stop" operation_key="openstack-cinder-volume-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="openstack-cinder-volume-docker-0" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-cinder-volume:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/cinder_volume.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/cinder/etc/cinder:/etc/cinder:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /dev:/dev:rw -v /run:/run:rw -v /sys:/sys:rw -v /lib/modules:/lib/modules:ro -v /etc/iscsi:/etc/iscsi:rw -v /var/lib/cinder:/var/lib/cinder:rw -v /var/log/containers/cinder:/var/log/cinder:rw --ipc=host --privileged=true --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      </rsc_op>
+    </action_set>
+    <inputs>
       <trigger>
-        <pseudo_event id="68" operation="stopped" operation_key="redis-bundle-master_stopped_0"/>
+        <pseudo_event id="115" operation="stop" operation_key="openstack-cinder-volume_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="33">
+  <synapse id="47">
     <action_set>
-      <pseudo_event id="58" operation="stop" operation_key="redis-bundle_stop_0">
-        <attributes CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <crm_event id="118" operation="do_shutdown" operation_key="do_shutdown-undercloud" on_node="undercloud" on_node_uuid="1">
+        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_no_wait="true" />
+        <downed>
+          <node id="1"/>
+        </downed>
+      </crm_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="36" operation="stopped" operation_key="galera-bundle_stopped_0"/>
+        <rsc_op id="19" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="20" operation="stop" operation_key="rabbitmq-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="39" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="40" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="62" operation="stop" operation_key="redis-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="63" operation="stop" operation_key="redis-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="101" operation="stop" operation_key="ip-192.168.122.254_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="102" operation="stop" operation_key="ip-192.168.122.250_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="76" operation="demoted" operation_key="redis-bundle_demoted_0"/>
+        <rsc_op id="103" operation="stop" operation_key="ip-192.168.122.249_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="104" operation="stop" operation_key="ip-192.168.122.253_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="105" operation="stop" operation_key="ip-192.168.122.247_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="106" operation="stop" operation_key="ip-192.168.122.248_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="107" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="112" operation="stop" operation_key="openstack-cinder-volume-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="34" priority="1000000">
+  <synapse id="48" priority="1000000">
     <action_set>
-      <pseudo_event id="53" operation="demoted" operation_key="galera-bundle_demoted_0">
+      <pseudo_event id="116" operation="stopped" operation_key="openstack-cinder-volume_stopped_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="49" operation="demoted" operation_key="galera-bundle-master_demoted_0"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="52" operation="demote" operation_key="galera-bundle_demote_0"/>
+        <rsc_op id="112" operation="stop" operation_key="openstack-cinder-volume-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="35">
+  <synapse id="49">
     <action_set>
-      <pseudo_event id="52" operation="demote" operation_key="galera-bundle_demote_0">
+      <pseudo_event id="115" operation="stop" operation_key="openstack-cinder-volume_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="36" priority="1000000">
+  <synapse id="50" priority="1000000">
     <action_set>
-      <pseudo_event id="49" operation="demoted" operation_key="galera-bundle-master_demoted_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="111" operation="stopped" operation_key="haproxy-bundle_stopped_0">
+        <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="48" operation="demote" operation_key="galera-bundle-master_demote_0"/>
+        <rsc_op id="107" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="37">
+  <synapse id="51">
     <action_set>
-      <pseudo_event id="48" operation="demote" operation_key="galera-bundle-master_demote_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="110" operation="stop" operation_key="haproxy-bundle_stop_0">
+        <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="52" operation="demote" operation_key="galera-bundle_demote_0"/>
+        <pseudo_event id="67" operation="stopped" operation_key="redis-bundle_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="38" priority="1000000">
+  <synapse id="52" priority="1000000">
     <action_set>
-      <pseudo_event id="45" operation="stopped" operation_key="galera-bundle-master_stopped_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="100" operation="demoted" operation_key="redis-bundle_demoted_0">
+        <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="39" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <pseudo_event id="96" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="44" operation="stop" operation_key="galera-bundle-master_stop_0"/>
+        <pseudo_event id="99" operation="demote" operation_key="redis-bundle_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="39">
+  <synapse id="53">
     <action_set>
-      <pseudo_event id="44" operation="stop" operation_key="galera-bundle-master_stop_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="99" operation="demote" operation_key="redis-bundle_demote_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="54" priority="1000000">
+    <action_set>
+      <pseudo_event id="67" operation="stopped" operation_key="redis-bundle_stopped_0">
+        <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="35" operation="stop" operation_key="galera-bundle_stop_0"/>
+        <rsc_op id="62" operation="stop" operation_key="redis-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="49" operation="demoted" operation_key="galera-bundle-master_demoted_0"/>
+        <pseudo_event id="84" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="40" priority="1000000">
+  <synapse id="55">
     <action_set>
-      <pseudo_event id="36" operation="stopped" operation_key="galera-bundle_stopped_0">
+      <pseudo_event id="66" operation="stop" operation_key="redis-bundle_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="31" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="44" operation="stopped" operation_key="galera-bundle_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="stopped" operation_key="galera-bundle-master_stopped_0"/>
+        <pseudo_event id="100" operation="demoted" operation_key="redis-bundle_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="41">
+  <synapse id="56" priority="1000000">
     <action_set>
-      <pseudo_event id="35" operation="stop" operation_key="galera-bundle_stop_0">
+      <pseudo_event id="61" operation="demoted" operation_key="galera-bundle_demoted_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="53" operation="demoted" operation_key="galera-bundle_demoted_0"/>
+        <pseudo_event id="57" operation="demoted" operation_key="galera-bundle-master_demoted_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="60" operation="demote" operation_key="galera-bundle_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="42" priority="1000000">
+  <synapse id="57">
     <action_set>
-      <pseudo_event id="30" operation="stopped" operation_key="rabbitmq-bundle-clone_stopped_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="60" operation="demote" operation_key="galera-bundle_demote_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="58" priority="1000000">
+    <action_set>
+      <pseudo_event id="44" operation="stopped" operation_key="galera-bundle_stopped_0">
+        <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="25" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:0_stop_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="39" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0"/>
+        <pseudo_event id="53" operation="stopped" operation_key="galera-bundle-master_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="43">
+  <synapse id="59">
     <action_set>
-      <pseudo_event id="29" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="43" operation="stop" operation_key="galera-bundle_stop_0">
+        <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="23" operation="stop" operation_key="rabbitmq-bundle_stop_0"/>
+        <pseudo_event id="61" operation="demoted" operation_key="galera-bundle_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="44" priority="1000000">
+  <synapse id="60" priority="1000000">
     <action_set>
       <pseudo_event id="24" operation="stopped" operation_key="rabbitmq-bundle_stopped_0">
         <attributes CRM_meta_timeout="20000" />
@@ -662,11 +880,11 @@
         <rsc_op id="19" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="30" operation="stopped" operation_key="rabbitmq-bundle-clone_stopped_0"/>
+        <pseudo_event id="38" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="45">
+  <synapse id="61">
     <action_set>
       <pseudo_event id="23" operation="stop" operation_key="rabbitmq-bundle_stop_0">
         <attributes CRM_meta_timeout="20000" />
@@ -674,7 +892,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="46">
+  <synapse id="62">
     <action_set>
       <pseudo_event id="18" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -691,46 +909,52 @@
         <rsc_op id="25" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:0_stop_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <rsc_op id="31" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="38" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="39" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="40" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="32" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="47" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <rsc_op id="39" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="62" operation="stop" operation_key="redis-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="54" operation="stop" operation_key="redis-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="63" operation="stop" operation_key="redis-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="55" operation="stop" operation_key="redis-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="70" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <rsc_op id="62" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <pseudo_event id="84" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="77" operation="stop" operation_key="ip-192.168.122.254_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="101" operation="stop" operation_key="ip-192.168.122.254_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="78" operation="stop" operation_key="ip-192.168.122.250_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="102" operation="stop" operation_key="ip-192.168.122.250_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="79" operation="stop" operation_key="ip-192.168.122.249_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="103" operation="stop" operation_key="ip-192.168.122.249_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="80" operation="stop" operation_key="ip-192.168.122.253_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="104" operation="stop" operation_key="ip-192.168.122.253_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="81" operation="stop" operation_key="ip-192.168.122.247_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="105" operation="stop" operation_key="ip-192.168.122.247_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="82" operation="stop" operation_key="ip-192.168.122.248_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="106" operation="stop" operation_key="ip-192.168.122.248_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="83" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="107" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="88" operation="stop" operation_key="openstack-cinder-volume-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="112" operation="stop" operation_key="openstack-cinder-volume-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/bundle-order-partial-stop.summary b/pengine/test10/bundle-order-partial-stop.summary
index 7bc24d2..29cf490 100644
--- a/pengine/test10/bundle-order-partial-stop.summary
+++ b/pengine/test10/bundle-order-partial-stop.summary
@@ -41,41 +41,57 @@ Transition Summary:
  * Stop    openstack-cinder-volume-docker-0	(undercloud)  	due to node availability
 
 Executing cluster transition:
+ * Pseudo action:   rabbitmq-bundle-clone_pre_notify_stop_0
  * Resource action: galera          cancel=10000 on galera-bundle-0
  * Resource action: redis           cancel=20000 on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_pre_notify_demote_0
  * Pseudo action:   openstack-cinder-volume_stop_0
  * Pseudo action:   redis-bundle_demote_0
- * Pseudo action:   redis-bundle-master_demote_0
  * Pseudo action:   galera-bundle_demote_0
- * Pseudo action:   galera-bundle-master_demote_0
  * Pseudo action:   rabbitmq-bundle_stop_0
- * Resource action: galera          demote on galera-bundle-0
- * Resource action: redis           demote on redis-bundle-0
+ * Resource action: rabbitmq        notify on rabbitmq-bundle-0
+ * Pseudo action:   rabbitmq-bundle-clone_confirmed-pre_notify_stop_0
+ * Pseudo action:   rabbitmq-bundle-clone_stop_0
+ * Pseudo action:   galera-bundle-master_demote_0
+ * Resource action: redis           notify on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_confirmed-pre_notify_demote_0
+ * Pseudo action:   redis-bundle-master_demote_0
  * Resource action: openstack-cinder-volume-docker-0 stop on undercloud
  * Pseudo action:   openstack-cinder-volume_stopped_0
- * Pseudo action:   redis-bundle-master_demoted_0
- * Pseudo action:   galera-bundle-master_demoted_0
- * Pseudo action:   rabbitmq-bundle-clone_stop_0
  * Resource action: rabbitmq        stop on rabbitmq-bundle-0
+ * Pseudo action:   rabbitmq-bundle-clone_stopped_0
  * Resource action: rabbitmq-bundle-0 stop on undercloud
- * Pseudo action:   redis-bundle_demoted_0
+ * Resource action: galera          demote on galera-bundle-0
+ * Pseudo action:   galera-bundle-master_demoted_0
+ * Resource action: redis           demote on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_demoted_0
  * Pseudo action:   galera-bundle_demoted_0
  * Pseudo action:   galera-bundle_stop_0
- * Pseudo action:   rabbitmq-bundle-clone_stopped_0
+ * Pseudo action:   rabbitmq-bundle-clone_post_notify_stopped_0
  * Resource action: rabbitmq-bundle-docker-0 stop on undercloud
  * Pseudo action:   galera-bundle-master_stop_0
- * Pseudo action:   rabbitmq-bundle_stopped_0
+ * Pseudo action:   redis-bundle-master_post_notify_demoted_0
+ * Pseudo action:   rabbitmq-bundle-clone_confirmed-post_notify_stopped_0
  * Resource action: galera          stop on galera-bundle-0
- * Resource action: galera-bundle-0 stop on undercloud
  * Pseudo action:   galera-bundle-master_stopped_0
+ * Resource action: galera-bundle-0 stop on undercloud
+ * Resource action: redis           notify on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_confirmed-post_notify_demoted_0
+ * Pseudo action:   redis-bundle-master_pre_notify_stop_0
+ * Pseudo action:   redis-bundle_demoted_0
+ * Pseudo action:   rabbitmq-bundle_stopped_0
  * Resource action: galera-bundle-docker-0 stop on undercloud
+ * Resource action: redis           notify on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_confirmed-pre_notify_stop_0
  * Pseudo action:   galera-bundle_stopped_0
  * Pseudo action:   redis-bundle_stop_0
  * Pseudo action:   redis-bundle-master_stop_0
  * Resource action: redis           stop on redis-bundle-0
- * Resource action: redis-bundle-0  stop on undercloud
  * Pseudo action:   redis-bundle-master_stopped_0
+ * Resource action: redis-bundle-0  stop on undercloud
+ * Pseudo action:   redis-bundle-master_post_notify_stopped_0
  * Resource action: redis-bundle-docker-0 stop on undercloud
+ * Pseudo action:   redis-bundle-master_confirmed-post_notify_stopped_0
  * Pseudo action:   redis-bundle_stopped_0
  * Pseudo action:   haproxy-bundle_stop_0
  * Resource action: haproxy-bundle-docker-0 stop on undercloud
diff --git a/pengine/test10/bundle-order-startup-clone-2.dot b/pengine/test10/bundle-order-startup-clone-2.dot
index af90261..8726909 100644
--- a/pengine/test10/bundle-order-startup-clone-2.dot
+++ b/pengine/test10/bundle-order-startup-clone-2.dot
@@ -233,14 +233,48 @@ digraph "g" {
 "redis-bundle-docker-2_start_0 metal-3" -> "redis:2_promote_0 redis-bundle-2" [ style = bold]
 "redis-bundle-docker-2_start_0 metal-3" -> "redis:2_start_0 redis-bundle-2" [ style = bold]
 "redis-bundle-docker-2_start_0 metal-3" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-master_confirmed-post_notify_promoted_0" -> "redis-bundle_promoted_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_promoted_0" -> "redis:0_monitor_20000 redis-bundle-0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_promoted_0" -> "redis:1_monitor_20000 redis-bundle-1" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_promoted_0" -> "redis:2_monitor_20000 redis-bundle-2" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_promoted_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis-bundle-master_pre_notify_promote_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis-bundle_running_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis:0_monitor_20000 redis-bundle-0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis:1_monitor_20000 redis-bundle-1" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis:2_monitor_20000 redis-bundle-2" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_running_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-pre_notify_promote_0" -> "redis-bundle-master_post_notify_promoted_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_promote_0" -> "redis-bundle-master_promote_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_promote_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-pre_notify_start_0" -> "redis-bundle-master_post_notify_running_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_start_0" -> "redis-bundle-master_start_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_start_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_post_notify_promoted_0" -> "redis-bundle-master_confirmed-post_notify_promoted_0" [ style = bold]
+"redis-bundle-master_post_notify_promoted_0" -> "redis:0_post_notify_promote_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_post_notify_promoted_0" -> "redis:1_post_notify_promote_0 redis-bundle-1" [ style = bold]
+"redis-bundle-master_post_notify_promoted_0" -> "redis:2_post_notify_promote_0 redis-bundle-2" [ style = bold]
+"redis-bundle-master_post_notify_promoted_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_post_notify_running_0" -> "redis-bundle-master_confirmed-post_notify_running_0" [ style = bold]
+"redis-bundle-master_post_notify_running_0" -> "redis:0_post_notify_start_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_post_notify_running_0" -> "redis:1_post_notify_start_0 redis-bundle-1" [ style = bold]
+"redis-bundle-master_post_notify_running_0" -> "redis:2_post_notify_start_0 redis-bundle-2" [ style = bold]
+"redis-bundle-master_post_notify_running_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_pre_notify_promote_0" -> "redis-bundle-master_confirmed-pre_notify_promote_0" [ style = bold]
+"redis-bundle-master_pre_notify_promote_0" -> "redis:0_pre_notify_promote_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_pre_notify_promote_0" -> "redis:1_pre_notify_promote_0 redis-bundle-1" [ style = bold]
+"redis-bundle-master_pre_notify_promote_0" -> "redis:2_pre_notify_promote_0 redis-bundle-2" [ style = bold]
+"redis-bundle-master_pre_notify_promote_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_pre_notify_start_0" -> "redis-bundle-master_confirmed-pre_notify_start_0" [ style = bold]
+"redis-bundle-master_pre_notify_start_0" [ style=bold color="green" fontcolor="orange"]
 "redis-bundle-master_promote_0" -> "redis:0_promote_0 redis-bundle-0" [ style = bold]
 "redis-bundle-master_promote_0" -> "redis:1_promote_0 redis-bundle-1" [ style = bold]
 "redis-bundle-master_promote_0" -> "redis:2_promote_0 redis-bundle-2" [ style = bold]
 "redis-bundle-master_promote_0" [ style=bold color="green" fontcolor="orange"]
-"redis-bundle-master_promoted_0" -> "redis-bundle_promoted_0" [ style = bold]
+"redis-bundle-master_promoted_0" -> "redis-bundle-master_post_notify_promoted_0" [ style = bold]
 "redis-bundle-master_promoted_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_running_0" -> "redis-bundle-master_post_notify_running_0" [ style = bold]
 "redis-bundle-master_running_0" -> "redis-bundle-master_promote_0" [ style = bold]
-"redis-bundle-master_running_0" -> "redis-bundle_running_0" [ style = bold]
 "redis-bundle-master_running_0" [ style=bold color="green" fontcolor="orange"]
 "redis-bundle-master_start_0" -> "redis-bundle-master_running_0" [ style = bold]
 "redis-bundle-master_start_0" -> "redis:0_start_0 redis-bundle-0" [ style = bold]
@@ -259,6 +293,12 @@ digraph "g" {
 "redis-bundle_start_0" -> "redis-bundle-master_start_0" [ style = bold]
 "redis-bundle_start_0" [ style=bold color="green" fontcolor="orange"]
 "redis:0_monitor_20000 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis:0_post_notify_promote_0 redis-bundle-0" -> "redis-bundle-master_confirmed-post_notify_promoted_0" [ style = bold]
+"redis:0_post_notify_promote_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis:0_post_notify_start_0 redis-bundle-0" -> "redis-bundle-master_confirmed-post_notify_running_0" [ style = bold]
+"redis:0_post_notify_start_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis:0_pre_notify_promote_0 redis-bundle-0" -> "redis-bundle-master_confirmed-pre_notify_promote_0" [ style = bold]
+"redis:0_pre_notify_promote_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
 "redis:0_promote_0 redis-bundle-0" -> "redis-bundle-master_promoted_0" [ style = bold]
 "redis:0_promote_0 redis-bundle-0" -> "redis:0_monitor_20000 redis-bundle-0" [ style = bold]
 "redis:0_promote_0 redis-bundle-0" -> "redis:1_promote_0 redis-bundle-1" [ style = bold]
@@ -269,6 +309,12 @@ digraph "g" {
 "redis:0_start_0 redis-bundle-0" -> "redis:1_start_0 redis-bundle-1" [ style = bold]
 "redis:0_start_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
 "redis:1_monitor_20000 redis-bundle-1" [ style=bold color="green" fontcolor="black"]
+"redis:1_post_notify_promote_0 redis-bundle-1" -> "redis-bundle-master_confirmed-post_notify_promoted_0" [ style = bold]
+"redis:1_post_notify_promote_0 redis-bundle-1" [ style=bold color="green" fontcolor="black"]
+"redis:1_post_notify_start_0 redis-bundle-1" -> "redis-bundle-master_confirmed-post_notify_running_0" [ style = bold]
+"redis:1_post_notify_start_0 redis-bundle-1" [ style=bold color="green" fontcolor="black"]
+"redis:1_pre_notify_promote_0 redis-bundle-1" -> "redis-bundle-master_confirmed-pre_notify_promote_0" [ style = bold]
+"redis:1_pre_notify_promote_0 redis-bundle-1" [ style=bold color="green" fontcolor="black"]
 "redis:1_promote_0 redis-bundle-1" -> "redis-bundle-master_promoted_0" [ style = bold]
 "redis:1_promote_0 redis-bundle-1" -> "redis:1_monitor_20000 redis-bundle-1" [ style = bold]
 "redis:1_promote_0 redis-bundle-1" -> "redis:2_promote_0 redis-bundle-2" [ style = bold]
@@ -279,6 +325,12 @@ digraph "g" {
 "redis:1_start_0 redis-bundle-1" -> "redis:2_start_0 redis-bundle-2" [ style = bold]
 "redis:1_start_0 redis-bundle-1" [ style=bold color="green" fontcolor="black"]
 "redis:2_monitor_20000 redis-bundle-2" [ style=bold color="green" fontcolor="black"]
+"redis:2_post_notify_promote_0 redis-bundle-2" -> "redis-bundle-master_confirmed-post_notify_promoted_0" [ style = bold]
+"redis:2_post_notify_promote_0 redis-bundle-2" [ style=bold color="green" fontcolor="black"]
+"redis:2_post_notify_start_0 redis-bundle-2" -> "redis-bundle-master_confirmed-post_notify_running_0" [ style = bold]
+"redis:2_post_notify_start_0 redis-bundle-2" [ style=bold color="green" fontcolor="black"]
+"redis:2_pre_notify_promote_0 redis-bundle-2" -> "redis-bundle-master_confirmed-pre_notify_promote_0" [ style = bold]
+"redis:2_pre_notify_promote_0 redis-bundle-2" [ style=bold color="green" fontcolor="black"]
 "redis:2_promote_0 redis-bundle-2" -> "redis-bundle-master_promoted_0" [ style = bold]
 "redis:2_promote_0 redis-bundle-2" -> "redis:2_monitor_20000 redis-bundle-2" [ style = bold]
 "redis:2_promote_0 redis-bundle-2" [ style=bold color="green" fontcolor="black"]
diff --git a/pengine/test10/bundle-order-startup-clone-2.exp b/pengine/test10/bundle-order-startup-clone-2.exp
index d05eb96..c0910a7 100644
--- a/pengine/test10/bundle-order-startup-clone-2.exp
+++ b/pengine/test10/bundle-order-startup-clone-2.exp
@@ -1,7 +1,7 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0" priority="1000000">
     <action_set>
-      <rsc_op id="145" operation="notify" operation_key="storage:0_post_notify_start_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="161" operation="notify" operation_key="storage:0_post_notify_start_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="storage" long-id="storage:0" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:0 storage:1 storage:2 storage:3" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="storage:0 storage:1 storage:2" CRM_meta_notify_start_uname="metal-1 metal-2 metal-3" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
@@ -52,7 +52,7 @@
   </synapse>
   <synapse id="4" priority="1000000">
     <action_set>
-      <rsc_op id="146" operation="notify" operation_key="storage:1_post_notify_start_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="162" operation="notify" operation_key="storage:1_post_notify_start_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="storage" long-id="storage:1" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:0 storage:1 storage:2 storage:3" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="storage:0 storage:1 storage:2" CRM_meta_notify_start_uname="metal-1 metal-2 metal-3" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
@@ -103,7 +103,7 @@
   </synapse>
   <synapse id="8" priority="1000000">
     <action_set>
-      <rsc_op id="147" operation="notify" operation_key="storage:2_post_notify_start_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="163" operation="notify" operation_key="storage:2_post_notify_start_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="storage" long-id="storage:2" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:0 storage:1 storage:2 storage:3" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="storage:0 storage:1 storage:2" CRM_meta_notify_start_uname="metal-1 metal-2 metal-3" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
@@ -163,13 +163,13 @@
         <pseudo_event id="42" operation="notify" operation_key="storage-clone_post_notify_running_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="145" operation="notify" operation_key="storage:0_post_notify_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="161" operation="notify" operation_key="storage:0_post_notify_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="146" operation="notify" operation_key="storage:1_post_notify_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="162" operation="notify" operation_key="storage:1_post_notify_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="147" operation="notify" operation_key="storage:2_post_notify_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="163" operation="notify" operation_key="storage:2_post_notify_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
@@ -252,7 +252,7 @@
         <pseudo_event id="94" operation="running" operation_key="haproxy-bundle_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="131" operation="promoted" operation_key="redis-bundle_promoted_0"/>
+        <pseudo_event id="147" operation="promoted" operation_key="redis-bundle_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -309,6 +309,147 @@
   </synapse>
   <synapse id="21">
     <action_set>
+      <rsc_op id="71" operation="monitor" operation_key="galera:1_monitor_30000" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2">
+        <primitive id="galera" long-id="galera:1" class="ocf" provider="heartbeat" type="galera"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-1" CRM_meta_on_node_uuid="galera-bundle-1" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="56" operation="start" operation_key="galera-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="69" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="22">
+    <action_set>
+      <rsc_op id="70" operation="monitor" operation_key="galera:1_monitor_20000" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2">
+        <primitive id="galera" long-id="galera:1" class="ocf" provider="heartbeat" type="galera"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-1" CRM_meta_on_node_uuid="galera-bundle-1" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="56" operation="start" operation_key="galera-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="69" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="23">
+    <action_set>
+      <rsc_op id="69" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2">
+        <primitive id="galera" long-id="galera:1" class="ocf" provider="heartbeat" type="galera"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-1" CRM_meta_on_node_uuid="galera-bundle-1" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="54" operation="start" operation_key="galera-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="56" operation="start" operation_key="galera-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="66" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="75" operation="start" operation_key="galera-bundle-master_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="24">
+    <action_set>
+      <rsc_op id="74" operation="monitor" operation_key="galera:2_monitor_30000" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3">
+        <primitive id="galera" long-id="galera:2" class="ocf" provider="heartbeat" type="galera"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-2" CRM_meta_on_node_uuid="galera-bundle-2" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="60" operation="start" operation_key="galera-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="72" operation="start" operation_key="galera:2_start_0" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="25">
+    <action_set>
+      <rsc_op id="73" operation="monitor" operation_key="galera:2_monitor_20000" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3">
+        <primitive id="galera" long-id="galera:2" class="ocf" provider="heartbeat" type="galera"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-2" CRM_meta_on_node_uuid="galera-bundle-2" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="60" operation="start" operation_key="galera-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="72" operation="start" operation_key="galera:2_start_0" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="26">
+    <action_set>
+      <rsc_op id="72" operation="start" operation_key="galera:2_start_0" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3">
+        <primitive id="galera" long-id="galera:2" class="ocf" provider="heartbeat" type="galera"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-2" CRM_meta_on_node_uuid="galera-bundle-2" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="58" operation="start" operation_key="galera-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="60" operation="start" operation_key="galera-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="69" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="75" operation="start" operation_key="galera-bundle-master_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="27" priority="1000000">
+    <action_set>
+      <pseudo_event id="76" operation="running" operation_key="galera-bundle-master_running_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="66" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="69" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="72" operation="start" operation_key="galera:2_start_0" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="75" operation="start" operation_key="galera-bundle-master_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="28">
+    <action_set>
+      <pseudo_event id="75" operation="start" operation_key="galera-bundle-master_start_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="62" operation="start" operation_key="galera-bundle_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="29">
+    <action_set>
       <rsc_op id="51" operation="monitor" operation_key="galera-bundle-docker-0_monitor_60000" on_node="metal-1" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
@@ -320,7 +461,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="22">
+  <synapse id="30">
     <action_set>
       <rsc_op id="50" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -360,7 +501,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="23">
+  <synapse id="31">
     <action_set>
       <rsc_op id="23" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -369,7 +510,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="24">
+  <synapse id="32">
     <action_set>
       <rsc_op id="13" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -378,7 +519,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="25">
+  <synapse id="33">
     <action_set>
       <rsc_op id="3" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -387,7 +528,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="26">
+  <synapse id="34">
     <action_set>
       <rsc_op id="53" operation="monitor" operation_key="galera-bundle-0_monitor_60000" on_node="metal-1" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
@@ -400,7 +541,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="27">
+  <synapse id="35">
     <action_set>
       <rsc_op id="52" operation="start" operation_key="galera-bundle-0_start_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
@@ -413,61 +554,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="28">
-    <action_set>
-      <rsc_op id="71" operation="monitor" operation_key="galera:1_monitor_30000" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2">
-        <primitive id="galera" long-id="galera:1" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-1" CRM_meta_on_node_uuid="galera-bundle-1" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
-      </rsc_op>
-    </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="56" operation="start" operation_key="galera-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="69" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="29">
-    <action_set>
-      <rsc_op id="70" operation="monitor" operation_key="galera:1_monitor_20000" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2">
-        <primitive id="galera" long-id="galera:1" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-1" CRM_meta_on_node_uuid="galera-bundle-1" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
-      </rsc_op>
-    </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="56" operation="start" operation_key="galera-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="69" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="30">
-    <action_set>
-      <rsc_op id="69" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2">
-        <primitive id="galera" long-id="galera:1" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-1" CRM_meta_on_node_uuid="galera-bundle-1" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
-      </rsc_op>
-    </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="54" operation="start" operation_key="galera-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="56" operation="start" operation_key="galera-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="66" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="75" operation="start" operation_key="galera-bundle-master_start_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="31">
+  <synapse id="36">
     <action_set>
       <rsc_op id="55" operation="monitor" operation_key="galera-bundle-docker-1_monitor_60000" on_node="metal-2" on_node_uuid="2">
         <primitive id="galera-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
@@ -480,7 +567,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="32">
+  <synapse id="37">
     <action_set>
       <rsc_op id="54" operation="start" operation_key="galera-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="galera-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
@@ -520,7 +607,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="33">
+  <synapse id="38">
     <action_set>
       <rsc_op id="24" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="galera-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
@@ -529,7 +616,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="34">
+  <synapse id="39">
     <action_set>
       <rsc_op id="14" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="galera-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
@@ -538,7 +625,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="35">
+  <synapse id="40">
     <action_set>
       <rsc_op id="4" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="galera-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
@@ -547,7 +634,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="36">
+  <synapse id="41">
     <action_set>
       <rsc_op id="57" operation="monitor" operation_key="galera-bundle-1_monitor_60000" on_node="metal-2" on_node_uuid="2">
         <primitive id="galera-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
@@ -560,7 +647,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="37">
+  <synapse id="42">
     <action_set>
       <rsc_op id="56" operation="start" operation_key="galera-bundle-1_start_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="galera-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
@@ -573,89 +660,35 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="38">
+  <synapse id="43">
     <action_set>
-      <rsc_op id="74" operation="monitor" operation_key="galera:2_monitor_30000" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3">
-        <primitive id="galera" long-id="galera:2" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-2" CRM_meta_on_node_uuid="galera-bundle-2" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
+      <rsc_op id="59" operation="monitor" operation_key="galera-bundle-docker-2_monitor_60000" on_node="metal-3" on_node_uuid="3">
+        <primitive id="galera-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-2" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-2:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="60" operation="start" operation_key="galera-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="72" operation="start" operation_key="galera:2_start_0" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3"/>
+        <rsc_op id="58" operation="start" operation_key="galera-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="39">
+  <synapse id="44">
     <action_set>
-      <rsc_op id="73" operation="monitor" operation_key="galera:2_monitor_20000" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3">
-        <primitive id="galera" long-id="galera:2" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-2" CRM_meta_on_node_uuid="galera-bundle-2" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
+      <rsc_op id="58" operation="start" operation_key="galera-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3">
+        <primitive id="galera-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-2" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-2:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="60" operation="start" operation_key="galera-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="3" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="72" operation="start" operation_key="galera:2_start_0" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3"/>
+        <rsc_op id="4" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="40">
-    <action_set>
-      <rsc_op id="72" operation="start" operation_key="galera:2_start_0" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3">
-        <primitive id="galera" long-id="galera:2" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-2" CRM_meta_on_node_uuid="galera-bundle-2" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
-      </rsc_op>
-    </action_set>
-    <inputs>
       <trigger>
-        <rsc_op id="58" operation="start" operation_key="galera-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="60" operation="start" operation_key="galera-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="69" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="75" operation="start" operation_key="galera-bundle-master_start_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="41">
-    <action_set>
-      <rsc_op id="59" operation="monitor" operation_key="galera-bundle-docker-2_monitor_60000" on_node="metal-3" on_node_uuid="3">
-        <primitive id="galera-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-2" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-2:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
-      </rsc_op>
-    </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="58" operation="start" operation_key="galera-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="42">
-    <action_set>
-      <rsc_op id="58" operation="start" operation_key="galera-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3">
-        <primitive id="galera-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-2" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-2:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
-      </rsc_op>
-    </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="3" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="5" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="5" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
         <rsc_op id="13" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
@@ -680,7 +713,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="43">
+  <synapse id="45">
     <action_set>
       <rsc_op id="25" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="galera-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -689,7 +722,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="44">
+  <synapse id="46">
     <action_set>
       <rsc_op id="15" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="galera-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -698,7 +731,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="45">
+  <synapse id="47">
     <action_set>
       <rsc_op id="5" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="galera-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -707,7 +740,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="46">
+  <synapse id="48">
     <action_set>
       <rsc_op id="61" operation="monitor" operation_key="galera-bundle-2_monitor_60000" on_node="metal-3" on_node_uuid="3">
         <primitive id="galera-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
@@ -720,7 +753,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="47">
+  <synapse id="49">
     <action_set>
       <rsc_op id="60" operation="start" operation_key="galera-bundle-2_start_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="galera-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
@@ -733,7 +766,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="48">
+  <synapse id="50">
     <action_set>
       <rsc_op id="88" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="metal-1" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -746,7 +779,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="49">
+  <synapse id="51">
     <action_set>
       <rsc_op id="87" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -786,7 +819,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="50">
+  <synapse id="52">
     <action_set>
       <rsc_op id="26" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -795,7 +828,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="51">
+  <synapse id="53">
     <action_set>
       <rsc_op id="16" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -804,7 +837,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="52">
+  <synapse id="54">
     <action_set>
       <rsc_op id="6" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -813,7 +846,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="53">
+  <synapse id="55">
     <action_set>
       <rsc_op id="90" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_60000" on_node="metal-2" on_node_uuid="2">
         <primitive id="haproxy-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
@@ -826,7 +859,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="54">
+  <synapse id="56">
     <action_set>
       <rsc_op id="89" operation="start" operation_key="haproxy-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="haproxy-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
@@ -866,7 +899,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="55">
+  <synapse id="57">
     <action_set>
       <rsc_op id="27" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="haproxy-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
@@ -875,7 +908,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="56">
+  <synapse id="58">
     <action_set>
       <rsc_op id="17" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="haproxy-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
@@ -884,7 +917,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="57">
+  <synapse id="59">
     <action_set>
       <rsc_op id="7" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
@@ -893,7 +926,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="58">
+  <synapse id="60">
     <action_set>
       <rsc_op id="92" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_60000" on_node="metal-3" on_node_uuid="3">
         <primitive id="haproxy-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -906,7 +939,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="59">
+  <synapse id="61">
     <action_set>
       <rsc_op id="91" operation="start" operation_key="haproxy-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="haproxy-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -946,7 +979,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="60">
+  <synapse id="62">
     <action_set>
       <rsc_op id="28" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="haproxy-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -955,7 +988,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="61">
+  <synapse id="63">
     <action_set>
       <rsc_op id="18" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="haproxy-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -964,7 +997,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="62">
+  <synapse id="64">
     <action_set>
       <rsc_op id="8" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -973,11 +1006,50 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="63">
+  <synapse id="65" priority="1000000">
+    <action_set>
+      <rsc_op id="168" operation="notify" operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="138" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="66">
+    <action_set>
+      <rsc_op id="167" operation="notify" operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="136" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="67" priority="1000000">
+    <action_set>
+      <rsc_op id="164" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="126" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="68">
     <action_set>
       <rsc_op id="115" operation="monitor" operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -990,13 +1062,19 @@
       <trigger>
         <rsc_op id="114" operation="promote" operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
       </trigger>
+      <trigger>
+        <pseudo_event id="127" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="139" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
+      </trigger>
     </inputs>
   </synapse>
-  <synapse id="64">
+  <synapse id="69">
     <action_set>
       <rsc_op id="114" operation="promote" operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -1007,33 +1085,452 @@
         <rsc_op id="99" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="113" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
+        <rsc_op id="113" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="134" operation="promote" operation_key="redis-bundle-master_promote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="70">
+    <action_set>
+      <rsc_op id="113" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="97" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="99" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="122" operation="start" operation_key="redis-bundle-master_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="71" priority="1000000">
+    <action_set>
+      <rsc_op id="170" operation="notify" operation_key="redis:1_post_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="138" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="72">
+    <action_set>
+      <rsc_op id="169" operation="notify" operation_key="redis:1_pre_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="136" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="73" priority="1000000">
+    <action_set>
+      <rsc_op id="165" operation="notify" operation_key="redis:1_post_notify_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="126" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="74">
+    <action_set>
+      <rsc_op id="118" operation="monitor" operation_key="redis:1_monitor_20000" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="103" operation="start" operation_key="redis-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="116" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="117" operation="promote" operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="127" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="139" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="75">
+    <action_set>
+      <rsc_op id="117" operation="promote" operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="101" operation="start" operation_key="redis-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="103" operation="start" operation_key="redis-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="114" operation="promote" operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="116" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="134" operation="promote" operation_key="redis-bundle-master_promote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="76">
+    <action_set>
+      <rsc_op id="116" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="101" operation="start" operation_key="redis-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="103" operation="start" operation_key="redis-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="113" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="122" operation="start" operation_key="redis-bundle-master_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="77" priority="1000000">
+    <action_set>
+      <rsc_op id="172" operation="notify" operation_key="redis:2_post_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
+        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="138" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="78">
+    <action_set>
+      <rsc_op id="171" operation="notify" operation_key="redis:2_pre_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
+        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="136" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="79" priority="1000000">
+    <action_set>
+      <rsc_op id="166" operation="notify" operation_key="redis:2_post_notify_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
+        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="126" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="80">
+    <action_set>
+      <rsc_op id="121" operation="monitor" operation_key="redis:2_monitor_20000" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
+        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="107" operation="start" operation_key="redis-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="119" operation="start" operation_key="redis:2_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="120" operation="promote" operation_key="redis:2_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="127" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="139" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="81">
+    <action_set>
+      <rsc_op id="120" operation="promote" operation_key="redis:2_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
+        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="105" operation="start" operation_key="redis-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="107" operation="start" operation_key="redis-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="117" operation="promote" operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="119" operation="start" operation_key="redis:2_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="134" operation="promote" operation_key="redis-bundle-master_promote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="82">
+    <action_set>
+      <rsc_op id="119" operation="start" operation_key="redis:2_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
+        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="105" operation="start" operation_key="redis-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="107" operation="start" operation_key="redis-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="116" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="122" operation="start" operation_key="redis-bundle-master_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="83" priority="1000000">
+    <action_set>
+      <pseudo_event id="139" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="138" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="168" operation="notify" operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="170" operation="notify" operation_key="redis:1_post_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="172" operation="notify" operation_key="redis:2_post_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="84" priority="1000000">
+    <action_set>
+      <pseudo_event id="138" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="135" operation="promoted" operation_key="redis-bundle-master_promoted_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="137" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="85">
+    <action_set>
+      <pseudo_event id="137" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="136" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="167" operation="notify" operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="169" operation="notify" operation_key="redis:1_pre_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="171" operation="notify" operation_key="redis:2_pre_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="86">
+    <action_set>
+      <pseudo_event id="136" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="127" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="87" priority="1000000">
+    <action_set>
+      <pseudo_event id="135" operation="promoted" operation_key="redis-bundle-master_promoted_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="114" operation="promote" operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="117" operation="promote" operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="120" operation="promote" operation_key="redis:2_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="88">
+    <action_set>
+      <pseudo_event id="134" operation="promote" operation_key="redis-bundle-master_promote_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="123" operation="running" operation_key="redis-bundle-master_running_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="137" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="146" operation="promote" operation_key="redis-bundle_promote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="89" priority="1000000">
+    <action_set>
+      <pseudo_event id="127" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="126" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="164" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="165" operation="notify" operation_key="redis:1_post_notify_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="166" operation="notify" operation_key="redis:2_post_notify_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="90" priority="1000000">
+    <action_set>
+      <pseudo_event id="126" operation="notify" operation_key="redis-bundle-master_post_notify_running_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="123" operation="running" operation_key="redis-bundle-master_running_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="125" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="91">
+    <action_set>
+      <pseudo_event id="125" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="124" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="92">
+    <action_set>
+      <pseudo_event id="124" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="93" priority="1000000">
+    <action_set>
+      <pseudo_event id="123" operation="running" operation_key="redis-bundle-master_running_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="113" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="116" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="119" operation="start" operation_key="redis:2_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="126" operation="promote" operation_key="redis-bundle-master_promote_0"/>
+        <pseudo_event id="122" operation="start" operation_key="redis-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="65">
+  <synapse id="94">
     <action_set>
-      <rsc_op id="113" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
-        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
-      </rsc_op>
+      <pseudo_event id="122" operation="start" operation_key="redis-bundle-master_start_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="97" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="99" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <pseudo_event id="109" operation="start" operation_key="redis-bundle_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="122" operation="start" operation_key="redis-bundle-master_start_0"/>
+        <pseudo_event id="125" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="66">
+  <synapse id="95">
     <action_set>
       <rsc_op id="98" operation="monitor" operation_key="redis-bundle-docker-0_monitor_60000" on_node="metal-1" on_node_uuid="1">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -1046,7 +1543,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="67">
+  <synapse id="96">
     <action_set>
       <rsc_op id="97" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -1086,7 +1583,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="68">
+  <synapse id="97">
     <action_set>
       <rsc_op id="29" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -1095,7 +1592,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="69">
+  <synapse id="98">
     <action_set>
       <rsc_op id="19" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -1104,7 +1601,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="70">
+  <synapse id="99">
     <action_set>
       <rsc_op id="9" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -1113,7 +1610,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="71">
+  <synapse id="100">
     <action_set>
       <rsc_op id="100" operation="monitor" operation_key="redis-bundle-0_monitor_60000" on_node="metal-1" on_node_uuid="1">
         <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
@@ -1126,7 +1623,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="72">
+  <synapse id="101">
     <action_set>
       <rsc_op id="99" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
@@ -1139,73 +1636,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="73">
-    <action_set>
-      <rsc_op id="118" operation="monitor" operation_key="redis:1_monitor_20000" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
-        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
-      </rsc_op>
-    </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="103" operation="start" operation_key="redis-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="116" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="117" operation="promote" operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="74">
-    <action_set>
-      <rsc_op id="117" operation="promote" operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
-        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
-      </rsc_op>
-    </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="101" operation="start" operation_key="redis-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="103" operation="start" operation_key="redis-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="114" operation="promote" operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="116" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="126" operation="promote" operation_key="redis-bundle-master_promote_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="75">
-    <action_set>
-      <rsc_op id="116" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
-        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
-      </rsc_op>
-    </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="101" operation="start" operation_key="redis-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="103" operation="start" operation_key="redis-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="113" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="122" operation="start" operation_key="redis-bundle-master_start_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="76">
+  <synapse id="102">
     <action_set>
       <rsc_op id="102" operation="monitor" operation_key="redis-bundle-docker-1_monitor_60000" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
@@ -1218,7 +1649,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="77">
+  <synapse id="103">
     <action_set>
       <rsc_op id="101" operation="start" operation_key="redis-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
@@ -1258,7 +1689,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="78">
+  <synapse id="104">
     <action_set>
       <rsc_op id="30" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="redis-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
@@ -1267,7 +1698,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="79">
+  <synapse id="105">
     <action_set>
       <rsc_op id="20" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
@@ -1276,7 +1707,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="80">
+  <synapse id="106">
     <action_set>
       <rsc_op id="10" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="redis-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
@@ -1285,7 +1716,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="81">
+  <synapse id="107">
     <action_set>
       <rsc_op id="104" operation="monitor" operation_key="redis-bundle-1_monitor_60000" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
@@ -1298,7 +1729,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="82">
+  <synapse id="108">
     <action_set>
       <rsc_op id="103" operation="start" operation_key="redis-bundle-1_start_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
@@ -1311,73 +1742,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="83">
-    <action_set>
-      <rsc_op id="121" operation="monitor" operation_key="redis:2_monitor_20000" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
-        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
-      </rsc_op>
-    </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="107" operation="start" operation_key="redis-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="119" operation="start" operation_key="redis:2_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="120" operation="promote" operation_key="redis:2_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="84">
-    <action_set>
-      <rsc_op id="120" operation="promote" operation_key="redis:2_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
-        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
-      </rsc_op>
-    </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="105" operation="start" operation_key="redis-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="107" operation="start" operation_key="redis-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="117" operation="promote" operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="119" operation="start" operation_key="redis:2_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="126" operation="promote" operation_key="redis-bundle-master_promote_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="85">
-    <action_set>
-      <rsc_op id="119" operation="start" operation_key="redis:2_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
-        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
-      </rsc_op>
-    </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="105" operation="start" operation_key="redis-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="107" operation="start" operation_key="redis-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="116" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="122" operation="start" operation_key="redis-bundle-master_start_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="86">
+  <synapse id="109">
     <action_set>
       <rsc_op id="106" operation="monitor" operation_key="redis-bundle-docker-2_monitor_60000" on_node="metal-3" on_node_uuid="3">
         <primitive id="redis-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -1390,7 +1755,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="87">
+  <synapse id="110">
     <action_set>
       <rsc_op id="105" operation="start" operation_key="redis-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="redis-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -1430,7 +1795,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="88">
+  <synapse id="111">
     <action_set>
       <rsc_op id="31" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="redis-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -1439,7 +1804,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="89">
+  <synapse id="112">
     <action_set>
       <rsc_op id="21" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -1448,7 +1813,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="90">
+  <synapse id="113">
     <action_set>
       <rsc_op id="11" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="redis-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -1457,7 +1822,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="91">
+  <synapse id="114">
     <action_set>
       <rsc_op id="108" operation="monitor" operation_key="redis-bundle-2_monitor_60000" on_node="metal-3" on_node_uuid="3">
         <primitive id="redis-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
@@ -1470,7 +1835,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="92">
+  <synapse id="115">
     <action_set>
       <rsc_op id="107" operation="start" operation_key="redis-bundle-2_start_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="redis-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
@@ -1483,21 +1848,21 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="93" priority="1000000">
+  <synapse id="116" priority="1000000">
     <action_set>
-      <pseudo_event id="131" operation="promoted" operation_key="redis-bundle_promoted_0">
+      <pseudo_event id="147" operation="promoted" operation_key="redis-bundle_promoted_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="127" operation="promoted" operation_key="redis-bundle-master_promoted_0"/>
+        <pseudo_event id="139" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="94">
+  <synapse id="117">
     <action_set>
-      <pseudo_event id="130" operation="promote" operation_key="redis-bundle_promote_0">
+      <pseudo_event id="146" operation="promote" operation_key="redis-bundle_promote_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -1507,73 +1872,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="95" priority="1000000">
-    <action_set>
-      <pseudo_event id="127" operation="promoted" operation_key="redis-bundle-master_promoted_0">
-        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="114" operation="promote" operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="117" operation="promote" operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="120" operation="promote" operation_key="redis:2_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="96">
-    <action_set>
-      <pseudo_event id="126" operation="promote" operation_key="redis-bundle-master_promote_0">
-        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <pseudo_event id="123" operation="running" operation_key="redis-bundle-master_running_0"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="130" operation="promote" operation_key="redis-bundle_promote_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="97" priority="1000000">
-    <action_set>
-      <pseudo_event id="123" operation="running" operation_key="redis-bundle-master_running_0">
-        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="113" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="116" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="119" operation="start" operation_key="redis:2_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="122" operation="start" operation_key="redis-bundle-master_start_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="98">
-    <action_set>
-      <pseudo_event id="122" operation="start" operation_key="redis-bundle-master_start_0">
-        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <pseudo_event id="109" operation="start" operation_key="redis-bundle_start_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="99" priority="1000000">
+  <synapse id="118" priority="1000000">
     <action_set>
       <pseudo_event id="110" operation="running" operation_key="redis-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
@@ -1590,11 +1889,11 @@
         <rsc_op id="105" operation="start" operation_key="redis-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="123" operation="running" operation_key="redis-bundle-master_running_0"/>
+        <pseudo_event id="127" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="100">
+  <synapse id="119">
     <action_set>
       <pseudo_event id="109" operation="start" operation_key="redis-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
@@ -1602,7 +1901,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="101" priority="1000000">
+  <synapse id="120" priority="1000000">
     <action_set>
       <pseudo_event id="94" operation="running" operation_key="haproxy-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
@@ -1620,7 +1919,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="102">
+  <synapse id="121">
     <action_set>
       <pseudo_event id="93" operation="start" operation_key="haproxy-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
@@ -1628,40 +1927,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="103" priority="1000000">
-    <action_set>
-      <pseudo_event id="76" operation="running" operation_key="galera-bundle-master_running_0">
-        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="66" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="69" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="72" operation="start" operation_key="galera:2_start_0" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="75" operation="start" operation_key="galera-bundle-master_start_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="104">
-    <action_set>
-      <pseudo_event id="75" operation="start" operation_key="galera-bundle-master_start_0">
-        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <pseudo_event id="62" operation="start" operation_key="galera-bundle_start_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="105" priority="1000000">
+  <synapse id="122" priority="1000000">
     <action_set>
       <pseudo_event id="63" operation="running" operation_key="galera-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
@@ -1682,7 +1948,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="106">
+  <synapse id="123">
     <action_set>
       <pseudo_event id="62" operation="start" operation_key="galera-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
diff --git a/pengine/test10/bundle-order-startup-clone-2.summary b/pengine/test10/bundle-order-startup-clone-2.summary
index 9b0eeaa..a2c2146 100644
--- a/pengine/test10/bundle-order-startup-clone-2.summary
+++ b/pengine/test10/bundle-order-startup-clone-2.summary
@@ -67,6 +67,7 @@ Executing cluster transition:
  * Resource action: haproxy-bundle-docker-2 monitor on metal-3
  * Resource action: haproxy-bundle-docker-2 monitor on metal-2
  * Resource action: haproxy-bundle-docker-2 monitor on metal-1
+ * Pseudo action:   redis-bundle-master_pre_notify_start_0
  * Resource action: redis-bundle-docker-0 monitor on metal-3
  * Resource action: redis-bundle-docker-0 monitor on metal-2
  * Resource action: redis-bundle-docker-0 monitor on metal-1
@@ -82,39 +83,55 @@ Executing cluster transition:
  * Resource action: haproxy-bundle-docker-0 start on metal-1
  * Resource action: haproxy-bundle-docker-1 start on metal-2
  * Resource action: haproxy-bundle-docker-2 start on metal-3
+ * Pseudo action:   redis-bundle-master_confirmed-pre_notify_start_0
+ * Pseudo action:   redis-bundle-master_start_0
  * Resource action: redis-bundle-docker-0 start on metal-1
  * Resource action: redis-bundle-0  start on metal-1
  * Resource action: redis-bundle-docker-1 start on metal-2
  * Resource action: redis-bundle-1  start on metal-2
  * Resource action: redis-bundle-docker-2 start on metal-3
  * Resource action: redis-bundle-2  start on metal-3
- * Pseudo action:   redis-bundle-master_start_0
  * Pseudo action:   haproxy-bundle_running_0
  * Resource action: haproxy-bundle-docker-0 monitor=60000 on metal-1
  * Resource action: haproxy-bundle-docker-1 monitor=60000 on metal-2
  * Resource action: haproxy-bundle-docker-2 monitor=60000 on metal-3
  * Resource action: redis:0         start on redis-bundle-0
+ * Resource action: redis:1         start on redis-bundle-1
+ * Resource action: redis:2         start on redis-bundle-2
+ * Pseudo action:   redis-bundle-master_running_0
  * Resource action: redis-bundle-docker-0 monitor=60000 on metal-1
  * Resource action: redis-bundle-0  monitor=60000 on metal-1
- * Resource action: redis:1         start on redis-bundle-1
  * Resource action: redis-bundle-docker-1 monitor=60000 on metal-2
  * Resource action: redis-bundle-1  monitor=60000 on metal-2
- * Resource action: redis:2         start on redis-bundle-2
  * Resource action: redis-bundle-docker-2 monitor=60000 on metal-3
  * Resource action: redis-bundle-2  monitor=60000 on metal-3
- * Pseudo action:   redis-bundle-master_running_0
+ * Pseudo action:   redis-bundle-master_post_notify_running_0
+ * Resource action: redis:0         notify on redis-bundle-0
+ * Resource action: redis:1         notify on redis-bundle-1
+ * Resource action: redis:2         notify on redis-bundle-2
+ * Pseudo action:   redis-bundle-master_confirmed-post_notify_running_0
  * Pseudo action:   redis-bundle_running_0
+ * Pseudo action:   redis-bundle-master_pre_notify_promote_0
  * Pseudo action:   redis-bundle_promote_0
+ * Resource action: redis:0         notify on redis-bundle-0
+ * Resource action: redis:1         notify on redis-bundle-1
+ * Resource action: redis:2         notify on redis-bundle-2
+ * Pseudo action:   redis-bundle-master_confirmed-pre_notify_promote_0
  * Pseudo action:   redis-bundle-master_promote_0
  * Resource action: redis:0         promote on redis-bundle-0
  * Resource action: redis:1         promote on redis-bundle-1
  * Resource action: redis:2         promote on redis-bundle-2
  * Pseudo action:   redis-bundle-master_promoted_0
+ * Pseudo action:   redis-bundle-master_post_notify_promoted_0
+ * Resource action: redis:0         notify on redis-bundle-0
+ * Resource action: redis:1         notify on redis-bundle-1
+ * Resource action: redis:2         notify on redis-bundle-2
+ * Pseudo action:   redis-bundle-master_confirmed-post_notify_promoted_0
+ * Pseudo action:   redis-bundle_promoted_0
+ * Pseudo action:   storage-clone_start_0
  * Resource action: redis:0         monitor=20000 on redis-bundle-0
  * Resource action: redis:1         monitor=20000 on redis-bundle-1
  * Resource action: redis:2         monitor=20000 on redis-bundle-2
- * Pseudo action:   redis-bundle_promoted_0
- * Pseudo action:   storage-clone_start_0
  * Resource action: storage:0       start on metal-1
  * Resource action: storage:1       start on metal-2
  * Resource action: storage:2       start on metal-3
@@ -128,23 +145,23 @@ Executing cluster transition:
  * Resource action: storage:0       monitor=30000 on metal-1
  * Resource action: storage:1       monitor=30000 on metal-2
  * Resource action: storage:2       monitor=30000 on metal-3
+ * Pseudo action:   galera-bundle-master_start_0
  * Resource action: galera-bundle-docker-0 start on metal-1
  * Resource action: galera-bundle-0 start on metal-1
  * Resource action: galera-bundle-docker-1 start on metal-2
  * Resource action: galera-bundle-1 start on metal-2
  * Resource action: galera-bundle-docker-2 start on metal-3
  * Resource action: galera-bundle-2 start on metal-3
- * Pseudo action:   galera-bundle-master_start_0
  * Resource action: galera:0        start on galera-bundle-0
+ * Resource action: galera:1        start on galera-bundle-1
+ * Resource action: galera:2        start on galera-bundle-2
+ * Pseudo action:   galera-bundle-master_running_0
  * Resource action: galera-bundle-docker-0 monitor=60000 on metal-1
  * Resource action: galera-bundle-0 monitor=60000 on metal-1
- * Resource action: galera:1        start on galera-bundle-1
  * Resource action: galera-bundle-docker-1 monitor=60000 on metal-2
  * Resource action: galera-bundle-1 monitor=60000 on metal-2
- * Resource action: galera:2        start on galera-bundle-2
  * Resource action: galera-bundle-docker-2 monitor=60000 on metal-3
  * Resource action: galera-bundle-2 monitor=60000 on metal-3
- * Pseudo action:   galera-bundle-master_running_0
  * Pseudo action:   galera-bundle_running_0
  * Resource action: galera:0        monitor=30000 on galera-bundle-0
  * Resource action: galera:0        monitor=20000 on galera-bundle-0
diff --git a/pengine/test10/bundle-order-startup-clone.dot b/pengine/test10/bundle-order-startup-clone.dot
index 92f019f..219b676 100644
--- a/pengine/test10/bundle-order-startup-clone.dot
+++ b/pengine/test10/bundle-order-startup-clone.dot
@@ -64,7 +64,19 @@ digraph "g" {
 "redis-bundle-docker-0_start_0 metal-2" -> "redis-bundle_running_0" [ style = bold]
 "redis-bundle-docker-0_start_0 metal-2" -> "redis:0_start_0 redis-bundle-0" [ style = bold]
 "redis-bundle-docker-0_start_0 metal-2" [ style=bold color="green" fontcolor="black"]
-"redis-bundle-master_running_0" -> "redis-bundle_running_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis-bundle_running_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis:0_monitor_45000 redis-bundle-0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis:0_monitor_60000 redis-bundle-0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_running_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-pre_notify_start_0" -> "redis-bundle-master_post_notify_running_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_start_0" -> "redis-bundle-master_start_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_start_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_post_notify_running_0" -> "redis-bundle-master_confirmed-post_notify_running_0" [ style = bold]
+"redis-bundle-master_post_notify_running_0" -> "redis:0_post_notify_start_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_post_notify_running_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_pre_notify_start_0" -> "redis-bundle-master_confirmed-pre_notify_start_0" [ style = bold]
+"redis-bundle-master_pre_notify_start_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_running_0" -> "redis-bundle-master_post_notify_running_0" [ style = bold]
 "redis-bundle-master_running_0" [ style=bold color="green" fontcolor="orange"]
 "redis-bundle-master_start_0" -> "redis-bundle-master_running_0" [ style = bold]
 "redis-bundle-master_start_0" -> "redis:0_start_0 redis-bundle-0" [ style = bold]
@@ -75,6 +87,8 @@ digraph "g" {
 "redis-bundle_start_0" [ style=bold color="green" fontcolor="orange"]
 "redis:0_monitor_45000 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
 "redis:0_monitor_60000 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis:0_post_notify_start_0 redis-bundle-0" -> "redis-bundle-master_confirmed-post_notify_running_0" [ style = bold]
+"redis:0_post_notify_start_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
 "redis:0_start_0 redis-bundle-0" -> "redis-bundle-master_running_0" [ style = bold]
 "redis:0_start_0 redis-bundle-0" -> "redis:0_monitor_45000 redis-bundle-0" [ style = bold]
 "redis:0_start_0 redis-bundle-0" -> "redis:0_monitor_60000 redis-bundle-0" [ style = bold]
diff --git a/pengine/test10/bundle-order-startup-clone.exp b/pengine/test10/bundle-order-startup-clone.exp
index c736cb9..197529f 100644
--- a/pengine/test10/bundle-order-startup-clone.exp
+++ b/pengine/test10/bundle-order-startup-clone.exp
@@ -115,11 +115,24 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="11">
+  <synapse id="11" priority="1000000">
+    <action_set>
+      <rsc_op id="106" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0" CRM_meta_notify_available_uname="redis-bundle-0 rabbitmq-bundle-0 galera-bundle-0 metal-3 metal-2 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="76" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="12">
     <action_set>
       <rsc_op id="71" operation="monitor" operation_key="redis:0_monitor_60000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="60000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_role="Slave" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="60000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_role="Slave" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -129,13 +142,16 @@
       <trigger>
         <rsc_op id="69" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2"/>
       </trigger>
+      <trigger>
+        <pseudo_event id="77" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+      </trigger>
     </inputs>
   </synapse>
-  <synapse id="12">
+  <synapse id="13">
     <action_set>
       <rsc_op id="70" operation="monitor" operation_key="redis:0_monitor_45000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="45000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="45000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -145,13 +161,16 @@
       <trigger>
         <rsc_op id="69" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2"/>
       </trigger>
+      <trigger>
+        <pseudo_event id="77" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+      </trigger>
     </inputs>
   </synapse>
-  <synapse id="13">
+  <synapse id="14">
     <action_set>
       <rsc_op id="69" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0" CRM_meta_notify_available_uname="redis-bundle-0 rabbitmq-bundle-0 galera-bundle-0 metal-3 metal-2 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -166,7 +185,87 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14">
+  <synapse id="15" priority="1000000">
+    <action_set>
+      <pseudo_event id="77" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="76" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="106" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="16" priority="1000000">
+    <action_set>
+      <pseudo_event id="76" operation="notify" operation_key="redis-bundle-master_post_notify_running_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="73" operation="running" operation_key="redis-bundle-master_running_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="75" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="17">
+    <action_set>
+      <pseudo_event id="75" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="74" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="18">
+    <action_set>
+      <pseudo_event id="74" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="19" priority="1000000">
+    <action_set>
+      <pseudo_event id="73" operation="running" operation_key="redis-bundle-master_running_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="69" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="72" operation="start" operation_key="redis-bundle-master_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="20">
+    <action_set>
+      <pseudo_event id="72" operation="start" operation_key="redis-bundle-master_start_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="65" operation="start" operation_key="redis-bundle_start_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="75" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="21">
     <action_set>
       <rsc_op id="62" operation="monitor" operation_key="redis-bundle-docker-0_monitor_60000" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -179,7 +278,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="22">
     <action_set>
       <rsc_op id="61" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -201,7 +300,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="16">
+  <synapse id="23">
     <action_set>
       <rsc_op id="13" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -210,7 +309,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="17">
+  <synapse id="24">
     <action_set>
       <rsc_op id="9" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -219,7 +318,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="18">
+  <synapse id="25">
     <action_set>
       <rsc_op id="5" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -228,7 +327,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="19">
+  <synapse id="26">
     <action_set>
       <rsc_op id="64" operation="monitor" operation_key="redis-bundle-0_monitor_60000" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
@@ -241,7 +340,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="20">
+  <synapse id="27">
     <action_set>
       <rsc_op id="63" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
@@ -254,34 +353,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="21" priority="1000000">
-    <action_set>
-      <pseudo_event id="73" operation="running" operation_key="redis-bundle-master_running_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="69" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="72" operation="start" operation_key="redis-bundle-master_start_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="22">
-    <action_set>
-      <pseudo_event id="72" operation="start" operation_key="redis-bundle-master_start_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <pseudo_event id="65" operation="start" operation_key="redis-bundle_start_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="23" priority="1000000">
+  <synapse id="28" priority="1000000">
     <action_set>
       <pseudo_event id="66" operation="running" operation_key="redis-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
@@ -292,11 +364,11 @@
         <rsc_op id="61" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="73" operation="running" operation_key="redis-bundle-master_running_0"/>
+        <pseudo_event id="77" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="24">
+  <synapse id="29">
     <action_set>
       <pseudo_event id="65" operation="start" operation_key="redis-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
@@ -304,7 +376,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="25" priority="1000000">
+  <synapse id="30" priority="1000000">
     <action_set>
       <pseudo_event id="58" operation="running" operation_key="haproxy-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
@@ -316,7 +388,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="26">
+  <synapse id="31">
     <action_set>
       <pseudo_event id="57" operation="start" operation_key="haproxy-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
diff --git a/pengine/test10/bundle-order-startup-clone.summary b/pengine/test10/bundle-order-startup-clone.summary
index 5e826dc..c2b46de 100644
--- a/pengine/test10/bundle-order-startup-clone.summary
+++ b/pengine/test10/bundle-order-startup-clone.summary
@@ -34,21 +34,26 @@ Executing cluster transition:
  * Resource action: haproxy-bundle-docker-0 monitor on metal-3
  * Resource action: haproxy-bundle-docker-0 monitor on metal-2
  * Resource action: haproxy-bundle-docker-0 monitor on metal-1
+ * Pseudo action:   redis-bundle-master_pre_notify_start_0
  * Resource action: redis-bundle-docker-0 monitor on metal-3
  * Resource action: redis-bundle-docker-0 monitor on metal-2
  * Resource action: redis-bundle-docker-0 monitor on metal-1
  * Pseudo action:   redis-bundle_start_0
  * Pseudo action:   haproxy-bundle_start_0
  * Resource action: haproxy-bundle-docker-0 start on metal-2
+ * Pseudo action:   redis-bundle-master_confirmed-pre_notify_start_0
+ * Pseudo action:   redis-bundle-master_start_0
  * Resource action: redis-bundle-docker-0 start on metal-2
  * Resource action: redis-bundle-0  start on metal-2
- * Pseudo action:   redis-bundle-master_start_0
  * Pseudo action:   haproxy-bundle_running_0
  * Resource action: haproxy-bundle-docker-0 monitor=60000 on metal-2
  * Resource action: redis:0         start on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_running_0
  * Resource action: redis-bundle-docker-0 monitor=60000 on metal-2
  * Resource action: redis-bundle-0  monitor=60000 on metal-2
- * Pseudo action:   redis-bundle-master_running_0
+ * Pseudo action:   redis-bundle-master_post_notify_running_0
+ * Resource action: redis:0         notify on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_confirmed-post_notify_running_0
  * Pseudo action:   redis-bundle_running_0
  * Resource action: redis:0         monitor=60000 on redis-bundle-0
  * Resource action: redis:0         monitor=45000 on redis-bundle-0
diff --git a/pengine/test10/bundle-order-startup.dot b/pengine/test10/bundle-order-startup.dot
index 66053b9..3ec10fa 100644
--- a/pengine/test10/bundle-order-startup.dot
+++ b/pengine/test10/bundle-order-startup.dot
@@ -88,7 +88,18 @@ digraph "g" {
 "rabbitmq-bundle-0_start_0 undercloud" -> "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style = bold]
 "rabbitmq-bundle-0_start_0 undercloud" -> "rabbitmq:0_start_0 rabbitmq-bundle-0" [ style = bold]
 "rabbitmq-bundle-0_start_0 undercloud" [ style=bold color="green" fontcolor="black"]
-"rabbitmq-bundle-clone_running_0" -> "rabbitmq-bundle_running_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" -> "rabbitmq-bundle_running_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" -> "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" -> "rabbitmq-bundle-clone_post_notify_running_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" -> "rabbitmq-bundle-clone_start_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_post_notify_running_0" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = bold]
+"rabbitmq-bundle-clone_post_notify_running_0" -> "rabbitmq:0_post_notify_start_0 rabbitmq-bundle-0" [ style = bold]
+"rabbitmq-bundle-clone_post_notify_running_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_pre_notify_start_0" -> "rabbitmq-bundle-clone_confirmed-pre_notify_start_0" [ style = bold]
+"rabbitmq-bundle-clone_pre_notify_start_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_running_0" -> "rabbitmq-bundle-clone_post_notify_running_0" [ style = bold]
 "rabbitmq-bundle-clone_running_0" [ style=bold color="green" fontcolor="orange"]
 "rabbitmq-bundle-clone_start_0" -> "rabbitmq-bundle-clone_running_0" [ style = bold]
 "rabbitmq-bundle-clone_start_0" -> "rabbitmq:0_start_0 rabbitmq-bundle-0" [ style = bold]
@@ -106,6 +117,8 @@ digraph "g" {
 "rabbitmq-bundle_start_0" -> "rabbitmq-bundle-docker-0_start_0 undercloud" [ style = bold]
 "rabbitmq-bundle_start_0" [ style=bold color="green" fontcolor="orange"]
 "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
+"rabbitmq:0_post_notify_start_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = bold]
+"rabbitmq:0_post_notify_start_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
 "rabbitmq:0_start_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_running_0" [ style = bold]
 "rabbitmq:0_start_0 rabbitmq-bundle-0" -> "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style = bold]
 "rabbitmq:0_start_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
@@ -123,7 +136,19 @@ digraph "g" {
 "redis-bundle-docker-0_start_0 undercloud" -> "redis-bundle_running_0" [ style = bold]
 "redis-bundle-docker-0_start_0 undercloud" -> "redis:0_start_0 redis-bundle-0" [ style = bold]
 "redis-bundle-docker-0_start_0 undercloud" [ style=bold color="green" fontcolor="black"]
-"redis-bundle-master_running_0" -> "redis-bundle_running_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis-bundle_running_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis:0_monitor_45000 redis-bundle-0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis:0_monitor_60000 redis-bundle-0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_running_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-pre_notify_start_0" -> "redis-bundle-master_post_notify_running_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_start_0" -> "redis-bundle-master_start_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_start_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_post_notify_running_0" -> "redis-bundle-master_confirmed-post_notify_running_0" [ style = bold]
+"redis-bundle-master_post_notify_running_0" -> "redis:0_post_notify_start_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_post_notify_running_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_pre_notify_start_0" -> "redis-bundle-master_confirmed-pre_notify_start_0" [ style = bold]
+"redis-bundle-master_pre_notify_start_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_running_0" -> "redis-bundle-master_post_notify_running_0" [ style = bold]
 "redis-bundle-master_running_0" [ style=bold color="green" fontcolor="orange"]
 "redis-bundle-master_start_0" -> "redis-bundle-master_running_0" [ style = bold]
 "redis-bundle-master_start_0" -> "redis:0_start_0 redis-bundle-0" [ style = bold]
@@ -135,6 +160,8 @@ digraph "g" {
 "redis-bundle_start_0" [ style=bold color="green" fontcolor="orange"]
 "redis:0_monitor_45000 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
 "redis:0_monitor_60000 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis:0_post_notify_start_0 redis-bundle-0" -> "redis-bundle-master_confirmed-post_notify_running_0" [ style = bold]
+"redis:0_post_notify_start_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
 "redis:0_start_0 redis-bundle-0" -> "redis-bundle-master_running_0" [ style = bold]
 "redis:0_start_0 redis-bundle-0" -> "redis:0_monitor_45000 redis-bundle-0" [ style = bold]
 "redis:0_start_0 redis-bundle-0" -> "redis:0_monitor_60000 redis-bundle-0" [ style = bold]
diff --git a/pengine/test10/bundle-order-startup.exp b/pengine/test10/bundle-order-startup.exp
index 2128d7c..161c1ae 100644
--- a/pengine/test10/bundle-order-startup.exp
+++ b/pengine/test10/bundle-order-startup.exp
@@ -1,9 +1,22 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
-  <synapse id="0">
+  <synapse id="0" priority="1000000">
+    <action_set>
+      <rsc_op id="126" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+        <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="27" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="1">
     <action_set>
       <rsc_op id="22" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -13,13 +26,16 @@
       <trigger>
         <rsc_op id="21" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
+      <trigger>
+        <pseudo_event id="28" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+      </trigger>
     </inputs>
   </synapse>
-  <synapse id="1">
+  <synapse id="2">
     <action_set>
       <rsc_op id="21" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -34,7 +50,87 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="2">
+  <synapse id="3" priority="1000000">
+    <action_set>
+      <pseudo_event id="28" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="27" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="126" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="4" priority="1000000">
+    <action_set>
+      <pseudo_event id="27" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="24" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="26" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="5">
+    <action_set>
+      <pseudo_event id="26" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="25" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="6">
+    <action_set>
+      <pseudo_event id="25" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="7" priority="1000000">
+    <action_set>
+      <pseudo_event id="24" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="21" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="23" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="8">
+    <action_set>
+      <pseudo_event id="23" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="17" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="26" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="9">
     <action_set>
       <rsc_op id="14" operation="monitor" operation_key="rabbitmq-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="rabbitmq-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -47,7 +143,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="3">
+  <synapse id="10">
     <action_set>
       <rsc_op id="13" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="rabbitmq-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -63,7 +159,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="4">
+  <synapse id="11">
     <action_set>
       <rsc_op id="2" operation="monitor" operation_key="rabbitmq-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="rabbitmq-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -72,7 +168,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="5">
+  <synapse id="12">
     <action_set>
       <rsc_op id="16" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
@@ -85,7 +181,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="6">
+  <synapse id="13">
     <action_set>
       <rsc_op id="15" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
@@ -98,73 +194,100 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="7">
+  <synapse id="14">
     <action_set>
-      <rsc_op id="37" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="45" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="29" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="37" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="43" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="8">
+  <synapse id="15">
     <action_set>
-      <rsc_op id="36" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="44" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="29" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="37" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="43" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="9">
+  <synapse id="16">
     <action_set>
-      <rsc_op id="35" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="43" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="27" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="35" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="29" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="37" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="38" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <pseudo_event id="46" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10">
+  <synapse id="17" priority="1000000">
     <action_set>
-      <rsc_op id="28" operation="monitor" operation_key="galera-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <pseudo_event id="47" operation="running" operation_key="galera-bundle-master_running_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="43" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="46" operation="start" operation_key="galera-bundle-master_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="18">
+    <action_set>
+      <pseudo_event id="46" operation="start" operation_key="galera-bundle-master_start_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="39" operation="start" operation_key="galera-bundle_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="19">
+    <action_set>
+      <rsc_op id="36" operation="monitor" operation_key="galera-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="27" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="35" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="11">
+  <synapse id="20">
     <action_set>
-      <rsc_op id="27" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="35" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
@@ -174,11 +297,11 @@
         <rsc_op id="3" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="31" operation="start" operation_key="galera-bundle_start_0"/>
+        <pseudo_event id="39" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12">
+  <synapse id="21">
     <action_set>
       <rsc_op id="3" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -187,99 +310,198 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="13">
+  <synapse id="22">
     <action_set>
-      <rsc_op id="30" operation="monitor" operation_key="galera-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="38" operation="monitor" operation_key="galera-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3123"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="29" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="37" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14">
+  <synapse id="23">
     <action_set>
-      <rsc_op id="29" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="37" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3123"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="27" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="35" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="24" priority="1000000">
+    <action_set>
+      <rsc_op id="127" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="73" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="25">
     <action_set>
-      <rsc_op id="60" operation="monitor" operation_key="redis:0_monitor_60000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="68" operation="monitor" operation_key="redis:0_monitor_60000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="60000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_role="Slave" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="60000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_role="Slave" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="52" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="60" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="66" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <rsc_op id="58" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <pseudo_event id="74" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="16">
+  <synapse id="26">
     <action_set>
-      <rsc_op id="59" operation="monitor" operation_key="redis:0_monitor_45000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="67" operation="monitor" operation_key="redis:0_monitor_45000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="45000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="45000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="52" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="60" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="66" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <rsc_op id="58" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <pseudo_event id="74" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="17">
+  <synapse id="27">
     <action_set>
-      <rsc_op id="58" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="66" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="50" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="58" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="52" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="60" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="61" operation="start" operation_key="redis-bundle-master_start_0"/>
+        <pseudo_event id="69" operation="start" operation_key="redis-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="18">
+  <synapse id="28" priority="1000000">
+    <action_set>
+      <pseudo_event id="74" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="73" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="127" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="29" priority="1000000">
+    <action_set>
+      <pseudo_event id="73" operation="notify" operation_key="redis-bundle-master_post_notify_running_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="70" operation="running" operation_key="redis-bundle-master_running_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="72" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="30">
+    <action_set>
+      <pseudo_event id="72" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="71" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="31">
+    <action_set>
+      <pseudo_event id="71" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="32" priority="1000000">
+    <action_set>
+      <pseudo_event id="70" operation="running" operation_key="redis-bundle-master_running_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="66" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="69" operation="start" operation_key="redis-bundle-master_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="33">
+    <action_set>
+      <pseudo_event id="69" operation="start" operation_key="redis-bundle-master_start_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="62" operation="start" operation_key="redis-bundle_start_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="72" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="34">
     <action_set>
-      <rsc_op id="51" operation="monitor" operation_key="redis-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="59" operation="monitor" operation_key="redis-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="50" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="58" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="19">
+  <synapse id="35">
     <action_set>
-      <rsc_op id="50" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="58" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
@@ -289,11 +511,11 @@
         <rsc_op id="4" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="54" operation="start" operation_key="redis-bundle_start_0"/>
+        <pseudo_event id="62" operation="start" operation_key="redis-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="20">
+  <synapse id="36">
     <action_set>
       <rsc_op id="4" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -302,48 +524,48 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="21">
+  <synapse id="37">
     <action_set>
-      <rsc_op id="53" operation="monitor" operation_key="redis-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="61" operation="monitor" operation_key="redis-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3124"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="52" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="60" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="22">
+  <synapse id="38">
     <action_set>
-      <rsc_op id="52" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="60" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3124"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="50" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="58" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="23">
+  <synapse id="39">
     <action_set>
-      <rsc_op id="74" operation="monitor" operation_key="ip-192.168.122.254_monitor_10000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="98" operation="monitor" operation_key="ip-192.168.122.254_monitor_10000" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.254" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.254"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="73" operation="start" operation_key="ip-192.168.122.254_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="97" operation="start" operation_key="ip-192.168.122.254_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="24">
+  <synapse id="40">
     <action_set>
-      <rsc_op id="73" operation="start" operation_key="ip-192.168.122.254_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="97" operation="start" operation_key="ip-192.168.122.254_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.254" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.254"/>
       </rsc_op>
@@ -354,7 +576,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="25">
+  <synapse id="41">
     <action_set>
       <rsc_op id="5" operation="monitor" operation_key="ip-192.168.122.254_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.254" class="ocf" provider="heartbeat" type="IPaddr2"/>
@@ -363,22 +585,22 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="26">
+  <synapse id="42">
     <action_set>
-      <rsc_op id="76" operation="monitor" operation_key="ip-192.168.122.250_monitor_10000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="100" operation="monitor" operation_key="ip-192.168.122.250_monitor_10000" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.250" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.250"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="75" operation="start" operation_key="ip-192.168.122.250_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="99" operation="start" operation_key="ip-192.168.122.250_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="27">
+  <synapse id="43">
     <action_set>
-      <rsc_op id="75" operation="start" operation_key="ip-192.168.122.250_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="99" operation="start" operation_key="ip-192.168.122.250_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.250" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.250"/>
       </rsc_op>
@@ -389,7 +611,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="28">
+  <synapse id="44">
     <action_set>
       <rsc_op id="6" operation="monitor" operation_key="ip-192.168.122.250_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.250" class="ocf" provider="heartbeat" type="IPaddr2"/>
@@ -398,22 +620,22 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="29">
+  <synapse id="45">
     <action_set>
-      <rsc_op id="78" operation="monitor" operation_key="ip-192.168.122.249_monitor_10000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="102" operation="monitor" operation_key="ip-192.168.122.249_monitor_10000" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.249" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.249"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="77" operation="start" operation_key="ip-192.168.122.249_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="101" operation="start" operation_key="ip-192.168.122.249_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="30">
+  <synapse id="46">
     <action_set>
-      <rsc_op id="77" operation="start" operation_key="ip-192.168.122.249_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="101" operation="start" operation_key="ip-192.168.122.249_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.249" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.249"/>
       </rsc_op>
@@ -424,7 +646,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="31">
+  <synapse id="47">
     <action_set>
       <rsc_op id="7" operation="monitor" operation_key="ip-192.168.122.249_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.249" class="ocf" provider="heartbeat" type="IPaddr2"/>
@@ -433,22 +655,22 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="32">
+  <synapse id="48">
     <action_set>
-      <rsc_op id="80" operation="monitor" operation_key="ip-192.168.122.253_monitor_10000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="104" operation="monitor" operation_key="ip-192.168.122.253_monitor_10000" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.253" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.253"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="79" operation="start" operation_key="ip-192.168.122.253_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="103" operation="start" operation_key="ip-192.168.122.253_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="33">
+  <synapse id="49">
     <action_set>
-      <rsc_op id="79" operation="start" operation_key="ip-192.168.122.253_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="103" operation="start" operation_key="ip-192.168.122.253_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.253" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.253"/>
       </rsc_op>
@@ -459,7 +681,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="34">
+  <synapse id="50">
     <action_set>
       <rsc_op id="8" operation="monitor" operation_key="ip-192.168.122.253_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.253" class="ocf" provider="heartbeat" type="IPaddr2"/>
@@ -468,22 +690,22 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="35">
+  <synapse id="51">
     <action_set>
-      <rsc_op id="82" operation="monitor" operation_key="ip-192.168.122.247_monitor_10000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="106" operation="monitor" operation_key="ip-192.168.122.247_monitor_10000" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.247" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.247"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="81" operation="start" operation_key="ip-192.168.122.247_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="105" operation="start" operation_key="ip-192.168.122.247_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="36">
+  <synapse id="52">
     <action_set>
-      <rsc_op id="81" operation="start" operation_key="ip-192.168.122.247_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="105" operation="start" operation_key="ip-192.168.122.247_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.247" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.247"/>
       </rsc_op>
@@ -494,7 +716,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="37">
+  <synapse id="53">
     <action_set>
       <rsc_op id="9" operation="monitor" operation_key="ip-192.168.122.247_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.247" class="ocf" provider="heartbeat" type="IPaddr2"/>
@@ -503,22 +725,22 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="38">
+  <synapse id="54">
     <action_set>
-      <rsc_op id="84" operation="monitor" operation_key="ip-192.168.122.248_monitor_10000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="108" operation="monitor" operation_key="ip-192.168.122.248_monitor_10000" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.248" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.248"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="83" operation="start" operation_key="ip-192.168.122.248_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="107" operation="start" operation_key="ip-192.168.122.248_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="39">
+  <synapse id="55">
     <action_set>
-      <rsc_op id="83" operation="start" operation_key="ip-192.168.122.248_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="107" operation="start" operation_key="ip-192.168.122.248_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.248" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.248"/>
       </rsc_op>
@@ -529,7 +751,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="40">
+  <synapse id="56">
     <action_set>
       <rsc_op id="10" operation="monitor" operation_key="ip-192.168.122.248_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.248" class="ocf" provider="heartbeat" type="IPaddr2"/>
@@ -538,22 +760,22 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="41">
+  <synapse id="57">
     <action_set>
-      <rsc_op id="86" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="110" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="85" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="109" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="42">
+  <synapse id="58">
     <action_set>
-      <rsc_op id="85" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="109" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
@@ -563,11 +785,11 @@
         <rsc_op id="11" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="87" operation="start" operation_key="haproxy-bundle_start_0"/>
+        <pseudo_event id="111" operation="start" operation_key="haproxy-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="43">
+  <synapse id="59">
     <action_set>
       <rsc_op id="11" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -576,22 +798,22 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="44">
+  <synapse id="60">
     <action_set>
-      <rsc_op id="92" operation="monitor" operation_key="openstack-cinder-volume-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="116" operation="monitor" operation_key="openstack-cinder-volume-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="openstack-cinder-volume-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-cinder-volume:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/cinder_volume.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/cinder/etc/cinder:/etc/cinder:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /dev:/dev:rw -v /run:/run:rw -v /sys:/sys:rw -v /lib/modules:/lib/modules:ro -v /etc/iscsi:/etc/iscsi:rw -v /var/lib/cinder:/var/lib/cinder:rw -v /var/log/containers/cinder:/var/log/cinder:rw --ipc=host --privileged=true --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="91" operation="start" operation_key="openstack-cinder-volume-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="115" operation="start" operation_key="openstack-cinder-volume-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="45">
+  <synapse id="61">
     <action_set>
-      <rsc_op id="91" operation="start" operation_key="openstack-cinder-volume-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="115" operation="start" operation_key="openstack-cinder-volume-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="openstack-cinder-volume-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-cinder-volume:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/cinder_volume.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/cinder/etc/cinder:/etc/cinder:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /dev:/dev:rw -v /run:/run:rw -v /sys:/sys:rw -v /lib/modules:/lib/modules:ro -v /etc/iscsi:/etc/iscsi:rw -v /var/lib/cinder:/var/lib/cinder:rw -v /var/log/containers/cinder:/var/log/cinder:rw --ipc=host --privileged=true --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
@@ -601,11 +823,11 @@
         <rsc_op id="12" operation="monitor" operation_key="openstack-cinder-volume-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="93" operation="start" operation_key="openstack-cinder-volume_start_0"/>
+        <pseudo_event id="117" operation="start" operation_key="openstack-cinder-volume_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="46">
+  <synapse id="62">
     <action_set>
       <rsc_op id="12" operation="monitor" operation_key="openstack-cinder-volume-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="openstack-cinder-volume-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -614,201 +836,120 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="47" priority="1000000">
+  <synapse id="63" priority="1000000">
     <action_set>
-      <pseudo_event id="94" operation="running" operation_key="openstack-cinder-volume_running_0">
+      <pseudo_event id="118" operation="running" operation_key="openstack-cinder-volume_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="91" operation="start" operation_key="openstack-cinder-volume-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="115" operation="start" operation_key="openstack-cinder-volume-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="48">
+  <synapse id="64">
     <action_set>
-      <pseudo_event id="93" operation="start" operation_key="openstack-cinder-volume_start_0">
+      <pseudo_event id="117" operation="start" operation_key="openstack-cinder-volume_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="49" priority="1000000">
+  <synapse id="65" priority="1000000">
     <action_set>
-      <pseudo_event id="88" operation="running" operation_key="haproxy-bundle_running_0">
+      <pseudo_event id="112" operation="running" operation_key="haproxy-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="85" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="109" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="50">
+  <synapse id="66">
     <action_set>
-      <pseudo_event id="87" operation="start" operation_key="haproxy-bundle_start_0">
+      <pseudo_event id="111" operation="start" operation_key="haproxy-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="73" operation="start" operation_key="ip-192.168.122.254_start_0" on_node="undercloud" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="75" operation="start" operation_key="ip-192.168.122.250_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="97" operation="start" operation_key="ip-192.168.122.254_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="77" operation="start" operation_key="ip-192.168.122.249_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="99" operation="start" operation_key="ip-192.168.122.250_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="79" operation="start" operation_key="ip-192.168.122.253_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="101" operation="start" operation_key="ip-192.168.122.249_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="81" operation="start" operation_key="ip-192.168.122.247_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="103" operation="start" operation_key="ip-192.168.122.253_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="83" operation="start" operation_key="ip-192.168.122.248_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="105" operation="start" operation_key="ip-192.168.122.247_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="51" priority="1000000">
-    <action_set>
-      <pseudo_event id="62" operation="running" operation_key="redis-bundle-master_running_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
-    </action_set>
-    <inputs>
       <trigger>
-        <rsc_op id="58" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="61" operation="start" operation_key="redis-bundle-master_start_0"/>
+        <rsc_op id="107" operation="start" operation_key="ip-192.168.122.248_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="52">
+  <synapse id="67" priority="1000000">
     <action_set>
-      <pseudo_event id="61" operation="start" operation_key="redis-bundle-master_start_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <pseudo_event id="54" operation="start" operation_key="redis-bundle_start_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="53" priority="1000000">
-    <action_set>
-      <pseudo_event id="55" operation="running" operation_key="redis-bundle_running_0">
+      <pseudo_event id="63" operation="running" operation_key="redis-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="50" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="58" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="62" operation="running" operation_key="redis-bundle-master_running_0"/>
+        <pseudo_event id="74" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="54">
+  <synapse id="68">
     <action_set>
-      <pseudo_event id="54" operation="start" operation_key="redis-bundle_start_0">
+      <pseudo_event id="62" operation="start" operation_key="redis-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="88" operation="running" operation_key="haproxy-bundle_running_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="55" priority="1000000">
-    <action_set>
-      <pseudo_event id="39" operation="running" operation_key="galera-bundle-master_running_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="35" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="38" operation="start" operation_key="galera-bundle-master_start_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="56">
-    <action_set>
-      <pseudo_event id="38" operation="start" operation_key="galera-bundle-master_start_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <pseudo_event id="31" operation="start" operation_key="galera-bundle_start_0"/>
+        <pseudo_event id="112" operation="running" operation_key="haproxy-bundle_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="57" priority="1000000">
+  <synapse id="69" priority="1000000">
     <action_set>
-      <pseudo_event id="32" operation="running" operation_key="galera-bundle_running_0">
+      <pseudo_event id="40" operation="running" operation_key="galera-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="27" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="35" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="39" operation="running" operation_key="galera-bundle-master_running_0"/>
+        <pseudo_event id="47" operation="running" operation_key="galera-bundle-master_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="58">
+  <synapse id="70">
     <action_set>
-      <pseudo_event id="31" operation="start" operation_key="galera-bundle_start_0">
+      <pseudo_event id="39" operation="start" operation_key="galera-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="55" operation="running" operation_key="redis-bundle_running_0"/>
+        <pseudo_event id="63" operation="running" operation_key="redis-bundle_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="59" priority="1000000">
-    <action_set>
-      <pseudo_event id="24" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="21" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="23" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="60">
-    <action_set>
-      <pseudo_event id="23" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <pseudo_event id="17" operation="start" operation_key="rabbitmq-bundle_start_0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="61" priority="1000000">
+  <synapse id="71" priority="1000000">
     <action_set>
       <pseudo_event id="18" operation="running" operation_key="rabbitmq-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
@@ -819,11 +960,11 @@
         <rsc_op id="13" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="24" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
+        <pseudo_event id="28" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="62">
+  <synapse id="72">
     <action_set>
       <pseudo_event id="17" operation="start" operation_key="rabbitmq-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
diff --git a/pengine/test10/bundle-order-startup.summary b/pengine/test10/bundle-order-startup.summary
index b5c2091..8da71d0 100644
--- a/pengine/test10/bundle-order-startup.summary
+++ b/pengine/test10/bundle-order-startup.summary
@@ -39,8 +39,10 @@ Transition Summary:
  * Start   openstack-cinder-volume-docker-0	(undercloud)
 
 Executing cluster transition:
+ * Pseudo action:   rabbitmq-bundle-clone_pre_notify_start_0
  * Resource action: rabbitmq-bundle-docker-0 monitor on undercloud
  * Resource action: galera-bundle-docker-0 monitor on undercloud
+ * Pseudo action:   redis-bundle-master_pre_notify_start_0
  * Resource action: redis-bundle-docker-0 monitor on undercloud
  * Resource action: ip-192.168.122.254 monitor on undercloud
  * Resource action: ip-192.168.122.250 monitor on undercloud
@@ -52,8 +54,11 @@ Executing cluster transition:
  * Resource action: openstack-cinder-volume-docker-0 monitor on undercloud
  * Pseudo action:   openstack-cinder-volume_start_0
  * Pseudo action:   rabbitmq-bundle_start_0
+ * Pseudo action:   rabbitmq-bundle-clone_confirmed-pre_notify_start_0
+ * Pseudo action:   rabbitmq-bundle-clone_start_0
  * Resource action: rabbitmq-bundle-docker-0 start on undercloud
  * Resource action: rabbitmq-bundle-0 start on undercloud
+ * Pseudo action:   redis-bundle-master_confirmed-pre_notify_start_0
  * Resource action: ip-192.168.122.254 start on undercloud
  * Resource action: ip-192.168.122.250 start on undercloud
  * Resource action: ip-192.168.122.249 start on undercloud
@@ -63,8 +68,8 @@ Executing cluster transition:
  * Resource action: openstack-cinder-volume-docker-0 start on undercloud
  * Pseudo action:   openstack-cinder-volume_running_0
  * Pseudo action:   haproxy-bundle_start_0
- * Pseudo action:   rabbitmq-bundle-clone_start_0
  * Resource action: rabbitmq:0      start on rabbitmq-bundle-0
+ * Pseudo action:   rabbitmq-bundle-clone_running_0
  * Resource action: rabbitmq-bundle-docker-0 monitor=60000 on undercloud
  * Resource action: rabbitmq-bundle-0 monitor=60000 on undercloud
  * Resource action: ip-192.168.122.254 monitor=10000 on undercloud
@@ -77,28 +82,33 @@ Executing cluster transition:
  * Resource action: openstack-cinder-volume-docker-0 monitor=60000 on undercloud
  * Pseudo action:   haproxy-bundle_running_0
  * Pseudo action:   redis-bundle_start_0
- * Pseudo action:   rabbitmq-bundle-clone_running_0
- * Pseudo action:   rabbitmq-bundle_running_0
- * Resource action: rabbitmq:0      monitor=10000 on rabbitmq-bundle-0
+ * Pseudo action:   rabbitmq-bundle-clone_post_notify_running_0
+ * Pseudo action:   redis-bundle-master_start_0
  * Resource action: redis-bundle-docker-0 start on undercloud
  * Resource action: redis-bundle-0  start on undercloud
  * Resource action: haproxy-bundle-docker-0 monitor=60000 on undercloud
- * Pseudo action:   redis-bundle-master_start_0
+ * Resource action: rabbitmq:0      notify on rabbitmq-bundle-0
+ * Pseudo action:   rabbitmq-bundle-clone_confirmed-post_notify_running_0
  * Resource action: redis:0         start on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_running_0
  * Resource action: redis-bundle-docker-0 monitor=60000 on undercloud
  * Resource action: redis-bundle-0  monitor=60000 on undercloud
- * Pseudo action:   redis-bundle-master_running_0
+ * Pseudo action:   rabbitmq-bundle_running_0
+ * Resource action: rabbitmq:0      monitor=10000 on rabbitmq-bundle-0
+ * Pseudo action:   redis-bundle-master_post_notify_running_0
+ * Resource action: redis:0         notify on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_confirmed-post_notify_running_0
  * Pseudo action:   redis-bundle_running_0
  * Pseudo action:   galera-bundle_start_0
+ * Pseudo action:   galera-bundle-master_start_0
  * Resource action: galera-bundle-docker-0 start on undercloud
  * Resource action: galera-bundle-0 start on undercloud
  * Resource action: redis:0         monitor=60000 on redis-bundle-0
  * Resource action: redis:0         monitor=45000 on redis-bundle-0
- * Pseudo action:   galera-bundle-master_start_0
  * Resource action: galera:0        start on galera-bundle-0
+ * Pseudo action:   galera-bundle-master_running_0
  * Resource action: galera-bundle-docker-0 monitor=60000 on undercloud
  * Resource action: galera-bundle-0 monitor=60000 on undercloud
- * Pseudo action:   galera-bundle-master_running_0
  * Pseudo action:   galera-bundle_running_0
  * Resource action: galera:0        monitor=30000 on galera-bundle-0
  * Resource action: galera:0        monitor=20000 on galera-bundle-0
diff --git a/pengine/test10/bundle-order-stop-clone.exp b/pengine/test10/bundle-order-stop-clone.exp
index ac0ae05..c359e00 100644
--- a/pengine/test10/bundle-order-stop-clone.exp
+++ b/pengine/test10/bundle-order-stop-clone.exp
@@ -1,7 +1,7 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="140" operation="notify" operation_key="storage:0_pre_notify_stop_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="156" operation="notify" operation_key="storage:0_pre_notify_stop_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="storage" long-id="storage:0" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="storage:0 storage:1 storage:2" CRM_meta_notify_active_uname="metal-1 metal-2 metal-3" CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:3" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="storage:0" CRM_meta_notify_stop_uname="metal-1" CRM_meta_notify_type="pre" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
@@ -27,7 +27,7 @@
   </synapse>
   <synapse id="2" priority="1000000">
     <action_set>
-      <rsc_op id="142" operation="notify" operation_key="storage:1_post_notify_stop_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="158" operation="notify" operation_key="storage:1_post_notify_stop_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="storage" long-id="storage:1" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="storage:0 storage:1 storage:2" CRM_meta_notify_active_uname="metal-1 metal-2 metal-3" CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:3" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="storage:0" CRM_meta_notify_stop_uname="metal-1" CRM_meta_notify_type="post" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
@@ -40,7 +40,7 @@
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="141" operation="notify" operation_key="storage:1_pre_notify_stop_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="157" operation="notify" operation_key="storage:1_pre_notify_stop_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="storage" long-id="storage:1" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="storage:0 storage:1 storage:2" CRM_meta_notify_active_uname="metal-1 metal-2 metal-3" CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:3" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="storage:0" CRM_meta_notify_stop_uname="metal-1" CRM_meta_notify_type="pre" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
@@ -53,7 +53,7 @@
   </synapse>
   <synapse id="4" priority="1000000">
     <action_set>
-      <rsc_op id="144" operation="notify" operation_key="storage:2_post_notify_stop_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="160" operation="notify" operation_key="storage:2_post_notify_stop_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="storage" long-id="storage:2" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="storage:0 storage:1 storage:2" CRM_meta_notify_active_uname="metal-1 metal-2 metal-3" CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:3" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="storage:0" CRM_meta_notify_stop_uname="metal-1" CRM_meta_notify_type="post" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
@@ -66,7 +66,7 @@
   </synapse>
   <synapse id="5">
     <action_set>
-      <rsc_op id="143" operation="notify" operation_key="storage:2_pre_notify_stop_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="159" operation="notify" operation_key="storage:2_pre_notify_stop_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="storage" long-id="storage:2" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="storage:0 storage:1 storage:2" CRM_meta_notify_active_uname="metal-1 metal-2 metal-3" CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:3" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="storage:0" CRM_meta_notify_stop_uname="metal-1" CRM_meta_notify_type="pre" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
@@ -88,10 +88,10 @@
         <pseudo_event id="44" operation="notify" operation_key="storage-clone_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="142" operation="notify" operation_key="storage:1_post_notify_stop_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="158" operation="notify" operation_key="storage:1_post_notify_stop_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="144" operation="notify" operation_key="storage:2_post_notify_stop_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="160" operation="notify" operation_key="storage:2_post_notify_stop_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
@@ -121,13 +121,13 @@
         <pseudo_event id="42" operation="notify" operation_key="storage-clone_pre_notify_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="140" operation="notify" operation_key="storage:0_pre_notify_stop_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="156" operation="notify" operation_key="storage:0_pre_notify_stop_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="141" operation="notify" operation_key="storage:1_pre_notify_stop_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="157" operation="notify" operation_key="storage:1_pre_notify_stop_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="143" operation="notify" operation_key="storage:2_pre_notify_stop_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="159" operation="notify" operation_key="storage:2_pre_notify_stop_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
@@ -185,89 +185,89 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="13">
+  <synapse id="13" priority="1000000">
     <action_set>
-      <rsc_op id="46" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="metal-1" on_node_uuid="1">
-        <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
-      </rsc_op>
+      <pseudo_event id="70" operation="stopped" operation_key="galera-bundle-master_stopped_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="47" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="62" operation="stop" operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="59" operation="stop" operation_key="galera-bundle_stop_0"/>
+        <pseudo_event id="69" operation="stop" operation_key="galera-bundle-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <rsc_op id="47" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="metal-1" on_node_uuid="1">
-        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
-        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="#uname"  port="3123"/>
-        <downed>
-          <node id="galera-bundle-0"/>
-        </downed>
-      </rsc_op>
+      <pseudo_event id="69" operation="stop" operation_key="galera-bundle-master_stop_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="62" operation="stop" operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
+        <pseudo_event id="59" operation="stop" operation_key="galera-bundle_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15" priority="1000000">
     <action_set>
-      <pseudo_event id="70" operation="stopped" operation_key="galera-bundle-master_stopped_0">
+      <pseudo_event id="68" operation="running" operation_key="galera-bundle-master_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="62" operation="stop" operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="69" operation="stop" operation_key="galera-bundle-master_stop_0"/>
+        <pseudo_event id="67" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="16">
     <action_set>
-      <pseudo_event id="69" operation="stop" operation_key="galera-bundle-master_stop_0">
+      <pseudo_event id="67" operation="start" operation_key="galera-bundle-master_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="59" operation="stop" operation_key="galera-bundle_stop_0"/>
+        <pseudo_event id="57" operation="start" operation_key="galera-bundle_start_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="70" operation="stopped" operation_key="galera-bundle-master_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="17" priority="1000000">
+  <synapse id="17">
     <action_set>
-      <pseudo_event id="68" operation="running" operation_key="galera-bundle-master_running_0">
-        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="46" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="metal-1" on_node_uuid="1">
+        <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="67" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <rsc_op id="47" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="metal-1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="59" operation="stop" operation_key="galera-bundle_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="18">
     <action_set>
-      <pseudo_event id="67" operation="start" operation_key="galera-bundle-master_start_0">
-        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="47" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="metal-1" on_node_uuid="1">
+        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="#uname"  port="3123"/>
+        <downed>
+          <node id="galera-bundle-0"/>
+        </downed>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="57" operation="start" operation_key="galera-bundle_start_0"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="70" operation="stopped" operation_key="galera-bundle-master_stopped_0"/>
+        <rsc_op id="62" operation="stop" operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/bundle-order-stop-clone.summary b/pengine/test10/bundle-order-stop-clone.summary
index 66cb82a..70e0f21 100644
--- a/pengine/test10/bundle-order-stop-clone.summary
+++ b/pengine/test10/bundle-order-stop-clone.summary
@@ -35,8 +35,8 @@ Executing cluster transition:
  * Pseudo action:   storage-clone_confirmed-pre_notify_stop_0
  * Pseudo action:   galera-bundle-master_stop_0
  * Resource action: galera:0        stop on galera-bundle-0
- * Resource action: galera-bundle-0 stop on metal-1
  * Pseudo action:   galera-bundle-master_stopped_0
+ * Resource action: galera-bundle-0 stop on metal-1
  * Resource action: galera-bundle-docker-0 stop on metal-1
  * Pseudo action:   galera-bundle_stopped_0
  * Pseudo action:   galera-bundle_start_0
diff --git a/pengine/test10/bundle-order-stop.dot b/pengine/test10/bundle-order-stop.dot
index c0e6616..3fade95 100644
--- a/pengine/test10/bundle-order-stop.dot
+++ b/pengine/test10/bundle-order-stop.dot
@@ -118,7 +118,29 @@ digraph "g" {
 "rabbitmq-bundle-0_stop_0 undercloud" -> "do_shutdown undercloud" [ style = bold]
 "rabbitmq-bundle-0_stop_0 undercloud" -> "rabbitmq-bundle-docker-0_stop_0 undercloud" [ style = bold]
 "rabbitmq-bundle-0_stop_0 undercloud" [ style=bold color="green" fontcolor="black"]
-"rabbitmq-bundle-clone_running_0" -> "rabbitmq-bundle_running_0" [ style = dashed]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" -> "rabbitmq-bundle_running_0" [ style = dashed]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" -> "rabbitmq_monitor_10000 rabbitmq-bundle-0" [ style = dashed]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style=dashed color="red" fontcolor="orange"]
+"rabbitmq-bundle-clone_confirmed-post_notify_stopped_0" -> "all_stopped" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_stopped_0" -> "rabbitmq-bundle-clone_pre_notify_start_0" [ style = dashed]
+"rabbitmq-bundle-clone_confirmed-post_notify_stopped_0" -> "rabbitmq-bundle_stopped_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" -> "rabbitmq-bundle-clone_post_notify_running_0" [ style = dashed]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" -> "rabbitmq-bundle-clone_start_0" [ style = dashed]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" [ style=dashed color="red" fontcolor="orange"]
+"rabbitmq-bundle-clone_confirmed-pre_notify_stop_0" -> "rabbitmq-bundle-clone_post_notify_stopped_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-pre_notify_stop_0" -> "rabbitmq-bundle-clone_stop_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-pre_notify_stop_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_post_notify_running_0" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = dashed]
+"rabbitmq-bundle-clone_post_notify_running_0" [ style=dashed color="red" fontcolor="orange"]
+"rabbitmq-bundle-clone_post_notify_stopped_0" -> "rabbitmq-bundle-clone_confirmed-post_notify_stopped_0" [ style = bold]
+"rabbitmq-bundle-clone_post_notify_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_pre_notify_start_0" -> "rabbitmq-bundle-clone_confirmed-pre_notify_start_0" [ style = dashed]
+"rabbitmq-bundle-clone_pre_notify_start_0" [ style=dashed color="red" fontcolor="orange"]
+"rabbitmq-bundle-clone_pre_notify_stop_0" -> "rabbitmq-bundle-clone_confirmed-pre_notify_stop_0" [ style = bold]
+"rabbitmq-bundle-clone_pre_notify_stop_0" -> "rabbitmq_pre_notify_stop_0 rabbitmq-bundle-0" [ style = bold]
+"rabbitmq-bundle-clone_pre_notify_stop_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_running_0" -> "rabbitmq-bundle-clone_post_notify_running_0" [ style = dashed]
 "rabbitmq-bundle-clone_running_0" [ style=dashed color="red" fontcolor="orange"]
 "rabbitmq-bundle-clone_start_0" -> "rabbitmq-bundle-clone_running_0" [ style = dashed]
 "rabbitmq-bundle-clone_start_0" -> "rabbitmq_start_0 rabbitmq-bundle-0" [ style = dashed]
@@ -126,8 +148,8 @@ digraph "g" {
 "rabbitmq-bundle-clone_stop_0" -> "rabbitmq-bundle-clone_stopped_0" [ style = bold]
 "rabbitmq-bundle-clone_stop_0" -> "rabbitmq_stop_0 rabbitmq-bundle-0" [ style = bold]
 "rabbitmq-bundle-clone_stop_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_stopped_0" -> "rabbitmq-bundle-clone_post_notify_stopped_0" [ style = bold]
 "rabbitmq-bundle-clone_stopped_0" -> "rabbitmq-bundle-clone_start_0" [ style = dashed]
-"rabbitmq-bundle-clone_stopped_0" -> "rabbitmq-bundle_stopped_0" [ style = bold]
 "rabbitmq-bundle-clone_stopped_0" [ style=bold color="green" fontcolor="orange"]
 "rabbitmq-bundle-docker-0_stop_0 undercloud" -> "all_stopped" [ style = bold]
 "rabbitmq-bundle-docker-0_stop_0 undercloud" -> "do_shutdown undercloud" [ style = bold]
@@ -140,6 +162,8 @@ digraph "g" {
 "rabbitmq-bundle_stop_0" [ style=bold color="green" fontcolor="orange"]
 "rabbitmq-bundle_stopped_0" [ style=bold color="green" fontcolor="orange"]
 "rabbitmq_monitor_10000 rabbitmq-bundle-0" [ style=dashed color="red" fontcolor="black"]
+"rabbitmq_pre_notify_stop_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_confirmed-pre_notify_stop_0" [ style = bold]
+"rabbitmq_pre_notify_stop_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
 "rabbitmq_start_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_running_0" [ style = dashed]
 "rabbitmq_start_0 rabbitmq-bundle-0" -> "rabbitmq_monitor_10000 rabbitmq-bundle-0" [ style = dashed]
 "rabbitmq_start_0 rabbitmq-bundle-0" [ style=dashed color="red" fontcolor="black"]
@@ -156,14 +180,52 @@ digraph "g" {
 "redis-bundle-docker-0_stop_0 undercloud" -> "do_shutdown undercloud" [ style = bold]
 "redis-bundle-docker-0_stop_0 undercloud" -> "redis-bundle_stopped_0" [ style = bold]
 "redis-bundle-docker-0_stop_0 undercloud" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-master_confirmed-post_notify_demoted_0" -> "redis-bundle-master_pre_notify_start_0" [ style = dashed]
+"redis-bundle-master_confirmed-post_notify_demoted_0" -> "redis-bundle-master_pre_notify_stop_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_demoted_0" -> "redis-bundle_demoted_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_demoted_0" -> "redis_monitor_45000 redis-bundle-0" [ style = dashed]
+"redis-bundle-master_confirmed-post_notify_demoted_0" -> "redis_monitor_60000 redis-bundle-0" [ style = dashed]
+"redis-bundle-master_confirmed-post_notify_demoted_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis-bundle_running_0" [ style = dashed]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis_monitor_45000 redis-bundle-0" [ style = dashed]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis_monitor_60000 redis-bundle-0" [ style = dashed]
+"redis-bundle-master_confirmed-post_notify_running_0" [ style=dashed color="red" fontcolor="orange"]
+"redis-bundle-master_confirmed-post_notify_stopped_0" -> "all_stopped" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_stopped_0" -> "redis-bundle-master_pre_notify_start_0" [ style = dashed]
+"redis-bundle-master_confirmed-post_notify_stopped_0" -> "redis-bundle_stopped_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-pre_notify_demote_0" -> "redis-bundle-master_demote_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_demote_0" -> "redis-bundle-master_post_notify_demoted_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_demote_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-pre_notify_start_0" -> "redis-bundle-master_post_notify_running_0" [ style = dashed]
+"redis-bundle-master_confirmed-pre_notify_start_0" -> "redis-bundle-master_start_0" [ style = dashed]
+"redis-bundle-master_confirmed-pre_notify_start_0" [ style=dashed color="red" fontcolor="orange"]
+"redis-bundle-master_confirmed-pre_notify_stop_0" -> "redis-bundle-master_post_notify_stopped_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_stop_0" -> "redis-bundle-master_stop_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_stop_0" [ style=bold color="green" fontcolor="orange"]
 "redis-bundle-master_demote_0" -> "redis-bundle-master_demoted_0" [ style = bold]
 "redis-bundle-master_demote_0" -> "redis_demote_0 redis-bundle-0" [ style = bold]
 "redis-bundle-master_demote_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_demoted_0" -> "redis-bundle-master_post_notify_demoted_0" [ style = bold]
 "redis-bundle-master_demoted_0" -> "redis-bundle-master_start_0" [ style = dashed]
 "redis-bundle-master_demoted_0" -> "redis-bundle-master_stop_0" [ style = bold]
-"redis-bundle-master_demoted_0" -> "redis-bundle_demoted_0" [ style = bold]
 "redis-bundle-master_demoted_0" [ style=bold color="green" fontcolor="orange"]
-"redis-bundle-master_running_0" -> "redis-bundle_running_0" [ style = dashed]
+"redis-bundle-master_post_notify_demoted_0" -> "redis-bundle-master_confirmed-post_notify_demoted_0" [ style = bold]
+"redis-bundle-master_post_notify_demoted_0" -> "redis_post_notify_demoted_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_post_notify_demoted_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_post_notify_running_0" -> "redis-bundle-master_confirmed-post_notify_running_0" [ style = dashed]
+"redis-bundle-master_post_notify_running_0" [ style=dashed color="red" fontcolor="orange"]
+"redis-bundle-master_post_notify_stopped_0" -> "redis-bundle-master_confirmed-post_notify_stopped_0" [ style = bold]
+"redis-bundle-master_post_notify_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_pre_notify_demote_0" -> "redis-bundle-master_confirmed-pre_notify_demote_0" [ style = bold]
+"redis-bundle-master_pre_notify_demote_0" -> "redis_pre_notify_demote_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_pre_notify_demote_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_pre_notify_start_0" -> "redis-bundle-master_confirmed-pre_notify_start_0" [ style = dashed]
+"redis-bundle-master_pre_notify_start_0" [ style=dashed color="red" fontcolor="orange"]
+"redis-bundle-master_pre_notify_stop_0" -> "redis-bundle-master_confirmed-pre_notify_stop_0" [ style = bold]
+"redis-bundle-master_pre_notify_stop_0" -> "redis_pre_notify_stop_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_pre_notify_stop_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_running_0" -> "redis-bundle-master_post_notify_running_0" [ style = dashed]
 "redis-bundle-master_running_0" [ style=dashed color="red" fontcolor="orange"]
 "redis-bundle-master_start_0" -> "redis-bundle-master_running_0" [ style = dashed]
 "redis-bundle-master_start_0" -> "redis_start_0 redis-bundle-0" [ style = dashed]
@@ -171,8 +233,8 @@ digraph "g" {
 "redis-bundle-master_stop_0" -> "redis-bundle-master_stopped_0" [ style = bold]
 "redis-bundle-master_stop_0" -> "redis_stop_0 redis-bundle-0" [ style = bold]
 "redis-bundle-master_stop_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_stopped_0" -> "redis-bundle-master_post_notify_stopped_0" [ style = bold]
 "redis-bundle-master_stopped_0" -> "redis-bundle-master_start_0" [ style = dashed]
-"redis-bundle-master_stopped_0" -> "redis-bundle_stopped_0" [ style = bold]
 "redis-bundle-master_stopped_0" [ style=bold color="green" fontcolor="orange"]
 "redis-bundle_demote_0" -> "redis-bundle-master_demote_0" [ style = bold]
 "redis-bundle_demote_0" -> "redis-bundle_demoted_0" [ style = bold]
@@ -199,6 +261,12 @@ digraph "g" {
 "redis_demote_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
 "redis_monitor_45000 redis-bundle-0" [ style=dashed color="red" fontcolor="black"]
 "redis_monitor_60000 redis-bundle-0" [ style=dashed color="red" fontcolor="black"]
+"redis_post_notify_demoted_0 redis-bundle-0" -> "redis-bundle-master_confirmed-post_notify_demoted_0" [ style = bold]
+"redis_post_notify_demoted_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis_pre_notify_demote_0 redis-bundle-0" -> "redis-bundle-master_confirmed-pre_notify_demote_0" [ style = bold]
+"redis_pre_notify_demote_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis_pre_notify_stop_0 redis-bundle-0" -> "redis-bundle-master_confirmed-pre_notify_stop_0" [ style = bold]
+"redis_pre_notify_stop_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
 "redis_start_0 redis-bundle-0" -> "redis-bundle-master_running_0" [ style = dashed]
 "redis_start_0 redis-bundle-0" -> "redis_monitor_45000 redis-bundle-0" [ style = dashed]
 "redis_start_0 redis-bundle-0" -> "redis_monitor_60000 redis-bundle-0" [ style = dashed]
diff --git a/pengine/test10/bundle-order-stop.exp b/pengine/test10/bundle-order-stop.exp
index 27ae320..937bc59 100644
--- a/pengine/test10/bundle-order-stop.exp
+++ b/pengine/test10/bundle-order-stop.exp
@@ -1,9 +1,22 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
+      <rsc_op id="135" operation="notify" operation_key="rabbitmq_pre_notify_stop_0" internal_operation_key="rabbitmq:0_pre_notify_stop_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+        <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0" CRM_meta_notify_active_uname="rabbitmq-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="35" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="1">
+    <action_set>
       <rsc_op id="25" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:0_stop_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0" CRM_meta_notify_active_uname="rabbitmq-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -11,11 +24,91 @@
         <pseudo_event id="23" operation="stop" operation_key="rabbitmq-bundle_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0"/>
+        <pseudo_event id="33" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="1">
+  <synapse id="2" priority="1000000">
+    <action_set>
+      <pseudo_event id="38" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_stopped_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="37" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_stopped_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="3" priority="1000000">
+    <action_set>
+      <pseudo_event id="37" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_stopped_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="34" operation="stopped" operation_key="rabbitmq-bundle-clone_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="36" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="4">
+    <action_set>
+      <pseudo_event id="36" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_stop_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="35" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_stop_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="135" operation="notify" operation_key="rabbitmq_pre_notify_stop_0" internal_operation_key="rabbitmq:0_pre_notify_stop_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="5">
+    <action_set>
+      <pseudo_event id="35" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_stop_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="6" priority="1000000">
+    <action_set>
+      <pseudo_event id="34" operation="stopped" operation_key="rabbitmq-bundle-clone_stopped_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="25" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:0_stop_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="33" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="7">
+    <action_set>
+      <pseudo_event id="33" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="23" operation="stop" operation_key="rabbitmq-bundle_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="36" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="8">
     <action_set>
       <rsc_op id="19" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="rabbitmq-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -31,7 +124,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="2">
+  <synapse id="9">
     <action_set>
       <rsc_op id="20" operation="stop" operation_key="rabbitmq-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
@@ -47,28 +140,28 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="3">
+  <synapse id="10">
     <action_set>
-      <rsc_op id="39" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="47" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="35" operation="stop" operation_key="galera-bundle_stop_0"/>
+        <pseudo_event id="43" operation="stop" operation_key="galera-bundle_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="38" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="46" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="44" operation="stop" operation_key="galera-bundle-master_stop_0"/>
+        <pseudo_event id="52" operation="stop" operation_key="galera-bundle-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="4">
+  <synapse id="11">
     <action_set>
-      <rsc_op id="38" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="46" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
@@ -78,11 +171,11 @@
         <rsc_op id="16" operation="cancel" operation_key="galera_monitor_10000" internal_operation_key="galera:0_monitor_10000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="48" operation="demote" operation_key="galera-bundle-master_demote_0"/>
+        <pseudo_event id="56" operation="demote" operation_key="galera-bundle-master_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="5">
+  <synapse id="12">
     <action_set>
       <rsc_op id="16" operation="cancel" operation_key="galera_monitor_10000" internal_operation_key="galera:0_monitor_10000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
@@ -91,567 +184,692 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="6">
+  <synapse id="13" priority="1000000">
     <action_set>
-      <rsc_op id="31" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
-      </rsc_op>
+      <pseudo_event id="57" operation="demoted" operation_key="galera-bundle-master_demoted_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="32" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="46" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="35" operation="stop" operation_key="galera-bundle_stop_0"/>
+        <pseudo_event id="56" operation="demote" operation_key="galera-bundle-master_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="7">
+  <synapse id="14">
     <action_set>
-      <rsc_op id="32" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
-        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="#uname"  port="3123"/>
-        <downed>
-          <node id="galera-bundle-0"/>
-        </downed>
-      </rsc_op>
+      <pseudo_event id="56" operation="demote" operation_key="galera-bundle-master_demote_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="39" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <pseudo_event id="60" operation="demote" operation_key="galera-bundle_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="8">
+  <synapse id="15" priority="1000000">
     <action_set>
-      <rsc_op id="62" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
-        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
-      </rsc_op>
+      <pseudo_event id="53" operation="stopped" operation_key="galera-bundle-master_stopped_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="58" operation="stop" operation_key="redis-bundle_stop_0"/>
+        <rsc_op id="47" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <rsc_op id="61" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="67" operation="stop" operation_key="redis-bundle-master_stop_0"/>
+        <pseudo_event id="52" operation="stop" operation_key="galera-bundle-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="9">
+  <synapse id="16">
     <action_set>
-      <rsc_op id="61" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
-        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
-      </rsc_op>
+      <pseudo_event id="52" operation="stop" operation_key="galera-bundle-master_stop_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="17" operation="cancel" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <pseudo_event id="43" operation="stop" operation_key="galera-bundle_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="71" operation="demote" operation_key="redis-bundle-master_demote_0"/>
+        <pseudo_event id="57" operation="demoted" operation_key="galera-bundle-master_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10">
-    <action_set>
-      <rsc_op id="17" operation="cancel" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
-        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_operation="monitor" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
-      </rsc_op>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="11">
+  <synapse id="17">
     <action_set>
-      <rsc_op id="54" operation="stop" operation_key="redis-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      <rsc_op id="39" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="55" operation="stop" operation_key="redis-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="40" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="58" operation="stop" operation_key="redis-bundle_stop_0"/>
+        <pseudo_event id="43" operation="stop" operation_key="galera-bundle_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12">
+  <synapse id="18">
     <action_set>
-      <rsc_op id="55" operation="stop" operation_key="redis-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
-        <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="#uname"  port="3124"/>
+      <rsc_op id="40" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="#uname"  port="3123"/>
         <downed>
-          <node id="redis-bundle-0"/>
+          <node id="galera-bundle-0"/>
         </downed>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="61" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="46" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <rsc_op id="62" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="47" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="13">
+  <synapse id="19" priority="1000000">
     <action_set>
-      <rsc_op id="77" operation="stop" operation_key="ip-192.168.122.254_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="ip-192.168.122.254" class="ocf" provider="heartbeat" type="IPaddr2"/>
-        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.254"/>
+      <rsc_op id="138" operation="notify" operation_key="redis_post_notify_demote_0" internal_operation_key="redis:0_post_notify_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="87" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
+        <pseudo_event id="95" operation="notify" operation_key="redis-bundle-master_post_notify_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14">
+  <synapse id="20">
     <action_set>
-      <rsc_op id="78" operation="stop" operation_key="ip-192.168.122.250_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="ip-192.168.122.250" class="ocf" provider="heartbeat" type="IPaddr2"/>
-        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.250"/>
+      <rsc_op id="137" operation="notify" operation_key="redis_pre_notify_demote_0" internal_operation_key="redis:0_pre_notify_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="87" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
+        <pseudo_event id="93" operation="notify" operation_key="redis-bundle-master_pre_notify_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="21">
     <action_set>
-      <rsc_op id="79" operation="stop" operation_key="ip-192.168.122.249_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="ip-192.168.122.249" class="ocf" provider="heartbeat" type="IPaddr2"/>
-        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.249"/>
+      <rsc_op id="136" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:0_pre_notify_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="87" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
+        <pseudo_event id="81" operation="notify" operation_key="redis-bundle-master_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="16">
+  <synapse id="22">
     <action_set>
-      <rsc_op id="80" operation="stop" operation_key="ip-192.168.122.253_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="ip-192.168.122.253" class="ocf" provider="heartbeat" type="IPaddr2"/>
-        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.253"/>
+      <rsc_op id="70" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="87" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
+        <pseudo_event id="66" operation="stop" operation_key="redis-bundle_stop_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="69" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="79" operation="stop" operation_key="redis-bundle-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="17">
+  <synapse id="23">
     <action_set>
-      <rsc_op id="81" operation="stop" operation_key="ip-192.168.122.247_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="ip-192.168.122.247" class="ocf" provider="heartbeat" type="IPaddr2"/>
-        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.247"/>
+      <rsc_op id="69" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="87" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
+        <rsc_op id="17" operation="cancel" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="91" operation="demote" operation_key="redis-bundle-master_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="18">
+  <synapse id="24">
     <action_set>
-      <rsc_op id="82" operation="stop" operation_key="ip-192.168.122.248_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="ip-192.168.122.248" class="ocf" provider="heartbeat" type="IPaddr2"/>
-        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.248"/>
+      <rsc_op id="17" operation="cancel" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_operation="monitor" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
-    <inputs>
-      <trigger>
-        <pseudo_event id="87" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
-      </trigger>
-    </inputs>
+    <inputs/>
   </synapse>
-  <synapse id="19">
+  <synapse id="25" priority="1000000">
     <action_set>
-      <rsc_op id="83" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
-      </rsc_op>
+      <pseudo_event id="96" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="demote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="86" operation="stop" operation_key="haproxy-bundle_stop_0"/>
+        <pseudo_event id="95" operation="notify" operation_key="redis-bundle-master_post_notify_demoted_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="138" operation="notify" operation_key="redis_post_notify_demote_0" internal_operation_key="redis:0_post_notify_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="20">
+  <synapse id="26" priority="1000000">
     <action_set>
-      <rsc_op id="88" operation="stop" operation_key="openstack-cinder-volume-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
-        <primitive id="openstack-cinder-volume-docker-0" class="ocf" provider="heartbeat" type="docker"/>
-        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-cinder-volume:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/cinder_volume.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/cinder/etc/cinder:/etc/cinder:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /dev:/dev:rw -v /run:/run:rw -v /sys:/sys:rw -v /lib/modules:/lib/modules:ro -v /etc/iscsi:/etc/iscsi:rw -v /var/lib/cinder:/var/lib/cinder:rw -v /var/log/containers/cinder:/var/log/cinder:rw --ipc=host --privileged=true --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
-      </rsc_op>
+      <pseudo_event id="95" operation="notify" operation_key="redis-bundle-master_post_notify_demoted_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="demote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="91" operation="stop" operation_key="openstack-cinder-volume_stop_0"/>
+        <pseudo_event id="92" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="94" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="21">
+  <synapse id="27">
     <action_set>
-      <crm_event id="94" operation="do_shutdown" operation_key="do_shutdown-undercloud" on_node="undercloud" on_node_uuid="1">
-        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_no_wait="true" />
-        <downed>
-          <node id="1"/>
-        </downed>
-      </crm_event>
+      <pseudo_event id="94" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_demote_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="demote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="19" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="20" operation="stop" operation_key="rabbitmq-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="31" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="93" operation="notify" operation_key="redis-bundle-master_pre_notify_demote_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="32" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="54" operation="stop" operation_key="redis-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="137" operation="notify" operation_key="redis_pre_notify_demote_0" internal_operation_key="redis:0_pre_notify_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="28">
+    <action_set>
+      <pseudo_event id="93" operation="notify" operation_key="redis-bundle-master_pre_notify_demote_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="demote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="29" priority="1000000">
+    <action_set>
+      <pseudo_event id="92" operation="demoted" operation_key="redis-bundle-master_demoted_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
       <trigger>
-        <rsc_op id="55" operation="stop" operation_key="redis-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="69" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <rsc_op id="77" operation="stop" operation_key="ip-192.168.122.254_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="91" operation="demote" operation_key="redis-bundle-master_demote_0"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="30">
+    <action_set>
+      <pseudo_event id="91" operation="demote" operation_key="redis-bundle-master_demote_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
       <trigger>
-        <rsc_op id="78" operation="stop" operation_key="ip-192.168.122.250_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="94" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_demote_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="79" operation="stop" operation_key="ip-192.168.122.249_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="99" operation="demote" operation_key="redis-bundle_demote_0"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="31" priority="1000000">
+    <action_set>
+      <pseudo_event id="84" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
       <trigger>
-        <rsc_op id="80" operation="stop" operation_key="ip-192.168.122.253_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="83" operation="notify" operation_key="redis-bundle-master_post_notify_stopped_0"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="32" priority="1000000">
+    <action_set>
+      <pseudo_event id="83" operation="notify" operation_key="redis-bundle-master_post_notify_stopped_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
       <trigger>
-        <rsc_op id="81" operation="stop" operation_key="ip-192.168.122.247_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="80" operation="stopped" operation_key="redis-bundle-master_stopped_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="82" operation="stop" operation_key="ip-192.168.122.248_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="82" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_stop_0"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="33">
+    <action_set>
+      <pseudo_event id="82" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_stop_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
       <trigger>
-        <rsc_op id="83" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="81" operation="notify" operation_key="redis-bundle-master_pre_notify_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="88" operation="stop" operation_key="openstack-cinder-volume-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="136" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:0_pre_notify_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="22" priority="1000000">
+  <synapse id="34">
     <action_set>
-      <pseudo_event id="92" operation="stopped" operation_key="openstack-cinder-volume_stopped_0">
-        <attributes CRM_meta_timeout="20000" />
+      <pseudo_event id="81" operation="notify" operation_key="redis-bundle-master_pre_notify_stop_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="88" operation="stop" operation_key="openstack-cinder-volume-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="96" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="23">
+  <synapse id="35" priority="1000000">
     <action_set>
-      <pseudo_event id="91" operation="stop" operation_key="openstack-cinder-volume_stop_0">
-        <attributes CRM_meta_timeout="20000" />
+      <pseudo_event id="80" operation="stopped" operation_key="redis-bundle-master_stopped_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <rsc_op id="70" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="79" operation="stop" operation_key="redis-bundle-master_stop_0"/>
+      </trigger>
+    </inputs>
   </synapse>
-  <synapse id="24" priority="1000000">
+  <synapse id="36">
     <action_set>
-      <pseudo_event id="87" operation="stopped" operation_key="haproxy-bundle_stopped_0">
-        <attributes CRM_meta_timeout="20000" />
+      <pseudo_event id="79" operation="stop" operation_key="redis-bundle-master_stop_0">
+        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="83" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="66" operation="stop" operation_key="redis-bundle_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="82" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="92" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="25">
+  <synapse id="37">
     <action_set>
-      <pseudo_event id="86" operation="stop" operation_key="haproxy-bundle_stop_0">
-        <attributes CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="62" operation="stop" operation_key="redis-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="59" operation="stopped" operation_key="redis-bundle_stopped_0"/>
+        <rsc_op id="63" operation="stop" operation_key="redis-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="66" operation="stop" operation_key="redis-bundle_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="26" priority="1000000">
+  <synapse id="38">
     <action_set>
-      <pseudo_event id="76" operation="demoted" operation_key="redis-bundle_demoted_0">
-        <attributes CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="63" operation="stop" operation_key="redis-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="#uname"  port="3124"/>
+        <downed>
+          <node id="redis-bundle-0"/>
+        </downed>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="72" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
+        <rsc_op id="69" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="75" operation="demote" operation_key="redis-bundle_demote_0"/>
+        <rsc_op id="70" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="27">
+  <synapse id="39">
     <action_set>
-      <pseudo_event id="75" operation="demote" operation_key="redis-bundle_demote_0">
-        <attributes CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="101" operation="stop" operation_key="ip-192.168.122.254_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="ip-192.168.122.254" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.254"/>
+      </rsc_op>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <pseudo_event id="111" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
+      </trigger>
+    </inputs>
   </synapse>
-  <synapse id="28" priority="1000000">
+  <synapse id="40">
     <action_set>
-      <pseudo_event id="72" operation="demoted" operation_key="redis-bundle-master_demoted_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="102" operation="stop" operation_key="ip-192.168.122.250_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="ip-192.168.122.250" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.250"/>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="61" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="71" operation="demote" operation_key="redis-bundle-master_demote_0"/>
+        <pseudo_event id="111" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="29">
+  <synapse id="41">
     <action_set>
-      <pseudo_event id="71" operation="demote" operation_key="redis-bundle-master_demote_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="103" operation="stop" operation_key="ip-192.168.122.249_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="ip-192.168.122.249" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.249"/>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="75" operation="demote" operation_key="redis-bundle_demote_0"/>
+        <pseudo_event id="111" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="30" priority="1000000">
+  <synapse id="42">
     <action_set>
-      <pseudo_event id="68" operation="stopped" operation_key="redis-bundle-master_stopped_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="104" operation="stop" operation_key="ip-192.168.122.253_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="ip-192.168.122.253" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.253"/>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="62" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="67" operation="stop" operation_key="redis-bundle-master_stop_0"/>
+        <pseudo_event id="111" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="31">
+  <synapse id="43">
     <action_set>
-      <pseudo_event id="67" operation="stop" operation_key="redis-bundle-master_stop_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="105" operation="stop" operation_key="ip-192.168.122.247_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="ip-192.168.122.247" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.247"/>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="58" operation="stop" operation_key="redis-bundle_stop_0"/>
+        <pseudo_event id="111" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="44">
+    <action_set>
+      <rsc_op id="106" operation="stop" operation_key="ip-192.168.122.248_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="ip-192.168.122.248" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="stop" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.248"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
       <trigger>
-        <pseudo_event id="72" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
+        <pseudo_event id="111" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="32" priority="1000000">
+  <synapse id="45">
     <action_set>
-      <pseudo_event id="59" operation="stopped" operation_key="redis-bundle_stopped_0">
-        <attributes CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <rsc_op id="107" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="54" operation="stop" operation_key="redis-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="110" operation="stop" operation_key="haproxy-bundle_stop_0"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="46">
+    <action_set>
+      <rsc_op id="112" operation="stop" operation_key="openstack-cinder-volume-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="openstack-cinder-volume-docker-0" class="ocf" provider="heartbeat" type="docker"/>
+        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-cinder-volume:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/cinder_volume.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/cinder/etc/cinder:/etc/cinder:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /dev:/dev:rw -v /run:/run:rw -v /sys:/sys:rw -v /lib/modules:/lib/modules:ro -v /etc/iscsi:/etc/iscsi:rw -v /var/lib/cinder:/var/lib/cinder:rw -v /var/log/containers/cinder:/var/log/cinder:rw --ipc=host --privileged=true --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      </rsc_op>
+    </action_set>
+    <inputs>
       <trigger>
-        <pseudo_event id="68" operation="stopped" operation_key="redis-bundle-master_stopped_0"/>
+        <pseudo_event id="115" operation="stop" operation_key="openstack-cinder-volume_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="33">
+  <synapse id="47">
     <action_set>
-      <pseudo_event id="58" operation="stop" operation_key="redis-bundle_stop_0">
-        <attributes CRM_meta_timeout="20000" />
-      </pseudo_event>
+      <crm_event id="118" operation="do_shutdown" operation_key="do_shutdown-undercloud" on_node="undercloud" on_node_uuid="1">
+        <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_no_wait="true" />
+        <downed>
+          <node id="1"/>
+        </downed>
+      </crm_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="36" operation="stopped" operation_key="galera-bundle_stopped_0"/>
+        <rsc_op id="19" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="20" operation="stop" operation_key="rabbitmq-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="39" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="40" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="62" operation="stop" operation_key="redis-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="63" operation="stop" operation_key="redis-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="101" operation="stop" operation_key="ip-192.168.122.254_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="102" operation="stop" operation_key="ip-192.168.122.250_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="76" operation="demoted" operation_key="redis-bundle_demoted_0"/>
+        <rsc_op id="103" operation="stop" operation_key="ip-192.168.122.249_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="104" operation="stop" operation_key="ip-192.168.122.253_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="105" operation="stop" operation_key="ip-192.168.122.247_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="106" operation="stop" operation_key="ip-192.168.122.248_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="107" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="112" operation="stop" operation_key="openstack-cinder-volume-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="34" priority="1000000">
+  <synapse id="48" priority="1000000">
     <action_set>
-      <pseudo_event id="53" operation="demoted" operation_key="galera-bundle_demoted_0">
+      <pseudo_event id="116" operation="stopped" operation_key="openstack-cinder-volume_stopped_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="49" operation="demoted" operation_key="galera-bundle-master_demoted_0"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="52" operation="demote" operation_key="galera-bundle_demote_0"/>
+        <rsc_op id="112" operation="stop" operation_key="openstack-cinder-volume-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="35">
+  <synapse id="49">
     <action_set>
-      <pseudo_event id="52" operation="demote" operation_key="galera-bundle_demote_0">
+      <pseudo_event id="115" operation="stop" operation_key="openstack-cinder-volume_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="36" priority="1000000">
+  <synapse id="50" priority="1000000">
     <action_set>
-      <pseudo_event id="49" operation="demoted" operation_key="galera-bundle-master_demoted_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="111" operation="stopped" operation_key="haproxy-bundle_stopped_0">
+        <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="48" operation="demote" operation_key="galera-bundle-master_demote_0"/>
+        <rsc_op id="107" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="37">
+  <synapse id="51">
     <action_set>
-      <pseudo_event id="48" operation="demote" operation_key="galera-bundle-master_demote_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="110" operation="stop" operation_key="haproxy-bundle_stop_0">
+        <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="52" operation="demote" operation_key="galera-bundle_demote_0"/>
+        <pseudo_event id="67" operation="stopped" operation_key="redis-bundle_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="38" priority="1000000">
+  <synapse id="52" priority="1000000">
     <action_set>
-      <pseudo_event id="45" operation="stopped" operation_key="galera-bundle-master_stopped_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="100" operation="demoted" operation_key="redis-bundle_demoted_0">
+        <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="39" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <pseudo_event id="96" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="44" operation="stop" operation_key="galera-bundle-master_stop_0"/>
+        <pseudo_event id="99" operation="demote" operation_key="redis-bundle_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="39">
+  <synapse id="53">
     <action_set>
-      <pseudo_event id="44" operation="stop" operation_key="galera-bundle-master_stop_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="99" operation="demote" operation_key="redis-bundle_demote_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="54" priority="1000000">
+    <action_set>
+      <pseudo_event id="67" operation="stopped" operation_key="redis-bundle_stopped_0">
+        <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="35" operation="stop" operation_key="galera-bundle_stop_0"/>
+        <rsc_op id="62" operation="stop" operation_key="redis-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="49" operation="demoted" operation_key="galera-bundle-master_demoted_0"/>
+        <pseudo_event id="84" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="40" priority="1000000">
+  <synapse id="55">
     <action_set>
-      <pseudo_event id="36" operation="stopped" operation_key="galera-bundle_stopped_0">
+      <pseudo_event id="66" operation="stop" operation_key="redis-bundle_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="31" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="44" operation="stopped" operation_key="galera-bundle_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="stopped" operation_key="galera-bundle-master_stopped_0"/>
+        <pseudo_event id="100" operation="demoted" operation_key="redis-bundle_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="41">
+  <synapse id="56" priority="1000000">
     <action_set>
-      <pseudo_event id="35" operation="stop" operation_key="galera-bundle_stop_0">
+      <pseudo_event id="61" operation="demoted" operation_key="galera-bundle_demoted_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="53" operation="demoted" operation_key="galera-bundle_demoted_0"/>
+        <pseudo_event id="57" operation="demoted" operation_key="galera-bundle-master_demoted_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="60" operation="demote" operation_key="galera-bundle_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="42" priority="1000000">
+  <synapse id="57">
     <action_set>
-      <pseudo_event id="30" operation="stopped" operation_key="rabbitmq-bundle-clone_stopped_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="60" operation="demote" operation_key="galera-bundle_demote_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="58" priority="1000000">
+    <action_set>
+      <pseudo_event id="44" operation="stopped" operation_key="galera-bundle_stopped_0">
+        <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="25" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:0_stop_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="39" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0"/>
+        <pseudo_event id="53" operation="stopped" operation_key="galera-bundle-master_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="43">
+  <synapse id="59">
     <action_set>
-      <pseudo_event id="29" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0">
-        <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      <pseudo_event id="43" operation="stop" operation_key="galera-bundle_stop_0">
+        <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="23" operation="stop" operation_key="rabbitmq-bundle_stop_0"/>
+        <pseudo_event id="61" operation="demoted" operation_key="galera-bundle_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="44" priority="1000000">
+  <synapse id="60" priority="1000000">
     <action_set>
       <pseudo_event id="24" operation="stopped" operation_key="rabbitmq-bundle_stopped_0">
         <attributes CRM_meta_timeout="20000" />
@@ -662,11 +880,11 @@
         <rsc_op id="19" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="30" operation="stopped" operation_key="rabbitmq-bundle-clone_stopped_0"/>
+        <pseudo_event id="38" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="45">
+  <synapse id="61">
     <action_set>
       <pseudo_event id="23" operation="stop" operation_key="rabbitmq-bundle_stop_0">
         <attributes CRM_meta_timeout="20000" />
@@ -674,7 +892,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="46">
+  <synapse id="62">
     <action_set>
       <pseudo_event id="18" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -691,46 +909,52 @@
         <rsc_op id="25" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:0_stop_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <rsc_op id="31" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <pseudo_event id="38" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="39" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="40" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="32" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="47" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <rsc_op id="39" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="62" operation="stop" operation_key="redis-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="54" operation="stop" operation_key="redis-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="63" operation="stop" operation_key="redis-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="55" operation="stop" operation_key="redis-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="70" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <rsc_op id="62" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <pseudo_event id="84" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="77" operation="stop" operation_key="ip-192.168.122.254_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="101" operation="stop" operation_key="ip-192.168.122.254_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="78" operation="stop" operation_key="ip-192.168.122.250_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="102" operation="stop" operation_key="ip-192.168.122.250_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="79" operation="stop" operation_key="ip-192.168.122.249_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="103" operation="stop" operation_key="ip-192.168.122.249_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="80" operation="stop" operation_key="ip-192.168.122.253_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="104" operation="stop" operation_key="ip-192.168.122.253_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="81" operation="stop" operation_key="ip-192.168.122.247_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="105" operation="stop" operation_key="ip-192.168.122.247_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="82" operation="stop" operation_key="ip-192.168.122.248_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="106" operation="stop" operation_key="ip-192.168.122.248_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="83" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="107" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="88" operation="stop" operation_key="openstack-cinder-volume-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="112" operation="stop" operation_key="openstack-cinder-volume-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/bundle-order-stop.summary b/pengine/test10/bundle-order-stop.summary
index 7bc24d2..29cf490 100644
--- a/pengine/test10/bundle-order-stop.summary
+++ b/pengine/test10/bundle-order-stop.summary
@@ -41,41 +41,57 @@ Transition Summary:
  * Stop    openstack-cinder-volume-docker-0	(undercloud)  	due to node availability
 
 Executing cluster transition:
+ * Pseudo action:   rabbitmq-bundle-clone_pre_notify_stop_0
  * Resource action: galera          cancel=10000 on galera-bundle-0
  * Resource action: redis           cancel=20000 on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_pre_notify_demote_0
  * Pseudo action:   openstack-cinder-volume_stop_0
  * Pseudo action:   redis-bundle_demote_0
- * Pseudo action:   redis-bundle-master_demote_0
  * Pseudo action:   galera-bundle_demote_0
- * Pseudo action:   galera-bundle-master_demote_0
  * Pseudo action:   rabbitmq-bundle_stop_0
- * Resource action: galera          demote on galera-bundle-0
- * Resource action: redis           demote on redis-bundle-0
+ * Resource action: rabbitmq        notify on rabbitmq-bundle-0
+ * Pseudo action:   rabbitmq-bundle-clone_confirmed-pre_notify_stop_0
+ * Pseudo action:   rabbitmq-bundle-clone_stop_0
+ * Pseudo action:   galera-bundle-master_demote_0
+ * Resource action: redis           notify on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_confirmed-pre_notify_demote_0
+ * Pseudo action:   redis-bundle-master_demote_0
  * Resource action: openstack-cinder-volume-docker-0 stop on undercloud
  * Pseudo action:   openstack-cinder-volume_stopped_0
- * Pseudo action:   redis-bundle-master_demoted_0
- * Pseudo action:   galera-bundle-master_demoted_0
- * Pseudo action:   rabbitmq-bundle-clone_stop_0
  * Resource action: rabbitmq        stop on rabbitmq-bundle-0
+ * Pseudo action:   rabbitmq-bundle-clone_stopped_0
  * Resource action: rabbitmq-bundle-0 stop on undercloud
- * Pseudo action:   redis-bundle_demoted_0
+ * Resource action: galera          demote on galera-bundle-0
+ * Pseudo action:   galera-bundle-master_demoted_0
+ * Resource action: redis           demote on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_demoted_0
  * Pseudo action:   galera-bundle_demoted_0
  * Pseudo action:   galera-bundle_stop_0
- * Pseudo action:   rabbitmq-bundle-clone_stopped_0
+ * Pseudo action:   rabbitmq-bundle-clone_post_notify_stopped_0
  * Resource action: rabbitmq-bundle-docker-0 stop on undercloud
  * Pseudo action:   galera-bundle-master_stop_0
- * Pseudo action:   rabbitmq-bundle_stopped_0
+ * Pseudo action:   redis-bundle-master_post_notify_demoted_0
+ * Pseudo action:   rabbitmq-bundle-clone_confirmed-post_notify_stopped_0
  * Resource action: galera          stop on galera-bundle-0
- * Resource action: galera-bundle-0 stop on undercloud
  * Pseudo action:   galera-bundle-master_stopped_0
+ * Resource action: galera-bundle-0 stop on undercloud
+ * Resource action: redis           notify on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_confirmed-post_notify_demoted_0
+ * Pseudo action:   redis-bundle-master_pre_notify_stop_0
+ * Pseudo action:   redis-bundle_demoted_0
+ * Pseudo action:   rabbitmq-bundle_stopped_0
  * Resource action: galera-bundle-docker-0 stop on undercloud
+ * Resource action: redis           notify on redis-bundle-0
+ * Pseudo action:   redis-bundle-master_confirmed-pre_notify_stop_0
  * Pseudo action:   galera-bundle_stopped_0
  * Pseudo action:   redis-bundle_stop_0
  * Pseudo action:   redis-bundle-master_stop_0
  * Resource action: redis           stop on redis-bundle-0
- * Resource action: redis-bundle-0  stop on undercloud
  * Pseudo action:   redis-bundle-master_stopped_0
+ * Resource action: redis-bundle-0  stop on undercloud
+ * Pseudo action:   redis-bundle-master_post_notify_stopped_0
  * Resource action: redis-bundle-docker-0 stop on undercloud
+ * Pseudo action:   redis-bundle-master_confirmed-post_notify_stopped_0
  * Pseudo action:   redis-bundle_stopped_0
  * Pseudo action:   haproxy-bundle_stop_0
  * Resource action: haproxy-bundle-docker-0 stop on undercloud
diff --git a/pengine/test10/remote-fence-unclean-3.exp b/pengine/test10/remote-fence-unclean-3.exp
index 5bf7eb3..b7bb735 100644
--- a/pengine/test10/remote-fence-unclean-3.exp
+++ b/pengine/test10/remote-fence-unclean-3.exp
@@ -75,7 +75,7 @@
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="185" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="209" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
@@ -107,7 +107,7 @@
         <rsc_op id="30" operation="stop" operation_key="overcloud-novacompute-0_stop_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="185" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="209" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-- 
1.8.3.1

