From 25b4ef781c81ff7a362c86eb73f6371b8457a94d Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Mon, 29 May 2017 14:27:19 +1000
Subject: [PATCH] PE: Fence unrecoverable remote nodes with no resources

The exception is remote nodes known not to be running any services.
To ensure this, we probe remote nodes before we allow the connection to
be stopped and added a test case to ensure this does not result in graph
loops.
---
 pengine/allocate.c                                 |  71 +-
 pengine/regression.sh                              |   3 +
 pengine/test10/remote-probe-disable.dot            |  13 +
 pengine/test10/remote-probe-disable.exp            |  75 ++
 pengine/test10/remote-probe-disable.scores         |  25 +
 pengine/test10/remote-probe-disable.summary        |  35 +
 pengine/test10/remote-probe-disable.xml            | 169 ++++
 pengine/test10/remote-recover-all.dot              |  25 +-
 pengine/test10/remote-recover-all.exp              | 481 ++++++------
 pengine/test10/remote-recover-all.scores           |  10 +-
 pengine/test10/remote-recover-all.summary          |  51 +-
 pengine/test10/remote-recover-all.xml              |   2 -
 pengine/test10/remote-recover-no-resources.dot     | 143 ++++
 pengine/test10/remote-recover-no-resources.exp     | 755 ++++++++++++++++++
 pengine/test10/remote-recover-no-resources.scores  | 848 +++++++++++++++++++++
 pengine/test10/remote-recover-no-resources.summary | 143 ++++
 pengine/test10/remote-recover-no-resources.xml     | 741 ++++++++++++++++++
 pengine/test10/remote-recover-unknown.dot          | 146 ++++
 pengine/test10/remote-recover-unknown.exp          | 770 +++++++++++++++++++
 pengine/test10/remote-recover-unknown.scores       | 848 +++++++++++++++++++++
 pengine/test10/remote-recover-unknown.summary      | 144 ++++
 pengine/test10/remote-recover-unknown.xml          | 734 ++++++++++++++++++
 22 files changed, 5910 insertions(+), 322 deletions(-)
 create mode 100644 pengine/test10/remote-probe-disable.dot
 create mode 100644 pengine/test10/remote-probe-disable.exp
 create mode 100644 pengine/test10/remote-probe-disable.scores
 create mode 100644 pengine/test10/remote-probe-disable.summary
 create mode 100644 pengine/test10/remote-probe-disable.xml
 create mode 100644 pengine/test10/remote-recover-no-resources.dot
 create mode 100644 pengine/test10/remote-recover-no-resources.exp
 create mode 100644 pengine/test10/remote-recover-no-resources.scores
 create mode 100644 pengine/test10/remote-recover-no-resources.summary
 create mode 100644 pengine/test10/remote-recover-no-resources.xml
 create mode 100644 pengine/test10/remote-recover-unknown.dot
 create mode 100644 pengine/test10/remote-recover-unknown.exp
 create mode 100644 pengine/test10/remote-recover-unknown.scores
 create mode 100644 pengine/test10/remote-recover-unknown.summary
 create mode 100644 pengine/test10/remote-recover-unknown.xml

diff --git a/pengine/allocate.c b/pengine/allocate.c
index b431d31..795ed56 100644
--- a/pengine/allocate.c
+++ b/pengine/allocate.c
@@ -899,13 +899,6 @@ probe_resources(pe_working_set_t * data_set)
         } else if (node->details->unclean) {
             continue;
 
-        } else if (is_remote_node(node) && node->details->shutdown) {
-            /* Don't probe a Pacemaker Remote node we're shutting down.
-             * It causes constraint conflicts to try to run any action
-             * other than "stop" on resources living within such a node when
-             * it is shutting down. */
-            continue;
-
         } else if (is_container_remote_node(node)) {
             /* TODO enable guest node probes once ordered probing is implemented */
             continue;
@@ -1761,7 +1754,8 @@ enum remote_connection_state
     remote_state_unknown = 0,
     remote_state_alive = 1,
     remote_state_resting = 2,
-    remote_state_dead= 3
+    remote_state_failed = 3,
+    remote_state_stopped = 4
 };
 
 static int
@@ -1902,13 +1896,20 @@ apply_remote_ordering(action_t *action, pe_working_set_t *data_set)
      */
     if(remote_rsc->next_role == RSC_ROLE_STOPPED || remote_rsc->allocated_to == NULL) {
         /* There is no-where left to run the connection resource
-         * We must assume the target has failed
+         * and the resource is in a failed state (either directly
+         * or because it is located on a failed node).
+         *
+         * If there are any resources known to be active on it (stop),
+         * or if there are resources in an unknown state (probe), we
+         * must assume the worst and fence it.
          */
-        state = remote_state_dead;
-        if(is_set(remote_rsc->flags, pe_rsc_failed)) {
-            pe_fence_node(data_set, action->node, "because the connection is unrecoverable (failed)");
+
+        if(is_set(action->node->details->remote_rsc->flags, pe_rsc_failed)) {
+            state = remote_state_failed;
         } else if(cluster_node && cluster_node->details->unclean) {
-            pe_fence_node(data_set, action->node, "because the connection is unrecoverable (unclean host)");
+            state = remote_state_failed;
+        } else {
+            state = remote_state_stopped;
         }
 
     } else if (cluster_node == NULL) {
@@ -1933,11 +1934,11 @@ apply_remote_ordering(action_t *action, pe_working_set_t *data_set)
         state = remote_state_alive;
     }
 
-    crm_trace("%s %s %d %d", action->uuid, action->task, state, is_set(remote_rsc->flags, pe_rsc_failed));
+    crm_trace("%s %s %s %d %d", action->uuid, action->task, action->node->details->uname, state, is_set(remote_rsc->flags, pe_rsc_failed));
     switch (task) {
         case start_rsc:
         case action_promote:
-            if(state == remote_state_dead) {
+            if(state == remote_state_failed) {
                 /* Wait for the connection resource to be up and force recovery */
                 custom_action_order(remote_rsc, generate_op_key(remote_rsc->id, RSC_START, 0), NULL,
                                     action->rsc, NULL, action,
@@ -1958,7 +1959,17 @@ apply_remote_ordering(action_t *action, pe_working_set_t *data_set)
                 custom_action_order(remote_rsc, generate_op_key(remote_rsc->id, RSC_START, 0), NULL,
                                     action->rsc, NULL, action,
                                     pe_order_preserve | pe_order_runnable_left, data_set);
+
             } else {
+                if(state == remote_state_failed) {
+                    /* We would only be here if the resource is
+                     * running on the remote node.  Since we have no
+                     * way to stop it, it is necessary to fence the
+                     * node.
+                     */
+                    pe_fence_node(data_set, action->node, "because resources are active and the connection is unrecoverable");
+                }
+
                 custom_action_order(action->rsc, NULL, action,
                                     remote_rsc, generate_op_key(remote_rsc->id, RSC_STOP, 0), NULL,
                                     pe_order_preserve | pe_order_implies_first, data_set);
@@ -1990,10 +2001,34 @@ apply_remote_ordering(action_t *action, pe_working_set_t *data_set)
                 custom_action_order(remote_rsc, generate_op_key(remote_rsc->id, RSC_START, 0), NULL,
                                     action->rsc, NULL, action,
                                     pe_order_preserve | pe_order_runnable_left | pe_order_implies_then, data_set);
+
             } else {
-                custom_action_order(remote_rsc, generate_op_key(remote_rsc->id, RSC_START, 0), NULL,
-                                    action->rsc, NULL, action,
-                                    pe_order_preserve | pe_order_runnable_left, data_set);
+                if(task == monitor_rsc && state == remote_state_failed) {
+                    /* We would only be here if we do not know the
+                     * state of the resource on the remote node.
+                     * Since we have no way to find out, it is
+                     * necessary to fence the node.
+                     */
+                    pe_fence_node(data_set, action->node, "because resources are in an unknown state and the connection is unrecoverable");
+                }
+
+                if(cluster_node && state == remote_state_stopped) {
+                    /* The connection is currently up, but is going
+                     * down permanently.
+                     *
+                     * Make sure we check services are actually
+                     * stopped _before_ we let the connection get
+                     * closed
+                     */
+                    custom_action_order(action->rsc, NULL, action,
+                                        remote_rsc, generate_op_key(remote_rsc->id, RSC_STOP, 0), NULL,
+                                        pe_order_preserve | pe_order_runnable_left, data_set);
+
+                } else {
+                    custom_action_order(remote_rsc, generate_op_key(remote_rsc->id, RSC_START, 0), NULL,
+                                        action->rsc, NULL, action,
+                                        pe_order_preserve | pe_order_runnable_left, data_set);
+                }
             }
             break;
     }
diff --git a/pengine/regression.sh b/pengine/regression.sh
index 7b0ce76..df449e0 100755
--- a/pengine/regression.sh
+++ b/pengine/regression.sh
@@ -827,6 +827,7 @@ do_test remote-fence-unclean   "Fence unclean baremetal remote-node"
 do_test remote-fence-unclean2  "Fence baremetal remote-node after cluster node fails and connection can not be recovered"
 do_test remote-move            "Move remote-node connection resource"
 do_test remote-disable         "Disable a baremetal remote-node"
+do_test remote-probe-disable   "Probe then stop a baremetal remote-node"
 do_test remote-orphaned        "Properly shutdown orphaned connection resource"
 do_test remote-orphaned2       "verify we can handle orphaned remote connections with active resources on the remote"
 do_test remote-recover         "Recover connection resource after cluster-node fails."
@@ -840,6 +841,8 @@ do_test remote-fence-before-reconnect "Fence before clearing recurring monitor f
 do_test remote-recovery		"Recover remote connections before attempting demotion"
 do_test remote-recover-connection "Optimistically recovery of only the connection"
 do_test remote-recover-all        "Fencing when the connection has no home"
+do_test remote-recover-no-resources   "Fencing when the connection has no home and no active resources"
+do_test remote-recover-unknown        "Fencing when the connection has no home and the remote has no operation history"
 
 echo ""
 do_test resource-discovery      "Exercises resource-discovery location constraint option."
diff --git a/pengine/test10/remote-probe-disable.dot b/pengine/test10/remote-probe-disable.dot
new file mode 100644
index 0000000..e2f06ed
--- /dev/null
+++ b/pengine/test10/remote-probe-disable.dot
@@ -0,0 +1,13 @@
+digraph "g" {
+"FAKE1_monitor_0 remote1" -> "remote1_stop_0 18builder" [ style = bold]
+"FAKE1_monitor_0 remote1" [ style=bold color="green" fontcolor="black"]
+"FAKE2_monitor_0 remote1" -> "remote1_stop_0 18builder" [ style = bold]
+"FAKE2_monitor_0 remote1" [ style=bold color="green" fontcolor="black"]
+"FAKE3_monitor_0 remote1" -> "remote1_stop_0 18builder" [ style = bold]
+"FAKE3_monitor_0 remote1" [ style=bold color="green" fontcolor="black"]
+"FAKE4_monitor_0 remote1" -> "remote1_stop_0 18builder" [ style = bold]
+"FAKE4_monitor_0 remote1" [ style=bold color="green" fontcolor="black"]
+"all_stopped" [ style=bold color="green" fontcolor="orange"]
+"remote1_stop_0 18builder" -> "all_stopped" [ style = bold]
+"remote1_stop_0 18builder" [ style=bold color="green" fontcolor="black"]
+}
diff --git a/pengine/test10/remote-probe-disable.exp b/pengine/test10/remote-probe-disable.exp
new file mode 100644
index 0000000..a911392
--- /dev/null
+++ b/pengine/test10/remote-probe-disable.exp
@@ -0,0 +1,75 @@
+<transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
+  <synapse id="0">
+    <action_set>
+      <rsc_op id="13" operation="stop" operation_key="remote1_stop_0" on_node="18builder" on_node_uuid="5">
+        <primitive id="remote1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_timeout="20000" />
+        <downed>
+          <node id="remote1"/>
+        </downed>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="7" operation="monitor" operation_key="FAKE1_monitor_0" on_node="remote1" on_node_uuid="remote1" router_node="18builder"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="8" operation="monitor" operation_key="FAKE2_monitor_0" on_node="remote1" on_node_uuid="remote1" router_node="18builder"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="9" operation="monitor" operation_key="FAKE3_monitor_0" on_node="remote1" on_node_uuid="remote1" router_node="18builder"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="10" operation="monitor" operation_key="FAKE4_monitor_0" on_node="remote1" on_node_uuid="remote1" router_node="18builder"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="1">
+    <action_set>
+      <rsc_op id="7" operation="monitor" operation_key="FAKE1_monitor_0" on_node="remote1" on_node_uuid="remote1" router_node="18builder">
+        <primitive id="FAKE1" class="ocf" provider="heartbeat" type="Dummy"/>
+        <attributes CRM_meta_on_node="remote1" CRM_meta_on_node_uuid="remote1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="2">
+    <action_set>
+      <rsc_op id="8" operation="monitor" operation_key="FAKE2_monitor_0" on_node="remote1" on_node_uuid="remote1" router_node="18builder">
+        <primitive id="FAKE2" class="ocf" provider="heartbeat" type="Dummy"/>
+        <attributes CRM_meta_on_node="remote1" CRM_meta_on_node_uuid="remote1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="3">
+    <action_set>
+      <rsc_op id="9" operation="monitor" operation_key="FAKE3_monitor_0" on_node="remote1" on_node_uuid="remote1" router_node="18builder">
+        <primitive id="FAKE3" class="ocf" provider="heartbeat" type="Dummy"/>
+        <attributes CRM_meta_on_node="remote1" CRM_meta_on_node_uuid="remote1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="4">
+    <action_set>
+      <rsc_op id="10" operation="monitor" operation_key="FAKE4_monitor_0" on_node="remote1" on_node_uuid="remote1" router_node="18builder">
+        <primitive id="FAKE4" class="ocf" provider="heartbeat" type="Dummy"/>
+        <attributes CRM_meta_on_node="remote1" CRM_meta_on_node_uuid="remote1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="5">
+    <action_set>
+      <pseudo_event id="6" operation="all_stopped" operation_key="all_stopped">
+        <attributes />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="13" operation="stop" operation_key="remote1_stop_0" on_node="18builder" on_node_uuid="5"/>
+      </trigger>
+    </inputs>
+  </synapse>
+</transition_graph>
diff --git a/pengine/test10/remote-probe-disable.scores b/pengine/test10/remote-probe-disable.scores
new file mode 100644
index 0000000..d66861f
--- /dev/null
+++ b/pengine/test10/remote-probe-disable.scores
@@ -0,0 +1,25 @@
+Allocation scores:
+native_color: FAKE1 allocation score on 18builder: 0
+native_color: FAKE1 allocation score on 18node1: 0
+native_color: FAKE1 allocation score on 18node2: 0
+native_color: FAKE1 allocation score on remote1: 0
+native_color: FAKE2 allocation score on 18builder: -INFINITY
+native_color: FAKE2 allocation score on 18node1: -INFINITY
+native_color: FAKE2 allocation score on 18node2: -INFINITY
+native_color: FAKE2 allocation score on remote1: 0
+native_color: FAKE3 allocation score on 18builder: 0
+native_color: FAKE3 allocation score on 18node1: 0
+native_color: FAKE3 allocation score on 18node2: 0
+native_color: FAKE3 allocation score on remote1: 0
+native_color: FAKE4 allocation score on 18builder: 0
+native_color: FAKE4 allocation score on 18node1: 0
+native_color: FAKE4 allocation score on 18node2: 0
+native_color: FAKE4 allocation score on remote1: 0
+native_color: remote1 allocation score on 18builder: -INFINITY
+native_color: remote1 allocation score on 18node1: -INFINITY
+native_color: remote1 allocation score on 18node2: -INFINITY
+native_color: remote1 allocation score on remote1: -INFINITY
+native_color: shooter allocation score on 18builder: 0
+native_color: shooter allocation score on 18node1: 0
+native_color: shooter allocation score on 18node2: 0
+native_color: shooter allocation score on remote1: -INFINITY
diff --git a/pengine/test10/remote-probe-disable.summary b/pengine/test10/remote-probe-disable.summary
new file mode 100644
index 0000000..1824da6
--- /dev/null
+++ b/pengine/test10/remote-probe-disable.summary
@@ -0,0 +1,35 @@
+2 of 6 resources DISABLED and 0 BLOCKED from being started due to failures
+
+Current cluster status:
+Online: [ 18builder 18node1 18node2 ]
+RemoteOnline: [ remote1 ]
+
+ shooter	(stonith:fence_xvm):	Started 18node1
+ remote1	(ocf::pacemaker:remote):	Started 18builder (disabled)
+ FAKE1	(ocf::heartbeat:Dummy):	Started 18node2
+ FAKE2	(ocf::heartbeat:Dummy):	Stopped
+ FAKE3	(ocf::heartbeat:Dummy):	Started 18builder
+ FAKE4	(ocf::heartbeat:Dummy):	Started 18node1
+
+Transition Summary:
+ * Stop    remote1	(18builder)
+
+Executing cluster transition:
+ * Resource action: FAKE1           monitor on remote1
+ * Resource action: FAKE2           monitor on remote1
+ * Resource action: FAKE3           monitor on remote1
+ * Resource action: FAKE4           monitor on remote1
+ * Resource action: remote1         stop on 18builder
+ * Pseudo action:   all_stopped
+
+Revised cluster status:
+Online: [ 18builder 18node1 18node2 ]
+RemoteOFFLINE: [ remote1 ]
+
+ shooter	(stonith:fence_xvm):	Started 18node1
+ remote1	(ocf::pacemaker:remote):	Stopped (disabled)
+ FAKE1	(ocf::heartbeat:Dummy):	Started 18node2
+ FAKE2	(ocf::heartbeat:Dummy):	Stopped
+ FAKE3	(ocf::heartbeat:Dummy):	Started 18builder
+ FAKE4	(ocf::heartbeat:Dummy):	Started 18node1
+
diff --git a/pengine/test10/remote-probe-disable.xml b/pengine/test10/remote-probe-disable.xml
new file mode 100644
index 0000000..87c64a8
--- /dev/null
+++ b/pengine/test10/remote-probe-disable.xml
@@ -0,0 +1,169 @@
+<cib epoch="12" num_updates="1" admin_epoch="0" validate-with="pacemaker-1.2" cib-last-written="Tue Sep  3 18:01:09 2013" update-origin="18builder" update-client="crm_resource" crm_feature_set="3.0.7" have-quorum="1" dc-uuid="5">
+  <configuration>
+    <crm_config>
+      <cluster_property_set id="cib-bootstrap-options">
+        <nvpair id="cib-bootstrap-options-dc-version" name="dc-version" value="1.1.10-ab50afe"/>
+        <nvpair id="cib-bootstrap-options-cluster-infrastructure" name="cluster-infrastructure" value="corosync"/>
+      </cluster_property_set>
+    </crm_config>
+    <nodes>
+      <node id="1" uname="18node1"/>
+      <node id="2" uname="18node2"/>
+      <node id="5" uname="18builder"/>
+    </nodes>
+    <resources>
+      <primitive class="stonith" id="shooter" type="fence_xvm">
+        <instance_attributes id="shooter-instance_attributes"/>
+        <operations>
+          <op id="shooter-monitor-interval-60s" interval="60s" name="monitor"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="remote1" provider="pacemaker" type="remote">
+        <instance_attributes id="remote1-instance_attributes"/>
+        <operations>
+          <op id="remote1-monitor-interval-60s" interval="60s" name="monitor"/>
+        </operations>
+        <meta_attributes id="remote1-meta_attributes">
+          <nvpair id="remote1-meta_attributes-target-role" name="target-role" value="Stopped"/>
+        </meta_attributes>
+      </primitive>
+      <primitive class="ocf" id="FAKE1" provider="heartbeat" type="Dummy">
+        <instance_attributes id="FAKE1-instance_attributes"/>
+        <operations>
+          <op id="FAKE1-monitor-interval-60s" interval="60s" name="monitor"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="FAKE2" provider="heartbeat" type="Dummy">
+        <instance_attributes id="FAKE2-instance_attributes"/>
+        <operations>
+          <op id="FAKE2-monitor-interval-60s" interval="60s" name="monitor"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="FAKE3" provider="heartbeat" type="Dummy">
+        <instance_attributes id="FAKE3-instance_attributes"/>
+        <operations>
+          <op id="FAKE3-monitor-interval-60s" interval="60s" name="monitor"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="FAKE4" provider="heartbeat" type="Dummy">
+        <instance_attributes id="FAKE4-instance_attributes"/>
+        <operations>
+          <op id="FAKE4-monitor-interval-60s" interval="60s" name="monitor"/>
+        </operations>
+      </primitive>
+    </resources>
+    <constraints>
+      <rsc_location id="FAKE2-location" rsc="FAKE2">
+        <rule id="FAKE2-on-remote" score="-INFINITY">
+          <expression id="FAKE2-on-remote-exp" attribute="#kind" operation="ne" value="remote"/>
+        </rule>
+      </rsc_location>
+    </constraints>
+  </configuration>
+  <status>
+    <node_state id="5" uname="18builder" in_ccm="true" crmd="online" crm-debug-origin="do_update_resource" join="member" expected="member">
+      <transient_attributes id="5">
+        <instance_attributes id="status-5">
+          <nvpair id="status-5-probe_complete" name="probe_complete" value="true"/>
+        </instance_attributes>
+      </transient_attributes>
+      <lrm id="5">
+        <lrm_resources>
+          <lrm_resource id="shooter" type="fence_xvm" class="stonith">
+            <lrm_rsc_op id="shooter_last_0" operation_key="shooter_stop_0" operation="stop" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="11:4:0:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;11:4:0:6277c962-3d23-450c-8410-560e51c1302b" call-id="16" rc-code="0" op-status="0" interval="0" last-run="1378248545" last-rc-change="1378248545" exec-time="1" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="shooter_monitor_60000" operation_key="shooter_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="10:3:0:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;10:3:0:6277c962-3d23-450c-8410-560e51c1302b" call-id="11" rc-code="0" op-status="0" interval="60000" last-rc-change="1378248534" exec-time="8" queue-time="0" op-digest="4811cef7f7f94e3a35a70be7916cb2fd"/>
+          </lrm_resource>
+          <lrm_resource id="remote1" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="remote1_last_0" operation_key="remote1_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="19:13:0:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;19:13:0:6277c962-3d23-450c-8410-560e51c1302b" call-id="14" rc-code="0" op-status="0" interval="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="remote1_monitor_60000" operation_key="remote1_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="21:14:0:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;21:14:0:6277c962-3d23-450c-8410-560e51c1302b" call-id="15" rc-code="0" op-status="0" interval="60000" op-digest="4811cef7f7f94e3a35a70be7916cb2fd"/>
+          </lrm_resource>
+          <lrm_resource id="FAKE1" type="Dummy" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="FAKE1_last_0" operation_key="FAKE1_stop_0" operation="stop" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="22:14:0:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;22:14:0:6277c962-3d23-450c-8410-560e51c1302b" call-id="65" rc-code="0" op-status="0" interval="0" last-run="1378249167" last-rc-change="1378249167" exec-time="31" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8" op-force-restart=" state " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="FAKE1_monitor_60000" operation_key="FAKE1_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="13:8:0:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;13:8:0:6277c962-3d23-450c-8410-560e51c1302b" call-id="34" rc-code="0" op-status="0" interval="60000" last-rc-change="1378249143" exec-time="9" queue-time="0" op-digest="4811cef7f7f94e3a35a70be7916cb2fd"/>
+          </lrm_resource>
+          <lrm_resource id="FAKE2" type="Dummy" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="FAKE2_last_0" operation_key="FAKE2_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="7:9:7:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:7;7:9:7:6277c962-3d23-450c-8410-560e51c1302b" call-id="39" rc-code="7" op-status="0" interval="0" last-run="1378249145" last-rc-change="1378249145" exec-time="61" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8" op-force-restart=" state " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="FAKE3" type="Dummy" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="FAKE3_last_0" operation_key="FAKE3_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="18:11:0:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;18:11:0:6277c962-3d23-450c-8410-560e51c1302b" call-id="53" rc-code="0" op-status="0" interval="0" last-run="1378249147" last-rc-change="1378249147" exec-time="11" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8" op-force-restart=" state " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="FAKE3_monitor_60000" operation_key="FAKE3_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="19:11:0:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;19:11:0:6277c962-3d23-450c-8410-560e51c1302b" call-id="56" rc-code="0" op-status="0" interval="60000" last-rc-change="1378249147" exec-time="10" queue-time="0" op-digest="4811cef7f7f94e3a35a70be7916cb2fd"/>
+          </lrm_resource>
+          <lrm_resource id="FAKE4" type="Dummy" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="FAKE4_last_0" operation_key="FAKE4_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="9:12:7:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:7;9:12:7:6277c962-3d23-450c-8410-560e51c1302b" call-id="61" rc-code="7" op-status="0" interval="0" last-run="1378249149" last-rc-change="1378249149" exec-time="65" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8" op-force-restart=" state " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+    <node_state id="1" uname="18node1" crmd="online" crm-debug-origin="do_update_resource" in_ccm="true" join="member" expected="member">
+      <lrm id="1">
+        <lrm_resources>
+          <lrm_resource id="shooter" type="fence_xvm" class="stonith">
+            <lrm_rsc_op id="shooter_last_0" operation_key="shooter_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="12:4:0:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;12:4:0:6277c962-3d23-450c-8410-560e51c1302b" call-id="9" rc-code="0" op-status="0" interval="0" last-run="1378248547" last-rc-change="1378248547" exec-time="19" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="shooter_monitor_60000" operation_key="shooter_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="13:4:0:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;13:4:0:6277c962-3d23-450c-8410-560e51c1302b" call-id="12" rc-code="0" op-status="0" interval="60000" last-rc-change="1378248548" exec-time="8" queue-time="0" op-digest="4811cef7f7f94e3a35a70be7916cb2fd"/>
+          </lrm_resource>
+          <lrm_resource id="remote1" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="remote1_last_0" operation_key="remote1_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="8:4:7:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:7;8:4:7:6277c962-3d23-450c-8410-560e51c1302b" call-id="1" rc-code="7" op-status="0" interval="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="FAKE1" type="Dummy" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="FAKE1_last_failure_0" operation_key="FAKE1_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="8:7:7:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;8:7:7:6277c962-3d23-450c-8410-560e51c1302b" call-id="17" rc-code="0" op-status="0" interval="0" last-run="1378249142" last-rc-change="1378249142" exec-time="50" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8" op-force-restart=" state " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="FAKE1_last_0" operation_key="FAKE1_stop_0" operation="stop" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="11:8:0:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;11:8:0:6277c962-3d23-450c-8410-560e51c1302b" call-id="20" rc-code="0" op-status="0" interval="0" last-run="1378249142" last-rc-change="1378249142" exec-time="18" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="FAKE2" type="Dummy" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="FAKE2_last_0" operation_key="FAKE2_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="9:9:7:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:7;9:9:7:6277c962-3d23-450c-8410-560e51c1302b" call-id="25" rc-code="7" op-status="0" interval="0" last-run="1378249144" last-rc-change="1378249144" exec-time="28" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8" op-force-restart=" state " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="FAKE3" type="Dummy" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="FAKE3_last_failure_0" operation_key="FAKE3_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="10:10:7:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;10:10:7:6277c962-3d23-450c-8410-560e51c1302b" call-id="30" rc-code="0" op-status="0" interval="0" last-run="1378249146" last-rc-change="1378249146" exec-time="32" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8" op-force-restart=" state " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="FAKE3_last_0" operation_key="FAKE3_stop_0" operation="stop" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="17:11:0:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;17:11:0:6277c962-3d23-450c-8410-560e51c1302b" call-id="33" rc-code="0" op-status="0" interval="0" last-run="1378249146" last-rc-change="1378249146" exec-time="15" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="FAKE4" type="Dummy" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="FAKE4_last_0" operation_key="FAKE4_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="22:12:0:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;22:12:0:6277c962-3d23-450c-8410-560e51c1302b" call-id="40" rc-code="0" op-status="0" interval="0" last-run="1378249148" last-rc-change="1378249148" exec-time="36" queue-time="38" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8" op-force-restart=" state " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="FAKE4_monitor_60000" operation_key="FAKE4_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="23:12:0:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;23:12:0:6277c962-3d23-450c-8410-560e51c1302b" call-id="44" rc-code="0" op-status="0" interval="60000" last-rc-change="1378249148" exec-time="14" queue-time="1" op-digest="4811cef7f7f94e3a35a70be7916cb2fd"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+      <transient_attributes id="1">
+        <instance_attributes id="status-1">
+          <nvpair id="status-1-probe_complete" name="probe_complete" value="true"/>
+        </instance_attributes>
+      </transient_attributes>
+    </node_state>
+    <node_state id="2" uname="18node2" crmd="online" crm-debug-origin="do_update_resource" in_ccm="true" join="member" expected="member">
+      <lrm id="2">
+        <lrm_resources>
+          <lrm_resource id="shooter" type="fence_xvm" class="stonith">
+            <lrm_rsc_op id="shooter_last_0" operation_key="shooter_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="8:3:7:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:7;8:3:7:6277c962-3d23-450c-8410-560e51c1302b" call-id="5" rc-code="7" op-status="0" interval="0" last-run="1378248530" last-rc-change="1378248530" exec-time="980" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="remote1" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="remote1_last_0" operation_key="remote1_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="10:4:7:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:7;10:4:7:6277c962-3d23-450c-8410-560e51c1302b" call-id="1" rc-code="7" op-status="0" interval="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="FAKE1" type="Dummy" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="FAKE1_last_0" operation_key="FAKE1_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="23:14:0:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;23:14:0:6277c962-3d23-450c-8410-560e51c1302b" call-id="40" rc-code="0" op-status="0" interval="0" last-run="1378249166" last-rc-change="1378249166" exec-time="28" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8" op-force-restart=" state " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="FAKE1_monitor_60000" operation_key="FAKE1_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="24:14:0:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;24:14:0:6277c962-3d23-450c-8410-560e51c1302b" call-id="43" rc-code="0" op-status="0" interval="60000" last-rc-change="1378249166" exec-time="16" queue-time="0" op-digest="4811cef7f7f94e3a35a70be7916cb2fd"/>
+          </lrm_resource>
+          <lrm_resource id="FAKE2" type="Dummy" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="FAKE2_last_0" operation_key="FAKE2_stop_0" operation="stop" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="25:14:0:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;25:14:0:6277c962-3d23-450c-8410-560e51c1302b" call-id="36" rc-code="0" op-status="0" interval="0" last-run="1378249166" last-rc-change="1378249166" exec-time="30" queue-time="1" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8" op-force-restart=" state " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="FAKE2_monitor_60000" operation_key="FAKE2_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="17:9:0:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:0;17:9:0:6277c962-3d23-450c-8410-560e51c1302b" call-id="22" rc-code="0" op-status="0" interval="60000" last-rc-change="1378249144" exec-time="20" queue-time="0" op-digest="4811cef7f7f94e3a35a70be7916cb2fd"/>
+          </lrm_resource>
+          <lrm_resource id="FAKE3" type="Dummy" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="FAKE3_last_0" operation_key="FAKE3_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="12:10:7:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:7;12:10:7:6277c962-3d23-450c-8410-560e51c1302b" call-id="27" rc-code="7" op-status="0" interval="0" last-run="1378249146" last-rc-change="1378249146" exec-time="35" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8" op-force-restart=" state " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="FAKE4" type="Dummy" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="FAKE4_last_0" operation_key="FAKE4_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="13:12:7:6277c962-3d23-450c-8410-560e51c1302b" transition-magic="0:7;13:12:7:6277c962-3d23-450c-8410-560e51c1302b" call-id="32" rc-code="7" op-status="0" interval="0" last-run="1378249148" last-rc-change="1378249148" exec-time="33" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8" op-force-restart=" state " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+      <transient_attributes id="2">
+        <instance_attributes id="status-2">
+          <nvpair id="status-2-probe_complete" name="probe_complete" value="true"/>
+        </instance_attributes>
+      </transient_attributes>
+    </node_state>
+    <node_state remote_node="true" id="remote1" uname="remote1" crm-debug-origin="do_update_resource">
+      <transient_attributes id="remote1">
+        <instance_attributes id="status-remote1">
+          <nvpair id="status-remote1-probe_complete" name="probe_complete" value="true"/>
+        </instance_attributes>
+      </transient_attributes>
+    </node_state>
+  </status>
+</cib>
diff --git a/pengine/test10/remote-recover-all.dot b/pengine/test10/remote-recover-all.dot
index 2369adc..ad421e6 100644
--- a/pengine/test10/remote-recover-all.dot
+++ b/pengine/test10/remote-recover-all.dot
@@ -3,33 +3,28 @@ digraph "g" {
 "all_stopped" -> "stonith-fence_ipmilan-525400b4f6bd_start_0 controller-0" [ style = bold]
 "all_stopped" -> "stonith-fence_ipmilan-525400bbf613_start_0 controller-0" [ style = bold]
 "all_stopped" [ style=bold color="green" fontcolor="orange"]
+"galera-0_monitor_20000 controller-2" [ style=bold color="green" fontcolor="black"]
+"galera-0_start_0 controller-2" -> "galera-0_monitor_20000 controller-2" [ style = bold]
+"galera-0_start_0 controller-2" -> "galera_monitor_10000 galera-0" [ style = bold]
+"galera-0_start_0 controller-2" [ style=bold color="green" fontcolor="black"]
 "galera-0_stop_0 controller-1" -> "all_stopped" [ style = bold]
+"galera-0_stop_0 controller-1" -> "galera-0_start_0 controller-2" [ style = bold]
 "galera-0_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
 "galera-2_stop_0 controller-1" -> "all_stopped" [ style = bold]
 "galera-2_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
 "galera-master_demote_0" -> "galera-master_demoted_0" [ style = bold]
-"galera-master_demote_0" -> "galera_demote_0 galera-0" [ style = bold]
 "galera-master_demote_0" -> "galera_demote_0 galera-2" [ style = bold]
 "galera-master_demote_0" [ style=bold color="green" fontcolor="orange"]
 "galera-master_demoted_0" -> "galera-master_stop_0" [ style = bold]
 "galera-master_demoted_0" [ style=bold color="green" fontcolor="orange"]
 "galera-master_stop_0" -> "galera-master_stopped_0" [ style = bold]
-"galera-master_stop_0" -> "galera_stop_0 galera-0" [ style = bold]
 "galera-master_stop_0" -> "galera_stop_0 galera-2" [ style = bold]
 "galera-master_stop_0" [ style=bold color="green" fontcolor="orange"]
 "galera-master_stopped_0" [ style=bold color="green" fontcolor="orange"]
-"galera_demote_0 galera-0" -> "galera-master_demoted_0" [ style = bold]
-"galera_demote_0 galera-0" -> "galera_demote_0 galera-2" [ style = bold]
-"galera_demote_0 galera-0" -> "galera_stop_0 galera-0" [ style = bold]
-"galera_demote_0 galera-0" [ style=bold color="green" fontcolor="orange"]
 "galera_demote_0 galera-2" -> "galera-master_demoted_0" [ style = bold]
 "galera_demote_0 galera-2" -> "galera_stop_0 galera-2" [ style = bold]
 "galera_demote_0 galera-2" [ style=bold color="green" fontcolor="orange"]
-"galera_stop_0 galera-0" -> "all_stopped" [ style = bold]
-"galera_stop_0 galera-0" -> "galera-0_stop_0 controller-1" [ style = bold]
-"galera_stop_0 galera-0" -> "galera-master_stopped_0" [ style = bold]
-"galera_stop_0 galera-0" -> "galera_stop_0 galera-2" [ style = bold]
-"galera_stop_0 galera-0" [ style=bold color="green" fontcolor="orange"]
+"galera_monitor_10000 galera-0" [ style=bold color="green" fontcolor="black"]
 "galera_stop_0 galera-2" -> "all_stopped" [ style = bold]
 "galera_stop_0 galera-2" -> "galera-2_stop_0 controller-1" [ style = bold]
 "galera_stop_0 galera-2" -> "galera-master_stopped_0" [ style = bold]
@@ -130,13 +125,8 @@ digraph "g" {
 "stonith 'reboot' controller-1" -> "redis-master_stop_0" [ style = bold]
 "stonith 'reboot' controller-1" -> "redis_post_notify_stonith_0" [ style = bold]
 "stonith 'reboot' controller-1" -> "redis_stop_0 controller-1" [ style = bold]
-"stonith 'reboot' controller-1" -> "stonith 'reboot' galera-0" [ style = bold]
+"stonith 'reboot' controller-1" -> "stonith 'reboot' galera-2" [ style = bold]
 "stonith 'reboot' controller-1" [ style=bold color="green" fontcolor="black"]
-"stonith 'reboot' galera-0" -> "galera-master_stop_0" [ style = bold]
-"stonith 'reboot' galera-0" -> "galera_demote_0 galera-0" [ style = bold]
-"stonith 'reboot' galera-0" -> "galera_stop_0 galera-0" [ style = bold]
-"stonith 'reboot' galera-0" -> "stonith 'reboot' galera-2" [ style = bold]
-"stonith 'reboot' galera-0" [ style=bold color="green" fontcolor="black"]
 "stonith 'reboot' galera-2" -> "galera-master_stop_0" [ style = bold]
 "stonith 'reboot' galera-2" -> "galera_demote_0 galera-2" [ style = bold]
 "stonith 'reboot' galera-2" -> "galera_stop_0 galera-2" [ style = bold]
@@ -166,6 +156,7 @@ digraph "g" {
 "stonith-fence_ipmilan-525400bbf613_stop_0 controller-0" -> "stonith-fence_ipmilan-525400bbf613_start_0 controller-0" [ style = bold]
 "stonith-fence_ipmilan-525400bbf613_stop_0 controller-0" [ style=bold color="green" fontcolor="black"]
 "stonith_complete" -> "all_stopped" [ style = bold]
+"stonith_complete" -> "galera-0_start_0 controller-2" [ style = bold]
 "stonith_complete" -> "ip-172.17.1.14_start_0 controller-2" [ style = bold]
 "stonith_complete" -> "ip-172.17.1.17_start_0 controller-2" [ style = bold]
 "stonith_complete" -> "ip-172.17.4.11_start_0 controller-2" [ style = bold]
diff --git a/pengine/test10/remote-recover-all.exp b/pengine/test10/remote-recover-all.exp
index 2b0bd1e..6c1164c 100644
--- a/pengine/test10/remote-recover-all.exp
+++ b/pengine/test10/remote-recover-all.exp
@@ -7,420 +7,411 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="37" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
+        <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="121" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
+      <rsc_op id="31" operation="monitor" operation_key="galera-0_monitor_20000" on_node="controller-2" on_node_uuid="3">
+        <primitive id="galera-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_interval="20000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  reconnect_interval="60"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="30" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="2">
+    <action_set>
+      <rsc_op id="30" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="galera-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="60000"  reconnect_interval="60"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="29" operation="stop" operation_key="galera-0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="124" operation="stonith_complete" operation_key="stonith_complete"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="3">
+    <action_set>
       <pseudo_event id="29" operation="stop" operation_key="galera-0_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="49" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:2_stop_0"/>
-      </trigger>
-      <trigger>
-        <crm_event id="121" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="2">
+  <synapse id="4">
     <action_set>
-      <pseudo_event id="32" operation="stop" operation_key="galera-2_stop_0">
+      <pseudo_event id="34" operation="stop" operation_key="galera-2_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="47" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:1_stop_0"/>
+        <pseudo_event id="49" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:1_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="121" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="3" priority="1000000">
+  <synapse id="5" priority="1000000">
     <action_set>
-      <rsc_op id="131" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stop_0" on_node="messaging-2" on_node_uuid="messaging-2" router_node="controller-0">
+      <rsc_op id="134" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stop_0" on_node="messaging-2" on_node_uuid="messaging-2" router_node="controller-0">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_stop_resource="rabbitmq:2" CRM_meta_notify_stop_uname="messaging-1" CRM_meta_notify_type="post" CRM_meta_on_node="messaging-2" CRM_meta_on_node_uuid="messaging-2" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="129" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stonith_0"/>
+        <pseudo_event id="132" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="4" priority="1000000">
+  <synapse id="6" priority="1000000">
     <action_set>
-      <rsc_op id="132" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:1_post_notify_stop_0" on_node="messaging-0" on_node_uuid="messaging-0" router_node="controller-0">
+      <rsc_op id="135" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:1_post_notify_stop_0" on_node="messaging-0" on_node_uuid="messaging-0" router_node="controller-0">
         <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_stop_resource="rabbitmq:2" CRM_meta_notify_stop_uname="messaging-1" CRM_meta_notify_type="post" CRM_meta_on_node="messaging-0" CRM_meta_on_node_uuid="messaging-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="129" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stonith_0"/>
+        <pseudo_event id="132" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="5" priority="1000000">
+  <synapse id="7" priority="1000000">
     <action_set>
-      <pseudo_event id="130" operation="notified" operation_key="rabbitmq_notified_0" internal_operation_key="rabbitmq:2_confirmed-post_notify_stonith_0">
+      <pseudo_event id="133" operation="notified" operation_key="rabbitmq_notified_0" internal_operation_key="rabbitmq:2_confirmed-post_notify_stonith_0">
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="129" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stonith_0"/>
+        <pseudo_event id="132" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stonith_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="131" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stop_0" on_node="messaging-2" on_node_uuid="messaging-2" router_node="controller-0"/>
+        <rsc_op id="134" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stop_0" on_node="messaging-2" on_node_uuid="messaging-2" router_node="controller-0"/>
       </trigger>
       <trigger>
-        <rsc_op id="132" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:1_post_notify_stop_0" on_node="messaging-0" on_node_uuid="messaging-0" router_node="controller-0"/>
+        <rsc_op id="135" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:1_post_notify_stop_0" on_node="messaging-0" on_node_uuid="messaging-0" router_node="controller-0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="6" priority="1000000">
+  <synapse id="8" priority="1000000">
     <action_set>
-      <pseudo_event id="129" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stonith_0">
+      <pseudo_event id="132" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stonith_0">
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="128" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+        <crm_event id="131" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="7">
+  <synapse id="9">
     <action_set>
-      <pseudo_event id="37" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0">
+      <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0">
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_notify_stop_resource="rabbitmq:2" CRM_meta_notify_stop_uname="messaging-1" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="40" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
+        <pseudo_event id="42" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="128" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+        <crm_event id="131" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="8" priority="1000000">
+  <synapse id="10" priority="1000000">
     <action_set>
-      <pseudo_event id="41" operation="stopped" operation_key="rabbitmq-clone_stopped_0">
+      <pseudo_event id="43" operation="stopped" operation_key="rabbitmq-clone_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="37" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
+        <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="40" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
+        <pseudo_event id="42" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="9">
+  <synapse id="11">
     <action_set>
-      <pseudo_event id="40" operation="stop" operation_key="rabbitmq-clone_stop_0">
+      <pseudo_event id="42" operation="stop" operation_key="rabbitmq-clone_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="128" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+        <crm_event id="131" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10">
+  <synapse id="12">
     <action_set>
-      <pseudo_event id="47" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:1_stop_0">
+      <pseudo_event id="49" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:1_stop_0">
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384"  enable_creation="true" wsrep_cluster_address="gcomm://galera-0,galera-1,galera-2"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="46" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:1_demote_0"/>
+        <pseudo_event id="48" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:1_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="49" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:2_stop_0"/>
+        <pseudo_event id="56" operation="stop" operation_key="galera-master_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="52" operation="stop" operation_key="galera-master_stop_0"/>
-      </trigger>
-      <trigger>
-        <crm_event id="127" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2"/>
+        <crm_event id="130" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="11">
+  <synapse id="13">
     <action_set>
-      <pseudo_event id="46" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:1_demote_0">
+      <pseudo_event id="48" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:1_demote_0">
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="false" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384"  enable_creation="true" wsrep_cluster_address="gcomm://galera-0,galera-1,galera-2"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="48" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:2_demote_0"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="56" operation="demote" operation_key="galera-master_demote_0"/>
-      </trigger>
-      <trigger>
-        <crm_event id="127" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="12">
-    <action_set>
-      <pseudo_event id="49" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:2_stop_0">
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384"  enable_creation="true" wsrep_cluster_address="gcomm://galera-0,galera-1,galera-2"/>
-      </pseudo_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <pseudo_event id="48" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:2_demote_0"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="52" operation="stop" operation_key="galera-master_stop_0"/>
+        <pseudo_event id="60" operation="demote" operation_key="galera-master_demote_0"/>
       </trigger>
       <trigger>
-        <crm_event id="126" operation="stonith" operation_key="stonith-galera-0-reboot" on_node="galera-0" on_node_uuid="galera-0"/>
+        <crm_event id="130" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="13">
+  <synapse id="14">
     <action_set>
-      <pseudo_event id="48" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:2_demote_0">
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="false" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384"  enable_creation="true" wsrep_cluster_address="gcomm://galera-0,galera-1,galera-2"/>
-      </pseudo_event>
+      <rsc_op id="14" operation="monitor" operation_key="galera_monitor_10000" internal_operation_key="galera:2_monitor_10000" on_node="galera-0" on_node_uuid="galera-0" router_node="controller-2">
+        <primitive id="galera" long-id="galera:2" class="ocf" provider="heartbeat" type="galera"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-0" CRM_meta_on_node_uuid="galera-0" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384"  enable_creation="true" wsrep_cluster_address="gcomm://galera-0,galera-1,galera-2"/>
+      </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="56" operation="demote" operation_key="galera-master_demote_0"/>
-      </trigger>
-      <trigger>
-        <crm_event id="126" operation="stonith" operation_key="stonith-galera-0-reboot" on_node="galera-0" on_node_uuid="galera-0"/>
+        <rsc_op id="30" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14" priority="1000000">
+  <synapse id="15" priority="1000000">
     <action_set>
-      <pseudo_event id="57" operation="demoted" operation_key="galera-master_demoted_0">
+      <pseudo_event id="61" operation="demoted" operation_key="galera-master_demoted_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="46" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:1_demote_0"/>
+        <pseudo_event id="48" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:1_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="48" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:2_demote_0"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="56" operation="demote" operation_key="galera-master_demote_0"/>
+        <pseudo_event id="60" operation="demote" operation_key="galera-master_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="16">
     <action_set>
-      <pseudo_event id="56" operation="demote" operation_key="galera-master_demote_0">
+      <pseudo_event id="60" operation="demote" operation_key="galera-master_demote_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="16" priority="1000000">
+  <synapse id="17" priority="1000000">
     <action_set>
-      <pseudo_event id="53" operation="stopped" operation_key="galera-master_stopped_0">
+      <pseudo_event id="57" operation="stopped" operation_key="galera-master_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="47" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:1_stop_0"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="49" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:2_stop_0"/>
+        <pseudo_event id="49" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="52" operation="stop" operation_key="galera-master_stop_0"/>
+        <pseudo_event id="56" operation="stop" operation_key="galera-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="17">
+  <synapse id="18">
     <action_set>
-      <pseudo_event id="52" operation="stop" operation_key="galera-master_stop_0">
+      <pseudo_event id="56" operation="stop" operation_key="galera-master_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="57" operation="demoted" operation_key="galera-master_demoted_0"/>
+        <pseudo_event id="61" operation="demoted" operation_key="galera-master_demoted_0"/>
       </trigger>
       <trigger>
-        <crm_event id="126" operation="stonith" operation_key="stonith-galera-0-reboot" on_node="galera-0" on_node_uuid="galera-0"/>
-      </trigger>
-      <trigger>
-        <crm_event id="127" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2"/>
+        <crm_event id="130" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="18" priority="1000000">
+  <synapse id="19" priority="1000000">
     <action_set>
-      <pseudo_event id="123" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0">
+      <pseudo_event id="127" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="122" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+        <pseudo_event id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="124" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="128" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="125" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="129" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="19" priority="1000000">
+  <synapse id="20" priority="1000000">
     <action_set>
-      <pseudo_event id="122" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0">
+      <pseudo_event id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="121" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="20">
+  <synapse id="21">
     <action_set>
-      <pseudo_event id="58" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0">
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0 galera-2 galera-0 messaging-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
+      <pseudo_event id="62" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0">
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="71" operation="stop" operation_key="redis-master_stop_0"/>
+        <pseudo_event id="75" operation="stop" operation_key="redis-master_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="121" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="21">
+  <synapse id="22">
     <action_set>
       <rsc_op id="197" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:1_pre_notify_stop_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0 galera-2 galera-0 messaging-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="pre" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="pre" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="73" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+        <pseudo_event id="77" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="22" priority="1000000">
+  <synapse id="23" priority="1000000">
     <action_set>
-      <rsc_op id="124" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="128" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0 galera-2 galera-0 messaging-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="post" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="post" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="75" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+        <pseudo_event id="79" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="122" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+        <pseudo_event id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="23">
+  <synapse id="24">
     <action_set>
       <rsc_op id="198" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:2_pre_notify_stop_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0 galera-2 galera-0 messaging-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="pre" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="pre" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="73" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+        <pseudo_event id="77" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="24" priority="1000000">
+  <synapse id="25" priority="1000000">
     <action_set>
-      <rsc_op id="125" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="129" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0 galera-2 galera-0 messaging-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="post" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="post" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="75" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+        <pseudo_event id="79" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="122" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+        <pseudo_event id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="25" priority="1000000">
+  <synapse id="26" priority="1000000">
     <action_set>
-      <pseudo_event id="76" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0">
+      <pseudo_event id="80" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="75" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+        <pseudo_event id="79" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="124" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="128" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="125" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="129" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="26" priority="1000000">
+  <synapse id="27" priority="1000000">
     <action_set>
-      <pseudo_event id="75" operation="notify" operation_key="redis-master_post_notify_stopped_0">
+      <pseudo_event id="79" operation="notify" operation_key="redis-master_post_notify_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="72" operation="stopped" operation_key="redis-master_stopped_0"/>
+        <pseudo_event id="76" operation="stopped" operation_key="redis-master_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="74" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="78" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="27">
+  <synapse id="28">
     <action_set>
-      <pseudo_event id="74" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0">
+      <pseudo_event id="78" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="73" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+        <pseudo_event id="77" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
       </trigger>
       <trigger>
         <rsc_op id="197" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:1_pre_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
@@ -430,228 +421,228 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="28">
+  <synapse id="29">
     <action_set>
-      <pseudo_event id="73" operation="notify" operation_key="redis-master_pre_notify_stop_0">
+      <pseudo_event id="77" operation="notify" operation_key="redis-master_pre_notify_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="29" priority="1000000">
+  <synapse id="30" priority="1000000">
     <action_set>
-      <pseudo_event id="72" operation="stopped" operation_key="redis-master_stopped_0">
+      <pseudo_event id="76" operation="stopped" operation_key="redis-master_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="58" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+        <pseudo_event id="62" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="71" operation="stop" operation_key="redis-master_stop_0"/>
+        <pseudo_event id="75" operation="stop" operation_key="redis-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="30">
+  <synapse id="31">
     <action_set>
-      <pseudo_event id="71" operation="stop" operation_key="redis-master_stop_0">
+      <pseudo_event id="75" operation="stop" operation_key="redis-master_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="74" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="78" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="121" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="31">
+  <synapse id="32">
     <action_set>
-      <rsc_op id="95" operation="monitor" operation_key="ip-172.17.1.14_monitor_10000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="99" operation="monitor" operation_key="ip-172.17.1.14_monitor_10000" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.14" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="94" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="98" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="32">
+  <synapse id="33">
     <action_set>
-      <rsc_op id="94" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="98" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.14" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="93" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
+        <pseudo_event id="97" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="120" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="124" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="33">
+  <synapse id="34">
     <action_set>
-      <pseudo_event id="93" operation="stop" operation_key="ip-172.17.1.14_stop_0">
+      <pseudo_event id="97" operation="stop" operation_key="ip-172.17.1.14_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="112" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+        <pseudo_event id="116" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
       </trigger>
       <trigger>
-        <crm_event id="121" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="34">
+  <synapse id="35">
     <action_set>
-      <rsc_op id="98" operation="monitor" operation_key="ip-172.17.1.17_monitor_10000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="102" operation="monitor" operation_key="ip-172.17.1.17_monitor_10000" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.17" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="97" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="101" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="35">
+  <synapse id="36">
     <action_set>
-      <rsc_op id="97" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="101" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.1.17" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="96" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
+        <pseudo_event id="100" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="120" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="124" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="36">
+  <synapse id="37">
     <action_set>
-      <pseudo_event id="96" operation="stop" operation_key="ip-172.17.1.17_stop_0">
+      <pseudo_event id="100" operation="stop" operation_key="ip-172.17.1.17_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="112" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+        <pseudo_event id="116" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
       </trigger>
       <trigger>
-        <crm_event id="121" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="37">
+  <synapse id="38">
     <action_set>
-      <rsc_op id="103" operation="monitor" operation_key="ip-172.17.4.11_monitor_10000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="107" operation="monitor" operation_key="ip-172.17.4.11_monitor_10000" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="102" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="106" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="38">
+  <synapse id="39">
     <action_set>
-      <rsc_op id="102" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="106" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="101" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+        <pseudo_event id="105" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="120" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="124" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="39">
+  <synapse id="40">
     <action_set>
-      <pseudo_event id="101" operation="stop" operation_key="ip-172.17.4.11_stop_0">
+      <pseudo_event id="105" operation="stop" operation_key="ip-172.17.4.11_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="112" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+        <pseudo_event id="116" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
       </trigger>
       <trigger>
-        <crm_event id="121" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="40">
+  <synapse id="41">
     <action_set>
-      <pseudo_event id="104" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0">
+      <pseudo_event id="108" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="200000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="111" operation="stop" operation_key="haproxy-clone_stop_0"/>
+        <pseudo_event id="115" operation="stop" operation_key="haproxy-clone_stop_0"/>
       </trigger>
       <trigger>
-        <crm_event id="121" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="41" priority="1000000">
+  <synapse id="42" priority="1000000">
     <action_set>
-      <pseudo_event id="112" operation="stopped" operation_key="haproxy-clone_stopped_0">
+      <pseudo_event id="116" operation="stopped" operation_key="haproxy-clone_stopped_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="104" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
+        <pseudo_event id="108" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="111" operation="stop" operation_key="haproxy-clone_stop_0"/>
+        <pseudo_event id="115" operation="stop" operation_key="haproxy-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="42">
+  <synapse id="43">
     <action_set>
-      <pseudo_event id="111" operation="stop" operation_key="haproxy-clone_stop_0">
+      <pseudo_event id="115" operation="stop" operation_key="haproxy-clone_stop_0">
         <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="121" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="43">
+  <synapse id="44">
     <action_set>
-      <rsc_op id="115" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="119" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="44">
+  <synapse id="45">
     <action_set>
       <rsc_op id="22" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
@@ -663,11 +654,11 @@
         <pseudo_event id="21" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <rsc_op id="115" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="119" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="45">
+  <synapse id="46">
     <action_set>
       <rsc_op id="6" operation="monitor" operation_key="stonith-fence_ipmilan-525400bbf613_monitor_60000" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
@@ -680,16 +671,16 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="46">
+  <synapse id="47">
     <action_set>
-      <rsc_op id="116" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1">
+      <rsc_op id="120" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="47">
+  <synapse id="48">
     <action_set>
       <rsc_op id="23" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
@@ -701,11 +692,11 @@
         <pseudo_event id="21" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <rsc_op id="116" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="120" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="48">
+  <synapse id="49">
     <action_set>
       <rsc_op id="11" operation="monitor" operation_key="stonith-fence_ipmilan-525400b4f6bd_monitor_60000" on_node="controller-0" on_node_uuid="1">
         <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
@@ -718,22 +709,22 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="49">
+  <synapse id="50">
     <action_set>
-      <rsc_op id="119" operation="monitor" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_60000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="123" operation="monitor" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_60000" on_node="controller-2" on_node_uuid="3">
         <primitive id="stonith-fence_ipmilan-5254005bdbb5" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="118" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="122" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="50">
+  <synapse id="51">
     <action_set>
-      <rsc_op id="118" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="122" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="stonith-fence_ipmilan-5254005bdbb5" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
       </rsc_op>
@@ -743,21 +734,21 @@
         <pseudo_event id="21" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <pseudo_event id="117" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
+        <pseudo_event id="121" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="51">
+  <synapse id="52">
     <action_set>
-      <pseudo_event id="117" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0">
+      <pseudo_event id="121" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0">
         <attributes CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="52">
+  <synapse id="53">
     <action_set>
-      <crm_event id="128" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1">
+      <crm_event id="131" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1">
         <attributes CRM_meta_last_failure_rabbitmq="1493336946" CRM_meta_on_node="messaging-1" CRM_meta_on_node_uuid="messaging-1" CRM_meta_rabbitmq_role="true" CRM_meta_rmq_node_attr_last_known_rabbitmq="rabbit@messaging-1" CRM_meta_rmq_node_attr_rabbitmq="rabbit@messaging-1" CRM_meta_stonith_action="reboot" />
         <downed>
           <node id="messaging-1"/>
@@ -766,13 +757,13 @@
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="127" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2"/>
+        <crm_event id="130" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="53">
+  <synapse id="54">
     <action_set>
-      <crm_event id="127" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2">
+      <crm_event id="130" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2">
         <attributes CRM_meta_galera_role="true" CRM_meta_last_failure_galera="1493172798" CRM_meta_master_galera="100" CRM_meta_on_node="galera-2" CRM_meta_on_node_uuid="galera-2" CRM_meta_stonith_action="reboot" />
         <downed>
           <node id="galera-2"/>
@@ -781,28 +772,13 @@
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="126" operation="stonith" operation_key="stonith-galera-0-reboot" on_node="galera-0" on_node_uuid="galera-0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="54">
-    <action_set>
-      <crm_event id="126" operation="stonith" operation_key="stonith-galera-0-reboot" on_node="galera-0" on_node_uuid="galera-0">
-        <attributes CRM_meta_galera_role="true" CRM_meta_last_failure_galera="1493172797" CRM_meta_master_galera="100" CRM_meta_on_node="galera-0" CRM_meta_on_node_uuid="galera-0" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="galera-0"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <crm_event id="121" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+        <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="55">
     <action_set>
-      <crm_event id="121" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2">
+      <crm_event id="125" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2">
         <attributes CRM_meta_cinder_volume_role="true" CRM_meta_haproxy_role="true" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_redis_role="true" CRM_meta_stonith_action="reboot" />
         <downed>
           <node id="2"/>
@@ -813,13 +789,13 @@
   </synapse>
   <synapse id="56">
     <action_set>
-      <pseudo_event id="120" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="124" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="128" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+        <crm_event id="131" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
       </trigger>
     </inputs>
   </synapse>
@@ -837,52 +813,49 @@
         <pseudo_event id="29" operation="stop" operation_key="galera-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="32" operation="stop" operation_key="galera-2_stop_0"/>
-      </trigger>
-      <trigger>
-        <pseudo_event id="37" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
+        <pseudo_event id="34" operation="stop" operation_key="galera-2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="47" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:1_stop_0"/>
+        <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="49" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:2_stop_0"/>
+        <pseudo_event id="49" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="58" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+        <pseudo_event id="62" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="76" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="80" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="93" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
+        <pseudo_event id="97" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="96" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
+        <pseudo_event id="100" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="101" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+        <pseudo_event id="105" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="104" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
+        <pseudo_event id="108" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="115" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="119" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="116" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
+        <rsc_op id="120" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="117" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
+        <pseudo_event id="121" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="120" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="124" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
       <trigger>
-        <pseudo_event id="123" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0"/>
+        <pseudo_event id="127" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="130" operation="notified" operation_key="rabbitmq_notified_0" internal_operation_key="rabbitmq:2_confirmed-post_notify_stonith_0"/>
+        <pseudo_event id="133" operation="notified" operation_key="rabbitmq_notified_0" internal_operation_key="rabbitmq:2_confirmed-post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/remote-recover-all.scores b/pengine/test10/remote-recover-all.scores
index ef1f068..43cac62 100644
--- a/pengine/test10/remote-recover-all.scores
+++ b/pengine/test10/remote-recover-all.scores
@@ -362,16 +362,16 @@ clone_color: redis:8 allocation score on messaging-1: -INFINITY
 clone_color: redis:8 allocation score on messaging-2: -INFINITY
 galera:0 promotion score on galera-1: 100
 galera:1 promotion score on none: 0
-galera:2 promotion score on none: 0
+galera:2 promotion score on galera-0: 100
 galera:3 promotion score on none: 0
 galera:4 promotion score on none: 0
 galera:5 promotion score on none: 0
 galera:6 promotion score on none: 0
 galera:7 promotion score on none: 0
 galera:8 promotion score on none: 0
-native_color: galera-0 allocation score on controller-0: -INFINITY
+native_color: galera-0 allocation score on controller-0: 0
 native_color: galera-0 allocation score on controller-1: INFINITY
-native_color: galera-0 allocation score on controller-2: -INFINITY
+native_color: galera-0 allocation score on controller-2: 0
 native_color: galera-0 allocation score on galera-0: -INFINITY
 native_color: galera-0 allocation score on galera-1: -INFINITY
 native_color: galera-0 allocation score on galera-2: -INFINITY
@@ -399,7 +399,7 @@ native_color: galera-2 allocation score on messaging-2: -INFINITY
 native_color: galera:0 allocation score on controller-0: -INFINITY
 native_color: galera:0 allocation score on controller-1: -INFINITY
 native_color: galera:0 allocation score on controller-2: -INFINITY
-native_color: galera:0 allocation score on galera-0: -INFINITY
+native_color: galera:0 allocation score on galera-0: 0
 native_color: galera:0 allocation score on galera-1: INFINITY
 native_color: galera:0 allocation score on galera-2: -INFINITY
 native_color: galera:0 allocation score on messaging-0: -INFINITY
@@ -417,7 +417,7 @@ native_color: galera:1 allocation score on messaging-2: -INFINITY
 native_color: galera:2 allocation score on controller-0: -INFINITY
 native_color: galera:2 allocation score on controller-1: -INFINITY
 native_color: galera:2 allocation score on controller-2: -INFINITY
-native_color: galera:2 allocation score on galera-0: -INFINITY
+native_color: galera:2 allocation score on galera-0: INFINITY
 native_color: galera:2 allocation score on galera-1: -INFINITY
 native_color: galera:2 allocation score on galera-2: -INFINITY
 native_color: galera:2 allocation score on messaging-0: -INFINITY
diff --git a/pengine/test10/remote-recover-all.summary b/pengine/test10/remote-recover-all.summary
index 387c7f3..881f449 100644
--- a/pengine/test10/remote-recover-all.summary
+++ b/pengine/test10/remote-recover-all.summary
@@ -39,11 +39,10 @@ RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
 
 Transition Summary:
  * Stop    messaging-1	(controller-1)
- * Stop    galera-0	(controller-1)
+ * Move    galera-0	(Started controller-1 -> controller-2)
  * Stop    galera-2	(controller-1)
  * Stop    rabbitmq:2	(messaging-1)
  * Demote  galera:1	(Master -> Stopped galera-2)
- * Demote  galera:2	(Master -> Stopped galera-0)
  * Stop    redis:0	(controller-1)
  * Move    ip-172.17.1.14	(Started controller-1 -> controller-2)
  * Move    ip-172.17.1.17	(Started controller-1 -> controller-2)
@@ -60,51 +59,51 @@ Executing cluster transition:
  * Resource action: stonith-fence_ipmilan-525400b4f6bd stop on controller-0
  * Pseudo action:   stonith-fence_ipmilan-5254005bdbb5_stop_0
  * Fencing controller-1 (reboot)
+ * Pseudo action:   galera-0_stop_0
  * Pseudo action:   redis_post_notify_stop_0
  * Resource action: redis           notify on controller-0
  * Resource action: redis           notify on controller-2
  * Pseudo action:   redis-master_confirmed-pre_notify_stop_0
  * Pseudo action:   redis-master_stop_0
  * Pseudo action:   haproxy-clone_stop_0
- * Fencing galera-0 (reboot)
+ * Fencing galera-2 (reboot)
  * Pseudo action:   galera_demote_0
+ * Pseudo action:   galera-master_demoted_0
+ * Pseudo action:   galera-master_stop_0
  * Pseudo action:   redis_stop_0
  * Pseudo action:   redis-master_stopped_0
  * Pseudo action:   haproxy_stop_0
  * Pseudo action:   haproxy-clone_stopped_0
- * Fencing galera-2 (reboot)
- * Pseudo action:   galera_demote_0
- * Pseudo action:   galera-master_demoted_0
- * Pseudo action:   galera-master_stop_0
- * Pseudo action:   redis-master_post_notify_stopped_0
- * Pseudo action:   ip-172.17.1.14_stop_0
- * Pseudo action:   ip-172.17.1.17_stop_0
- * Pseudo action:   ip-172.17.4.11_stop_0
  * Fencing messaging-1 (reboot)
  * Pseudo action:   stonith_complete
+ * Resource action: galera-0        start on controller-2
  * Pseudo action:   rabbitmq_post_notify_stop_0
  * Pseudo action:   rabbitmq-clone_stop_0
  * Pseudo action:   galera_stop_0
+ * Resource action: galera          monitor=10000 on galera-0
+ * Pseudo action:   galera-master_stopped_0
+ * Pseudo action:   redis-master_post_notify_stopped_0
+ * Pseudo action:   ip-172.17.1.14_stop_0
+ * Pseudo action:   ip-172.17.1.17_stop_0
+ * Pseudo action:   ip-172.17.4.11_stop_0
+ * Resource action: galera-0        monitor=20000 on controller-2
+ * Pseudo action:   galera-2_stop_0
+ * Resource action: rabbitmq        notify on messaging-2
+ * Resource action: rabbitmq        notify on messaging-0
+ * Pseudo action:   rabbitmq_notified_0
+ * Pseudo action:   rabbitmq_stop_0
+ * Pseudo action:   rabbitmq-clone_stopped_0
  * Resource action: redis           notify on controller-0
  * Resource action: redis           notify on controller-2
  * Pseudo action:   redis-master_confirmed-post_notify_stopped_0
  * Resource action: ip-172.17.1.14  start on controller-2
  * Resource action: ip-172.17.1.17  start on controller-2
  * Resource action: ip-172.17.4.11  start on controller-2
- * Pseudo action:   galera-0_stop_0
- * Resource action: rabbitmq        notify on messaging-2
- * Resource action: rabbitmq        notify on messaging-0
- * Pseudo action:   rabbitmq_notified_0
- * Pseudo action:   rabbitmq_stop_0
- * Pseudo action:   rabbitmq-clone_stopped_0
- * Pseudo action:   galera_stop_0
- * Pseudo action:   galera-master_stopped_0
+ * Pseudo action:   messaging-1_stop_0
  * Pseudo action:   redis_notified_0
  * Resource action: ip-172.17.1.14  monitor=10000 on controller-2
  * Resource action: ip-172.17.1.17  monitor=10000 on controller-2
  * Resource action: ip-172.17.4.11  monitor=10000 on controller-2
- * Pseudo action:   messaging-1_stop_0
- * Pseudo action:   galera-2_stop_0
  * Pseudo action:   all_stopped
  * Resource action: stonith-fence_ipmilan-525400bbf613 start on controller-0
  * Resource action: stonith-fence_ipmilan-525400bbf613 monitor=60000 on controller-0
@@ -117,21 +116,21 @@ Using the original execution date of: 2017-05-03 13:33:24Z
 Revised cluster status:
 Online: [ controller-0 controller-2 ]
 OFFLINE: [ controller-1 ]
-RemoteOnline: [ galera-1 messaging-0 messaging-2 ]
-RemoteOFFLINE: [ galera-0 galera-2 messaging-1 ]
+RemoteOnline: [ galera-0 galera-1 messaging-0 messaging-2 ]
+RemoteOFFLINE: [ galera-2 messaging-1 ]
 
  messaging-0	(ocf::pacemaker:remote):	Started controller-0
  messaging-1	(ocf::pacemaker:remote):	Stopped
  messaging-2	(ocf::pacemaker:remote):	Started controller-0
- galera-0	(ocf::pacemaker:remote):	Stopped
+ galera-0	(ocf::pacemaker:remote):	Started controller-2
  galera-1	(ocf::pacemaker:remote):	Started controller-0
  galera-2	(ocf::pacemaker:remote):	Stopped
  Clone Set: rabbitmq-clone [rabbitmq]
      Started: [ messaging-0 messaging-2 ]
      Stopped: [ controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-1 ]
  Master/Slave Set: galera-master [galera]
-     Masters: [ galera-1 ]
-     Stopped: [ controller-0 controller-1 controller-2 galera-0 galera-2 messaging-0 messaging-1 messaging-2 ]
+     Masters: [ galera-0 galera-1 ]
+     Stopped: [ controller-0 controller-1 controller-2 galera-2 messaging-0 messaging-1 messaging-2 ]
  Master/Slave Set: redis-master [redis]
      Masters: [ controller-0 ]
      Slaves: [ controller-2 ]
diff --git a/pengine/test10/remote-recover-all.xml b/pengine/test10/remote-recover-all.xml
index 24fa469..30d2451 100644
--- a/pengine/test10/remote-recover-all.xml
+++ b/pengine/test10/remote-recover-all.xml
@@ -409,8 +409,6 @@
       <rsc_location id="location-stonith-fence_ipmilan-5254005bdbb5-controller-0--INFINITY" node="controller-0" rsc="stonith-fence_ipmilan-5254005bdbb5" score="-INFINITY"/>
       <rsc_location id="cli-ban-messaging-1-on-controller-0" rsc="messaging-1" role="Started" node="controller-0" score="-INFINITY"/>
       <rsc_location id="cli-ban-messaging-1-on-controller-2" rsc="messaging-1" role="Started" node="controller-2" score="-INFINITY"/>
-      <rsc_location id="cli-ban-galera-0-on-controller-2" rsc="galera-0" role="Started" node="controller-2" score="-INFINITY"/>
-      <rsc_location id="cli-ban-galera-0-on-controller-0" rsc="galera-0" role="Started" node="controller-0" score="-INFINITY"/>
       <rsc_location id="cli-ban-galera-2-on-controller-0" rsc="galera-2" role="Started" node="controller-0" score="-INFINITY"/>
       <rsc_location id="cli-ban-galera-2-on-controller-2" rsc="galera-2" role="Started" node="controller-2" score="-INFINITY"/>
     </constraints>
diff --git a/pengine/test10/remote-recover-no-resources.dot b/pengine/test10/remote-recover-no-resources.dot
new file mode 100644
index 0000000..1e16221
--- /dev/null
+++ b/pengine/test10/remote-recover-no-resources.dot
@@ -0,0 +1,143 @@
+digraph "g" {
+"all_stopped" -> "stonith-fence_ipmilan-5254005bdbb5_start_0 controller-2" [ style = bold]
+"all_stopped" -> "stonith-fence_ipmilan-525400b4f6bd_start_0 controller-0" [ style = bold]
+"all_stopped" -> "stonith-fence_ipmilan-525400bbf613_start_0 controller-0" [ style = bold]
+"all_stopped" [ style=bold color="green" fontcolor="orange"]
+"galera-0_monitor_20000 controller-2" [ style=bold color="green" fontcolor="black"]
+"galera-0_start_0 controller-2" -> "galera-0_monitor_20000 controller-2" [ style = bold]
+"galera-0_start_0 controller-2" -> "galera_monitor_10000 galera-0" [ style = bold]
+"galera-0_start_0 controller-2" [ style=bold color="green" fontcolor="black"]
+"galera-0_stop_0 controller-1" -> "all_stopped" [ style = bold]
+"galera-0_stop_0 controller-1" -> "galera-0_start_0 controller-2" [ style = bold]
+"galera-0_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
+"galera-2_stop_0 controller-1" -> "all_stopped" [ style = bold]
+"galera-2_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
+"galera_monitor_10000 galera-0" [ style=bold color="green" fontcolor="black"]
+"haproxy-clone_stop_0" -> "haproxy-clone_stopped_0" [ style = bold]
+"haproxy-clone_stop_0" -> "haproxy_stop_0 controller-1" [ style = bold]
+"haproxy-clone_stop_0" [ style=bold color="green" fontcolor="orange"]
+"haproxy-clone_stopped_0" -> "ip-172.17.1.14_stop_0 controller-1" [ style = bold]
+"haproxy-clone_stopped_0" -> "ip-172.17.1.17_stop_0 controller-1" [ style = bold]
+"haproxy-clone_stopped_0" -> "ip-172.17.4.11_stop_0 controller-1" [ style = bold]
+"haproxy-clone_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"haproxy_stop_0 controller-1" -> "all_stopped" [ style = bold]
+"haproxy_stop_0 controller-1" -> "haproxy-clone_stopped_0" [ style = bold]
+"haproxy_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
+"ip-172.17.1.14_monitor_10000 controller-2" [ style=bold color="green" fontcolor="black"]
+"ip-172.17.1.14_start_0 controller-2" -> "ip-172.17.1.14_monitor_10000 controller-2" [ style = bold]
+"ip-172.17.1.14_start_0 controller-2" [ style=bold color="green" fontcolor="black"]
+"ip-172.17.1.14_stop_0 controller-1" -> "all_stopped" [ style = bold]
+"ip-172.17.1.14_stop_0 controller-1" -> "ip-172.17.1.14_start_0 controller-2" [ style = bold]
+"ip-172.17.1.14_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
+"ip-172.17.1.17_monitor_10000 controller-2" [ style=bold color="green" fontcolor="black"]
+"ip-172.17.1.17_start_0 controller-2" -> "ip-172.17.1.17_monitor_10000 controller-2" [ style = bold]
+"ip-172.17.1.17_start_0 controller-2" [ style=bold color="green" fontcolor="black"]
+"ip-172.17.1.17_stop_0 controller-1" -> "all_stopped" [ style = bold]
+"ip-172.17.1.17_stop_0 controller-1" -> "ip-172.17.1.17_start_0 controller-2" [ style = bold]
+"ip-172.17.1.17_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
+"ip-172.17.4.11_monitor_10000 controller-2" [ style=bold color="green" fontcolor="black"]
+"ip-172.17.4.11_start_0 controller-2" -> "ip-172.17.4.11_monitor_10000 controller-2" [ style = bold]
+"ip-172.17.4.11_start_0 controller-2" [ style=bold color="green" fontcolor="black"]
+"ip-172.17.4.11_stop_0 controller-1" -> "all_stopped" [ style = bold]
+"ip-172.17.4.11_stop_0 controller-1" -> "ip-172.17.4.11_start_0 controller-2" [ style = bold]
+"ip-172.17.4.11_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
+"messaging-1_stop_0 controller-1" -> "all_stopped" [ style = bold]
+"messaging-1_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-clone_stop_0" -> "rabbitmq-clone_stopped_0" [ style = bold]
+"rabbitmq-clone_stop_0" -> "rabbitmq_stop_0 messaging-1" [ style = bold]
+"rabbitmq-clone_stop_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-clone_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq_confirmed-post_notify_stonith_0" -> "all_stopped" [ style = bold]
+"rabbitmq_confirmed-post_notify_stonith_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq_post_notify_stonith_0 messaging-0" -> "rabbitmq_confirmed-post_notify_stonith_0" [ style = bold]
+"rabbitmq_post_notify_stonith_0 messaging-0" [ style=bold color="green" fontcolor="black"]
+"rabbitmq_post_notify_stonith_0 messaging-2" -> "rabbitmq_confirmed-post_notify_stonith_0" [ style = bold]
+"rabbitmq_post_notify_stonith_0 messaging-2" [ style=bold color="green" fontcolor="black"]
+"rabbitmq_post_notify_stonith_0" -> "rabbitmq_confirmed-post_notify_stonith_0" [ style = bold]
+"rabbitmq_post_notify_stonith_0" -> "rabbitmq_post_notify_stonith_0 messaging-0" [ style = bold]
+"rabbitmq_post_notify_stonith_0" -> "rabbitmq_post_notify_stonith_0 messaging-2" [ style = bold]
+"rabbitmq_post_notify_stonith_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq_stop_0 messaging-1" -> "all_stopped" [ style = bold]
+"rabbitmq_stop_0 messaging-1" -> "messaging-1_stop_0 controller-1" [ style = bold]
+"rabbitmq_stop_0 messaging-1" -> "rabbitmq-clone_stopped_0" [ style = bold]
+"rabbitmq_stop_0 messaging-1" [ style=bold color="green" fontcolor="orange"]
+"redis-master_confirmed-post_notify_stopped_0" -> "all_stopped" [ style = bold]
+"redis-master_confirmed-post_notify_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"redis-master_confirmed-pre_notify_stop_0" -> "redis-master_post_notify_stopped_0" [ style = bold]
+"redis-master_confirmed-pre_notify_stop_0" -> "redis-master_stop_0" [ style = bold]
+"redis-master_confirmed-pre_notify_stop_0" [ style=bold color="green" fontcolor="orange"]
+"redis-master_post_notify_stopped_0" -> "redis-master_confirmed-post_notify_stopped_0" [ style = bold]
+"redis-master_post_notify_stopped_0" -> "redis_post_notify_stonith_0 controller-0" [ style = bold]
+"redis-master_post_notify_stopped_0" -> "redis_post_notify_stonith_0 controller-2" [ style = bold]
+"redis-master_post_notify_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"redis-master_pre_notify_stop_0" -> "redis-master_confirmed-pre_notify_stop_0" [ style = bold]
+"redis-master_pre_notify_stop_0" -> "redis_pre_notify_stop_0 controller-0" [ style = bold]
+"redis-master_pre_notify_stop_0" -> "redis_pre_notify_stop_0 controller-2" [ style = bold]
+"redis-master_pre_notify_stop_0" [ style=bold color="green" fontcolor="orange"]
+"redis-master_stop_0" -> "redis-master_stopped_0" [ style = bold]
+"redis-master_stop_0" -> "redis_stop_0 controller-1" [ style = bold]
+"redis-master_stop_0" [ style=bold color="green" fontcolor="orange"]
+"redis-master_stopped_0" -> "redis-master_post_notify_stopped_0" [ style = bold]
+"redis-master_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"redis_confirmed-post_notify_stonith_0" -> "all_stopped" [ style = bold]
+"redis_confirmed-post_notify_stonith_0" [ style=bold color="green" fontcolor="orange"]
+"redis_post_notify_stonith_0 controller-0" -> "redis-master_confirmed-post_notify_stopped_0" [ style = bold]
+"redis_post_notify_stonith_0 controller-0" -> "redis_confirmed-post_notify_stonith_0" [ style = bold]
+"redis_post_notify_stonith_0 controller-0" [ style=bold color="green" fontcolor="black"]
+"redis_post_notify_stonith_0 controller-2" -> "redis-master_confirmed-post_notify_stopped_0" [ style = bold]
+"redis_post_notify_stonith_0 controller-2" -> "redis_confirmed-post_notify_stonith_0" [ style = bold]
+"redis_post_notify_stonith_0 controller-2" [ style=bold color="green" fontcolor="black"]
+"redis_post_notify_stonith_0" -> "redis_confirmed-post_notify_stonith_0" [ style = bold]
+"redis_post_notify_stonith_0" -> "redis_post_notify_stonith_0 controller-0" [ style = bold]
+"redis_post_notify_stonith_0" -> "redis_post_notify_stonith_0 controller-2" [ style = bold]
+"redis_post_notify_stonith_0" [ style=bold color="green" fontcolor="orange"]
+"redis_pre_notify_stop_0 controller-0" -> "redis-master_confirmed-pre_notify_stop_0" [ style = bold]
+"redis_pre_notify_stop_0 controller-0" [ style=bold color="green" fontcolor="black"]
+"redis_pre_notify_stop_0 controller-2" -> "redis-master_confirmed-pre_notify_stop_0" [ style = bold]
+"redis_pre_notify_stop_0 controller-2" [ style=bold color="green" fontcolor="black"]
+"redis_stop_0 controller-1" -> "all_stopped" [ style = bold]
+"redis_stop_0 controller-1" -> "redis-master_stopped_0" [ style = bold]
+"redis_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
+"stonith 'reboot' controller-1" -> "galera-0_stop_0 controller-1" [ style = bold]
+"stonith 'reboot' controller-1" -> "galera-2_stop_0 controller-1" [ style = bold]
+"stonith 'reboot' controller-1" -> "haproxy-clone_stop_0" [ style = bold]
+"stonith 'reboot' controller-1" -> "haproxy_stop_0 controller-1" [ style = bold]
+"stonith 'reboot' controller-1" -> "ip-172.17.1.14_stop_0 controller-1" [ style = bold]
+"stonith 'reboot' controller-1" -> "ip-172.17.1.17_stop_0 controller-1" [ style = bold]
+"stonith 'reboot' controller-1" -> "ip-172.17.4.11_stop_0 controller-1" [ style = bold]
+"stonith 'reboot' controller-1" -> "messaging-1_stop_0 controller-1" [ style = bold]
+"stonith 'reboot' controller-1" -> "redis-master_stop_0" [ style = bold]
+"stonith 'reboot' controller-1" -> "redis_post_notify_stonith_0" [ style = bold]
+"stonith 'reboot' controller-1" -> "redis_stop_0 controller-1" [ style = bold]
+"stonith 'reboot' controller-1" -> "stonith 'reboot' messaging-1" [ style = bold]
+"stonith 'reboot' controller-1" [ style=bold color="green" fontcolor="black"]
+"stonith 'reboot' messaging-1" -> "rabbitmq-clone_stop_0" [ style = bold]
+"stonith 'reboot' messaging-1" -> "rabbitmq_post_notify_stonith_0" [ style = bold]
+"stonith 'reboot' messaging-1" -> "rabbitmq_stop_0 messaging-1" [ style = bold]
+"stonith 'reboot' messaging-1" -> "stonith_complete" [ style = bold]
+"stonith 'reboot' messaging-1" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-5254005bdbb5_monitor_60000 controller-2" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-5254005bdbb5_start_0 controller-2" -> "stonith-fence_ipmilan-5254005bdbb5_monitor_60000 controller-2" [ style = bold]
+"stonith-fence_ipmilan-5254005bdbb5_start_0 controller-2" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-5254005bdbb5_stop_0 controller-1" -> "all_stopped" [ style = bold]
+"stonith-fence_ipmilan-5254005bdbb5_stop_0 controller-1" -> "stonith-fence_ipmilan-5254005bdbb5_start_0 controller-2" [ style = bold]
+"stonith-fence_ipmilan-5254005bdbb5_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
+"stonith-fence_ipmilan-525400b4f6bd_monitor_60000 controller-0" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-525400b4f6bd_start_0 controller-0" -> "stonith-fence_ipmilan-525400b4f6bd_monitor_60000 controller-0" [ style = bold]
+"stonith-fence_ipmilan-525400b4f6bd_start_0 controller-0" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-525400b4f6bd_stop_0 controller-0" -> "all_stopped" [ style = bold]
+"stonith-fence_ipmilan-525400b4f6bd_stop_0 controller-0" -> "stonith-fence_ipmilan-525400b4f6bd_start_0 controller-0" [ style = bold]
+"stonith-fence_ipmilan-525400b4f6bd_stop_0 controller-0" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-525400bbf613_monitor_60000 controller-0" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-525400bbf613_start_0 controller-0" -> "stonith-fence_ipmilan-525400bbf613_monitor_60000 controller-0" [ style = bold]
+"stonith-fence_ipmilan-525400bbf613_start_0 controller-0" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-525400bbf613_stop_0 controller-0" -> "all_stopped" [ style = bold]
+"stonith-fence_ipmilan-525400bbf613_stop_0 controller-0" -> "stonith-fence_ipmilan-525400bbf613_start_0 controller-0" [ style = bold]
+"stonith-fence_ipmilan-525400bbf613_stop_0 controller-0" [ style=bold color="green" fontcolor="black"]
+"stonith_complete" -> "all_stopped" [ style = bold]
+"stonith_complete" -> "galera-0_start_0 controller-2" [ style = bold]
+"stonith_complete" -> "ip-172.17.1.14_start_0 controller-2" [ style = bold]
+"stonith_complete" -> "ip-172.17.1.17_start_0 controller-2" [ style = bold]
+"stonith_complete" -> "ip-172.17.4.11_start_0 controller-2" [ style = bold]
+"stonith_complete" [ style=bold color="green" fontcolor="orange"]
+}
diff --git a/pengine/test10/remote-recover-no-resources.exp b/pengine/test10/remote-recover-no-resources.exp
new file mode 100644
index 0000000..ba9b17b
--- /dev/null
+++ b/pengine/test10/remote-recover-no-resources.exp
@@ -0,0 +1,755 @@
+<transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
+  <synapse id="0">
+    <action_set>
+      <pseudo_event id="25" operation="stop" operation_key="messaging-1_stop_0">
+        <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="38" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
+      </trigger>
+      <trigger>
+        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="1">
+    <action_set>
+      <rsc_op id="30" operation="monitor" operation_key="galera-0_monitor_20000" on_node="controller-2" on_node_uuid="3">
+        <primitive id="galera-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_interval="20000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  reconnect_interval="60"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="29" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="2">
+    <action_set>
+      <rsc_op id="29" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="galera-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="60000"  reconnect_interval="60"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="28" operation="stop" operation_key="galera-0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="121" operation="stonith_complete" operation_key="stonith_complete"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="3">
+    <action_set>
+      <pseudo_event id="28" operation="stop" operation_key="galera-0_stop_0">
+        <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="4">
+    <action_set>
+      <pseudo_event id="33" operation="stop" operation_key="galera-2_stop_0">
+        <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="5" priority="1000000">
+    <action_set>
+      <rsc_op id="130" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stop_0" on_node="messaging-2" on_node_uuid="messaging-2" router_node="controller-0">
+        <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_stop_resource="rabbitmq:2" CRM_meta_notify_stop_uname="messaging-1" CRM_meta_notify_type="post" CRM_meta_on_node="messaging-2" CRM_meta_on_node_uuid="messaging-2" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="128" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stonith_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="6" priority="1000000">
+    <action_set>
+      <rsc_op id="131" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:1_post_notify_stop_0" on_node="messaging-0" on_node_uuid="messaging-0" router_node="controller-0">
+        <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_stop_resource="rabbitmq:2" CRM_meta_notify_stop_uname="messaging-1" CRM_meta_notify_type="post" CRM_meta_on_node="messaging-0" CRM_meta_on_node_uuid="messaging-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="128" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stonith_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="7" priority="1000000">
+    <action_set>
+      <pseudo_event id="129" operation="notified" operation_key="rabbitmq_notified_0" internal_operation_key="rabbitmq:2_confirmed-post_notify_stonith_0">
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="128" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stonith_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="130" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stop_0" on_node="messaging-2" on_node_uuid="messaging-2" router_node="controller-0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="131" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:1_post_notify_stop_0" on_node="messaging-0" on_node_uuid="messaging-0" router_node="controller-0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="8" priority="1000000">
+    <action_set>
+      <pseudo_event id="128" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stonith_0">
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="127" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="9">
+    <action_set>
+      <pseudo_event id="38" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0">
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_notify_stop_resource="rabbitmq:2" CRM_meta_notify_stop_uname="messaging-1" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="41" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
+      </trigger>
+      <trigger>
+        <crm_event id="127" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="10" priority="1000000">
+    <action_set>
+      <pseudo_event id="42" operation="stopped" operation_key="rabbitmq-clone_stopped_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="38" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="41" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="11">
+    <action_set>
+      <pseudo_event id="41" operation="stop" operation_key="rabbitmq-clone_stop_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="127" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="12">
+    <action_set>
+      <rsc_op id="13" operation="monitor" operation_key="galera_monitor_10000" internal_operation_key="galera:1_monitor_10000" on_node="galera-0" on_node_uuid="galera-0" router_node="controller-2">
+        <primitive id="galera" long-id="galera:1" class="ocf" provider="heartbeat" type="galera"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-0" CRM_meta_on_node_uuid="galera-0" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384"  enable_creation="true" wsrep_cluster_address="gcomm://galera-0,galera-1,galera-2"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="29" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="13" priority="1000000">
+    <action_set>
+      <pseudo_event id="124" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0">
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="123" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="125" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="14" priority="1000000">
+    <action_set>
+      <pseudo_event id="123" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0">
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="15">
+    <action_set>
+      <pseudo_event id="59" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0">
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="72" operation="stop" operation_key="redis-master_stop_0"/>
+      </trigger>
+      <trigger>
+        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="16">
+    <action_set>
+      <rsc_op id="193" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:1_pre_notify_stop_0" on_node="controller-0" on_node_uuid="1">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="pre" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="74" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="17" priority="1000000">
+    <action_set>
+      <rsc_op id="125" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="post" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="76" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="123" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="18">
+    <action_set>
+      <rsc_op id="194" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:2_pre_notify_stop_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="pre" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="74" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="19" priority="1000000">
+    <action_set>
+      <rsc_op id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="post" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="76" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="123" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="20" priority="1000000">
+    <action_set>
+      <pseudo_event id="77" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="76" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="125" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="21" priority="1000000">
+    <action_set>
+      <pseudo_event id="76" operation="notify" operation_key="redis-master_post_notify_stopped_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="73" operation="stopped" operation_key="redis-master_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="75" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="22">
+    <action_set>
+      <pseudo_event id="75" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="74" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="193" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:1_pre_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="194" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:2_pre_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="23">
+    <action_set>
+      <pseudo_event id="74" operation="notify" operation_key="redis-master_pre_notify_stop_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="24" priority="1000000">
+    <action_set>
+      <pseudo_event id="73" operation="stopped" operation_key="redis-master_stopped_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="59" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="72" operation="stop" operation_key="redis-master_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="25">
+    <action_set>
+      <pseudo_event id="72" operation="stop" operation_key="redis-master_stop_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="75" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
+      </trigger>
+      <trigger>
+        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="26">
+    <action_set>
+      <rsc_op id="96" operation="monitor" operation_key="ip-172.17.1.14_monitor_10000" on_node="controller-2" on_node_uuid="3">
+        <primitive id="ip-172.17.1.14" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="95" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="27">
+    <action_set>
+      <rsc_op id="95" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="ip-172.17.1.14" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="94" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="121" operation="stonith_complete" operation_key="stonith_complete"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="28">
+    <action_set>
+      <pseudo_event id="94" operation="stop" operation_key="ip-172.17.1.14_stop_0">
+        <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="113" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+      </trigger>
+      <trigger>
+        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="29">
+    <action_set>
+      <rsc_op id="99" operation="monitor" operation_key="ip-172.17.1.17_monitor_10000" on_node="controller-2" on_node_uuid="3">
+        <primitive id="ip-172.17.1.17" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="98" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="30">
+    <action_set>
+      <rsc_op id="98" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="ip-172.17.1.17" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="97" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="121" operation="stonith_complete" operation_key="stonith_complete"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="31">
+    <action_set>
+      <pseudo_event id="97" operation="stop" operation_key="ip-172.17.1.17_stop_0">
+        <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="113" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+      </trigger>
+      <trigger>
+        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="32">
+    <action_set>
+      <rsc_op id="104" operation="monitor" operation_key="ip-172.17.4.11_monitor_10000" on_node="controller-2" on_node_uuid="3">
+        <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="103" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="33">
+    <action_set>
+      <rsc_op id="103" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="102" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="121" operation="stonith_complete" operation_key="stonith_complete"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="34">
+    <action_set>
+      <pseudo_event id="102" operation="stop" operation_key="ip-172.17.4.11_stop_0">
+        <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="113" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+      </trigger>
+      <trigger>
+        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="35">
+    <action_set>
+      <pseudo_event id="105" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0">
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="200000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="112" operation="stop" operation_key="haproxy-clone_stop_0"/>
+      </trigger>
+      <trigger>
+        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="36" priority="1000000">
+    <action_set>
+      <pseudo_event id="113" operation="stopped" operation_key="haproxy-clone_stopped_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="105" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="112" operation="stop" operation_key="haproxy-clone_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="37">
+    <action_set>
+      <pseudo_event id="112" operation="stop" operation_key="haproxy-clone_stop_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="38">
+    <action_set>
+      <rsc_op id="116" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1">
+        <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="39">
+    <action_set>
+      <rsc_op id="21" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1">
+        <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="20" operation="all_stopped" operation_key="all_stopped"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="116" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="40">
+    <action_set>
+      <rsc_op id="6" operation="monitor" operation_key="stonith-fence_ipmilan-525400bbf613_monitor_60000" on_node="controller-0" on_node_uuid="1">
+        <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="21" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="41">
+    <action_set>
+      <rsc_op id="117" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1">
+        <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="42">
+    <action_set>
+      <rsc_op id="22" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1">
+        <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="20" operation="all_stopped" operation_key="all_stopped"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="117" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="43">
+    <action_set>
+      <rsc_op id="11" operation="monitor" operation_key="stonith-fence_ipmilan-525400b4f6bd_monitor_60000" on_node="controller-0" on_node_uuid="1">
+        <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="22" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="44">
+    <action_set>
+      <rsc_op id="120" operation="monitor" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_60000" on_node="controller-2" on_node_uuid="3">
+        <primitive id="stonith-fence_ipmilan-5254005bdbb5" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="119" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="45">
+    <action_set>
+      <rsc_op id="119" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="stonith-fence_ipmilan-5254005bdbb5" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="20" operation="all_stopped" operation_key="all_stopped"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="118" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="46">
+    <action_set>
+      <pseudo_event id="118" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0">
+        <attributes CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="47">
+    <action_set>
+      <crm_event id="127" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1">
+        <attributes CRM_meta_last_failure_rabbitmq="1493336946" CRM_meta_on_node="messaging-1" CRM_meta_on_node_uuid="messaging-1" CRM_meta_rabbitmq_role="true" CRM_meta_rmq_node_attr_last_known_rabbitmq="rabbit@messaging-1" CRM_meta_rmq_node_attr_rabbitmq="rabbit@messaging-1" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="messaging-1"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="48">
+    <action_set>
+      <crm_event id="122" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2">
+        <attributes CRM_meta_cinder_volume_role="true" CRM_meta_haproxy_role="true" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_redis_role="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="2"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="49">
+    <action_set>
+      <pseudo_event id="121" operation="stonith_complete" operation_key="stonith_complete">
+        <attributes />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="127" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="50">
+    <action_set>
+      <pseudo_event id="20" operation="all_stopped" operation_key="all_stopped">
+        <attributes />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="25" operation="stop" operation_key="messaging-1_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="28" operation="stop" operation_key="galera-0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="33" operation="stop" operation_key="galera-2_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="38" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="59" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="77" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="94" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="97" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="102" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="105" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="116" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="117" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="118" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="121" operation="stonith_complete" operation_key="stonith_complete"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="124" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="129" operation="notified" operation_key="rabbitmq_notified_0" internal_operation_key="rabbitmq:2_confirmed-post_notify_stonith_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+</transition_graph>
diff --git a/pengine/test10/remote-recover-no-resources.scores b/pengine/test10/remote-recover-no-resources.scores
new file mode 100644
index 0000000..e918fc6
--- /dev/null
+++ b/pengine/test10/remote-recover-no-resources.scores
@@ -0,0 +1,848 @@
+Allocation scores:
+Using the original execution date of: 2017-05-03 13:33:24Z
+clone_color: galera-master allocation score on controller-0: -INFINITY
+clone_color: galera-master allocation score on controller-1: -INFINITY
+clone_color: galera-master allocation score on controller-2: -INFINITY
+clone_color: galera-master allocation score on galera-0: 0
+clone_color: galera-master allocation score on galera-1: 0
+clone_color: galera-master allocation score on galera-2: 0
+clone_color: galera-master allocation score on messaging-0: -INFINITY
+clone_color: galera-master allocation score on messaging-1: -INFINITY
+clone_color: galera-master allocation score on messaging-2: -INFINITY
+clone_color: galera:0 allocation score on controller-0: -INFINITY
+clone_color: galera:0 allocation score on controller-1: -INFINITY
+clone_color: galera:0 allocation score on controller-2: -INFINITY
+clone_color: galera:0 allocation score on galera-0: 0
+clone_color: galera:0 allocation score on galera-1: INFINITY
+clone_color: galera:0 allocation score on galera-2: 0
+clone_color: galera:0 allocation score on messaging-0: -INFINITY
+clone_color: galera:0 allocation score on messaging-1: -INFINITY
+clone_color: galera:0 allocation score on messaging-2: -INFINITY
+clone_color: galera:1 allocation score on controller-0: -INFINITY
+clone_color: galera:1 allocation score on controller-1: -INFINITY
+clone_color: galera:1 allocation score on controller-2: -INFINITY
+clone_color: galera:1 allocation score on galera-0: INFINITY
+clone_color: galera:1 allocation score on galera-1: 0
+clone_color: galera:1 allocation score on galera-2: 0
+clone_color: galera:1 allocation score on messaging-0: -INFINITY
+clone_color: galera:1 allocation score on messaging-1: -INFINITY
+clone_color: galera:1 allocation score on messaging-2: -INFINITY
+clone_color: galera:2 allocation score on controller-0: -INFINITY
+clone_color: galera:2 allocation score on controller-1: -INFINITY
+clone_color: galera:2 allocation score on controller-2: -INFINITY
+clone_color: galera:2 allocation score on galera-0: 0
+clone_color: galera:2 allocation score on galera-1: 0
+clone_color: galera:2 allocation score on galera-2: 0
+clone_color: galera:2 allocation score on messaging-0: -INFINITY
+clone_color: galera:2 allocation score on messaging-1: -INFINITY
+clone_color: galera:2 allocation score on messaging-2: -INFINITY
+clone_color: galera:3 allocation score on controller-0: -INFINITY
+clone_color: galera:3 allocation score on controller-1: -INFINITY
+clone_color: galera:3 allocation score on controller-2: -INFINITY
+clone_color: galera:3 allocation score on galera-0: 0
+clone_color: galera:3 allocation score on galera-1: 0
+clone_color: galera:3 allocation score on galera-2: 0
+clone_color: galera:3 allocation score on messaging-0: -INFINITY
+clone_color: galera:3 allocation score on messaging-1: -INFINITY
+clone_color: galera:3 allocation score on messaging-2: -INFINITY
+clone_color: galera:4 allocation score on controller-0: -INFINITY
+clone_color: galera:4 allocation score on controller-1: -INFINITY
+clone_color: galera:4 allocation score on controller-2: -INFINITY
+clone_color: galera:4 allocation score on galera-0: 0
+clone_color: galera:4 allocation score on galera-1: 0
+clone_color: galera:4 allocation score on galera-2: 0
+clone_color: galera:4 allocation score on messaging-0: -INFINITY
+clone_color: galera:4 allocation score on messaging-1: -INFINITY
+clone_color: galera:4 allocation score on messaging-2: -INFINITY
+clone_color: galera:5 allocation score on controller-0: -INFINITY
+clone_color: galera:5 allocation score on controller-1: -INFINITY
+clone_color: galera:5 allocation score on controller-2: -INFINITY
+clone_color: galera:5 allocation score on galera-0: 0
+clone_color: galera:5 allocation score on galera-1: 0
+clone_color: galera:5 allocation score on galera-2: 0
+clone_color: galera:5 allocation score on messaging-0: -INFINITY
+clone_color: galera:5 allocation score on messaging-1: -INFINITY
+clone_color: galera:5 allocation score on messaging-2: -INFINITY
+clone_color: galera:6 allocation score on controller-0: -INFINITY
+clone_color: galera:6 allocation score on controller-1: -INFINITY
+clone_color: galera:6 allocation score on controller-2: -INFINITY
+clone_color: galera:6 allocation score on galera-0: 0
+clone_color: galera:6 allocation score on galera-1: 0
+clone_color: galera:6 allocation score on galera-2: 0
+clone_color: galera:6 allocation score on messaging-0: -INFINITY
+clone_color: galera:6 allocation score on messaging-1: -INFINITY
+clone_color: galera:6 allocation score on messaging-2: -INFINITY
+clone_color: galera:7 allocation score on controller-0: -INFINITY
+clone_color: galera:7 allocation score on controller-1: -INFINITY
+clone_color: galera:7 allocation score on controller-2: -INFINITY
+clone_color: galera:7 allocation score on galera-0: 0
+clone_color: galera:7 allocation score on galera-1: 0
+clone_color: galera:7 allocation score on galera-2: 0
+clone_color: galera:7 allocation score on messaging-0: -INFINITY
+clone_color: galera:7 allocation score on messaging-1: -INFINITY
+clone_color: galera:7 allocation score on messaging-2: -INFINITY
+clone_color: galera:8 allocation score on controller-0: -INFINITY
+clone_color: galera:8 allocation score on controller-1: -INFINITY
+clone_color: galera:8 allocation score on controller-2: -INFINITY
+clone_color: galera:8 allocation score on galera-0: 0
+clone_color: galera:8 allocation score on galera-1: 0
+clone_color: galera:8 allocation score on galera-2: 0
+clone_color: galera:8 allocation score on messaging-0: -INFINITY
+clone_color: galera:8 allocation score on messaging-1: -INFINITY
+clone_color: galera:8 allocation score on messaging-2: -INFINITY
+clone_color: haproxy-clone allocation score on controller-0: INFINITY
+clone_color: haproxy-clone allocation score on controller-1: 0
+clone_color: haproxy-clone allocation score on controller-2: 0
+clone_color: haproxy-clone allocation score on galera-0: -INFINITY
+clone_color: haproxy-clone allocation score on galera-1: -INFINITY
+clone_color: haproxy-clone allocation score on galera-2: -INFINITY
+clone_color: haproxy-clone allocation score on messaging-0: -INFINITY
+clone_color: haproxy-clone allocation score on messaging-1: -INFINITY
+clone_color: haproxy-clone allocation score on messaging-2: -INFINITY
+clone_color: haproxy:0 allocation score on controller-0: 0
+clone_color: haproxy:0 allocation score on controller-1: INFINITY
+clone_color: haproxy:0 allocation score on controller-2: 0
+clone_color: haproxy:0 allocation score on galera-0: -INFINITY
+clone_color: haproxy:0 allocation score on galera-1: -INFINITY
+clone_color: haproxy:0 allocation score on galera-2: -INFINITY
+clone_color: haproxy:0 allocation score on messaging-0: -INFINITY
+clone_color: haproxy:0 allocation score on messaging-1: -INFINITY
+clone_color: haproxy:0 allocation score on messaging-2: -INFINITY
+clone_color: haproxy:1 allocation score on controller-0: INFINITY
+clone_color: haproxy:1 allocation score on controller-1: 0
+clone_color: haproxy:1 allocation score on controller-2: 0
+clone_color: haproxy:1 allocation score on galera-0: -INFINITY
+clone_color: haproxy:1 allocation score on galera-1: -INFINITY
+clone_color: haproxy:1 allocation score on galera-2: -INFINITY
+clone_color: haproxy:1 allocation score on messaging-0: -INFINITY
+clone_color: haproxy:1 allocation score on messaging-1: -INFINITY
+clone_color: haproxy:1 allocation score on messaging-2: -INFINITY
+clone_color: haproxy:2 allocation score on controller-0: 0
+clone_color: haproxy:2 allocation score on controller-1: 0
+clone_color: haproxy:2 allocation score on controller-2: INFINITY
+clone_color: haproxy:2 allocation score on galera-0: -INFINITY
+clone_color: haproxy:2 allocation score on galera-1: -INFINITY
+clone_color: haproxy:2 allocation score on galera-2: -INFINITY
+clone_color: haproxy:2 allocation score on messaging-0: -INFINITY
+clone_color: haproxy:2 allocation score on messaging-1: -INFINITY
+clone_color: haproxy:2 allocation score on messaging-2: -INFINITY
+clone_color: haproxy:3 allocation score on controller-0: 0
+clone_color: haproxy:3 allocation score on controller-1: 0
+clone_color: haproxy:3 allocation score on controller-2: 0
+clone_color: haproxy:3 allocation score on galera-0: -INFINITY
+clone_color: haproxy:3 allocation score on galera-1: -INFINITY
+clone_color: haproxy:3 allocation score on galera-2: -INFINITY
+clone_color: haproxy:3 allocation score on messaging-0: -INFINITY
+clone_color: haproxy:3 allocation score on messaging-1: -INFINITY
+clone_color: haproxy:3 allocation score on messaging-2: -INFINITY
+clone_color: haproxy:4 allocation score on controller-0: 0
+clone_color: haproxy:4 allocation score on controller-1: 0
+clone_color: haproxy:4 allocation score on controller-2: 0
+clone_color: haproxy:4 allocation score on galera-0: -INFINITY
+clone_color: haproxy:4 allocation score on galera-1: -INFINITY
+clone_color: haproxy:4 allocation score on galera-2: -INFINITY
+clone_color: haproxy:4 allocation score on messaging-0: -INFINITY
+clone_color: haproxy:4 allocation score on messaging-1: -INFINITY
+clone_color: haproxy:4 allocation score on messaging-2: -INFINITY
+clone_color: haproxy:5 allocation score on controller-0: 0
+clone_color: haproxy:5 allocation score on controller-1: 0
+clone_color: haproxy:5 allocation score on controller-2: 0
+clone_color: haproxy:5 allocation score on galera-0: -INFINITY
+clone_color: haproxy:5 allocation score on galera-1: -INFINITY
+clone_color: haproxy:5 allocation score on galera-2: -INFINITY
+clone_color: haproxy:5 allocation score on messaging-0: -INFINITY
+clone_color: haproxy:5 allocation score on messaging-1: -INFINITY
+clone_color: haproxy:5 allocation score on messaging-2: -INFINITY
+clone_color: haproxy:6 allocation score on controller-0: 0
+clone_color: haproxy:6 allocation score on controller-1: 0
+clone_color: haproxy:6 allocation score on controller-2: 0
+clone_color: haproxy:6 allocation score on galera-0: -INFINITY
+clone_color: haproxy:6 allocation score on galera-1: -INFINITY
+clone_color: haproxy:6 allocation score on galera-2: -INFINITY
+clone_color: haproxy:6 allocation score on messaging-0: -INFINITY
+clone_color: haproxy:6 allocation score on messaging-1: -INFINITY
+clone_color: haproxy:6 allocation score on messaging-2: -INFINITY
+clone_color: haproxy:7 allocation score on controller-0: 0
+clone_color: haproxy:7 allocation score on controller-1: 0
+clone_color: haproxy:7 allocation score on controller-2: 0
+clone_color: haproxy:7 allocation score on galera-0: -INFINITY
+clone_color: haproxy:7 allocation score on galera-1: -INFINITY
+clone_color: haproxy:7 allocation score on galera-2: -INFINITY
+clone_color: haproxy:7 allocation score on messaging-0: -INFINITY
+clone_color: haproxy:7 allocation score on messaging-1: -INFINITY
+clone_color: haproxy:7 allocation score on messaging-2: -INFINITY
+clone_color: haproxy:8 allocation score on controller-0: 0
+clone_color: haproxy:8 allocation score on controller-1: 0
+clone_color: haproxy:8 allocation score on controller-2: 0
+clone_color: haproxy:8 allocation score on galera-0: -INFINITY
+clone_color: haproxy:8 allocation score on galera-1: -INFINITY
+clone_color: haproxy:8 allocation score on galera-2: -INFINITY
+clone_color: haproxy:8 allocation score on messaging-0: -INFINITY
+clone_color: haproxy:8 allocation score on messaging-1: -INFINITY
+clone_color: haproxy:8 allocation score on messaging-2: -INFINITY
+clone_color: rabbitmq-clone allocation score on controller-0: -INFINITY
+clone_color: rabbitmq-clone allocation score on controller-1: -INFINITY
+clone_color: rabbitmq-clone allocation score on controller-2: -INFINITY
+clone_color: rabbitmq-clone allocation score on galera-0: -INFINITY
+clone_color: rabbitmq-clone allocation score on galera-1: -INFINITY
+clone_color: rabbitmq-clone allocation score on galera-2: -INFINITY
+clone_color: rabbitmq-clone allocation score on messaging-0: 0
+clone_color: rabbitmq-clone allocation score on messaging-1: 0
+clone_color: rabbitmq-clone allocation score on messaging-2: 0
+clone_color: rabbitmq:0 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:0 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:0 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:0 allocation score on galera-0: -INFINITY
+clone_color: rabbitmq:0 allocation score on galera-1: -INFINITY
+clone_color: rabbitmq:0 allocation score on galera-2: -INFINITY
+clone_color: rabbitmq:0 allocation score on messaging-0: 0
+clone_color: rabbitmq:0 allocation score on messaging-1: 0
+clone_color: rabbitmq:0 allocation score on messaging-2: INFINITY
+clone_color: rabbitmq:1 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:1 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:1 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:1 allocation score on galera-0: -INFINITY
+clone_color: rabbitmq:1 allocation score on galera-1: -INFINITY
+clone_color: rabbitmq:1 allocation score on galera-2: -INFINITY
+clone_color: rabbitmq:1 allocation score on messaging-0: INFINITY
+clone_color: rabbitmq:1 allocation score on messaging-1: 0
+clone_color: rabbitmq:1 allocation score on messaging-2: 0
+clone_color: rabbitmq:2 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:2 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:2 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:2 allocation score on galera-0: -INFINITY
+clone_color: rabbitmq:2 allocation score on galera-1: -INFINITY
+clone_color: rabbitmq:2 allocation score on galera-2: -INFINITY
+clone_color: rabbitmq:2 allocation score on messaging-0: 0
+clone_color: rabbitmq:2 allocation score on messaging-1: INFINITY
+clone_color: rabbitmq:2 allocation score on messaging-2: 0
+clone_color: rabbitmq:3 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:3 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:3 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:3 allocation score on galera-0: -INFINITY
+clone_color: rabbitmq:3 allocation score on galera-1: -INFINITY
+clone_color: rabbitmq:3 allocation score on galera-2: -INFINITY
+clone_color: rabbitmq:3 allocation score on messaging-0: 0
+clone_color: rabbitmq:3 allocation score on messaging-1: 0
+clone_color: rabbitmq:3 allocation score on messaging-2: 0
+clone_color: rabbitmq:4 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:4 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:4 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:4 allocation score on galera-0: -INFINITY
+clone_color: rabbitmq:4 allocation score on galera-1: -INFINITY
+clone_color: rabbitmq:4 allocation score on galera-2: -INFINITY
+clone_color: rabbitmq:4 allocation score on messaging-0: 0
+clone_color: rabbitmq:4 allocation score on messaging-1: 0
+clone_color: rabbitmq:4 allocation score on messaging-2: 0
+clone_color: rabbitmq:5 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:5 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:5 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:5 allocation score on galera-0: -INFINITY
+clone_color: rabbitmq:5 allocation score on galera-1: -INFINITY
+clone_color: rabbitmq:5 allocation score on galera-2: -INFINITY
+clone_color: rabbitmq:5 allocation score on messaging-0: 0
+clone_color: rabbitmq:5 allocation score on messaging-1: 0
+clone_color: rabbitmq:5 allocation score on messaging-2: 0
+clone_color: rabbitmq:6 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:6 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:6 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:6 allocation score on galera-0: -INFINITY
+clone_color: rabbitmq:6 allocation score on galera-1: -INFINITY
+clone_color: rabbitmq:6 allocation score on galera-2: -INFINITY
+clone_color: rabbitmq:6 allocation score on messaging-0: 0
+clone_color: rabbitmq:6 allocation score on messaging-1: 0
+clone_color: rabbitmq:6 allocation score on messaging-2: 0
+clone_color: rabbitmq:7 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:7 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:7 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:7 allocation score on galera-0: -INFINITY
+clone_color: rabbitmq:7 allocation score on galera-1: -INFINITY
+clone_color: rabbitmq:7 allocation score on galera-2: -INFINITY
+clone_color: rabbitmq:7 allocation score on messaging-0: 0
+clone_color: rabbitmq:7 allocation score on messaging-1: 0
+clone_color: rabbitmq:7 allocation score on messaging-2: 0
+clone_color: rabbitmq:8 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:8 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:8 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:8 allocation score on galera-0: -INFINITY
+clone_color: rabbitmq:8 allocation score on galera-1: -INFINITY
+clone_color: rabbitmq:8 allocation score on galera-2: -INFINITY
+clone_color: rabbitmq:8 allocation score on messaging-0: 0
+clone_color: rabbitmq:8 allocation score on messaging-1: 0
+clone_color: rabbitmq:8 allocation score on messaging-2: 0
+clone_color: redis-master allocation score on controller-0: 0
+clone_color: redis-master allocation score on controller-1: 0
+clone_color: redis-master allocation score on controller-2: 0
+clone_color: redis-master allocation score on galera-0: -INFINITY
+clone_color: redis-master allocation score on galera-1: -INFINITY
+clone_color: redis-master allocation score on galera-2: -INFINITY
+clone_color: redis-master allocation score on messaging-0: -INFINITY
+clone_color: redis-master allocation score on messaging-1: -INFINITY
+clone_color: redis-master allocation score on messaging-2: -INFINITY
+clone_color: redis:0 allocation score on controller-0: 0
+clone_color: redis:0 allocation score on controller-1: INFINITY
+clone_color: redis:0 allocation score on controller-2: 0
+clone_color: redis:0 allocation score on galera-0: -INFINITY
+clone_color: redis:0 allocation score on galera-1: -INFINITY
+clone_color: redis:0 allocation score on galera-2: -INFINITY
+clone_color: redis:0 allocation score on messaging-0: -INFINITY
+clone_color: redis:0 allocation score on messaging-1: -INFINITY
+clone_color: redis:0 allocation score on messaging-2: -INFINITY
+clone_color: redis:1 allocation score on controller-0: INFINITY
+clone_color: redis:1 allocation score on controller-1: 0
+clone_color: redis:1 allocation score on controller-2: 0
+clone_color: redis:1 allocation score on galera-0: -INFINITY
+clone_color: redis:1 allocation score on galera-1: -INFINITY
+clone_color: redis:1 allocation score on galera-2: -INFINITY
+clone_color: redis:1 allocation score on messaging-0: -INFINITY
+clone_color: redis:1 allocation score on messaging-1: -INFINITY
+clone_color: redis:1 allocation score on messaging-2: -INFINITY
+clone_color: redis:2 allocation score on controller-0: 0
+clone_color: redis:2 allocation score on controller-1: 0
+clone_color: redis:2 allocation score on controller-2: INFINITY
+clone_color: redis:2 allocation score on galera-0: -INFINITY
+clone_color: redis:2 allocation score on galera-1: -INFINITY
+clone_color: redis:2 allocation score on galera-2: -INFINITY
+clone_color: redis:2 allocation score on messaging-0: -INFINITY
+clone_color: redis:2 allocation score on messaging-1: -INFINITY
+clone_color: redis:2 allocation score on messaging-2: -INFINITY
+clone_color: redis:3 allocation score on controller-0: 0
+clone_color: redis:3 allocation score on controller-1: 0
+clone_color: redis:3 allocation score on controller-2: 0
+clone_color: redis:3 allocation score on galera-0: -INFINITY
+clone_color: redis:3 allocation score on galera-1: -INFINITY
+clone_color: redis:3 allocation score on galera-2: -INFINITY
+clone_color: redis:3 allocation score on messaging-0: -INFINITY
+clone_color: redis:3 allocation score on messaging-1: -INFINITY
+clone_color: redis:3 allocation score on messaging-2: -INFINITY
+clone_color: redis:4 allocation score on controller-0: 0
+clone_color: redis:4 allocation score on controller-1: 0
+clone_color: redis:4 allocation score on controller-2: 0
+clone_color: redis:4 allocation score on galera-0: -INFINITY
+clone_color: redis:4 allocation score on galera-1: -INFINITY
+clone_color: redis:4 allocation score on galera-2: -INFINITY
+clone_color: redis:4 allocation score on messaging-0: -INFINITY
+clone_color: redis:4 allocation score on messaging-1: -INFINITY
+clone_color: redis:4 allocation score on messaging-2: -INFINITY
+clone_color: redis:5 allocation score on controller-0: 0
+clone_color: redis:5 allocation score on controller-1: 0
+clone_color: redis:5 allocation score on controller-2: 0
+clone_color: redis:5 allocation score on galera-0: -INFINITY
+clone_color: redis:5 allocation score on galera-1: -INFINITY
+clone_color: redis:5 allocation score on galera-2: -INFINITY
+clone_color: redis:5 allocation score on messaging-0: -INFINITY
+clone_color: redis:5 allocation score on messaging-1: -INFINITY
+clone_color: redis:5 allocation score on messaging-2: -INFINITY
+clone_color: redis:6 allocation score on controller-0: 0
+clone_color: redis:6 allocation score on controller-1: 0
+clone_color: redis:6 allocation score on controller-2: 0
+clone_color: redis:6 allocation score on galera-0: -INFINITY
+clone_color: redis:6 allocation score on galera-1: -INFINITY
+clone_color: redis:6 allocation score on galera-2: -INFINITY
+clone_color: redis:6 allocation score on messaging-0: -INFINITY
+clone_color: redis:6 allocation score on messaging-1: -INFINITY
+clone_color: redis:6 allocation score on messaging-2: -INFINITY
+clone_color: redis:7 allocation score on controller-0: 0
+clone_color: redis:7 allocation score on controller-1: 0
+clone_color: redis:7 allocation score on controller-2: 0
+clone_color: redis:7 allocation score on galera-0: -INFINITY
+clone_color: redis:7 allocation score on galera-1: -INFINITY
+clone_color: redis:7 allocation score on galera-2: -INFINITY
+clone_color: redis:7 allocation score on messaging-0: -INFINITY
+clone_color: redis:7 allocation score on messaging-1: -INFINITY
+clone_color: redis:7 allocation score on messaging-2: -INFINITY
+clone_color: redis:8 allocation score on controller-0: 0
+clone_color: redis:8 allocation score on controller-1: 0
+clone_color: redis:8 allocation score on controller-2: 0
+clone_color: redis:8 allocation score on galera-0: -INFINITY
+clone_color: redis:8 allocation score on galera-1: -INFINITY
+clone_color: redis:8 allocation score on galera-2: -INFINITY
+clone_color: redis:8 allocation score on messaging-0: -INFINITY
+clone_color: redis:8 allocation score on messaging-1: -INFINITY
+clone_color: redis:8 allocation score on messaging-2: -INFINITY
+galera:0 promotion score on galera-1: 100
+galera:1 promotion score on galera-0: 100
+galera:2 promotion score on none: 0
+galera:3 promotion score on none: 0
+galera:4 promotion score on none: 0
+galera:5 promotion score on none: 0
+galera:6 promotion score on none: 0
+galera:7 promotion score on none: 0
+galera:8 promotion score on none: 0
+native_color: galera-0 allocation score on controller-0: 0
+native_color: galera-0 allocation score on controller-1: INFINITY
+native_color: galera-0 allocation score on controller-2: 0
+native_color: galera-0 allocation score on galera-0: -INFINITY
+native_color: galera-0 allocation score on galera-1: -INFINITY
+native_color: galera-0 allocation score on galera-2: -INFINITY
+native_color: galera-0 allocation score on messaging-0: -INFINITY
+native_color: galera-0 allocation score on messaging-1: -INFINITY
+native_color: galera-0 allocation score on messaging-2: -INFINITY
+native_color: galera-1 allocation score on controller-0: INFINITY
+native_color: galera-1 allocation score on controller-1: 0
+native_color: galera-1 allocation score on controller-2: 0
+native_color: galera-1 allocation score on galera-0: -INFINITY
+native_color: galera-1 allocation score on galera-1: -INFINITY
+native_color: galera-1 allocation score on galera-2: -INFINITY
+native_color: galera-1 allocation score on messaging-0: -INFINITY
+native_color: galera-1 allocation score on messaging-1: -INFINITY
+native_color: galera-1 allocation score on messaging-2: -INFINITY
+native_color: galera-2 allocation score on controller-0: -INFINITY
+native_color: galera-2 allocation score on controller-1: INFINITY
+native_color: galera-2 allocation score on controller-2: -INFINITY
+native_color: galera-2 allocation score on galera-0: -INFINITY
+native_color: galera-2 allocation score on galera-1: -INFINITY
+native_color: galera-2 allocation score on galera-2: -INFINITY
+native_color: galera-2 allocation score on messaging-0: -INFINITY
+native_color: galera-2 allocation score on messaging-1: -INFINITY
+native_color: galera-2 allocation score on messaging-2: -INFINITY
+native_color: galera:0 allocation score on controller-0: -INFINITY
+native_color: galera:0 allocation score on controller-1: -INFINITY
+native_color: galera:0 allocation score on controller-2: -INFINITY
+native_color: galera:0 allocation score on galera-0: 0
+native_color: galera:0 allocation score on galera-1: INFINITY
+native_color: galera:0 allocation score on galera-2: -INFINITY
+native_color: galera:0 allocation score on messaging-0: -INFINITY
+native_color: galera:0 allocation score on messaging-1: -INFINITY
+native_color: galera:0 allocation score on messaging-2: -INFINITY
+native_color: galera:1 allocation score on controller-0: -INFINITY
+native_color: galera:1 allocation score on controller-1: -INFINITY
+native_color: galera:1 allocation score on controller-2: -INFINITY
+native_color: galera:1 allocation score on galera-0: INFINITY
+native_color: galera:1 allocation score on galera-1: -INFINITY
+native_color: galera:1 allocation score on galera-2: -INFINITY
+native_color: galera:1 allocation score on messaging-0: -INFINITY
+native_color: galera:1 allocation score on messaging-1: -INFINITY
+native_color: galera:1 allocation score on messaging-2: -INFINITY
+native_color: galera:2 allocation score on controller-0: -INFINITY
+native_color: galera:2 allocation score on controller-1: -INFINITY
+native_color: galera:2 allocation score on controller-2: -INFINITY
+native_color: galera:2 allocation score on galera-0: -INFINITY
+native_color: galera:2 allocation score on galera-1: -INFINITY
+native_color: galera:2 allocation score on galera-2: -INFINITY
+native_color: galera:2 allocation score on messaging-0: -INFINITY
+native_color: galera:2 allocation score on messaging-1: -INFINITY
+native_color: galera:2 allocation score on messaging-2: -INFINITY
+native_color: galera:3 allocation score on controller-0: -INFINITY
+native_color: galera:3 allocation score on controller-1: -INFINITY
+native_color: galera:3 allocation score on controller-2: -INFINITY
+native_color: galera:3 allocation score on galera-0: -INFINITY
+native_color: galera:3 allocation score on galera-1: -INFINITY
+native_color: galera:3 allocation score on galera-2: -INFINITY
+native_color: galera:3 allocation score on messaging-0: -INFINITY
+native_color: galera:3 allocation score on messaging-1: -INFINITY
+native_color: galera:3 allocation score on messaging-2: -INFINITY
+native_color: galera:4 allocation score on controller-0: -INFINITY
+native_color: galera:4 allocation score on controller-1: -INFINITY
+native_color: galera:4 allocation score on controller-2: -INFINITY
+native_color: galera:4 allocation score on galera-0: -INFINITY
+native_color: galera:4 allocation score on galera-1: -INFINITY
+native_color: galera:4 allocation score on galera-2: -INFINITY
+native_color: galera:4 allocation score on messaging-0: -INFINITY
+native_color: galera:4 allocation score on messaging-1: -INFINITY
+native_color: galera:4 allocation score on messaging-2: -INFINITY
+native_color: galera:5 allocation score on controller-0: -INFINITY
+native_color: galera:5 allocation score on controller-1: -INFINITY
+native_color: galera:5 allocation score on controller-2: -INFINITY
+native_color: galera:5 allocation score on galera-0: -INFINITY
+native_color: galera:5 allocation score on galera-1: -INFINITY
+native_color: galera:5 allocation score on galera-2: -INFINITY
+native_color: galera:5 allocation score on messaging-0: -INFINITY
+native_color: galera:5 allocation score on messaging-1: -INFINITY
+native_color: galera:5 allocation score on messaging-2: -INFINITY
+native_color: galera:6 allocation score on controller-0: -INFINITY
+native_color: galera:6 allocation score on controller-1: -INFINITY
+native_color: galera:6 allocation score on controller-2: -INFINITY
+native_color: galera:6 allocation score on galera-0: -INFINITY
+native_color: galera:6 allocation score on galera-1: -INFINITY
+native_color: galera:6 allocation score on galera-2: -INFINITY
+native_color: galera:6 allocation score on messaging-0: -INFINITY
+native_color: galera:6 allocation score on messaging-1: -INFINITY
+native_color: galera:6 allocation score on messaging-2: -INFINITY
+native_color: galera:7 allocation score on controller-0: -INFINITY
+native_color: galera:7 allocation score on controller-1: -INFINITY
+native_color: galera:7 allocation score on controller-2: -INFINITY
+native_color: galera:7 allocation score on galera-0: -INFINITY
+native_color: galera:7 allocation score on galera-1: -INFINITY
+native_color: galera:7 allocation score on galera-2: -INFINITY
+native_color: galera:7 allocation score on messaging-0: -INFINITY
+native_color: galera:7 allocation score on messaging-1: -INFINITY
+native_color: galera:7 allocation score on messaging-2: -INFINITY
+native_color: galera:8 allocation score on controller-0: -INFINITY
+native_color: galera:8 allocation score on controller-1: -INFINITY
+native_color: galera:8 allocation score on controller-2: -INFINITY
+native_color: galera:8 allocation score on galera-0: -INFINITY
+native_color: galera:8 allocation score on galera-1: -INFINITY
+native_color: galera:8 allocation score on galera-2: -INFINITY
+native_color: galera:8 allocation score on messaging-0: -INFINITY
+native_color: galera:8 allocation score on messaging-1: -INFINITY
+native_color: galera:8 allocation score on messaging-2: -INFINITY
+native_color: haproxy:0 allocation score on controller-0: -INFINITY
+native_color: haproxy:0 allocation score on controller-1: -INFINITY
+native_color: haproxy:0 allocation score on controller-2: -INFINITY
+native_color: haproxy:0 allocation score on galera-0: -INFINITY
+native_color: haproxy:0 allocation score on galera-1: -INFINITY
+native_color: haproxy:0 allocation score on galera-2: -INFINITY
+native_color: haproxy:0 allocation score on messaging-0: -INFINITY
+native_color: haproxy:0 allocation score on messaging-1: -INFINITY
+native_color: haproxy:0 allocation score on messaging-2: -INFINITY
+native_color: haproxy:1 allocation score on controller-0: INFINITY
+native_color: haproxy:1 allocation score on controller-1: -INFINITY
+native_color: haproxy:1 allocation score on controller-2: 0
+native_color: haproxy:1 allocation score on galera-0: -INFINITY
+native_color: haproxy:1 allocation score on galera-1: -INFINITY
+native_color: haproxy:1 allocation score on galera-2: -INFINITY
+native_color: haproxy:1 allocation score on messaging-0: -INFINITY
+native_color: haproxy:1 allocation score on messaging-1: -INFINITY
+native_color: haproxy:1 allocation score on messaging-2: -INFINITY
+native_color: haproxy:2 allocation score on controller-0: -INFINITY
+native_color: haproxy:2 allocation score on controller-1: -INFINITY
+native_color: haproxy:2 allocation score on controller-2: INFINITY
+native_color: haproxy:2 allocation score on galera-0: -INFINITY
+native_color: haproxy:2 allocation score on galera-1: -INFINITY
+native_color: haproxy:2 allocation score on galera-2: -INFINITY
+native_color: haproxy:2 allocation score on messaging-0: -INFINITY
+native_color: haproxy:2 allocation score on messaging-1: -INFINITY
+native_color: haproxy:2 allocation score on messaging-2: -INFINITY
+native_color: haproxy:3 allocation score on controller-0: -INFINITY
+native_color: haproxy:3 allocation score on controller-1: -INFINITY
+native_color: haproxy:3 allocation score on controller-2: -INFINITY
+native_color: haproxy:3 allocation score on galera-0: -INFINITY
+native_color: haproxy:3 allocation score on galera-1: -INFINITY
+native_color: haproxy:3 allocation score on galera-2: -INFINITY
+native_color: haproxy:3 allocation score on messaging-0: -INFINITY
+native_color: haproxy:3 allocation score on messaging-1: -INFINITY
+native_color: haproxy:3 allocation score on messaging-2: -INFINITY
+native_color: haproxy:4 allocation score on controller-0: -INFINITY
+native_color: haproxy:4 allocation score on controller-1: -INFINITY
+native_color: haproxy:4 allocation score on controller-2: -INFINITY
+native_color: haproxy:4 allocation score on galera-0: -INFINITY
+native_color: haproxy:4 allocation score on galera-1: -INFINITY
+native_color: haproxy:4 allocation score on galera-2: -INFINITY
+native_color: haproxy:4 allocation score on messaging-0: -INFINITY
+native_color: haproxy:4 allocation score on messaging-1: -INFINITY
+native_color: haproxy:4 allocation score on messaging-2: -INFINITY
+native_color: haproxy:5 allocation score on controller-0: -INFINITY
+native_color: haproxy:5 allocation score on controller-1: -INFINITY
+native_color: haproxy:5 allocation score on controller-2: -INFINITY
+native_color: haproxy:5 allocation score on galera-0: -INFINITY
+native_color: haproxy:5 allocation score on galera-1: -INFINITY
+native_color: haproxy:5 allocation score on galera-2: -INFINITY
+native_color: haproxy:5 allocation score on messaging-0: -INFINITY
+native_color: haproxy:5 allocation score on messaging-1: -INFINITY
+native_color: haproxy:5 allocation score on messaging-2: -INFINITY
+native_color: haproxy:6 allocation score on controller-0: -INFINITY
+native_color: haproxy:6 allocation score on controller-1: -INFINITY
+native_color: haproxy:6 allocation score on controller-2: -INFINITY
+native_color: haproxy:6 allocation score on galera-0: -INFINITY
+native_color: haproxy:6 allocation score on galera-1: -INFINITY
+native_color: haproxy:6 allocation score on galera-2: -INFINITY
+native_color: haproxy:6 allocation score on messaging-0: -INFINITY
+native_color: haproxy:6 allocation score on messaging-1: -INFINITY
+native_color: haproxy:6 allocation score on messaging-2: -INFINITY
+native_color: haproxy:7 allocation score on controller-0: -INFINITY
+native_color: haproxy:7 allocation score on controller-1: -INFINITY
+native_color: haproxy:7 allocation score on controller-2: -INFINITY
+native_color: haproxy:7 allocation score on galera-0: -INFINITY
+native_color: haproxy:7 allocation score on galera-1: -INFINITY
+native_color: haproxy:7 allocation score on galera-2: -INFINITY
+native_color: haproxy:7 allocation score on messaging-0: -INFINITY
+native_color: haproxy:7 allocation score on messaging-1: -INFINITY
+native_color: haproxy:7 allocation score on messaging-2: -INFINITY
+native_color: haproxy:8 allocation score on controller-0: -INFINITY
+native_color: haproxy:8 allocation score on controller-1: -INFINITY
+native_color: haproxy:8 allocation score on controller-2: -INFINITY
+native_color: haproxy:8 allocation score on galera-0: -INFINITY
+native_color: haproxy:8 allocation score on galera-1: -INFINITY
+native_color: haproxy:8 allocation score on galera-2: -INFINITY
+native_color: haproxy:8 allocation score on messaging-0: -INFINITY
+native_color: haproxy:8 allocation score on messaging-1: -INFINITY
+native_color: haproxy:8 allocation score on messaging-2: -INFINITY
+native_color: ip-10.0.0.102 allocation score on controller-0: INFINITY
+native_color: ip-10.0.0.102 allocation score on controller-1: -INFINITY
+native_color: ip-10.0.0.102 allocation score on controller-2: 0
+native_color: ip-10.0.0.102 allocation score on galera-0: -INFINITY
+native_color: ip-10.0.0.102 allocation score on galera-1: -INFINITY
+native_color: ip-10.0.0.102 allocation score on galera-2: -INFINITY
+native_color: ip-10.0.0.102 allocation score on messaging-0: -INFINITY
+native_color: ip-10.0.0.102 allocation score on messaging-1: -INFINITY
+native_color: ip-10.0.0.102 allocation score on messaging-2: -INFINITY
+native_color: ip-172.17.1.14 allocation score on controller-0: 0
+native_color: ip-172.17.1.14 allocation score on controller-1: -INFINITY
+native_color: ip-172.17.1.14 allocation score on controller-2: 0
+native_color: ip-172.17.1.14 allocation score on galera-0: -INFINITY
+native_color: ip-172.17.1.14 allocation score on galera-1: -INFINITY
+native_color: ip-172.17.1.14 allocation score on galera-2: -INFINITY
+native_color: ip-172.17.1.14 allocation score on messaging-0: -INFINITY
+native_color: ip-172.17.1.14 allocation score on messaging-1: -INFINITY
+native_color: ip-172.17.1.14 allocation score on messaging-2: -INFINITY
+native_color: ip-172.17.1.17 allocation score on controller-0: 0
+native_color: ip-172.17.1.17 allocation score on controller-1: -INFINITY
+native_color: ip-172.17.1.17 allocation score on controller-2: 0
+native_color: ip-172.17.1.17 allocation score on galera-0: -INFINITY
+native_color: ip-172.17.1.17 allocation score on galera-1: -INFINITY
+native_color: ip-172.17.1.17 allocation score on galera-2: -INFINITY
+native_color: ip-172.17.1.17 allocation score on messaging-0: -INFINITY
+native_color: ip-172.17.1.17 allocation score on messaging-1: -INFINITY
+native_color: ip-172.17.1.17 allocation score on messaging-2: -INFINITY
+native_color: ip-172.17.3.15 allocation score on controller-0: INFINITY
+native_color: ip-172.17.3.15 allocation score on controller-1: -INFINITY
+native_color: ip-172.17.3.15 allocation score on controller-2: 0
+native_color: ip-172.17.3.15 allocation score on galera-0: -INFINITY
+native_color: ip-172.17.3.15 allocation score on galera-1: -INFINITY
+native_color: ip-172.17.3.15 allocation score on galera-2: -INFINITY
+native_color: ip-172.17.3.15 allocation score on messaging-0: -INFINITY
+native_color: ip-172.17.3.15 allocation score on messaging-1: -INFINITY
+native_color: ip-172.17.3.15 allocation score on messaging-2: -INFINITY
+native_color: ip-172.17.4.11 allocation score on controller-0: 0
+native_color: ip-172.17.4.11 allocation score on controller-1: -INFINITY
+native_color: ip-172.17.4.11 allocation score on controller-2: 0
+native_color: ip-172.17.4.11 allocation score on galera-0: -INFINITY
+native_color: ip-172.17.4.11 allocation score on galera-1: -INFINITY
+native_color: ip-172.17.4.11 allocation score on galera-2: -INFINITY
+native_color: ip-172.17.4.11 allocation score on messaging-0: -INFINITY
+native_color: ip-172.17.4.11 allocation score on messaging-1: -INFINITY
+native_color: ip-172.17.4.11 allocation score on messaging-2: -INFINITY
+native_color: ip-192.168.24.6 allocation score on controller-0: INFINITY
+native_color: ip-192.168.24.6 allocation score on controller-1: -INFINITY
+native_color: ip-192.168.24.6 allocation score on controller-2: 0
+native_color: ip-192.168.24.6 allocation score on galera-0: -INFINITY
+native_color: ip-192.168.24.6 allocation score on galera-1: -INFINITY
+native_color: ip-192.168.24.6 allocation score on galera-2: -INFINITY
+native_color: ip-192.168.24.6 allocation score on messaging-0: -INFINITY
+native_color: ip-192.168.24.6 allocation score on messaging-1: -INFINITY
+native_color: ip-192.168.24.6 allocation score on messaging-2: -INFINITY
+native_color: messaging-0 allocation score on controller-0: INFINITY
+native_color: messaging-0 allocation score on controller-1: 0
+native_color: messaging-0 allocation score on controller-2: 0
+native_color: messaging-0 allocation score on galera-0: -INFINITY
+native_color: messaging-0 allocation score on galera-1: -INFINITY
+native_color: messaging-0 allocation score on galera-2: -INFINITY
+native_color: messaging-0 allocation score on messaging-0: -INFINITY
+native_color: messaging-0 allocation score on messaging-1: -INFINITY
+native_color: messaging-0 allocation score on messaging-2: -INFINITY
+native_color: messaging-1 allocation score on controller-0: -INFINITY
+native_color: messaging-1 allocation score on controller-1: INFINITY
+native_color: messaging-1 allocation score on controller-2: -INFINITY
+native_color: messaging-1 allocation score on galera-0: -INFINITY
+native_color: messaging-1 allocation score on galera-1: -INFINITY
+native_color: messaging-1 allocation score on galera-2: -INFINITY
+native_color: messaging-1 allocation score on messaging-0: -INFINITY
+native_color: messaging-1 allocation score on messaging-1: -INFINITY
+native_color: messaging-1 allocation score on messaging-2: -INFINITY
+native_color: messaging-2 allocation score on controller-0: INFINITY
+native_color: messaging-2 allocation score on controller-1: 0
+native_color: messaging-2 allocation score on controller-2: 0
+native_color: messaging-2 allocation score on galera-0: -INFINITY
+native_color: messaging-2 allocation score on galera-1: -INFINITY
+native_color: messaging-2 allocation score on galera-2: -INFINITY
+native_color: messaging-2 allocation score on messaging-0: -INFINITY
+native_color: messaging-2 allocation score on messaging-1: -INFINITY
+native_color: messaging-2 allocation score on messaging-2: -INFINITY
+native_color: openstack-cinder-volume allocation score on controller-0: INFINITY
+native_color: openstack-cinder-volume allocation score on controller-1: 0
+native_color: openstack-cinder-volume allocation score on controller-2: 0
+native_color: openstack-cinder-volume allocation score on galera-0: -INFINITY
+native_color: openstack-cinder-volume allocation score on galera-1: -INFINITY
+native_color: openstack-cinder-volume allocation score on galera-2: -INFINITY
+native_color: openstack-cinder-volume allocation score on messaging-0: -INFINITY
+native_color: openstack-cinder-volume allocation score on messaging-1: -INFINITY
+native_color: openstack-cinder-volume allocation score on messaging-2: -INFINITY
+native_color: rabbitmq:0 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:0 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:0 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:0 allocation score on galera-0: -INFINITY
+native_color: rabbitmq:0 allocation score on galera-1: -INFINITY
+native_color: rabbitmq:0 allocation score on galera-2: -INFINITY
+native_color: rabbitmq:0 allocation score on messaging-0: 0
+native_color: rabbitmq:0 allocation score on messaging-1: -INFINITY
+native_color: rabbitmq:0 allocation score on messaging-2: INFINITY
+native_color: rabbitmq:1 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:1 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:1 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:1 allocation score on galera-0: -INFINITY
+native_color: rabbitmq:1 allocation score on galera-1: -INFINITY
+native_color: rabbitmq:1 allocation score on galera-2: -INFINITY
+native_color: rabbitmq:1 allocation score on messaging-0: INFINITY
+native_color: rabbitmq:1 allocation score on messaging-1: -INFINITY
+native_color: rabbitmq:1 allocation score on messaging-2: -INFINITY
+native_color: rabbitmq:2 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:2 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:2 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:2 allocation score on galera-0: -INFINITY
+native_color: rabbitmq:2 allocation score on galera-1: -INFINITY
+native_color: rabbitmq:2 allocation score on galera-2: -INFINITY
+native_color: rabbitmq:2 allocation score on messaging-0: -INFINITY
+native_color: rabbitmq:2 allocation score on messaging-1: -INFINITY
+native_color: rabbitmq:2 allocation score on messaging-2: -INFINITY
+native_color: rabbitmq:3 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:3 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:3 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:3 allocation score on galera-0: -INFINITY
+native_color: rabbitmq:3 allocation score on galera-1: -INFINITY
+native_color: rabbitmq:3 allocation score on galera-2: -INFINITY
+native_color: rabbitmq:3 allocation score on messaging-0: -INFINITY
+native_color: rabbitmq:3 allocation score on messaging-1: -INFINITY
+native_color: rabbitmq:3 allocation score on messaging-2: -INFINITY
+native_color: rabbitmq:4 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:4 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:4 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:4 allocation score on galera-0: -INFINITY
+native_color: rabbitmq:4 allocation score on galera-1: -INFINITY
+native_color: rabbitmq:4 allocation score on galera-2: -INFINITY
+native_color: rabbitmq:4 allocation score on messaging-0: -INFINITY
+native_color: rabbitmq:4 allocation score on messaging-1: -INFINITY
+native_color: rabbitmq:4 allocation score on messaging-2: -INFINITY
+native_color: rabbitmq:5 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:5 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:5 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:5 allocation score on galera-0: -INFINITY
+native_color: rabbitmq:5 allocation score on galera-1: -INFINITY
+native_color: rabbitmq:5 allocation score on galera-2: -INFINITY
+native_color: rabbitmq:5 allocation score on messaging-0: -INFINITY
+native_color: rabbitmq:5 allocation score on messaging-1: -INFINITY
+native_color: rabbitmq:5 allocation score on messaging-2: -INFINITY
+native_color: rabbitmq:6 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:6 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:6 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:6 allocation score on galera-0: -INFINITY
+native_color: rabbitmq:6 allocation score on galera-1: -INFINITY
+native_color: rabbitmq:6 allocation score on galera-2: -INFINITY
+native_color: rabbitmq:6 allocation score on messaging-0: -INFINITY
+native_color: rabbitmq:6 allocation score on messaging-1: -INFINITY
+native_color: rabbitmq:6 allocation score on messaging-2: -INFINITY
+native_color: rabbitmq:7 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:7 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:7 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:7 allocation score on galera-0: -INFINITY
+native_color: rabbitmq:7 allocation score on galera-1: -INFINITY
+native_color: rabbitmq:7 allocation score on galera-2: -INFINITY
+native_color: rabbitmq:7 allocation score on messaging-0: -INFINITY
+native_color: rabbitmq:7 allocation score on messaging-1: -INFINITY
+native_color: rabbitmq:7 allocation score on messaging-2: -INFINITY
+native_color: rabbitmq:8 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:8 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:8 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:8 allocation score on galera-0: -INFINITY
+native_color: rabbitmq:8 allocation score on galera-1: -INFINITY
+native_color: rabbitmq:8 allocation score on galera-2: -INFINITY
+native_color: rabbitmq:8 allocation score on messaging-0: -INFINITY
+native_color: rabbitmq:8 allocation score on messaging-1: -INFINITY
+native_color: rabbitmq:8 allocation score on messaging-2: -INFINITY
+native_color: redis:0 allocation score on controller-0: -INFINITY
+native_color: redis:0 allocation score on controller-1: -INFINITY
+native_color: redis:0 allocation score on controller-2: -INFINITY
+native_color: redis:0 allocation score on galera-0: -INFINITY
+native_color: redis:0 allocation score on galera-1: -INFINITY
+native_color: redis:0 allocation score on galera-2: -INFINITY
+native_color: redis:0 allocation score on messaging-0: -INFINITY
+native_color: redis:0 allocation score on messaging-1: -INFINITY
+native_color: redis:0 allocation score on messaging-2: -INFINITY
+native_color: redis:1 allocation score on controller-0: INFINITY
+native_color: redis:1 allocation score on controller-1: -INFINITY
+native_color: redis:1 allocation score on controller-2: 0
+native_color: redis:1 allocation score on galera-0: -INFINITY
+native_color: redis:1 allocation score on galera-1: -INFINITY
+native_color: redis:1 allocation score on galera-2: -INFINITY
+native_color: redis:1 allocation score on messaging-0: -INFINITY
+native_color: redis:1 allocation score on messaging-1: -INFINITY
+native_color: redis:1 allocation score on messaging-2: -INFINITY
+native_color: redis:2 allocation score on controller-0: -INFINITY
+native_color: redis:2 allocation score on controller-1: -INFINITY
+native_color: redis:2 allocation score on controller-2: INFINITY
+native_color: redis:2 allocation score on galera-0: -INFINITY
+native_color: redis:2 allocation score on galera-1: -INFINITY
+native_color: redis:2 allocation score on galera-2: -INFINITY
+native_color: redis:2 allocation score on messaging-0: -INFINITY
+native_color: redis:2 allocation score on messaging-1: -INFINITY
+native_color: redis:2 allocation score on messaging-2: -INFINITY
+native_color: redis:3 allocation score on controller-0: -INFINITY
+native_color: redis:3 allocation score on controller-1: -INFINITY
+native_color: redis:3 allocation score on controller-2: -INFINITY
+native_color: redis:3 allocation score on galera-0: -INFINITY
+native_color: redis:3 allocation score on galera-1: -INFINITY
+native_color: redis:3 allocation score on galera-2: -INFINITY
+native_color: redis:3 allocation score on messaging-0: -INFINITY
+native_color: redis:3 allocation score on messaging-1: -INFINITY
+native_color: redis:3 allocation score on messaging-2: -INFINITY
+native_color: redis:4 allocation score on controller-0: -INFINITY
+native_color: redis:4 allocation score on controller-1: -INFINITY
+native_color: redis:4 allocation score on controller-2: -INFINITY
+native_color: redis:4 allocation score on galera-0: -INFINITY
+native_color: redis:4 allocation score on galera-1: -INFINITY
+native_color: redis:4 allocation score on galera-2: -INFINITY
+native_color: redis:4 allocation score on messaging-0: -INFINITY
+native_color: redis:4 allocation score on messaging-1: -INFINITY
+native_color: redis:4 allocation score on messaging-2: -INFINITY
+native_color: redis:5 allocation score on controller-0: -INFINITY
+native_color: redis:5 allocation score on controller-1: -INFINITY
+native_color: redis:5 allocation score on controller-2: -INFINITY
+native_color: redis:5 allocation score on galera-0: -INFINITY
+native_color: redis:5 allocation score on galera-1: -INFINITY
+native_color: redis:5 allocation score on galera-2: -INFINITY
+native_color: redis:5 allocation score on messaging-0: -INFINITY
+native_color: redis:5 allocation score on messaging-1: -INFINITY
+native_color: redis:5 allocation score on messaging-2: -INFINITY
+native_color: redis:6 allocation score on controller-0: -INFINITY
+native_color: redis:6 allocation score on controller-1: -INFINITY
+native_color: redis:6 allocation score on controller-2: -INFINITY
+native_color: redis:6 allocation score on galera-0: -INFINITY
+native_color: redis:6 allocation score on galera-1: -INFINITY
+native_color: redis:6 allocation score on galera-2: -INFINITY
+native_color: redis:6 allocation score on messaging-0: -INFINITY
+native_color: redis:6 allocation score on messaging-1: -INFINITY
+native_color: redis:6 allocation score on messaging-2: -INFINITY
+native_color: redis:7 allocation score on controller-0: -INFINITY
+native_color: redis:7 allocation score on controller-1: -INFINITY
+native_color: redis:7 allocation score on controller-2: -INFINITY
+native_color: redis:7 allocation score on galera-0: -INFINITY
+native_color: redis:7 allocation score on galera-1: -INFINITY
+native_color: redis:7 allocation score on galera-2: -INFINITY
+native_color: redis:7 allocation score on messaging-0: -INFINITY
+native_color: redis:7 allocation score on messaging-1: -INFINITY
+native_color: redis:7 allocation score on messaging-2: -INFINITY
+native_color: redis:8 allocation score on controller-0: -INFINITY
+native_color: redis:8 allocation score on controller-1: -INFINITY
+native_color: redis:8 allocation score on controller-2: -INFINITY
+native_color: redis:8 allocation score on galera-0: -INFINITY
+native_color: redis:8 allocation score on galera-1: -INFINITY
+native_color: redis:8 allocation score on galera-2: -INFINITY
+native_color: redis:8 allocation score on messaging-0: -INFINITY
+native_color: redis:8 allocation score on messaging-1: -INFINITY
+native_color: redis:8 allocation score on messaging-2: -INFINITY
+native_color: stonith-fence_ipmilan-5254005bdbb5 allocation score on controller-0: -INFINITY
+native_color: stonith-fence_ipmilan-5254005bdbb5 allocation score on controller-1: INFINITY
+native_color: stonith-fence_ipmilan-5254005bdbb5 allocation score on controller-2: 0
+native_color: stonith-fence_ipmilan-5254005bdbb5 allocation score on galera-0: -INFINITY
+native_color: stonith-fence_ipmilan-5254005bdbb5 allocation score on galera-1: -INFINITY
+native_color: stonith-fence_ipmilan-5254005bdbb5 allocation score on galera-2: -INFINITY
+native_color: stonith-fence_ipmilan-5254005bdbb5 allocation score on messaging-0: -INFINITY
+native_color: stonith-fence_ipmilan-5254005bdbb5 allocation score on messaging-1: -INFINITY
+native_color: stonith-fence_ipmilan-5254005bdbb5 allocation score on messaging-2: -INFINITY
+native_color: stonith-fence_ipmilan-525400b4f6bd allocation score on controller-0: INFINITY
+native_color: stonith-fence_ipmilan-525400b4f6bd allocation score on controller-1: -INFINITY
+native_color: stonith-fence_ipmilan-525400b4f6bd allocation score on controller-2: 0
+native_color: stonith-fence_ipmilan-525400b4f6bd allocation score on galera-0: -INFINITY
+native_color: stonith-fence_ipmilan-525400b4f6bd allocation score on galera-1: -INFINITY
+native_color: stonith-fence_ipmilan-525400b4f6bd allocation score on galera-2: -INFINITY
+native_color: stonith-fence_ipmilan-525400b4f6bd allocation score on messaging-0: -INFINITY
+native_color: stonith-fence_ipmilan-525400b4f6bd allocation score on messaging-1: -INFINITY
+native_color: stonith-fence_ipmilan-525400b4f6bd allocation score on messaging-2: -INFINITY
+native_color: stonith-fence_ipmilan-525400bbf613 allocation score on controller-0: INFINITY
+native_color: stonith-fence_ipmilan-525400bbf613 allocation score on controller-1: 0
+native_color: stonith-fence_ipmilan-525400bbf613 allocation score on controller-2: -INFINITY
+native_color: stonith-fence_ipmilan-525400bbf613 allocation score on galera-0: -INFINITY
+native_color: stonith-fence_ipmilan-525400bbf613 allocation score on galera-1: -INFINITY
+native_color: stonith-fence_ipmilan-525400bbf613 allocation score on galera-2: -INFINITY
+native_color: stonith-fence_ipmilan-525400bbf613 allocation score on messaging-0: -INFINITY
+native_color: stonith-fence_ipmilan-525400bbf613 allocation score on messaging-1: -INFINITY
+native_color: stonith-fence_ipmilan-525400bbf613 allocation score on messaging-2: -INFINITY
+redis:0 promotion score on none: 0
+redis:1 promotion score on controller-0: 1
+redis:2 promotion score on controller-2: 1
+redis:3 promotion score on none: 0
+redis:4 promotion score on none: 0
+redis:5 promotion score on none: 0
+redis:6 promotion score on none: 0
+redis:7 promotion score on none: 0
+redis:8 promotion score on none: 0
diff --git a/pengine/test10/remote-recover-no-resources.summary b/pengine/test10/remote-recover-no-resources.summary
new file mode 100644
index 0000000..8bfeb43
--- /dev/null
+++ b/pengine/test10/remote-recover-no-resources.summary
@@ -0,0 +1,143 @@
+Using the original execution date of: 2017-05-03 13:33:24Z
+
+Current cluster status:
+Node controller-1 (2): UNCLEAN (offline)
+Online: [ controller-0 controller-2 ]
+RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
+
+ messaging-0	(ocf::pacemaker:remote):	Started controller-0
+ messaging-1	(ocf::pacemaker:remote):	Started controller-1 (UNCLEAN)
+ messaging-2	(ocf::pacemaker:remote):	Started controller-0
+ galera-0	(ocf::pacemaker:remote):	Started controller-1 (UNCLEAN)
+ galera-1	(ocf::pacemaker:remote):	Started controller-0
+ galera-2	(ocf::pacemaker:remote):	Started controller-1 (UNCLEAN)
+ Clone Set: rabbitmq-clone [rabbitmq]
+     Started: [ messaging-0 messaging-1 messaging-2 ]
+     Stopped: [ controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 ]
+ Master/Slave Set: galera-master [galera]
+     Masters: [ galera-0 galera-1 ]
+     Stopped: [ controller-0 controller-1 controller-2 galera-2 messaging-0 messaging-1 messaging-2 ]
+ Master/Slave Set: redis-master [redis]
+     redis	(ocf::heartbeat:redis):	Slave controller-1 (UNCLEAN)
+     Masters: [ controller-0 ]
+     Slaves: [ controller-2 ]
+     Stopped: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
+ ip-192.168.24.6	(ocf::heartbeat:IPaddr2):	Started controller-0
+ ip-10.0.0.102	(ocf::heartbeat:IPaddr2):	Started controller-0
+ ip-172.17.1.14	(ocf::heartbeat:IPaddr2):	Started controller-1 (UNCLEAN)
+ ip-172.17.1.17	(ocf::heartbeat:IPaddr2):	Started controller-1 (UNCLEAN)
+ ip-172.17.3.15	(ocf::heartbeat:IPaddr2):	Started controller-0
+ ip-172.17.4.11	(ocf::heartbeat:IPaddr2):	Started controller-1 (UNCLEAN)
+ Clone Set: haproxy-clone [haproxy]
+     haproxy	(systemd:haproxy):	Started controller-1 (UNCLEAN)
+     Started: [ controller-0 controller-2 ]
+     Stopped: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
+ openstack-cinder-volume	(systemd:openstack-cinder-volume):	Started controller-0
+ stonith-fence_ipmilan-525400bbf613	(stonith:fence_ipmilan):	Started controller-0
+ stonith-fence_ipmilan-525400b4f6bd	(stonith:fence_ipmilan):	Started controller-0
+ stonith-fence_ipmilan-5254005bdbb5	(stonith:fence_ipmilan):	Started controller-1 (UNCLEAN)
+
+Transition Summary:
+ * Stop    messaging-1	(controller-1)
+ * Move    galera-0	(Started controller-1 -> controller-2)
+ * Stop    galera-2	(controller-1)
+ * Stop    rabbitmq:2	(messaging-1)
+ * Stop    redis:0	(controller-1)
+ * Move    ip-172.17.1.14	(Started controller-1 -> controller-2)
+ * Move    ip-172.17.1.17	(Started controller-1 -> controller-2)
+ * Move    ip-172.17.4.11	(Started controller-1 -> controller-2)
+ * Stop    haproxy:0	(controller-1)
+ * Restart stonith-fence_ipmilan-525400bbf613	(Started controller-0)
+ * Restart stonith-fence_ipmilan-525400b4f6bd	(Started controller-0)
+ * Move    stonith-fence_ipmilan-5254005bdbb5	(Started controller-1 -> controller-2)
+
+Executing cluster transition:
+ * Pseudo action:   redis-master_pre_notify_stop_0
+ * Resource action: stonith-fence_ipmilan-525400bbf613 stop on controller-0
+ * Resource action: stonith-fence_ipmilan-525400b4f6bd stop on controller-0
+ * Pseudo action:   stonith-fence_ipmilan-5254005bdbb5_stop_0
+ * Fencing controller-1 (reboot)
+ * Pseudo action:   galera-0_stop_0
+ * Pseudo action:   galera-2_stop_0
+ * Pseudo action:   redis_post_notify_stop_0
+ * Resource action: redis           notify on controller-0
+ * Resource action: redis           notify on controller-2
+ * Pseudo action:   redis-master_confirmed-pre_notify_stop_0
+ * Pseudo action:   redis-master_stop_0
+ * Pseudo action:   haproxy-clone_stop_0
+ * Fencing messaging-1 (reboot)
+ * Pseudo action:   stonith_complete
+ * Resource action: galera-0        start on controller-2
+ * Pseudo action:   rabbitmq_post_notify_stop_0
+ * Pseudo action:   rabbitmq-clone_stop_0
+ * Resource action: galera          monitor=10000 on galera-0
+ * Pseudo action:   redis_stop_0
+ * Pseudo action:   redis-master_stopped_0
+ * Pseudo action:   haproxy_stop_0
+ * Pseudo action:   haproxy-clone_stopped_0
+ * Resource action: galera-0        monitor=20000 on controller-2
+ * Resource action: rabbitmq        notify on messaging-2
+ * Resource action: rabbitmq        notify on messaging-0
+ * Pseudo action:   rabbitmq_notified_0
+ * Pseudo action:   rabbitmq_stop_0
+ * Pseudo action:   rabbitmq-clone_stopped_0
+ * Pseudo action:   redis-master_post_notify_stopped_0
+ * Pseudo action:   ip-172.17.1.14_stop_0
+ * Pseudo action:   ip-172.17.1.17_stop_0
+ * Pseudo action:   ip-172.17.4.11_stop_0
+ * Pseudo action:   messaging-1_stop_0
+ * Resource action: redis           notify on controller-0
+ * Resource action: redis           notify on controller-2
+ * Pseudo action:   redis-master_confirmed-post_notify_stopped_0
+ * Resource action: ip-172.17.1.14  start on controller-2
+ * Resource action: ip-172.17.1.17  start on controller-2
+ * Resource action: ip-172.17.4.11  start on controller-2
+ * Pseudo action:   redis_notified_0
+ * Resource action: ip-172.17.1.14  monitor=10000 on controller-2
+ * Resource action: ip-172.17.1.17  monitor=10000 on controller-2
+ * Resource action: ip-172.17.4.11  monitor=10000 on controller-2
+ * Pseudo action:   all_stopped
+ * Resource action: stonith-fence_ipmilan-525400bbf613 start on controller-0
+ * Resource action: stonith-fence_ipmilan-525400bbf613 monitor=60000 on controller-0
+ * Resource action: stonith-fence_ipmilan-525400b4f6bd start on controller-0
+ * Resource action: stonith-fence_ipmilan-525400b4f6bd monitor=60000 on controller-0
+ * Resource action: stonith-fence_ipmilan-5254005bdbb5 start on controller-2
+ * Resource action: stonith-fence_ipmilan-5254005bdbb5 monitor=60000 on controller-2
+Using the original execution date of: 2017-05-03 13:33:24Z
+
+Revised cluster status:
+Online: [ controller-0 controller-2 ]
+OFFLINE: [ controller-1 ]
+RemoteOnline: [ galera-0 galera-1 messaging-0 messaging-2 ]
+RemoteOFFLINE: [ galera-2 messaging-1 ]
+
+ messaging-0	(ocf::pacemaker:remote):	Started controller-0
+ messaging-1	(ocf::pacemaker:remote):	Stopped
+ messaging-2	(ocf::pacemaker:remote):	Started controller-0
+ galera-0	(ocf::pacemaker:remote):	Started controller-2
+ galera-1	(ocf::pacemaker:remote):	Started controller-0
+ galera-2	(ocf::pacemaker:remote):	Stopped
+ Clone Set: rabbitmq-clone [rabbitmq]
+     Started: [ messaging-0 messaging-2 ]
+     Stopped: [ controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-1 ]
+ Master/Slave Set: galera-master [galera]
+     Masters: [ galera-0 galera-1 ]
+     Stopped: [ controller-0 controller-1 controller-2 galera-2 messaging-0 messaging-1 messaging-2 ]
+ Master/Slave Set: redis-master [redis]
+     Masters: [ controller-0 ]
+     Slaves: [ controller-2 ]
+     Stopped: [ controller-1 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
+ ip-192.168.24.6	(ocf::heartbeat:IPaddr2):	Started controller-0
+ ip-10.0.0.102	(ocf::heartbeat:IPaddr2):	Started controller-0
+ ip-172.17.1.14	(ocf::heartbeat:IPaddr2):	Started controller-2
+ ip-172.17.1.17	(ocf::heartbeat:IPaddr2):	Started controller-2
+ ip-172.17.3.15	(ocf::heartbeat:IPaddr2):	Started controller-0
+ ip-172.17.4.11	(ocf::heartbeat:IPaddr2):	Started controller-2
+ Clone Set: haproxy-clone [haproxy]
+     Started: [ controller-0 controller-2 ]
+     Stopped: [ controller-1 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
+ openstack-cinder-volume	(systemd:openstack-cinder-volume):	Started controller-0
+ stonith-fence_ipmilan-525400bbf613	(stonith:fence_ipmilan):	Started controller-0
+ stonith-fence_ipmilan-525400b4f6bd	(stonith:fence_ipmilan):	Started controller-0
+ stonith-fence_ipmilan-5254005bdbb5	(stonith:fence_ipmilan):	Started controller-2
+
diff --git a/pengine/test10/remote-recover-no-resources.xml b/pengine/test10/remote-recover-no-resources.xml
new file mode 100644
index 0000000..d2fa0df
--- /dev/null
+++ b/pengine/test10/remote-recover-no-resources.xml
@@ -0,0 +1,741 @@
+<cib crm_feature_set="3.0.10" validate-with="pacemaker-2.5" epoch="183" num_updates="0" admin_epoch="0" cib-last-written="Wed May  3 13:24:28 2017" update-origin="controller-0" update-client="crm_attribute" update-user="root" have-quorum="1" dc-uuid="1" execution-date="1493818404">
+  <configuration>
+    <crm_config>
+      <cluster_property_set id="cib-bootstrap-options">
+        <nvpair id="cib-bootstrap-options-have-watchdog" name="have-watchdog" value="false"/>
+        <nvpair id="cib-bootstrap-options-dc-version" name="dc-version" value="1.1.15-11.el7_3.4-e174ec8"/>
+        <nvpair id="cib-bootstrap-options-cluster-infrastructure" name="cluster-infrastructure" value="corosync"/>
+        <nvpair id="cib-bootstrap-options-cluster-name" name="cluster-name" value="tripleo_cluster"/>
+        <nvpair id="cib-bootstrap-options-stonith-enabled" name="stonith-enabled" value="true"/>
+        <nvpair id="cib-bootstrap-options-cluster-recheck-interval" name="cluster-recheck-interval" value="60s"/>
+        <nvpair id="cib-bootstrap-options-maintenance-mode" name="maintenance-mode" value="false"/>
+        <nvpair id="cib-bootstrap-options-last-lrm-refresh" name="last-lrm-refresh" value="1493817755"/>
+      </cluster_property_set>
+      <cluster_property_set id="redis_replication">
+        <nvpair id="redis_replication-redis_REPL_INFO" name="redis_REPL_INFO" value="controller-0"/>
+      </cluster_property_set>
+    </crm_config>
+    <nodes>
+      <node id="1" uname="controller-0">
+        <instance_attributes id="nodes-1">
+          <nvpair id="nodes-1-cinder-volume-role" name="cinder-volume-role" value="true"/>
+          <nvpair id="nodes-1-haproxy-role" name="haproxy-role" value="true"/>
+          <nvpair id="nodes-1-redis-role" name="redis-role" value="true"/>
+        </instance_attributes>
+      </node>
+      <node id="2" uname="controller-1">
+        <instance_attributes id="nodes-2">
+          <nvpair id="nodes-2-cinder-volume-role" name="cinder-volume-role" value="true"/>
+          <nvpair id="nodes-2-haproxy-role" name="haproxy-role" value="true"/>
+          <nvpair id="nodes-2-redis-role" name="redis-role" value="true"/>
+        </instance_attributes>
+      </node>
+      <node id="3" uname="controller-2">
+        <instance_attributes id="nodes-3">
+          <nvpair id="nodes-3-cinder-volume-role" name="cinder-volume-role" value="true"/>
+          <nvpair id="nodes-3-haproxy-role" name="haproxy-role" value="true"/>
+          <nvpair id="nodes-3-redis-role" name="redis-role" value="true"/>
+        </instance_attributes>
+      </node>
+      <node id="messaging-1" type="remote" uname="messaging-1">
+        <instance_attributes id="nodes-messaging-1">
+          <nvpair id="nodes-messaging-1-rabbitmq-role" name="rabbitmq-role" value="true"/>
+          <nvpair id="nodes-messaging-1-rmq-node-attr-last-known-rabbitmq" name="rmq-node-attr-last-known-rabbitmq" value="rabbit@messaging-1"/>
+        </instance_attributes>
+      </node>
+      <node id="galera-1" type="remote" uname="galera-1">
+        <instance_attributes id="nodes-galera-1">
+          <nvpair id="nodes-galera-1-galera-role" name="galera-role" value="true"/>
+        </instance_attributes>
+      </node>
+      <node id="messaging-0" type="remote" uname="messaging-0">
+        <instance_attributes id="nodes-messaging-0">
+          <nvpair id="nodes-messaging-0-rabbitmq-role" name="rabbitmq-role" value="true"/>
+          <nvpair id="nodes-messaging-0-rmq-node-attr-last-known-rabbitmq" name="rmq-node-attr-last-known-rabbitmq" value="rabbit@messaging-0"/>
+        </instance_attributes>
+      </node>
+      <node id="galera-2" type="remote" uname="galera-2">
+        <instance_attributes id="nodes-galera-2">
+          <nvpair id="nodes-galera-2-galera-role" name="galera-role" value="true"/>
+        </instance_attributes>
+      </node>
+      <node id="messaging-2" type="remote" uname="messaging-2">
+        <instance_attributes id="nodes-messaging-2">
+          <nvpair id="nodes-messaging-2-rabbitmq-role" name="rabbitmq-role" value="true"/>
+          <nvpair id="nodes-messaging-2-rmq-node-attr-last-known-rabbitmq" name="rmq-node-attr-last-known-rabbitmq" value="rabbit@messaging-2"/>
+        </instance_attributes>
+      </node>
+      <node id="galera-0" type="remote" uname="galera-0">
+        <instance_attributes id="nodes-galera-0">
+          <nvpair id="nodes-galera-0-galera-role" name="galera-role" value="true"/>
+        </instance_attributes>
+      </node>
+    </nodes>
+    <resources>
+      <primitive class="ocf" id="messaging-0" provider="pacemaker" type="remote">
+        <instance_attributes id="messaging-0-instance_attributes">
+          <nvpair id="messaging-0-instance_attributes-reconnect_interval" name="reconnect_interval" value="60"/>
+        </instance_attributes>
+        <operations>
+          <op id="messaging-0-start-interval-0s" interval="0s" name="start" timeout="60"/>
+          <op id="messaging-0-stop-interval-0s" interval="0s" name="stop" timeout="60"/>
+          <op id="messaging-0-monitor-interval-20" interval="20" name="monitor"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="messaging-1" provider="pacemaker" type="remote">
+        <instance_attributes id="messaging-1-instance_attributes">
+          <nvpair id="messaging-1-instance_attributes-reconnect_interval" name="reconnect_interval" value="60"/>
+        </instance_attributes>
+        <operations>
+          <op id="messaging-1-start-interval-0s" interval="0s" name="start" timeout="60"/>
+          <op id="messaging-1-stop-interval-0s" interval="0s" name="stop" timeout="60"/>
+          <op id="messaging-1-monitor-interval-20" interval="20" name="monitor"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="messaging-2" provider="pacemaker" type="remote">
+        <instance_attributes id="messaging-2-instance_attributes">
+          <nvpair id="messaging-2-instance_attributes-reconnect_interval" name="reconnect_interval" value="60"/>
+        </instance_attributes>
+        <operations>
+          <op id="messaging-2-start-interval-0s" interval="0s" name="start" timeout="60"/>
+          <op id="messaging-2-stop-interval-0s" interval="0s" name="stop" timeout="60"/>
+          <op id="messaging-2-monitor-interval-20" interval="20" name="monitor"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="galera-0" provider="pacemaker" type="remote">
+        <instance_attributes id="galera-0-instance_attributes">
+          <nvpair id="galera-0-instance_attributes-reconnect_interval" name="reconnect_interval" value="60"/>
+        </instance_attributes>
+        <operations>
+          <op id="galera-0-start-interval-0s" interval="0s" name="start" timeout="60"/>
+          <op id="galera-0-stop-interval-0s" interval="0s" name="stop" timeout="60"/>
+          <op id="galera-0-monitor-interval-20" interval="20" name="monitor"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="galera-1" provider="pacemaker" type="remote">
+        <instance_attributes id="galera-1-instance_attributes">
+          <nvpair id="galera-1-instance_attributes-reconnect_interval" name="reconnect_interval" value="60"/>
+        </instance_attributes>
+        <operations>
+          <op id="galera-1-start-interval-0s" interval="0s" name="start" timeout="60"/>
+          <op id="galera-1-stop-interval-0s" interval="0s" name="stop" timeout="60"/>
+          <op id="galera-1-monitor-interval-20" interval="20" name="monitor"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="galera-2" provider="pacemaker" type="remote">
+        <instance_attributes id="galera-2-instance_attributes">
+          <nvpair id="galera-2-instance_attributes-reconnect_interval" name="reconnect_interval" value="60"/>
+        </instance_attributes>
+        <operations>
+          <op id="galera-2-start-interval-0s" interval="0s" name="start" timeout="60"/>
+          <op id="galera-2-stop-interval-0s" interval="0s" name="stop" timeout="60"/>
+          <op id="galera-2-monitor-interval-20" interval="20" name="monitor"/>
+        </operations>
+      </primitive>
+      <clone id="rabbitmq-clone">
+        <primitive class="ocf" id="rabbitmq" provider="heartbeat" type="rabbitmq-cluster">
+          <instance_attributes id="rabbitmq-instance_attributes">
+            <nvpair id="rabbitmq-instance_attributes-set_policy" name="set_policy" value="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
+          </instance_attributes>
+          <meta_attributes id="rabbitmq-meta_attributes">
+            <nvpair id="rabbitmq-meta_attributes-notify" name="notify" value="true"/>
+          </meta_attributes>
+          <operations>
+            <op id="rabbitmq-monitor-interval-10" interval="10" name="monitor" timeout="40"/>
+            <op id="rabbitmq-start-interval-0s" interval="0s" name="start" timeout="200s"/>
+            <op id="rabbitmq-stop-interval-0s" interval="0s" name="stop" timeout="200s"/>
+          </operations>
+        </primitive>
+        <meta_attributes id="rabbitmq-clone-meta_attributes">
+          <nvpair id="rabbitmq-clone-meta_attributes-interleave" name="interleave" value="true"/>
+          <nvpair id="rabbitmq-clone-meta_attributes-ordered" name="ordered" value="true"/>
+        </meta_attributes>
+      </clone>
+      <master id="galera-master">
+        <primitive class="ocf" id="galera" provider="heartbeat" type="galera">
+          <instance_attributes id="galera-instance_attributes">
+            <nvpair id="galera-instance_attributes-additional_parameters" name="additional_parameters" value="--open-files-limit=16384"/>
+            <nvpair id="galera-instance_attributes-enable_creation" name="enable_creation" value="true"/>
+            <nvpair id="galera-instance_attributes-wsrep_cluster_address" name="wsrep_cluster_address" value="gcomm://galera-0,galera-1,galera-2"/>
+          </instance_attributes>
+          <operations>
+            <op id="galera-start-interval-0s" interval="0s" name="start" timeout="120"/>
+            <op id="galera-stop-interval-0s" interval="0s" name="stop" timeout="120"/>
+            <op id="galera-monitor-interval-20" interval="20" name="monitor" timeout="30"/>
+            <op id="galera-monitor-interval-10" interval="10" name="monitor" role="Master" timeout="30"/>
+            <op id="galera-monitor-interval-30" interval="30" name="monitor" role="Slave" timeout="30"/>
+            <op id="galera-demote-interval-0s" interval="0s" name="demote" timeout="120"/>
+            <op id="galera-promote-interval-0s" interval="0s" name="promote" on-fail="block" timeout="300s"/>
+          </operations>
+        </primitive>
+        <meta_attributes id="galera-master-meta_attributes">
+          <nvpair id="galera-master-meta_attributes-ordered" name="ordered" value="true"/>
+          <nvpair id="galera-master-meta_attributes-master-max" name="master-max" value="3"/>
+        </meta_attributes>
+      </master>
+      <master id="redis-master">
+        <primitive class="ocf" id="redis" provider="heartbeat" type="redis">
+          <instance_attributes id="redis-instance_attributes">
+            <nvpair id="redis-instance_attributes-wait_last_known_master" name="wait_last_known_master" value="true"/>
+          </instance_attributes>
+          <operations>
+            <op id="redis-monitor-interval-45" interval="45" name="monitor" timeout="60"/>
+            <op id="redis-monitor-interval-20" interval="20" name="monitor" role="Master" timeout="60"/>
+            <op id="redis-monitor-interval-60" interval="60" name="monitor" role="Slave" timeout="60"/>
+            <op id="redis-promote-interval-0s" interval="0s" name="promote" timeout="120"/>
+            <op id="redis-demote-interval-0s" interval="0s" name="demote" timeout="120"/>
+            <op id="redis-start-interval-0s" interval="0s" name="start" timeout="200s"/>
+            <op id="redis-stop-interval-0s" interval="0s" name="stop" timeout="200s"/>
+          </operations>
+        </primitive>
+        <meta_attributes id="redis-master-meta_attributes">
+          <nvpair id="redis-master-meta_attributes-interleave" name="interleave" value="true"/>
+          <nvpair id="redis-master-meta_attributes-ordered" name="ordered" value="true"/>
+          <nvpair id="redis-master-meta_attributes-notify" name="notify" value="true"/>
+        </meta_attributes>
+      </master>
+      <primitive class="ocf" id="ip-192.168.24.6" provider="heartbeat" type="IPaddr2">
+        <instance_attributes id="ip-192.168.24.6-instance_attributes">
+          <nvpair id="ip-192.168.24.6-instance_attributes-ip" name="ip" value="192.168.24.6"/>
+          <nvpair id="ip-192.168.24.6-instance_attributes-cidr_netmask" name="cidr_netmask" value="32"/>
+        </instance_attributes>
+        <meta_attributes id="ip-192.168.24.6-meta_attributes"/>
+        <operations>
+          <op id="ip-192.168.24.6-start-interval-0s" interval="0s" name="start" timeout="20s"/>
+          <op id="ip-192.168.24.6-stop-interval-0s" interval="0s" name="stop" timeout="20s"/>
+          <op id="ip-192.168.24.6-monitor-interval-10s" interval="10s" name="monitor" timeout="20s"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="ip-10.0.0.102" provider="heartbeat" type="IPaddr2">
+        <instance_attributes id="ip-10.0.0.102-instance_attributes">
+          <nvpair id="ip-10.0.0.102-instance_attributes-ip" name="ip" value="10.0.0.102"/>
+          <nvpair id="ip-10.0.0.102-instance_attributes-cidr_netmask" name="cidr_netmask" value="32"/>
+        </instance_attributes>
+        <meta_attributes id="ip-10.0.0.102-meta_attributes"/>
+        <operations>
+          <op id="ip-10.0.0.102-start-interval-0s" interval="0s" name="start" timeout="20s"/>
+          <op id="ip-10.0.0.102-stop-interval-0s" interval="0s" name="stop" timeout="20s"/>
+          <op id="ip-10.0.0.102-monitor-interval-10s" interval="10s" name="monitor" timeout="20s"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="ip-172.17.1.14" provider="heartbeat" type="IPaddr2">
+        <instance_attributes id="ip-172.17.1.14-instance_attributes">
+          <nvpair id="ip-172.17.1.14-instance_attributes-ip" name="ip" value="172.17.1.14"/>
+          <nvpair id="ip-172.17.1.14-instance_attributes-cidr_netmask" name="cidr_netmask" value="32"/>
+        </instance_attributes>
+        <meta_attributes id="ip-172.17.1.14-meta_attributes"/>
+        <operations>
+          <op id="ip-172.17.1.14-start-interval-0s" interval="0s" name="start" timeout="20s"/>
+          <op id="ip-172.17.1.14-stop-interval-0s" interval="0s" name="stop" timeout="20s"/>
+          <op id="ip-172.17.1.14-monitor-interval-10s" interval="10s" name="monitor" timeout="20s"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="ip-172.17.1.17" provider="heartbeat" type="IPaddr2">
+        <instance_attributes id="ip-172.17.1.17-instance_attributes">
+          <nvpair id="ip-172.17.1.17-instance_attributes-ip" name="ip" value="172.17.1.17"/>
+          <nvpair id="ip-172.17.1.17-instance_attributes-cidr_netmask" name="cidr_netmask" value="32"/>
+        </instance_attributes>
+        <meta_attributes id="ip-172.17.1.17-meta_attributes"/>
+        <operations>
+          <op id="ip-172.17.1.17-start-interval-0s" interval="0s" name="start" timeout="20s"/>
+          <op id="ip-172.17.1.17-stop-interval-0s" interval="0s" name="stop" timeout="20s"/>
+          <op id="ip-172.17.1.17-monitor-interval-10s" interval="10s" name="monitor" timeout="20s"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="ip-172.17.3.15" provider="heartbeat" type="IPaddr2">
+        <instance_attributes id="ip-172.17.3.15-instance_attributes">
+          <nvpair id="ip-172.17.3.15-instance_attributes-ip" name="ip" value="172.17.3.15"/>
+          <nvpair id="ip-172.17.3.15-instance_attributes-cidr_netmask" name="cidr_netmask" value="32"/>
+        </instance_attributes>
+        <meta_attributes id="ip-172.17.3.15-meta_attributes"/>
+        <operations>
+          <op id="ip-172.17.3.15-start-interval-0s" interval="0s" name="start" timeout="20s"/>
+          <op id="ip-172.17.3.15-stop-interval-0s" interval="0s" name="stop" timeout="20s"/>
+          <op id="ip-172.17.3.15-monitor-interval-10s" interval="10s" name="monitor" timeout="20s"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="ip-172.17.4.11" provider="heartbeat" type="IPaddr2">
+        <instance_attributes id="ip-172.17.4.11-instance_attributes">
+          <nvpair id="ip-172.17.4.11-instance_attributes-ip" name="ip" value="172.17.4.11"/>
+          <nvpair id="ip-172.17.4.11-instance_attributes-cidr_netmask" name="cidr_netmask" value="32"/>
+        </instance_attributes>
+        <meta_attributes id="ip-172.17.4.11-meta_attributes"/>
+        <operations>
+          <op id="ip-172.17.4.11-start-interval-0s" interval="0s" name="start" timeout="20s"/>
+          <op id="ip-172.17.4.11-stop-interval-0s" interval="0s" name="stop" timeout="20s"/>
+          <op id="ip-172.17.4.11-monitor-interval-10s" interval="10s" name="monitor" timeout="20s"/>
+        </operations>
+      </primitive>
+      <clone id="haproxy-clone">
+        <primitive class="systemd" id="haproxy" type="haproxy">
+          <instance_attributes id="haproxy-instance_attributes"/>
+          <meta_attributes id="haproxy-meta_attributes"/>
+          <operations>
+            <op id="haproxy-start-interval-0s" interval="0s" name="start" timeout="200s"/>
+            <op id="haproxy-stop-interval-0s" interval="0s" name="stop" timeout="200s"/>
+            <op id="haproxy-monitor-interval-60s" interval="60s" name="monitor"/>
+          </operations>
+        </primitive>
+        <meta_attributes id="haproxy-clone-meta_attributes"/>
+      </clone>
+      <primitive class="systemd" id="openstack-cinder-volume" type="openstack-cinder-volume">
+        <instance_attributes id="openstack-cinder-volume-instance_attributes"/>
+        <meta_attributes id="openstack-cinder-volume-meta_attributes"/>
+        <operations>
+          <op id="openstack-cinder-volume-start-interval-0s" interval="0s" name="start" timeout="200s"/>
+          <op id="openstack-cinder-volume-stop-interval-0s" interval="0s" name="stop" timeout="200s"/>
+          <op id="openstack-cinder-volume-monitor-interval-60s" interval="60s" name="monitor"/>
+        </operations>
+      </primitive>
+      <primitive class="stonith" id="stonith-fence_ipmilan-525400bbf613" type="fence_ipmilan">
+        <instance_attributes id="stonith-fence_ipmilan-525400bbf613-instance_attributes">
+          <nvpair id="stonith-fence_ipmilan-525400bbf613-instance_attributes-pcmk_host_list" name="pcmk_host_list" value="controller-2"/>
+          <nvpair id="stonith-fence_ipmilan-525400bbf613-instance_attributes-ipaddr" name="ipaddr" value="172.16.0.1"/>
+          <nvpair id="stonith-fence_ipmilan-525400bbf613-instance_attributes-ipport" name="ipport" value="6237"/>
+          <nvpair id="stonith-fence_ipmilan-525400bbf613-instance_attributes-passwd" name="passwd" value="****"/>
+          <nvpair id="stonith-fence_ipmilan-525400bbf613-instance_attributes-lanplus" name="lanplus" value="true"/>
+          <nvpair id="stonith-fence_ipmilan-525400bbf613-instance_attributes-login" name="login" value="admin"/>
+          <nvpair id="stonith-fence_ipmilan-525400bbf613-instance_attributes-action" name="action" value="reboot"/>
+          <nvpair id="stonith-fence_ipmilan-525400bbf613-instance_attributes-privlvl" name="privlvl" value="administrator"/>
+        </instance_attributes>
+        <operations>
+          <op id="stonith-fence_ipmilan-525400bbf613-monitor-interval-60s" interval="60s" name="monitor"/>
+        </operations>
+        <meta_attributes id="stonith-fence_ipmilan-525400bbf613-meta_attributes"/>
+      </primitive>
+      <primitive class="stonith" id="stonith-fence_ipmilan-525400b4f6bd" type="fence_ipmilan">
+        <instance_attributes id="stonith-fence_ipmilan-525400b4f6bd-instance_attributes">
+          <nvpair id="stonith-fence_ipmilan-525400b4f6bd-instance_attributes-pcmk_host_list" name="pcmk_host_list" value="controller-1"/>
+          <nvpair id="stonith-fence_ipmilan-525400b4f6bd-instance_attributes-ipaddr" name="ipaddr" value="172.16.0.1"/>
+          <nvpair id="stonith-fence_ipmilan-525400b4f6bd-instance_attributes-ipport" name="ipport" value="6236"/>
+          <nvpair id="stonith-fence_ipmilan-525400b4f6bd-instance_attributes-passwd" name="passwd" value="****"/>
+          <nvpair id="stonith-fence_ipmilan-525400b4f6bd-instance_attributes-lanplus" name="lanplus" value="true"/>
+          <nvpair id="stonith-fence_ipmilan-525400b4f6bd-instance_attributes-login" name="login" value="admin"/>
+          <nvpair id="stonith-fence_ipmilan-525400b4f6bd-instance_attributes-action" name="action" value="reboot"/>
+          <nvpair id="stonith-fence_ipmilan-525400b4f6bd-instance_attributes-privlvl" name="privlvl" value="administrator"/>
+        </instance_attributes>
+        <operations>
+          <op id="stonith-fence_ipmilan-525400b4f6bd-monitor-interval-60s" interval="60s" name="monitor"/>
+        </operations>
+        <meta_attributes id="stonith-fence_ipmilan-525400b4f6bd-meta_attributes"/>
+      </primitive>
+      <primitive class="stonith" id="stonith-fence_ipmilan-5254005bdbb5" type="fence_ipmilan">
+        <instance_attributes id="stonith-fence_ipmilan-5254005bdbb5-instance_attributes">
+          <nvpair id="stonith-fence_ipmilan-5254005bdbb5-instance_attributes-pcmk_host_list" name="pcmk_host_list" value="controller-0"/>
+          <nvpair id="stonith-fence_ipmilan-5254005bdbb5-instance_attributes-ipaddr" name="ipaddr" value="172.16.0.1"/>
+          <nvpair id="stonith-fence_ipmilan-5254005bdbb5-instance_attributes-ipport" name="ipport" value="6235"/>
+          <nvpair id="stonith-fence_ipmilan-5254005bdbb5-instance_attributes-passwd" name="passwd" value="****"/>
+          <nvpair id="stonith-fence_ipmilan-5254005bdbb5-instance_attributes-lanplus" name="lanplus" value="true"/>
+          <nvpair id="stonith-fence_ipmilan-5254005bdbb5-instance_attributes-login" name="login" value="admin"/>
+          <nvpair id="stonith-fence_ipmilan-5254005bdbb5-instance_attributes-action" name="action" value="reboot"/>
+          <nvpair id="stonith-fence_ipmilan-5254005bdbb5-instance_attributes-privlvl" name="privlvl" value="administrator"/>
+        </instance_attributes>
+        <operations>
+          <op id="stonith-fence_ipmilan-5254005bdbb5-monitor-interval-60s" interval="60s" name="monitor"/>
+        </operations>
+        <meta_attributes id="stonith-fence_ipmilan-5254005bdbb5-meta_attributes"/>
+      </primitive>
+    </resources>
+    <constraints>
+      <rsc_location id="location-rabbitmq-clone" resource-discovery="exclusive" rsc="rabbitmq-clone">
+        <rule id="location-rabbitmq-clone-rule" score="0">
+          <expression attribute="rabbitmq-role" id="location-rabbitmq-clone-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-galera-master" resource-discovery="exclusive" rsc="galera-master">
+        <rule id="location-galera-master-rule" score="0">
+          <expression attribute="galera-role" id="location-galera-master-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-redis-master" resource-discovery="exclusive" rsc="redis-master">
+        <rule id="location-redis-master-rule" score="0">
+          <expression attribute="redis-role" id="location-redis-master-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-ip-192.168.24.6" resource-discovery="exclusive" rsc="ip-192.168.24.6">
+        <rule id="location-ip-192.168.24.6-rule" score="0">
+          <expression attribute="haproxy-role" id="location-ip-192.168.24.6-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-ip-10.0.0.102" resource-discovery="exclusive" rsc="ip-10.0.0.102">
+        <rule id="location-ip-10.0.0.102-rule" score="0">
+          <expression attribute="haproxy-role" id="location-ip-10.0.0.102-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-ip-172.17.1.14" resource-discovery="exclusive" rsc="ip-172.17.1.14">
+        <rule id="location-ip-172.17.1.14-rule" score="0">
+          <expression attribute="haproxy-role" id="location-ip-172.17.1.14-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-ip-172.17.1.17" resource-discovery="exclusive" rsc="ip-172.17.1.17">
+        <rule id="location-ip-172.17.1.17-rule" score="0">
+          <expression attribute="haproxy-role" id="location-ip-172.17.1.17-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-ip-172.17.3.15" resource-discovery="exclusive" rsc="ip-172.17.3.15">
+        <rule id="location-ip-172.17.3.15-rule" score="0">
+          <expression attribute="haproxy-role" id="location-ip-172.17.3.15-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-ip-172.17.4.11" resource-discovery="exclusive" rsc="ip-172.17.4.11">
+        <rule id="location-ip-172.17.4.11-rule" score="0">
+          <expression attribute="haproxy-role" id="location-ip-172.17.4.11-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-haproxy-clone" resource-discovery="exclusive" rsc="haproxy-clone">
+        <rule id="location-haproxy-clone-rule" score="0">
+          <expression attribute="haproxy-role" id="location-haproxy-clone-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_order first="ip-192.168.24.6" first-action="start" id="order-ip-192.168.24.6-haproxy-clone-Optional" kind="Optional" then="haproxy-clone" then-action="start"/>
+      <rsc_colocation id="colocation-ip-192.168.24.6-haproxy-clone-INFINITY" rsc="ip-192.168.24.6" score="INFINITY" with-rsc="haproxy-clone"/>
+      <rsc_order first="ip-10.0.0.102" first-action="start" id="order-ip-10.0.0.102-haproxy-clone-Optional" kind="Optional" then="haproxy-clone" then-action="start"/>
+      <rsc_colocation id="colocation-ip-10.0.0.102-haproxy-clone-INFINITY" rsc="ip-10.0.0.102" score="INFINITY" with-rsc="haproxy-clone"/>
+      <rsc_order first="ip-172.17.1.14" first-action="start" id="order-ip-172.17.1.14-haproxy-clone-Optional" kind="Optional" then="haproxy-clone" then-action="start"/>
+      <rsc_colocation id="colocation-ip-172.17.1.14-haproxy-clone-INFINITY" rsc="ip-172.17.1.14" score="INFINITY" with-rsc="haproxy-clone"/>
+      <rsc_order first="ip-172.17.1.17" first-action="start" id="order-ip-172.17.1.17-haproxy-clone-Optional" kind="Optional" then="haproxy-clone" then-action="start"/>
+      <rsc_colocation id="colocation-ip-172.17.1.17-haproxy-clone-INFINITY" rsc="ip-172.17.1.17" score="INFINITY" with-rsc="haproxy-clone"/>
+      <rsc_order first="ip-172.17.3.15" first-action="start" id="order-ip-172.17.3.15-haproxy-clone-Optional" kind="Optional" then="haproxy-clone" then-action="start"/>
+      <rsc_colocation id="colocation-ip-172.17.3.15-haproxy-clone-INFINITY" rsc="ip-172.17.3.15" score="INFINITY" with-rsc="haproxy-clone"/>
+      <rsc_order first="ip-172.17.4.11" first-action="start" id="order-ip-172.17.4.11-haproxy-clone-Optional" kind="Optional" then="haproxy-clone" then-action="start"/>
+      <rsc_colocation id="colocation-ip-172.17.4.11-haproxy-clone-INFINITY" rsc="ip-172.17.4.11" score="INFINITY" with-rsc="haproxy-clone"/>
+      <rsc_location id="location-openstack-cinder-volume" resource-discovery="exclusive" rsc="openstack-cinder-volume">
+        <rule id="location-openstack-cinder-volume-rule" score="0">
+          <expression attribute="cinder-volume-role" id="location-openstack-cinder-volume-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-stonith-fence_ipmilan-525400bbf613-controller-2--INFINITY" node="controller-2" rsc="stonith-fence_ipmilan-525400bbf613" score="-INFINITY"/>
+      <rsc_location id="location-stonith-fence_ipmilan-525400b4f6bd-controller-1--INFINITY" node="controller-1" rsc="stonith-fence_ipmilan-525400b4f6bd" score="-INFINITY"/>
+      <rsc_location id="location-stonith-fence_ipmilan-5254005bdbb5-controller-0--INFINITY" node="controller-0" rsc="stonith-fence_ipmilan-5254005bdbb5" score="-INFINITY"/>
+      <rsc_location id="cli-ban-messaging-1-on-controller-0" rsc="messaging-1" role="Started" node="controller-0" score="-INFINITY"/>
+      <rsc_location id="cli-ban-messaging-1-on-controller-2" rsc="messaging-1" role="Started" node="controller-2" score="-INFINITY"/>
+      <rsc_location id="cli-ban-galera-2-on-controller-0" rsc="galera-2" role="Started" node="controller-0" score="-INFINITY"/>
+      <rsc_location id="cli-ban-galera-2-on-controller-2" rsc="galera-2" role="Started" node="controller-2" score="-INFINITY"/>
+    </constraints>
+    <rsc_defaults>
+      <meta_attributes id="rsc_defaults-options">
+        <nvpair id="rsc_defaults-options-resource-stickiness" name="resource-stickiness" value="INFINITY"/>
+      </meta_attributes>
+    </rsc_defaults>
+  </configuration>
+  <status>
+    <node_state id="2" uname="controller-1" in_ccm="false" crmd="offline" crm-debug-origin="post_cache_update" join="member" expected="member">
+      <lrm id="2">
+        <lrm_resources>
+          <lrm_resource id="ip-10.0.0.102" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-10.0.0.102_last_0" operation_key="ip-10.0.0.102_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="37:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:7;37:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="20" rc-code="7" op-status="0" interval="0" last-run="1493817888" last-rc-change="1493817888" exec-time="44" queue-time="0" op-digest="194c484ea9d1eb9955c0cfdaf53ccdae"/>
+          </lrm_resource>
+          <lrm_resource id="haproxy" type="haproxy" class="systemd">
+            <lrm_rsc_op id="haproxy_last_0" operation_key="haproxy_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="138:5:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;138:5:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="46" rc-code="0" op-status="0" interval="0" last-run="1493817889" last-rc-change="1493817889" exec-time="2088" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="haproxy_monitor_60000" operation_key="haproxy_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="119:6:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;119:6:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="63" rc-code="0" op-status="0" interval="60000" last-rc-change="1493817892" exec-time="1" queue-time="1" op-digest="4811cef7f7f94e3a35a70be7916cb2fd"/>
+          </lrm_resource>
+          <lrm_resource id="openstack-cinder-volume" type="openstack-cinder-volume" class="systemd">
+            <lrm_rsc_op id="openstack-cinder-volume_last_0" operation_key="openstack-cinder-volume_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="43:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:7;43:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="45" rc-code="7" op-status="0" interval="0" last-run="1493817889" last-rc-change="1493817889" exec-time="3" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.4.11" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.4.11_last_0" operation_key="ip-172.17.4.11_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="118:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;118:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="70" rc-code="0" op-status="0" interval="0" last-run="1493817963" last-rc-change="1493817963" exec-time="58" queue-time="0" op-digest="fe27c3edbb73480aff571d34c88b21a7"/>
+            <lrm_rsc_op id="ip-172.17.4.11_monitor_10000" operation_key="ip-172.17.4.11_monitor_10000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="119:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;119:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="71" rc-code="0" op-status="0" interval="10000" last-rc-change="1493817964" exec-time="38" queue-time="0" op-digest="392445a354e2da75dcd4cbe6eee1268b"/>
+          </lrm_resource>
+          <lrm_resource id="messaging-0" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="messaging-0_last_0" operation_key="messaging-0_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="29:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:7;29:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="1" rc-code="7" op-status="0" interval="0" last-run="1493817888" last-rc-change="1493817888" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="messaging-1" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="messaging-1_last_0" operation_key="messaging-1_migrate_from_0" operation="migrate_from" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="38:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;38:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="7" rc-code="0" op-status="0" interval="0" last-run="1493817961" last-rc-change="1493817961" exec-time="0" queue-time="0" migrate_source="controller-2" migrate_target="controller-1" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="messaging-1_monitor_20000" operation_key="messaging-1_monitor_20000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="36:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;36:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="10" rc-code="0" op-status="0" interval="20000" last-rc-change="1493817963" exec-time="0" queue-time="0" op-digest="6e5bb737f46c381d8a46fb4162afd9e0"/>
+          </lrm_resource>
+          <lrm_resource id="messaging-2" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="messaging-2_last_0" operation_key="messaging-2_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="31:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:7;31:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="3" rc-code="7" op-status="0" interval="0" last-run="1493817888" last-rc-change="1493817888" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="ip-192.168.24.6" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-192.168.24.6_last_0" operation_key="ip-192.168.24.6_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="36:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:7;36:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="16" rc-code="7" op-status="0" interval="0" last-run="1493817888" last-rc-change="1493817888" exec-time="49" queue-time="0" op-digest="22692fc1751093fc15ab6c0d90fafe22"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.3.15" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.3.15_last_0" operation_key="ip-172.17.3.15_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="40:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:7;40:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="32" rc-code="7" op-status="0" interval="0" last-run="1493817888" last-rc-change="1493817888" exec-time="45" queue-time="0" op-digest="27e0700bb641af6a5b0fea09d0ea2482"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.1.14" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.1.14_last_0" operation_key="ip-172.17.1.14_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="110:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;110:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="69" rc-code="0" op-status="0" interval="0" last-run="1493817963" last-rc-change="1493817963" exec-time="60" queue-time="0" op-digest="1fab2783a8d283e33a945588908e98a4"/>
+            <lrm_rsc_op id="ip-172.17.1.14_monitor_10000" operation_key="ip-172.17.1.14_monitor_10000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="111:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;111:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="72" rc-code="0" op-status="0" interval="10000" last-rc-change="1493817964" exec-time="36" queue-time="0" op-digest="19c32490a75539eb9cf2ca18727e305e"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.1.17" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.1.17_last_0" operation_key="ip-172.17.1.17_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="113:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;113:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="68" rc-code="0" op-status="0" interval="0" last-run="1493817963" last-rc-change="1493817963" exec-time="62" queue-time="0" op-digest="edc8fdae4cc326c15a779f36f28eb3f8"/>
+            <lrm_rsc_op id="ip-172.17.1.17_monitor_10000" operation_key="ip-172.17.1.17_monitor_10000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="114:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;114:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="73" rc-code="0" op-status="0" interval="10000" last-rc-change="1493817964" exec-time="36" queue-time="0" op-digest="637be44014a8de2a8162cb2b062f6955"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-525400bbf613" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400bbf613_last_0" operation_key="stonith-fence_ipmilan-525400bbf613_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="44:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:7;44:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="50" rc-code="7" op-status="0" interval="0" last-run="1493817889" last-rc-change="1493817889" exec-time="3" queue-time="0" op-digest="a1b3d562a7e722cbf686e1c2750888a3" op-secure-params=" passwd " op-secure-digest="2d0324390caa209c81283f07749d6dae"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-5254005bdbb5" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-5254005bdbb5_last_0" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="148:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;148:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="65" rc-code="0" op-status="0" interval="0" last-run="1493817961" last-rc-change="1493817961" exec-time="79" queue-time="0" op-digest="25087bde0e53bf4f4e4efb2b0bd9d0de" op-secure-params=" passwd " op-secure-digest="ecf31bd4bca13bb934be683ab04ee8cf"/>
+            <lrm_rsc_op id="stonith-fence_ipmilan-5254005bdbb5_monitor_60000" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="149:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;149:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="66" rc-code="0" op-status="0" interval="60000" last-rc-change="1493817963" exec-time="80" queue-time="0" op-digest="e8a37549d88ca88c76d297b973759a8d" op-secure-params=" passwd " op-secure-digest="ecf31bd4bca13bb934be683ab04ee8cf"/>
+          </lrm_resource>
+          <lrm_resource id="redis" type="redis" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="redis_last_0" operation_key="redis_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="95:5:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;95:5:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="55" rc-code="0" op-status="0" interval="0" last-run="1493817890" last-rc-change="1493817890" exec-time="2553" queue-time="0" op-digest="a5b2a4f5c557278af14d6cbffc5a229d" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+            <lrm_rsc_op id="redis_monitor_45000" operation_key="redis_monitor_45000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="73:6:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;73:6:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="62" rc-code="0" op-status="0" interval="45000" last-rc-change="1493817892" exec-time="124" queue-time="135" op-digest="992feffd37882eb5ce9bfc847b2fa75e" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+            <lrm_rsc_op id="redis_monitor_60000" operation_key="redis_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="74:6:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;74:6:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="61" rc-code="0" op-status="0" interval="60000" last-rc-change="1493817892" exec-time="135" queue-time="0" op-digest="992feffd37882eb5ce9bfc847b2fa75e" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+          </lrm_resource>
+          <lrm_resource id="galera-0" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="galera-0_last_0" operation_key="galera-0_migrate_from_0" operation="migrate_from" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="48:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;48:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="8" rc-code="0" op-status="0" interval="0" last-run="1493817961" last-rc-change="1493817961" exec-time="0" queue-time="0" migrate_source="controller-2" migrate_target="controller-1" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="galera-0_monitor_20000" operation_key="galera-0_monitor_20000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="38:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;38:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="11" rc-code="0" op-status="0" interval="20000" last-rc-change="1493817963" exec-time="0" queue-time="0" op-digest="6e5bb737f46c381d8a46fb4162afd9e0"/>
+          </lrm_resource>
+          <lrm_resource id="galera-1" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="galera-1_last_0" operation_key="galera-1_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="33:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:7;33:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="5" rc-code="7" op-status="0" interval="0" last-run="1493817888" last-rc-change="1493817888" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="galera-2" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="galera-2_last_0" operation_key="galera-2_migrate_from_0" operation="migrate_from" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="55:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;55:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="9" rc-code="0" op-status="0" interval="0" last-run="1493817961" last-rc-change="1493817961" exec-time="0" queue-time="0" migrate_source="controller-2" migrate_target="controller-1" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="galera-2_monitor_20000" operation_key="galera-2_monitor_20000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="44:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;44:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="12" rc-code="0" op-status="0" interval="20000" last-rc-change="1493817963" exec-time="0" queue-time="0" op-digest="6e5bb737f46c381d8a46fb4162afd9e0"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-525400b4f6bd" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400b4f6bd_last_0" operation_key="stonith-fence_ipmilan-525400b4f6bd_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="45:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:7;45:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="54" rc-code="7" op-status="0" interval="0" last-run="1493817889" last-rc-change="1493817889" exec-time="0" queue-time="0" op-digest="190a5d7184e8c0736ea8d50b25d1896b" op-secure-params=" passwd " op-secure-digest="e710ff47e4fa69f83f5f46f9de9570b6"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+    <node_state id="1" uname="controller-0" crmd="online" crm-debug-origin="post_cache_update" in_ccm="true" join="member" expected="member">
+      <transient_attributes id="1">
+        <instance_attributes id="status-1">
+          <nvpair id="status-1-shutdown" name="shutdown" value="0"/>
+          <nvpair id="status-1-master-redis" name="master-redis" value="1"/>
+        </instance_attributes>
+      </transient_attributes>
+      <lrm id="1">
+        <lrm_resources>
+          <lrm_resource id="ip-10.0.0.102" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-10.0.0.102_last_0" operation_key="ip-10.0.0.102_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="119:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;119:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="143" rc-code="0" op-status="0" interval="0" last-run="1493817834" last-rc-change="1493817834" exec-time="497" queue-time="0" op-digest="194c484ea9d1eb9955c0cfdaf53ccdae"/>
+            <lrm_rsc_op id="ip-10.0.0.102_monitor_10000" operation_key="ip-10.0.0.102_monitor_10000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="120:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;120:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="147" rc-code="0" op-status="0" interval="10000" last-rc-change="1493817835" exec-time="48" queue-time="0" op-digest="83daeb09ea7f361d0c80eb34aaf106f9"/>
+          </lrm_resource>
+          <lrm_resource id="haproxy" type="haproxy" class="systemd">
+            <lrm_rsc_op id="haproxy_last_failure_0" operation_key="haproxy_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="15:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;15:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="114" rc-code="0" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="3" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="haproxy_last_0" operation_key="haproxy_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="15:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;15:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="114" rc-code="0" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="3" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="haproxy_monitor_60000" operation_key="haproxy_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="113:17:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;113:17:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="133" rc-code="0" op-status="0" interval="60000" last-rc-change="1493817765" exec-time="4" queue-time="0" op-digest="4811cef7f7f94e3a35a70be7916cb2fd"/>
+          </lrm_resource>
+          <lrm_resource id="openstack-cinder-volume" type="openstack-cinder-volume" class="systemd">
+            <lrm_rsc_op id="openstack-cinder-volume_last_0" operation_key="openstack-cinder-volume_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="119:23:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;119:23:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="150" rc-code="0" op-status="0" interval="0" last-run="1493817868" last-rc-change="1493817868" exec-time="2105" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="openstack-cinder-volume_monitor_60000" operation_key="openstack-cinder-volume_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="145:1:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;145:1:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-0" call-id="154" rc-code="0" op-status="0" interval="60000" last-rc-change="1493817878" exec-time="3" queue-time="1" op-digest="4811cef7f7f94e3a35a70be7916cb2fd"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.4.11" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.4.11_last_0" operation_key="ip-172.17.4.11_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="14:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:7;14:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="109" rc-code="7" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="66" queue-time="0" op-digest="fe27c3edbb73480aff571d34c88b21a7"/>
+          </lrm_resource>
+          <lrm_resource id="messaging-0" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="messaging-0_last_0" operation_key="messaging-0_migrate_from_0" operation="migrate_from" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="36:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;36:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="13" rc-code="0" op-status="0" interval="0" last-run="1493817832" last-rc-change="1493817832" exec-time="0" queue-time="0" migrate_source="controller-1" migrate_target="controller-0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="messaging-0_monitor_20000" operation_key="messaging-0_monitor_20000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="34:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;34:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="15" rc-code="0" op-status="0" interval="20000" last-rc-change="1493817832" exec-time="0" queue-time="0" op-digest="6e5bb737f46c381d8a46fb4162afd9e0"/>
+          </lrm_resource>
+          <lrm_resource id="messaging-1" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="messaging-1_last_0" operation_key="messaging-1_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="3:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:7;3:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="8" rc-code="7" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="messaging-2" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="messaging-2_last_0" operation_key="messaging-2_migrate_from_0" operation="migrate_from" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="43:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;43:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-0" call-id="17" rc-code="0" op-status="0" interval="0" last-run="1493817962" last-rc-change="1493817962" exec-time="0" queue-time="0" migrate_source="controller-2" migrate_target="controller-0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="messaging-2_monitor_20000" operation_key="messaging-2_monitor_20000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="41:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;41:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-0" call-id="18" rc-code="0" op-status="0" interval="20000" last-rc-change="1493817963" exec-time="0" queue-time="0" op-digest="6e5bb737f46c381d8a46fb4162afd9e0"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.1.14" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.1.14_last_0" operation_key="ip-172.17.1.14_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="11:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:7;11:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="97" rc-code="7" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="60" queue-time="0" op-digest="1fab2783a8d283e33a945588908e98a4"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-525400bbf613" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400bbf613_last_0" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="124:17:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;124:17:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="134" rc-code="0" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="83" queue-time="0" op-digest="a1b3d562a7e722cbf686e1c2750888a3" op-secure-params=" passwd " op-secure-digest="2d0324390caa209c81283f07749d6dae"/>
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400bbf613_monitor_60000" operation_key="stonith-fence_ipmilan-525400bbf613_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="129:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;129:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="136" rc-code="0" op-status="0" interval="60000" last-rc-change="1493817768" exec-time="68" queue-time="0" op-digest="31be355d25ac30183b5d304f3275ec16" op-secure-params=" passwd " op-secure-digest="2d0324390caa209c81283f07749d6dae"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.1.17" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.1.17_last_0" operation_key="ip-172.17.1.17_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="12:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:7;12:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="101" rc-code="7" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="68" queue-time="0" op-digest="edc8fdae4cc326c15a779f36f28eb3f8"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-5254005bdbb5" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-5254005bdbb5_last_0" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="19:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:7;19:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="130" rc-code="7" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="0" queue-time="0" op-digest="25087bde0e53bf4f4e4efb2b0bd9d0de" op-secure-params=" passwd " op-secure-digest="ecf31bd4bca13bb934be683ab04ee8cf"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.3.15" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.3.15_last_0" operation_key="ip-172.17.3.15_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="126:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;126:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="141" rc-code="0" op-status="0" interval="0" last-run="1493817834" last-rc-change="1493817834" exec-time="66" queue-time="0" op-digest="27e0700bb641af6a5b0fea09d0ea2482"/>
+            <lrm_rsc_op id="ip-172.17.3.15_monitor_10000" operation_key="ip-172.17.3.15_monitor_10000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="127:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;127:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="144" rc-code="0" op-status="0" interval="10000" last-rc-change="1493817834" exec-time="428" queue-time="0" op-digest="9f5ae0b4f77392ad67e6a430d3259ec4"/>
+          </lrm_resource>
+          <lrm_resource id="ip-192.168.24.6" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-192.168.24.6_last_0" operation_key="ip-192.168.24.6_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="116:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;116:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="142" rc-code="0" op-status="0" interval="0" last-run="1493817834" last-rc-change="1493817834" exec-time="498" queue-time="0" op-digest="22692fc1751093fc15ab6c0d90fafe22"/>
+            <lrm_rsc_op id="ip-192.168.24.6_monitor_10000" operation_key="ip-192.168.24.6_monitor_10000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="117:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;117:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="146" rc-code="0" op-status="0" interval="10000" last-rc-change="1493817835" exec-time="38" queue-time="0" op-digest="53892658d5fe65d671f4c791888c8c7c"/>
+          </lrm_resource>
+          <lrm_resource id="redis" type="redis" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="redis_last_failure_0" operation_key="redis_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="8:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;8:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="85" rc-code="0" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="171" queue-time="0" op-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+            <lrm_rsc_op id="redis_last_0" operation_key="redis_promote_0" operation="promote" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="71:23:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;71:23:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="152" rc-code="0" op-status="0" interval="0" last-run="1493817868" last-rc-change="1493817868" exec-time="255" queue-time="0" op-digest="a5b2a4f5c557278af14d6cbffc5a229d" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+            <lrm_rsc_op id="redis_monitor_20000" operation_key="redis_monitor_20000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="74:4:8:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:8;74:4:8:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-0" call-id="159" rc-code="8" op-status="0" interval="20000" last-rc-change="1493817884" exec-time="147" queue-time="0" op-digest="992feffd37882eb5ce9bfc847b2fa75e" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+          </lrm_resource>
+          <lrm_resource id="galera-0" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="galera-0_last_0" operation_key="galera-0_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="5:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:7;5:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="10" rc-code="7" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="galera-1" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="galera-1_last_0" operation_key="galera-1_migrate_from_0" operation="migrate_from" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="50:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;50:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="14" rc-code="0" op-status="0" interval="0" last-run="1493817832" last-rc-change="1493817832" exec-time="0" queue-time="0" migrate_source="controller-1" migrate_target="controller-0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="galera-1_monitor_20000" operation_key="galera-1_monitor_20000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="48:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;48:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="16" rc-code="0" op-status="0" interval="20000" last-rc-change="1493817832" exec-time="0" queue-time="0" op-digest="6e5bb737f46c381d8a46fb4162afd9e0"/>
+          </lrm_resource>
+          <lrm_resource id="galera-2" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="galera-2_last_0" operation_key="galera-2_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="7:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:7;7:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="12" rc-code="7" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-525400b4f6bd" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400b4f6bd_last_0" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="126:17:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;126:17:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="135" rc-code="0" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="80" queue-time="0" op-digest="190a5d7184e8c0736ea8d50b25d1896b" op-secure-params=" passwd " op-secure-digest="e710ff47e4fa69f83f5f46f9de9570b6"/>
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400b4f6bd_monitor_60000" operation_key="stonith-fence_ipmilan-525400b4f6bd_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="132:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;132:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="137" rc-code="0" op-status="0" interval="60000" last-rc-change="1493817768" exec-time="69" queue-time="0" op-digest="08b6ad9edc64306555c732c45bcf4995" op-secure-params=" passwd " op-secure-digest="e710ff47e4fa69f83f5f46f9de9570b6"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+    <node_state id="galera-1" remote_node="true" uname="galera-1" in_ccm="true" crm-debug-origin="post_cache_update">
+      <transient_attributes id="galera-1">
+        <instance_attributes id="status-galera-1">
+          <nvpair id="status-galera-1-last-failure-galera" name="last-failure-galera" value="1493336863"/>
+          <nvpair id="status-galera-1-master-galera" name="master-galera" value="100"/>
+        </instance_attributes>
+      </transient_attributes>
+      <lrm id="galera-1">
+        <lrm_resources>
+          <lrm_resource id="galera" type="galera" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="galera_last_failure_0" operation_key="galera_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="3:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:8;3:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-1" call-id="34745" rc-code="8" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="463" queue-time="0" op-digest="e773372fde8a6c242c1993820114d5c3"/>
+            <lrm_rsc_op id="galera_last_0" operation_key="galera_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="3:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:8;3:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-1" call-id="34745" rc-code="8" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="463" queue-time="0" op-digest="e773372fde8a6c242c1993820114d5c3" op-secure-params=" user " op-secure-digest="e773372fde8a6c242c1993820114d5c3"/>
+            <lrm_rsc_op id="galera_monitor_10000" operation_key="galera_monitor_10000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="52:18:8:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:8;52:18:8:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-1" call-id="34756" rc-code="8" op-status="0" interval="10000" last-rc-change="1493817768" exec-time="65" queue-time="0" op-digest="20ec44e3280211739f6ba9523159629e" op-secure-params=" user " op-secure-digest="e773372fde8a6c242c1993820114d5c3"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+    <node_state id="galera-2" remote_node="true" uname="galera-2" crm-debug-origin="post_cache_update" in_ccm="true">
+      <transient_attributes id="galera-2">
+        <instance_attributes id="status-galera-2">
+          <nvpair id="status-galera-2-last-failure-galera" name="last-failure-galera" value="1493172798"/>
+          <nvpair id="status-galera-2-master-galera" name="master-galera" value="100"/>
+        </instance_attributes>
+      </transient_attributes>
+      <lrm id="galera-2">
+        <lrm_resources>
+          <lrm_resource id="galera" type="galera" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="galera_last_0" operation_key="galera_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="4:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:7;4:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-2" call-id="34779" rc-code="7" op-status="0" interval="0" last-run="1493817766" last-rc-change="1493817766" exec-time="1419" queue-time="0" op-digest="e773372fde8a6c242c1993820114d5c3" op-secure-params=" user " op-secure-digest="e773372fde8a6c242c1993820114d5c3"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+    <node_state id="galera-0" remote_node="true" uname="galera-0" crm-debug-origin="post_cache_update" in_ccm="true">
+      <transient_attributes id="galera-0">
+        <instance_attributes id="status-galera-0">
+          <nvpair id="status-galera-0-last-failure-galera" name="last-failure-galera" value="1493172797"/>
+          <nvpair id="status-galera-0-master-galera" name="master-galera" value="100"/>
+        </instance_attributes>
+      </transient_attributes>
+      <lrm id="galera-0">
+        <lrm_resources>
+          <lrm_resource id="galera" type="galera" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="galera_last_failure_0" operation_key="galera_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="2:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:8;2:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-2" call-id="35583" rc-code="8" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="1739" queue-time="0" op-digest="e773372fde8a6c242c1993820114d5c3"/>
+            <lrm_rsc_op id="galera_last_0" operation_key="galera_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="2:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:8;2:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-2" call-id="35583" rc-code="8" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="1739" queue-time="0" op-digest="e773372fde8a6c242c1993820114d5c3" op-secure-params=" user " op-secure-digest="e773372fde8a6c242c1993820114d5c3"/>
+            <lrm_rsc_op id="galera_monitor_10000" operation_key="galera_monitor_10000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="62:18:8:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:8;62:18:8:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-2" call-id="35593" rc-code="8" op-status="0" interval="10000" last-rc-change="1493817768" exec-time="60" queue-time="0" op-digest="20ec44e3280211739f6ba9523159629e" op-secure-params=" user " op-secure-digest="e773372fde8a6c242c1993820114d5c3"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+    <node_state id="3" uname="controller-2" in_ccm="true" crmd="online" crm-debug-origin="post_cache_update" join="member" expected="member">
+      <lrm id="3">
+        <lrm_resources>
+          <lrm_resource id="messaging-0" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="messaging-0_last_0" operation_key="messaging-0_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="29:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;29:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="1" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="messaging-1" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="messaging-1_last_0" operation_key="messaging-1_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="30:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;30:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="2" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="messaging-2" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="messaging-2_last_0" operation_key="messaging-2_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="31:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;31:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="3" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="galera-0" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="galera-0_last_0" operation_key="galera-0_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="32:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;32:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="4" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="galera-1" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="galera-1_last_0" operation_key="galera-1_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="33:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;33:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="5" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="galera-2" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="galera-2_last_0" operation_key="galera-2_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="34:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;34:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="6" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="haproxy" type="haproxy" class="systemd">
+            <lrm_rsc_op id="haproxy_last_0" operation_key="haproxy_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="138:1:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:0;138:1:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="46" rc-code="0" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="2103" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="haproxy_monitor_60000" operation_key="haproxy_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="123:2:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:0;123:2:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="63" rc-code="0" op-status="0" interval="60000" last-rc-change="1493817975" exec-time="3" queue-time="0" op-digest="4811cef7f7f94e3a35a70be7916cb2fd"/>
+          </lrm_resource>
+          <lrm_resource id="openstack-cinder-volume" type="openstack-cinder-volume" class="systemd">
+            <lrm_rsc_op id="openstack-cinder-volume_last_0" operation_key="openstack-cinder-volume_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="43:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;43:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="45" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="2" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="ip-192.168.24.6" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-192.168.24.6_last_0" operation_key="ip-192.168.24.6_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="36:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;36:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="16" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="42" queue-time="0" op-digest="22692fc1751093fc15ab6c0d90fafe22"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.1.14" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.1.14_last_0" operation_key="ip-172.17.1.14_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="38:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;38:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="24" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="52" queue-time="0" op-digest="1fab2783a8d283e33a945588908e98a4"/>
+          </lrm_resource>
+          <lrm_resource id="ip-10.0.0.102" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-10.0.0.102_last_0" operation_key="ip-10.0.0.102_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="37:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;37:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="20" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="59" queue-time="0" op-digest="194c484ea9d1eb9955c0cfdaf53ccdae"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.3.15" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.3.15_last_0" operation_key="ip-172.17.3.15_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="40:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;40:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="32" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="52" queue-time="0" op-digest="27e0700bb641af6a5b0fea09d0ea2482"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.4.11" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.4.11_last_0" operation_key="ip-172.17.4.11_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="41:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;41:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="36" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="50" queue-time="0" op-digest="fe27c3edbb73480aff571d34c88b21a7"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.1.17" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.1.17_last_0" operation_key="ip-172.17.1.17_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="39:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;39:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="28" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="55" queue-time="0" op-digest="edc8fdae4cc326c15a779f36f28eb3f8"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-525400bbf613" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400bbf613_last_0" operation_key="stonith-fence_ipmilan-525400bbf613_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="44:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;44:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="50" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="2" queue-time="0" op-digest="a1b3d562a7e722cbf686e1c2750888a3" op-secure-params=" passwd " op-secure-digest="2d0324390caa209c81283f07749d6dae"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-525400b4f6bd" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400b4f6bd_last_0" operation_key="stonith-fence_ipmilan-525400b4f6bd_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="45:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;45:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="54" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="0" queue-time="0" op-digest="190a5d7184e8c0736ea8d50b25d1896b" op-secure-params=" passwd " op-secure-digest="e710ff47e4fa69f83f5f46f9de9570b6"/>
+          </lrm_resource>
+          <lrm_resource id="redis" type="redis" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="redis_last_0" operation_key="redis_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="95:1:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:0;95:1:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="59" rc-code="0" op-status="0" interval="0" last-run="1493817972" last-rc-change="1493817972" exec-time="2559" queue-time="0" op-digest="a5b2a4f5c557278af14d6cbffc5a229d" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+            <lrm_rsc_op id="redis_monitor_60000" operation_key="redis_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="80:2:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:0;80:2:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="61" rc-code="0" op-status="0" interval="60000" last-rc-change="1493817975" exec-time="121" queue-time="0" op-digest="992feffd37882eb5ce9bfc847b2fa75e" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+            <lrm_rsc_op id="redis_monitor_45000" operation_key="redis_monitor_45000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="79:2:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:0;79:2:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="62" rc-code="0" op-status="0" interval="45000" last-rc-change="1493817975" exec-time="117" queue-time="120" op-digest="992feffd37882eb5ce9bfc847b2fa75e" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-5254005bdbb5" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-5254005bdbb5_last_0" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="46:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;46:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="58" rc-code="7" op-status="0" interval="0" last-run="1493817972" last-rc-change="1493817972" exec-time="0" queue-time="1" op-digest="25087bde0e53bf4f4e4efb2b0bd9d0de" op-secure-params=" passwd " op-secure-digest="ecf31bd4bca13bb934be683ab04ee8cf"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+      <transient_attributes id="3">
+        <instance_attributes id="status-3">
+          <nvpair id="status-3-shutdown" name="shutdown" value="0"/>
+          <nvpair id="status-3-master-redis" name="master-redis" value="1"/>
+        </instance_attributes>
+      </transient_attributes>
+    </node_state>
+    <node_state id="messaging-2" remote_node="true" uname="messaging-2" crm-debug-origin="post_cache_update" in_ccm="true">
+      <transient_attributes id="messaging-2">
+        <instance_attributes id="status-messaging-2">
+          <nvpair id="status-messaging-2-rmq-node-attr-rabbitmq" name="rmq-node-attr-rabbitmq" value="rabbit@messaging-2"/>
+          <nvpair id="status-messaging-2-last-failure-rabbitmq" name="last-failure-rabbitmq" value="1493172992"/>
+        </instance_attributes>
+      </transient_attributes>
+      <lrm id="messaging-2">
+        <lrm_resources>
+          <lrm_resource id="rabbitmq" type="rabbitmq-cluster" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="rabbitmq_last_failure_0" operation_key="rabbitmq_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="7:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;7:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-2" call-id="1041497" rc-code="0" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="3053" queue-time="0" op-digest="497e3cffa03bc3ed4830dc4b0ba109ae"/>
+            <lrm_rsc_op id="rabbitmq_last_0" operation_key="rabbitmq_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="7:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;7:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-2" call-id="1041497" rc-code="0" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="3053" queue-time="0" op-digest="497e3cffa03bc3ed4830dc4b0ba109ae"/>
+            <lrm_rsc_op id="rabbitmq_monitor_10000" operation_key="rabbitmq_monitor_10000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="37:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;37:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-2" call-id="1041515" rc-code="0" op-status="0" interval="10000" last-rc-change="1493817768" exec-time="3053" queue-time="0" op-digest="41cce5252b1fb189afe9efa00fb5e2cb"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+    <node_state id="messaging-0" remote_node="true" uname="messaging-0" in_ccm="true" crm-debug-origin="post_cache_update">
+      <transient_attributes id="messaging-0">
+        <instance_attributes id="status-messaging-0">
+          <nvpair id="status-messaging-0-rmq-node-attr-rabbitmq" name="rmq-node-attr-rabbitmq" value="rabbit@messaging-0"/>
+          <nvpair id="status-messaging-0-last-failure-rabbitmq" name="last-failure-rabbitmq" value="1493330172"/>
+        </instance_attributes>
+      </transient_attributes>
+      <lrm id="messaging-0">
+        <lrm_resources>
+          <lrm_resource id="rabbitmq" type="rabbitmq-cluster" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="rabbitmq_last_failure_0" operation_key="rabbitmq_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="5:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;5:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-1" call-id="875374" rc-code="0" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="3026" queue-time="0" op-digest="497e3cffa03bc3ed4830dc4b0ba109ae"/>
+            <lrm_rsc_op id="rabbitmq_last_0" operation_key="rabbitmq_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="5:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;5:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-1" call-id="875374" rc-code="0" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="3026" queue-time="0" op-digest="497e3cffa03bc3ed4830dc4b0ba109ae"/>
+            <lrm_rsc_op id="rabbitmq_monitor_10000" operation_key="rabbitmq_monitor_10000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="40:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;40:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-1" call-id="875393" rc-code="0" op-status="0" interval="10000" last-rc-change="1493817768" exec-time="2985" queue-time="0" op-digest="41cce5252b1fb189afe9efa00fb5e2cb"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+    <node_state id="messaging-1" remote_node="true" uname="messaging-1" in_ccm="true" crm-debug-origin="post_cache_update">
+      <transient_attributes id="messaging-1">
+        <instance_attributes id="status-messaging-1">
+          <nvpair id="status-messaging-1-rmq-node-attr-rabbitmq" name="rmq-node-attr-rabbitmq" value="rabbit@messaging-1"/>
+          <nvpair id="status-messaging-1-last-failure-rabbitmq" name="last-failure-rabbitmq" value="1493336946"/>
+        </instance_attributes>
+      </transient_attributes>
+      <lrm id="messaging-1">
+        <lrm_resources>
+          <lrm_resource id="rabbitmq" type="rabbitmq-cluster" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="rabbitmq_last_failure_0" operation_key="rabbitmq_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="6:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;6:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-1" call-id="251547" rc-code="0" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="3074" queue-time="0" op-digest="497e3cffa03bc3ed4830dc4b0ba109ae"/>
+            <lrm_rsc_op id="rabbitmq_last_0" operation_key="rabbitmq_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="6:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;6:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-1" call-id="251547" rc-code="0" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="3074" queue-time="0" op-digest="497e3cffa03bc3ed4830dc4b0ba109ae"/>
+            <lrm_rsc_op id="rabbitmq_monitor_10000" operation_key="rabbitmq_monitor_10000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="43:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;43:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-1" call-id="251566" rc-code="0" op-status="0" interval="10000" last-rc-change="1493817768" exec-time="3025" queue-time="0" op-digest="41cce5252b1fb189afe9efa00fb5e2cb"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+  </status>
+</cib>
diff --git a/pengine/test10/remote-recover-unknown.dot b/pengine/test10/remote-recover-unknown.dot
new file mode 100644
index 0000000..a8b4e18
--- /dev/null
+++ b/pengine/test10/remote-recover-unknown.dot
@@ -0,0 +1,146 @@
+digraph "g" {
+"all_stopped" -> "stonith-fence_ipmilan-5254005bdbb5_start_0 controller-2" [ style = bold]
+"all_stopped" -> "stonith-fence_ipmilan-525400b4f6bd_start_0 controller-0" [ style = bold]
+"all_stopped" -> "stonith-fence_ipmilan-525400bbf613_start_0 controller-0" [ style = bold]
+"all_stopped" [ style=bold color="green" fontcolor="orange"]
+"galera-0_monitor_20000 controller-2" [ style=bold color="green" fontcolor="black"]
+"galera-0_start_0 controller-2" -> "galera-0_monitor_20000 controller-2" [ style = bold]
+"galera-0_start_0 controller-2" -> "galera_monitor_10000 galera-0" [ style = bold]
+"galera-0_start_0 controller-2" [ style=bold color="green" fontcolor="black"]
+"galera-0_stop_0 controller-1" -> "all_stopped" [ style = bold]
+"galera-0_stop_0 controller-1" -> "galera-0_start_0 controller-2" [ style = bold]
+"galera-0_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
+"galera-2_stop_0 controller-1" -> "all_stopped" [ style = bold]
+"galera-2_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
+"galera_monitor_0 galera-2" [ style=dashed color="red" fontcolor="black"]
+"galera_monitor_10000 galera-0" [ style=bold color="green" fontcolor="black"]
+"haproxy-clone_stop_0" -> "haproxy-clone_stopped_0" [ style = bold]
+"haproxy-clone_stop_0" -> "haproxy_stop_0 controller-1" [ style = bold]
+"haproxy-clone_stop_0" [ style=bold color="green" fontcolor="orange"]
+"haproxy-clone_stopped_0" -> "ip-172.17.1.14_stop_0 controller-1" [ style = bold]
+"haproxy-clone_stopped_0" -> "ip-172.17.1.17_stop_0 controller-1" [ style = bold]
+"haproxy-clone_stopped_0" -> "ip-172.17.4.11_stop_0 controller-1" [ style = bold]
+"haproxy-clone_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"haproxy_stop_0 controller-1" -> "all_stopped" [ style = bold]
+"haproxy_stop_0 controller-1" -> "haproxy-clone_stopped_0" [ style = bold]
+"haproxy_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
+"ip-172.17.1.14_monitor_10000 controller-2" [ style=bold color="green" fontcolor="black"]
+"ip-172.17.1.14_start_0 controller-2" -> "ip-172.17.1.14_monitor_10000 controller-2" [ style = bold]
+"ip-172.17.1.14_start_0 controller-2" [ style=bold color="green" fontcolor="black"]
+"ip-172.17.1.14_stop_0 controller-1" -> "all_stopped" [ style = bold]
+"ip-172.17.1.14_stop_0 controller-1" -> "ip-172.17.1.14_start_0 controller-2" [ style = bold]
+"ip-172.17.1.14_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
+"ip-172.17.1.17_monitor_10000 controller-2" [ style=bold color="green" fontcolor="black"]
+"ip-172.17.1.17_start_0 controller-2" -> "ip-172.17.1.17_monitor_10000 controller-2" [ style = bold]
+"ip-172.17.1.17_start_0 controller-2" [ style=bold color="green" fontcolor="black"]
+"ip-172.17.1.17_stop_0 controller-1" -> "all_stopped" [ style = bold]
+"ip-172.17.1.17_stop_0 controller-1" -> "ip-172.17.1.17_start_0 controller-2" [ style = bold]
+"ip-172.17.1.17_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
+"ip-172.17.4.11_monitor_10000 controller-2" [ style=bold color="green" fontcolor="black"]
+"ip-172.17.4.11_start_0 controller-2" -> "ip-172.17.4.11_monitor_10000 controller-2" [ style = bold]
+"ip-172.17.4.11_start_0 controller-2" [ style=bold color="green" fontcolor="black"]
+"ip-172.17.4.11_stop_0 controller-1" -> "all_stopped" [ style = bold]
+"ip-172.17.4.11_stop_0 controller-1" -> "ip-172.17.4.11_start_0 controller-2" [ style = bold]
+"ip-172.17.4.11_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
+"messaging-1_stop_0 controller-1" -> "all_stopped" [ style = bold]
+"messaging-1_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-clone_stop_0" -> "rabbitmq-clone_stopped_0" [ style = bold]
+"rabbitmq-clone_stop_0" -> "rabbitmq_stop_0 messaging-1" [ style = bold]
+"rabbitmq-clone_stop_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-clone_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq_confirmed-post_notify_stonith_0" -> "all_stopped" [ style = bold]
+"rabbitmq_confirmed-post_notify_stonith_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq_post_notify_stonith_0 messaging-0" -> "rabbitmq_confirmed-post_notify_stonith_0" [ style = bold]
+"rabbitmq_post_notify_stonith_0 messaging-0" [ style=bold color="green" fontcolor="black"]
+"rabbitmq_post_notify_stonith_0 messaging-2" -> "rabbitmq_confirmed-post_notify_stonith_0" [ style = bold]
+"rabbitmq_post_notify_stonith_0 messaging-2" [ style=bold color="green" fontcolor="black"]
+"rabbitmq_post_notify_stonith_0" -> "rabbitmq_confirmed-post_notify_stonith_0" [ style = bold]
+"rabbitmq_post_notify_stonith_0" -> "rabbitmq_post_notify_stonith_0 messaging-0" [ style = bold]
+"rabbitmq_post_notify_stonith_0" -> "rabbitmq_post_notify_stonith_0 messaging-2" [ style = bold]
+"rabbitmq_post_notify_stonith_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq_stop_0 messaging-1" -> "all_stopped" [ style = bold]
+"rabbitmq_stop_0 messaging-1" -> "messaging-1_stop_0 controller-1" [ style = bold]
+"rabbitmq_stop_0 messaging-1" -> "rabbitmq-clone_stopped_0" [ style = bold]
+"rabbitmq_stop_0 messaging-1" [ style=bold color="green" fontcolor="orange"]
+"redis-master_confirmed-post_notify_stopped_0" -> "all_stopped" [ style = bold]
+"redis-master_confirmed-post_notify_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"redis-master_confirmed-pre_notify_stop_0" -> "redis-master_post_notify_stopped_0" [ style = bold]
+"redis-master_confirmed-pre_notify_stop_0" -> "redis-master_stop_0" [ style = bold]
+"redis-master_confirmed-pre_notify_stop_0" [ style=bold color="green" fontcolor="orange"]
+"redis-master_post_notify_stopped_0" -> "redis-master_confirmed-post_notify_stopped_0" [ style = bold]
+"redis-master_post_notify_stopped_0" -> "redis_post_notify_stonith_0 controller-0" [ style = bold]
+"redis-master_post_notify_stopped_0" -> "redis_post_notify_stonith_0 controller-2" [ style = bold]
+"redis-master_post_notify_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"redis-master_pre_notify_stop_0" -> "redis-master_confirmed-pre_notify_stop_0" [ style = bold]
+"redis-master_pre_notify_stop_0" -> "redis_pre_notify_stop_0 controller-0" [ style = bold]
+"redis-master_pre_notify_stop_0" -> "redis_pre_notify_stop_0 controller-2" [ style = bold]
+"redis-master_pre_notify_stop_0" [ style=bold color="green" fontcolor="orange"]
+"redis-master_stop_0" -> "redis-master_stopped_0" [ style = bold]
+"redis-master_stop_0" -> "redis_stop_0 controller-1" [ style = bold]
+"redis-master_stop_0" [ style=bold color="green" fontcolor="orange"]
+"redis-master_stopped_0" -> "redis-master_post_notify_stopped_0" [ style = bold]
+"redis-master_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"redis_confirmed-post_notify_stonith_0" -> "all_stopped" [ style = bold]
+"redis_confirmed-post_notify_stonith_0" [ style=bold color="green" fontcolor="orange"]
+"redis_post_notify_stonith_0 controller-0" -> "redis-master_confirmed-post_notify_stopped_0" [ style = bold]
+"redis_post_notify_stonith_0 controller-0" -> "redis_confirmed-post_notify_stonith_0" [ style = bold]
+"redis_post_notify_stonith_0 controller-0" [ style=bold color="green" fontcolor="black"]
+"redis_post_notify_stonith_0 controller-2" -> "redis-master_confirmed-post_notify_stopped_0" [ style = bold]
+"redis_post_notify_stonith_0 controller-2" -> "redis_confirmed-post_notify_stonith_0" [ style = bold]
+"redis_post_notify_stonith_0 controller-2" [ style=bold color="green" fontcolor="black"]
+"redis_post_notify_stonith_0" -> "redis_confirmed-post_notify_stonith_0" [ style = bold]
+"redis_post_notify_stonith_0" -> "redis_post_notify_stonith_0 controller-0" [ style = bold]
+"redis_post_notify_stonith_0" -> "redis_post_notify_stonith_0 controller-2" [ style = bold]
+"redis_post_notify_stonith_0" [ style=bold color="green" fontcolor="orange"]
+"redis_pre_notify_stop_0 controller-0" -> "redis-master_confirmed-pre_notify_stop_0" [ style = bold]
+"redis_pre_notify_stop_0 controller-0" [ style=bold color="green" fontcolor="black"]
+"redis_pre_notify_stop_0 controller-2" -> "redis-master_confirmed-pre_notify_stop_0" [ style = bold]
+"redis_pre_notify_stop_0 controller-2" [ style=bold color="green" fontcolor="black"]
+"redis_stop_0 controller-1" -> "all_stopped" [ style = bold]
+"redis_stop_0 controller-1" -> "redis-master_stopped_0" [ style = bold]
+"redis_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
+"stonith 'reboot' controller-1" -> "galera-0_stop_0 controller-1" [ style = bold]
+"stonith 'reboot' controller-1" -> "galera-2_stop_0 controller-1" [ style = bold]
+"stonith 'reboot' controller-1" -> "haproxy-clone_stop_0" [ style = bold]
+"stonith 'reboot' controller-1" -> "haproxy_stop_0 controller-1" [ style = bold]
+"stonith 'reboot' controller-1" -> "ip-172.17.1.14_stop_0 controller-1" [ style = bold]
+"stonith 'reboot' controller-1" -> "ip-172.17.1.17_stop_0 controller-1" [ style = bold]
+"stonith 'reboot' controller-1" -> "ip-172.17.4.11_stop_0 controller-1" [ style = bold]
+"stonith 'reboot' controller-1" -> "messaging-1_stop_0 controller-1" [ style = bold]
+"stonith 'reboot' controller-1" -> "redis-master_stop_0" [ style = bold]
+"stonith 'reboot' controller-1" -> "redis_post_notify_stonith_0" [ style = bold]
+"stonith 'reboot' controller-1" -> "redis_stop_0 controller-1" [ style = bold]
+"stonith 'reboot' controller-1" -> "stonith 'reboot' galera-2" [ style = bold]
+"stonith 'reboot' controller-1" [ style=bold color="green" fontcolor="black"]
+"stonith 'reboot' galera-2" -> "stonith 'reboot' messaging-1" [ style = bold]
+"stonith 'reboot' galera-2" [ style=bold color="green" fontcolor="black"]
+"stonith 'reboot' messaging-1" -> "rabbitmq-clone_stop_0" [ style = bold]
+"stonith 'reboot' messaging-1" -> "rabbitmq_post_notify_stonith_0" [ style = bold]
+"stonith 'reboot' messaging-1" -> "rabbitmq_stop_0 messaging-1" [ style = bold]
+"stonith 'reboot' messaging-1" -> "stonith_complete" [ style = bold]
+"stonith 'reboot' messaging-1" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-5254005bdbb5_monitor_60000 controller-2" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-5254005bdbb5_start_0 controller-2" -> "stonith-fence_ipmilan-5254005bdbb5_monitor_60000 controller-2" [ style = bold]
+"stonith-fence_ipmilan-5254005bdbb5_start_0 controller-2" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-5254005bdbb5_stop_0 controller-1" -> "all_stopped" [ style = bold]
+"stonith-fence_ipmilan-5254005bdbb5_stop_0 controller-1" -> "stonith-fence_ipmilan-5254005bdbb5_start_0 controller-2" [ style = bold]
+"stonith-fence_ipmilan-5254005bdbb5_stop_0 controller-1" [ style=bold color="green" fontcolor="orange"]
+"stonith-fence_ipmilan-525400b4f6bd_monitor_60000 controller-0" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-525400b4f6bd_start_0 controller-0" -> "stonith-fence_ipmilan-525400b4f6bd_monitor_60000 controller-0" [ style = bold]
+"stonith-fence_ipmilan-525400b4f6bd_start_0 controller-0" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-525400b4f6bd_stop_0 controller-0" -> "all_stopped" [ style = bold]
+"stonith-fence_ipmilan-525400b4f6bd_stop_0 controller-0" -> "stonith-fence_ipmilan-525400b4f6bd_start_0 controller-0" [ style = bold]
+"stonith-fence_ipmilan-525400b4f6bd_stop_0 controller-0" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-525400bbf613_monitor_60000 controller-0" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-525400bbf613_start_0 controller-0" -> "stonith-fence_ipmilan-525400bbf613_monitor_60000 controller-0" [ style = bold]
+"stonith-fence_ipmilan-525400bbf613_start_0 controller-0" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-525400bbf613_stop_0 controller-0" -> "all_stopped" [ style = bold]
+"stonith-fence_ipmilan-525400bbf613_stop_0 controller-0" -> "stonith-fence_ipmilan-525400bbf613_start_0 controller-0" [ style = bold]
+"stonith-fence_ipmilan-525400bbf613_stop_0 controller-0" [ style=bold color="green" fontcolor="black"]
+"stonith_complete" -> "all_stopped" [ style = bold]
+"stonith_complete" -> "galera-0_start_0 controller-2" [ style = bold]
+"stonith_complete" -> "ip-172.17.1.14_start_0 controller-2" [ style = bold]
+"stonith_complete" -> "ip-172.17.1.17_start_0 controller-2" [ style = bold]
+"stonith_complete" -> "ip-172.17.4.11_start_0 controller-2" [ style = bold]
+"stonith_complete" [ style=bold color="green" fontcolor="orange"]
+}
diff --git a/pengine/test10/remote-recover-unknown.exp b/pengine/test10/remote-recover-unknown.exp
new file mode 100644
index 0000000..d63cf81
--- /dev/null
+++ b/pengine/test10/remote-recover-unknown.exp
@@ -0,0 +1,770 @@
+<transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
+  <synapse id="0">
+    <action_set>
+      <pseudo_event id="26" operation="stop" operation_key="messaging-1_stop_0">
+        <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
+      </trigger>
+      <trigger>
+        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="1">
+    <action_set>
+      <rsc_op id="31" operation="monitor" operation_key="galera-0_monitor_20000" on_node="controller-2" on_node_uuid="3">
+        <primitive id="galera-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_interval="20000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  reconnect_interval="60"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="30" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="2">
+    <action_set>
+      <rsc_op id="30" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="galera-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="60000"  reconnect_interval="60"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="29" operation="stop" operation_key="galera-0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="122" operation="stonith_complete" operation_key="stonith_complete"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="3">
+    <action_set>
+      <pseudo_event id="29" operation="stop" operation_key="galera-0_stop_0">
+        <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="4">
+    <action_set>
+      <pseudo_event id="34" operation="stop" operation_key="galera-2_stop_0">
+        <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  reconnect_interval="60"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="5" priority="1000000">
+    <action_set>
+      <rsc_op id="132" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stop_0" on_node="messaging-2" on_node_uuid="messaging-2" router_node="controller-0">
+        <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_stop_resource="rabbitmq:2" CRM_meta_notify_stop_uname="messaging-1" CRM_meta_notify_type="post" CRM_meta_on_node="messaging-2" CRM_meta_on_node_uuid="messaging-2" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="130" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stonith_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="6" priority="1000000">
+    <action_set>
+      <rsc_op id="133" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:1_post_notify_stop_0" on_node="messaging-0" on_node_uuid="messaging-0" router_node="controller-0">
+        <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_stop_resource="rabbitmq:2" CRM_meta_notify_stop_uname="messaging-1" CRM_meta_notify_type="post" CRM_meta_on_node="messaging-0" CRM_meta_on_node_uuid="messaging-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="130" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stonith_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="7" priority="1000000">
+    <action_set>
+      <pseudo_event id="131" operation="notified" operation_key="rabbitmq_notified_0" internal_operation_key="rabbitmq:2_confirmed-post_notify_stonith_0">
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="130" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stonith_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="132" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stop_0" on_node="messaging-2" on_node_uuid="messaging-2" router_node="controller-0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="133" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:1_post_notify_stop_0" on_node="messaging-0" on_node_uuid="messaging-0" router_node="controller-0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="8" priority="1000000">
+    <action_set>
+      <pseudo_event id="130" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stonith_0">
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="129" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="9">
+    <action_set>
+      <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0">
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_notify_stop_resource="rabbitmq:2" CRM_meta_notify_stop_uname="messaging-1" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="42" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
+      </trigger>
+      <trigger>
+        <crm_event id="129" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="10" priority="1000000">
+    <action_set>
+      <pseudo_event id="43" operation="stopped" operation_key="rabbitmq-clone_stopped_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="42" operation="stop" operation_key="rabbitmq-clone_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="11">
+    <action_set>
+      <pseudo_event id="42" operation="stop" operation_key="rabbitmq-clone_stop_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="129" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="12">
+    <action_set>
+      <rsc_op id="13" operation="monitor" operation_key="galera_monitor_10000" internal_operation_key="galera:1_monitor_10000" on_node="galera-0" on_node_uuid="galera-0" router_node="controller-2">
+        <primitive id="galera" long-id="galera:1" class="ocf" provider="heartbeat" type="galera"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-0" CRM_meta_on_node_uuid="galera-0" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384"  enable_creation="true" wsrep_cluster_address="gcomm://galera-0,galera-1,galera-2"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="30" operation="start" operation_key="galera-0_start_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="13" priority="1000000">
+    <action_set>
+      <pseudo_event id="125" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0">
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="124" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="127" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="14" priority="1000000">
+    <action_set>
+      <pseudo_event id="124" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0">
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="15">
+    <action_set>
+      <pseudo_event id="60" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0">
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="73" operation="stop" operation_key="redis-master_stop_0"/>
+      </trigger>
+      <trigger>
+        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="16">
+    <action_set>
+      <rsc_op id="196" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:1_pre_notify_stop_0" on_node="controller-0" on_node_uuid="1">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="pre" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="75" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="17" priority="1000000">
+    <action_set>
+      <rsc_op id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="post" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="77" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="124" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="18">
+    <action_set>
+      <rsc_op id="197" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:2_pre_notify_stop_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="pre" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="75" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="19" priority="1000000">
+    <action_set>
+      <rsc_op id="127" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="controller-1 controller-0 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2" CRM_meta_notify_available_uname="controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:3 redis:4 redis:5 redis:6 redis:7 redis:8" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:1" CRM_meta_notify_master_uname="controller-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource="redis:0 redis:2" CRM_meta_notify_slave_uname="controller-1 controller-2" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="controller-1" CRM_meta_notify_type="post" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="77" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="124" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="20" priority="1000000">
+    <action_set>
+      <pseudo_event id="78" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="77" operation="notify" operation_key="redis-master_post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="126" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="127" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="21" priority="1000000">
+    <action_set>
+      <pseudo_event id="77" operation="notify" operation_key="redis-master_post_notify_stopped_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="74" operation="stopped" operation_key="redis-master_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="76" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="22">
+    <action_set>
+      <pseudo_event id="76" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="75" operation="notify" operation_key="redis-master_pre_notify_stop_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="196" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:1_pre_notify_stop_0" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="197" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:2_pre_notify_stop_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="23">
+    <action_set>
+      <pseudo_event id="75" operation="notify" operation_key="redis-master_pre_notify_stop_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="24" priority="1000000">
+    <action_set>
+      <pseudo_event id="74" operation="stopped" operation_key="redis-master_stopped_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="60" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="73" operation="stop" operation_key="redis-master_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="25">
+    <action_set>
+      <pseudo_event id="73" operation="stop" operation_key="redis-master_stop_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="76" operation="notified" operation_key="redis-master_confirmed-pre_notify_stop_0"/>
+      </trigger>
+      <trigger>
+        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="26">
+    <action_set>
+      <rsc_op id="97" operation="monitor" operation_key="ip-172.17.1.14_monitor_10000" on_node="controller-2" on_node_uuid="3">
+        <primitive id="ip-172.17.1.14" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="96" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="27">
+    <action_set>
+      <rsc_op id="96" operation="start" operation_key="ip-172.17.1.14_start_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="ip-172.17.1.14" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="95" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="122" operation="stonith_complete" operation_key="stonith_complete"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="28">
+    <action_set>
+      <pseudo_event id="95" operation="stop" operation_key="ip-172.17.1.14_stop_0">
+        <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.14"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="114" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+      </trigger>
+      <trigger>
+        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="29">
+    <action_set>
+      <rsc_op id="100" operation="monitor" operation_key="ip-172.17.1.17_monitor_10000" on_node="controller-2" on_node_uuid="3">
+        <primitive id="ip-172.17.1.17" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="99" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="30">
+    <action_set>
+      <rsc_op id="99" operation="start" operation_key="ip-172.17.1.17_start_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="ip-172.17.1.17" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="98" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="122" operation="stonith_complete" operation_key="stonith_complete"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="31">
+    <action_set>
+      <pseudo_event id="98" operation="stop" operation_key="ip-172.17.1.17_stop_0">
+        <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.1.17"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="114" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+      </trigger>
+      <trigger>
+        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="32">
+    <action_set>
+      <rsc_op id="105" operation="monitor" operation_key="ip-172.17.4.11_monitor_10000" on_node="controller-2" on_node_uuid="3">
+        <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="104" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="33">
+    <action_set>
+      <rsc_op id="104" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="103" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="122" operation="stonith_complete" operation_key="stonith_complete"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="34">
+    <action_set>
+      <pseudo_event id="103" operation="stop" operation_key="ip-172.17.4.11_stop_0">
+        <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="114" operation="stopped" operation_key="haproxy-clone_stopped_0"/>
+      </trigger>
+      <trigger>
+        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="35">
+    <action_set>
+      <pseudo_event id="106" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0">
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="200000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="113" operation="stop" operation_key="haproxy-clone_stop_0"/>
+      </trigger>
+      <trigger>
+        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="36" priority="1000000">
+    <action_set>
+      <pseudo_event id="114" operation="stopped" operation_key="haproxy-clone_stopped_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="106" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="113" operation="stop" operation_key="haproxy-clone_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="37">
+    <action_set>
+      <pseudo_event id="113" operation="stop" operation_key="haproxy-clone_stop_0">
+        <attributes CRM_meta_clone_max="9" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="38">
+    <action_set>
+      <rsc_op id="117" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1">
+        <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="39">
+    <action_set>
+      <rsc_op id="21" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1">
+        <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="20" operation="all_stopped" operation_key="all_stopped"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="117" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="40">
+    <action_set>
+      <rsc_op id="6" operation="monitor" operation_key="stonith-fence_ipmilan-525400bbf613_monitor_60000" on_node="controller-0" on_node_uuid="1">
+        <primitive id="stonith-fence_ipmilan-525400bbf613" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6237" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-2" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="21" operation="start" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="41">
+    <action_set>
+      <rsc_op id="118" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1">
+        <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="42">
+    <action_set>
+      <rsc_op id="22" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1">
+        <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="20" operation="all_stopped" operation_key="all_stopped"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="118" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="43">
+    <action_set>
+      <rsc_op id="11" operation="monitor" operation_key="stonith-fence_ipmilan-525400b4f6bd_monitor_60000" on_node="controller-0" on_node_uuid="1">
+        <primitive id="stonith-fence_ipmilan-525400b4f6bd" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6236" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-1" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="22" operation="start" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="44">
+    <action_set>
+      <rsc_op id="121" operation="monitor" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_60000" on_node="controller-2" on_node_uuid="3">
+        <primitive id="stonith-fence_ipmilan-5254005bdbb5" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="120" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="45">
+    <action_set>
+      <rsc_op id="120" operation="start" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="stonith-fence_ipmilan-5254005bdbb5" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="20" operation="all_stopped" operation_key="all_stopped"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="119" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="46">
+    <action_set>
+      <pseudo_event id="119" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0">
+        <attributes CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6235" lanplus="true" login="admin" passwd="****" pcmk_host_list="controller-0" privlvl="administrator"/>
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="47">
+    <action_set>
+      <crm_event id="129" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1">
+        <attributes CRM_meta_last_failure_rabbitmq="1493336946" CRM_meta_on_node="messaging-1" CRM_meta_on_node_uuid="messaging-1" CRM_meta_rabbitmq_role="true" CRM_meta_rmq_node_attr_last_known_rabbitmq="rabbit@messaging-1" CRM_meta_rmq_node_attr_rabbitmq="rabbit@messaging-1" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="messaging-1"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="128" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="48">
+    <action_set>
+      <crm_event id="128" operation="stonith" operation_key="stonith-galera-2-reboot" on_node="galera-2" on_node_uuid="galera-2">
+        <attributes CRM_meta_galera_role="true" CRM_meta_last_failure_galera="1493172798" CRM_meta_master_galera="100" CRM_meta_on_node="galera-2" CRM_meta_on_node_uuid="galera-2" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="galera-2"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="49">
+    <action_set>
+      <crm_event id="123" operation="stonith" operation_key="stonith-controller-1-reboot" on_node="controller-1" on_node_uuid="2">
+        <attributes CRM_meta_cinder_volume_role="true" CRM_meta_haproxy_role="true" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_redis_role="true" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="2"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="50">
+    <action_set>
+      <pseudo_event id="122" operation="stonith_complete" operation_key="stonith_complete">
+        <attributes />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="129" operation="stonith" operation_key="stonith-messaging-1-reboot" on_node="messaging-1" on_node_uuid="messaging-1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="51">
+    <action_set>
+      <pseudo_event id="20" operation="all_stopped" operation_key="all_stopped">
+        <attributes />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="26" operation="stop" operation_key="messaging-1_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="29" operation="stop" operation_key="galera-0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="34" operation="stop" operation_key="galera-2_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="39" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:2_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="60" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="78" operation="notified" operation_key="redis-master_confirmed-post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="95" operation="stop" operation_key="ip-172.17.1.14_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="98" operation="stop" operation_key="ip-172.17.1.17_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="103" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="106" operation="stop" operation_key="haproxy_stop_0" internal_operation_key="haproxy:0_stop_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="117" operation="stop" operation_key="stonith-fence_ipmilan-525400bbf613_stop_0" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="118" operation="stop" operation_key="stonith-fence_ipmilan-525400b4f6bd_stop_0" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="119" operation="stop" operation_key="stonith-fence_ipmilan-5254005bdbb5_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="122" operation="stonith_complete" operation_key="stonith_complete"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="125" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="131" operation="notified" operation_key="rabbitmq_notified_0" internal_operation_key="rabbitmq:2_confirmed-post_notify_stonith_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+</transition_graph>
diff --git a/pengine/test10/remote-recover-unknown.scores b/pengine/test10/remote-recover-unknown.scores
new file mode 100644
index 0000000..e918fc6
--- /dev/null
+++ b/pengine/test10/remote-recover-unknown.scores
@@ -0,0 +1,848 @@
+Allocation scores:
+Using the original execution date of: 2017-05-03 13:33:24Z
+clone_color: galera-master allocation score on controller-0: -INFINITY
+clone_color: galera-master allocation score on controller-1: -INFINITY
+clone_color: galera-master allocation score on controller-2: -INFINITY
+clone_color: galera-master allocation score on galera-0: 0
+clone_color: galera-master allocation score on galera-1: 0
+clone_color: galera-master allocation score on galera-2: 0
+clone_color: galera-master allocation score on messaging-0: -INFINITY
+clone_color: galera-master allocation score on messaging-1: -INFINITY
+clone_color: galera-master allocation score on messaging-2: -INFINITY
+clone_color: galera:0 allocation score on controller-0: -INFINITY
+clone_color: galera:0 allocation score on controller-1: -INFINITY
+clone_color: galera:0 allocation score on controller-2: -INFINITY
+clone_color: galera:0 allocation score on galera-0: 0
+clone_color: galera:0 allocation score on galera-1: INFINITY
+clone_color: galera:0 allocation score on galera-2: 0
+clone_color: galera:0 allocation score on messaging-0: -INFINITY
+clone_color: galera:0 allocation score on messaging-1: -INFINITY
+clone_color: galera:0 allocation score on messaging-2: -INFINITY
+clone_color: galera:1 allocation score on controller-0: -INFINITY
+clone_color: galera:1 allocation score on controller-1: -INFINITY
+clone_color: galera:1 allocation score on controller-2: -INFINITY
+clone_color: galera:1 allocation score on galera-0: INFINITY
+clone_color: galera:1 allocation score on galera-1: 0
+clone_color: galera:1 allocation score on galera-2: 0
+clone_color: galera:1 allocation score on messaging-0: -INFINITY
+clone_color: galera:1 allocation score on messaging-1: -INFINITY
+clone_color: galera:1 allocation score on messaging-2: -INFINITY
+clone_color: galera:2 allocation score on controller-0: -INFINITY
+clone_color: galera:2 allocation score on controller-1: -INFINITY
+clone_color: galera:2 allocation score on controller-2: -INFINITY
+clone_color: galera:2 allocation score on galera-0: 0
+clone_color: galera:2 allocation score on galera-1: 0
+clone_color: galera:2 allocation score on galera-2: 0
+clone_color: galera:2 allocation score on messaging-0: -INFINITY
+clone_color: galera:2 allocation score on messaging-1: -INFINITY
+clone_color: galera:2 allocation score on messaging-2: -INFINITY
+clone_color: galera:3 allocation score on controller-0: -INFINITY
+clone_color: galera:3 allocation score on controller-1: -INFINITY
+clone_color: galera:3 allocation score on controller-2: -INFINITY
+clone_color: galera:3 allocation score on galera-0: 0
+clone_color: galera:3 allocation score on galera-1: 0
+clone_color: galera:3 allocation score on galera-2: 0
+clone_color: galera:3 allocation score on messaging-0: -INFINITY
+clone_color: galera:3 allocation score on messaging-1: -INFINITY
+clone_color: galera:3 allocation score on messaging-2: -INFINITY
+clone_color: galera:4 allocation score on controller-0: -INFINITY
+clone_color: galera:4 allocation score on controller-1: -INFINITY
+clone_color: galera:4 allocation score on controller-2: -INFINITY
+clone_color: galera:4 allocation score on galera-0: 0
+clone_color: galera:4 allocation score on galera-1: 0
+clone_color: galera:4 allocation score on galera-2: 0
+clone_color: galera:4 allocation score on messaging-0: -INFINITY
+clone_color: galera:4 allocation score on messaging-1: -INFINITY
+clone_color: galera:4 allocation score on messaging-2: -INFINITY
+clone_color: galera:5 allocation score on controller-0: -INFINITY
+clone_color: galera:5 allocation score on controller-1: -INFINITY
+clone_color: galera:5 allocation score on controller-2: -INFINITY
+clone_color: galera:5 allocation score on galera-0: 0
+clone_color: galera:5 allocation score on galera-1: 0
+clone_color: galera:5 allocation score on galera-2: 0
+clone_color: galera:5 allocation score on messaging-0: -INFINITY
+clone_color: galera:5 allocation score on messaging-1: -INFINITY
+clone_color: galera:5 allocation score on messaging-2: -INFINITY
+clone_color: galera:6 allocation score on controller-0: -INFINITY
+clone_color: galera:6 allocation score on controller-1: -INFINITY
+clone_color: galera:6 allocation score on controller-2: -INFINITY
+clone_color: galera:6 allocation score on galera-0: 0
+clone_color: galera:6 allocation score on galera-1: 0
+clone_color: galera:6 allocation score on galera-2: 0
+clone_color: galera:6 allocation score on messaging-0: -INFINITY
+clone_color: galera:6 allocation score on messaging-1: -INFINITY
+clone_color: galera:6 allocation score on messaging-2: -INFINITY
+clone_color: galera:7 allocation score on controller-0: -INFINITY
+clone_color: galera:7 allocation score on controller-1: -INFINITY
+clone_color: galera:7 allocation score on controller-2: -INFINITY
+clone_color: galera:7 allocation score on galera-0: 0
+clone_color: galera:7 allocation score on galera-1: 0
+clone_color: galera:7 allocation score on galera-2: 0
+clone_color: galera:7 allocation score on messaging-0: -INFINITY
+clone_color: galera:7 allocation score on messaging-1: -INFINITY
+clone_color: galera:7 allocation score on messaging-2: -INFINITY
+clone_color: galera:8 allocation score on controller-0: -INFINITY
+clone_color: galera:8 allocation score on controller-1: -INFINITY
+clone_color: galera:8 allocation score on controller-2: -INFINITY
+clone_color: galera:8 allocation score on galera-0: 0
+clone_color: galera:8 allocation score on galera-1: 0
+clone_color: galera:8 allocation score on galera-2: 0
+clone_color: galera:8 allocation score on messaging-0: -INFINITY
+clone_color: galera:8 allocation score on messaging-1: -INFINITY
+clone_color: galera:8 allocation score on messaging-2: -INFINITY
+clone_color: haproxy-clone allocation score on controller-0: INFINITY
+clone_color: haproxy-clone allocation score on controller-1: 0
+clone_color: haproxy-clone allocation score on controller-2: 0
+clone_color: haproxy-clone allocation score on galera-0: -INFINITY
+clone_color: haproxy-clone allocation score on galera-1: -INFINITY
+clone_color: haproxy-clone allocation score on galera-2: -INFINITY
+clone_color: haproxy-clone allocation score on messaging-0: -INFINITY
+clone_color: haproxy-clone allocation score on messaging-1: -INFINITY
+clone_color: haproxy-clone allocation score on messaging-2: -INFINITY
+clone_color: haproxy:0 allocation score on controller-0: 0
+clone_color: haproxy:0 allocation score on controller-1: INFINITY
+clone_color: haproxy:0 allocation score on controller-2: 0
+clone_color: haproxy:0 allocation score on galera-0: -INFINITY
+clone_color: haproxy:0 allocation score on galera-1: -INFINITY
+clone_color: haproxy:0 allocation score on galera-2: -INFINITY
+clone_color: haproxy:0 allocation score on messaging-0: -INFINITY
+clone_color: haproxy:0 allocation score on messaging-1: -INFINITY
+clone_color: haproxy:0 allocation score on messaging-2: -INFINITY
+clone_color: haproxy:1 allocation score on controller-0: INFINITY
+clone_color: haproxy:1 allocation score on controller-1: 0
+clone_color: haproxy:1 allocation score on controller-2: 0
+clone_color: haproxy:1 allocation score on galera-0: -INFINITY
+clone_color: haproxy:1 allocation score on galera-1: -INFINITY
+clone_color: haproxy:1 allocation score on galera-2: -INFINITY
+clone_color: haproxy:1 allocation score on messaging-0: -INFINITY
+clone_color: haproxy:1 allocation score on messaging-1: -INFINITY
+clone_color: haproxy:1 allocation score on messaging-2: -INFINITY
+clone_color: haproxy:2 allocation score on controller-0: 0
+clone_color: haproxy:2 allocation score on controller-1: 0
+clone_color: haproxy:2 allocation score on controller-2: INFINITY
+clone_color: haproxy:2 allocation score on galera-0: -INFINITY
+clone_color: haproxy:2 allocation score on galera-1: -INFINITY
+clone_color: haproxy:2 allocation score on galera-2: -INFINITY
+clone_color: haproxy:2 allocation score on messaging-0: -INFINITY
+clone_color: haproxy:2 allocation score on messaging-1: -INFINITY
+clone_color: haproxy:2 allocation score on messaging-2: -INFINITY
+clone_color: haproxy:3 allocation score on controller-0: 0
+clone_color: haproxy:3 allocation score on controller-1: 0
+clone_color: haproxy:3 allocation score on controller-2: 0
+clone_color: haproxy:3 allocation score on galera-0: -INFINITY
+clone_color: haproxy:3 allocation score on galera-1: -INFINITY
+clone_color: haproxy:3 allocation score on galera-2: -INFINITY
+clone_color: haproxy:3 allocation score on messaging-0: -INFINITY
+clone_color: haproxy:3 allocation score on messaging-1: -INFINITY
+clone_color: haproxy:3 allocation score on messaging-2: -INFINITY
+clone_color: haproxy:4 allocation score on controller-0: 0
+clone_color: haproxy:4 allocation score on controller-1: 0
+clone_color: haproxy:4 allocation score on controller-2: 0
+clone_color: haproxy:4 allocation score on galera-0: -INFINITY
+clone_color: haproxy:4 allocation score on galera-1: -INFINITY
+clone_color: haproxy:4 allocation score on galera-2: -INFINITY
+clone_color: haproxy:4 allocation score on messaging-0: -INFINITY
+clone_color: haproxy:4 allocation score on messaging-1: -INFINITY
+clone_color: haproxy:4 allocation score on messaging-2: -INFINITY
+clone_color: haproxy:5 allocation score on controller-0: 0
+clone_color: haproxy:5 allocation score on controller-1: 0
+clone_color: haproxy:5 allocation score on controller-2: 0
+clone_color: haproxy:5 allocation score on galera-0: -INFINITY
+clone_color: haproxy:5 allocation score on galera-1: -INFINITY
+clone_color: haproxy:5 allocation score on galera-2: -INFINITY
+clone_color: haproxy:5 allocation score on messaging-0: -INFINITY
+clone_color: haproxy:5 allocation score on messaging-1: -INFINITY
+clone_color: haproxy:5 allocation score on messaging-2: -INFINITY
+clone_color: haproxy:6 allocation score on controller-0: 0
+clone_color: haproxy:6 allocation score on controller-1: 0
+clone_color: haproxy:6 allocation score on controller-2: 0
+clone_color: haproxy:6 allocation score on galera-0: -INFINITY
+clone_color: haproxy:6 allocation score on galera-1: -INFINITY
+clone_color: haproxy:6 allocation score on galera-2: -INFINITY
+clone_color: haproxy:6 allocation score on messaging-0: -INFINITY
+clone_color: haproxy:6 allocation score on messaging-1: -INFINITY
+clone_color: haproxy:6 allocation score on messaging-2: -INFINITY
+clone_color: haproxy:7 allocation score on controller-0: 0
+clone_color: haproxy:7 allocation score on controller-1: 0
+clone_color: haproxy:7 allocation score on controller-2: 0
+clone_color: haproxy:7 allocation score on galera-0: -INFINITY
+clone_color: haproxy:7 allocation score on galera-1: -INFINITY
+clone_color: haproxy:7 allocation score on galera-2: -INFINITY
+clone_color: haproxy:7 allocation score on messaging-0: -INFINITY
+clone_color: haproxy:7 allocation score on messaging-1: -INFINITY
+clone_color: haproxy:7 allocation score on messaging-2: -INFINITY
+clone_color: haproxy:8 allocation score on controller-0: 0
+clone_color: haproxy:8 allocation score on controller-1: 0
+clone_color: haproxy:8 allocation score on controller-2: 0
+clone_color: haproxy:8 allocation score on galera-0: -INFINITY
+clone_color: haproxy:8 allocation score on galera-1: -INFINITY
+clone_color: haproxy:8 allocation score on galera-2: -INFINITY
+clone_color: haproxy:8 allocation score on messaging-0: -INFINITY
+clone_color: haproxy:8 allocation score on messaging-1: -INFINITY
+clone_color: haproxy:8 allocation score on messaging-2: -INFINITY
+clone_color: rabbitmq-clone allocation score on controller-0: -INFINITY
+clone_color: rabbitmq-clone allocation score on controller-1: -INFINITY
+clone_color: rabbitmq-clone allocation score on controller-2: -INFINITY
+clone_color: rabbitmq-clone allocation score on galera-0: -INFINITY
+clone_color: rabbitmq-clone allocation score on galera-1: -INFINITY
+clone_color: rabbitmq-clone allocation score on galera-2: -INFINITY
+clone_color: rabbitmq-clone allocation score on messaging-0: 0
+clone_color: rabbitmq-clone allocation score on messaging-1: 0
+clone_color: rabbitmq-clone allocation score on messaging-2: 0
+clone_color: rabbitmq:0 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:0 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:0 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:0 allocation score on galera-0: -INFINITY
+clone_color: rabbitmq:0 allocation score on galera-1: -INFINITY
+clone_color: rabbitmq:0 allocation score on galera-2: -INFINITY
+clone_color: rabbitmq:0 allocation score on messaging-0: 0
+clone_color: rabbitmq:0 allocation score on messaging-1: 0
+clone_color: rabbitmq:0 allocation score on messaging-2: INFINITY
+clone_color: rabbitmq:1 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:1 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:1 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:1 allocation score on galera-0: -INFINITY
+clone_color: rabbitmq:1 allocation score on galera-1: -INFINITY
+clone_color: rabbitmq:1 allocation score on galera-2: -INFINITY
+clone_color: rabbitmq:1 allocation score on messaging-0: INFINITY
+clone_color: rabbitmq:1 allocation score on messaging-1: 0
+clone_color: rabbitmq:1 allocation score on messaging-2: 0
+clone_color: rabbitmq:2 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:2 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:2 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:2 allocation score on galera-0: -INFINITY
+clone_color: rabbitmq:2 allocation score on galera-1: -INFINITY
+clone_color: rabbitmq:2 allocation score on galera-2: -INFINITY
+clone_color: rabbitmq:2 allocation score on messaging-0: 0
+clone_color: rabbitmq:2 allocation score on messaging-1: INFINITY
+clone_color: rabbitmq:2 allocation score on messaging-2: 0
+clone_color: rabbitmq:3 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:3 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:3 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:3 allocation score on galera-0: -INFINITY
+clone_color: rabbitmq:3 allocation score on galera-1: -INFINITY
+clone_color: rabbitmq:3 allocation score on galera-2: -INFINITY
+clone_color: rabbitmq:3 allocation score on messaging-0: 0
+clone_color: rabbitmq:3 allocation score on messaging-1: 0
+clone_color: rabbitmq:3 allocation score on messaging-2: 0
+clone_color: rabbitmq:4 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:4 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:4 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:4 allocation score on galera-0: -INFINITY
+clone_color: rabbitmq:4 allocation score on galera-1: -INFINITY
+clone_color: rabbitmq:4 allocation score on galera-2: -INFINITY
+clone_color: rabbitmq:4 allocation score on messaging-0: 0
+clone_color: rabbitmq:4 allocation score on messaging-1: 0
+clone_color: rabbitmq:4 allocation score on messaging-2: 0
+clone_color: rabbitmq:5 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:5 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:5 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:5 allocation score on galera-0: -INFINITY
+clone_color: rabbitmq:5 allocation score on galera-1: -INFINITY
+clone_color: rabbitmq:5 allocation score on galera-2: -INFINITY
+clone_color: rabbitmq:5 allocation score on messaging-0: 0
+clone_color: rabbitmq:5 allocation score on messaging-1: 0
+clone_color: rabbitmq:5 allocation score on messaging-2: 0
+clone_color: rabbitmq:6 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:6 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:6 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:6 allocation score on galera-0: -INFINITY
+clone_color: rabbitmq:6 allocation score on galera-1: -INFINITY
+clone_color: rabbitmq:6 allocation score on galera-2: -INFINITY
+clone_color: rabbitmq:6 allocation score on messaging-0: 0
+clone_color: rabbitmq:6 allocation score on messaging-1: 0
+clone_color: rabbitmq:6 allocation score on messaging-2: 0
+clone_color: rabbitmq:7 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:7 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:7 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:7 allocation score on galera-0: -INFINITY
+clone_color: rabbitmq:7 allocation score on galera-1: -INFINITY
+clone_color: rabbitmq:7 allocation score on galera-2: -INFINITY
+clone_color: rabbitmq:7 allocation score on messaging-0: 0
+clone_color: rabbitmq:7 allocation score on messaging-1: 0
+clone_color: rabbitmq:7 allocation score on messaging-2: 0
+clone_color: rabbitmq:8 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:8 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:8 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:8 allocation score on galera-0: -INFINITY
+clone_color: rabbitmq:8 allocation score on galera-1: -INFINITY
+clone_color: rabbitmq:8 allocation score on galera-2: -INFINITY
+clone_color: rabbitmq:8 allocation score on messaging-0: 0
+clone_color: rabbitmq:8 allocation score on messaging-1: 0
+clone_color: rabbitmq:8 allocation score on messaging-2: 0
+clone_color: redis-master allocation score on controller-0: 0
+clone_color: redis-master allocation score on controller-1: 0
+clone_color: redis-master allocation score on controller-2: 0
+clone_color: redis-master allocation score on galera-0: -INFINITY
+clone_color: redis-master allocation score on galera-1: -INFINITY
+clone_color: redis-master allocation score on galera-2: -INFINITY
+clone_color: redis-master allocation score on messaging-0: -INFINITY
+clone_color: redis-master allocation score on messaging-1: -INFINITY
+clone_color: redis-master allocation score on messaging-2: -INFINITY
+clone_color: redis:0 allocation score on controller-0: 0
+clone_color: redis:0 allocation score on controller-1: INFINITY
+clone_color: redis:0 allocation score on controller-2: 0
+clone_color: redis:0 allocation score on galera-0: -INFINITY
+clone_color: redis:0 allocation score on galera-1: -INFINITY
+clone_color: redis:0 allocation score on galera-2: -INFINITY
+clone_color: redis:0 allocation score on messaging-0: -INFINITY
+clone_color: redis:0 allocation score on messaging-1: -INFINITY
+clone_color: redis:0 allocation score on messaging-2: -INFINITY
+clone_color: redis:1 allocation score on controller-0: INFINITY
+clone_color: redis:1 allocation score on controller-1: 0
+clone_color: redis:1 allocation score on controller-2: 0
+clone_color: redis:1 allocation score on galera-0: -INFINITY
+clone_color: redis:1 allocation score on galera-1: -INFINITY
+clone_color: redis:1 allocation score on galera-2: -INFINITY
+clone_color: redis:1 allocation score on messaging-0: -INFINITY
+clone_color: redis:1 allocation score on messaging-1: -INFINITY
+clone_color: redis:1 allocation score on messaging-2: -INFINITY
+clone_color: redis:2 allocation score on controller-0: 0
+clone_color: redis:2 allocation score on controller-1: 0
+clone_color: redis:2 allocation score on controller-2: INFINITY
+clone_color: redis:2 allocation score on galera-0: -INFINITY
+clone_color: redis:2 allocation score on galera-1: -INFINITY
+clone_color: redis:2 allocation score on galera-2: -INFINITY
+clone_color: redis:2 allocation score on messaging-0: -INFINITY
+clone_color: redis:2 allocation score on messaging-1: -INFINITY
+clone_color: redis:2 allocation score on messaging-2: -INFINITY
+clone_color: redis:3 allocation score on controller-0: 0
+clone_color: redis:3 allocation score on controller-1: 0
+clone_color: redis:3 allocation score on controller-2: 0
+clone_color: redis:3 allocation score on galera-0: -INFINITY
+clone_color: redis:3 allocation score on galera-1: -INFINITY
+clone_color: redis:3 allocation score on galera-2: -INFINITY
+clone_color: redis:3 allocation score on messaging-0: -INFINITY
+clone_color: redis:3 allocation score on messaging-1: -INFINITY
+clone_color: redis:3 allocation score on messaging-2: -INFINITY
+clone_color: redis:4 allocation score on controller-0: 0
+clone_color: redis:4 allocation score on controller-1: 0
+clone_color: redis:4 allocation score on controller-2: 0
+clone_color: redis:4 allocation score on galera-0: -INFINITY
+clone_color: redis:4 allocation score on galera-1: -INFINITY
+clone_color: redis:4 allocation score on galera-2: -INFINITY
+clone_color: redis:4 allocation score on messaging-0: -INFINITY
+clone_color: redis:4 allocation score on messaging-1: -INFINITY
+clone_color: redis:4 allocation score on messaging-2: -INFINITY
+clone_color: redis:5 allocation score on controller-0: 0
+clone_color: redis:5 allocation score on controller-1: 0
+clone_color: redis:5 allocation score on controller-2: 0
+clone_color: redis:5 allocation score on galera-0: -INFINITY
+clone_color: redis:5 allocation score on galera-1: -INFINITY
+clone_color: redis:5 allocation score on galera-2: -INFINITY
+clone_color: redis:5 allocation score on messaging-0: -INFINITY
+clone_color: redis:5 allocation score on messaging-1: -INFINITY
+clone_color: redis:5 allocation score on messaging-2: -INFINITY
+clone_color: redis:6 allocation score on controller-0: 0
+clone_color: redis:6 allocation score on controller-1: 0
+clone_color: redis:6 allocation score on controller-2: 0
+clone_color: redis:6 allocation score on galera-0: -INFINITY
+clone_color: redis:6 allocation score on galera-1: -INFINITY
+clone_color: redis:6 allocation score on galera-2: -INFINITY
+clone_color: redis:6 allocation score on messaging-0: -INFINITY
+clone_color: redis:6 allocation score on messaging-1: -INFINITY
+clone_color: redis:6 allocation score on messaging-2: -INFINITY
+clone_color: redis:7 allocation score on controller-0: 0
+clone_color: redis:7 allocation score on controller-1: 0
+clone_color: redis:7 allocation score on controller-2: 0
+clone_color: redis:7 allocation score on galera-0: -INFINITY
+clone_color: redis:7 allocation score on galera-1: -INFINITY
+clone_color: redis:7 allocation score on galera-2: -INFINITY
+clone_color: redis:7 allocation score on messaging-0: -INFINITY
+clone_color: redis:7 allocation score on messaging-1: -INFINITY
+clone_color: redis:7 allocation score on messaging-2: -INFINITY
+clone_color: redis:8 allocation score on controller-0: 0
+clone_color: redis:8 allocation score on controller-1: 0
+clone_color: redis:8 allocation score on controller-2: 0
+clone_color: redis:8 allocation score on galera-0: -INFINITY
+clone_color: redis:8 allocation score on galera-1: -INFINITY
+clone_color: redis:8 allocation score on galera-2: -INFINITY
+clone_color: redis:8 allocation score on messaging-0: -INFINITY
+clone_color: redis:8 allocation score on messaging-1: -INFINITY
+clone_color: redis:8 allocation score on messaging-2: -INFINITY
+galera:0 promotion score on galera-1: 100
+galera:1 promotion score on galera-0: 100
+galera:2 promotion score on none: 0
+galera:3 promotion score on none: 0
+galera:4 promotion score on none: 0
+galera:5 promotion score on none: 0
+galera:6 promotion score on none: 0
+galera:7 promotion score on none: 0
+galera:8 promotion score on none: 0
+native_color: galera-0 allocation score on controller-0: 0
+native_color: galera-0 allocation score on controller-1: INFINITY
+native_color: galera-0 allocation score on controller-2: 0
+native_color: galera-0 allocation score on galera-0: -INFINITY
+native_color: galera-0 allocation score on galera-1: -INFINITY
+native_color: galera-0 allocation score on galera-2: -INFINITY
+native_color: galera-0 allocation score on messaging-0: -INFINITY
+native_color: galera-0 allocation score on messaging-1: -INFINITY
+native_color: galera-0 allocation score on messaging-2: -INFINITY
+native_color: galera-1 allocation score on controller-0: INFINITY
+native_color: galera-1 allocation score on controller-1: 0
+native_color: galera-1 allocation score on controller-2: 0
+native_color: galera-1 allocation score on galera-0: -INFINITY
+native_color: galera-1 allocation score on galera-1: -INFINITY
+native_color: galera-1 allocation score on galera-2: -INFINITY
+native_color: galera-1 allocation score on messaging-0: -INFINITY
+native_color: galera-1 allocation score on messaging-1: -INFINITY
+native_color: galera-1 allocation score on messaging-2: -INFINITY
+native_color: galera-2 allocation score on controller-0: -INFINITY
+native_color: galera-2 allocation score on controller-1: INFINITY
+native_color: galera-2 allocation score on controller-2: -INFINITY
+native_color: galera-2 allocation score on galera-0: -INFINITY
+native_color: galera-2 allocation score on galera-1: -INFINITY
+native_color: galera-2 allocation score on galera-2: -INFINITY
+native_color: galera-2 allocation score on messaging-0: -INFINITY
+native_color: galera-2 allocation score on messaging-1: -INFINITY
+native_color: galera-2 allocation score on messaging-2: -INFINITY
+native_color: galera:0 allocation score on controller-0: -INFINITY
+native_color: galera:0 allocation score on controller-1: -INFINITY
+native_color: galera:0 allocation score on controller-2: -INFINITY
+native_color: galera:0 allocation score on galera-0: 0
+native_color: galera:0 allocation score on galera-1: INFINITY
+native_color: galera:0 allocation score on galera-2: -INFINITY
+native_color: galera:0 allocation score on messaging-0: -INFINITY
+native_color: galera:0 allocation score on messaging-1: -INFINITY
+native_color: galera:0 allocation score on messaging-2: -INFINITY
+native_color: galera:1 allocation score on controller-0: -INFINITY
+native_color: galera:1 allocation score on controller-1: -INFINITY
+native_color: galera:1 allocation score on controller-2: -INFINITY
+native_color: galera:1 allocation score on galera-0: INFINITY
+native_color: galera:1 allocation score on galera-1: -INFINITY
+native_color: galera:1 allocation score on galera-2: -INFINITY
+native_color: galera:1 allocation score on messaging-0: -INFINITY
+native_color: galera:1 allocation score on messaging-1: -INFINITY
+native_color: galera:1 allocation score on messaging-2: -INFINITY
+native_color: galera:2 allocation score on controller-0: -INFINITY
+native_color: galera:2 allocation score on controller-1: -INFINITY
+native_color: galera:2 allocation score on controller-2: -INFINITY
+native_color: galera:2 allocation score on galera-0: -INFINITY
+native_color: galera:2 allocation score on galera-1: -INFINITY
+native_color: galera:2 allocation score on galera-2: -INFINITY
+native_color: galera:2 allocation score on messaging-0: -INFINITY
+native_color: galera:2 allocation score on messaging-1: -INFINITY
+native_color: galera:2 allocation score on messaging-2: -INFINITY
+native_color: galera:3 allocation score on controller-0: -INFINITY
+native_color: galera:3 allocation score on controller-1: -INFINITY
+native_color: galera:3 allocation score on controller-2: -INFINITY
+native_color: galera:3 allocation score on galera-0: -INFINITY
+native_color: galera:3 allocation score on galera-1: -INFINITY
+native_color: galera:3 allocation score on galera-2: -INFINITY
+native_color: galera:3 allocation score on messaging-0: -INFINITY
+native_color: galera:3 allocation score on messaging-1: -INFINITY
+native_color: galera:3 allocation score on messaging-2: -INFINITY
+native_color: galera:4 allocation score on controller-0: -INFINITY
+native_color: galera:4 allocation score on controller-1: -INFINITY
+native_color: galera:4 allocation score on controller-2: -INFINITY
+native_color: galera:4 allocation score on galera-0: -INFINITY
+native_color: galera:4 allocation score on galera-1: -INFINITY
+native_color: galera:4 allocation score on galera-2: -INFINITY
+native_color: galera:4 allocation score on messaging-0: -INFINITY
+native_color: galera:4 allocation score on messaging-1: -INFINITY
+native_color: galera:4 allocation score on messaging-2: -INFINITY
+native_color: galera:5 allocation score on controller-0: -INFINITY
+native_color: galera:5 allocation score on controller-1: -INFINITY
+native_color: galera:5 allocation score on controller-2: -INFINITY
+native_color: galera:5 allocation score on galera-0: -INFINITY
+native_color: galera:5 allocation score on galera-1: -INFINITY
+native_color: galera:5 allocation score on galera-2: -INFINITY
+native_color: galera:5 allocation score on messaging-0: -INFINITY
+native_color: galera:5 allocation score on messaging-1: -INFINITY
+native_color: galera:5 allocation score on messaging-2: -INFINITY
+native_color: galera:6 allocation score on controller-0: -INFINITY
+native_color: galera:6 allocation score on controller-1: -INFINITY
+native_color: galera:6 allocation score on controller-2: -INFINITY
+native_color: galera:6 allocation score on galera-0: -INFINITY
+native_color: galera:6 allocation score on galera-1: -INFINITY
+native_color: galera:6 allocation score on galera-2: -INFINITY
+native_color: galera:6 allocation score on messaging-0: -INFINITY
+native_color: galera:6 allocation score on messaging-1: -INFINITY
+native_color: galera:6 allocation score on messaging-2: -INFINITY
+native_color: galera:7 allocation score on controller-0: -INFINITY
+native_color: galera:7 allocation score on controller-1: -INFINITY
+native_color: galera:7 allocation score on controller-2: -INFINITY
+native_color: galera:7 allocation score on galera-0: -INFINITY
+native_color: galera:7 allocation score on galera-1: -INFINITY
+native_color: galera:7 allocation score on galera-2: -INFINITY
+native_color: galera:7 allocation score on messaging-0: -INFINITY
+native_color: galera:7 allocation score on messaging-1: -INFINITY
+native_color: galera:7 allocation score on messaging-2: -INFINITY
+native_color: galera:8 allocation score on controller-0: -INFINITY
+native_color: galera:8 allocation score on controller-1: -INFINITY
+native_color: galera:8 allocation score on controller-2: -INFINITY
+native_color: galera:8 allocation score on galera-0: -INFINITY
+native_color: galera:8 allocation score on galera-1: -INFINITY
+native_color: galera:8 allocation score on galera-2: -INFINITY
+native_color: galera:8 allocation score on messaging-0: -INFINITY
+native_color: galera:8 allocation score on messaging-1: -INFINITY
+native_color: galera:8 allocation score on messaging-2: -INFINITY
+native_color: haproxy:0 allocation score on controller-0: -INFINITY
+native_color: haproxy:0 allocation score on controller-1: -INFINITY
+native_color: haproxy:0 allocation score on controller-2: -INFINITY
+native_color: haproxy:0 allocation score on galera-0: -INFINITY
+native_color: haproxy:0 allocation score on galera-1: -INFINITY
+native_color: haproxy:0 allocation score on galera-2: -INFINITY
+native_color: haproxy:0 allocation score on messaging-0: -INFINITY
+native_color: haproxy:0 allocation score on messaging-1: -INFINITY
+native_color: haproxy:0 allocation score on messaging-2: -INFINITY
+native_color: haproxy:1 allocation score on controller-0: INFINITY
+native_color: haproxy:1 allocation score on controller-1: -INFINITY
+native_color: haproxy:1 allocation score on controller-2: 0
+native_color: haproxy:1 allocation score on galera-0: -INFINITY
+native_color: haproxy:1 allocation score on galera-1: -INFINITY
+native_color: haproxy:1 allocation score on galera-2: -INFINITY
+native_color: haproxy:1 allocation score on messaging-0: -INFINITY
+native_color: haproxy:1 allocation score on messaging-1: -INFINITY
+native_color: haproxy:1 allocation score on messaging-2: -INFINITY
+native_color: haproxy:2 allocation score on controller-0: -INFINITY
+native_color: haproxy:2 allocation score on controller-1: -INFINITY
+native_color: haproxy:2 allocation score on controller-2: INFINITY
+native_color: haproxy:2 allocation score on galera-0: -INFINITY
+native_color: haproxy:2 allocation score on galera-1: -INFINITY
+native_color: haproxy:2 allocation score on galera-2: -INFINITY
+native_color: haproxy:2 allocation score on messaging-0: -INFINITY
+native_color: haproxy:2 allocation score on messaging-1: -INFINITY
+native_color: haproxy:2 allocation score on messaging-2: -INFINITY
+native_color: haproxy:3 allocation score on controller-0: -INFINITY
+native_color: haproxy:3 allocation score on controller-1: -INFINITY
+native_color: haproxy:3 allocation score on controller-2: -INFINITY
+native_color: haproxy:3 allocation score on galera-0: -INFINITY
+native_color: haproxy:3 allocation score on galera-1: -INFINITY
+native_color: haproxy:3 allocation score on galera-2: -INFINITY
+native_color: haproxy:3 allocation score on messaging-0: -INFINITY
+native_color: haproxy:3 allocation score on messaging-1: -INFINITY
+native_color: haproxy:3 allocation score on messaging-2: -INFINITY
+native_color: haproxy:4 allocation score on controller-0: -INFINITY
+native_color: haproxy:4 allocation score on controller-1: -INFINITY
+native_color: haproxy:4 allocation score on controller-2: -INFINITY
+native_color: haproxy:4 allocation score on galera-0: -INFINITY
+native_color: haproxy:4 allocation score on galera-1: -INFINITY
+native_color: haproxy:4 allocation score on galera-2: -INFINITY
+native_color: haproxy:4 allocation score on messaging-0: -INFINITY
+native_color: haproxy:4 allocation score on messaging-1: -INFINITY
+native_color: haproxy:4 allocation score on messaging-2: -INFINITY
+native_color: haproxy:5 allocation score on controller-0: -INFINITY
+native_color: haproxy:5 allocation score on controller-1: -INFINITY
+native_color: haproxy:5 allocation score on controller-2: -INFINITY
+native_color: haproxy:5 allocation score on galera-0: -INFINITY
+native_color: haproxy:5 allocation score on galera-1: -INFINITY
+native_color: haproxy:5 allocation score on galera-2: -INFINITY
+native_color: haproxy:5 allocation score on messaging-0: -INFINITY
+native_color: haproxy:5 allocation score on messaging-1: -INFINITY
+native_color: haproxy:5 allocation score on messaging-2: -INFINITY
+native_color: haproxy:6 allocation score on controller-0: -INFINITY
+native_color: haproxy:6 allocation score on controller-1: -INFINITY
+native_color: haproxy:6 allocation score on controller-2: -INFINITY
+native_color: haproxy:6 allocation score on galera-0: -INFINITY
+native_color: haproxy:6 allocation score on galera-1: -INFINITY
+native_color: haproxy:6 allocation score on galera-2: -INFINITY
+native_color: haproxy:6 allocation score on messaging-0: -INFINITY
+native_color: haproxy:6 allocation score on messaging-1: -INFINITY
+native_color: haproxy:6 allocation score on messaging-2: -INFINITY
+native_color: haproxy:7 allocation score on controller-0: -INFINITY
+native_color: haproxy:7 allocation score on controller-1: -INFINITY
+native_color: haproxy:7 allocation score on controller-2: -INFINITY
+native_color: haproxy:7 allocation score on galera-0: -INFINITY
+native_color: haproxy:7 allocation score on galera-1: -INFINITY
+native_color: haproxy:7 allocation score on galera-2: -INFINITY
+native_color: haproxy:7 allocation score on messaging-0: -INFINITY
+native_color: haproxy:7 allocation score on messaging-1: -INFINITY
+native_color: haproxy:7 allocation score on messaging-2: -INFINITY
+native_color: haproxy:8 allocation score on controller-0: -INFINITY
+native_color: haproxy:8 allocation score on controller-1: -INFINITY
+native_color: haproxy:8 allocation score on controller-2: -INFINITY
+native_color: haproxy:8 allocation score on galera-0: -INFINITY
+native_color: haproxy:8 allocation score on galera-1: -INFINITY
+native_color: haproxy:8 allocation score on galera-2: -INFINITY
+native_color: haproxy:8 allocation score on messaging-0: -INFINITY
+native_color: haproxy:8 allocation score on messaging-1: -INFINITY
+native_color: haproxy:8 allocation score on messaging-2: -INFINITY
+native_color: ip-10.0.0.102 allocation score on controller-0: INFINITY
+native_color: ip-10.0.0.102 allocation score on controller-1: -INFINITY
+native_color: ip-10.0.0.102 allocation score on controller-2: 0
+native_color: ip-10.0.0.102 allocation score on galera-0: -INFINITY
+native_color: ip-10.0.0.102 allocation score on galera-1: -INFINITY
+native_color: ip-10.0.0.102 allocation score on galera-2: -INFINITY
+native_color: ip-10.0.0.102 allocation score on messaging-0: -INFINITY
+native_color: ip-10.0.0.102 allocation score on messaging-1: -INFINITY
+native_color: ip-10.0.0.102 allocation score on messaging-2: -INFINITY
+native_color: ip-172.17.1.14 allocation score on controller-0: 0
+native_color: ip-172.17.1.14 allocation score on controller-1: -INFINITY
+native_color: ip-172.17.1.14 allocation score on controller-2: 0
+native_color: ip-172.17.1.14 allocation score on galera-0: -INFINITY
+native_color: ip-172.17.1.14 allocation score on galera-1: -INFINITY
+native_color: ip-172.17.1.14 allocation score on galera-2: -INFINITY
+native_color: ip-172.17.1.14 allocation score on messaging-0: -INFINITY
+native_color: ip-172.17.1.14 allocation score on messaging-1: -INFINITY
+native_color: ip-172.17.1.14 allocation score on messaging-2: -INFINITY
+native_color: ip-172.17.1.17 allocation score on controller-0: 0
+native_color: ip-172.17.1.17 allocation score on controller-1: -INFINITY
+native_color: ip-172.17.1.17 allocation score on controller-2: 0
+native_color: ip-172.17.1.17 allocation score on galera-0: -INFINITY
+native_color: ip-172.17.1.17 allocation score on galera-1: -INFINITY
+native_color: ip-172.17.1.17 allocation score on galera-2: -INFINITY
+native_color: ip-172.17.1.17 allocation score on messaging-0: -INFINITY
+native_color: ip-172.17.1.17 allocation score on messaging-1: -INFINITY
+native_color: ip-172.17.1.17 allocation score on messaging-2: -INFINITY
+native_color: ip-172.17.3.15 allocation score on controller-0: INFINITY
+native_color: ip-172.17.3.15 allocation score on controller-1: -INFINITY
+native_color: ip-172.17.3.15 allocation score on controller-2: 0
+native_color: ip-172.17.3.15 allocation score on galera-0: -INFINITY
+native_color: ip-172.17.3.15 allocation score on galera-1: -INFINITY
+native_color: ip-172.17.3.15 allocation score on galera-2: -INFINITY
+native_color: ip-172.17.3.15 allocation score on messaging-0: -INFINITY
+native_color: ip-172.17.3.15 allocation score on messaging-1: -INFINITY
+native_color: ip-172.17.3.15 allocation score on messaging-2: -INFINITY
+native_color: ip-172.17.4.11 allocation score on controller-0: 0
+native_color: ip-172.17.4.11 allocation score on controller-1: -INFINITY
+native_color: ip-172.17.4.11 allocation score on controller-2: 0
+native_color: ip-172.17.4.11 allocation score on galera-0: -INFINITY
+native_color: ip-172.17.4.11 allocation score on galera-1: -INFINITY
+native_color: ip-172.17.4.11 allocation score on galera-2: -INFINITY
+native_color: ip-172.17.4.11 allocation score on messaging-0: -INFINITY
+native_color: ip-172.17.4.11 allocation score on messaging-1: -INFINITY
+native_color: ip-172.17.4.11 allocation score on messaging-2: -INFINITY
+native_color: ip-192.168.24.6 allocation score on controller-0: INFINITY
+native_color: ip-192.168.24.6 allocation score on controller-1: -INFINITY
+native_color: ip-192.168.24.6 allocation score on controller-2: 0
+native_color: ip-192.168.24.6 allocation score on galera-0: -INFINITY
+native_color: ip-192.168.24.6 allocation score on galera-1: -INFINITY
+native_color: ip-192.168.24.6 allocation score on galera-2: -INFINITY
+native_color: ip-192.168.24.6 allocation score on messaging-0: -INFINITY
+native_color: ip-192.168.24.6 allocation score on messaging-1: -INFINITY
+native_color: ip-192.168.24.6 allocation score on messaging-2: -INFINITY
+native_color: messaging-0 allocation score on controller-0: INFINITY
+native_color: messaging-0 allocation score on controller-1: 0
+native_color: messaging-0 allocation score on controller-2: 0
+native_color: messaging-0 allocation score on galera-0: -INFINITY
+native_color: messaging-0 allocation score on galera-1: -INFINITY
+native_color: messaging-0 allocation score on galera-2: -INFINITY
+native_color: messaging-0 allocation score on messaging-0: -INFINITY
+native_color: messaging-0 allocation score on messaging-1: -INFINITY
+native_color: messaging-0 allocation score on messaging-2: -INFINITY
+native_color: messaging-1 allocation score on controller-0: -INFINITY
+native_color: messaging-1 allocation score on controller-1: INFINITY
+native_color: messaging-1 allocation score on controller-2: -INFINITY
+native_color: messaging-1 allocation score on galera-0: -INFINITY
+native_color: messaging-1 allocation score on galera-1: -INFINITY
+native_color: messaging-1 allocation score on galera-2: -INFINITY
+native_color: messaging-1 allocation score on messaging-0: -INFINITY
+native_color: messaging-1 allocation score on messaging-1: -INFINITY
+native_color: messaging-1 allocation score on messaging-2: -INFINITY
+native_color: messaging-2 allocation score on controller-0: INFINITY
+native_color: messaging-2 allocation score on controller-1: 0
+native_color: messaging-2 allocation score on controller-2: 0
+native_color: messaging-2 allocation score on galera-0: -INFINITY
+native_color: messaging-2 allocation score on galera-1: -INFINITY
+native_color: messaging-2 allocation score on galera-2: -INFINITY
+native_color: messaging-2 allocation score on messaging-0: -INFINITY
+native_color: messaging-2 allocation score on messaging-1: -INFINITY
+native_color: messaging-2 allocation score on messaging-2: -INFINITY
+native_color: openstack-cinder-volume allocation score on controller-0: INFINITY
+native_color: openstack-cinder-volume allocation score on controller-1: 0
+native_color: openstack-cinder-volume allocation score on controller-2: 0
+native_color: openstack-cinder-volume allocation score on galera-0: -INFINITY
+native_color: openstack-cinder-volume allocation score on galera-1: -INFINITY
+native_color: openstack-cinder-volume allocation score on galera-2: -INFINITY
+native_color: openstack-cinder-volume allocation score on messaging-0: -INFINITY
+native_color: openstack-cinder-volume allocation score on messaging-1: -INFINITY
+native_color: openstack-cinder-volume allocation score on messaging-2: -INFINITY
+native_color: rabbitmq:0 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:0 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:0 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:0 allocation score on galera-0: -INFINITY
+native_color: rabbitmq:0 allocation score on galera-1: -INFINITY
+native_color: rabbitmq:0 allocation score on galera-2: -INFINITY
+native_color: rabbitmq:0 allocation score on messaging-0: 0
+native_color: rabbitmq:0 allocation score on messaging-1: -INFINITY
+native_color: rabbitmq:0 allocation score on messaging-2: INFINITY
+native_color: rabbitmq:1 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:1 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:1 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:1 allocation score on galera-0: -INFINITY
+native_color: rabbitmq:1 allocation score on galera-1: -INFINITY
+native_color: rabbitmq:1 allocation score on galera-2: -INFINITY
+native_color: rabbitmq:1 allocation score on messaging-0: INFINITY
+native_color: rabbitmq:1 allocation score on messaging-1: -INFINITY
+native_color: rabbitmq:1 allocation score on messaging-2: -INFINITY
+native_color: rabbitmq:2 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:2 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:2 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:2 allocation score on galera-0: -INFINITY
+native_color: rabbitmq:2 allocation score on galera-1: -INFINITY
+native_color: rabbitmq:2 allocation score on galera-2: -INFINITY
+native_color: rabbitmq:2 allocation score on messaging-0: -INFINITY
+native_color: rabbitmq:2 allocation score on messaging-1: -INFINITY
+native_color: rabbitmq:2 allocation score on messaging-2: -INFINITY
+native_color: rabbitmq:3 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:3 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:3 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:3 allocation score on galera-0: -INFINITY
+native_color: rabbitmq:3 allocation score on galera-1: -INFINITY
+native_color: rabbitmq:3 allocation score on galera-2: -INFINITY
+native_color: rabbitmq:3 allocation score on messaging-0: -INFINITY
+native_color: rabbitmq:3 allocation score on messaging-1: -INFINITY
+native_color: rabbitmq:3 allocation score on messaging-2: -INFINITY
+native_color: rabbitmq:4 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:4 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:4 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:4 allocation score on galera-0: -INFINITY
+native_color: rabbitmq:4 allocation score on galera-1: -INFINITY
+native_color: rabbitmq:4 allocation score on galera-2: -INFINITY
+native_color: rabbitmq:4 allocation score on messaging-0: -INFINITY
+native_color: rabbitmq:4 allocation score on messaging-1: -INFINITY
+native_color: rabbitmq:4 allocation score on messaging-2: -INFINITY
+native_color: rabbitmq:5 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:5 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:5 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:5 allocation score on galera-0: -INFINITY
+native_color: rabbitmq:5 allocation score on galera-1: -INFINITY
+native_color: rabbitmq:5 allocation score on galera-2: -INFINITY
+native_color: rabbitmq:5 allocation score on messaging-0: -INFINITY
+native_color: rabbitmq:5 allocation score on messaging-1: -INFINITY
+native_color: rabbitmq:5 allocation score on messaging-2: -INFINITY
+native_color: rabbitmq:6 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:6 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:6 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:6 allocation score on galera-0: -INFINITY
+native_color: rabbitmq:6 allocation score on galera-1: -INFINITY
+native_color: rabbitmq:6 allocation score on galera-2: -INFINITY
+native_color: rabbitmq:6 allocation score on messaging-0: -INFINITY
+native_color: rabbitmq:6 allocation score on messaging-1: -INFINITY
+native_color: rabbitmq:6 allocation score on messaging-2: -INFINITY
+native_color: rabbitmq:7 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:7 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:7 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:7 allocation score on galera-0: -INFINITY
+native_color: rabbitmq:7 allocation score on galera-1: -INFINITY
+native_color: rabbitmq:7 allocation score on galera-2: -INFINITY
+native_color: rabbitmq:7 allocation score on messaging-0: -INFINITY
+native_color: rabbitmq:7 allocation score on messaging-1: -INFINITY
+native_color: rabbitmq:7 allocation score on messaging-2: -INFINITY
+native_color: rabbitmq:8 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:8 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:8 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:8 allocation score on galera-0: -INFINITY
+native_color: rabbitmq:8 allocation score on galera-1: -INFINITY
+native_color: rabbitmq:8 allocation score on galera-2: -INFINITY
+native_color: rabbitmq:8 allocation score on messaging-0: -INFINITY
+native_color: rabbitmq:8 allocation score on messaging-1: -INFINITY
+native_color: rabbitmq:8 allocation score on messaging-2: -INFINITY
+native_color: redis:0 allocation score on controller-0: -INFINITY
+native_color: redis:0 allocation score on controller-1: -INFINITY
+native_color: redis:0 allocation score on controller-2: -INFINITY
+native_color: redis:0 allocation score on galera-0: -INFINITY
+native_color: redis:0 allocation score on galera-1: -INFINITY
+native_color: redis:0 allocation score on galera-2: -INFINITY
+native_color: redis:0 allocation score on messaging-0: -INFINITY
+native_color: redis:0 allocation score on messaging-1: -INFINITY
+native_color: redis:0 allocation score on messaging-2: -INFINITY
+native_color: redis:1 allocation score on controller-0: INFINITY
+native_color: redis:1 allocation score on controller-1: -INFINITY
+native_color: redis:1 allocation score on controller-2: 0
+native_color: redis:1 allocation score on galera-0: -INFINITY
+native_color: redis:1 allocation score on galera-1: -INFINITY
+native_color: redis:1 allocation score on galera-2: -INFINITY
+native_color: redis:1 allocation score on messaging-0: -INFINITY
+native_color: redis:1 allocation score on messaging-1: -INFINITY
+native_color: redis:1 allocation score on messaging-2: -INFINITY
+native_color: redis:2 allocation score on controller-0: -INFINITY
+native_color: redis:2 allocation score on controller-1: -INFINITY
+native_color: redis:2 allocation score on controller-2: INFINITY
+native_color: redis:2 allocation score on galera-0: -INFINITY
+native_color: redis:2 allocation score on galera-1: -INFINITY
+native_color: redis:2 allocation score on galera-2: -INFINITY
+native_color: redis:2 allocation score on messaging-0: -INFINITY
+native_color: redis:2 allocation score on messaging-1: -INFINITY
+native_color: redis:2 allocation score on messaging-2: -INFINITY
+native_color: redis:3 allocation score on controller-0: -INFINITY
+native_color: redis:3 allocation score on controller-1: -INFINITY
+native_color: redis:3 allocation score on controller-2: -INFINITY
+native_color: redis:3 allocation score on galera-0: -INFINITY
+native_color: redis:3 allocation score on galera-1: -INFINITY
+native_color: redis:3 allocation score on galera-2: -INFINITY
+native_color: redis:3 allocation score on messaging-0: -INFINITY
+native_color: redis:3 allocation score on messaging-1: -INFINITY
+native_color: redis:3 allocation score on messaging-2: -INFINITY
+native_color: redis:4 allocation score on controller-0: -INFINITY
+native_color: redis:4 allocation score on controller-1: -INFINITY
+native_color: redis:4 allocation score on controller-2: -INFINITY
+native_color: redis:4 allocation score on galera-0: -INFINITY
+native_color: redis:4 allocation score on galera-1: -INFINITY
+native_color: redis:4 allocation score on galera-2: -INFINITY
+native_color: redis:4 allocation score on messaging-0: -INFINITY
+native_color: redis:4 allocation score on messaging-1: -INFINITY
+native_color: redis:4 allocation score on messaging-2: -INFINITY
+native_color: redis:5 allocation score on controller-0: -INFINITY
+native_color: redis:5 allocation score on controller-1: -INFINITY
+native_color: redis:5 allocation score on controller-2: -INFINITY
+native_color: redis:5 allocation score on galera-0: -INFINITY
+native_color: redis:5 allocation score on galera-1: -INFINITY
+native_color: redis:5 allocation score on galera-2: -INFINITY
+native_color: redis:5 allocation score on messaging-0: -INFINITY
+native_color: redis:5 allocation score on messaging-1: -INFINITY
+native_color: redis:5 allocation score on messaging-2: -INFINITY
+native_color: redis:6 allocation score on controller-0: -INFINITY
+native_color: redis:6 allocation score on controller-1: -INFINITY
+native_color: redis:6 allocation score on controller-2: -INFINITY
+native_color: redis:6 allocation score on galera-0: -INFINITY
+native_color: redis:6 allocation score on galera-1: -INFINITY
+native_color: redis:6 allocation score on galera-2: -INFINITY
+native_color: redis:6 allocation score on messaging-0: -INFINITY
+native_color: redis:6 allocation score on messaging-1: -INFINITY
+native_color: redis:6 allocation score on messaging-2: -INFINITY
+native_color: redis:7 allocation score on controller-0: -INFINITY
+native_color: redis:7 allocation score on controller-1: -INFINITY
+native_color: redis:7 allocation score on controller-2: -INFINITY
+native_color: redis:7 allocation score on galera-0: -INFINITY
+native_color: redis:7 allocation score on galera-1: -INFINITY
+native_color: redis:7 allocation score on galera-2: -INFINITY
+native_color: redis:7 allocation score on messaging-0: -INFINITY
+native_color: redis:7 allocation score on messaging-1: -INFINITY
+native_color: redis:7 allocation score on messaging-2: -INFINITY
+native_color: redis:8 allocation score on controller-0: -INFINITY
+native_color: redis:8 allocation score on controller-1: -INFINITY
+native_color: redis:8 allocation score on controller-2: -INFINITY
+native_color: redis:8 allocation score on galera-0: -INFINITY
+native_color: redis:8 allocation score on galera-1: -INFINITY
+native_color: redis:8 allocation score on galera-2: -INFINITY
+native_color: redis:8 allocation score on messaging-0: -INFINITY
+native_color: redis:8 allocation score on messaging-1: -INFINITY
+native_color: redis:8 allocation score on messaging-2: -INFINITY
+native_color: stonith-fence_ipmilan-5254005bdbb5 allocation score on controller-0: -INFINITY
+native_color: stonith-fence_ipmilan-5254005bdbb5 allocation score on controller-1: INFINITY
+native_color: stonith-fence_ipmilan-5254005bdbb5 allocation score on controller-2: 0
+native_color: stonith-fence_ipmilan-5254005bdbb5 allocation score on galera-0: -INFINITY
+native_color: stonith-fence_ipmilan-5254005bdbb5 allocation score on galera-1: -INFINITY
+native_color: stonith-fence_ipmilan-5254005bdbb5 allocation score on galera-2: -INFINITY
+native_color: stonith-fence_ipmilan-5254005bdbb5 allocation score on messaging-0: -INFINITY
+native_color: stonith-fence_ipmilan-5254005bdbb5 allocation score on messaging-1: -INFINITY
+native_color: stonith-fence_ipmilan-5254005bdbb5 allocation score on messaging-2: -INFINITY
+native_color: stonith-fence_ipmilan-525400b4f6bd allocation score on controller-0: INFINITY
+native_color: stonith-fence_ipmilan-525400b4f6bd allocation score on controller-1: -INFINITY
+native_color: stonith-fence_ipmilan-525400b4f6bd allocation score on controller-2: 0
+native_color: stonith-fence_ipmilan-525400b4f6bd allocation score on galera-0: -INFINITY
+native_color: stonith-fence_ipmilan-525400b4f6bd allocation score on galera-1: -INFINITY
+native_color: stonith-fence_ipmilan-525400b4f6bd allocation score on galera-2: -INFINITY
+native_color: stonith-fence_ipmilan-525400b4f6bd allocation score on messaging-0: -INFINITY
+native_color: stonith-fence_ipmilan-525400b4f6bd allocation score on messaging-1: -INFINITY
+native_color: stonith-fence_ipmilan-525400b4f6bd allocation score on messaging-2: -INFINITY
+native_color: stonith-fence_ipmilan-525400bbf613 allocation score on controller-0: INFINITY
+native_color: stonith-fence_ipmilan-525400bbf613 allocation score on controller-1: 0
+native_color: stonith-fence_ipmilan-525400bbf613 allocation score on controller-2: -INFINITY
+native_color: stonith-fence_ipmilan-525400bbf613 allocation score on galera-0: -INFINITY
+native_color: stonith-fence_ipmilan-525400bbf613 allocation score on galera-1: -INFINITY
+native_color: stonith-fence_ipmilan-525400bbf613 allocation score on galera-2: -INFINITY
+native_color: stonith-fence_ipmilan-525400bbf613 allocation score on messaging-0: -INFINITY
+native_color: stonith-fence_ipmilan-525400bbf613 allocation score on messaging-1: -INFINITY
+native_color: stonith-fence_ipmilan-525400bbf613 allocation score on messaging-2: -INFINITY
+redis:0 promotion score on none: 0
+redis:1 promotion score on controller-0: 1
+redis:2 promotion score on controller-2: 1
+redis:3 promotion score on none: 0
+redis:4 promotion score on none: 0
+redis:5 promotion score on none: 0
+redis:6 promotion score on none: 0
+redis:7 promotion score on none: 0
+redis:8 promotion score on none: 0
diff --git a/pengine/test10/remote-recover-unknown.summary b/pengine/test10/remote-recover-unknown.summary
new file mode 100644
index 0000000..7562f12
--- /dev/null
+++ b/pengine/test10/remote-recover-unknown.summary
@@ -0,0 +1,144 @@
+Using the original execution date of: 2017-05-03 13:33:24Z
+
+Current cluster status:
+Node controller-1 (2): UNCLEAN (offline)
+Online: [ controller-0 controller-2 ]
+RemoteOnline: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
+
+ messaging-0	(ocf::pacemaker:remote):	Started controller-0
+ messaging-1	(ocf::pacemaker:remote):	Started controller-1 (UNCLEAN)
+ messaging-2	(ocf::pacemaker:remote):	Started controller-0
+ galera-0	(ocf::pacemaker:remote):	Started controller-1 (UNCLEAN)
+ galera-1	(ocf::pacemaker:remote):	Started controller-0
+ galera-2	(ocf::pacemaker:remote):	Started controller-1 (UNCLEAN)
+ Clone Set: rabbitmq-clone [rabbitmq]
+     Started: [ messaging-0 messaging-1 messaging-2 ]
+     Stopped: [ controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 ]
+ Master/Slave Set: galera-master [galera]
+     Masters: [ galera-0 galera-1 ]
+     Stopped: [ controller-0 controller-1 controller-2 galera-2 messaging-0 messaging-1 messaging-2 ]
+ Master/Slave Set: redis-master [redis]
+     redis	(ocf::heartbeat:redis):	Slave controller-1 (UNCLEAN)
+     Masters: [ controller-0 ]
+     Slaves: [ controller-2 ]
+     Stopped: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
+ ip-192.168.24.6	(ocf::heartbeat:IPaddr2):	Started controller-0
+ ip-10.0.0.102	(ocf::heartbeat:IPaddr2):	Started controller-0
+ ip-172.17.1.14	(ocf::heartbeat:IPaddr2):	Started controller-1 (UNCLEAN)
+ ip-172.17.1.17	(ocf::heartbeat:IPaddr2):	Started controller-1 (UNCLEAN)
+ ip-172.17.3.15	(ocf::heartbeat:IPaddr2):	Started controller-0
+ ip-172.17.4.11	(ocf::heartbeat:IPaddr2):	Started controller-1 (UNCLEAN)
+ Clone Set: haproxy-clone [haproxy]
+     haproxy	(systemd:haproxy):	Started controller-1 (UNCLEAN)
+     Started: [ controller-0 controller-2 ]
+     Stopped: [ galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
+ openstack-cinder-volume	(systemd:openstack-cinder-volume):	Started controller-0
+ stonith-fence_ipmilan-525400bbf613	(stonith:fence_ipmilan):	Started controller-0
+ stonith-fence_ipmilan-525400b4f6bd	(stonith:fence_ipmilan):	Started controller-0
+ stonith-fence_ipmilan-5254005bdbb5	(stonith:fence_ipmilan):	Started controller-1 (UNCLEAN)
+
+Transition Summary:
+ * Stop    messaging-1	(controller-1)
+ * Move    galera-0	(Started controller-1 -> controller-2)
+ * Stop    galera-2	(controller-1)
+ * Stop    rabbitmq:2	(messaging-1)
+ * Stop    redis:0	(controller-1)
+ * Move    ip-172.17.1.14	(Started controller-1 -> controller-2)
+ * Move    ip-172.17.1.17	(Started controller-1 -> controller-2)
+ * Move    ip-172.17.4.11	(Started controller-1 -> controller-2)
+ * Stop    haproxy:0	(controller-1)
+ * Restart stonith-fence_ipmilan-525400bbf613	(Started controller-0)
+ * Restart stonith-fence_ipmilan-525400b4f6bd	(Started controller-0)
+ * Move    stonith-fence_ipmilan-5254005bdbb5	(Started controller-1 -> controller-2)
+
+Executing cluster transition:
+ * Pseudo action:   redis-master_pre_notify_stop_0
+ * Resource action: stonith-fence_ipmilan-525400bbf613 stop on controller-0
+ * Resource action: stonith-fence_ipmilan-525400b4f6bd stop on controller-0
+ * Pseudo action:   stonith-fence_ipmilan-5254005bdbb5_stop_0
+ * Fencing controller-1 (reboot)
+ * Pseudo action:   galera-0_stop_0
+ * Pseudo action:   galera-2_stop_0
+ * Pseudo action:   redis_post_notify_stop_0
+ * Resource action: redis           notify on controller-0
+ * Resource action: redis           notify on controller-2
+ * Pseudo action:   redis-master_confirmed-pre_notify_stop_0
+ * Pseudo action:   redis-master_stop_0
+ * Pseudo action:   haproxy-clone_stop_0
+ * Fencing galera-2 (reboot)
+ * Pseudo action:   redis_stop_0
+ * Pseudo action:   redis-master_stopped_0
+ * Pseudo action:   haproxy_stop_0
+ * Pseudo action:   haproxy-clone_stopped_0
+ * Fencing messaging-1 (reboot)
+ * Pseudo action:   stonith_complete
+ * Resource action: galera-0        start on controller-2
+ * Pseudo action:   rabbitmq_post_notify_stop_0
+ * Pseudo action:   rabbitmq-clone_stop_0
+ * Resource action: galera          monitor=10000 on galera-0
+ * Pseudo action:   redis-master_post_notify_stopped_0
+ * Pseudo action:   ip-172.17.1.14_stop_0
+ * Pseudo action:   ip-172.17.1.17_stop_0
+ * Pseudo action:   ip-172.17.4.11_stop_0
+ * Resource action: galera-0        monitor=20000 on controller-2
+ * Resource action: rabbitmq        notify on messaging-2
+ * Resource action: rabbitmq        notify on messaging-0
+ * Pseudo action:   rabbitmq_notified_0
+ * Pseudo action:   rabbitmq_stop_0
+ * Pseudo action:   rabbitmq-clone_stopped_0
+ * Resource action: redis           notify on controller-0
+ * Resource action: redis           notify on controller-2
+ * Pseudo action:   redis-master_confirmed-post_notify_stopped_0
+ * Resource action: ip-172.17.1.14  start on controller-2
+ * Resource action: ip-172.17.1.17  start on controller-2
+ * Resource action: ip-172.17.4.11  start on controller-2
+ * Pseudo action:   messaging-1_stop_0
+ * Pseudo action:   redis_notified_0
+ * Resource action: ip-172.17.1.14  monitor=10000 on controller-2
+ * Resource action: ip-172.17.1.17  monitor=10000 on controller-2
+ * Resource action: ip-172.17.4.11  monitor=10000 on controller-2
+ * Pseudo action:   all_stopped
+ * Resource action: stonith-fence_ipmilan-525400bbf613 start on controller-0
+ * Resource action: stonith-fence_ipmilan-525400bbf613 monitor=60000 on controller-0
+ * Resource action: stonith-fence_ipmilan-525400b4f6bd start on controller-0
+ * Resource action: stonith-fence_ipmilan-525400b4f6bd monitor=60000 on controller-0
+ * Resource action: stonith-fence_ipmilan-5254005bdbb5 start on controller-2
+ * Resource action: stonith-fence_ipmilan-5254005bdbb5 monitor=60000 on controller-2
+Using the original execution date of: 2017-05-03 13:33:24Z
+
+Revised cluster status:
+Online: [ controller-0 controller-2 ]
+OFFLINE: [ controller-1 ]
+RemoteOnline: [ galera-0 galera-1 messaging-0 messaging-2 ]
+RemoteOFFLINE: [ galera-2 messaging-1 ]
+
+ messaging-0	(ocf::pacemaker:remote):	Started controller-0
+ messaging-1	(ocf::pacemaker:remote):	Stopped
+ messaging-2	(ocf::pacemaker:remote):	Started controller-0
+ galera-0	(ocf::pacemaker:remote):	Started controller-2
+ galera-1	(ocf::pacemaker:remote):	Started controller-0
+ galera-2	(ocf::pacemaker:remote):	Stopped
+ Clone Set: rabbitmq-clone [rabbitmq]
+     Started: [ messaging-0 messaging-2 ]
+     Stopped: [ controller-0 controller-1 controller-2 galera-0 galera-1 galera-2 messaging-1 ]
+ Master/Slave Set: galera-master [galera]
+     Masters: [ galera-0 galera-1 ]
+     Stopped: [ controller-0 controller-1 controller-2 galera-2 messaging-0 messaging-1 messaging-2 ]
+ Master/Slave Set: redis-master [redis]
+     Masters: [ controller-0 ]
+     Slaves: [ controller-2 ]
+     Stopped: [ controller-1 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
+ ip-192.168.24.6	(ocf::heartbeat:IPaddr2):	Started controller-0
+ ip-10.0.0.102	(ocf::heartbeat:IPaddr2):	Started controller-0
+ ip-172.17.1.14	(ocf::heartbeat:IPaddr2):	Started controller-2
+ ip-172.17.1.17	(ocf::heartbeat:IPaddr2):	Started controller-2
+ ip-172.17.3.15	(ocf::heartbeat:IPaddr2):	Started controller-0
+ ip-172.17.4.11	(ocf::heartbeat:IPaddr2):	Started controller-2
+ Clone Set: haproxy-clone [haproxy]
+     Started: [ controller-0 controller-2 ]
+     Stopped: [ controller-1 galera-0 galera-1 galera-2 messaging-0 messaging-1 messaging-2 ]
+ openstack-cinder-volume	(systemd:openstack-cinder-volume):	Started controller-0
+ stonith-fence_ipmilan-525400bbf613	(stonith:fence_ipmilan):	Started controller-0
+ stonith-fence_ipmilan-525400b4f6bd	(stonith:fence_ipmilan):	Started controller-0
+ stonith-fence_ipmilan-5254005bdbb5	(stonith:fence_ipmilan):	Started controller-2
+
diff --git a/pengine/test10/remote-recover-unknown.xml b/pengine/test10/remote-recover-unknown.xml
new file mode 100644
index 0000000..3992b03
--- /dev/null
+++ b/pengine/test10/remote-recover-unknown.xml
@@ -0,0 +1,734 @@
+<cib crm_feature_set="3.0.10" validate-with="pacemaker-2.5" epoch="183" num_updates="0" admin_epoch="0" cib-last-written="Wed May  3 13:24:28 2017" update-origin="controller-0" update-client="crm_attribute" update-user="root" have-quorum="1" dc-uuid="1" execution-date="1493818404">
+  <configuration>
+    <crm_config>
+      <cluster_property_set id="cib-bootstrap-options">
+        <nvpair id="cib-bootstrap-options-have-watchdog" name="have-watchdog" value="false"/>
+        <nvpair id="cib-bootstrap-options-dc-version" name="dc-version" value="1.1.15-11.el7_3.4-e174ec8"/>
+        <nvpair id="cib-bootstrap-options-cluster-infrastructure" name="cluster-infrastructure" value="corosync"/>
+        <nvpair id="cib-bootstrap-options-cluster-name" name="cluster-name" value="tripleo_cluster"/>
+        <nvpair id="cib-bootstrap-options-stonith-enabled" name="stonith-enabled" value="true"/>
+        <nvpair id="cib-bootstrap-options-cluster-recheck-interval" name="cluster-recheck-interval" value="60s"/>
+        <nvpair id="cib-bootstrap-options-maintenance-mode" name="maintenance-mode" value="false"/>
+        <nvpair id="cib-bootstrap-options-last-lrm-refresh" name="last-lrm-refresh" value="1493817755"/>
+      </cluster_property_set>
+      <cluster_property_set id="redis_replication">
+        <nvpair id="redis_replication-redis_REPL_INFO" name="redis_REPL_INFO" value="controller-0"/>
+      </cluster_property_set>
+    </crm_config>
+    <nodes>
+      <node id="1" uname="controller-0">
+        <instance_attributes id="nodes-1">
+          <nvpair id="nodes-1-cinder-volume-role" name="cinder-volume-role" value="true"/>
+          <nvpair id="nodes-1-haproxy-role" name="haproxy-role" value="true"/>
+          <nvpair id="nodes-1-redis-role" name="redis-role" value="true"/>
+        </instance_attributes>
+      </node>
+      <node id="2" uname="controller-1">
+        <instance_attributes id="nodes-2">
+          <nvpair id="nodes-2-cinder-volume-role" name="cinder-volume-role" value="true"/>
+          <nvpair id="nodes-2-haproxy-role" name="haproxy-role" value="true"/>
+          <nvpair id="nodes-2-redis-role" name="redis-role" value="true"/>
+        </instance_attributes>
+      </node>
+      <node id="3" uname="controller-2">
+        <instance_attributes id="nodes-3">
+          <nvpair id="nodes-3-cinder-volume-role" name="cinder-volume-role" value="true"/>
+          <nvpair id="nodes-3-haproxy-role" name="haproxy-role" value="true"/>
+          <nvpair id="nodes-3-redis-role" name="redis-role" value="true"/>
+        </instance_attributes>
+      </node>
+      <node id="messaging-1" type="remote" uname="messaging-1">
+        <instance_attributes id="nodes-messaging-1">
+          <nvpair id="nodes-messaging-1-rabbitmq-role" name="rabbitmq-role" value="true"/>
+          <nvpair id="nodes-messaging-1-rmq-node-attr-last-known-rabbitmq" name="rmq-node-attr-last-known-rabbitmq" value="rabbit@messaging-1"/>
+        </instance_attributes>
+      </node>
+      <node id="galera-1" type="remote" uname="galera-1">
+        <instance_attributes id="nodes-galera-1">
+          <nvpair id="nodes-galera-1-galera-role" name="galera-role" value="true"/>
+        </instance_attributes>
+      </node>
+      <node id="messaging-0" type="remote" uname="messaging-0">
+        <instance_attributes id="nodes-messaging-0">
+          <nvpair id="nodes-messaging-0-rabbitmq-role" name="rabbitmq-role" value="true"/>
+          <nvpair id="nodes-messaging-0-rmq-node-attr-last-known-rabbitmq" name="rmq-node-attr-last-known-rabbitmq" value="rabbit@messaging-0"/>
+        </instance_attributes>
+      </node>
+      <node id="galera-2" type="remote" uname="galera-2">
+        <instance_attributes id="nodes-galera-2">
+          <nvpair id="nodes-galera-2-galera-role" name="galera-role" value="true"/>
+        </instance_attributes>
+      </node>
+      <node id="messaging-2" type="remote" uname="messaging-2">
+        <instance_attributes id="nodes-messaging-2">
+          <nvpair id="nodes-messaging-2-rabbitmq-role" name="rabbitmq-role" value="true"/>
+          <nvpair id="nodes-messaging-2-rmq-node-attr-last-known-rabbitmq" name="rmq-node-attr-last-known-rabbitmq" value="rabbit@messaging-2"/>
+        </instance_attributes>
+      </node>
+      <node id="galera-0" type="remote" uname="galera-0">
+        <instance_attributes id="nodes-galera-0">
+          <nvpair id="nodes-galera-0-galera-role" name="galera-role" value="true"/>
+        </instance_attributes>
+      </node>
+    </nodes>
+    <resources>
+      <primitive class="ocf" id="messaging-0" provider="pacemaker" type="remote">
+        <instance_attributes id="messaging-0-instance_attributes">
+          <nvpair id="messaging-0-instance_attributes-reconnect_interval" name="reconnect_interval" value="60"/>
+        </instance_attributes>
+        <operations>
+          <op id="messaging-0-start-interval-0s" interval="0s" name="start" timeout="60"/>
+          <op id="messaging-0-stop-interval-0s" interval="0s" name="stop" timeout="60"/>
+          <op id="messaging-0-monitor-interval-20" interval="20" name="monitor"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="messaging-1" provider="pacemaker" type="remote">
+        <instance_attributes id="messaging-1-instance_attributes">
+          <nvpair id="messaging-1-instance_attributes-reconnect_interval" name="reconnect_interval" value="60"/>
+        </instance_attributes>
+        <operations>
+          <op id="messaging-1-start-interval-0s" interval="0s" name="start" timeout="60"/>
+          <op id="messaging-1-stop-interval-0s" interval="0s" name="stop" timeout="60"/>
+          <op id="messaging-1-monitor-interval-20" interval="20" name="monitor"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="messaging-2" provider="pacemaker" type="remote">
+        <instance_attributes id="messaging-2-instance_attributes">
+          <nvpair id="messaging-2-instance_attributes-reconnect_interval" name="reconnect_interval" value="60"/>
+        </instance_attributes>
+        <operations>
+          <op id="messaging-2-start-interval-0s" interval="0s" name="start" timeout="60"/>
+          <op id="messaging-2-stop-interval-0s" interval="0s" name="stop" timeout="60"/>
+          <op id="messaging-2-monitor-interval-20" interval="20" name="monitor"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="galera-0" provider="pacemaker" type="remote">
+        <instance_attributes id="galera-0-instance_attributes">
+          <nvpair id="galera-0-instance_attributes-reconnect_interval" name="reconnect_interval" value="60"/>
+        </instance_attributes>
+        <operations>
+          <op id="galera-0-start-interval-0s" interval="0s" name="start" timeout="60"/>
+          <op id="galera-0-stop-interval-0s" interval="0s" name="stop" timeout="60"/>
+          <op id="galera-0-monitor-interval-20" interval="20" name="monitor"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="galera-1" provider="pacemaker" type="remote">
+        <instance_attributes id="galera-1-instance_attributes">
+          <nvpair id="galera-1-instance_attributes-reconnect_interval" name="reconnect_interval" value="60"/>
+        </instance_attributes>
+        <operations>
+          <op id="galera-1-start-interval-0s" interval="0s" name="start" timeout="60"/>
+          <op id="galera-1-stop-interval-0s" interval="0s" name="stop" timeout="60"/>
+          <op id="galera-1-monitor-interval-20" interval="20" name="monitor"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="galera-2" provider="pacemaker" type="remote">
+        <instance_attributes id="galera-2-instance_attributes">
+          <nvpair id="galera-2-instance_attributes-reconnect_interval" name="reconnect_interval" value="60"/>
+        </instance_attributes>
+        <operations>
+          <op id="galera-2-start-interval-0s" interval="0s" name="start" timeout="60"/>
+          <op id="galera-2-stop-interval-0s" interval="0s" name="stop" timeout="60"/>
+          <op id="galera-2-monitor-interval-20" interval="20" name="monitor"/>
+        </operations>
+      </primitive>
+      <clone id="rabbitmq-clone">
+        <primitive class="ocf" id="rabbitmq" provider="heartbeat" type="rabbitmq-cluster">
+          <instance_attributes id="rabbitmq-instance_attributes">
+            <nvpair id="rabbitmq-instance_attributes-set_policy" name="set_policy" value="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;exactly&quot;,&quot;ha-params&quot;:2}"/>
+          </instance_attributes>
+          <meta_attributes id="rabbitmq-meta_attributes">
+            <nvpair id="rabbitmq-meta_attributes-notify" name="notify" value="true"/>
+          </meta_attributes>
+          <operations>
+            <op id="rabbitmq-monitor-interval-10" interval="10" name="monitor" timeout="40"/>
+            <op id="rabbitmq-start-interval-0s" interval="0s" name="start" timeout="200s"/>
+            <op id="rabbitmq-stop-interval-0s" interval="0s" name="stop" timeout="200s"/>
+          </operations>
+        </primitive>
+        <meta_attributes id="rabbitmq-clone-meta_attributes">
+          <nvpair id="rabbitmq-clone-meta_attributes-interleave" name="interleave" value="true"/>
+          <nvpair id="rabbitmq-clone-meta_attributes-ordered" name="ordered" value="true"/>
+        </meta_attributes>
+      </clone>
+      <master id="galera-master">
+        <primitive class="ocf" id="galera" provider="heartbeat" type="galera">
+          <instance_attributes id="galera-instance_attributes">
+            <nvpair id="galera-instance_attributes-additional_parameters" name="additional_parameters" value="--open-files-limit=16384"/>
+            <nvpair id="galera-instance_attributes-enable_creation" name="enable_creation" value="true"/>
+            <nvpair id="galera-instance_attributes-wsrep_cluster_address" name="wsrep_cluster_address" value="gcomm://galera-0,galera-1,galera-2"/>
+          </instance_attributes>
+          <operations>
+            <op id="galera-start-interval-0s" interval="0s" name="start" timeout="120"/>
+            <op id="galera-stop-interval-0s" interval="0s" name="stop" timeout="120"/>
+            <op id="galera-monitor-interval-20" interval="20" name="monitor" timeout="30"/>
+            <op id="galera-monitor-interval-10" interval="10" name="monitor" role="Master" timeout="30"/>
+            <op id="galera-monitor-interval-30" interval="30" name="monitor" role="Slave" timeout="30"/>
+            <op id="galera-demote-interval-0s" interval="0s" name="demote" timeout="120"/>
+            <op id="galera-promote-interval-0s" interval="0s" name="promote" on-fail="block" timeout="300s"/>
+          </operations>
+        </primitive>
+        <meta_attributes id="galera-master-meta_attributes">
+          <nvpair id="galera-master-meta_attributes-ordered" name="ordered" value="true"/>
+          <nvpair id="galera-master-meta_attributes-master-max" name="master-max" value="3"/>
+        </meta_attributes>
+      </master>
+      <master id="redis-master">
+        <primitive class="ocf" id="redis" provider="heartbeat" type="redis">
+          <instance_attributes id="redis-instance_attributes">
+            <nvpair id="redis-instance_attributes-wait_last_known_master" name="wait_last_known_master" value="true"/>
+          </instance_attributes>
+          <operations>
+            <op id="redis-monitor-interval-45" interval="45" name="monitor" timeout="60"/>
+            <op id="redis-monitor-interval-20" interval="20" name="monitor" role="Master" timeout="60"/>
+            <op id="redis-monitor-interval-60" interval="60" name="monitor" role="Slave" timeout="60"/>
+            <op id="redis-promote-interval-0s" interval="0s" name="promote" timeout="120"/>
+            <op id="redis-demote-interval-0s" interval="0s" name="demote" timeout="120"/>
+            <op id="redis-start-interval-0s" interval="0s" name="start" timeout="200s"/>
+            <op id="redis-stop-interval-0s" interval="0s" name="stop" timeout="200s"/>
+          </operations>
+        </primitive>
+        <meta_attributes id="redis-master-meta_attributes">
+          <nvpair id="redis-master-meta_attributes-interleave" name="interleave" value="true"/>
+          <nvpair id="redis-master-meta_attributes-ordered" name="ordered" value="true"/>
+          <nvpair id="redis-master-meta_attributes-notify" name="notify" value="true"/>
+        </meta_attributes>
+      </master>
+      <primitive class="ocf" id="ip-192.168.24.6" provider="heartbeat" type="IPaddr2">
+        <instance_attributes id="ip-192.168.24.6-instance_attributes">
+          <nvpair id="ip-192.168.24.6-instance_attributes-ip" name="ip" value="192.168.24.6"/>
+          <nvpair id="ip-192.168.24.6-instance_attributes-cidr_netmask" name="cidr_netmask" value="32"/>
+        </instance_attributes>
+        <meta_attributes id="ip-192.168.24.6-meta_attributes"/>
+        <operations>
+          <op id="ip-192.168.24.6-start-interval-0s" interval="0s" name="start" timeout="20s"/>
+          <op id="ip-192.168.24.6-stop-interval-0s" interval="0s" name="stop" timeout="20s"/>
+          <op id="ip-192.168.24.6-monitor-interval-10s" interval="10s" name="monitor" timeout="20s"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="ip-10.0.0.102" provider="heartbeat" type="IPaddr2">
+        <instance_attributes id="ip-10.0.0.102-instance_attributes">
+          <nvpair id="ip-10.0.0.102-instance_attributes-ip" name="ip" value="10.0.0.102"/>
+          <nvpair id="ip-10.0.0.102-instance_attributes-cidr_netmask" name="cidr_netmask" value="32"/>
+        </instance_attributes>
+        <meta_attributes id="ip-10.0.0.102-meta_attributes"/>
+        <operations>
+          <op id="ip-10.0.0.102-start-interval-0s" interval="0s" name="start" timeout="20s"/>
+          <op id="ip-10.0.0.102-stop-interval-0s" interval="0s" name="stop" timeout="20s"/>
+          <op id="ip-10.0.0.102-monitor-interval-10s" interval="10s" name="monitor" timeout="20s"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="ip-172.17.1.14" provider="heartbeat" type="IPaddr2">
+        <instance_attributes id="ip-172.17.1.14-instance_attributes">
+          <nvpair id="ip-172.17.1.14-instance_attributes-ip" name="ip" value="172.17.1.14"/>
+          <nvpair id="ip-172.17.1.14-instance_attributes-cidr_netmask" name="cidr_netmask" value="32"/>
+        </instance_attributes>
+        <meta_attributes id="ip-172.17.1.14-meta_attributes"/>
+        <operations>
+          <op id="ip-172.17.1.14-start-interval-0s" interval="0s" name="start" timeout="20s"/>
+          <op id="ip-172.17.1.14-stop-interval-0s" interval="0s" name="stop" timeout="20s"/>
+          <op id="ip-172.17.1.14-monitor-interval-10s" interval="10s" name="monitor" timeout="20s"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="ip-172.17.1.17" provider="heartbeat" type="IPaddr2">
+        <instance_attributes id="ip-172.17.1.17-instance_attributes">
+          <nvpair id="ip-172.17.1.17-instance_attributes-ip" name="ip" value="172.17.1.17"/>
+          <nvpair id="ip-172.17.1.17-instance_attributes-cidr_netmask" name="cidr_netmask" value="32"/>
+        </instance_attributes>
+        <meta_attributes id="ip-172.17.1.17-meta_attributes"/>
+        <operations>
+          <op id="ip-172.17.1.17-start-interval-0s" interval="0s" name="start" timeout="20s"/>
+          <op id="ip-172.17.1.17-stop-interval-0s" interval="0s" name="stop" timeout="20s"/>
+          <op id="ip-172.17.1.17-monitor-interval-10s" interval="10s" name="monitor" timeout="20s"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="ip-172.17.3.15" provider="heartbeat" type="IPaddr2">
+        <instance_attributes id="ip-172.17.3.15-instance_attributes">
+          <nvpair id="ip-172.17.3.15-instance_attributes-ip" name="ip" value="172.17.3.15"/>
+          <nvpair id="ip-172.17.3.15-instance_attributes-cidr_netmask" name="cidr_netmask" value="32"/>
+        </instance_attributes>
+        <meta_attributes id="ip-172.17.3.15-meta_attributes"/>
+        <operations>
+          <op id="ip-172.17.3.15-start-interval-0s" interval="0s" name="start" timeout="20s"/>
+          <op id="ip-172.17.3.15-stop-interval-0s" interval="0s" name="stop" timeout="20s"/>
+          <op id="ip-172.17.3.15-monitor-interval-10s" interval="10s" name="monitor" timeout="20s"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="ip-172.17.4.11" provider="heartbeat" type="IPaddr2">
+        <instance_attributes id="ip-172.17.4.11-instance_attributes">
+          <nvpair id="ip-172.17.4.11-instance_attributes-ip" name="ip" value="172.17.4.11"/>
+          <nvpair id="ip-172.17.4.11-instance_attributes-cidr_netmask" name="cidr_netmask" value="32"/>
+        </instance_attributes>
+        <meta_attributes id="ip-172.17.4.11-meta_attributes"/>
+        <operations>
+          <op id="ip-172.17.4.11-start-interval-0s" interval="0s" name="start" timeout="20s"/>
+          <op id="ip-172.17.4.11-stop-interval-0s" interval="0s" name="stop" timeout="20s"/>
+          <op id="ip-172.17.4.11-monitor-interval-10s" interval="10s" name="monitor" timeout="20s"/>
+        </operations>
+      </primitive>
+      <clone id="haproxy-clone">
+        <primitive class="systemd" id="haproxy" type="haproxy">
+          <instance_attributes id="haproxy-instance_attributes"/>
+          <meta_attributes id="haproxy-meta_attributes"/>
+          <operations>
+            <op id="haproxy-start-interval-0s" interval="0s" name="start" timeout="200s"/>
+            <op id="haproxy-stop-interval-0s" interval="0s" name="stop" timeout="200s"/>
+            <op id="haproxy-monitor-interval-60s" interval="60s" name="monitor"/>
+          </operations>
+        </primitive>
+        <meta_attributes id="haproxy-clone-meta_attributes"/>
+      </clone>
+      <primitive class="systemd" id="openstack-cinder-volume" type="openstack-cinder-volume">
+        <instance_attributes id="openstack-cinder-volume-instance_attributes"/>
+        <meta_attributes id="openstack-cinder-volume-meta_attributes"/>
+        <operations>
+          <op id="openstack-cinder-volume-start-interval-0s" interval="0s" name="start" timeout="200s"/>
+          <op id="openstack-cinder-volume-stop-interval-0s" interval="0s" name="stop" timeout="200s"/>
+          <op id="openstack-cinder-volume-monitor-interval-60s" interval="60s" name="monitor"/>
+        </operations>
+      </primitive>
+      <primitive class="stonith" id="stonith-fence_ipmilan-525400bbf613" type="fence_ipmilan">
+        <instance_attributes id="stonith-fence_ipmilan-525400bbf613-instance_attributes">
+          <nvpair id="stonith-fence_ipmilan-525400bbf613-instance_attributes-pcmk_host_list" name="pcmk_host_list" value="controller-2"/>
+          <nvpair id="stonith-fence_ipmilan-525400bbf613-instance_attributes-ipaddr" name="ipaddr" value="172.16.0.1"/>
+          <nvpair id="stonith-fence_ipmilan-525400bbf613-instance_attributes-ipport" name="ipport" value="6237"/>
+          <nvpair id="stonith-fence_ipmilan-525400bbf613-instance_attributes-passwd" name="passwd" value="****"/>
+          <nvpair id="stonith-fence_ipmilan-525400bbf613-instance_attributes-lanplus" name="lanplus" value="true"/>
+          <nvpair id="stonith-fence_ipmilan-525400bbf613-instance_attributes-login" name="login" value="admin"/>
+          <nvpair id="stonith-fence_ipmilan-525400bbf613-instance_attributes-action" name="action" value="reboot"/>
+          <nvpair id="stonith-fence_ipmilan-525400bbf613-instance_attributes-privlvl" name="privlvl" value="administrator"/>
+        </instance_attributes>
+        <operations>
+          <op id="stonith-fence_ipmilan-525400bbf613-monitor-interval-60s" interval="60s" name="monitor"/>
+        </operations>
+        <meta_attributes id="stonith-fence_ipmilan-525400bbf613-meta_attributes"/>
+      </primitive>
+      <primitive class="stonith" id="stonith-fence_ipmilan-525400b4f6bd" type="fence_ipmilan">
+        <instance_attributes id="stonith-fence_ipmilan-525400b4f6bd-instance_attributes">
+          <nvpair id="stonith-fence_ipmilan-525400b4f6bd-instance_attributes-pcmk_host_list" name="pcmk_host_list" value="controller-1"/>
+          <nvpair id="stonith-fence_ipmilan-525400b4f6bd-instance_attributes-ipaddr" name="ipaddr" value="172.16.0.1"/>
+          <nvpair id="stonith-fence_ipmilan-525400b4f6bd-instance_attributes-ipport" name="ipport" value="6236"/>
+          <nvpair id="stonith-fence_ipmilan-525400b4f6bd-instance_attributes-passwd" name="passwd" value="****"/>
+          <nvpair id="stonith-fence_ipmilan-525400b4f6bd-instance_attributes-lanplus" name="lanplus" value="true"/>
+          <nvpair id="stonith-fence_ipmilan-525400b4f6bd-instance_attributes-login" name="login" value="admin"/>
+          <nvpair id="stonith-fence_ipmilan-525400b4f6bd-instance_attributes-action" name="action" value="reboot"/>
+          <nvpair id="stonith-fence_ipmilan-525400b4f6bd-instance_attributes-privlvl" name="privlvl" value="administrator"/>
+        </instance_attributes>
+        <operations>
+          <op id="stonith-fence_ipmilan-525400b4f6bd-monitor-interval-60s" interval="60s" name="monitor"/>
+        </operations>
+        <meta_attributes id="stonith-fence_ipmilan-525400b4f6bd-meta_attributes"/>
+      </primitive>
+      <primitive class="stonith" id="stonith-fence_ipmilan-5254005bdbb5" type="fence_ipmilan">
+        <instance_attributes id="stonith-fence_ipmilan-5254005bdbb5-instance_attributes">
+          <nvpair id="stonith-fence_ipmilan-5254005bdbb5-instance_attributes-pcmk_host_list" name="pcmk_host_list" value="controller-0"/>
+          <nvpair id="stonith-fence_ipmilan-5254005bdbb5-instance_attributes-ipaddr" name="ipaddr" value="172.16.0.1"/>
+          <nvpair id="stonith-fence_ipmilan-5254005bdbb5-instance_attributes-ipport" name="ipport" value="6235"/>
+          <nvpair id="stonith-fence_ipmilan-5254005bdbb5-instance_attributes-passwd" name="passwd" value="****"/>
+          <nvpair id="stonith-fence_ipmilan-5254005bdbb5-instance_attributes-lanplus" name="lanplus" value="true"/>
+          <nvpair id="stonith-fence_ipmilan-5254005bdbb5-instance_attributes-login" name="login" value="admin"/>
+          <nvpair id="stonith-fence_ipmilan-5254005bdbb5-instance_attributes-action" name="action" value="reboot"/>
+          <nvpair id="stonith-fence_ipmilan-5254005bdbb5-instance_attributes-privlvl" name="privlvl" value="administrator"/>
+        </instance_attributes>
+        <operations>
+          <op id="stonith-fence_ipmilan-5254005bdbb5-monitor-interval-60s" interval="60s" name="monitor"/>
+        </operations>
+        <meta_attributes id="stonith-fence_ipmilan-5254005bdbb5-meta_attributes"/>
+      </primitive>
+    </resources>
+    <constraints>
+      <rsc_location id="location-rabbitmq-clone" resource-discovery="exclusive" rsc="rabbitmq-clone">
+        <rule id="location-rabbitmq-clone-rule" score="0">
+          <expression attribute="rabbitmq-role" id="location-rabbitmq-clone-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-galera-master" resource-discovery="exclusive" rsc="galera-master">
+        <rule id="location-galera-master-rule" score="0">
+          <expression attribute="galera-role" id="location-galera-master-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-redis-master" resource-discovery="exclusive" rsc="redis-master">
+        <rule id="location-redis-master-rule" score="0">
+          <expression attribute="redis-role" id="location-redis-master-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-ip-192.168.24.6" resource-discovery="exclusive" rsc="ip-192.168.24.6">
+        <rule id="location-ip-192.168.24.6-rule" score="0">
+          <expression attribute="haproxy-role" id="location-ip-192.168.24.6-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-ip-10.0.0.102" resource-discovery="exclusive" rsc="ip-10.0.0.102">
+        <rule id="location-ip-10.0.0.102-rule" score="0">
+          <expression attribute="haproxy-role" id="location-ip-10.0.0.102-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-ip-172.17.1.14" resource-discovery="exclusive" rsc="ip-172.17.1.14">
+        <rule id="location-ip-172.17.1.14-rule" score="0">
+          <expression attribute="haproxy-role" id="location-ip-172.17.1.14-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-ip-172.17.1.17" resource-discovery="exclusive" rsc="ip-172.17.1.17">
+        <rule id="location-ip-172.17.1.17-rule" score="0">
+          <expression attribute="haproxy-role" id="location-ip-172.17.1.17-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-ip-172.17.3.15" resource-discovery="exclusive" rsc="ip-172.17.3.15">
+        <rule id="location-ip-172.17.3.15-rule" score="0">
+          <expression attribute="haproxy-role" id="location-ip-172.17.3.15-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-ip-172.17.4.11" resource-discovery="exclusive" rsc="ip-172.17.4.11">
+        <rule id="location-ip-172.17.4.11-rule" score="0">
+          <expression attribute="haproxy-role" id="location-ip-172.17.4.11-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-haproxy-clone" resource-discovery="exclusive" rsc="haproxy-clone">
+        <rule id="location-haproxy-clone-rule" score="0">
+          <expression attribute="haproxy-role" id="location-haproxy-clone-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_order first="ip-192.168.24.6" first-action="start" id="order-ip-192.168.24.6-haproxy-clone-Optional" kind="Optional" then="haproxy-clone" then-action="start"/>
+      <rsc_colocation id="colocation-ip-192.168.24.6-haproxy-clone-INFINITY" rsc="ip-192.168.24.6" score="INFINITY" with-rsc="haproxy-clone"/>
+      <rsc_order first="ip-10.0.0.102" first-action="start" id="order-ip-10.0.0.102-haproxy-clone-Optional" kind="Optional" then="haproxy-clone" then-action="start"/>
+      <rsc_colocation id="colocation-ip-10.0.0.102-haproxy-clone-INFINITY" rsc="ip-10.0.0.102" score="INFINITY" with-rsc="haproxy-clone"/>
+      <rsc_order first="ip-172.17.1.14" first-action="start" id="order-ip-172.17.1.14-haproxy-clone-Optional" kind="Optional" then="haproxy-clone" then-action="start"/>
+      <rsc_colocation id="colocation-ip-172.17.1.14-haproxy-clone-INFINITY" rsc="ip-172.17.1.14" score="INFINITY" with-rsc="haproxy-clone"/>
+      <rsc_order first="ip-172.17.1.17" first-action="start" id="order-ip-172.17.1.17-haproxy-clone-Optional" kind="Optional" then="haproxy-clone" then-action="start"/>
+      <rsc_colocation id="colocation-ip-172.17.1.17-haproxy-clone-INFINITY" rsc="ip-172.17.1.17" score="INFINITY" with-rsc="haproxy-clone"/>
+      <rsc_order first="ip-172.17.3.15" first-action="start" id="order-ip-172.17.3.15-haproxy-clone-Optional" kind="Optional" then="haproxy-clone" then-action="start"/>
+      <rsc_colocation id="colocation-ip-172.17.3.15-haproxy-clone-INFINITY" rsc="ip-172.17.3.15" score="INFINITY" with-rsc="haproxy-clone"/>
+      <rsc_order first="ip-172.17.4.11" first-action="start" id="order-ip-172.17.4.11-haproxy-clone-Optional" kind="Optional" then="haproxy-clone" then-action="start"/>
+      <rsc_colocation id="colocation-ip-172.17.4.11-haproxy-clone-INFINITY" rsc="ip-172.17.4.11" score="INFINITY" with-rsc="haproxy-clone"/>
+      <rsc_location id="location-openstack-cinder-volume" resource-discovery="exclusive" rsc="openstack-cinder-volume">
+        <rule id="location-openstack-cinder-volume-rule" score="0">
+          <expression attribute="cinder-volume-role" id="location-openstack-cinder-volume-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-stonith-fence_ipmilan-525400bbf613-controller-2--INFINITY" node="controller-2" rsc="stonith-fence_ipmilan-525400bbf613" score="-INFINITY"/>
+      <rsc_location id="location-stonith-fence_ipmilan-525400b4f6bd-controller-1--INFINITY" node="controller-1" rsc="stonith-fence_ipmilan-525400b4f6bd" score="-INFINITY"/>
+      <rsc_location id="location-stonith-fence_ipmilan-5254005bdbb5-controller-0--INFINITY" node="controller-0" rsc="stonith-fence_ipmilan-5254005bdbb5" score="-INFINITY"/>
+      <rsc_location id="cli-ban-messaging-1-on-controller-0" rsc="messaging-1" role="Started" node="controller-0" score="-INFINITY"/>
+      <rsc_location id="cli-ban-messaging-1-on-controller-2" rsc="messaging-1" role="Started" node="controller-2" score="-INFINITY"/>
+      <rsc_location id="cli-ban-galera-2-on-controller-0" rsc="galera-2" role="Started" node="controller-0" score="-INFINITY"/>
+      <rsc_location id="cli-ban-galera-2-on-controller-2" rsc="galera-2" role="Started" node="controller-2" score="-INFINITY"/>
+    </constraints>
+    <rsc_defaults>
+      <meta_attributes id="rsc_defaults-options">
+        <nvpair id="rsc_defaults-options-resource-stickiness" name="resource-stickiness" value="INFINITY"/>
+      </meta_attributes>
+    </rsc_defaults>
+  </configuration>
+  <status>
+    <node_state id="2" uname="controller-1" in_ccm="false" crmd="offline" crm-debug-origin="post_cache_update" join="member" expected="member">
+      <lrm id="2">
+        <lrm_resources>
+          <lrm_resource id="ip-10.0.0.102" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-10.0.0.102_last_0" operation_key="ip-10.0.0.102_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="37:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:7;37:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="20" rc-code="7" op-status="0" interval="0" last-run="1493817888" last-rc-change="1493817888" exec-time="44" queue-time="0" op-digest="194c484ea9d1eb9955c0cfdaf53ccdae"/>
+          </lrm_resource>
+          <lrm_resource id="haproxy" type="haproxy" class="systemd">
+            <lrm_rsc_op id="haproxy_last_0" operation_key="haproxy_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="138:5:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;138:5:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="46" rc-code="0" op-status="0" interval="0" last-run="1493817889" last-rc-change="1493817889" exec-time="2088" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="haproxy_monitor_60000" operation_key="haproxy_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="119:6:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;119:6:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="63" rc-code="0" op-status="0" interval="60000" last-rc-change="1493817892" exec-time="1" queue-time="1" op-digest="4811cef7f7f94e3a35a70be7916cb2fd"/>
+          </lrm_resource>
+          <lrm_resource id="openstack-cinder-volume" type="openstack-cinder-volume" class="systemd">
+            <lrm_rsc_op id="openstack-cinder-volume_last_0" operation_key="openstack-cinder-volume_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="43:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:7;43:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="45" rc-code="7" op-status="0" interval="0" last-run="1493817889" last-rc-change="1493817889" exec-time="3" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.4.11" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.4.11_last_0" operation_key="ip-172.17.4.11_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="118:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;118:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="70" rc-code="0" op-status="0" interval="0" last-run="1493817963" last-rc-change="1493817963" exec-time="58" queue-time="0" op-digest="fe27c3edbb73480aff571d34c88b21a7"/>
+            <lrm_rsc_op id="ip-172.17.4.11_monitor_10000" operation_key="ip-172.17.4.11_monitor_10000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="119:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;119:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="71" rc-code="0" op-status="0" interval="10000" last-rc-change="1493817964" exec-time="38" queue-time="0" op-digest="392445a354e2da75dcd4cbe6eee1268b"/>
+          </lrm_resource>
+          <lrm_resource id="messaging-0" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="messaging-0_last_0" operation_key="messaging-0_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="29:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:7;29:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="1" rc-code="7" op-status="0" interval="0" last-run="1493817888" last-rc-change="1493817888" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="messaging-1" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="messaging-1_last_0" operation_key="messaging-1_migrate_from_0" operation="migrate_from" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="38:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;38:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="7" rc-code="0" op-status="0" interval="0" last-run="1493817961" last-rc-change="1493817961" exec-time="0" queue-time="0" migrate_source="controller-2" migrate_target="controller-1" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="messaging-1_monitor_20000" operation_key="messaging-1_monitor_20000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="36:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;36:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="10" rc-code="0" op-status="0" interval="20000" last-rc-change="1493817963" exec-time="0" queue-time="0" op-digest="6e5bb737f46c381d8a46fb4162afd9e0"/>
+          </lrm_resource>
+          <lrm_resource id="messaging-2" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="messaging-2_last_0" operation_key="messaging-2_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="31:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:7;31:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="3" rc-code="7" op-status="0" interval="0" last-run="1493817888" last-rc-change="1493817888" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="ip-192.168.24.6" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-192.168.24.6_last_0" operation_key="ip-192.168.24.6_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="36:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:7;36:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="16" rc-code="7" op-status="0" interval="0" last-run="1493817888" last-rc-change="1493817888" exec-time="49" queue-time="0" op-digest="22692fc1751093fc15ab6c0d90fafe22"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.3.15" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.3.15_last_0" operation_key="ip-172.17.3.15_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="40:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:7;40:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="32" rc-code="7" op-status="0" interval="0" last-run="1493817888" last-rc-change="1493817888" exec-time="45" queue-time="0" op-digest="27e0700bb641af6a5b0fea09d0ea2482"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.1.14" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.1.14_last_0" operation_key="ip-172.17.1.14_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="110:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;110:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="69" rc-code="0" op-status="0" interval="0" last-run="1493817963" last-rc-change="1493817963" exec-time="60" queue-time="0" op-digest="1fab2783a8d283e33a945588908e98a4"/>
+            <lrm_rsc_op id="ip-172.17.1.14_monitor_10000" operation_key="ip-172.17.1.14_monitor_10000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="111:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;111:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="72" rc-code="0" op-status="0" interval="10000" last-rc-change="1493817964" exec-time="36" queue-time="0" op-digest="19c32490a75539eb9cf2ca18727e305e"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.1.17" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.1.17_last_0" operation_key="ip-172.17.1.17_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="113:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;113:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="68" rc-code="0" op-status="0" interval="0" last-run="1493817963" last-rc-change="1493817963" exec-time="62" queue-time="0" op-digest="edc8fdae4cc326c15a779f36f28eb3f8"/>
+            <lrm_rsc_op id="ip-172.17.1.17_monitor_10000" operation_key="ip-172.17.1.17_monitor_10000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="114:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;114:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="73" rc-code="0" op-status="0" interval="10000" last-rc-change="1493817964" exec-time="36" queue-time="0" op-digest="637be44014a8de2a8162cb2b062f6955"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-525400bbf613" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400bbf613_last_0" operation_key="stonith-fence_ipmilan-525400bbf613_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="44:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:7;44:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="50" rc-code="7" op-status="0" interval="0" last-run="1493817889" last-rc-change="1493817889" exec-time="3" queue-time="0" op-digest="a1b3d562a7e722cbf686e1c2750888a3" op-secure-params=" passwd " op-secure-digest="2d0324390caa209c81283f07749d6dae"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-5254005bdbb5" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-5254005bdbb5_last_0" operation_key="stonith-fence_ipmilan-5254005bdbb5_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="148:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;148:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="65" rc-code="0" op-status="0" interval="0" last-run="1493817961" last-rc-change="1493817961" exec-time="79" queue-time="0" op-digest="25087bde0e53bf4f4e4efb2b0bd9d0de" op-secure-params=" passwd " op-secure-digest="ecf31bd4bca13bb934be683ab04ee8cf"/>
+            <lrm_rsc_op id="stonith-fence_ipmilan-5254005bdbb5_monitor_60000" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="149:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;149:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="66" rc-code="0" op-status="0" interval="60000" last-rc-change="1493817963" exec-time="80" queue-time="0" op-digest="e8a37549d88ca88c76d297b973759a8d" op-secure-params=" passwd " op-secure-digest="ecf31bd4bca13bb934be683ab04ee8cf"/>
+          </lrm_resource>
+          <lrm_resource id="redis" type="redis" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="redis_last_0" operation_key="redis_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="95:5:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;95:5:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="55" rc-code="0" op-status="0" interval="0" last-run="1493817890" last-rc-change="1493817890" exec-time="2553" queue-time="0" op-digest="a5b2a4f5c557278af14d6cbffc5a229d" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+            <lrm_rsc_op id="redis_monitor_45000" operation_key="redis_monitor_45000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="73:6:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;73:6:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="62" rc-code="0" op-status="0" interval="45000" last-rc-change="1493817892" exec-time="124" queue-time="135" op-digest="992feffd37882eb5ce9bfc847b2fa75e" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+            <lrm_rsc_op id="redis_monitor_60000" operation_key="redis_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="74:6:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;74:6:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="61" rc-code="0" op-status="0" interval="60000" last-rc-change="1493817892" exec-time="135" queue-time="0" op-digest="992feffd37882eb5ce9bfc847b2fa75e" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+          </lrm_resource>
+          <lrm_resource id="galera-0" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="galera-0_last_0" operation_key="galera-0_migrate_from_0" operation="migrate_from" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="48:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;48:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="8" rc-code="0" op-status="0" interval="0" last-run="1493817961" last-rc-change="1493817961" exec-time="0" queue-time="0" migrate_source="controller-2" migrate_target="controller-1" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="galera-0_monitor_20000" operation_key="galera-0_monitor_20000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="38:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;38:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="11" rc-code="0" op-status="0" interval="20000" last-rc-change="1493817963" exec-time="0" queue-time="0" op-digest="6e5bb737f46c381d8a46fb4162afd9e0"/>
+          </lrm_resource>
+          <lrm_resource id="galera-1" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="galera-1_last_0" operation_key="galera-1_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="33:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:7;33:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="5" rc-code="7" op-status="0" interval="0" last-run="1493817888" last-rc-change="1493817888" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="galera-2" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="galera-2_last_0" operation_key="galera-2_migrate_from_0" operation="migrate_from" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="55:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;55:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="9" rc-code="0" op-status="0" interval="0" last-run="1493817961" last-rc-change="1493817961" exec-time="0" queue-time="0" migrate_source="controller-2" migrate_target="controller-1" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="galera-2_monitor_20000" operation_key="galera-2_monitor_20000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="44:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;44:9:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="12" rc-code="0" op-status="0" interval="20000" last-rc-change="1493817963" exec-time="0" queue-time="0" op-digest="6e5bb737f46c381d8a46fb4162afd9e0"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-525400b4f6bd" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400b4f6bd_last_0" operation_key="stonith-fence_ipmilan-525400b4f6bd_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="45:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:7;45:5:7:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-1" call-id="54" rc-code="7" op-status="0" interval="0" last-run="1493817889" last-rc-change="1493817889" exec-time="0" queue-time="0" op-digest="190a5d7184e8c0736ea8d50b25d1896b" op-secure-params=" passwd " op-secure-digest="e710ff47e4fa69f83f5f46f9de9570b6"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+    <node_state id="1" uname="controller-0" crmd="online" crm-debug-origin="post_cache_update" in_ccm="true" join="member" expected="member">
+      <transient_attributes id="1">
+        <instance_attributes id="status-1">
+          <nvpair id="status-1-shutdown" name="shutdown" value="0"/>
+          <nvpair id="status-1-master-redis" name="master-redis" value="1"/>
+        </instance_attributes>
+      </transient_attributes>
+      <lrm id="1">
+        <lrm_resources>
+          <lrm_resource id="ip-10.0.0.102" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-10.0.0.102_last_0" operation_key="ip-10.0.0.102_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="119:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;119:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="143" rc-code="0" op-status="0" interval="0" last-run="1493817834" last-rc-change="1493817834" exec-time="497" queue-time="0" op-digest="194c484ea9d1eb9955c0cfdaf53ccdae"/>
+            <lrm_rsc_op id="ip-10.0.0.102_monitor_10000" operation_key="ip-10.0.0.102_monitor_10000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="120:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;120:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="147" rc-code="0" op-status="0" interval="10000" last-rc-change="1493817835" exec-time="48" queue-time="0" op-digest="83daeb09ea7f361d0c80eb34aaf106f9"/>
+          </lrm_resource>
+          <lrm_resource id="haproxy" type="haproxy" class="systemd">
+            <lrm_rsc_op id="haproxy_last_failure_0" operation_key="haproxy_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="15:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;15:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="114" rc-code="0" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="3" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="haproxy_last_0" operation_key="haproxy_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="15:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;15:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="114" rc-code="0" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="3" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="haproxy_monitor_60000" operation_key="haproxy_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="113:17:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;113:17:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="133" rc-code="0" op-status="0" interval="60000" last-rc-change="1493817765" exec-time="4" queue-time="0" op-digest="4811cef7f7f94e3a35a70be7916cb2fd"/>
+          </lrm_resource>
+          <lrm_resource id="openstack-cinder-volume" type="openstack-cinder-volume" class="systemd">
+            <lrm_rsc_op id="openstack-cinder-volume_last_0" operation_key="openstack-cinder-volume_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="119:23:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;119:23:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="150" rc-code="0" op-status="0" interval="0" last-run="1493817868" last-rc-change="1493817868" exec-time="2105" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="openstack-cinder-volume_monitor_60000" operation_key="openstack-cinder-volume_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="145:1:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;145:1:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-0" call-id="154" rc-code="0" op-status="0" interval="60000" last-rc-change="1493817878" exec-time="3" queue-time="1" op-digest="4811cef7f7f94e3a35a70be7916cb2fd"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.4.11" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.4.11_last_0" operation_key="ip-172.17.4.11_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="14:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:7;14:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="109" rc-code="7" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="66" queue-time="0" op-digest="fe27c3edbb73480aff571d34c88b21a7"/>
+          </lrm_resource>
+          <lrm_resource id="messaging-0" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="messaging-0_last_0" operation_key="messaging-0_migrate_from_0" operation="migrate_from" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="36:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;36:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="13" rc-code="0" op-status="0" interval="0" last-run="1493817832" last-rc-change="1493817832" exec-time="0" queue-time="0" migrate_source="controller-1" migrate_target="controller-0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="messaging-0_monitor_20000" operation_key="messaging-0_monitor_20000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="34:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;34:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="15" rc-code="0" op-status="0" interval="20000" last-rc-change="1493817832" exec-time="0" queue-time="0" op-digest="6e5bb737f46c381d8a46fb4162afd9e0"/>
+          </lrm_resource>
+          <lrm_resource id="messaging-1" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="messaging-1_last_0" operation_key="messaging-1_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="3:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:7;3:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="8" rc-code="7" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="messaging-2" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="messaging-2_last_0" operation_key="messaging-2_migrate_from_0" operation="migrate_from" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="43:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;43:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-0" call-id="17" rc-code="0" op-status="0" interval="0" last-run="1493817962" last-rc-change="1493817962" exec-time="0" queue-time="0" migrate_source="controller-2" migrate_target="controller-0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="messaging-2_monitor_20000" operation_key="messaging-2_monitor_20000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="41:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:0;41:8:0:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-0" call-id="18" rc-code="0" op-status="0" interval="20000" last-rc-change="1493817963" exec-time="0" queue-time="0" op-digest="6e5bb737f46c381d8a46fb4162afd9e0"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.1.14" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.1.14_last_0" operation_key="ip-172.17.1.14_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="11:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:7;11:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="97" rc-code="7" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="60" queue-time="0" op-digest="1fab2783a8d283e33a945588908e98a4"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-525400bbf613" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400bbf613_last_0" operation_key="stonith-fence_ipmilan-525400bbf613_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="124:17:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;124:17:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="134" rc-code="0" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="83" queue-time="0" op-digest="a1b3d562a7e722cbf686e1c2750888a3" op-secure-params=" passwd " op-secure-digest="2d0324390caa209c81283f07749d6dae"/>
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400bbf613_monitor_60000" operation_key="stonith-fence_ipmilan-525400bbf613_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="129:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;129:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="136" rc-code="0" op-status="0" interval="60000" last-rc-change="1493817768" exec-time="68" queue-time="0" op-digest="31be355d25ac30183b5d304f3275ec16" op-secure-params=" passwd " op-secure-digest="2d0324390caa209c81283f07749d6dae"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.1.17" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.1.17_last_0" operation_key="ip-172.17.1.17_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="12:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:7;12:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="101" rc-code="7" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="68" queue-time="0" op-digest="edc8fdae4cc326c15a779f36f28eb3f8"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-5254005bdbb5" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-5254005bdbb5_last_0" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="19:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:7;19:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="130" rc-code="7" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="0" queue-time="0" op-digest="25087bde0e53bf4f4e4efb2b0bd9d0de" op-secure-params=" passwd " op-secure-digest="ecf31bd4bca13bb934be683ab04ee8cf"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.3.15" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.3.15_last_0" operation_key="ip-172.17.3.15_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="126:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;126:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="141" rc-code="0" op-status="0" interval="0" last-run="1493817834" last-rc-change="1493817834" exec-time="66" queue-time="0" op-digest="27e0700bb641af6a5b0fea09d0ea2482"/>
+            <lrm_rsc_op id="ip-172.17.3.15_monitor_10000" operation_key="ip-172.17.3.15_monitor_10000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="127:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;127:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="144" rc-code="0" op-status="0" interval="10000" last-rc-change="1493817834" exec-time="428" queue-time="0" op-digest="9f5ae0b4f77392ad67e6a430d3259ec4"/>
+          </lrm_resource>
+          <lrm_resource id="ip-192.168.24.6" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-192.168.24.6_last_0" operation_key="ip-192.168.24.6_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="116:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;116:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="142" rc-code="0" op-status="0" interval="0" last-run="1493817834" last-rc-change="1493817834" exec-time="498" queue-time="0" op-digest="22692fc1751093fc15ab6c0d90fafe22"/>
+            <lrm_rsc_op id="ip-192.168.24.6_monitor_10000" operation_key="ip-192.168.24.6_monitor_10000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="117:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;117:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="146" rc-code="0" op-status="0" interval="10000" last-rc-change="1493817835" exec-time="38" queue-time="0" op-digest="53892658d5fe65d671f4c791888c8c7c"/>
+          </lrm_resource>
+          <lrm_resource id="redis" type="redis" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="redis_last_failure_0" operation_key="redis_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="8:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;8:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="85" rc-code="0" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="171" queue-time="0" op-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+            <lrm_rsc_op id="redis_last_0" operation_key="redis_promote_0" operation="promote" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="71:23:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;71:23:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="152" rc-code="0" op-status="0" interval="0" last-run="1493817868" last-rc-change="1493817868" exec-time="255" queue-time="0" op-digest="a5b2a4f5c557278af14d6cbffc5a229d" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+            <lrm_rsc_op id="redis_monitor_20000" operation_key="redis_monitor_20000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="74:4:8:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" transition-magic="0:8;74:4:8:5c19b904-a6d8-4a4f-9b6d-9ab13f4f6b57" on_node="controller-0" call-id="159" rc-code="8" op-status="0" interval="20000" last-rc-change="1493817884" exec-time="147" queue-time="0" op-digest="992feffd37882eb5ce9bfc847b2fa75e" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+          </lrm_resource>
+          <lrm_resource id="galera-0" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="galera-0_last_0" operation_key="galera-0_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="5:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:7;5:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="10" rc-code="7" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="galera-1" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="galera-1_last_0" operation_key="galera-1_migrate_from_0" operation="migrate_from" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="50:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;50:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="14" rc-code="0" op-status="0" interval="0" last-run="1493817832" last-rc-change="1493817832" exec-time="0" queue-time="0" migrate_source="controller-1" migrate_target="controller-0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="galera-1_monitor_20000" operation_key="galera-1_monitor_20000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="48:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;48:22:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="16" rc-code="0" op-status="0" interval="20000" last-rc-change="1493817832" exec-time="0" queue-time="0" op-digest="6e5bb737f46c381d8a46fb4162afd9e0"/>
+          </lrm_resource>
+          <lrm_resource id="galera-2" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="galera-2_last_0" operation_key="galera-2_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="7:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:7;7:16:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="12" rc-code="7" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-525400b4f6bd" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400b4f6bd_last_0" operation_key="stonith-fence_ipmilan-525400b4f6bd_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="126:17:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;126:17:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="135" rc-code="0" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="80" queue-time="0" op-digest="190a5d7184e8c0736ea8d50b25d1896b" op-secure-params=" passwd " op-secure-digest="e710ff47e4fa69f83f5f46f9de9570b6"/>
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400b4f6bd_monitor_60000" operation_key="stonith-fence_ipmilan-525400b4f6bd_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.10" transition-key="132:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;132:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-0" call-id="137" rc-code="0" op-status="0" interval="60000" last-rc-change="1493817768" exec-time="69" queue-time="0" op-digest="08b6ad9edc64306555c732c45bcf4995" op-secure-params=" passwd " op-secure-digest="e710ff47e4fa69f83f5f46f9de9570b6"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+    <node_state id="galera-1" remote_node="true" uname="galera-1" in_ccm="true" crm-debug-origin="post_cache_update">
+      <transient_attributes id="galera-1">
+        <instance_attributes id="status-galera-1">
+          <nvpair id="status-galera-1-last-failure-galera" name="last-failure-galera" value="1493336863"/>
+          <nvpair id="status-galera-1-master-galera" name="master-galera" value="100"/>
+        </instance_attributes>
+      </transient_attributes>
+      <lrm id="galera-1">
+        <lrm_resources>
+          <lrm_resource id="galera" type="galera" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="galera_last_failure_0" operation_key="galera_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="3:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:8;3:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-1" call-id="34745" rc-code="8" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="463" queue-time="0" op-digest="e773372fde8a6c242c1993820114d5c3"/>
+            <lrm_rsc_op id="galera_last_0" operation_key="galera_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="3:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:8;3:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-1" call-id="34745" rc-code="8" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="463" queue-time="0" op-digest="e773372fde8a6c242c1993820114d5c3" op-secure-params=" user " op-secure-digest="e773372fde8a6c242c1993820114d5c3"/>
+            <lrm_rsc_op id="galera_monitor_10000" operation_key="galera_monitor_10000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="52:18:8:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:8;52:18:8:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-1" call-id="34756" rc-code="8" op-status="0" interval="10000" last-rc-change="1493817768" exec-time="65" queue-time="0" op-digest="20ec44e3280211739f6ba9523159629e" op-secure-params=" user " op-secure-digest="e773372fde8a6c242c1993820114d5c3"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+    <node_state id="galera-2" remote_node="true" uname="galera-2" crm-debug-origin="post_cache_update" in_ccm="true">
+      <transient_attributes id="galera-2">
+        <instance_attributes id="status-galera-2">
+          <nvpair id="status-galera-2-last-failure-galera" name="last-failure-galera" value="1493172798"/>
+          <nvpair id="status-galera-2-master-galera" name="master-galera" value="100"/>
+        </instance_attributes>
+      </transient_attributes>
+    </node_state>
+    <node_state id="galera-0" remote_node="true" uname="galera-0" crm-debug-origin="post_cache_update" in_ccm="true">
+      <transient_attributes id="galera-0">
+        <instance_attributes id="status-galera-0">
+          <nvpair id="status-galera-0-last-failure-galera" name="last-failure-galera" value="1493172797"/>
+          <nvpair id="status-galera-0-master-galera" name="master-galera" value="100"/>
+        </instance_attributes>
+      </transient_attributes>
+      <lrm id="galera-0">
+        <lrm_resources>
+          <lrm_resource id="galera" type="galera" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="galera_last_failure_0" operation_key="galera_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="2:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:8;2:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-2" call-id="35583" rc-code="8" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="1739" queue-time="0" op-digest="e773372fde8a6c242c1993820114d5c3"/>
+            <lrm_rsc_op id="galera_last_0" operation_key="galera_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="2:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:8;2:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-2" call-id="35583" rc-code="8" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="1739" queue-time="0" op-digest="e773372fde8a6c242c1993820114d5c3" op-secure-params=" user " op-secure-digest="e773372fde8a6c242c1993820114d5c3"/>
+            <lrm_rsc_op id="galera_monitor_10000" operation_key="galera_monitor_10000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="62:18:8:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:8;62:18:8:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-2" call-id="35593" rc-code="8" op-status="0" interval="10000" last-rc-change="1493817768" exec-time="60" queue-time="0" op-digest="20ec44e3280211739f6ba9523159629e" op-secure-params=" user " op-secure-digest="e773372fde8a6c242c1993820114d5c3"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+    <node_state id="3" uname="controller-2" in_ccm="true" crmd="online" crm-debug-origin="post_cache_update" join="member" expected="member">
+      <lrm id="3">
+        <lrm_resources>
+          <lrm_resource id="messaging-0" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="messaging-0_last_0" operation_key="messaging-0_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="29:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;29:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="1" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="messaging-1" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="messaging-1_last_0" operation_key="messaging-1_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="30:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;30:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="2" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="messaging-2" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="messaging-2_last_0" operation_key="messaging-2_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="31:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;31:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="3" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="galera-0" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="galera-0_last_0" operation_key="galera-0_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="32:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;32:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="4" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="galera-1" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="galera-1_last_0" operation_key="galera-1_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="33:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;33:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="5" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="galera-2" type="remote" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="galera-2_last_0" operation_key="galera-2_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="34:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;34:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="6" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="0" queue-time="0" op-digest="a48beba1b11f09d6b1c15da8db5bb0a2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="haproxy" type="haproxy" class="systemd">
+            <lrm_rsc_op id="haproxy_last_0" operation_key="haproxy_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="138:1:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:0;138:1:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="46" rc-code="0" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="2103" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="haproxy_monitor_60000" operation_key="haproxy_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="123:2:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:0;123:2:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="63" rc-code="0" op-status="0" interval="60000" last-rc-change="1493817975" exec-time="3" queue-time="0" op-digest="4811cef7f7f94e3a35a70be7916cb2fd"/>
+          </lrm_resource>
+          <lrm_resource id="openstack-cinder-volume" type="openstack-cinder-volume" class="systemd">
+            <lrm_rsc_op id="openstack-cinder-volume_last_0" operation_key="openstack-cinder-volume_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="43:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;43:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="45" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="2" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="ip-192.168.24.6" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-192.168.24.6_last_0" operation_key="ip-192.168.24.6_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="36:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;36:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="16" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="42" queue-time="0" op-digest="22692fc1751093fc15ab6c0d90fafe22"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.1.14" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.1.14_last_0" operation_key="ip-172.17.1.14_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="38:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;38:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="24" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="52" queue-time="0" op-digest="1fab2783a8d283e33a945588908e98a4"/>
+          </lrm_resource>
+          <lrm_resource id="ip-10.0.0.102" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-10.0.0.102_last_0" operation_key="ip-10.0.0.102_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="37:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;37:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="20" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="59" queue-time="0" op-digest="194c484ea9d1eb9955c0cfdaf53ccdae"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.3.15" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.3.15_last_0" operation_key="ip-172.17.3.15_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="40:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;40:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="32" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="52" queue-time="0" op-digest="27e0700bb641af6a5b0fea09d0ea2482"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.4.11" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.4.11_last_0" operation_key="ip-172.17.4.11_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="41:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;41:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="36" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="50" queue-time="0" op-digest="fe27c3edbb73480aff571d34c88b21a7"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.1.17" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.1.17_last_0" operation_key="ip-172.17.1.17_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="39:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;39:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="28" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="55" queue-time="0" op-digest="edc8fdae4cc326c15a779f36f28eb3f8"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-525400bbf613" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400bbf613_last_0" operation_key="stonith-fence_ipmilan-525400bbf613_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="44:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;44:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="50" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="2" queue-time="0" op-digest="a1b3d562a7e722cbf686e1c2750888a3" op-secure-params=" passwd " op-secure-digest="2d0324390caa209c81283f07749d6dae"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-525400b4f6bd" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400b4f6bd_last_0" operation_key="stonith-fence_ipmilan-525400b4f6bd_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="45:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;45:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="54" rc-code="7" op-status="0" interval="0" last-run="1493817971" last-rc-change="1493817971" exec-time="0" queue-time="0" op-digest="190a5d7184e8c0736ea8d50b25d1896b" op-secure-params=" passwd " op-secure-digest="e710ff47e4fa69f83f5f46f9de9570b6"/>
+          </lrm_resource>
+          <lrm_resource id="redis" type="redis" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="redis_last_0" operation_key="redis_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="95:1:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:0;95:1:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="59" rc-code="0" op-status="0" interval="0" last-run="1493817972" last-rc-change="1493817972" exec-time="2559" queue-time="0" op-digest="a5b2a4f5c557278af14d6cbffc5a229d" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+            <lrm_rsc_op id="redis_monitor_60000" operation_key="redis_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="80:2:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:0;80:2:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="61" rc-code="0" op-status="0" interval="60000" last-rc-change="1493817975" exec-time="121" queue-time="0" op-digest="992feffd37882eb5ce9bfc847b2fa75e" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+            <lrm_rsc_op id="redis_monitor_45000" operation_key="redis_monitor_45000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="79:2:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:0;79:2:0:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="62" rc-code="0" op-status="0" interval="45000" last-rc-change="1493817975" exec-time="117" queue-time="120" op-digest="992feffd37882eb5ce9bfc847b2fa75e" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-5254005bdbb5" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-5254005bdbb5_last_0" operation_key="stonith-fence_ipmilan-5254005bdbb5_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="46:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" transition-magic="0:7;46:1:7:e9fa94e7-ffc2-40ab-91b6-b69d0f610c13" on_node="controller-2" call-id="58" rc-code="7" op-status="0" interval="0" last-run="1493817972" last-rc-change="1493817972" exec-time="0" queue-time="1" op-digest="25087bde0e53bf4f4e4efb2b0bd9d0de" op-secure-params=" passwd " op-secure-digest="ecf31bd4bca13bb934be683ab04ee8cf"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+      <transient_attributes id="3">
+        <instance_attributes id="status-3">
+          <nvpair id="status-3-shutdown" name="shutdown" value="0"/>
+          <nvpair id="status-3-master-redis" name="master-redis" value="1"/>
+        </instance_attributes>
+      </transient_attributes>
+    </node_state>
+    <node_state id="messaging-2" remote_node="true" uname="messaging-2" crm-debug-origin="post_cache_update" in_ccm="true">
+      <transient_attributes id="messaging-2">
+        <instance_attributes id="status-messaging-2">
+          <nvpair id="status-messaging-2-rmq-node-attr-rabbitmq" name="rmq-node-attr-rabbitmq" value="rabbit@messaging-2"/>
+          <nvpair id="status-messaging-2-last-failure-rabbitmq" name="last-failure-rabbitmq" value="1493172992"/>
+        </instance_attributes>
+      </transient_attributes>
+      <lrm id="messaging-2">
+        <lrm_resources>
+          <lrm_resource id="rabbitmq" type="rabbitmq-cluster" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="rabbitmq_last_failure_0" operation_key="rabbitmq_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="7:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;7:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-2" call-id="1041497" rc-code="0" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="3053" queue-time="0" op-digest="497e3cffa03bc3ed4830dc4b0ba109ae"/>
+            <lrm_rsc_op id="rabbitmq_last_0" operation_key="rabbitmq_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="7:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;7:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-2" call-id="1041497" rc-code="0" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="3053" queue-time="0" op-digest="497e3cffa03bc3ed4830dc4b0ba109ae"/>
+            <lrm_rsc_op id="rabbitmq_monitor_10000" operation_key="rabbitmq_monitor_10000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="37:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;37:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-2" call-id="1041515" rc-code="0" op-status="0" interval="10000" last-rc-change="1493817768" exec-time="3053" queue-time="0" op-digest="41cce5252b1fb189afe9efa00fb5e2cb"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+    <node_state id="messaging-0" remote_node="true" uname="messaging-0" in_ccm="true" crm-debug-origin="post_cache_update">
+      <transient_attributes id="messaging-0">
+        <instance_attributes id="status-messaging-0">
+          <nvpair id="status-messaging-0-rmq-node-attr-rabbitmq" name="rmq-node-attr-rabbitmq" value="rabbit@messaging-0"/>
+          <nvpair id="status-messaging-0-last-failure-rabbitmq" name="last-failure-rabbitmq" value="1493330172"/>
+        </instance_attributes>
+      </transient_attributes>
+      <lrm id="messaging-0">
+        <lrm_resources>
+          <lrm_resource id="rabbitmq" type="rabbitmq-cluster" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="rabbitmq_last_failure_0" operation_key="rabbitmq_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="5:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;5:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-1" call-id="875374" rc-code="0" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="3026" queue-time="0" op-digest="497e3cffa03bc3ed4830dc4b0ba109ae"/>
+            <lrm_rsc_op id="rabbitmq_last_0" operation_key="rabbitmq_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="5:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;5:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-1" call-id="875374" rc-code="0" op-status="0" interval="0" last-run="1493817764" last-rc-change="1493817764" exec-time="3026" queue-time="0" op-digest="497e3cffa03bc3ed4830dc4b0ba109ae"/>
+            <lrm_rsc_op id="rabbitmq_monitor_10000" operation_key="rabbitmq_monitor_10000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="40:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;40:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-1" call-id="875393" rc-code="0" op-status="0" interval="10000" last-rc-change="1493817768" exec-time="2985" queue-time="0" op-digest="41cce5252b1fb189afe9efa00fb5e2cb"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+    <node_state id="messaging-1" remote_node="true" uname="messaging-1" in_ccm="true" crm-debug-origin="post_cache_update">
+      <transient_attributes id="messaging-1">
+        <instance_attributes id="status-messaging-1">
+          <nvpair id="status-messaging-1-rmq-node-attr-rabbitmq" name="rmq-node-attr-rabbitmq" value="rabbit@messaging-1"/>
+          <nvpair id="status-messaging-1-last-failure-rabbitmq" name="last-failure-rabbitmq" value="1493336946"/>
+        </instance_attributes>
+      </transient_attributes>
+      <lrm id="messaging-1">
+        <lrm_resources>
+          <lrm_resource id="rabbitmq" type="rabbitmq-cluster" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="rabbitmq_last_failure_0" operation_key="rabbitmq_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="6:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;6:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-1" call-id="251547" rc-code="0" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="3074" queue-time="0" op-digest="497e3cffa03bc3ed4830dc4b0ba109ae"/>
+            <lrm_rsc_op id="rabbitmq_last_0" operation_key="rabbitmq_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="6:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;6:17:7:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-1" call-id="251547" rc-code="0" op-status="0" interval="0" last-run="1493817765" last-rc-change="1493817765" exec-time="3074" queue-time="0" op-digest="497e3cffa03bc3ed4830dc4b0ba109ae"/>
+            <lrm_rsc_op id="rabbitmq_monitor_10000" operation_key="rabbitmq_monitor_10000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.10" transition-key="43:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" transition-magic="0:0;43:18:0:e47e0f5b-bac4-432e-9993-f38bc43128ea" on_node="controller-1" call-id="251566" rc-code="0" op-status="0" interval="10000" last-rc-change="1493817768" exec-time="3025" queue-time="0" op-digest="41cce5252b1fb189afe9efa00fb5e2cb"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+  </status>
+</cib>
-- 
1.8.3.1

