From cf34f4c950704f5ac05ed9553b3b900ea33e1190 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Thu, 17 Aug 2017 11:48:17 +1000
Subject: [PATCH 01/21] PE/attrd: Allow bundle resources to read/write
 attributes based on the physical host rather than the container name

---
 include/crm/msg_xml.h                           |  1 +
 include/crm/pengine/internal.h                  |  2 +
 include/crm_internal.h                          |  3 ++
 lib/pengine/common.c                            | 48 ++++++++++++++++++++++
 lib/pengine/container.c                         |  5 ++-
 lib/pengine/unpack.c                            | 22 +++++-----
 lib/pengine/utils.c                             |  4 +-
 lib/pengine/variant.h                           |  1 +
 pengine/allocate.c                              |  3 +-
 pengine/constraints.c                           |  8 ++--
 pengine/graph.c                                 | 39 ++++++++++++++++++
 pengine/master.c                                | 16 +++-----
 pengine/native.c                                | 16 ++++----
 pengine/test10/bug-cl-5247.exp                  | 26 ++++++------
 pengine/test10/bug-rh-1097457.exp               | 22 +++++-----
 pengine/test10/bundle-nested-colocation.exp     | 18 ++++-----
 pengine/test10/bundle-order-partial-start-2.exp | 20 ++++-----
 pengine/test10/bundle-order-partial-start.exp   | 20 ++++-----
 pengine/test10/bundle-order-partial-stop.exp    | 18 ++++-----
 pengine/test10/bundle-order-startup-clone-2.exp | 54 ++++++++++++-------------
 pengine/test10/bundle-order-startup-clone.exp   |  8 ++--
 pengine/test10/bundle-order-startup.exp         | 20 ++++-----
 pengine/test10/bundle-order-stop-clone.exp      |  2 +-
 pengine/test10/bundle-order-stop.exp            | 18 ++++-----
 pengine/test10/guest-node-host-dies.exp         | 14 +++----
 pengine/test10/whitebox-asymmetric.exp          |  4 +-
 pengine/test10/whitebox-fail1.exp               | 12 +++---
 pengine/test10/whitebox-fail2.exp               | 12 +++---
 pengine/test10/whitebox-fail3.exp               | 10 ++---
 pengine/test10/whitebox-imply-stop-on-fence.exp |  6 +--
 pengine/test10/whitebox-move.exp                | 12 +++---
 pengine/test10/whitebox-ms-ordering-move.exp    |  8 ++--
 pengine/test10/whitebox-ms-ordering.exp         |  8 ++--
 pengine/test10/whitebox-nested-group.exp        | 12 +++---
 pengine/test10/whitebox-orphan-ms.exp           |  8 ++--
 pengine/test10/whitebox-orphaned.exp            |  8 ++--
 pengine/test10/whitebox-start.exp               | 10 ++---
 pengine/test10/whitebox-stop.exp                |  8 ++--
 tools/attrd_updater.c                           | 30 ++++++++++++++
 tools/crm_mon.c                                 |  2 +-
 40 files changed, 339 insertions(+), 219 deletions(-)

diff --git a/include/crm/msg_xml.h b/include/crm/msg_xml.h
index 8cf22f3..5209cb1 100644
--- a/include/crm/msg_xml.h
+++ b/include/crm/msg_xml.h
@@ -194,6 +194,7 @@
 
 #  define XML_CIB_TAG_RSC_TEMPLATE	"template"
 
+#  define XML_RSC_ATTR_TARGET           "container-attribute-target"
 #  define XML_RSC_ATTR_ISOLATION_INSTANCE	"isolation-instance"
 #  define XML_RSC_ATTR_ISOLATION_WRAPPER    "isolation-wrapper"
 #  define XML_RSC_ATTR_ISOLATION_HOST   "isolation-host"
diff --git a/include/crm/pengine/internal.h b/include/crm/pengine/internal.h
index 5db90aa..d91f54a 100644
--- a/include/crm/pengine/internal.h
+++ b/include/crm/pengine/internal.h
@@ -298,5 +298,7 @@ bool remote_id_conflict(const char *remote_name, pe_working_set_t *data);
 void common_print(resource_t * rsc, const char *pre_text, const char *name, node_t *node, long options, void *print_data);
 resource_t *find_container_child(const char *stem, resource_t * rsc, node_t *node);
 bool fix_remote_addr(resource_t * rsc);
+const char *node_attribute_calculated(pe_node_t *node, const char *name, resource_t *rsc);
+const char *node_attribute_raw(pe_node_t *node, const char *name);
 
 #endif
diff --git a/include/crm_internal.h b/include/crm_internal.h
index acfca07..e1b25ff 100644
--- a/include/crm_internal.h
+++ b/include/crm_internal.h
@@ -289,6 +289,9 @@ long crm_read_pidfile(const char *filename);
 #  define ATTRD_OP_SYNC          "sync"
 #  define ATTRD_OP_SYNC_RESPONSE "sync-response"
 
+#  define PCMK_ENV_PHYSICAL_HOST "physical_host"
+
+
 #  if SUPPORT_COROSYNC
 #    if CS_USES_LIBQB
 #      include <qb/qbipc_common.h>
diff --git a/lib/pengine/common.c b/lib/pengine/common.c
index 446b7f0..0e21aaa 100644
--- a/lib/pengine/common.c
+++ b/lib/pengine/common.c
@@ -431,3 +431,51 @@ add_hash_param(GHashTable * hash, const char *name, const char *value)
         g_hash_table_insert(hash, strdup(name), strdup(value));
     }
 }
+
+const char *
+node_attribute_calculated(pe_node_t *node, const char *name, resource_t *rsc) 
+{
+    const char *source;
+
+    if(node == NULL) {
+        return NULL;
+
+    } else if(rsc == NULL) {
+        return g_hash_table_lookup(node->details->attrs, name);
+    }
+
+    source = g_hash_table_lookup(rsc->meta, XML_RSC_ATTR_TARGET);
+    if(source == NULL || safe_str_eq("host", source) == FALSE) {
+        return g_hash_table_lookup(node->details->attrs, name);
+    }
+
+    /* Use attributes set for the containers location
+     * instead of for the container itself
+     *
+     * Useful when the container is using the host's local
+     * storage
+     */
+
+    CRM_ASSERT(node->details->remote_rsc);
+    CRM_ASSERT(node->details->remote_rsc->container);
+
+    if(node->details->remote_rsc->container->running_on) {
+        pe_node_t *host = node->details->remote_rsc->container->running_on->data;
+        pe_rsc_trace(rsc, "%s: Looking for %s on the container host %s", rsc->id, name, host->details->uname);
+        return g_hash_table_lookup(host->details->attrs, name);
+    }
+
+    pe_rsc_trace(rsc, "%s: Not looking for %s on the container host: %s is inactive",
+                 rsc->id, name, node->details->remote_rsc->container->id);
+    return NULL;
+}
+
+const char *
+node_attribute_raw(pe_node_t *node, const char *name) 
+{
+    if(node == NULL) {
+        return NULL;
+    }
+    return g_hash_table_lookup(node->details->attrs, name);
+}
+
diff --git a/lib/pengine/container.c b/lib/pengine/container.c
index 118e716..53965cf 100644
--- a/lib/pengine/container.c
+++ b/lib/pengine/container.c
@@ -764,8 +764,12 @@ container_unpack(resource_t * rsc, pe_working_set_t * data_set)
 
             offset += allocate_ip(container_data, tuple, buffer+offset, max-offset);
             container_data->tuples = g_list_append(container_data->tuples, tuple);
+            container_data->attribute_target = g_hash_table_lookup(tuple->child->meta, XML_RSC_ATTR_TARGET);
         }
         container_data->docker_host_options = buffer;
+        if(container_data->attribute_target) {
+            g_hash_table_replace(rsc->meta, strdup(XML_RSC_ATTR_TARGET), strdup(container_data->attribute_target));
+        }
 
     } else {
         // Just a naked container, no pacemaker-remote
@@ -782,7 +786,6 @@ container_unpack(resource_t * rsc, pe_working_set_t * data_set)
         container_data->docker_host_options = buffer;
     }
 
-
     for (GListPtr gIter = container_data->tuples; gIter != NULL; gIter = gIter->next) {
         container_grouping_t *tuple = (container_grouping_t *)gIter->data;
         // TODO: Remove from list if create_container() returns TRUE
diff --git a/lib/pengine/unpack.c b/lib/pengine/unpack.c
index 0790148..6e0651e 100644
--- a/lib/pengine/unpack.c
+++ b/lib/pengine/unpack.c
@@ -1070,7 +1070,7 @@ unpack_handle_remote_attrs(node_t *this_node, xmlNode *state, pe_working_set_t *
     attrs = find_xml_node(state, XML_TAG_TRANSIENT_NODEATTRS, FALSE);
     add_node_attrs(attrs, this_node, TRUE, data_set);
 
-    shutdown = g_hash_table_lookup(this_node->details->attrs, XML_CIB_ATTR_SHUTDOWN);
+    shutdown = node_attribute_raw(this_node, XML_CIB_ATTR_SHUTDOWN);
     if (shutdown != NULL && safe_str_neq("0", shutdown)) {
         crm_info("Node %s is shutting down", this_node->details->uname);
         this_node->details->shutdown = TRUE;
@@ -1079,18 +1079,18 @@ unpack_handle_remote_attrs(node_t *this_node, xmlNode *state, pe_working_set_t *
         }
     }
  
-    if (crm_is_true(g_hash_table_lookup(this_node->details->attrs, "standby"))) {
+    if (crm_is_true(node_attribute_raw(this_node, "standby"))) {
         crm_info("Node %s is in standby-mode", this_node->details->uname);
         this_node->details->standby = TRUE;
     }
 
-    if (crm_is_true(g_hash_table_lookup(this_node->details->attrs, "maintenance")) ||
+    if (crm_is_true(node_attribute_raw(this_node, "maintenance")) ||
         (rsc && !is_set(rsc->flags, pe_rsc_managed))) {
         crm_info("Node %s is in maintenance-mode", this_node->details->uname);
         this_node->details->maintenance = TRUE;
     }
 
-    resource_discovery_enabled = g_hash_table_lookup(this_node->details->attrs, XML_NODE_ATTR_RSC_DISCOVERY);
+    resource_discovery_enabled = node_attribute_raw(this_node, XML_NODE_ATTR_RSC_DISCOVERY);
     if (resource_discovery_enabled && !crm_is_true(resource_discovery_enabled)) {
         if (is_baremetal_remote_node(this_node) && is_not_set(data_set->flags, pe_flag_stonith_enabled)) {
             crm_warn("ignoring %s attribute on baremetal remote node %s, disabling resource discovery requires stonith to be enabled.",
@@ -1246,17 +1246,17 @@ unpack_status(xmlNode * status, pe_working_set_t * data_set)
             attrs = find_xml_node(state, XML_TAG_TRANSIENT_NODEATTRS, FALSE);
             add_node_attrs(attrs, this_node, TRUE, data_set);
 
-            if (crm_is_true(g_hash_table_lookup(this_node->details->attrs, "standby"))) {
+            if (crm_is_true(node_attribute_raw(this_node, "standby"))) {
                 crm_info("Node %s is in standby-mode", this_node->details->uname);
                 this_node->details->standby = TRUE;
             }
 
-            if (crm_is_true(g_hash_table_lookup(this_node->details->attrs, "maintenance"))) {
+            if (crm_is_true(node_attribute_raw(this_node, "maintenance"))) {
                 crm_info("Node %s is in maintenance-mode", this_node->details->uname);
                 this_node->details->maintenance = TRUE;
             }
 
-            resource_discovery_enabled = g_hash_table_lookup(this_node->details->attrs, XML_NODE_ATTR_RSC_DISCOVERY);
+            resource_discovery_enabled = node_attribute_raw(this_node, XML_NODE_ATTR_RSC_DISCOVERY);
             if (resource_discovery_enabled && !crm_is_true(resource_discovery_enabled)) {
                 crm_warn("ignoring %s attribute on node %s, disabling resource discovery is not allowed on cluster nodes",
                     XML_NODE_ATTR_RSC_DISCOVERY, this_node->details->uname);
@@ -1342,7 +1342,7 @@ determine_online_status_fencing(pe_working_set_t * data_set, xmlNode * node_stat
     const char *is_peer = crm_element_value(node_state, XML_NODE_IS_PEER);
     const char *in_cluster = crm_element_value(node_state, XML_NODE_IN_CLUSTER);
     const char *exp_state = crm_element_value(node_state, XML_NODE_EXPECTED);
-    const char *terminate = g_hash_table_lookup(this_node->details->attrs, "terminate");
+    const char *terminate = node_attribute_raw(this_node, "terminate");
 
 /*
   - XML_NODE_IN_CLUSTER    ::= true|false
@@ -1516,7 +1516,7 @@ determine_online_status(xmlNode * node_state, node_t * this_node, pe_working_set
 
     this_node->details->shutdown = FALSE;
     this_node->details->expected_up = FALSE;
-    shutdown = g_hash_table_lookup(this_node->details->attrs, XML_CIB_ATTR_SHUTDOWN);
+    shutdown = node_attribute_raw(this_node, XML_CIB_ATTR_SHUTDOWN);
 
     if (shutdown != NULL && safe_str_neq("0", shutdown)) {
         this_node->details->shutdown = TRUE;
@@ -3368,8 +3368,8 @@ add_node_attrs(xmlNode * xml_obj, node_t * node, gboolean overwrite, pe_working_
     unpack_instance_attributes(data_set->input, xml_obj, XML_TAG_ATTR_SETS, NULL,
                                node->details->attrs, NULL, overwrite, data_set->now);
 
-    if (g_hash_table_lookup(node->details->attrs, "#site-name") == NULL) {
-        const char *site_name = g_hash_table_lookup(node->details->attrs, "site-name");
+    if (node_attribute_raw(node, "#site-name") == NULL) {
+        const char *site_name = node_attribute_raw(node, "site-name");
 
         if (site_name) {
             /* Prefix '#' to the key */
diff --git a/lib/pengine/utils.c b/lib/pengine/utils.c
index cb1ed08..c44a1c8 100644
--- a/lib/pengine/utils.c
+++ b/lib/pengine/utils.c
@@ -1989,10 +1987,8 @@ fencing_action_digest_cmp(resource_t * rsc, node_t * node, pe_working_set_t * da
     char *key = generate_op_key(rsc->id, STONITH_DIGEST_TASK, 0);
     op_digest_cache_t *data = rsc_action_digest(rsc, STONITH_DIGEST_TASK, key, node, NULL, data_set);
 
-    const char *digest_all = g_hash_table_lookup(node->details->attrs,
-                                                 CRM_ATTR_DIGESTS_ALL);
-    const char *digest_secure = g_hash_table_lookup(node->details->attrs,
-                                                    CRM_ATTR_DIGESTS_SECURE);
+    const char *digest_all = node_attribute_raw(node, CRM_ATTR_DIGESTS_ALL);
+    const char *digest_secure = node_attribute_raw(node, CRM_ATTR_DIGESTS_SECURE);
 
     /* No 'reloads' for fencing device changes
      *
diff --git a/lib/pengine/variant.h b/lib/pengine/variant.h
index c8fe159..4ceaa6b 100644
--- a/lib/pengine/variant.h
+++ b/lib/pengine/variant.h
@@ -100,6 +100,7 @@ typedef struct container_variant_data_s {
         char *docker_host_options;
         char *docker_run_options;
         char *docker_run_command;
+        const char *attribute_target;
 
         resource_t *child;
 
diff --git a/pengine/allocate.c b/pengine/allocate.c
index 01b5b98..958fb23 100644
--- a/pengine/allocate.c
+++ b/pengine/allocate.c
@@ -861,7 +861,6 @@ apply_system_health(pe_working_set_t * data_set)
                 rsc2node_new(health_strategy, rsc, system_health, NULL, node, data_set);
             }
         }
-
     }
 
     return TRUE;
@@ -898,7 +897,7 @@ probe_resources(pe_working_set_t * data_set)
 
     for (GListPtr gIter = data_set->nodes; gIter != NULL; gIter = gIter->next) {
         node_t *node = (node_t *) gIter->data;
-        const char *probed = g_hash_table_lookup(node->details->attrs, CRM_OP_PROBED);
+        const char *probed = node_attribute_raw(node, CRM_OP_PROBED);
 
         if (is_container_remote_node(node)) {
             /* TODO enable guest node probes once ordered probing is implemented */
diff --git a/pengine/constraints.c b/pengine/constraints.c
index 77a0152..fdc4186 100644
--- a/pengine/constraints.c
+++ b/pengine/constraints.c
@@ -957,7 +957,7 @@ unpack_location(xmlNode * xml_obj, pe_working_set_t * data_set)
 }
 
 static int
-get_node_score(const char *rule, const char *score, gboolean raw, node_t * node)
+get_node_score(const char *rule, const char *score, gboolean raw, node_t * node, resource_t *rsc)
 {
     int score_f = 0;
 
@@ -968,7 +968,7 @@ get_node_score(const char *rule, const char *score, gboolean raw, node_t * node)
         score_f = char2score(score);
 
     } else {
-        const char *attr_score = g_hash_table_lookup(node->details->attrs, score);
+        const char *attr_score = node_attribute_calculated(node, score, rsc);
 
         if (attr_score == NULL) {
             crm_debug("Rule %s: node %s did not have a value for %s",
@@ -1060,7 +1060,7 @@ generate_location_rule(resource_t * rsc, xmlNode * rule_xml, const char *discove
         for (gIter = match_L; gIter != NULL; gIter = gIter->next) {
             node_t *node = (node_t *) gIter->data;
 
-            node->weight = get_node_score(rule_id, score, raw_score, node);
+            node->weight = get_node_score(rule_id, score, raw_score, node, rsc);
         }
     }
 
@@ -1073,7 +1073,7 @@ generate_location_rule(resource_t * rsc, xmlNode * rule_xml, const char *discove
         crm_trace("Rule %s %s on %s", ID(rule_xml), accept ? "passed" : "failed",
                   node->details->uname);
 
-        score_f = get_node_score(rule_id, score, raw_score, node);
+        score_f = get_node_score(rule_id, score, raw_score, node, rsc);
 /* 			if(accept && score_f == -INFINITY) { */
 /* 				accept = FALSE; */
 /* 			} */
diff --git a/pengine/graph.c b/pengine/graph.c
index a446fe5..3c5dc6b 100644
--- a/pengine/graph.c
+++ b/pengine/graph.c
@@ -1162,6 +1162,45 @@ action2xml(action_t * action, gboolean as_input, pe_working_set_t *data_set)
             hash2smartfield((gpointer)"pcmk_external_ip", (gpointer)value, (gpointer)args_xml);
         }
 
+        if(is_container_remote_node(action->node)) {
+            pe_node_t *host = NULL;
+            enum action_tasks task = text2task(action->task);
+
+            if(task == action_notify || task == action_notified) {
+                const char *n_task = g_hash_table_lookup(action->meta, "notify_operation");
+                task = text2task(n_task);
+            }
+
+            // Differentiate between up and down actions
+            switch (task) {
+                case stop_rsc:
+                case stopped_rsc:
+                case action_demote:
+                case action_demoted:
+                    if(action->node->details->remote_rsc->container->running_on) {
+                        host = action->node->details->remote_rsc->container->running_on->data;
+                    }
+                    break;
+                case start_rsc:
+                case started_rsc:
+                case monitor_rsc:
+                case action_promote:
+                case action_promoted:
+                    if(action->node->details->remote_rsc->container->allocated_to) {
+                        host = action->node->details->remote_rsc->container->allocated_to;
+                    }
+                    break;
+                default:
+                    break;
+            }
+
+            if(host) {
+                hash2metafield((gpointer)XML_RSC_ATTR_TARGET,
+                               (gpointer)g_hash_table_lookup(action->rsc->meta, XML_RSC_ATTR_TARGET), (gpointer)args_xml);
+                hash2metafield((gpointer)PCMK_ENV_PHYSICAL_HOST, (gpointer)host->details->uname, (gpointer)args_xml);
+            }
+        }
+
     } else if (safe_str_eq(action->task, CRM_OP_FENCE) && action->node) {
         g_hash_table_foreach(action->node->details->attrs, hash2metafield, args_xml);
     }
diff --git a/pengine/master.c b/pengine/master.c
index 8c39f49..2631da8 100644
--- a/pengine/master.c
+++ b/pengine/master.c
@@ -511,12 +511,7 @@ master_score(resource_t * rsc, node_t * node, int not_set_value)
     attr_name = calloc(1, len);
     sprintf(attr_name, "master-%s", name);
 
-    if (node) {
-        attr_value = g_hash_table_lookup(node->details->attrs, attr_name);
-        pe_rsc_trace(rsc, "%s: %s[%s] = %s", rsc->id, attr_name, node->details->uname,
-                     crm_str(attr_value));
-    }
-
+    attr_value = node_attribute_calculated(node, attr_name, rsc);
     if (attr_value != NULL) {
         score = char2score(attr_value);
     }
@@ -949,11 +944,11 @@ node_hash_update_one(GHashTable * hash, node_t * other, const char *attr, int sc
     } else if (attr == NULL) {
         attr = "#" XML_ATTR_UNAME;
     }
-
-    value = g_hash_table_lookup(other->details->attrs, attr);
+ 
+    value = node_attribute_raw(other, attr);
     g_hash_table_iter_init(&iter, hash);
     while (g_hash_table_iter_next(&iter, NULL, (void **)&node)) {
-        const char *tmp = g_hash_table_lookup(node->details->attrs, attr);
+        const char *tmp = node_attribute_raw(node, attr);
 
         if (safe_str_eq(value, tmp)) {
             crm_trace("%s: %d + %d", node->details->uname, node->weight, other->weight);
@@ -993,8 +988,7 @@ master_rsc_colocation_rh(resource_t * rsc_lh, resource_t * rsc_rh, rsc_colocatio
     } else if (is_set(rsc_lh->flags, pe_rsc_provisional)) {
         GListPtr rhs = NULL;
 
-        gIter = rsc_rh->children;
-        for (; gIter != NULL; gIter = gIter->next) {
+        for (gIter = rsc_rh->children; gIter != NULL; gIter = gIter->next) {
             resource_t *child_rsc = (resource_t *) gIter->data;
             node_t *chosen = child_rsc->fns->location(child_rsc, NULL, FALSE);
             enum rsc_role_e next_role = child_rsc->fns->state(child_rsc, FALSE);
diff --git a/pengine/native.c b/pengine/native.c
index fe7b966..37cf541 100644
--- a/pengine/native.c
+++ b/pengine/native.c
@@ -203,7 +203,7 @@ node_list_attr_score(GHashTable * list, const char *attr, const char *value)
             weight = -INFINITY;
         }
         if (weight > best_score || best_node == NULL) {
-            const char *tmp = g_hash_table_lookup(node->details->attrs, attr);
+            const char *tmp = node_attribute_raw(node, attr);
 
             if (safe_str_eq(value, tmp)) {
                 best_score = weight;
@@ -238,7 +238,7 @@ node_hash_update(GHashTable * list1, GHashTable * list2, const char *attr, float
         CRM_LOG_ASSERT(node != NULL);
         if(node == NULL) { continue; };
 
-        score = node_list_attr_score(list2, attr, g_hash_table_lookup(node->details->attrs, attr));
+        score = node_list_attr_score(list2, attr, node_attribute_raw(node, attr));
         new_score = merge_weights(factor * score, node->weight);
 
         if (factor < 0 && score < 0) {
@@ -1630,8 +1630,8 @@ influence_priority(resource_t * rsc_lh, resource_t * rsc_rh, rsc_colocation_t *
         return;
     }
 
-    lh_value = g_hash_table_lookup(rsc_lh->allocated_to->details->attrs, attribute);
-    rh_value = g_hash_table_lookup(rsc_rh->allocated_to->details->attrs, attribute);
+    lh_value = node_attribute_raw(rsc_lh->allocated_to, attribute);
+    rh_value = node_attribute_raw(rsc_rh->allocated_to, attribute);
 
     if (!safe_str_eq(lh_value, rh_value)) {
         if(constraint->score == INFINITY && constraint->role_lh == RSC_ROLE_MASTER) {
@@ -1669,7 +1669,7 @@ colocation_match(resource_t * rsc_lh, resource_t * rsc_rh, rsc_colocation_t * co
     }
 
     if (rsc_rh->allocated_to) {
-        value = g_hash_table_lookup(rsc_rh->allocated_to->details->attrs, attribute);
+        value = node_attribute_raw(rsc_rh->allocated_to, attribute);
         do_check = TRUE;
 
     } else if (constraint->score < 0) {
@@ -1683,7 +1683,7 @@ colocation_match(resource_t * rsc_lh, resource_t * rsc_rh, rsc_colocation_t * co
 
     g_hash_table_iter_init(&iter, work);
     while (g_hash_table_iter_next(&iter, NULL, (void **)&node)) {
-        tmp = g_hash_table_lookup(node->details->attrs, attribute);
+        tmp = node_attribute_raw(node, attribute);
         if (do_check && safe_str_eq(tmp, value)) {
             if (constraint->score < INFINITY) {
                 pe_rsc_trace(rsc_lh, "%s: %s.%s += %d", constraint->id, rsc_lh->id,
@@ -2492,7 +2492,7 @@ StopRsc(resource_t * rsc, node_t * next, gboolean optional, pe_working_set_t * d
 
         if(is_set(rsc->flags, pe_rsc_needs_unfencing)) {
             action_t *unfence = pe_fence_op(current, "on", TRUE, NULL, data_set);
-            const char *unfenced = g_hash_table_lookup(current->details->attrs, CRM_ATTR_UNFENCED);
+            const char *unfenced = node_attribute_raw(current, CRM_ATTR_UNFENCED);
 
             order_actions(stop, unfence, pe_order_implies_first);
             if (unfenced == NULL || safe_str_eq("0", unfenced)) {
@@ -2515,7 +2515,7 @@ StartRsc(resource_t * rsc, node_t * next, gboolean optional, pe_working_set_t *
 
     if(is_set(rsc->flags, pe_rsc_needs_unfencing)) {
         action_t *unfence = pe_fence_op(next, "on", TRUE, NULL, data_set);
-        const char *unfenced = g_hash_table_lookup(next->details->attrs, CRM_ATTR_UNFENCED);
+        const char *unfenced = node_attribute_raw(next, CRM_ATTR_UNFENCED);
 
         order_actions(unfence, start, pe_order_implies_then);
 
diff --git a/pengine/test10/bug-cl-5247.exp b/pengine/test10/bug-cl-5247.exp
index e7bac9c..2ec83c0 100644
--- a/pengine/test10/bug-cl-5247.exp
+++ b/pengine/test10/bug-cl-5247.exp
@@ -269,7 +269,7 @@
     <action_set>
       <rsc_op id="27" operation="monitor" operation_key="vip-master_monitor_10000" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
         <primitive id="vip-master" class="ocf" provider="heartbeat" type="Dummy"/>
-        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_fail="restart" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_timeout="60000" />
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_fail="restart" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_physical_host="bl460g8n3" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -282,7 +282,7 @@
     <action_set>
       <rsc_op id="26" operation="start" operation_key="vip-master_start_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
         <primitive id="vip-master" class="ocf" provider="heartbeat" type="Dummy"/>
-        <attributes CRM_meta_name="start" CRM_meta_on_fail="restart" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_timeout="60000" />
+        <attributes CRM_meta_name="start" CRM_meta_on_fail="restart" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_physical_host="bl460g8n3" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -300,7 +300,7 @@
   <synapse id="21">
     <action_set>
       <pseudo_event id="25" operation="stop" operation_key="vip-master_stop_0">
-        <attributes CRM_meta_name="stop" CRM_meta_on_fail="fence" CRM_meta_timeout="60000" />
+        <attributes CRM_meta_name="stop" CRM_meta_on_fail="fence" CRM_meta_physical_host="bl460g8n4" CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
@@ -319,7 +319,7 @@
     <action_set>
       <rsc_op id="30" operation="monitor" operation_key="vip-rep_monitor_10000" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
         <primitive id="vip-rep" class="ocf" provider="heartbeat" type="Dummy"/>
-        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_fail="restart" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_timeout="60000" />
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_fail="restart" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_physical_host="bl460g8n3" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -332,7 +332,7 @@
     <action_set>
       <rsc_op id="29" operation="start" operation_key="vip-rep_start_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
         <primitive id="vip-rep" class="ocf" provider="heartbeat" type="Dummy"/>
-        <attributes CRM_meta_name="start" CRM_meta_on_fail="stop" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_timeout="60000" />
+        <attributes CRM_meta_name="start" CRM_meta_on_fail="stop" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_physical_host="bl460g8n3" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -353,7 +353,7 @@
   <synapse id="24">
     <action_set>
       <pseudo_event id="28" operation="stop" operation_key="vip-rep_stop_0">
-        <attributes CRM_meta_name="stop" CRM_meta_on_fail="ignore" CRM_meta_timeout="60000" />
+        <attributes CRM_meta_name="stop" CRM_meta_on_fail="ignore" CRM_meta_physical_host="bl460g8n4" CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
@@ -395,7 +395,7 @@
   <synapse id="27">
     <action_set>
       <pseudo_event id="36" operation="stop" operation_key="pgsql_stop_0" internal_operation_key="pgsql:0_stop_0">
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1" CRM_meta_notify_active_uname="pgsr02 pgsr01" CRM_meta_notify_all_uname="bl460g8n3 bl460g8n4 pgsr01 pgsr02" CRM_meta_notify_available_uname="bl460g8n4 bl460g8n3 pgsr01 pgsr02" CRM_meta_notify_demote_resource="pgsql:0" CRM_meta_notify_demote_uname="pgsr02" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="pgsql:0 pgsql:1" CRM_meta_notify_master_uname="pgsr02 pgsr01" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0" CRM_meta_notify_stop_uname="pgsr02" CRM_meta_on_fail="fence" CRM_meta_timeout="300000" />
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1" CRM_meta_notify_active_uname="pgsr02 pgsr01" CRM_meta_notify_all_uname="bl460g8n3 bl460g8n4 pgsr01 pgsr02" CRM_meta_notify_available_uname="bl460g8n4 bl460g8n3 pgsr01 pgsr02" CRM_meta_notify_demote_resource="pgsql:0" CRM_meta_notify_demote_uname="pgsr02" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="pgsql:0 pgsql:1" CRM_meta_notify_master_uname="pgsr02 pgsr01" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0" CRM_meta_notify_stop_uname="pgsr02" CRM_meta_on_fail="fence" CRM_meta_physical_host="bl460g8n4" CRM_meta_timeout="300000" />
       </pseudo_event>
     </action_set>
     <inputs>
@@ -413,7 +413,7 @@
   <synapse id="28">
     <action_set>
       <pseudo_event id="35" operation="demote" operation_key="pgsql_demote_0" internal_operation_key="pgsql:0_demote_0">
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1" CRM_meta_notify_active_uname="pgsr02 pgsr01" CRM_meta_notify_all_uname="bl460g8n3 bl460g8n4 pgsr01 pgsr02" CRM_meta_notify_available_uname="bl460g8n4 bl460g8n3 pgsr01 pgsr02" CRM_meta_notify_demote_resource="pgsql:0" CRM_meta_notify_demote_uname="pgsr02" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="pgsql:0 pgsql:1" CRM_meta_notify_master_uname="pgsr02 pgsr01" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0" CRM_meta_notify_stop_uname="pgsr02" CRM_meta_on_fail="fence" CRM_meta_timeout="300000" />
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1" CRM_meta_notify_active_uname="pgsr02 pgsr01" CRM_meta_notify_all_uname="bl460g8n3 bl460g8n4 pgsr01 pgsr02" CRM_meta_notify_available_uname="bl460g8n4 bl460g8n3 pgsr01 pgsr02" CRM_meta_notify_demote_resource="pgsql:0" CRM_meta_notify_demote_uname="pgsr02" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="pgsql:0 pgsql:1" CRM_meta_notify_master_uname="pgsr02 pgsr01" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0" CRM_meta_notify_stop_uname="pgsr02" CRM_meta_on_fail="fence" CRM_meta_physical_host="bl460g8n4" CRM_meta_timeout="300000" />
       </pseudo_event>
     </action_set>
     <inputs>
@@ -429,7 +429,7 @@
     <action_set>
       <rsc_op id="83" operation="notify" operation_key="pgsql_post_notify_demote_0" internal_operation_key="pgsql:1_post_notify_demote_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
         <primitive id="pgsql" long-id="pgsql:1" class="ocf" provider="heartbeat" type="Stateful"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="notify" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1" CRM_meta_notify_active_uname="pgsr02 pgsr01" CRM_meta_notify_all_uname="bl460g8n3 bl460g8n4 pgsr01 pgsr02" CRM_meta_notify_available_uname="bl460g8n4 bl460g8n3 pgsr01 pgsr02" CRM_meta_notify_demote_resource="pgsql:0" CRM_meta_notify_demote_uname="pgsr02" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="pgsql:0 pgsql:1" CRM_meta_notify_master_uname="pgsr02 pgsr01" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0" CRM_meta_notify_stop_uname="pgsr02" CRM_meta_notify_type="post" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_timeout="60000" />
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="notify" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1" CRM_meta_notify_active_uname="pgsr02 pgsr01" CRM_meta_notify_all_uname="bl460g8n3 bl460g8n4 pgsr01 pgsr02" CRM_meta_notify_available_uname="bl460g8n4 bl460g8n3 pgsr01 pgsr02" CRM_meta_notify_demote_resource="pgsql:0" CRM_meta_notify_demote_uname="pgsr02" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="pgsql:0 pgsql:1" CRM_meta_notify_master_uname="pgsr02 pgsr01" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0" CRM_meta_notify_stop_uname="pgsr02" CRM_meta_notify_type="post" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_physical_host="bl460g8n3" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -442,7 +442,7 @@
     <action_set>
       <rsc_op id="82" operation="notify" operation_key="pgsql_pre_notify_demote_0" internal_operation_key="pgsql:1_pre_notify_demote_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
         <primitive id="pgsql" long-id="pgsql:1" class="ocf" provider="heartbeat" type="Stateful"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="notify" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1" CRM_meta_notify_active_uname="pgsr02 pgsr01" CRM_meta_notify_all_uname="bl460g8n3 bl460g8n4 pgsr01 pgsr02" CRM_meta_notify_available_uname="bl460g8n4 bl460g8n3 pgsr01 pgsr02" CRM_meta_notify_demote_resource="pgsql:0" CRM_meta_notify_demote_uname="pgsr02" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="pgsql:0 pgsql:1" CRM_meta_notify_master_uname="pgsr02 pgsr01" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0" CRM_meta_notify_stop_uname="pgsr02" CRM_meta_notify_type="pre" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_timeout="60000" />
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="notify" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1" CRM_meta_notify_active_uname="pgsr02 pgsr01" CRM_meta_notify_all_uname="bl460g8n3 bl460g8n4 pgsr01 pgsr02" CRM_meta_notify_available_uname="bl460g8n4 bl460g8n3 pgsr01 pgsr02" CRM_meta_notify_demote_resource="pgsql:0" CRM_meta_notify_demote_uname="pgsr02" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="pgsql:0 pgsql:1" CRM_meta_notify_master_uname="pgsr02 pgsr01" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0" CRM_meta_notify_stop_uname="pgsr02" CRM_meta_notify_type="pre" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_physical_host="bl460g8n3" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -455,7 +455,7 @@
     <action_set>
       <rsc_op id="79" operation="notify" operation_key="pgsql_pre_notify_stop_0" internal_operation_key="pgsql:1_pre_notify_stop_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
         <primitive id="pgsql" long-id="pgsql:1" class="ocf" provider="heartbeat" type="Stateful"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="notify" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1" CRM_meta_notify_active_uname="pgsr02 pgsr01" CRM_meta_notify_all_uname="bl460g8n3 bl460g8n4 pgsr01 pgsr02" CRM_meta_notify_available_uname="bl460g8n4 bl460g8n3 pgsr01 pgsr02" CRM_meta_notify_demote_resource="pgsql:0" CRM_meta_notify_demote_uname="pgsr02" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="pgsql:0 pgsql:1" CRM_meta_notify_master_uname="pgsr02 pgsr01" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0" CRM_meta_notify_stop_uname="pgsr02" CRM_meta_notify_type="pre" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_timeout="60000" />
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="notify" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1" CRM_meta_notify_active_uname="pgsr02 pgsr01" CRM_meta_notify_all_uname="bl460g8n3 bl460g8n4 pgsr01 pgsr02" CRM_meta_notify_available_uname="bl460g8n4 bl460g8n3 pgsr01 pgsr02" CRM_meta_notify_demote_resource="pgsql:0" CRM_meta_notify_demote_uname="pgsr02" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="pgsql:0 pgsql:1" CRM_meta_notify_master_uname="pgsr02 pgsr01" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0" CRM_meta_notify_stop_uname="pgsr02" CRM_meta_notify_type="pre" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_physical_host="bl460g8n3" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -468,7 +468,7 @@
     <action_set>
       <rsc_op id="73" operation="notify" operation_key="pgsql_post_notify_stop_0" internal_operation_key="pgsql:1_post_notify_stop_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
         <primitive id="pgsql" long-id="pgsql:1" class="ocf" provider="heartbeat" type="Stateful"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="notify" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1" CRM_meta_notify_active_uname="pgsr02 pgsr01" CRM_meta_notify_all_uname="bl460g8n3 bl460g8n4 pgsr01 pgsr02" CRM_meta_notify_available_uname="bl460g8n4 bl460g8n3 pgsr01 pgsr02" CRM_meta_notify_demote_resource="pgsql:0" CRM_meta_notify_demote_uname="pgsr02" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="pgsql:0 pgsql:1" CRM_meta_notify_master_uname="pgsr02 pgsr01" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0" CRM_meta_notify_stop_uname="pgsr02" CRM_meta_notify_type="post" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_timeout="60000" />
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="notify" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1" CRM_meta_notify_active_uname="pgsr02 pgsr01" CRM_meta_notify_all_uname="bl460g8n3 bl460g8n4 pgsr01 pgsr02" CRM_meta_notify_available_uname="bl460g8n4 bl460g8n3 pgsr01 pgsr02" CRM_meta_notify_demote_resource="pgsql:0" CRM_meta_notify_demote_uname="pgsr02" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="pgsql:0 pgsql:1" CRM_meta_notify_master_uname="pgsr02 pgsr01" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0" CRM_meta_notify_stop_uname="pgsr02" CRM_meta_notify_type="post" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_physical_host="bl460g8n3" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -484,7 +484,7 @@
     <action_set>
       <rsc_op id="41" operation="monitor" operation_key="pgsql_monitor_9000" internal_operation_key="pgsql:1_monitor_9000" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
         <primitive id="pgsql" long-id="pgsql:1" class="ocf" provider="heartbeat" type="Stateful"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="9000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_fail="restart" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="60000" />
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="9000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_fail="restart" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_op_target_rc="8" CRM_meta_physical_host="bl460g8n3" CRM_meta_role="Master" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
diff --git a/pengine/test10/bug-rh-1097457.exp b/pengine/test10/bug-rh-1097457.exp
index bf62647..eb9b225 100644
--- a/pengine/test10/bug-rh-1097457.exp
+++ b/pengine/test10/bug-rh-1097457.exp
@@ -76,7 +76,7 @@
   <synapse id="5">
     <action_set>
       <pseudo_event id="40" operation="stop" operation_key="FSlun3_stop_0">
-        <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  device="-L FSlun3" directory="/lun3" fstype="ext4"/>
+        <attributes CRM_meta_name="stop" CRM_meta_physical_host="lama3" CRM_meta_timeout="60000"  device="-L FSlun3" directory="/lun3" fstype="ext4"/>
       </pseudo_event>
     </action_set>
     <inputs>
@@ -92,7 +92,7 @@
     <action_set>
       <rsc_op id="21" operation="monitor" operation_key="FSlun3_monitor_10000" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3">
         <primitive id="FSlun3" class="ocf" provider="heartbeat" type="Filesystem"/>
-        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_fail="fence" CRM_meta_on_node="lamaVM2" CRM_meta_on_node_uuid="lamaVM2" CRM_meta_timeout="20000"  device="-L FSlun3" directory="/lun3" fstype="ext4"/>
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_fail="fence" CRM_meta_on_node="lamaVM2" CRM_meta_on_node_uuid="lamaVM2" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000"  device="-L FSlun3" directory="/lun3" fstype="ext4"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -168,7 +168,7 @@
     <action_set>
       <rsc_op id="72" operation="start" operation_key="FAKE4_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3">
         <primitive id="FAKE4" class="ocf" provider="heartbeat" type="Dummy"/>
-        <attributes CRM_meta_name="start" CRM_meta_on_node="lamaVM2" CRM_meta_on_node_uuid="lamaVM2" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_name="start" CRM_meta_on_node="lamaVM2" CRM_meta_on_node_uuid="lamaVM2" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -192,7 +192,7 @@
   <synapse id="12">
     <action_set>
       <pseudo_event id="71" operation="stop" operation_key="FAKE4_stop_0">
-        <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_name="stop" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
@@ -211,7 +211,7 @@
     <action_set>
       <rsc_op id="23" operation="monitor" operation_key="FAKE4_monitor_30000" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3">
         <primitive id="FAKE4" class="ocf" provider="heartbeat" type="Dummy"/>
-        <attributes CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_on_fail="restart" CRM_meta_on_node="lamaVM2" CRM_meta_on_node_uuid="lamaVM2" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_on_fail="restart" CRM_meta_on_node="lamaVM2" CRM_meta_on_node_uuid="lamaVM2" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -227,7 +227,7 @@
     <action_set>
       <rsc_op id="74" operation="start" operation_key="FAKE4-IP_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3">
         <primitive id="FAKE4-IP" class="ocf" provider="heartbeat" type="IPaddr2"/>
-        <attributes CRM_meta_name="start" CRM_meta_on_node="lamaVM2" CRM_meta_on_node_uuid="lamaVM2" CRM_meta_timeout="20000" cidr_netmask="16"  ip="10.1.1.54"/>
+        <attributes CRM_meta_name="start" CRM_meta_on_node="lamaVM2" CRM_meta_on_node_uuid="lamaVM2" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" cidr_netmask="16"  ip="10.1.1.54"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -254,7 +254,7 @@
   <synapse id="15">
     <action_set>
       <pseudo_event id="73" operation="stop" operation_key="FAKE4-IP_stop_0">
-        <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="16"  ip="10.1.1.54"/>
+        <attributes CRM_meta_name="stop" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" cidr_netmask="16"  ip="10.1.1.54"/>
       </pseudo_event>
     </action_set>
     <inputs>
@@ -270,7 +270,7 @@
     <action_set>
       <rsc_op id="24" operation="monitor" operation_key="FAKE4-IP_monitor_30000" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3">
         <primitive id="FAKE4-IP" class="ocf" provider="heartbeat" type="IPaddr2"/>
-        <attributes CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_on_fail="restart" CRM_meta_on_node="lamaVM2" CRM_meta_on_node_uuid="lamaVM2" CRM_meta_timeout="20000" cidr_netmask="16"  ip="10.1.1.54"/>
+        <attributes CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_on_fail="restart" CRM_meta_on_node="lamaVM2" CRM_meta_on_node_uuid="lamaVM2" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" cidr_netmask="16"  ip="10.1.1.54"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -286,7 +286,7 @@
     <action_set>
       <rsc_op id="84" operation="start" operation_key="FAKE6_start_0" internal_operation_key="FAKE6:2_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3">
         <primitive id="FAKE6" long-id="FAKE6:2" class="ocf" provider="heartbeat" type="Dummy"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="lamaVM2" CRM_meta_on_node_uuid="lamaVM2" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="lamaVM2" CRM_meta_on_node_uuid="lamaVM2" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -310,7 +310,7 @@
   <synapse id="18">
     <action_set>
       <pseudo_event id="83" operation="stop" operation_key="FAKE6_stop_0" internal_operation_key="FAKE6:2_stop_0">
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
@@ -326,7 +326,7 @@
     <action_set>
       <rsc_op id="22" operation="monitor" operation_key="FAKE6_monitor_30000" internal_operation_key="FAKE6:2_monitor_30000" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3">
         <primitive id="FAKE6" long-id="FAKE6:2" class="ocf" provider="heartbeat" type="Dummy"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_fail="restart" CRM_meta_on_node="lamaVM2" CRM_meta_on_node_uuid="lamaVM2" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_fail="restart" CRM_meta_on_node="lamaVM2" CRM_meta_on_node_uuid="lamaVM2" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
diff --git a/pengine/test10/bundle-nested-colocation.exp b/pengine/test10/bundle-nested-colocation.exp
index c82ee16..916c44b 100644
--- a/pengine/test10/bundle-nested-colocation.exp
+++ b/pengine/test10/bundle-nested-colocation.exp
@@ -3,7 +3,7 @@
     <action_set>
       <rsc_op id="62" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="overcloud-rabbit-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -16,7 +16,7 @@
     <action_set>
       <rsc_op id="34" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="overcloud-rabbit-0" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -35,7 +35,7 @@
     <action_set>
       <rsc_op id="33" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="overcloud-rabbit-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -54,7 +54,7 @@
     <action_set>
       <rsc_op id="63" operation="notify" operation_key="rabbitmq:1_post_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
         <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_physical_host="overcloud-rabbit-1" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -67,7 +67,7 @@
     <action_set>
       <rsc_op id="36" operation="monitor" operation_key="rabbitmq:1_monitor_10000" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
         <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_physical_host="overcloud-rabbit-1" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -86,7 +86,7 @@
     <action_set>
       <rsc_op id="35" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
         <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_physical_host="overcloud-rabbit-1" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -108,7 +108,7 @@
     <action_set>
       <rsc_op id="64" operation="notify" operation_key="rabbitmq:2_post_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
         <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_physical_host="overcloud-rabbit-2" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -121,7 +121,7 @@
     <action_set>
       <rsc_op id="38" operation="monitor" operation_key="rabbitmq:2_monitor_10000" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
         <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_physical_host="overcloud-rabbit-2" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -140,7 +140,7 @@
     <action_set>
       <rsc_op id="37" operation="start" operation_key="rabbitmq:2_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
         <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_physical_host="overcloud-rabbit-2" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
diff --git a/pengine/test10/bundle-order-partial-start-2.exp b/pengine/test10/bundle-order-partial-start-2.exp
index b533469..f600983 100644
--- a/pengine/test10/bundle-order-partial-start-2.exp
+++ b/pengine/test10/bundle-order-partial-start-2.exp
@@ -3,7 +3,7 @@
     <action_set>
       <rsc_op id="128" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -16,7 +16,7 @@
     <action_set>
       <rsc_op id="25" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -32,7 +32,7 @@
     <action_set>
       <rsc_op id="24" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -125,7 +125,7 @@
     <action_set>
       <rsc_op id="48" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -141,7 +141,7 @@
     <action_set>
       <rsc_op id="47" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -157,7 +157,7 @@
     <action_set>
       <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -286,7 +286,7 @@
     <action_set>
       <rsc_op id="134" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -299,7 +299,7 @@
     <action_set>
       <rsc_op id="133" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -312,7 +312,7 @@
     <action_set>
       <rsc_op id="72" operation="monitor" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_op_target_rc="8" CRM_meta_physical_host="undercloud" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -328,7 +328,7 @@
     <action_set>
       <rsc_op id="71" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
diff --git a/pengine/test10/bundle-order-partial-start.exp b/pengine/test10/bundle-order-partial-start.exp
index 1f8a3e1..d48fccf 100644
--- a/pengine/test10/bundle-order-partial-start.exp
+++ b/pengine/test10/bundle-order-partial-start.exp
@@ -3,7 +3,7 @@
     <action_set>
       <rsc_op id="127" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -16,7 +16,7 @@
     <action_set>
       <rsc_op id="24" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -32,7 +32,7 @@
     <action_set>
       <rsc_op id="23" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -125,7 +125,7 @@
     <action_set>
       <rsc_op id="47" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -141,7 +141,7 @@
     <action_set>
       <rsc_op id="46" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -157,7 +157,7 @@
     <action_set>
       <rsc_op id="45" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -267,7 +267,7 @@
     <action_set>
       <rsc_op id="133" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -280,7 +280,7 @@
     <action_set>
       <rsc_op id="132" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -293,7 +293,7 @@
     <action_set>
       <rsc_op id="71" operation="monitor" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_op_target_rc="8" CRM_meta_physical_host="undercloud" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -309,7 +309,7 @@
     <action_set>
       <rsc_op id="70" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
diff --git a/pengine/test10/bundle-order-partial-stop.exp b/pengine/test10/bundle-order-partial-stop.exp
index 937bc59..1dff657 100644
--- a/pengine/test10/bundle-order-partial-stop.exp
+++ b/pengine/test10/bundle-order-partial-stop.exp
@@ -3,7 +3,7 @@
     <action_set>
       <rsc_op id="135" operation="notify" operation_key="rabbitmq_pre_notify_stop_0" internal_operation_key="rabbitmq:0_pre_notify_stop_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0" CRM_meta_notify_active_uname="rabbitmq-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0" CRM_meta_notify_active_uname="rabbitmq-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -16,7 +16,7 @@
     <action_set>
       <rsc_op id="25" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:0_stop_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0" CRM_meta_notify_active_uname="rabbitmq-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0" CRM_meta_notify_active_uname="rabbitmq-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -144,7 +144,7 @@
     <action_set>
       <rsc_op id="47" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -163,7 +163,7 @@
     <action_set>
       <rsc_op id="46" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -280,7 +280,7 @@
     <action_set>
       <rsc_op id="138" operation="notify" operation_key="redis_post_notify_demote_0" internal_operation_key="redis:0_post_notify_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -293,7 +293,7 @@
     <action_set>
       <rsc_op id="137" operation="notify" operation_key="redis_pre_notify_demote_0" internal_operation_key="redis:0_pre_notify_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -306,7 +306,7 @@
     <action_set>
       <rsc_op id="136" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:0_pre_notify_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -319,7 +319,7 @@
     <action_set>
       <rsc_op id="70" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -338,7 +338,7 @@
     <action_set>
       <rsc_op id="69" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
diff --git a/pengine/test10/bundle-order-startup-clone-2.exp b/pengine/test10/bundle-order-startup-clone-2.exp
index c0910a7..7d18d29 100644
--- a/pengine/test10/bundle-order-startup-clone-2.exp
+++ b/pengine/test10/bundle-order-startup-clone-2.exp
@@ -260,7 +260,7 @@
     <action_set>
       <rsc_op id="68" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="metal-1" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -276,7 +276,7 @@
     <action_set>
       <rsc_op id="67" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="metal-1" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -292,7 +292,7 @@
     <action_set>
       <rsc_op id="66" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="metal-1" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -311,7 +311,7 @@
     <action_set>
       <rsc_op id="71" operation="monitor" operation_key="galera:1_monitor_30000" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2">
         <primitive id="galera" long-id="galera:1" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-1" CRM_meta_on_node_uuid="galera-bundle-1" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-1" CRM_meta_on_node_uuid="galera-bundle-1" CRM_meta_physical_host="metal-2" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -327,7 +327,7 @@
     <action_set>
       <rsc_op id="70" operation="monitor" operation_key="galera:1_monitor_20000" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2">
         <primitive id="galera" long-id="galera:1" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-1" CRM_meta_on_node_uuid="galera-bundle-1" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-1" CRM_meta_on_node_uuid="galera-bundle-1" CRM_meta_physical_host="metal-2" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -343,7 +343,7 @@
     <action_set>
       <rsc_op id="69" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2">
         <primitive id="galera" long-id="galera:1" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-1" CRM_meta_on_node_uuid="galera-bundle-1" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-1" CRM_meta_on_node_uuid="galera-bundle-1" CRM_meta_physical_host="metal-2" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -365,7 +365,7 @@
     <action_set>
       <rsc_op id="74" operation="monitor" operation_key="galera:2_monitor_30000" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3">
         <primitive id="galera" long-id="galera:2" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-2" CRM_meta_on_node_uuid="galera-bundle-2" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-2" CRM_meta_on_node_uuid="galera-bundle-2" CRM_meta_physical_host="metal-3" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -381,7 +381,7 @@
     <action_set>
       <rsc_op id="73" operation="monitor" operation_key="galera:2_monitor_20000" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3">
         <primitive id="galera" long-id="galera:2" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-2" CRM_meta_on_node_uuid="galera-bundle-2" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-2" CRM_meta_on_node_uuid="galera-bundle-2" CRM_meta_physical_host="metal-3" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -397,7 +397,7 @@
     <action_set>
       <rsc_op id="72" operation="start" operation_key="galera:2_start_0" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3">
         <primitive id="galera" long-id="galera:2" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-2" CRM_meta_on_node_uuid="galera-bundle-2" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-2" CRM_meta_on_node_uuid="galera-bundle-2" CRM_meta_physical_host="metal-3" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -1010,7 +1010,7 @@
     <action_set>
       <rsc_op id="168" operation="notify" operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="metal-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -1023,7 +1023,7 @@
     <action_set>
       <rsc_op id="167" operation="notify" operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="metal-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -1036,7 +1036,7 @@
     <action_set>
       <rsc_op id="164" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="metal-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -1049,7 +1049,7 @@
     <action_set>
       <rsc_op id="115" operation="monitor" operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_op_target_rc="8" CRM_meta_physical_host="metal-1" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -1074,7 +1074,7 @@
     <action_set>
       <rsc_op id="114" operation="promote" operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="metal-1" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -1096,7 +1096,7 @@
     <action_set>
       <rsc_op id="113" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="metal-1" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -1115,7 +1115,7 @@
     <action_set>
       <rsc_op id="170" operation="notify" operation_key="redis:1_post_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="metal-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -1128,7 +1128,7 @@
     <action_set>
       <rsc_op id="169" operation="notify" operation_key="redis:1_pre_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="metal-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -1141,7 +1141,7 @@
     <action_set>
       <rsc_op id="165" operation="notify" operation_key="redis:1_post_notify_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="metal-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -1154,7 +1154,7 @@
     <action_set>
       <rsc_op id="118" operation="monitor" operation_key="redis:1_monitor_20000" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_op_target_rc="8" CRM_meta_physical_host="metal-2" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -1179,7 +1179,7 @@
     <action_set>
       <rsc_op id="117" operation="promote" operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="metal-2" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -1204,7 +1204,7 @@
     <action_set>
       <rsc_op id="116" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="metal-2" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -1226,7 +1226,7 @@
     <action_set>
       <rsc_op id="172" operation="notify" operation_key="redis:2_post_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="metal-3" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -1239,7 +1239,7 @@
     <action_set>
       <rsc_op id="171" operation="notify" operation_key="redis:2_pre_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="metal-3" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -1252,7 +1252,7 @@
     <action_set>
       <rsc_op id="166" operation="notify" operation_key="redis:2_post_notify_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="metal-3" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -1265,7 +1265,7 @@
     <action_set>
       <rsc_op id="121" operation="monitor" operation_key="redis:2_monitor_20000" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_op_target_rc="8" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_op_target_rc="8" CRM_meta_physical_host="metal-3" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -1290,7 +1290,7 @@
     <action_set>
       <rsc_op id="120" operation="promote" operation_key="redis:2_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="metal-3" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -1315,7 +1315,7 @@
     <action_set>
       <rsc_op id="119" operation="start" operation_key="redis:2_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="metal-3" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
diff --git a/pengine/test10/bundle-order-startup-clone.exp b/pengine/test10/bundle-order-startup-clone.exp
index 197529f..8c8ba6aa 100644
--- a/pengine/test10/bundle-order-startup-clone.exp
+++ b/pengine/test10/bundle-order-startup-clone.exp
@@ -119,7 +119,7 @@
     <action_set>
       <rsc_op id="106" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0" CRM_meta_notify_available_uname="redis-bundle-0 rabbitmq-bundle-0 galera-bundle-0 metal-3 metal-2 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0" CRM_meta_notify_available_uname="redis-bundle-0 rabbitmq-bundle-0 galera-bundle-0 metal-3 metal-2 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="metal-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -132,7 +132,7 @@
     <action_set>
       <rsc_op id="71" operation="monitor" operation_key="redis:0_monitor_60000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="60000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_role="Slave" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="60000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="metal-2" CRM_meta_role="Slave" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -151,7 +151,7 @@
     <action_set>
       <rsc_op id="70" operation="monitor" operation_key="redis:0_monitor_45000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="45000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="45000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="metal-2" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -170,7 +170,7 @@
     <action_set>
       <rsc_op id="69" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0" CRM_meta_notify_available_uname="redis-bundle-0 rabbitmq-bundle-0 galera-bundle-0 metal-3 metal-2 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0" CRM_meta_notify_available_uname="redis-bundle-0 rabbitmq-bundle-0 galera-bundle-0 metal-3 metal-2 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="metal-2" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
diff --git a/pengine/test10/bundle-order-startup.exp b/pengine/test10/bundle-order-startup.exp
index 161c1ae..03b064a 100644
--- a/pengine/test10/bundle-order-startup.exp
+++ b/pengine/test10/bundle-order-startup.exp
@@ -3,7 +3,7 @@
     <action_set>
       <rsc_op id="126" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -16,7 +16,7 @@
     <action_set>
       <rsc_op id="22" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -35,7 +35,7 @@
     <action_set>
       <rsc_op id="21" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -198,7 +198,7 @@
     <action_set>
       <rsc_op id="45" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -214,7 +214,7 @@
     <action_set>
       <rsc_op id="44" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -230,7 +230,7 @@
     <action_set>
       <rsc_op id="43" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -340,7 +340,7 @@
     <action_set>
       <rsc_op id="127" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -353,7 +353,7 @@
     <action_set>
       <rsc_op id="68" operation="monitor" operation_key="redis:0_monitor_60000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="60000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_role="Slave" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="60000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_role="Slave" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -372,7 +372,7 @@
     <action_set>
       <rsc_op id="67" operation="monitor" operation_key="redis:0_monitor_45000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="45000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="45000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -391,7 +391,7 @@
     <action_set>
       <rsc_op id="66" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
diff --git a/pengine/test10/bundle-order-stop-clone.exp b/pengine/test10/bundle-order-stop-clone.exp
index c359e00..e78e235 100644
--- a/pengine/test10/bundle-order-stop-clone.exp
+++ b/pengine/test10/bundle-order-stop-clone.exp
@@ -173,7 +173,7 @@
     <action_set>
       <rsc_op id="62" operation="stop" operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="metal-1" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
diff --git a/pengine/test10/bundle-order-stop.exp b/pengine/test10/bundle-order-stop.exp
index 937bc59..1dff657 100644
--- a/pengine/test10/bundle-order-stop.exp
+++ b/pengine/test10/bundle-order-stop.exp
@@ -3,7 +3,7 @@
     <action_set>
       <rsc_op id="135" operation="notify" operation_key="rabbitmq_pre_notify_stop_0" internal_operation_key="rabbitmq:0_pre_notify_stop_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0" CRM_meta_notify_active_uname="rabbitmq-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0" CRM_meta_notify_active_uname="rabbitmq-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -16,7 +16,7 @@
     <action_set>
       <rsc_op id="25" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:0_stop_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0" CRM_meta_notify_active_uname="rabbitmq-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0" CRM_meta_notify_active_uname="rabbitmq-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -144,7 +144,7 @@
     <action_set>
       <rsc_op id="47" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -163,7 +163,7 @@
     <action_set>
       <rsc_op id="46" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -280,7 +280,7 @@
     <action_set>
       <rsc_op id="138" operation="notify" operation_key="redis_post_notify_demote_0" internal_operation_key="redis:0_post_notify_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -293,7 +293,7 @@
     <action_set>
       <rsc_op id="137" operation="notify" operation_key="redis_pre_notify_demote_0" internal_operation_key="redis:0_pre_notify_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -306,7 +306,7 @@
     <action_set>
       <rsc_op id="136" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:0_pre_notify_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -319,7 +319,7 @@
     <action_set>
       <rsc_op id="70" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -338,7 +338,7 @@
     <action_set>
       <rsc_op id="69" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
diff --git a/pengine/test10/guest-node-host-dies.exp b/pengine/test10/guest-node-host-dies.exp
index 235813d..cd8d81a 100644
--- a/pengine/test10/guest-node-host-dies.exp
+++ b/pengine/test10/guest-node-host-dies.exp
@@ -144,7 +144,7 @@
     <action_set>
       <rsc_op id="22" operation="promote" operation_key="lxc-ms_promote_0" internal_operation_key="lxc-ms:0_promote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2">
         <primitive id="lxc-ms" long-id="lxc-ms:0" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="rhel7-2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -172,7 +172,7 @@
     <action_set>
       <rsc_op id="21" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:0_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2">
         <primitive id="lxc-ms" long-id="lxc-ms:0" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="rhel7-2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -196,7 +196,7 @@
   <synapse id="12">
     <action_set>
       <pseudo_event id="20" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0">
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_physical_host="rhel7-1" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
@@ -214,7 +214,7 @@
   <synapse id="13">
     <action_set>
       <pseudo_event id="19" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0">
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_physical_host="rhel7-1" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
@@ -230,7 +230,7 @@
     <action_set>
       <rsc_op id="25" operation="monitor" operation_key="lxc-ms_monitor_10000" internal_operation_key="lxc-ms:1_monitor_10000" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-3">
         <primitive id="lxc-ms" long-id="lxc-ms:1" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_physical_host="rhel7-3" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -246,7 +246,7 @@
     <action_set>
       <rsc_op id="24" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:1_start_0" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-3">
         <primitive id="lxc-ms" long-id="lxc-ms:1" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_physical_host="rhel7-3" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -270,7 +270,7 @@
   <synapse id="16">
     <action_set>
       <pseudo_event id="23" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:1_stop_0">
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_physical_host="rhel7-1" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
diff --git a/pengine/test10/whitebox-asymmetric.exp b/pengine/test10/whitebox-asymmetric.exp
index 67d6c76..1178fb6 100644
--- a/pengine/test10/whitebox-asymmetric.exp
+++ b/pengine/test10/whitebox-asymmetric.exp
@@ -3,7 +3,7 @@
     <action_set>
       <rsc_op id="5" operation="monitor" operation_key="nfs_mount_monitor_10000" on_node="18node2" on_node_uuid="18node2" router_node="18builder">
         <primitive id="nfs_mount" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="18node2" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="18node2" CRM_meta_physical_host="18builder" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -19,7 +19,7 @@
     <action_set>
       <rsc_op id="4" operation="start" operation_key="nfs_mount_start_0" on_node="18node2" on_node_uuid="18node2" router_node="18builder">
         <primitive id="nfs_mount" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="18node2" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="18node2" CRM_meta_physical_host="18builder" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
diff --git a/pengine/test10/whitebox-fail1.exp b/pengine/test10/whitebox-fail1.exp
index 5c4b26c..4cb6136 100644
--- a/pengine/test10/whitebox-fail1.exp
+++ b/pengine/test10/whitebox-fail1.exp
@@ -32,7 +32,7 @@
     <action_set>
       <rsc_op id="27" operation="monitor" operation_key="M_monitor_10000" internal_operation_key="M:4_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="M" long-id="M:4" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -48,7 +48,7 @@
     <action_set>
       <rsc_op id="26" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="M" long-id="M:4" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -72,7 +72,7 @@
   <synapse id="4">
     <action_set>
       <pseudo_event id="25" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0">
-        <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
@@ -142,7 +142,7 @@
     <action_set>
       <rsc_op id="36" operation="monitor" operation_key="B_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -158,7 +158,7 @@
     <action_set>
       <rsc_op id="35" operation="start" operation_key="B_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -179,7 +179,7 @@
   <synapse id="11">
     <action_set>
       <pseudo_event id="34" operation="stop" operation_key="B_stop_0">
-        <attributes CRM_meta_timeout="20000" />
+        <attributes CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
diff --git a/pengine/test10/whitebox-fail2.exp b/pengine/test10/whitebox-fail2.exp
index 5c4b26c..4cb6136 100644
--- a/pengine/test10/whitebox-fail2.exp
+++ b/pengine/test10/whitebox-fail2.exp
@@ -32,7 +32,7 @@
     <action_set>
       <rsc_op id="27" operation="monitor" operation_key="M_monitor_10000" internal_operation_key="M:4_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="M" long-id="M:4" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -48,7 +48,7 @@
     <action_set>
       <rsc_op id="26" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="M" long-id="M:4" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -72,7 +72,7 @@
   <synapse id="4">
     <action_set>
       <pseudo_event id="25" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0">
-        <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
@@ -142,7 +142,7 @@
     <action_set>
       <rsc_op id="36" operation="monitor" operation_key="B_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -158,7 +158,7 @@
     <action_set>
       <rsc_op id="35" operation="start" operation_key="B_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -179,7 +179,7 @@
   <synapse id="11">
     <action_set>
       <pseudo_event id="34" operation="stop" operation_key="B_stop_0">
-        <attributes CRM_meta_timeout="20000" />
+        <attributes CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
diff --git a/pengine/test10/whitebox-fail3.exp b/pengine/test10/whitebox-fail3.exp
index 95fc289..ec28f12 100644
--- a/pengine/test10/whitebox-fail3.exp
+++ b/pengine/test10/whitebox-fail3.exp
@@ -12,7 +12,7 @@
     <action_set>
       <rsc_op id="5" operation="start" operation_key="FAKE_start_0" on_node="18builder" on_node_uuid="18builder" router_node="dvossel-laptop2">
         <primitive id="FAKE" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="18builder" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="18builder" CRM_meta_physical_host="dvossel-laptop2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -40,7 +40,7 @@
     <action_set>
       <rsc_op id="11" operation="monitor" operation_key="W:1_monitor_10000" on_node="18builder" on_node_uuid="18builder" router_node="dvossel-laptop2">
         <primitive id="W" long-id="W:1" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="18builder" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="18builder" CRM_meta_physical_host="dvossel-laptop2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -56,7 +56,7 @@
     <action_set>
       <rsc_op id="10" operation="start" operation_key="W:1_start_0" on_node="18builder" on_node_uuid="18builder" router_node="dvossel-laptop2">
         <primitive id="W" long-id="W:1" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="18builder" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="18builder" CRM_meta_physical_host="dvossel-laptop2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -98,7 +98,7 @@
     <action_set>
       <rsc_op id="25" operation="monitor" operation_key="X:1_monitor_10000" on_node="18builder" on_node_uuid="18builder" router_node="dvossel-laptop2">
         <primitive id="X" long-id="X:1" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="18builder" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="18builder" CRM_meta_physical_host="dvossel-laptop2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -114,7 +114,7 @@
     <action_set>
       <rsc_op id="24" operation="start" operation_key="X:1_start_0" on_node="18builder" on_node_uuid="18builder" router_node="dvossel-laptop2">
         <primitive id="X" long-id="X:1" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="18builder" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="18builder" CRM_meta_physical_host="dvossel-laptop2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
diff --git a/pengine/test10/whitebox-imply-stop-on-fence.exp b/pengine/test10/whitebox-imply-stop-on-fence.exp
index 9beb51d..6639eb9 100644
--- a/pengine/test10/whitebox-imply-stop-on-fence.exp
+++ b/pengine/test10/whitebox-imply-stop-on-fence.exp
@@ -272,7 +272,7 @@
     <action_set>
       <rsc_op id="49" operation="monitor" operation_key="vm-fs_monitor_20000" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01" router_node="kiff-02">
         <primitive id="vm-fs" class="ocf" provider="heartbeat" type="Filesystem"/>
-        <attributes CRM_meta_interval="20000" CRM_meta_name="monitor" CRM_meta_on_node="lxc-01_kiff-01" CRM_meta_on_node_uuid="lxc-01_kiff-01" CRM_meta_timeout="40000"  device="/root" directory="/mnt/vm-fs" fstype="none" options="bind"/>
+        <attributes CRM_meta_interval="20000" CRM_meta_name="monitor" CRM_meta_on_node="lxc-01_kiff-01" CRM_meta_on_node_uuid="lxc-01_kiff-01" CRM_meta_physical_host="kiff-02" CRM_meta_timeout="40000"  device="/root" directory="/mnt/vm-fs" fstype="none" options="bind"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -288,7 +288,7 @@
     <action_set>
       <rsc_op id="48" operation="start" operation_key="vm-fs_start_0" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01" router_node="kiff-02">
         <primitive id="vm-fs" class="ocf" provider="heartbeat" type="Filesystem"/>
-        <attributes CRM_meta_name="start" CRM_meta_on_node="lxc-01_kiff-01" CRM_meta_on_node_uuid="lxc-01_kiff-01" CRM_meta_timeout="60000"  device="/root" directory="/mnt/vm-fs" fstype="none" options="bind"/>
+        <attributes CRM_meta_name="start" CRM_meta_on_node="lxc-01_kiff-01" CRM_meta_on_node_uuid="lxc-01_kiff-01" CRM_meta_physical_host="kiff-02" CRM_meta_timeout="60000"  device="/root" directory="/mnt/vm-fs" fstype="none" options="bind"/>
       </rsc_op>
     </action_set>
     <inputs>
@@ -309,7 +309,7 @@
   <synapse id="20">
     <action_set>
       <pseudo_event id="47" operation="stop" operation_key="vm-fs_stop_0">
-        <attributes CRM_meta_name="stop" CRM_meta_timeout="60000"  device="/root" directory="/mnt/vm-fs" fstype="none" options="bind"/>
+        <attributes CRM_meta_name="stop" CRM_meta_physical_host="kiff-01" CRM_meta_timeout="60000"  device="/root" directory="/mnt/vm-fs" fstype="none" options="bind"/>
       </pseudo_event>
     </action_set>
     <inputs>
diff --git a/pengine/test10/whitebox-move.exp b/pengine/test10/whitebox-move.exp
index ecea360..4461890 100644
--- a/pengine/test10/whitebox-move.exp
+++ b/pengine/test10/whitebox-move.exp
@@ -29,7 +29,7 @@
     <action_set>
       <rsc_op id="23" operation="start" operation_key="M_start_0" internal_operation_key="M:3_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="M" long-id="M:3" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_clone="3" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="3" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -51,7 +51,7 @@
     <action_set>
       <rsc_op id="22" operation="stop" operation_key="M_stop_0" internal_operation_key="M:3_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
         <primitive id="M" long-id="M:3" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_clone="3" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="3" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -64,7 +64,7 @@
     <action_set>
       <rsc_op id="6" operation="monitor" operation_key="M_monitor_10000" internal_operation_key="M:3_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="M" long-id="M:3" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_clone="3" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="3" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -130,7 +130,7 @@
     <action_set>
       <rsc_op id="31" operation="start" operation_key="A_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="A" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -149,7 +149,7 @@
     <action_set>
       <rsc_op id="30" operation="stop" operation_key="A_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
         <primitive id="A" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs/>
@@ -158,7 +158,7 @@
     <action_set>
       <rsc_op id="7" operation="monitor" operation_key="A_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="A" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
diff --git a/pengine/test10/whitebox-ms-ordering-move.exp b/pengine/test10/whitebox-ms-ordering-move.exp
index 3b5598f..dc5e473 100644
--- a/pengine/test10/whitebox-ms-ordering-move.exp
+++ b/pengine/test10/whitebox-ms-ordering-move.exp
@@ -29,7 +29,7 @@
     <action_set>
       <rsc_op id="105" operation="promote" operation_key="lxc-ms_promote_0" internal_operation_key="lxc-ms:0_promote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2">
         <primitive id="lxc-ms" long-id="lxc-ms:0" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="90000" />
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="rhel7-2" CRM_meta_timeout="90000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -54,7 +54,7 @@
     <action_set>
       <rsc_op id="104" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1">
         <primitive id="lxc-ms" long-id="lxc-ms:0" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="90000" />
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="rhel7-1" CRM_meta_timeout="90000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -70,7 +70,7 @@
     <action_set>
       <rsc_op id="103" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1">
         <primitive id="lxc-ms" long-id="lxc-ms:0" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="90000" />
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="rhel7-1" CRM_meta_timeout="90000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -83,7 +83,7 @@
     <action_set>
       <rsc_op id="102" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:0_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2">
         <primitive id="lxc-ms" long-id="lxc-ms:0" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="90000" />
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="rhel7-2" CRM_meta_timeout="90000" />
       </rsc_op>
     </action_set>
     <inputs>
diff --git a/pengine/test10/whitebox-ms-ordering.exp b/pengine/test10/whitebox-ms-ordering.exp
index 43cb49a..e5eb99c 100644
--- a/pengine/test10/whitebox-ms-ordering.exp
+++ b/pengine/test10/whitebox-ms-ordering.exp
@@ -101,7 +101,7 @@
     <action_set>
       <rsc_op id="25" operation="promote" operation_key="lxc-ms_promote_0" internal_operation_key="lxc-ms:0_promote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
         <primitive id="lxc-ms" long-id="lxc-ms:0" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -129,7 +129,7 @@
     <action_set>
       <rsc_op id="24" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:0_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
         <primitive id="lxc-ms" long-id="lxc-ms:0" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -223,7 +223,7 @@
     <action_set>
       <rsc_op id="28" operation="monitor" operation_key="lxc-ms_monitor_10000" internal_operation_key="lxc-ms:1_monitor_10000" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1">
         <primitive id="lxc-ms" long-id="lxc-ms:1" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_physical_host="18node1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -239,7 +239,7 @@
     <action_set>
       <rsc_op id="27" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:1_start_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1">
         <primitive id="lxc-ms" long-id="lxc-ms:1" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_physical_host="18node1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
diff --git a/pengine/test10/whitebox-nested-group.exp b/pengine/test10/whitebox-nested-group.exp
index 979a0f5..388c4d4 100644
--- a/pengine/test10/whitebox-nested-group.exp
+++ b/pengine/test10/whitebox-nested-group.exp
@@ -62,7 +62,7 @@
     <action_set>
       <rsc_op id="32" operation="monitor" operation_key="fake2_monitor_10000" on_node="c7auto4" on_node_uuid="c7auto4" router_node="c7auto1">
         <primitive id="fake2" class="ocf" provider="heartbeat" type="Dummy"/>
-        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="c7auto4" CRM_meta_on_node_uuid="c7auto4" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="c7auto4" CRM_meta_on_node_uuid="c7auto4" CRM_meta_physical_host="c7auto1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -78,7 +78,7 @@
     <action_set>
       <rsc_op id="31" operation="start" operation_key="fake2_start_0" on_node="c7auto4" on_node_uuid="c7auto4" router_node="c7auto1">
         <primitive id="fake2" class="ocf" provider="heartbeat" type="Dummy"/>
-        <attributes CRM_meta_name="start" CRM_meta_on_node="c7auto4" CRM_meta_on_node_uuid="c7auto4" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_name="start" CRM_meta_on_node="c7auto4" CRM_meta_on_node_uuid="c7auto4" CRM_meta_physical_host="c7auto1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -248,7 +248,7 @@
     <action_set>
       <rsc_op id="38" operation="monitor" operation_key="fake5_monitor_10000" on_node="c7auto4" on_node_uuid="c7auto4" router_node="c7auto1">
         <primitive id="fake5" class="ocf" provider="heartbeat" type="Dummy"/>
-        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="c7auto4" CRM_meta_on_node_uuid="c7auto4" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="c7auto4" CRM_meta_on_node_uuid="c7auto4" CRM_meta_physical_host="c7auto1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -264,7 +264,7 @@
     <action_set>
       <rsc_op id="37" operation="start" operation_key="fake5_start_0" on_node="c7auto4" on_node_uuid="c7auto4" router_node="c7auto1">
         <primitive id="fake5" class="ocf" provider="heartbeat" type="Dummy"/>
-        <attributes CRM_meta_name="start" CRM_meta_on_node="c7auto4" CRM_meta_on_node_uuid="c7auto4" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_name="start" CRM_meta_on_node="c7auto4" CRM_meta_on_node_uuid="c7auto4" CRM_meta_physical_host="c7auto1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -386,7 +386,7 @@
     <action_set>
       <rsc_op id="44" operation="monitor" operation_key="fake:2_monitor_10000" on_node="c7auto4" on_node_uuid="c7auto4" router_node="c7auto1">
         <primitive id="fake" long-id="fake:2" class="ocf" provider="heartbeat" type="Dummy"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="c7auto4" CRM_meta_on_node_uuid="c7auto4" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="c7auto4" CRM_meta_on_node_uuid="c7auto4" CRM_meta_physical_host="c7auto1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -402,7 +402,7 @@
     <action_set>
       <rsc_op id="43" operation="start" operation_key="fake:2_start_0" on_node="c7auto4" on_node_uuid="c7auto4" router_node="c7auto1">
         <primitive id="fake" long-id="fake:2" class="ocf" provider="heartbeat" type="Dummy"/>
-        <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="c7auto4" CRM_meta_on_node_uuid="c7auto4" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="c7auto4" CRM_meta_on_node_uuid="c7auto4" CRM_meta_physical_host="c7auto1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
diff --git a/pengine/test10/whitebox-orphan-ms.exp b/pengine/test10/whitebox-orphan-ms.exp
index 6df1b8d..ef81317 100644
--- a/pengine/test10/whitebox-orphan-ms.exp
+++ b/pengine/test10/whitebox-orphan-ms.exp
@@ -135,7 +135,7 @@
     <action_set>
       <rsc_op id="93" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1">
         <primitive id="lxc-ms" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_timeout="90000" />
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_physical_host="18node1" CRM_meta_timeout="90000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -151,7 +151,7 @@
     <action_set>
       <rsc_op id="92" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
         <primitive id="lxc-ms" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="90000" />
+        <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node1" CRM_meta_timeout="90000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -167,7 +167,7 @@
     <action_set>
       <rsc_op id="91" operation="demote" operation_key="lxc-ms_demote_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1">
         <primitive id="lxc-ms" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_timeout="90000" />
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_physical_host="18node1" CRM_meta_timeout="90000" />
       </rsc_op>
     </action_set>
     <inputs/>
@@ -176,7 +176,7 @@
     <action_set>
       <rsc_op id="90" operation="demote" operation_key="lxc-ms_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
         <primitive id="lxc-ms" class="ocf" provider="pacemaker" type="Stateful"/>
-        <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="90000" />
+        <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node1" CRM_meta_timeout="90000" />
       </rsc_op>
     </action_set>
     <inputs/>
diff --git a/pengine/test10/whitebox-orphaned.exp b/pengine/test10/whitebox-orphaned.exp
index 32f8141..334e594 100644
--- a/pengine/test10/whitebox-orphaned.exp
+++ b/pengine/test10/whitebox-orphaned.exp
@@ -3,7 +3,7 @@
     <action_set>
       <rsc_op id="33" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="M" long-id="M:4" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_clone="4" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="4" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -39,7 +39,7 @@
     <action_set>
       <rsc_op id="42" operation="monitor" operation_key="B_monitor_10000" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -52,7 +52,7 @@
     <action_set>
       <rsc_op id="41" operation="start" operation_key="B_start_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -65,7 +65,7 @@
     <action_set>
       <rsc_op id="40" operation="stop" operation_key="B_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs/>
diff --git a/pengine/test10/whitebox-start.exp b/pengine/test10/whitebox-start.exp
index 11438e9..ccccf60 100644
--- a/pengine/test10/whitebox-start.exp
+++ b/pengine/test10/whitebox-start.exp
@@ -12,7 +12,7 @@
     <action_set>
       <rsc_op id="25" operation="monitor" operation_key="M_monitor_10000" internal_operation_key="M:4_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
         <primitive id="M" long-id="M:4" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -28,7 +28,7 @@
     <action_set>
       <rsc_op id="24" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
         <primitive id="M" long-id="M:4" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -70,7 +70,7 @@
     <action_set>
       <rsc_op id="32" operation="monitor" operation_key="A_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
         <primitive id="A" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -86,7 +86,7 @@
     <action_set>
       <rsc_op id="31" operation="start" operation_key="A_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
         <primitive id="A" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -140,7 +140,7 @@
     <action_set>
       <rsc_op id="33" operation="stop" operation_key="B_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs/>
diff --git a/pengine/test10/whitebox-stop.exp b/pengine/test10/whitebox-stop.exp
index a1aa3ba..354b6d4 100644
--- a/pengine/test10/whitebox-stop.exp
+++ b/pengine/test10/whitebox-stop.exp
@@ -16,7 +16,7 @@
     <action_set>
       <rsc_op id="26" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="M" long-id="M:4" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -52,7 +52,7 @@
     <action_set>
       <rsc_op id="35" operation="monitor" operation_key="B_monitor_10000" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -65,7 +65,7 @@
     <action_set>
       <rsc_op id="34" operation="start" operation_key="B_start_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
@@ -78,7 +78,7 @@
     <action_set>
       <rsc_op id="33" operation="stop" operation_key="B_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_timeout="20000" />
+        <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs/>
diff --git a/tools/attrd_updater.c b/tools/attrd_updater.c
index 91bc4b4..33d751b 100644
--- a/tools/attrd_updater.c
+++ b/tools/attrd_updater.c
@@ -79,6 +79,7 @@ static int do_query(const char *attr_name, const char *attr_node, gboolean query
 static int do_update(char command, const char *attr_node, const char *attr_name,
                      const char *attr_value, const char *attr_section,
                      const char *attr_set, const char *attr_dampen, int attr_options);
+static const char *get_hostname(const char *name);
 
 int
 main(int argc, char **argv)
@@ -198,6 +199,8 @@ main(int argc, char **argv)
         crm_help('?', EX_USAGE);
 #endif
     } else {
+
+        attr_node = get_hostname(attr_node);
         crm_exit(do_update(command, attr_node, attr_name, attr_value,
                            attr_section, attr_set, attr_dampen, attr_options));
     }
@@ -351,6 +354,8 @@ do_query(const char *attr_name, const char *attr_node, gboolean query_all)
         attr_node = "localhost";
     }
 
+    attr_node = get_hostname(attr_node);
+
     /* Build and send attrd request, and get XML reply */
     rc = send_attrd_query(attr_name, attr_node, &reply);
     if (rc != pcmk_ok) {
@@ -394,3 +399,28 @@ do_update(char command, const char *attr_node, const char *attr_name,
     }
     return rc;
 }
+
+static const char *
+get_hostname(const char *name)
+{
+    if(name != NULL
+       && safe_str_neq(name, "auto")
+       && safe_str_neq(name, "localhost")) {
+        return name;
+
+    } else {
+        const char *target = getenv(crm_meta_name(XML_RSC_ATTR_TARGET));
+        const char *host_pyhsical = getenv(crm_meta_name(PCMK_ENV_PHYSICAL_HOST));
+        const char *host_pcmk = getenv("OCF_RESKEY_" CRM_META "_" XML_LRM_ATTR_TARGET);
+
+        /* It is important we use the names by which the PE knows us */
+        if(safe_str_eq(target, "host") && host_pyhsical != NULL) {
+            return host_pyhsical;
+
+        } else if(host_pcmk) {
+            return host_pcmk;
+        }
+    }
+
+    return name;
+}
diff --git a/tools/crm_mon.c b/tools/crm_mon.c
index 29fc0e3..cad468e 100644
--- a/tools/crm_mon.c
+++ b/tools/crm_mon.c
@@ -1726,7 +1726,7 @@ print_node_attribute(gpointer name, gpointer user_data)
     const char *value = NULL;
     struct mon_attr_data *data = (struct mon_attr_data *) user_data;
 
-    value = g_hash_table_lookup(data->node->details->attrs, name);
+    value = node_attribute_raw(data->node, name);
 
     /* Print attribute name and value */
     switch (output_format) {
-- 
1.8.3.1


From 50e264254fcdf90f5ad0ce429938c15495f99acb Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Thu, 24 Aug 2017 14:34:46 +1000
Subject: [PATCH 02/21] Fix: attrd: Allow values for all nodes to be queried

---
 tools/attrd_updater.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/tools/attrd_updater.c b/tools/attrd_updater.c
index 33d751b..de75496 100644
--- a/tools/attrd_updater.c
+++ b/tools/attrd_updater.c
@@ -351,11 +351,11 @@ do_query(const char *attr_name, const char *attr_node, gboolean query_all)
         attr_node = NULL;
     } else if (attr_node == NULL) {
         crm_debug("User did not specify node for query, using localhost");
-        attr_node = "localhost";
+        attr_node = get_hostname(attr_node);
+    } else {
+        attr_node = get_hostname(attr_node);
     }
 
-    attr_node = get_hostname(attr_node);
-
     /* Build and send attrd request, and get XML reply */
     rc = send_attrd_query(attr_name, attr_node, &reply);
     if (rc != pcmk_ok) {
-- 
1.8.3.1


From 67ebfc43eabf77e72d784084e23d3031bfc19710 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Thu, 24 Aug 2017 14:35:29 +1000
Subject: [PATCH 03/21] Fix: PE: Correctly interpret colocation with bundles

---
 pengine/graph.c | 17 ++++++++++++-----
 1 file changed, 12 insertions(+), 5 deletions(-)

diff --git a/pengine/graph.c b/pengine/graph.c
index 3c5dc6b..990d8b8 100644
--- a/pengine/graph.c
+++ b/pengine/graph.c
@@ -413,9 +413,10 @@ graph_update_action(action_t * first, action_t * then, node_t * node,
 }
 
 static void
-mark_start_blocked(resource_t *rsc)
+mark_start_blocked(resource_t *rsc, resource_t *reason)
 {
     GListPtr gIter = rsc->actions;
+    char *reason_text = crm_strdup_printf("colocation with %s", reason->id);
 
     for (; gIter != NULL; gIter = gIter->next) {
         action_t *action = (action_t *) gIter->data;
@@ -424,11 +425,12 @@ mark_start_blocked(resource_t *rsc)
             continue;
         }
         if (is_set(action->flags, pe_action_runnable)) {
-            clear_bit(action->flags, pe_action_runnable);
+            pe_action_set_flag_reason(__FUNCTION__, __LINE__, action, NULL, reason_text, pe_action_runnable, FALSE);
             update_colo_start_chain(action);
             update_action(action);
         }
     }
+    free(reason_text);
 }
 
 void
@@ -445,6 +447,11 @@ update_colo_start_chain(action_t *action)
         return;
     }
 
+    if(rsc->parent) {
+        /* uber_parent() stops _before_ the bundle */
+        rsc = rsc->parent;
+    }
+
     /* if rsc has children, all the children need to have start set to
      * unrunnable before we follow the colo chain for the parent. */
     for (gIter = rsc->children; gIter != NULL; gIter = gIter->next) {
@@ -458,7 +465,7 @@ update_colo_start_chain(action_t *action)
     for (gIter = rsc->rsc_cons_lhs; gIter != NULL; gIter = gIter->next) {
         rsc_colocation_t *colocate_with = (rsc_colocation_t *)gIter->data;
         if (colocate_with->score == INFINITY) {
-            mark_start_blocked(colocate_with->rsc_lh);
+            mark_start_blocked(colocate_with->rsc_lh, action->rsc);
         }
     }
 }
@@ -490,7 +497,7 @@ update_action(action_t * then)
         if (then->required_runnable_before == 0) {
             then->required_runnable_before = 1;
         }
-        clear_bit(then->flags, pe_action_runnable);
+        pe_clear_action_bit(then, pe_action_runnable);
         /* We are relying on the pe_order_one_or_more clause of
          * graph_update_action(), called as part of the:
          *
@@ -1585,7 +1592,7 @@ graph_has_loop(action_t * init_action, action_t * action, action_wrapper_t * wra
     }
 
 done:
-    clear_bit(wrapper->action->flags, pe_action_tracking);
+    pe_clear_action_bit(wrapper->action, pe_action_tracking);
 
     return has_loop;
 }
-- 
1.8.3.1


From 3392d49b99c8d594af54549a41c962c46e26d7fd Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Fri, 25 Aug 2017 12:46:37 +1000
Subject: [PATCH 04/21] PE: bundle: Send an additional host list when
 container-attribute-target=host

The list is modified to use the name of the host where the bundles are
running so that agents can map between the two sets when necessary.
---
 lib/pengine/container.c |  1 +
 pengine/clone.c         |  8 +++---
 pengine/notif.c         | 68 ++++++++++++++++++++++++++++++++++++++-----------
 pengine/notif.h         |  2 +-
 4 files changed, 59 insertions(+), 20 deletions(-)

diff --git a/lib/pengine/container.c b/lib/pengine/container.c
index 53965cf..5831b58 100644
--- a/lib/pengine/container.c
+++ b/lib/pengine/container.c
@@ -769,6 +769,7 @@ container_unpack(resource_t * rsc, pe_working_set_t * data_set)
         container_data->docker_host_options = buffer;
         if(container_data->attribute_target) {
             g_hash_table_replace(rsc->meta, strdup(XML_RSC_ATTR_TARGET), strdup(container_data->attribute_target));
+            g_hash_table_replace(container_data->child->meta, strdup(XML_RSC_ATTR_TARGET), strdup(container_data->attribute_target));
         }
 
     } else {
diff --git a/pengine/clone.c b/pengine/clone.c
index 1722166..41cb5cb 100644
--- a/pengine/clone.c
+++ b/pengine/clone.c
@@ -1227,25 +1227,25 @@ clone_expand(resource_t * rsc, pe_working_set_t * data_set)
 
     if (clone_data->start_notify) {
         collect_notification_data(rsc, TRUE, TRUE, clone_data->start_notify);
-        expand_notification_data(clone_data->start_notify, data_set);
+        expand_notification_data(rsc, clone_data->start_notify, data_set);
         create_notifications(rsc, clone_data->start_notify, data_set);
     }
 
     if (clone_data->stop_notify) {
         collect_notification_data(rsc, TRUE, TRUE, clone_data->stop_notify);
-        expand_notification_data(clone_data->stop_notify, data_set);
+        expand_notification_data(rsc, clone_data->stop_notify, data_set);
         create_notifications(rsc, clone_data->stop_notify, data_set);
     }
 
     if (clone_data->promote_notify) {
         collect_notification_data(rsc, TRUE, TRUE, clone_data->promote_notify);
-        expand_notification_data(clone_data->promote_notify, data_set);
+        expand_notification_data(rsc, clone_data->promote_notify, data_set);
         create_notifications(rsc, clone_data->promote_notify, data_set);
     }
 
     if (clone_data->demote_notify) {
         collect_notification_data(rsc, TRUE, TRUE, clone_data->demote_notify);
-        expand_notification_data(clone_data->demote_notify, data_set);
+        expand_notification_data(rsc, clone_data->demote_notify, data_set);
         create_notifications(rsc, clone_data->demote_notify, data_set);
     }
 
diff --git a/pengine/notif.c b/pengine/notif.c
index b8135b5..19a9751 100644
--- a/pengine/notif.c
+++ b/pengine/notif.c
@@ -17,6 +17,7 @@
  */
 
 #include <crm_internal.h>
+#include <crm/msg_xml.h>
 #include <allocate.h>
 #include <notif.h>
 #include <utils.h>
@@ -81,33 +82,60 @@ static notify_entry_t *dup_notify_entry(notify_entry_t *entry)
     return dup;
 }
 
-static char *
-expand_node_list(GListPtr list)
+static void
+expand_node_list(GListPtr list, char **uname, char **metal)
 {
     GListPtr gIter = NULL;
     char *node_list = NULL;
+    char *metal_list = NULL;
 
+    CRM_ASSERT(uname != NULL);
     if (list == NULL) {
-        return strdup(" ");
+        *uname = strdup(" ");
+        if(metal) {
+            *metal = strdup(" ");
+        }
+        return;
     }
 
     for (gIter = list; gIter != NULL; gIter = gIter->next) {
+        int len = 0;
+        int existing_len = 0;
         node_t *node = (node_t *) gIter->data;
 
-        if (node->details->uname) {
-            int existing_len = 0;
-            int len = 2 + strlen(node->details->uname);
+        CRM_ASSERT(node->details->uname);
+        len = 2 + strlen(node->details->uname);
+
+        if(node_list) {
+            existing_len = strlen(node_list);
+        }
+//            crm_trace("Adding %s (%dc) at offset %d", node->details->uname, len - 2, existing_len);
+        node_list = realloc_safe(node_list, len + existing_len);
+        sprintf(node_list + existing_len, "%s%s", existing_len == 0 ? "":" ", node->details->uname);
+
+        if(metal) {
+            existing_len = 0;
+            if(metal_list) {
+                existing_len = strlen(metal_list);
+            }
 
-            if(node_list) {
-                existing_len = strlen(node_list);
+            if(node->details->remote_rsc
+               && node->details->remote_rsc->container
+               && node->details->remote_rsc->container->running_on) {
+                node = node->details->remote_rsc->container->running_on->data;
             }
-            crm_trace("Adding %s (%dc) at offset %d", node->details->uname, len - 2, existing_len);
-            node_list = realloc_safe(node_list, len + existing_len);
-            sprintf(node_list + existing_len, "%s%s", existing_len == 0 ? "":" ", node->details->uname);
+
+            CRM_ASSERT(node->details->uname);
+            len = 2 + strlen(node->details->uname);
+            metal_list = realloc_safe(metal_list, len + existing_len);
+            sprintf(metal_list + existing_len, "%s%s", existing_len == 0 ? "":" ", node->details->uname);
         }
     }
 
-    return node_list;
+    *uname = node_list;
+    if(metal) {
+        *metal = metal_list;
+    }
 }
 
 static void
@@ -495,7 +523,7 @@ collect_notification_data(resource_t * rsc, gboolean state, gboolean activity,
 }
 
 gboolean
-expand_notification_data(notify_data_t * n_data, pe_working_set_t * data_set)
+expand_notification_data(resource_t *rsc, notify_data_t * n_data, pe_working_set_t * data_set)
 {
     /* Expand the notification entries into a key=value hashtable
      * This hashtable is later used in action2xml()
@@ -503,6 +531,7 @@ expand_notification_data(notify_data_t * n_data, pe_working_set_t * data_set)
     gboolean required = FALSE;
     char *rsc_list = NULL;
     char *node_list = NULL;
+    char *metal_list = NULL;
     GListPtr nodes = NULL;
 
     if (n_data->stop) {
@@ -576,13 +605,22 @@ expand_notification_data(notify_data_t * n_data, pe_working_set_t * data_set)
     g_hash_table_insert(n_data->keys, strdup("notify_inactive_resource"), rsc_list);
 
     nodes = g_hash_table_get_values(n_data->allowed_nodes);
-    node_list = expand_node_list(nodes);
+    expand_node_list(nodes, &node_list, NULL);
     g_hash_table_insert(n_data->keys, strdup("notify_available_uname"), node_list);
     g_list_free(nodes);
 
-    node_list = expand_node_list(data_set->nodes);
+    expand_node_list(data_set->nodes, &node_list, &metal_list);
     g_hash_table_insert(n_data->keys, strdup("notify_all_uname"), node_list);
 
+    {
+        const char *source = g_hash_table_lookup(rsc->meta, XML_RSC_ATTR_TARGET);
+        if(safe_str_eq("host", source)) {
+            g_hash_table_insert(n_data->keys, strdup("notify_all_hosts"), metal_list);
+        } else {
+            free(metal_list);
+        }
+    }
+
     if (required && n_data->pre) {
         update_action_flags(n_data->pre, pe_action_optional | pe_action_clear, __FUNCTION__, __LINE__);
         update_action_flags(n_data->pre_done, pe_action_optional | pe_action_clear, __FUNCTION__, __LINE__);
diff --git a/pengine/notif.h b/pengine/notif.h
index f299342..da68874 100644
--- a/pengine/notif.h
+++ b/pengine/notif.h
@@ -28,7 +28,7 @@ notify_data_t * create_notification_boundaries(resource_t *rsc,
 void collect_notification_data(resource_t *rsc, gboolean state,
                                gboolean activity, notify_data_t *n_data);
 
-gboolean expand_notification_data(notify_data_t *n_data,
+gboolean expand_notification_data(resource_t *rsc, notify_data_t *n_data,
                                   pe_working_set_t *data_set);
 
 void create_notifications(resource_t *rsc, notify_data_t *n_data,
-- 
1.8.3.1


From ccbdb2a215bad69c9e6ac2d74c0bbb1d1719db5a Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Mon, 28 Aug 2017 12:17:16 +1000
Subject: [PATCH 05/21] Tools: Allow bundle resources to read/write master
 scores based on the same logic as attrd (cf34f4c)

---
 include/crm/attrd.h       |  2 ++
 lib/common/utils.c        | 28 ++++++++++++++++++++++++++++
 pacemaker.spec.in         |  4 +++-
 tools/Makefile.am         |  2 +-
 tools/attrd_updater.c     | 40 +++++++++-------------------------------
 tools/crm_attribute.c     | 14 ++++++--------
 tools/crm_master          |  6 ++----
 7 files changed, 51 insertions(+), 45 deletions(-)

diff --git a/include/crm/attrd.h b/include/crm/attrd.h
index e294838..240f192 100644
--- a/include/crm/attrd.h
+++ b/include/crm/attrd.h
@@ -24,6 +24,8 @@
 #define attrd_opt_remote  0x001
 #define attrd_opt_private 0x002
 
+const char *attrd_get_target(const char *name);
+
 int attrd_update_delegate(crm_ipc_t * ipc, char command, const char *host,
                           const char *name, const char *value, const char *section,
                           const char *set, const char *dampen, const char *user_name, int options);
diff --git a/lib/common/utils.c b/lib/common/utils.c
index f594c12..290a661 100644
--- a/lib/common/utils.c
+++ b/lib/common/utils.c
@@ -2156,3 +2156,31 @@ crm_gnutls_global_init(void)
     gnutls_global_init();
 }
 #endif
+
+const char *
+attrd_get_target(const char *name)
+{
+    if(safe_str_eq(name, "auto") || safe_str_eq(name, "localhost")) {
+        name = NULL;
+    }
+
+    if(name != NULL) {
+        return name;
+
+    } else {
+        const char *target = getenv(crm_meta_name(XML_RSC_ATTR_TARGET));
+        const char *host_pyhsical = getenv(crm_meta_name(PCMK_ENV_PHYSICAL_HOST));
+        const char *host_pcmk = getenv("OCF_RESKEY_" CRM_META "_" XML_LRM_ATTR_TARGET);
+
+        /* It is important we use the names by which the PE knows us */
+        if(safe_str_eq(target, "host") && host_pyhsical != NULL) {
+            return host_pyhsical;
+
+        } else if(host_pcmk) {
+            return host_pcmk;
+        }
+    }
+
+    // TODO? Call get_local_node_name() if name == NULL
+    return name;
+}
diff --git a/pacemaker.spec.in b/pacemaker.spec.in
index 642af74..d0bc2c3 100644
--- a/pacemaker.spec.in
+++ b/pacemaker.spec.in
@@ -601,6 +601,7 @@ exit 0
 %exclude %{_sbindir}/pacemaker_remoted
 %{_libexecdir}/pacemaker/*
 
+%{_sbindir}/attrd_updater
 %{_sbindir}/crm_attribute
 %{_sbindir}/crm_master
 %{_sbindir}/crm_node
@@ -619,6 +620,7 @@ exit 0
 %doc %{_mandir}/man7/ocf_pacemaker_o2cb.*
 %doc %{_mandir}/man7/ocf_pacemaker_remote.*
 %doc %{_mandir}/man8/crm_attribute.*
+%doc %{_mandir}/man8/attrd_updater.*
 %doc %{_mandir}/man8/crm_node.*
 %doc %{_mandir}/man8/crm_master.*
 %if %{with cman}
@@ -668,7 +670,6 @@ exit 0
 %config(noreplace) %{_sysconfdir}/init/crm_mon.conf
 %endif
 
-%{_sbindir}/attrd_updater
 %{_sbindir}/cibadmin
 %{_sbindir}/crm_diff
 %{_sbindir}/crm_error
@@ -704,6 +705,7 @@ exit 0
 %exclude %{_mandir}/man7/ocf_pacemaker_o2cb.*
 %exclude %{_mandir}/man7/ocf_pacemaker_remote.*
 %doc %{_mandir}/man8/*
+%exclude %{_mandir}/man8/attrd_updater.*
 %exclude %{_mandir}/man8/crm_attribute.*
 %exclude %{_mandir}/man8/crm_node.*
 %exclude %{_mandir}/man8/crm_master.*
diff --git a/tools/Makefile.am b/tools/Makefile.am
index 3548035..a601b8d 100644
--- a/tools/Makefile.am
+++ b/tools/Makefile.am
@@ -121,7 +121,7 @@ iso8601_SOURCES		= test.iso8601.c
 iso8601_LDADD		= $(COMMONLIBS)
 
 attrd_updater_SOURCES	= attrd_updater.c
-attrd_updater_LDADD	= $(COMMONLIBS)
+attrd_updater_LDADD	= $(top_builddir)/lib/cluster/libcrmcluster.la $(COMMONLIBS)
 
 crm_ticket_SOURCES	= crm_ticket.c
 crm_ticket_LDADD	= $(top_builddir)/lib/pengine/libpe_rules.la  \
diff --git a/tools/attrd_updater.c b/tools/attrd_updater.c
index de75496..5e8b837 100644
--- a/tools/attrd_updater.c
+++ b/tools/attrd_updater.c
@@ -32,6 +32,7 @@
 #include <crm/common/ipc.h>
 
 #include <crm/attrd.h>
+#include <crm/cluster.h>
 
 /* *INDENT-OFF* */
 static struct crm_option long_options[] = {
@@ -79,7 +80,6 @@ static int do_query(const char *attr_name, const char *attr_node, gboolean query
 static int do_update(char command, const char *attr_node, const char *attr_name,
                      const char *attr_value, const char *attr_section,
                      const char *attr_set, const char *attr_dampen, int attr_options);
-static const char *get_hostname(const char *name);
 
 int
 main(int argc, char **argv)
@@ -200,7 +200,10 @@ main(int argc, char **argv)
 #endif
     } else {
 
-        attr_node = get_hostname(attr_node);
+        attr_node = attrd_get_target(attr_node);
+        if (attr_node == NULL) {
+            attr_node = get_local_node_name();
+        }
         crm_exit(do_update(command, attr_node, attr_name, attr_value,
                            attr_section, attr_set, attr_dampen, attr_options));
     }
@@ -349,11 +352,11 @@ do_query(const char *attr_name, const char *attr_node, gboolean query_all)
     /* Decide which node(s) to query */
     if (query_all == TRUE) {
         attr_node = NULL;
-    } else if (attr_node == NULL) {
-        crm_debug("User did not specify node for query, using localhost");
-        attr_node = get_hostname(attr_node);
     } else {
-        attr_node = get_hostname(attr_node);
+        attr_node = attrd_get_target(attr_node);
+        if (attr_node == NULL) {
+            attr_node = get_local_node_name();
+        }
     }
 
     /* Build and send attrd request, and get XML reply */
@@ -399,28 +402,3 @@ do_update(char command, const char *attr_node, const char *attr_name,
     }
     return rc;
 }
-
-static const char *
-get_hostname(const char *name)
-{
-    if(name != NULL
-       && safe_str_neq(name, "auto")
-       && safe_str_neq(name, "localhost")) {
-        return name;
-
-    } else {
-        const char *target = getenv(crm_meta_name(XML_RSC_ATTR_TARGET));
-        const char *host_pyhsical = getenv(crm_meta_name(PCMK_ENV_PHYSICAL_HOST));
-        const char *host_pcmk = getenv("OCF_RESKEY_" CRM_META "_" XML_LRM_ATTR_TARGET);
-
-        /* It is important we use the names by which the PE knows us */
-        if(safe_str_eq(target, "host") && host_pyhsical != NULL) {
-            return host_pyhsical;
-
-        } else if(host_pcmk) {
-            return host_pcmk;
-        }
-    }
-
-    return name;
-}
diff --git a/tools/crm_attribute.c b/tools/crm_attribute.c
index 60ded8d..b511282 100644
--- a/tools/crm_attribute.c
+++ b/tools/crm_attribute.c
@@ -246,15 +246,13 @@ main(int argc, char **argv)
 
     } else if (safe_str_eq(type, XML_CIB_TAG_CRMCONFIG)) {
     } else if (safe_str_neq(type, XML_CIB_TAG_TICKETS)) {
+        /* If we are being called from a resource agent via the cluster,
+         * the correct local node name will be passed as an environment
+         * variable. Otherwise, we have to ask the cluster.
+         */
+        dest_uname = attrd_get_target(dest_uname);
         if (dest_uname == NULL) {
-            /* If we are being called from a resource agent via the cluster,
-             * the correct local node name will be passed as an environment
-             * variable. Otherwise, we have to ask the cluster.
-             */
-            dest_uname = getenv("OCF_RESKEY_" CRM_META "_" XML_LRM_ATTR_TARGET);
-            if (dest_uname == NULL) {
-                dest_uname = get_local_node_name();
-            }
+            dest_uname = get_local_node_name();
         }
 
         rc = query_node_uuid(the_cib, dest_uname, &dest_node, &is_remote_node);
diff --git a/tools/crm_master b/tools/crm_master
index 7cce64d..7e31cea 100755
--- a/tools/crm_master
+++ b/tools/crm_master
@@ -1,7 +1,5 @@
 #!/bin/bash
 
-target=`crm_node -n`
-
 TEMP=`getopt -o qDGQVN:U:v:i:l:r: --long version,help,resource:,node:,uname:,attr-value:,id:,update:,delete-attr,get-value,attr-id:,lifetime:,quiet \
      -n 'crm_master' -- "$@"`
 
@@ -12,7 +10,7 @@ eval set -- "$TEMP"
 
 while true ; do
 	case "$1" in
-	    -N|--node|-U|--uname) target="$2"; shift; shift;;
+	    -N|--node|-U|--uname) options="$options $1 $2"; shift; shift;;
 	    -v|--attr-value|--update|-i|--id|--attr-id|-l|--lifetime) options="$options $1 $2"; shift; shift;;
 	    -Q|-q|--quiet|-D|--delete-attr|-G|--get-value|-V) options="$options $1"; shift;;
 	    -r|--resource) OCF_RESOURCE_INSTANCE=$2; shift; shift;;
@@ -53,4 +51,4 @@ if [ -z "$OCF_RESOURCE_INSTANCE" ]; then
     exit 1
 fi
 
-crm_attribute -N $target -n master-$OCF_RESOURCE_INSTANCE $options
+crm_attribute -n master-$OCF_RESOURCE_INSTANCE $options
-- 
1.8.3.1


From e3485d6fd5e9e6ec05d9cd6682d46da3e463d6c7 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Wed, 13 Sep 2017 13:31:09 +1000
Subject: [PATCH 06/21] Fix: PE: Prevent graph loops when fencing the host out
 from underneath a bundle

---
 pengine/allocate.c | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/pengine/allocate.c b/pengine/allocate.c
index 958fb23..d610035 100644
--- a/pengine/allocate.c
+++ b/pengine/allocate.c
@@ -1416,7 +1416,14 @@ fence_guest(pe_node_t *node, pe_action_t *done, pe_working_set_t *data_set)
      * it is restarted, so we always order pseudo-fencing after stop, not start
      * (even though start might be closer to what is done for a real reboot).
      */
-    if (stop) {
+    if(stop && is_set(stop->flags, pe_action_pseudo)) {
+        pe_action_t *parent_stonith_op = pe_fence_op(stop->node, NULL, FALSE, NULL, data_set);
+        crm_info("Implying guest node %s is down (action %d) after %s fencing",
+                 node->details->uname, stonith_op->id, stop->node->details->uname);
+        order_actions(parent_stonith_op, stonith_op,
+                      pe_order_runnable_left|pe_order_implies_then);
+
+    } else if (stop) {
         order_actions(stop, stonith_op,
                       pe_order_runnable_left|pe_order_implies_then);
         crm_info("Implying guest node %s is down (action %d) "
-- 
1.8.3.1


From 2709e5c2e231e80da557acf3b736f970516ffbb9 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Wed, 13 Sep 2017 14:14:31 +1000
Subject: [PATCH 07/21] Fix: PE: Do not send notifications to unclean bundles

---
 pengine/notif.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/pengine/notif.c b/pengine/notif.c
index 19a9751..76c5a4a 100644
--- a/pengine/notif.c
+++ b/pengine/notif.c
@@ -691,7 +691,7 @@ create_notifications(resource_t * rsc, notify_data_t * n_data, pe_working_set_t
                  * action. There's no reason to send the fenced node a stop notification */ 
                 if (stop &&
                     is_set(stop->flags, pe_action_pseudo) &&
-                    current_node->details->unclean) {
+                    (current_node->details->unclean || current_node->details->remote_requires_reset) ) {
 
                     continue;
                 }
-- 
1.8.3.1


From d29ba5dce8d2bccf4a0c906c3bd02a87f7e42974 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Wed, 13 Sep 2017 20:06:15 +1000
Subject: [PATCH 08/21] Test: PE: Update bundle fence ordering

---
 pengine/test10/complex_enforce_colo.summary         | 4 ++--
 pengine/test10/enforce-colo1.summary                | 2 +-
 pengine/test10/whitebox-imply-stop-on-fence.dot     | 4 ++--
 pengine/test10/whitebox-imply-stop-on-fence.exp     | 4 ++--
 pengine/test10/whitebox-imply-stop-on-fence.summary | 6 +++---
 5 files changed, 10 insertions(+), 10 deletions(-)

diff --git a/pengine/test10/complex_enforce_colo.summary b/pengine/test10/complex_enforce_colo.summary
index 2332269..0426e98 100644
--- a/pengine/test10/complex_enforce_colo.summary
+++ b/pengine/test10/complex_enforce_colo.summary
@@ -113,7 +113,7 @@ Transition Summary:
  * Stop    glance-api:2	(rhos6-node3)
  * Stop       cinder-api                      ( rhos6-node1 )   due to unrunnable keystone-clone running
  * Stop       cinder-scheduler                ( rhos6-node1 )   due to required cinder-api start
- * Stop       cinder-volume                   ( rhos6-node1 )  
+ * Stop       cinder-volume                   ( rhos6-node1 )   due to colocation with cinder-scheduler
  * Stop    swift-account:0	(rhos6-node1)
  * Stop    swift-account:1	(rhos6-node2)
  * Stop    swift-account:2	(rhos6-node3)
@@ -194,7 +194,7 @@ Transition Summary:
  * Stop       heat-api-cloudwatch:0           ( rhos6-node1 )   due to required heat-api-cfn:0 start
  * Stop       heat-api-cloudwatch:1           ( rhos6-node2 )   due to required heat-api-cfn:1 start
  * Stop       heat-api-cloudwatch:2           ( rhos6-node3 )   due to required heat-api-cfn:2 start
- * Stop       heat-engine                     ( rhos6-node2 )   due to required heat-api-cloudwatch-clone running
+ * Stop       heat-engine                     ( rhos6-node2 )   due to colocation with heat-api-cloudwatch-clone
 
 Executing cluster transition:
  * Pseudo action:   glance-api-clone_stop_0
diff --git a/pengine/test10/enforce-colo1.summary b/pengine/test10/enforce-colo1.summary
index 64815ae..4968326 100644
--- a/pengine/test10/enforce-colo1.summary
+++ b/pengine/test10/enforce-colo1.summary
@@ -10,7 +10,7 @@ Online: [ rhel7-auto1 rhel7-auto2 rhel7-auto3 ]
  central	(ocf::heartbeat:Dummy):	Started rhel7-auto3 
 
 Transition Summary:
- * Stop       engine         ( rhel7-auto3 )  
+ * Stop       engine         ( rhel7-auto3 )   due to colocation with central
  * Stop    keystone:0	(rhel7-auto2)  	due to node availability
  * Stop    keystone:1	(rhel7-auto3)  	due to node availability
  * Stop    keystone:2	(rhel7-auto1)  	due to node availability
diff --git a/pengine/test10/whitebox-imply-stop-on-fence.dot b/pengine/test10/whitebox-imply-stop-on-fence.dot
index 5885d4b..8ef42fd 100644
--- a/pengine/test10/whitebox-imply-stop-on-fence.dot
+++ b/pengine/test10/whitebox-imply-stop-on-fence.dot
@@ -7,7 +7,6 @@
 "R-lxc-01_kiff-01_stop_0 kiff-01" -> "R-lxc-01_kiff-01_start_0 kiff-02" [ style = bold]
 "R-lxc-01_kiff-01_stop_0 kiff-01" -> "all_stopped" [ style = bold]
 "R-lxc-01_kiff-01_stop_0 kiff-01" -> "shared0-clone_stop_0" [ style = bold]
-"R-lxc-01_kiff-01_stop_0 kiff-01" -> "stonith 'reboot' lxc-01_kiff-01" [ style = bold]
 "R-lxc-01_kiff-01_stop_0 kiff-01" [ style=bold color="green" fontcolor="orange"]
 "R-lxc-02_kiff-01_monitor_10000 kiff-02" [ style=bold color="green" fontcolor="black"]
 "R-lxc-02_kiff-01_start_0 kiff-02" -> "R-lxc-02_kiff-01_monitor_10000 kiff-02" [ style = bold]
@@ -16,7 +15,6 @@
 "R-lxc-02_kiff-01_stop_0 kiff-01" -> "R-lxc-02_kiff-01_start_0 kiff-02" [ style = bold]
 "R-lxc-02_kiff-01_stop_0 kiff-01" -> "all_stopped" [ style = bold]
 "R-lxc-02_kiff-01_stop_0 kiff-01" -> "shared0-clone_stop_0" [ style = bold]
-"R-lxc-02_kiff-01_stop_0 kiff-01" -> "stonith 'reboot' lxc-02_kiff-01" [ style = bold]
 "R-lxc-02_kiff-01_stop_0 kiff-01" [ style=bold color="green" fontcolor="orange"]
 "all_stopped" -> "fence-kiff-02_start_0 kiff-02" [ style = bold]
 "all_stopped" [ style=bold color="green" fontcolor="orange"]
@@ -77,6 +75,8 @@
 "stonith 'reboot' kiff-01" -> "lxc-02_kiff-01_stop_0 kiff-01" [ style = bold]
 "stonith 'reboot' kiff-01" -> "shared0-clone_stop_0" [ style = bold]
 "stonith 'reboot' kiff-01" -> "shared0_stop_0 kiff-01" [ style = bold]
+"stonith 'reboot' kiff-01" -> "stonith 'reboot' lxc-01_kiff-01" [ style = bold]
+"stonith 'reboot' kiff-01" -> "stonith 'reboot' lxc-02_kiff-01" [ style = bold]
 "stonith 'reboot' kiff-01" -> "stonith_complete" [ style = bold]
 "stonith 'reboot' kiff-01" [ style=bold color="green" fontcolor="black"]
 "stonith 'reboot' lxc-01_kiff-01" -> "stonith_complete" [ style = bold]
diff --git a/pengine/test10/whitebox-imply-stop-on-fence.exp b/pengine/test10/whitebox-imply-stop-on-fence.exp
index 6639eb9..d1e22ee 100644
--- a/pengine/test10/whitebox-imply-stop-on-fence.exp
+++ b/pengine/test10/whitebox-imply-stop-on-fence.exp
@@ -417,7 +417,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="40" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
@@ -432,7 +432,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="37" operation="stop" operation_key="R-lxc-01_kiff-01_stop_0"/>
+        <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/whitebox-imply-stop-on-fence.summary b/pengine/test10/whitebox-imply-stop-on-fence.summary
index a3e9ce8..87d7b4f 100644
--- a/pengine/test10/whitebox-imply-stop-on-fence.summary
+++ b/pengine/test10/whitebox-imply-stop-on-fence.summary
@@ -43,15 +43,15 @@ Executing cluster transition:
  * Fencing kiff-01 (reboot)
  * Pseudo action:   lxc-01_kiff-01_stop_0
  * Pseudo action:   lxc-02_kiff-01_stop_0
- * Pseudo action:   R-lxc-01_kiff-01_stop_0
- * Pseudo action:   R-lxc-02_kiff-01_stop_0
  * Pseudo action:   stonith-lxc-02_kiff-01-reboot on lxc-02_kiff-01
  * Pseudo action:   stonith-lxc-01_kiff-01-reboot on lxc-01_kiff-01
  * Pseudo action:   stonith_complete
+ * Pseudo action:   R-lxc-01_kiff-01_stop_0
+ * Pseudo action:   R-lxc-02_kiff-01_stop_0
+ * Pseudo action:   vm-fs_stop_0
  * Pseudo action:   shared0-clone_stop_0
  * Resource action: R-lxc-01_kiff-01 start on kiff-02
  * Resource action: R-lxc-02_kiff-01 start on kiff-02
- * Pseudo action:   vm-fs_stop_0
  * Resource action: lxc-01_kiff-01  start on kiff-02
  * Resource action: lxc-02_kiff-01  start on kiff-02
  * Pseudo action:   shared0_stop_0
-- 
1.8.3.1


From 8f19403bdaf4722b82d794c10e9911976bd68b82 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Wed, 13 Sep 2017 20:14:21 +1000
Subject: [PATCH 09/21] Test: PE: Prevent graph loops when fencing the host out
 from underneath a bundle

---
 pengine/regression.sh                       |    2 +
 pengine/test10/bundle-order-fencing.dot     |  442 ++++++
 pengine/test10/bundle-order-fencing.exp     | 1982 +++++++++++++++++++++++++++
 pengine/test10/bundle-order-fencing.scores  | 1148 ++++++++++++++++
 pengine/test10/bundle-order-fencing.summary |  222 +++
 pengine/test10/bundle-order-fencing.xml     |  799 +++++++++++
 6 files changed, 4595 insertions(+)
 create mode 100644 pengine/test10/bundle-order-fencing.dot
 create mode 100644 pengine/test10/bundle-order-fencing.exp
 create mode 100644 pengine/test10/bundle-order-fencing.scores
 create mode 100644 pengine/test10/bundle-order-fencing.summary
 create mode 100644 pengine/test10/bundle-order-fencing.xml

diff --git a/pengine/regression.sh b/pengine/regression.sh
index d1a8a3f..6c3be88 100755
--- a/pengine/regression.sh
+++ b/pengine/regression.sh
@@ -811,6 +811,8 @@ do_test bundle-order-startup-clone-2 "Bundle startup with clones"
 do_test bundle-order-stop-clone "Stop bundle because clone is stopping"
 do_test bundle-nested-colocation "Colocation of nested connection resources"
 
+do_test bundle-order-fencing "Order pseudo bundle fencing after parent node fencing if both are happening"
+
 echo ""
 do_test whitebox-fail1 "Fail whitebox container rsc."
 do_test whitebox-fail2 "Fail whitebox container rsc lrmd connection."
diff --git a/pengine/test10/bundle-order-fencing.dot b/pengine/test10/bundle-order-fencing.dot
new file mode 100644
index 0000000..0db9605
--- /dev/null
+++ b/pengine/test10/bundle-order-fencing.dot
@@ -0,0 +1,442 @@
+digraph "g" {
+"Cancel redis_monitor_45000 redis-bundle-1" -> "redis_promote_0 redis-bundle-1" [ style = bold]
+"Cancel redis_monitor_45000 redis-bundle-1" [ style=bold color="green" fontcolor="black"]
+"Cancel redis_monitor_60000 redis-bundle-1" -> "redis_promote_0 redis-bundle-1" [ style = bold]
+"Cancel redis_monitor_60000 redis-bundle-1" [ style=bold color="green" fontcolor="black"]
+"all_stopped" -> "stonith-fence_ipmilan-5254000dcb3f_start_0 controller-2" [ style = bold]
+"all_stopped" -> "stonith-fence_ipmilan-5254003e8e97_start_0 controller-1" [ style = bold]
+"all_stopped" [ style=bold color="green" fontcolor="orange"]
+"galera-bundle-0_monitor_60000 controller-2" [ style=dashed color="red" fontcolor="black"]
+"galera-bundle-0_start_0 controller-2" -> "galera-bundle-0_monitor_60000 controller-2" [ style = dashed]
+"galera-bundle-0_start_0 controller-2" -> "galera_monitor_20000 galera-bundle-0" [ style = dashed]
+"galera-bundle-0_start_0 controller-2" -> "galera_monitor_30000 galera-bundle-0" [ style = dashed]
+"galera-bundle-0_start_0 controller-2" -> "galera_start_0 galera-bundle-0" [ style = dashed]
+"galera-bundle-0_start_0 controller-2" [ style=dashed color="red" fontcolor="black"]
+"galera-bundle-0_stop_0 controller-0" -> "all_stopped" [ style = bold]
+"galera-bundle-0_stop_0 controller-0" -> "galera-bundle-0_start_0 controller-2" [ style = dashed]
+"galera-bundle-0_stop_0 controller-0" -> "galera-bundle-docker-0_stop_0 controller-0" [ style = bold]
+"galera-bundle-0_stop_0 controller-0" [ style=bold color="green" fontcolor="orange"]
+"galera-bundle-docker-0_stop_0 controller-0" -> "all_stopped" [ style = bold]
+"galera-bundle-docker-0_stop_0 controller-0" -> "galera-bundle_stopped_0" [ style = bold]
+"galera-bundle-docker-0_stop_0 controller-0" [ style=bold color="green" fontcolor="orange"]
+"galera-bundle-master_demote_0" -> "galera-bundle-master_demoted_0" [ style = bold]
+"galera-bundle-master_demote_0" -> "galera_demote_0 galera-bundle-0" [ style = bold]
+"galera-bundle-master_demote_0" [ style=bold color="green" fontcolor="orange"]
+"galera-bundle-master_demoted_0" -> "galera-bundle-master_start_0" [ style = bold]
+"galera-bundle-master_demoted_0" -> "galera-bundle-master_stop_0" [ style = bold]
+"galera-bundle-master_demoted_0" -> "galera-bundle_demoted_0" [ style = bold]
+"galera-bundle-master_demoted_0" [ style=bold color="green" fontcolor="orange"]
+"galera-bundle-master_running_0" -> "galera-bundle_running_0" [ style = bold]
+"galera-bundle-master_running_0" [ style=bold color="green" fontcolor="orange"]
+"galera-bundle-master_start_0" -> "galera-bundle-master_running_0" [ style = bold]
+"galera-bundle-master_start_0" -> "galera_start_0 galera-bundle-0" [ style = dashed]
+"galera-bundle-master_start_0" [ style=bold color="green" fontcolor="orange"]
+"galera-bundle-master_stop_0" -> "galera-bundle-master_stopped_0" [ style = bold]
+"galera-bundle-master_stop_0" -> "galera_stop_0 galera-bundle-0" [ style = bold]
+"galera-bundle-master_stop_0" [ style=bold color="green" fontcolor="orange"]
+"galera-bundle-master_stopped_0" -> "galera-bundle-master_start_0" [ style = bold]
+"galera-bundle-master_stopped_0" -> "galera-bundle_stopped_0" [ style = bold]
+"galera-bundle-master_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"galera-bundle_demote_0" -> "galera-bundle-master_demote_0" [ style = bold]
+"galera-bundle_demote_0" -> "galera-bundle_demoted_0" [ style = bold]
+"galera-bundle_demote_0" [ style=bold color="green" fontcolor="orange"]
+"galera-bundle_demoted_0" -> "galera-bundle_start_0" [ style = bold]
+"galera-bundle_demoted_0" -> "galera-bundle_stop_0" [ style = bold]
+"galera-bundle_demoted_0" [ style=bold color="green" fontcolor="orange"]
+"galera-bundle_running_0" [ style=bold color="green" fontcolor="orange"]
+"galera-bundle_start_0" -> "galera-bundle-master_start_0" [ style = bold]
+"galera-bundle_start_0" [ style=bold color="green" fontcolor="orange"]
+"galera-bundle_stop_0" -> "galera-bundle-docker-0_stop_0 controller-0" [ style = bold]
+"galera-bundle_stop_0" -> "galera-bundle-master_stop_0" [ style = bold]
+"galera-bundle_stop_0" -> "galera_stop_0 galera-bundle-0" [ style = bold]
+"galera-bundle_stop_0" [ style=bold color="green" fontcolor="orange"]
+"galera-bundle_stopped_0" -> "galera-bundle_start_0" [ style = bold]
+"galera-bundle_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"galera_demote_0 galera-bundle-0" -> "galera-bundle-master_demoted_0" [ style = bold]
+"galera_demote_0 galera-bundle-0" -> "galera_monitor_20000 galera-bundle-0" [ style = dashed]
+"galera_demote_0 galera-bundle-0" -> "galera_monitor_30000 galera-bundle-0" [ style = dashed]
+"galera_demote_0 galera-bundle-0" -> "galera_stop_0 galera-bundle-0" [ style = bold]
+"galera_demote_0 galera-bundle-0" [ style=bold color="green" fontcolor="orange"]
+"galera_monitor_20000 galera-bundle-0" [ style=dashed color="red" fontcolor="black"]
+"galera_monitor_30000 galera-bundle-0" [ style=dashed color="red" fontcolor="black"]
+"galera_start_0 galera-bundle-0" -> "galera-bundle-master_running_0" [ style = dashed]
+"galera_start_0 galera-bundle-0" -> "galera_monitor_20000 galera-bundle-0" [ style = dashed]
+"galera_start_0 galera-bundle-0" -> "galera_monitor_30000 galera-bundle-0" [ style = dashed]
+"galera_start_0 galera-bundle-0" [ style=dashed color="red" fontcolor="black"]
+"galera_stop_0 galera-bundle-0" -> "all_stopped" [ style = bold]
+"galera_stop_0 galera-bundle-0" -> "galera-bundle-master_stopped_0" [ style = bold]
+"galera_stop_0 galera-bundle-0" -> "galera_start_0 galera-bundle-0" [ style = dashed]
+"galera_stop_0 galera-bundle-0" [ style=bold color="green" fontcolor="orange"]
+"haproxy-bundle-docker-0_stop_0 controller-0" -> "all_stopped" [ style = bold]
+"haproxy-bundle-docker-0_stop_0 controller-0" -> "haproxy-bundle_stopped_0" [ style = bold]
+"haproxy-bundle-docker-0_stop_0 controller-0" [ style=bold color="green" fontcolor="orange"]
+"haproxy-bundle_stop_0" -> "haproxy-bundle-docker-0_stop_0 controller-0" [ style = bold]
+"haproxy-bundle_stop_0" [ style=bold color="green" fontcolor="orange"]
+"haproxy-bundle_stopped_0" -> "ip-10.0.0.109_stop_0 controller-0" [ style = bold]
+"haproxy-bundle_stopped_0" -> "ip-172.17.4.11_stop_0 controller-0" [ style = bold]
+"haproxy-bundle_stopped_0" -> "ip-192.168.24.7_stop_0 controller-0" [ style = bold]
+"haproxy-bundle_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"ip-10.0.0.109_monitor_10000 controller-1" [ style=bold color="green" fontcolor="black"]
+"ip-10.0.0.109_start_0 controller-1" -> "ip-10.0.0.109_monitor_10000 controller-1" [ style = bold]
+"ip-10.0.0.109_start_0 controller-1" [ style=bold color="green" fontcolor="black"]
+"ip-10.0.0.109_stop_0 controller-0" -> "all_stopped" [ style = bold]
+"ip-10.0.0.109_stop_0 controller-0" -> "ip-10.0.0.109_start_0 controller-1" [ style = bold]
+"ip-10.0.0.109_stop_0 controller-0" [ style=bold color="green" fontcolor="orange"]
+"ip-172.17.4.11_monitor_10000 controller-1" [ style=bold color="green" fontcolor="black"]
+"ip-172.17.4.11_start_0 controller-1" -> "ip-172.17.4.11_monitor_10000 controller-1" [ style = bold]
+"ip-172.17.4.11_start_0 controller-1" [ style=bold color="green" fontcolor="black"]
+"ip-172.17.4.11_stop_0 controller-0" -> "all_stopped" [ style = bold]
+"ip-172.17.4.11_stop_0 controller-0" -> "ip-172.17.4.11_start_0 controller-1" [ style = bold]
+"ip-172.17.4.11_stop_0 controller-0" [ style=bold color="green" fontcolor="orange"]
+"ip-192.168.24.7_monitor_10000 controller-2" [ style=bold color="green" fontcolor="black"]
+"ip-192.168.24.7_start_0 controller-2" -> "ip-192.168.24.7_monitor_10000 controller-2" [ style = bold]
+"ip-192.168.24.7_start_0 controller-2" [ style=bold color="green" fontcolor="black"]
+"ip-192.168.24.7_stop_0 controller-0" -> "all_stopped" [ style = bold]
+"ip-192.168.24.7_stop_0 controller-0" -> "ip-192.168.24.7_start_0 controller-2" [ style = bold]
+"ip-192.168.24.7_stop_0 controller-0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-0_monitor_60000 controller-1" [ style=dashed color="red" fontcolor="black"]
+"rabbitmq-bundle-0_start_0 controller-1" -> "rabbitmq-bundle-0_monitor_60000 controller-1" [ style = dashed]
+"rabbitmq-bundle-0_start_0 controller-1" -> "rabbitmq_monitor_10000 rabbitmq-bundle-0" [ style = dashed]
+"rabbitmq-bundle-0_start_0 controller-1" -> "rabbitmq_start_0 rabbitmq-bundle-0" [ style = dashed]
+"rabbitmq-bundle-0_start_0 controller-1" [ style=dashed color="red" fontcolor="black"]
+"rabbitmq-bundle-0_stop_0 controller-0" -> "all_stopped" [ style = bold]
+"rabbitmq-bundle-0_stop_0 controller-0" -> "rabbitmq-bundle-0_start_0 controller-1" [ style = dashed]
+"rabbitmq-bundle-0_stop_0 controller-0" -> "rabbitmq-bundle-docker-0_stop_0 controller-0" [ style = bold]
+"rabbitmq-bundle-0_stop_0 controller-0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" -> "rabbitmq-bundle_running_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" -> "rabbitmq_monitor_10000 rabbitmq-bundle-0" [ style = dashed]
+"rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_confirmed-post_notify_stopped_0" -> "all_stopped" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_stopped_0" -> "rabbitmq-bundle-clone_pre_notify_start_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_stopped_0" -> "rabbitmq-bundle_stopped_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-post_notify_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" -> "rabbitmq-bundle-clone_post_notify_running_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" -> "rabbitmq-bundle-clone_start_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-pre_notify_start_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_confirmed-pre_notify_stop_0" -> "rabbitmq-bundle-clone_post_notify_stopped_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-pre_notify_stop_0" -> "rabbitmq-bundle-clone_stop_0" [ style = bold]
+"rabbitmq-bundle-clone_confirmed-pre_notify_stop_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_post_notify_running_0" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = bold]
+"rabbitmq-bundle-clone_post_notify_running_0" -> "rabbitmq_post_notify_running_0 rabbitmq-bundle-0" [ style = bold]
+"rabbitmq-bundle-clone_post_notify_running_0" -> "rabbitmq_post_notify_running_0 rabbitmq-bundle-1" [ style = bold]
+"rabbitmq-bundle-clone_post_notify_running_0" -> "rabbitmq_post_notify_running_0 rabbitmq-bundle-2" [ style = bold]
+"rabbitmq-bundle-clone_post_notify_running_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_post_notify_stopped_0" -> "rabbitmq-bundle-clone_confirmed-post_notify_stopped_0" [ style = bold]
+"rabbitmq-bundle-clone_post_notify_stopped_0" -> "rabbitmq_post_notify_stonith_0 rabbitmq-bundle-1" [ style = bold]
+"rabbitmq-bundle-clone_post_notify_stopped_0" -> "rabbitmq_post_notify_stonith_0 rabbitmq-bundle-2" [ style = bold]
+"rabbitmq-bundle-clone_post_notify_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_pre_notify_start_0" -> "rabbitmq-bundle-clone_confirmed-pre_notify_start_0" [ style = bold]
+"rabbitmq-bundle-clone_pre_notify_start_0" -> "rabbitmq_pre_notify_start_0 rabbitmq-bundle-1" [ style = bold]
+"rabbitmq-bundle-clone_pre_notify_start_0" -> "rabbitmq_pre_notify_start_0 rabbitmq-bundle-2" [ style = bold]
+"rabbitmq-bundle-clone_pre_notify_start_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_pre_notify_stop_0" -> "rabbitmq-bundle-clone_confirmed-pre_notify_stop_0" [ style = bold]
+"rabbitmq-bundle-clone_pre_notify_stop_0" -> "rabbitmq_pre_notify_stop_0 rabbitmq-bundle-1" [ style = bold]
+"rabbitmq-bundle-clone_pre_notify_stop_0" -> "rabbitmq_pre_notify_stop_0 rabbitmq-bundle-2" [ style = bold]
+"rabbitmq-bundle-clone_pre_notify_stop_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_running_0" -> "rabbitmq-bundle-clone_post_notify_running_0" [ style = bold]
+"rabbitmq-bundle-clone_running_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_start_0" -> "rabbitmq-bundle-clone_running_0" [ style = bold]
+"rabbitmq-bundle-clone_start_0" -> "rabbitmq_start_0 rabbitmq-bundle-0" [ style = dashed]
+"rabbitmq-bundle-clone_start_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_stop_0" -> "rabbitmq-bundle-clone_stopped_0" [ style = bold]
+"rabbitmq-bundle-clone_stop_0" -> "rabbitmq_stop_0 rabbitmq-bundle-0" [ style = bold]
+"rabbitmq-bundle-clone_stop_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-clone_stopped_0" -> "rabbitmq-bundle-clone_post_notify_stopped_0" [ style = bold]
+"rabbitmq-bundle-clone_stopped_0" -> "rabbitmq-bundle-clone_start_0" [ style = bold]
+"rabbitmq-bundle-clone_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-docker-0_stop_0 controller-0" -> "all_stopped" [ style = bold]
+"rabbitmq-bundle-docker-0_stop_0 controller-0" -> "rabbitmq-bundle_stopped_0" [ style = bold]
+"rabbitmq-bundle-docker-0_stop_0 controller-0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle_running_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle_start_0" -> "rabbitmq-bundle-clone_start_0" [ style = bold]
+"rabbitmq-bundle_start_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle_stop_0" -> "rabbitmq-bundle-clone_stop_0" [ style = bold]
+"rabbitmq-bundle_stop_0" -> "rabbitmq-bundle-docker-0_stop_0 controller-0" [ style = bold]
+"rabbitmq-bundle_stop_0" -> "rabbitmq_stop_0 rabbitmq-bundle-0" [ style = bold]
+"rabbitmq-bundle_stop_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq_confirmed-post_notify_stonith_0" -> "all_stopped" [ style = bold]
+"rabbitmq_confirmed-post_notify_stonith_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq_monitor_10000 rabbitmq-bundle-0" [ style=dashed color="red" fontcolor="black"]
+"rabbitmq_post_notify_running_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = bold]
+"rabbitmq_post_notify_running_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
+"rabbitmq_post_notify_running_0 rabbitmq-bundle-1" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = bold]
+"rabbitmq_post_notify_running_0 rabbitmq-bundle-1" [ style=bold color="green" fontcolor="black"]
+"rabbitmq_post_notify_running_0 rabbitmq-bundle-2" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = bold]
+"rabbitmq_post_notify_running_0 rabbitmq-bundle-2" [ style=bold color="green" fontcolor="black"]
+"rabbitmq_post_notify_stonith_0 rabbitmq-bundle-1" -> "rabbitmq-bundle-clone_confirmed-post_notify_stopped_0" [ style = bold]
+"rabbitmq_post_notify_stonith_0 rabbitmq-bundle-1" -> "rabbitmq_confirmed-post_notify_stonith_0" [ style = bold]
+"rabbitmq_post_notify_stonith_0 rabbitmq-bundle-1" [ style=bold color="green" fontcolor="black"]
+"rabbitmq_post_notify_stonith_0 rabbitmq-bundle-2" -> "rabbitmq-bundle-clone_confirmed-post_notify_stopped_0" [ style = bold]
+"rabbitmq_post_notify_stonith_0 rabbitmq-bundle-2" -> "rabbitmq_confirmed-post_notify_stonith_0" [ style = bold]
+"rabbitmq_post_notify_stonith_0 rabbitmq-bundle-2" [ style=bold color="green" fontcolor="black"]
+"rabbitmq_post_notify_stonith_0" -> "rabbitmq_confirmed-post_notify_stonith_0" [ style = bold]
+"rabbitmq_post_notify_stonith_0" -> "rabbitmq_post_notify_stonith_0 rabbitmq-bundle-1" [ style = bold]
+"rabbitmq_post_notify_stonith_0" -> "rabbitmq_post_notify_stonith_0 rabbitmq-bundle-2" [ style = bold]
+"rabbitmq_post_notify_stonith_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq_pre_notify_start_0 rabbitmq-bundle-1" -> "rabbitmq-bundle-clone_confirmed-pre_notify_start_0" [ style = bold]
+"rabbitmq_pre_notify_start_0 rabbitmq-bundle-1" [ style=bold color="green" fontcolor="black"]
+"rabbitmq_pre_notify_start_0 rabbitmq-bundle-2" -> "rabbitmq-bundle-clone_confirmed-pre_notify_start_0" [ style = bold]
+"rabbitmq_pre_notify_start_0 rabbitmq-bundle-2" [ style=bold color="green" fontcolor="black"]
+"rabbitmq_pre_notify_stop_0 rabbitmq-bundle-1" -> "rabbitmq-bundle-clone_confirmed-pre_notify_stop_0" [ style = bold]
+"rabbitmq_pre_notify_stop_0 rabbitmq-bundle-1" [ style=bold color="green" fontcolor="black"]
+"rabbitmq_pre_notify_stop_0 rabbitmq-bundle-2" -> "rabbitmq-bundle-clone_confirmed-pre_notify_stop_0" [ style = bold]
+"rabbitmq_pre_notify_stop_0 rabbitmq-bundle-2" [ style=bold color="green" fontcolor="black"]
+"rabbitmq_start_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_running_0" [ style = dashed]
+"rabbitmq_start_0 rabbitmq-bundle-0" -> "rabbitmq_monitor_10000 rabbitmq-bundle-0" [ style = dashed]
+"rabbitmq_start_0 rabbitmq-bundle-0" [ style=dashed color="red" fontcolor="black"]
+"rabbitmq_stop_0 rabbitmq-bundle-0" -> "all_stopped" [ style = bold]
+"rabbitmq_stop_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_stopped_0" [ style = bold]
+"rabbitmq_stop_0 rabbitmq-bundle-0" -> "rabbitmq_start_0 rabbitmq-bundle-0" [ style = dashed]
+"rabbitmq_stop_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-0_monitor_60000 controller-1" [ style=dashed color="red" fontcolor="black"]
+"redis-bundle-0_start_0 controller-1" -> "redis-bundle-0_monitor_60000 controller-1" [ style = dashed]
+"redis-bundle-0_start_0 controller-1" -> "redis_monitor_45000 redis-bundle-0" [ style = dashed]
+"redis-bundle-0_start_0 controller-1" -> "redis_monitor_60000 redis-bundle-0" [ style = dashed]
+"redis-bundle-0_start_0 controller-1" -> "redis_start_0 redis-bundle-0" [ style = dashed]
+"redis-bundle-0_start_0 controller-1" [ style=dashed color="red" fontcolor="black"]
+"redis-bundle-0_stop_0 controller-0" -> "all_stopped" [ style = bold]
+"redis-bundle-0_stop_0 controller-0" -> "redis-bundle-0_start_0 controller-1" [ style = dashed]
+"redis-bundle-0_stop_0 controller-0" -> "redis-bundle-docker-0_stop_0 controller-0" [ style = bold]
+"redis-bundle-0_stop_0 controller-0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-docker-0_stop_0 controller-0" -> "all_stopped" [ style = bold]
+"redis-bundle-docker-0_stop_0 controller-0" -> "redis-bundle_stopped_0" [ style = bold]
+"redis-bundle-docker-0_stop_0 controller-0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-post_notify_demoted_0" -> "redis-bundle-master_pre_notify_promote_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_demoted_0" -> "redis-bundle-master_pre_notify_start_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_demoted_0" -> "redis-bundle-master_pre_notify_stop_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_demoted_0" -> "redis-bundle_demoted_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_demoted_0" -> "redis_monitor_20000 redis-bundle-1" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_demoted_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-post_notify_promoted_0" -> "redis-bundle_promoted_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_promoted_0" -> "redis_monitor_20000 redis-bundle-1" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_promoted_0" -> "redis_monitor_45000 redis-bundle-0" [ style = dashed]
+"redis-bundle-master_confirmed-post_notify_promoted_0" -> "redis_monitor_60000 redis-bundle-0" [ style = dashed]
+"redis-bundle-master_confirmed-post_notify_promoted_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis-bundle-master_pre_notify_promote_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis-bundle_running_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis_monitor_20000 redis-bundle-1" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis_monitor_45000 redis-bundle-0" [ style = dashed]
+"redis-bundle-master_confirmed-post_notify_running_0" -> "redis_monitor_60000 redis-bundle-0" [ style = dashed]
+"redis-bundle-master_confirmed-post_notify_running_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-post_notify_stopped_0" -> "all_stopped" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_stopped_0" -> "redis-bundle-master_pre_notify_promote_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_stopped_0" -> "redis-bundle-master_pre_notify_start_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_stopped_0" -> "redis-bundle_stopped_0" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_stopped_0" -> "redis_monitor_20000 redis-bundle-1" [ style = bold]
+"redis-bundle-master_confirmed-post_notify_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-pre_notify_demote_0" -> "redis-bundle-master_demote_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_demote_0" -> "redis-bundle-master_post_notify_demoted_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_demote_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-pre_notify_promote_0" -> "redis-bundle-master_post_notify_promoted_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_promote_0" -> "redis-bundle-master_promote_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_promote_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-pre_notify_start_0" -> "redis-bundle-master_post_notify_running_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_start_0" -> "redis-bundle-master_start_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_start_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_confirmed-pre_notify_stop_0" -> "redis-bundle-master_post_notify_stopped_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_stop_0" -> "redis-bundle-master_stop_0" [ style = bold]
+"redis-bundle-master_confirmed-pre_notify_stop_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_demote_0" -> "redis-bundle-master_demoted_0" [ style = bold]
+"redis-bundle-master_demote_0" -> "redis_demote_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_demote_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_demoted_0" -> "redis-bundle-master_post_notify_demoted_0" [ style = bold]
+"redis-bundle-master_demoted_0" -> "redis-bundle-master_promote_0" [ style = bold]
+"redis-bundle-master_demoted_0" -> "redis-bundle-master_start_0" [ style = bold]
+"redis-bundle-master_demoted_0" -> "redis-bundle-master_stop_0" [ style = bold]
+"redis-bundle-master_demoted_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_post_notify_demoted_0" -> "redis-bundle-master_confirmed-post_notify_demoted_0" [ style = bold]
+"redis-bundle-master_post_notify_demoted_0" -> "redis_post_notify_demoted_0 redis-bundle-1" [ style = bold]
+"redis-bundle-master_post_notify_demoted_0" -> "redis_post_notify_demoted_0 redis-bundle-2" [ style = bold]
+"redis-bundle-master_post_notify_demoted_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_post_notify_promoted_0" -> "redis-bundle-master_confirmed-post_notify_promoted_0" [ style = bold]
+"redis-bundle-master_post_notify_promoted_0" -> "redis_post_notify_promoted_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_post_notify_promoted_0" -> "redis_post_notify_promoted_0 redis-bundle-1" [ style = bold]
+"redis-bundle-master_post_notify_promoted_0" -> "redis_post_notify_promoted_0 redis-bundle-2" [ style = bold]
+"redis-bundle-master_post_notify_promoted_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_post_notify_running_0" -> "redis-bundle-master_confirmed-post_notify_running_0" [ style = bold]
+"redis-bundle-master_post_notify_running_0" -> "redis_post_notify_running_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_post_notify_running_0" -> "redis_post_notify_running_0 redis-bundle-1" [ style = bold]
+"redis-bundle-master_post_notify_running_0" -> "redis_post_notify_running_0 redis-bundle-2" [ style = bold]
+"redis-bundle-master_post_notify_running_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_post_notify_stopped_0" -> "redis-bundle-master_confirmed-post_notify_stopped_0" [ style = bold]
+"redis-bundle-master_post_notify_stopped_0" -> "redis_post_notify_stonith_0 redis-bundle-1" [ style = bold]
+"redis-bundle-master_post_notify_stopped_0" -> "redis_post_notify_stonith_0 redis-bundle-2" [ style = bold]
+"redis-bundle-master_post_notify_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_pre_notify_demote_0" -> "redis-bundle-master_confirmed-pre_notify_demote_0" [ style = bold]
+"redis-bundle-master_pre_notify_demote_0" -> "redis_pre_notify_demote_0 redis-bundle-1" [ style = bold]
+"redis-bundle-master_pre_notify_demote_0" -> "redis_pre_notify_demote_0 redis-bundle-2" [ style = bold]
+"redis-bundle-master_pre_notify_demote_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_pre_notify_promote_0" -> "redis-bundle-master_confirmed-pre_notify_promote_0" [ style = bold]
+"redis-bundle-master_pre_notify_promote_0" -> "redis_pre_notify_promote_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_pre_notify_promote_0" -> "redis_pre_notify_promote_0 redis-bundle-1" [ style = bold]
+"redis-bundle-master_pre_notify_promote_0" -> "redis_pre_notify_promote_0 redis-bundle-2" [ style = bold]
+"redis-bundle-master_pre_notify_promote_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_pre_notify_start_0" -> "redis-bundle-master_confirmed-pre_notify_start_0" [ style = bold]
+"redis-bundle-master_pre_notify_start_0" -> "redis_pre_notify_start_0 redis-bundle-1" [ style = bold]
+"redis-bundle-master_pre_notify_start_0" -> "redis_pre_notify_start_0 redis-bundle-2" [ style = bold]
+"redis-bundle-master_pre_notify_start_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_pre_notify_stop_0" -> "redis-bundle-master_confirmed-pre_notify_stop_0" [ style = bold]
+"redis-bundle-master_pre_notify_stop_0" -> "redis_pre_notify_stop_0 redis-bundle-1" [ style = bold]
+"redis-bundle-master_pre_notify_stop_0" -> "redis_pre_notify_stop_0 redis-bundle-2" [ style = bold]
+"redis-bundle-master_pre_notify_stop_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_promote_0" -> "redis_promote_0 redis-bundle-1" [ style = bold]
+"redis-bundle-master_promote_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_promoted_0" -> "redis-bundle-master_post_notify_promoted_0" [ style = bold]
+"redis-bundle-master_promoted_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_running_0" -> "redis-bundle-master_post_notify_running_0" [ style = bold]
+"redis-bundle-master_running_0" -> "redis-bundle-master_promote_0" [ style = bold]
+"redis-bundle-master_running_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_start_0" -> "redis-bundle-master_running_0" [ style = bold]
+"redis-bundle-master_start_0" -> "redis_start_0 redis-bundle-0" [ style = dashed]
+"redis-bundle-master_start_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_stop_0" -> "redis-bundle-master_stopped_0" [ style = bold]
+"redis-bundle-master_stop_0" -> "redis_stop_0 redis-bundle-0" [ style = bold]
+"redis-bundle-master_stop_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-master_stopped_0" -> "redis-bundle-master_post_notify_stopped_0" [ style = bold]
+"redis-bundle-master_stopped_0" -> "redis-bundle-master_promote_0" [ style = bold]
+"redis-bundle-master_stopped_0" -> "redis-bundle-master_start_0" [ style = bold]
+"redis-bundle-master_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle_demote_0" -> "redis-bundle-master_demote_0" [ style = bold]
+"redis-bundle_demote_0" -> "redis-bundle_demoted_0" [ style = bold]
+"redis-bundle_demote_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle_demoted_0" -> "redis-bundle_promote_0" [ style = bold]
+"redis-bundle_demoted_0" -> "redis-bundle_start_0" [ style = bold]
+"redis-bundle_demoted_0" -> "redis-bundle_stop_0" [ style = bold]
+"redis-bundle_demoted_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle_promote_0" -> "redis-bundle-master_promote_0" [ style = bold]
+"redis-bundle_promote_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle_promoted_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle_running_0" -> "redis-bundle_promote_0" [ style = bold]
+"redis-bundle_running_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle_start_0" -> "redis-bundle-master_start_0" [ style = bold]
+"redis-bundle_start_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle_stop_0" -> "redis-bundle-docker-0_stop_0 controller-0" [ style = bold]
+"redis-bundle_stop_0" -> "redis-bundle-master_stop_0" [ style = bold]
+"redis-bundle_stop_0" -> "redis_stop_0 redis-bundle-0" [ style = bold]
+"redis-bundle_stop_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle_stopped_0" -> "redis-bundle_promote_0" [ style = bold]
+"redis-bundle_stopped_0" -> "redis-bundle_start_0" [ style = bold]
+"redis-bundle_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"redis_confirmed-post_notify_stonith_0" -> "all_stopped" [ style = bold]
+"redis_confirmed-post_notify_stonith_0" -> "redis_monitor_20000 redis-bundle-1" [ style = bold]
+"redis_confirmed-post_notify_stonith_0" [ style=bold color="green" fontcolor="orange"]
+"redis_demote_0 redis-bundle-0" -> "redis-bundle-master_demoted_0" [ style = bold]
+"redis_demote_0 redis-bundle-0" -> "redis_monitor_45000 redis-bundle-0" [ style = dashed]
+"redis_demote_0 redis-bundle-0" -> "redis_monitor_60000 redis-bundle-0" [ style = dashed]
+"redis_demote_0 redis-bundle-0" -> "redis_stop_0 redis-bundle-0" [ style = bold]
+"redis_demote_0 redis-bundle-0" [ style=bold color="green" fontcolor="orange"]
+"redis_monitor_20000 redis-bundle-1" [ style=bold color="green" fontcolor="black"]
+"redis_monitor_45000 redis-bundle-0" [ style=dashed color="red" fontcolor="black"]
+"redis_monitor_60000 redis-bundle-0" [ style=dashed color="red" fontcolor="black"]
+"redis_post_notify_demoted_0 redis-bundle-1" -> "redis-bundle-master_confirmed-post_notify_demoted_0" [ style = bold]
+"redis_post_notify_demoted_0 redis-bundle-1" [ style=bold color="green" fontcolor="black"]
+"redis_post_notify_demoted_0 redis-bundle-2" -> "redis-bundle-master_confirmed-post_notify_demoted_0" [ style = bold]
+"redis_post_notify_demoted_0 redis-bundle-2" [ style=bold color="green" fontcolor="black"]
+"redis_post_notify_promoted_0 redis-bundle-0" -> "redis-bundle-master_confirmed-post_notify_promoted_0" [ style = bold]
+"redis_post_notify_promoted_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis_post_notify_promoted_0 redis-bundle-1" -> "redis-bundle-master_confirmed-post_notify_promoted_0" [ style = bold]
+"redis_post_notify_promoted_0 redis-bundle-1" [ style=bold color="green" fontcolor="black"]
+"redis_post_notify_promoted_0 redis-bundle-2" -> "redis-bundle-master_confirmed-post_notify_promoted_0" [ style = bold]
+"redis_post_notify_promoted_0 redis-bundle-2" [ style=bold color="green" fontcolor="black"]
+"redis_post_notify_running_0 redis-bundle-0" -> "redis-bundle-master_confirmed-post_notify_running_0" [ style = bold]
+"redis_post_notify_running_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis_post_notify_running_0 redis-bundle-1" -> "redis-bundle-master_confirmed-post_notify_running_0" [ style = bold]
+"redis_post_notify_running_0 redis-bundle-1" [ style=bold color="green" fontcolor="black"]
+"redis_post_notify_running_0 redis-bundle-2" -> "redis-bundle-master_confirmed-post_notify_running_0" [ style = bold]
+"redis_post_notify_running_0 redis-bundle-2" [ style=bold color="green" fontcolor="black"]
+"redis_post_notify_stonith_0 redis-bundle-1" -> "redis-bundle-master_confirmed-post_notify_stopped_0" [ style = bold]
+"redis_post_notify_stonith_0 redis-bundle-1" -> "redis_confirmed-post_notify_stonith_0" [ style = bold]
+"redis_post_notify_stonith_0 redis-bundle-1" [ style=bold color="green" fontcolor="black"]
+"redis_post_notify_stonith_0 redis-bundle-2" -> "redis-bundle-master_confirmed-post_notify_stopped_0" [ style = bold]
+"redis_post_notify_stonith_0 redis-bundle-2" -> "redis_confirmed-post_notify_stonith_0" [ style = bold]
+"redis_post_notify_stonith_0 redis-bundle-2" [ style=bold color="green" fontcolor="black"]
+"redis_post_notify_stonith_0" -> "redis_confirmed-post_notify_stonith_0" [ style = bold]
+"redis_post_notify_stonith_0" -> "redis_post_notify_stonith_0 redis-bundle-1" [ style = bold]
+"redis_post_notify_stonith_0" -> "redis_post_notify_stonith_0 redis-bundle-2" [ style = bold]
+"redis_post_notify_stonith_0" [ style=bold color="green" fontcolor="orange"]
+"redis_pre_notify_demote_0 redis-bundle-1" -> "redis-bundle-master_confirmed-pre_notify_demote_0" [ style = bold]
+"redis_pre_notify_demote_0 redis-bundle-1" [ style=bold color="green" fontcolor="black"]
+"redis_pre_notify_demote_0 redis-bundle-2" -> "redis-bundle-master_confirmed-pre_notify_demote_0" [ style = bold]
+"redis_pre_notify_demote_0 redis-bundle-2" [ style=bold color="green" fontcolor="black"]
+"redis_pre_notify_promote_0 redis-bundle-0" -> "redis-bundle-master_confirmed-pre_notify_promote_0" [ style = bold]
+"redis_pre_notify_promote_0 redis-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis_pre_notify_promote_0 redis-bundle-1" -> "redis-bundle-master_confirmed-pre_notify_promote_0" [ style = bold]
+"redis_pre_notify_promote_0 redis-bundle-1" [ style=bold color="green" fontcolor="black"]
+"redis_pre_notify_promote_0 redis-bundle-2" -> "redis-bundle-master_confirmed-pre_notify_promote_0" [ style = bold]
+"redis_pre_notify_promote_0 redis-bundle-2" [ style=bold color="green" fontcolor="black"]
+"redis_pre_notify_start_0 redis-bundle-1" -> "redis-bundle-master_confirmed-pre_notify_start_0" [ style = bold]
+"redis_pre_notify_start_0 redis-bundle-1" [ style=bold color="green" fontcolor="black"]
+"redis_pre_notify_start_0 redis-bundle-2" -> "redis-bundle-master_confirmed-pre_notify_start_0" [ style = bold]
+"redis_pre_notify_start_0 redis-bundle-2" [ style=bold color="green" fontcolor="black"]
+"redis_pre_notify_stop_0 redis-bundle-1" -> "redis-bundle-master_confirmed-pre_notify_stop_0" [ style = bold]
+"redis_pre_notify_stop_0 redis-bundle-1" [ style=bold color="green" fontcolor="black"]
+"redis_pre_notify_stop_0 redis-bundle-2" -> "redis-bundle-master_confirmed-pre_notify_stop_0" [ style = bold]
+"redis_pre_notify_stop_0 redis-bundle-2" [ style=bold color="green" fontcolor="black"]
+"redis_promote_0 redis-bundle-1" -> "redis-bundle-master_promoted_0" [ style = bold]
+"redis_promote_0 redis-bundle-1" -> "redis_monitor_20000 redis-bundle-1" [ style = bold]
+"redis_promote_0 redis-bundle-1" [ style=bold color="green" fontcolor="black"]
+"redis_start_0 redis-bundle-0" -> "redis-bundle-master_running_0" [ style = dashed]
+"redis_start_0 redis-bundle-0" -> "redis_monitor_45000 redis-bundle-0" [ style = dashed]
+"redis_start_0 redis-bundle-0" -> "redis_monitor_60000 redis-bundle-0" [ style = dashed]
+"redis_start_0 redis-bundle-0" [ style=dashed color="red" fontcolor="black"]
+"redis_stop_0 redis-bundle-0" -> "all_stopped" [ style = bold]
+"redis_stop_0 redis-bundle-0" -> "redis-bundle-master_stopped_0" [ style = bold]
+"redis_stop_0 redis-bundle-0" -> "redis_start_0 redis-bundle-0" [ style = dashed]
+"redis_stop_0 redis-bundle-0" [ style=bold color="green" fontcolor="orange"]
+"stonith 'off' galera-bundle-0" -> "galera-bundle-master_stop_0" [ style = bold]
+"stonith 'off' galera-bundle-0" -> "galera_demote_0 galera-bundle-0" [ style = bold]
+"stonith 'off' galera-bundle-0" -> "galera_stop_0 galera-bundle-0" [ style = bold]
+"stonith 'off' galera-bundle-0" -> "stonith_complete" [ style = bold]
+"stonith 'off' galera-bundle-0" [ style=bold color="green" fontcolor="orange"]
+"stonith 'off' rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_stop_0" [ style = bold]
+"stonith 'off' rabbitmq-bundle-0" -> "rabbitmq_post_notify_stonith_0" [ style = bold]
+"stonith 'off' rabbitmq-bundle-0" -> "rabbitmq_stop_0 rabbitmq-bundle-0" [ style = bold]
+"stonith 'off' rabbitmq-bundle-0" -> "stonith_complete" [ style = bold]
+"stonith 'off' rabbitmq-bundle-0" [ style=bold color="green" fontcolor="orange"]
+"stonith 'off' redis-bundle-0" -> "redis-bundle-master_stop_0" [ style = bold]
+"stonith 'off' redis-bundle-0" -> "redis_demote_0 redis-bundle-0" [ style = bold]
+"stonith 'off' redis-bundle-0" -> "redis_post_notify_stonith_0" [ style = bold]
+"stonith 'off' redis-bundle-0" -> "redis_stop_0 redis-bundle-0" [ style = bold]
+"stonith 'off' redis-bundle-0" -> "stonith_complete" [ style = bold]
+"stonith 'off' redis-bundle-0" [ style=bold color="green" fontcolor="orange"]
+"stonith 'reboot' controller-0" -> "galera-bundle-0_stop_0 controller-0" [ style = bold]
+"stonith 'reboot' controller-0" -> "galera-bundle-docker-0_stop_0 controller-0" [ style = bold]
+"stonith 'reboot' controller-0" -> "haproxy-bundle-docker-0_stop_0 controller-0" [ style = bold]
+"stonith 'reboot' controller-0" -> "ip-10.0.0.109_stop_0 controller-0" [ style = bold]
+"stonith 'reboot' controller-0" -> "ip-172.17.4.11_stop_0 controller-0" [ style = bold]
+"stonith 'reboot' controller-0" -> "ip-192.168.24.7_stop_0 controller-0" [ style = bold]
+"stonith 'reboot' controller-0" -> "rabbitmq-bundle-0_stop_0 controller-0" [ style = bold]
+"stonith 'reboot' controller-0" -> "rabbitmq-bundle-docker-0_stop_0 controller-0" [ style = bold]
+"stonith 'reboot' controller-0" -> "redis-bundle-0_stop_0 controller-0" [ style = bold]
+"stonith 'reboot' controller-0" -> "redis-bundle-docker-0_stop_0 controller-0" [ style = bold]
+"stonith 'reboot' controller-0" -> "stonith 'off' galera-bundle-0" [ style = bold]
+"stonith 'reboot' controller-0" -> "stonith 'off' rabbitmq-bundle-0" [ style = bold]
+"stonith 'reboot' controller-0" -> "stonith 'off' redis-bundle-0" [ style = bold]
+"stonith 'reboot' controller-0" -> "stonith_complete" [ style = bold]
+"stonith 'reboot' controller-0" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-5254000dcb3f_monitor_60000 controller-2" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-5254000dcb3f_start_0 controller-2" -> "stonith-fence_ipmilan-5254000dcb3f_monitor_60000 controller-2" [ style = bold]
+"stonith-fence_ipmilan-5254000dcb3f_start_0 controller-2" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-5254000dcb3f_stop_0 controller-0" -> "all_stopped" [ style = bold]
+"stonith-fence_ipmilan-5254000dcb3f_stop_0 controller-0" -> "stonith-fence_ipmilan-5254000dcb3f_start_0 controller-2" [ style = bold]
+"stonith-fence_ipmilan-5254000dcb3f_stop_0 controller-0" [ style=bold color="green" fontcolor="orange"]
+"stonith-fence_ipmilan-5254003e8e97_monitor_60000 controller-1" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-5254003e8e97_start_0 controller-1" -> "stonith-fence_ipmilan-5254003e8e97_monitor_60000 controller-1" [ style = bold]
+"stonith-fence_ipmilan-5254003e8e97_start_0 controller-1" [ style=bold color="green" fontcolor="black"]
+"stonith-fence_ipmilan-5254003e8e97_stop_0 controller-0" -> "all_stopped" [ style = bold]
+"stonith-fence_ipmilan-5254003e8e97_stop_0 controller-0" -> "stonith-fence_ipmilan-5254003e8e97_start_0 controller-1" [ style = bold]
+"stonith-fence_ipmilan-5254003e8e97_stop_0 controller-0" [ style=bold color="green" fontcolor="orange"]
+"stonith_complete" -> "all_stopped" [ style = bold]
+"stonith_complete" -> "galera-bundle-0_start_0 controller-2" [ style = dashed]
+"stonith_complete" -> "galera_start_0 galera-bundle-0" [ style = dashed]
+"stonith_complete" -> "ip-10.0.0.109_start_0 controller-1" [ style = bold]
+"stonith_complete" -> "ip-172.17.4.11_start_0 controller-1" [ style = bold]
+"stonith_complete" -> "ip-192.168.24.7_start_0 controller-2" [ style = bold]
+"stonith_complete" -> "rabbitmq-bundle-0_start_0 controller-1" [ style = dashed]
+"stonith_complete" -> "rabbitmq_start_0 rabbitmq-bundle-0" [ style = dashed]
+"stonith_complete" -> "redis-bundle-0_start_0 controller-1" [ style = dashed]
+"stonith_complete" -> "redis_promote_0 redis-bundle-1" [ style = bold]
+"stonith_complete" -> "redis_start_0 redis-bundle-0" [ style = dashed]
+"stonith_complete" [ style=bold color="green" fontcolor="orange"]
+}
diff --git a/pengine/test10/bundle-order-fencing.exp b/pengine/test10/bundle-order-fencing.exp
new file mode 100644
index 0000000..d072d85
--- /dev/null
+++ b/pengine/test10/bundle-order-fencing.exp
@@ -0,0 +1,1982 @@
+<transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
+  <synapse id="0" priority="1000000">
+    <action_set>
+      <rsc_op id="214" operation="notify" operation_key="rabbitmq_post_notify_start_0" internal_operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="controller-1">
+        <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="57" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="1" priority="1000000">
+    <action_set>
+      <pseudo_event id="199" operation="notified" operation_key="rabbitmq_notified_0" internal_operation_key="rabbitmq:0_confirmed-post_notify_stonith_0">
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="198" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stonith_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="200" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:1_post_notify_stop_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="201" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stop_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="2" priority="1000000">
+    <action_set>
+      <pseudo_event id="198" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stonith_0">
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="197" operation="stonith" operation_key="stonith-rabbitmq-bundle-0-off" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="3">
+    <action_set>
+      <pseudo_event id="50" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:0_stop_0">
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_physical_host="controller-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="44" operation="stop" operation_key="rabbitmq-bundle_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="59" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="197" operation="stonith" operation_key="stonith-rabbitmq-bundle-0-off" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="4">
+    <action_set>
+      <rsc_op id="219" operation="notify" operation_key="rabbitmq_pre_notify_stop_0" internal_operation_key="rabbitmq:1_pre_notify_stop_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1">
+        <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="61" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="5" priority="1000000">
+    <action_set>
+      <rsc_op id="216" operation="notify" operation_key="rabbitmq_post_notify_start_0" internal_operation_key="rabbitmq:1_post_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1">
+        <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="57" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="6">
+    <action_set>
+      <rsc_op id="215" operation="notify" operation_key="rabbitmq_pre_notify_start_0" internal_operation_key="rabbitmq:1_pre_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1">
+        <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="55" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="7" priority="1000000">
+    <action_set>
+      <rsc_op id="200" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:1_post_notify_stop_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1">
+        <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="63" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="198" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stonith_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="8">
+    <action_set>
+      <rsc_op id="220" operation="notify" operation_key="rabbitmq_pre_notify_stop_0" internal_operation_key="rabbitmq:2_pre_notify_stop_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2">
+        <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="61" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="9" priority="1000000">
+    <action_set>
+      <rsc_op id="218" operation="notify" operation_key="rabbitmq_post_notify_start_0" internal_operation_key="rabbitmq:2_post_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2">
+        <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="57" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="10">
+    <action_set>
+      <rsc_op id="217" operation="notify" operation_key="rabbitmq_pre_notify_start_0" internal_operation_key="rabbitmq:2_pre_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2">
+        <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="55" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="11" priority="1000000">
+    <action_set>
+      <rsc_op id="201" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stop_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2">
+        <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="63" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="198" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stonith_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="12" priority="1000000">
+    <action_set>
+      <pseudo_event id="64" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_stopped_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="63" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="200" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:1_post_notify_stop_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="201" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stop_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="13" priority="1000000">
+    <action_set>
+      <pseudo_event id="63" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_stopped_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="60" operation="stopped" operation_key="rabbitmq-bundle-clone_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="62" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="14">
+    <action_set>
+      <pseudo_event id="62" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_stop_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="61" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_stop_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="219" operation="notify" operation_key="rabbitmq_pre_notify_stop_0" internal_operation_key="rabbitmq:1_pre_notify_stop_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="220" operation="notify" operation_key="rabbitmq_pre_notify_stop_0" internal_operation_key="rabbitmq:2_pre_notify_stop_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="15">
+    <action_set>
+      <pseudo_event id="61" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_stop_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="16" priority="1000000">
+    <action_set>
+      <pseudo_event id="60" operation="stopped" operation_key="rabbitmq-bundle-clone_stopped_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="50" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="59" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="17">
+    <action_set>
+      <pseudo_event id="59" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="44" operation="stop" operation_key="rabbitmq-bundle_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="62" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="197" operation="stonith" operation_key="stonith-rabbitmq-bundle-0-off" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="18" priority="1000000">
+    <action_set>
+      <pseudo_event id="58" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="57" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="214" operation="notify" operation_key="rabbitmq_post_notify_start_0" internal_operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="216" operation="notify" operation_key="rabbitmq_post_notify_start_0" internal_operation_key="rabbitmq:1_post_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="218" operation="notify" operation_key="rabbitmq_post_notify_start_0" internal_operation_key="rabbitmq:2_post_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="19" priority="1000000">
+    <action_set>
+      <pseudo_event id="57" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="54" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="56" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="20">
+    <action_set>
+      <pseudo_event id="56" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="55" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="215" operation="notify" operation_key="rabbitmq_pre_notify_start_0" internal_operation_key="rabbitmq:1_pre_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="217" operation="notify" operation_key="rabbitmq_pre_notify_start_0" internal_operation_key="rabbitmq:2_pre_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="21">
+    <action_set>
+      <pseudo_event id="55" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="64" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_stopped_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="22" priority="1000000">
+    <action_set>
+      <pseudo_event id="54" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="53" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="23">
+    <action_set>
+      <pseudo_event id="53" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="42" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="56" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="60" operation="stopped" operation_key="rabbitmq-bundle-clone_stopped_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="24">
+    <action_set>
+      <pseudo_event id="30" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0">
+        <attributes CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/rhosp12/openstack-rabbitmq-docker:pcmklatest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3122 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-0:/var/log -p 3122:3122 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="31" operation="stop" operation_key="rabbitmq-bundle-0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="44" operation="stop" operation_key="rabbitmq-bundle_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="25">
+    <action_set>
+      <pseudo_event id="31" operation="stop" operation_key="rabbitmq-bundle-0_stop_0">
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_timeout="20000" addr="#uname"  port="3122"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="26">
+    <action_set>
+      <pseudo_event id="90" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0">
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_physical_host="controller-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="controller-0:controller-0.internalapi.localdomain;controller-1:controller-1.internalapi.localdomain;controller-2:controller-2.internalapi.localdomain"  enable_creation="true" wsrep_cluster_address="gcomm://controller-0.internalapi.localdomain,controller-1.internalapi.localdomain,controller-2.internalapi.localdomain"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="79" operation="stop" operation_key="galera-bundle_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="89" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="96" operation="stop" operation_key="galera-bundle-master_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="196" operation="stonith" operation_key="stonith-galera-bundle-0-off" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="27">
+    <action_set>
+      <pseudo_event id="89" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0">
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="false" CRM_meta_physical_host="controller-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="controller-0:controller-0.internalapi.localdomain;controller-1:controller-1.internalapi.localdomain;controller-2:controller-2.internalapi.localdomain"  enable_creation="true" wsrep_cluster_address="gcomm://controller-0.internalapi.localdomain,controller-1.internalapi.localdomain,controller-2.internalapi.localdomain"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="100" operation="demote" operation_key="galera-bundle-master_demote_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="196" operation="stonith" operation_key="stonith-galera-bundle-0-off" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="28" priority="1000000">
+    <action_set>
+      <pseudo_event id="101" operation="demoted" operation_key="galera-bundle-master_demoted_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="89" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="100" operation="demote" operation_key="galera-bundle-master_demote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="29">
+    <action_set>
+      <pseudo_event id="100" operation="demote" operation_key="galera-bundle-master_demote_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="104" operation="demote" operation_key="galera-bundle_demote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="30" priority="1000000">
+    <action_set>
+      <pseudo_event id="97" operation="stopped" operation_key="galera-bundle-master_stopped_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="90" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="96" operation="stop" operation_key="galera-bundle-master_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="31">
+    <action_set>
+      <pseudo_event id="96" operation="stop" operation_key="galera-bundle-master_stop_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="79" operation="stop" operation_key="galera-bundle_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="101" operation="demoted" operation_key="galera-bundle-master_demoted_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="196" operation="stonith" operation_key="stonith-galera-bundle-0-off" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="32" priority="1000000">
+    <action_set>
+      <pseudo_event id="95" operation="running" operation_key="galera-bundle-master_running_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="94" operation="start" operation_key="galera-bundle-master_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="33">
+    <action_set>
+      <pseudo_event id="94" operation="start" operation_key="galera-bundle-master_start_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="77" operation="start" operation_key="galera-bundle_start_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="97" operation="stopped" operation_key="galera-bundle-master_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="101" operation="demoted" operation_key="galera-bundle-master_demoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="34">
+    <action_set>
+      <pseudo_event id="65" operation="stop" operation_key="galera-bundle-docker-0_stop_0">
+        <attributes CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/rhosp12/openstack-mariadb-docker:pcmklatest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/mysql/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="66" operation="stop" operation_key="galera-bundle-0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="79" operation="stop" operation_key="galera-bundle_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="35">
+    <action_set>
+      <pseudo_event id="66" operation="stop" operation_key="galera-bundle-0_stop_0">
+        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_timeout="20000" addr="#uname"  port="3123"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="36" priority="1000000">
+    <action_set>
+      <rsc_op id="229" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="controller-1">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="149" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="37">
+    <action_set>
+      <rsc_op id="228" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="controller-1">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="147" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="38" priority="1000000">
+    <action_set>
+      <rsc_op id="221" operation="notify" operation_key="redis_post_notify_start_0" internal_operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="controller-1">
+        <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="137" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="39" priority="1000000">
+    <action_set>
+      <pseudo_event id="204" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0">
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="203" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="205" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="206" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="40" priority="1000000">
+    <action_set>
+      <pseudo_event id="203" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0">
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="202" operation="stonith" operation_key="stonith-redis-bundle-0-off" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="41">
+    <action_set>
+      <pseudo_event id="129" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0">
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_physical_host="controller-0" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="120" operation="stop" operation_key="redis-bundle_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="128" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="139" operation="stop" operation_key="redis-bundle-master_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="202" operation="stonith" operation_key="stonith-redis-bundle-0-off" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="42">
+    <action_set>
+      <pseudo_event id="128" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0">
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_physical_host="controller-0" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="151" operation="demote" operation_key="redis-bundle-master_demote_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="202" operation="stonith" operation_key="stonith-redis-bundle-0-off" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="43" priority="1000000">
+    <action_set>
+      <rsc_op id="235" operation="notify" operation_key="redis_post_notify_demote_0" internal_operation_key="redis:1_post_notify_demote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="155" operation="notify" operation_key="redis-bundle-master_post_notify_demoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="44">
+    <action_set>
+      <rsc_op id="234" operation="notify" operation_key="redis_pre_notify_demote_0" internal_operation_key="redis:1_pre_notify_demote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="153" operation="notify" operation_key="redis-bundle-master_pre_notify_demote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="45" priority="1000000">
+    <action_set>
+      <rsc_op id="231" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:1_post_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="149" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="46">
+    <action_set>
+      <rsc_op id="230" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:1_pre_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="147" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="47">
+    <action_set>
+      <rsc_op id="226" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:1_pre_notify_stop_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="141" operation="notify" operation_key="redis-bundle-master_pre_notify_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="48" priority="1000000">
+    <action_set>
+      <rsc_op id="223" operation="notify" operation_key="redis_post_notify_start_0" internal_operation_key="redis:1_post_notify_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="137" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="49">
+    <action_set>
+      <rsc_op id="222" operation="notify" operation_key="redis_pre_notify_start_0" internal_operation_key="redis:1_pre_notify_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="135" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="50" priority="1000000">
+    <action_set>
+      <rsc_op id="205" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="143" operation="notify" operation_key="redis-bundle-master_post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="203" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="51">
+    <action_set>
+      <rsc_op id="125" operation="monitor" operation_key="redis_monitor_20000" internal_operation_key="redis:1_monitor_20000" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_op_target_rc="8" CRM_meta_physical_host="controller-1" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="124" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="138" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="144" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="150" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="156" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="204" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="52">
+    <action_set>
+      <rsc_op id="124" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="27" operation="cancel" operation_key="redis_monitor_60000" internal_operation_key="redis:1_monitor_60000" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="28" operation="cancel" operation_key="redis_monitor_45000" internal_operation_key="redis:1_monitor_45000" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="145" operation="promote" operation_key="redis-bundle-master_promote_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="195" operation="stonith_complete" operation_key="stonith_complete"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="53">
+    <action_set>
+      <rsc_op id="28" operation="cancel" operation_key="redis_monitor_45000" internal_operation_key="redis:1_monitor_45000" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="45000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_operation="monitor" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="54">
+    <action_set>
+      <rsc_op id="27" operation="cancel" operation_key="redis_monitor_60000" internal_operation_key="redis:1_monitor_60000" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+        <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="60000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_operation="monitor" CRM_meta_role="Slave" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="55" priority="1000000">
+    <action_set>
+      <rsc_op id="237" operation="notify" operation_key="redis_post_notify_demote_0" internal_operation_key="redis:2_post_notify_demote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
+        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="155" operation="notify" operation_key="redis-bundle-master_post_notify_demoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="56">
+    <action_set>
+      <rsc_op id="236" operation="notify" operation_key="redis_pre_notify_demote_0" internal_operation_key="redis:2_pre_notify_demote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
+        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="153" operation="notify" operation_key="redis-bundle-master_pre_notify_demote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="57" priority="1000000">
+    <action_set>
+      <rsc_op id="233" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:2_post_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
+        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="149" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="58">
+    <action_set>
+      <rsc_op id="232" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:2_pre_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
+        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="147" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="59">
+    <action_set>
+      <rsc_op id="227" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:2_pre_notify_stop_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
+        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="141" operation="notify" operation_key="redis-bundle-master_pre_notify_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="60" priority="1000000">
+    <action_set>
+      <rsc_op id="225" operation="notify" operation_key="redis_post_notify_start_0" internal_operation_key="redis:2_post_notify_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
+        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="137" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="61">
+    <action_set>
+      <rsc_op id="224" operation="notify" operation_key="redis_pre_notify_start_0" internal_operation_key="redis:2_pre_notify_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
+        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="135" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="62" priority="1000000">
+    <action_set>
+      <rsc_op id="206" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
+        <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="143" operation="notify" operation_key="redis-bundle-master_post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="203" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="63" priority="1000000">
+    <action_set>
+      <pseudo_event id="156" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="demote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="155" operation="notify" operation_key="redis-bundle-master_post_notify_demoted_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="235" operation="notify" operation_key="redis_post_notify_demote_0" internal_operation_key="redis:1_post_notify_demote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="237" operation="notify" operation_key="redis_post_notify_demote_0" internal_operation_key="redis:2_post_notify_demote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="64" priority="1000000">
+    <action_set>
+      <pseudo_event id="155" operation="notify" operation_key="redis-bundle-master_post_notify_demoted_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="demote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="152" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="154" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_demote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="65">
+    <action_set>
+      <pseudo_event id="154" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_demote_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="demote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="153" operation="notify" operation_key="redis-bundle-master_pre_notify_demote_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="234" operation="notify" operation_key="redis_pre_notify_demote_0" internal_operation_key="redis:1_pre_notify_demote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="236" operation="notify" operation_key="redis_pre_notify_demote_0" internal_operation_key="redis:2_pre_notify_demote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="66">
+    <action_set>
+      <pseudo_event id="153" operation="notify" operation_key="redis-bundle-master_pre_notify_demote_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="demote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="67" priority="1000000">
+    <action_set>
+      <pseudo_event id="152" operation="demoted" operation_key="redis-bundle-master_demoted_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="128" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="151" operation="demote" operation_key="redis-bundle-master_demote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="68">
+    <action_set>
+      <pseudo_event id="151" operation="demote" operation_key="redis-bundle-master_demote_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="154" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_demote_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="159" operation="demote" operation_key="redis-bundle_demote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="69" priority="1000000">
+    <action_set>
+      <pseudo_event id="150" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="149" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="229" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="231" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:1_post_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="233" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:2_post_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="70" priority="1000000">
+    <action_set>
+      <pseudo_event id="149" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="146" operation="promoted" operation_key="redis-bundle-master_promoted_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="148" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="71">
+    <action_set>
+      <pseudo_event id="148" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="147" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="228" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="230" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:1_pre_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="232" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:2_pre_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="72">
+    <action_set>
+      <pseudo_event id="147" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="138" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="144" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="156" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="73" priority="1000000">
+    <action_set>
+      <pseudo_event id="146" operation="promoted" operation_key="redis-bundle-master_promoted_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="124" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="74">
+    <action_set>
+      <pseudo_event id="145" operation="promote" operation_key="redis-bundle-master_promote_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="134" operation="running" operation_key="redis-bundle-master_running_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="140" operation="stopped" operation_key="redis-bundle-master_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="148" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="152" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="157" operation="promote" operation_key="redis-bundle_promote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="75" priority="1000000">
+    <action_set>
+      <pseudo_event id="144" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="143" operation="notify" operation_key="redis-bundle-master_post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="205" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="206" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="76" priority="1000000">
+    <action_set>
+      <pseudo_event id="143" operation="notify" operation_key="redis-bundle-master_post_notify_stopped_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="140" operation="stopped" operation_key="redis-bundle-master_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="142" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="77">
+    <action_set>
+      <pseudo_event id="142" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_stop_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="141" operation="notify" operation_key="redis-bundle-master_pre_notify_stop_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="226" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:1_pre_notify_stop_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="227" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:2_pre_notify_stop_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="78">
+    <action_set>
+      <pseudo_event id="141" operation="notify" operation_key="redis-bundle-master_pre_notify_stop_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="156" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="79" priority="1000000">
+    <action_set>
+      <pseudo_event id="140" operation="stopped" operation_key="redis-bundle-master_stopped_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="129" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="139" operation="stop" operation_key="redis-bundle-master_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="80">
+    <action_set>
+      <pseudo_event id="139" operation="stop" operation_key="redis-bundle-master_stop_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="120" operation="stop" operation_key="redis-bundle_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="142" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="152" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="202" operation="stonith" operation_key="stonith-redis-bundle-0-off" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="81" priority="1000000">
+    <action_set>
+      <pseudo_event id="138" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="137" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="221" operation="notify" operation_key="redis_post_notify_start_0" internal_operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="223" operation="notify" operation_key="redis_post_notify_start_0" internal_operation_key="redis:1_post_notify_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="225" operation="notify" operation_key="redis_post_notify_start_0" internal_operation_key="redis:2_post_notify_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="82" priority="1000000">
+    <action_set>
+      <pseudo_event id="137" operation="notify" operation_key="redis-bundle-master_post_notify_running_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="134" operation="running" operation_key="redis-bundle-master_running_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="136" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="83">
+    <action_set>
+      <pseudo_event id="136" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="135" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="222" operation="notify" operation_key="redis_pre_notify_start_0" internal_operation_key="redis:1_pre_notify_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="224" operation="notify" operation_key="redis_pre_notify_start_0" internal_operation_key="redis:2_pre_notify_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="84">
+    <action_set>
+      <pseudo_event id="135" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="144" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="156" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="85" priority="1000000">
+    <action_set>
+      <pseudo_event id="134" operation="running" operation_key="redis-bundle-master_running_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="133" operation="start" operation_key="redis-bundle-master_start_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="86">
+    <action_set>
+      <pseudo_event id="133" operation="start" operation_key="redis-bundle-master_start_0">
+        <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="118" operation="start" operation_key="redis-bundle_start_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="136" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="140" operation="stopped" operation_key="redis-bundle-master_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="152" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="87">
+    <action_set>
+      <pseudo_event id="106" operation="stop" operation_key="redis-bundle-docker-0_stop_0">
+        <attributes CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/rhosp12/openstack-redis-docker:pcmklatest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/redis/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="107" operation="stop" operation_key="redis-bundle-0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="120" operation="stop" operation_key="redis-bundle_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="88">
+    <action_set>
+      <pseudo_event id="107" operation="stop" operation_key="redis-bundle-0_stop_0">
+        <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_timeout="20000" addr="#uname"  port="3124"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="89">
+    <action_set>
+      <rsc_op id="163" operation="monitor" operation_key="ip-192.168.24.7_monitor_10000" on_node="controller-2" on_node_uuid="3">
+        <primitive id="ip-192.168.24.7" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.24.7"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="162" operation="start" operation_key="ip-192.168.24.7_start_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="90">
+    <action_set>
+      <rsc_op id="162" operation="start" operation_key="ip-192.168.24.7_start_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="ip-192.168.24.7" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.24.7"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="161" operation="stop" operation_key="ip-192.168.24.7_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="195" operation="stonith_complete" operation_key="stonith_complete"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="91">
+    <action_set>
+      <pseudo_event id="161" operation="stop" operation_key="ip-192.168.24.7_stop_0">
+        <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.24.7"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="184" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="92">
+    <action_set>
+      <rsc_op id="166" operation="monitor" operation_key="ip-10.0.0.109_monitor_10000" on_node="controller-1" on_node_uuid="2">
+        <primitive id="ip-10.0.0.109" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" cidr_netmask="32"  ip="10.0.0.109"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="165" operation="start" operation_key="ip-10.0.0.109_start_0" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="93">
+    <action_set>
+      <rsc_op id="165" operation="start" operation_key="ip-10.0.0.109_start_0" on_node="controller-1" on_node_uuid="2">
+        <primitive id="ip-10.0.0.109" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="start" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" cidr_netmask="32"  ip="10.0.0.109"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="164" operation="stop" operation_key="ip-10.0.0.109_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="195" operation="stonith_complete" operation_key="stonith_complete"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="94">
+    <action_set>
+      <pseudo_event id="164" operation="stop" operation_key="ip-10.0.0.109_stop_0">
+        <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="10.0.0.109"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="184" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="95">
+    <action_set>
+      <rsc_op id="175" operation="monitor" operation_key="ip-172.17.4.11_monitor_10000" on_node="controller-1" on_node_uuid="2">
+        <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="174" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="96">
+    <action_set>
+      <rsc_op id="174" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-1" on_node_uuid="2">
+        <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_name="start" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="173" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="195" operation="stonith_complete" operation_key="stonith_complete"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="97">
+    <action_set>
+      <pseudo_event id="173" operation="stop" operation_key="ip-172.17.4.11_stop_0">
+        <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="184" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="98">
+    <action_set>
+      <pseudo_event id="176" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0">
+        <attributes CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/rhosp12/openstack-haproxy-docker:pcmklatest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/haproxy/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="183" operation="stop" operation_key="haproxy-bundle_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="99">
+    <action_set>
+      <rsc_op id="191" operation="monitor" operation_key="stonith-fence_ipmilan-5254003e8e97_monitor_60000" on_node="controller-1" on_node_uuid="2">
+        <primitive id="stonith-fence_ipmilan-5254003e8e97" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6231" lanplus="true" login="admin" passwd="password" pcmk_host_list="controller-2" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="190" operation="start" operation_key="stonith-fence_ipmilan-5254003e8e97_start_0" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="100">
+    <action_set>
+      <rsc_op id="190" operation="start" operation_key="stonith-fence_ipmilan-5254003e8e97_start_0" on_node="controller-1" on_node_uuid="2">
+        <primitive id="stonith-fence_ipmilan-5254003e8e97" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6231" lanplus="true" login="admin" passwd="password" pcmk_host_list="controller-2" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="29" operation="all_stopped" operation_key="all_stopped"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="189" operation="stop" operation_key="stonith-fence_ipmilan-5254003e8e97_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="101">
+    <action_set>
+      <pseudo_event id="189" operation="stop" operation_key="stonith-fence_ipmilan-5254003e8e97_stop_0">
+        <attributes CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6231" lanplus="true" login="admin" passwd="password" pcmk_host_list="controller-2" privlvl="administrator"/>
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="102">
+    <action_set>
+      <rsc_op id="194" operation="monitor" operation_key="stonith-fence_ipmilan-5254000dcb3f_monitor_60000" on_node="controller-2" on_node_uuid="3">
+        <primitive id="stonith-fence_ipmilan-5254000dcb3f" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6230" lanplus="true" login="admin" passwd="password" pcmk_host_list="controller-1" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="193" operation="start" operation_key="stonith-fence_ipmilan-5254000dcb3f_start_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="103">
+    <action_set>
+      <rsc_op id="193" operation="start" operation_key="stonith-fence_ipmilan-5254000dcb3f_start_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="stonith-fence_ipmilan-5254000dcb3f" class="stonith" type="fence_ipmilan"/>
+        <attributes CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6230" lanplus="true" login="admin" passwd="password" pcmk_host_list="controller-1" privlvl="administrator"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="29" operation="all_stopped" operation_key="all_stopped"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="192" operation="stop" operation_key="stonith-fence_ipmilan-5254000dcb3f_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="104">
+    <action_set>
+      <pseudo_event id="192" operation="stop" operation_key="stonith-fence_ipmilan-5254000dcb3f_stop_0">
+        <attributes CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6230" lanplus="true" login="admin" passwd="password" pcmk_host_list="controller-1" privlvl="administrator"/>
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="105">
+    <action_set>
+      <pseudo_event id="202" operation="stonith" operation_key="stonith-redis-bundle-0-off" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0">
+        <attributes CRM_meta_master_redis="1" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_stonith_action="off" />
+        <downed>
+          <node id="redis-bundle-0"/>
+        </downed>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="106">
+    <action_set>
+      <pseudo_event id="197" operation="stonith" operation_key="stonith-rabbitmq-bundle-0-off" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0">
+        <attributes CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_rmq_node_attr_last_known_rabbitmq="rabbit@controller-0" CRM_meta_stonith_action="off" />
+        <downed>
+          <node id="rabbitmq-bundle-0"/>
+        </downed>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="107">
+    <action_set>
+      <pseudo_event id="196" operation="stonith" operation_key="stonith-galera-bundle-0-off" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0">
+        <attributes CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_stonith_action="off" />
+        <downed>
+          <node id="galera-bundle-0"/>
+        </downed>
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="108">
+    <action_set>
+      <pseudo_event id="195" operation="stonith_complete" operation_key="stonith_complete">
+        <attributes />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="196" operation="stonith" operation_key="stonith-galera-bundle-0-off" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="197" operation="stonith" operation_key="stonith-rabbitmq-bundle-0-off" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="202" operation="stonith" operation_key="stonith-redis-bundle-0-off" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="109" priority="1000000">
+    <action_set>
+      <pseudo_event id="184" operation="stopped" operation_key="haproxy-bundle_stopped_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="176" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="110">
+    <action_set>
+      <pseudo_event id="183" operation="stop" operation_key="haproxy-bundle_stop_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="111" priority="1000000">
+    <action_set>
+      <pseudo_event id="160" operation="demoted" operation_key="redis-bundle_demoted_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="156" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="159" operation="demote" operation_key="redis-bundle_demote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="112">
+    <action_set>
+      <pseudo_event id="159" operation="demote" operation_key="redis-bundle_demote_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="113" priority="1000000">
+    <action_set>
+      <pseudo_event id="158" operation="promoted" operation_key="redis-bundle_promoted_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="150" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="114">
+    <action_set>
+      <pseudo_event id="157" operation="promote" operation_key="redis-bundle_promote_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="119" operation="running" operation_key="redis-bundle_running_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="121" operation="stopped" operation_key="redis-bundle_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="160" operation="demoted" operation_key="redis-bundle_demoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="115" priority="1000000">
+    <action_set>
+      <pseudo_event id="121" operation="stopped" operation_key="redis-bundle_stopped_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="106" operation="stop" operation_key="redis-bundle-docker-0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="144" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="116">
+    <action_set>
+      <pseudo_event id="120" operation="stop" operation_key="redis-bundle_stop_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="160" operation="demoted" operation_key="redis-bundle_demoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="117" priority="1000000">
+    <action_set>
+      <pseudo_event id="119" operation="running" operation_key="redis-bundle_running_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="138" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="118">
+    <action_set>
+      <pseudo_event id="118" operation="start" operation_key="redis-bundle_start_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="121" operation="stopped" operation_key="redis-bundle_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="160" operation="demoted" operation_key="redis-bundle_demoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="119" priority="1000000">
+    <action_set>
+      <pseudo_event id="105" operation="demoted" operation_key="galera-bundle_demoted_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="101" operation="demoted" operation_key="galera-bundle-master_demoted_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="104" operation="demote" operation_key="galera-bundle_demote_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="120">
+    <action_set>
+      <pseudo_event id="104" operation="demote" operation_key="galera-bundle_demote_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="121" priority="1000000">
+    <action_set>
+      <pseudo_event id="80" operation="stopped" operation_key="galera-bundle_stopped_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="65" operation="stop" operation_key="galera-bundle-docker-0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="97" operation="stopped" operation_key="galera-bundle-master_stopped_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="122">
+    <action_set>
+      <pseudo_event id="79" operation="stop" operation_key="galera-bundle_stop_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="105" operation="demoted" operation_key="galera-bundle_demoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="123" priority="1000000">
+    <action_set>
+      <pseudo_event id="78" operation="running" operation_key="galera-bundle_running_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="95" operation="running" operation_key="galera-bundle-master_running_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="124">
+    <action_set>
+      <pseudo_event id="77" operation="start" operation_key="galera-bundle_start_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="80" operation="stopped" operation_key="galera-bundle_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="105" operation="demoted" operation_key="galera-bundle_demoted_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="125" priority="1000000">
+    <action_set>
+      <pseudo_event id="45" operation="stopped" operation_key="rabbitmq-bundle_stopped_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="30" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="64" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_stopped_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="126">
+    <action_set>
+      <pseudo_event id="44" operation="stop" operation_key="rabbitmq-bundle_stop_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="127" priority="1000000">
+    <action_set>
+      <pseudo_event id="43" operation="running" operation_key="rabbitmq-bundle_running_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="58" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="128">
+    <action_set>
+      <pseudo_event id="42" operation="start" operation_key="rabbitmq-bundle_start_0">
+        <attributes CRM_meta_timeout="20000" />
+      </pseudo_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="129">
+    <action_set>
+      <pseudo_event id="29" operation="all_stopped" operation_key="all_stopped">
+        <attributes />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <pseudo_event id="30" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="31" operation="stop" operation_key="rabbitmq-bundle-0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="50" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="64" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="65" operation="stop" operation_key="galera-bundle-docker-0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="66" operation="stop" operation_key="galera-bundle-0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="90" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="106" operation="stop" operation_key="redis-bundle-docker-0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="107" operation="stop" operation_key="redis-bundle-0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="129" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="144" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="161" operation="stop" operation_key="ip-192.168.24.7_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="164" operation="stop" operation_key="ip-10.0.0.109_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="173" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="176" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="189" operation="stop" operation_key="stonith-fence_ipmilan-5254003e8e97_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="192" operation="stop" operation_key="stonith-fence_ipmilan-5254000dcb3f_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="195" operation="stonith_complete" operation_key="stonith_complete"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="199" operation="notified" operation_key="rabbitmq_notified_0" internal_operation_key="rabbitmq:0_confirmed-post_notify_stonith_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="204" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="130">
+    <action_set>
+      <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1">
+        <attributes CRM_meta_cinder_volume_role="true" CRM_meta_galera_role="true" CRM_meta_haproxy_role="true" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_rabbitmq_role="true" CRM_meta_redis_role="true" CRM_meta_rmq_node_attr_last_known_rabbitmq="rabbit@controller-0" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="1"/>
+          <node id="redis-bundle-0"/>
+          <node id="galera-bundle-0"/>
+          <node id="rabbitmq-bundle-0"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+</transition_graph>
diff --git a/pengine/test10/bundle-order-fencing.scores b/pengine/test10/bundle-order-fencing.scores
new file mode 100644
index 0000000..9037624
--- /dev/null
+++ b/pengine/test10/bundle-order-fencing.scores
@@ -0,0 +1,1148 @@
+Allocation scores:
+Using the original execution date of: 2017-09-12 10:51:59Z
+clone_color: galera-bundle-master allocation score on controller-0: -INFINITY
+clone_color: galera-bundle-master allocation score on controller-1: -INFINITY
+clone_color: galera-bundle-master allocation score on controller-2: -INFINITY
+clone_color: galera-bundle-master allocation score on galera-bundle-0: 0
+clone_color: galera-bundle-master allocation score on galera-bundle-1: 0
+clone_color: galera-bundle-master allocation score on galera-bundle-2: 0
+clone_color: galera-bundle-master allocation score on rabbitmq-bundle-0: -INFINITY
+clone_color: galera-bundle-master allocation score on rabbitmq-bundle-1: -INFINITY
+clone_color: galera-bundle-master allocation score on rabbitmq-bundle-2: -INFINITY
+clone_color: galera:0 allocation score on controller-0: -INFINITY
+clone_color: galera:0 allocation score on controller-1: -INFINITY
+clone_color: galera:0 allocation score on controller-2: -INFINITY
+clone_color: galera:0 allocation score on galera-bundle-0: INFINITY
+clone_color: galera:0 allocation score on galera-bundle-1: -INFINITY
+clone_color: galera:0 allocation score on galera-bundle-2: -INFINITY
+clone_color: galera:0 allocation score on rabbitmq-bundle-0: -INFINITY
+clone_color: galera:0 allocation score on rabbitmq-bundle-1: -INFINITY
+clone_color: galera:0 allocation score on rabbitmq-bundle-2: -INFINITY
+clone_color: galera:1 allocation score on controller-0: -INFINITY
+clone_color: galera:1 allocation score on controller-1: -INFINITY
+clone_color: galera:1 allocation score on controller-2: -INFINITY
+clone_color: galera:1 allocation score on galera-bundle-0: -INFINITY
+clone_color: galera:1 allocation score on galera-bundle-1: INFINITY
+clone_color: galera:1 allocation score on galera-bundle-2: -INFINITY
+clone_color: galera:1 allocation score on rabbitmq-bundle-0: -INFINITY
+clone_color: galera:1 allocation score on rabbitmq-bundle-1: -INFINITY
+clone_color: galera:1 allocation score on rabbitmq-bundle-2: -INFINITY
+clone_color: galera:2 allocation score on controller-0: -INFINITY
+clone_color: galera:2 allocation score on controller-1: -INFINITY
+clone_color: galera:2 allocation score on controller-2: -INFINITY
+clone_color: galera:2 allocation score on galera-bundle-0: -INFINITY
+clone_color: galera:2 allocation score on galera-bundle-1: -INFINITY
+clone_color: galera:2 allocation score on galera-bundle-2: INFINITY
+clone_color: galera:2 allocation score on rabbitmq-bundle-0: -INFINITY
+clone_color: galera:2 allocation score on rabbitmq-bundle-1: -INFINITY
+clone_color: galera:2 allocation score on rabbitmq-bundle-2: -INFINITY
+clone_color: rabbitmq-bundle-clone allocation score on controller-0: -INFINITY
+clone_color: rabbitmq-bundle-clone allocation score on controller-1: -INFINITY
+clone_color: rabbitmq-bundle-clone allocation score on controller-2: -INFINITY
+clone_color: rabbitmq-bundle-clone allocation score on rabbitmq-bundle-0: 0
+clone_color: rabbitmq-bundle-clone allocation score on rabbitmq-bundle-1: 0
+clone_color: rabbitmq-bundle-clone allocation score on rabbitmq-bundle-2: 0
+clone_color: rabbitmq:0 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:0 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:0 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:0 allocation score on rabbitmq-bundle-0: INFINITY
+clone_color: rabbitmq:0 allocation score on rabbitmq-bundle-1: -INFINITY
+clone_color: rabbitmq:0 allocation score on rabbitmq-bundle-2: -INFINITY
+clone_color: rabbitmq:1 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:1 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:1 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:1 allocation score on rabbitmq-bundle-0: -INFINITY
+clone_color: rabbitmq:1 allocation score on rabbitmq-bundle-1: INFINITY
+clone_color: rabbitmq:1 allocation score on rabbitmq-bundle-2: -INFINITY
+clone_color: rabbitmq:2 allocation score on controller-0: -INFINITY
+clone_color: rabbitmq:2 allocation score on controller-1: -INFINITY
+clone_color: rabbitmq:2 allocation score on controller-2: -INFINITY
+clone_color: rabbitmq:2 allocation score on rabbitmq-bundle-0: -INFINITY
+clone_color: rabbitmq:2 allocation score on rabbitmq-bundle-1: -INFINITY
+clone_color: rabbitmq:2 allocation score on rabbitmq-bundle-2: INFINITY
+clone_color: redis-bundle-master allocation score on controller-0: -INFINITY
+clone_color: redis-bundle-master allocation score on controller-1: -INFINITY
+clone_color: redis-bundle-master allocation score on controller-2: -INFINITY
+clone_color: redis-bundle-master allocation score on galera-bundle-0: -INFINITY
+clone_color: redis-bundle-master allocation score on galera-bundle-1: -INFINITY
+clone_color: redis-bundle-master allocation score on galera-bundle-2: -INFINITY
+clone_color: redis-bundle-master allocation score on rabbitmq-bundle-0: -INFINITY
+clone_color: redis-bundle-master allocation score on rabbitmq-bundle-1: -INFINITY
+clone_color: redis-bundle-master allocation score on rabbitmq-bundle-2: -INFINITY
+clone_color: redis-bundle-master allocation score on redis-bundle-0: 0
+clone_color: redis-bundle-master allocation score on redis-bundle-1: 0
+clone_color: redis-bundle-master allocation score on redis-bundle-2: 0
+clone_color: redis:0 allocation score on controller-0: -INFINITY
+clone_color: redis:0 allocation score on controller-1: -INFINITY
+clone_color: redis:0 allocation score on controller-2: -INFINITY
+clone_color: redis:0 allocation score on galera-bundle-0: -INFINITY
+clone_color: redis:0 allocation score on galera-bundle-1: -INFINITY
+clone_color: redis:0 allocation score on galera-bundle-2: -INFINITY
+clone_color: redis:0 allocation score on rabbitmq-bundle-0: -INFINITY
+clone_color: redis:0 allocation score on rabbitmq-bundle-1: -INFINITY
+clone_color: redis:0 allocation score on rabbitmq-bundle-2: -INFINITY
+clone_color: redis:0 allocation score on redis-bundle-0: INFINITY
+clone_color: redis:0 allocation score on redis-bundle-1: -INFINITY
+clone_color: redis:0 allocation score on redis-bundle-2: -INFINITY
+clone_color: redis:1 allocation score on controller-0: -INFINITY
+clone_color: redis:1 allocation score on controller-1: -INFINITY
+clone_color: redis:1 allocation score on controller-2: -INFINITY
+clone_color: redis:1 allocation score on galera-bundle-0: -INFINITY
+clone_color: redis:1 allocation score on galera-bundle-1: -INFINITY
+clone_color: redis:1 allocation score on galera-bundle-2: -INFINITY
+clone_color: redis:1 allocation score on rabbitmq-bundle-0: -INFINITY
+clone_color: redis:1 allocation score on rabbitmq-bundle-1: -INFINITY
+clone_color: redis:1 allocation score on rabbitmq-bundle-2: -INFINITY
+clone_color: redis:1 allocation score on redis-bundle-0: -INFINITY
+clone_color: redis:1 allocation score on redis-bundle-1: INFINITY
+clone_color: redis:1 allocation score on redis-bundle-2: -INFINITY
+clone_color: redis:2 allocation score on controller-0: -INFINITY
+clone_color: redis:2 allocation score on controller-1: -INFINITY
+clone_color: redis:2 allocation score on controller-2: -INFINITY
+clone_color: redis:2 allocation score on galera-bundle-0: -INFINITY
+clone_color: redis:2 allocation score on galera-bundle-1: -INFINITY
+clone_color: redis:2 allocation score on galera-bundle-2: -INFINITY
+clone_color: redis:2 allocation score on rabbitmq-bundle-0: -INFINITY
+clone_color: redis:2 allocation score on rabbitmq-bundle-1: -INFINITY
+clone_color: redis:2 allocation score on rabbitmq-bundle-2: -INFINITY
+clone_color: redis:2 allocation score on redis-bundle-0: -INFINITY
+clone_color: redis:2 allocation score on redis-bundle-1: -INFINITY
+clone_color: redis:2 allocation score on redis-bundle-2: INFINITY
+container_color: galera-bundle allocation score on controller-0: 0
+container_color: galera-bundle allocation score on controller-1: 0
+container_color: galera-bundle allocation score on controller-2: 0
+container_color: galera-bundle allocation score on galera-bundle-0: -INFINITY
+container_color: galera-bundle allocation score on galera-bundle-1: -INFINITY
+container_color: galera-bundle allocation score on galera-bundle-2: -INFINITY
+container_color: galera-bundle allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: galera-bundle allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: galera-bundle allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: galera-bundle-0 allocation score on controller-0: INFINITY
+container_color: galera-bundle-0 allocation score on controller-1: 0
+container_color: galera-bundle-0 allocation score on controller-2: 0
+container_color: galera-bundle-0 allocation score on galera-bundle-0: -INFINITY
+container_color: galera-bundle-0 allocation score on galera-bundle-1: -INFINITY
+container_color: galera-bundle-0 allocation score on galera-bundle-2: -INFINITY
+container_color: galera-bundle-0 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: galera-bundle-0 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: galera-bundle-0 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: galera-bundle-1 allocation score on controller-0: 0
+container_color: galera-bundle-1 allocation score on controller-1: INFINITY
+container_color: galera-bundle-1 allocation score on controller-2: 0
+container_color: galera-bundle-1 allocation score on galera-bundle-0: -INFINITY
+container_color: galera-bundle-1 allocation score on galera-bundle-1: -INFINITY
+container_color: galera-bundle-1 allocation score on galera-bundle-2: -INFINITY
+container_color: galera-bundle-1 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: galera-bundle-1 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: galera-bundle-1 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: galera-bundle-2 allocation score on controller-0: 0
+container_color: galera-bundle-2 allocation score on controller-1: 0
+container_color: galera-bundle-2 allocation score on controller-2: INFINITY
+container_color: galera-bundle-2 allocation score on galera-bundle-0: -INFINITY
+container_color: galera-bundle-2 allocation score on galera-bundle-1: -INFINITY
+container_color: galera-bundle-2 allocation score on galera-bundle-2: -INFINITY
+container_color: galera-bundle-2 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: galera-bundle-2 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: galera-bundle-2 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: galera-bundle-docker-0 allocation score on controller-0: INFINITY
+container_color: galera-bundle-docker-0 allocation score on controller-1: 0
+container_color: galera-bundle-docker-0 allocation score on controller-2: 0
+container_color: galera-bundle-docker-0 allocation score on galera-bundle-0: -INFINITY
+container_color: galera-bundle-docker-0 allocation score on galera-bundle-1: -INFINITY
+container_color: galera-bundle-docker-0 allocation score on galera-bundle-2: -INFINITY
+container_color: galera-bundle-docker-0 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: galera-bundle-docker-0 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: galera-bundle-docker-0 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: galera-bundle-docker-1 allocation score on controller-0: 0
+container_color: galera-bundle-docker-1 allocation score on controller-1: INFINITY
+container_color: galera-bundle-docker-1 allocation score on controller-2: 0
+container_color: galera-bundle-docker-1 allocation score on galera-bundle-0: -INFINITY
+container_color: galera-bundle-docker-1 allocation score on galera-bundle-1: -INFINITY
+container_color: galera-bundle-docker-1 allocation score on galera-bundle-2: -INFINITY
+container_color: galera-bundle-docker-1 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: galera-bundle-docker-1 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: galera-bundle-docker-1 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: galera-bundle-docker-2 allocation score on controller-0: 0
+container_color: galera-bundle-docker-2 allocation score on controller-1: 0
+container_color: galera-bundle-docker-2 allocation score on controller-2: INFINITY
+container_color: galera-bundle-docker-2 allocation score on galera-bundle-0: -INFINITY
+container_color: galera-bundle-docker-2 allocation score on galera-bundle-1: -INFINITY
+container_color: galera-bundle-docker-2 allocation score on galera-bundle-2: -INFINITY
+container_color: galera-bundle-docker-2 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: galera-bundle-docker-2 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: galera-bundle-docker-2 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: galera-bundle-master allocation score on controller-0: 0
+container_color: galera-bundle-master allocation score on controller-1: 0
+container_color: galera-bundle-master allocation score on controller-2: 0
+container_color: galera-bundle-master allocation score on galera-bundle-0: -INFINITY
+container_color: galera-bundle-master allocation score on galera-bundle-1: -INFINITY
+container_color: galera-bundle-master allocation score on galera-bundle-2: -INFINITY
+container_color: galera-bundle-master allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: galera-bundle-master allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: galera-bundle-master allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: galera:0 allocation score on controller-0: 0
+container_color: galera:0 allocation score on controller-1: 0
+container_color: galera:0 allocation score on controller-2: 0
+container_color: galera:0 allocation score on galera-bundle-0: -INFINITY
+container_color: galera:0 allocation score on galera-bundle-1: -INFINITY
+container_color: galera:0 allocation score on galera-bundle-2: -INFINITY
+container_color: galera:0 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: galera:0 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: galera:0 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: galera:1 allocation score on controller-0: 0
+container_color: galera:1 allocation score on controller-1: 0
+container_color: galera:1 allocation score on controller-2: 0
+container_color: galera:1 allocation score on galera-bundle-0: -INFINITY
+container_color: galera:1 allocation score on galera-bundle-1: -INFINITY
+container_color: galera:1 allocation score on galera-bundle-2: -INFINITY
+container_color: galera:1 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: galera:1 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: galera:1 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: galera:2 allocation score on controller-0: 0
+container_color: galera:2 allocation score on controller-1: 0
+container_color: galera:2 allocation score on controller-2: 0
+container_color: galera:2 allocation score on galera-bundle-0: -INFINITY
+container_color: galera:2 allocation score on galera-bundle-1: -INFINITY
+container_color: galera:2 allocation score on galera-bundle-2: -INFINITY
+container_color: galera:2 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: galera:2 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: galera:2 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on controller-0: 0
+container_color: haproxy-bundle allocation score on controller-0: 0
+container_color: haproxy-bundle allocation score on controller-0: 0
+container_color: haproxy-bundle allocation score on controller-0: 0
+container_color: haproxy-bundle allocation score on controller-0: 0
+container_color: haproxy-bundle allocation score on controller-0: 0
+container_color: haproxy-bundle allocation score on controller-0: 0
+container_color: haproxy-bundle allocation score on controller-1: 0
+container_color: haproxy-bundle allocation score on controller-1: 0
+container_color: haproxy-bundle allocation score on controller-1: 0
+container_color: haproxy-bundle allocation score on controller-1: 0
+container_color: haproxy-bundle allocation score on controller-1: 0
+container_color: haproxy-bundle allocation score on controller-1: 0
+container_color: haproxy-bundle allocation score on controller-1: 0
+container_color: haproxy-bundle allocation score on controller-2: 0
+container_color: haproxy-bundle allocation score on controller-2: 0
+container_color: haproxy-bundle allocation score on controller-2: 0
+container_color: haproxy-bundle allocation score on controller-2: 0
+container_color: haproxy-bundle allocation score on controller-2: 0
+container_color: haproxy-bundle allocation score on controller-2: 0
+container_color: haproxy-bundle allocation score on controller-2: 0
+container_color: haproxy-bundle allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-0: INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-1: 0
+container_color: haproxy-bundle-docker-0 allocation score on controller-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on controller-2: 0
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-0 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on controller-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on controller-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on controller-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on controller-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on controller-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on controller-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on controller-0: 0
+container_color: haproxy-bundle-docker-1 allocation score on controller-1: 0
+container_color: haproxy-bundle-docker-1 allocation score on controller-1: 0
+container_color: haproxy-bundle-docker-1 allocation score on controller-1: 0
+container_color: haproxy-bundle-docker-1 allocation score on controller-1: 0
+container_color: haproxy-bundle-docker-1 allocation score on controller-1: 0
+container_color: haproxy-bundle-docker-1 allocation score on controller-1: 0
+container_color: haproxy-bundle-docker-1 allocation score on controller-1: 0
+container_color: haproxy-bundle-docker-1 allocation score on controller-2: INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on controller-2: INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on controller-2: INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on controller-2: INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on controller-2: INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on controller-2: INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on controller-2: INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-1 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-0: 0
+container_color: haproxy-bundle-docker-2 allocation score on controller-1: INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-1: INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-1: INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-1: INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-1: INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-1: INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-1: INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on controller-2: 0
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on galera-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-0: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-1: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-2: -INFINITY
+container_color: haproxy-bundle-docker-2 allocation score on redis-bundle-2: -INFINITY
+container_color: rabbitmq-bundle allocation score on controller-0: 0
+container_color: rabbitmq-bundle allocation score on controller-1: 0
+container_color: rabbitmq-bundle allocation score on controller-2: 0
+container_color: rabbitmq-bundle allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: rabbitmq-bundle allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: rabbitmq-bundle allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: rabbitmq-bundle-0 allocation score on controller-0: INFINITY
+container_color: rabbitmq-bundle-0 allocation score on controller-1: 0
+container_color: rabbitmq-bundle-0 allocation score on controller-2: 0
+container_color: rabbitmq-bundle-0 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: rabbitmq-bundle-0 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: rabbitmq-bundle-0 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: rabbitmq-bundle-1 allocation score on controller-0: 0
+container_color: rabbitmq-bundle-1 allocation score on controller-1: INFINITY
+container_color: rabbitmq-bundle-1 allocation score on controller-2: 0
+container_color: rabbitmq-bundle-1 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: rabbitmq-bundle-1 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: rabbitmq-bundle-1 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: rabbitmq-bundle-2 allocation score on controller-0: 0
+container_color: rabbitmq-bundle-2 allocation score on controller-1: 0
+container_color: rabbitmq-bundle-2 allocation score on controller-2: INFINITY
+container_color: rabbitmq-bundle-2 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: rabbitmq-bundle-2 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: rabbitmq-bundle-2 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: rabbitmq-bundle-clone allocation score on controller-0: 0
+container_color: rabbitmq-bundle-clone allocation score on controller-1: 0
+container_color: rabbitmq-bundle-clone allocation score on controller-2: 0
+container_color: rabbitmq-bundle-clone allocation score on rabbitmq-bundle-0: 0
+container_color: rabbitmq-bundle-clone allocation score on rabbitmq-bundle-1: 0
+container_color: rabbitmq-bundle-clone allocation score on rabbitmq-bundle-2: 0
+container_color: rabbitmq-bundle-docker-0 allocation score on controller-0: INFINITY
+container_color: rabbitmq-bundle-docker-0 allocation score on controller-1: 0
+container_color: rabbitmq-bundle-docker-0 allocation score on controller-2: 0
+container_color: rabbitmq-bundle-docker-0 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: rabbitmq-bundle-docker-0 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: rabbitmq-bundle-docker-0 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: rabbitmq-bundle-docker-1 allocation score on controller-0: 0
+container_color: rabbitmq-bundle-docker-1 allocation score on controller-1: INFINITY
+container_color: rabbitmq-bundle-docker-1 allocation score on controller-2: 0
+container_color: rabbitmq-bundle-docker-1 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: rabbitmq-bundle-docker-1 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: rabbitmq-bundle-docker-1 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: rabbitmq-bundle-docker-2 allocation score on controller-0: 0
+container_color: rabbitmq-bundle-docker-2 allocation score on controller-1: 0
+container_color: rabbitmq-bundle-docker-2 allocation score on controller-2: INFINITY
+container_color: rabbitmq-bundle-docker-2 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: rabbitmq-bundle-docker-2 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: rabbitmq-bundle-docker-2 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: rabbitmq:0 allocation score on controller-0: 0
+container_color: rabbitmq:0 allocation score on controller-1: 0
+container_color: rabbitmq:0 allocation score on controller-2: 0
+container_color: rabbitmq:0 allocation score on rabbitmq-bundle-0: INFINITY
+container_color: rabbitmq:0 allocation score on rabbitmq-bundle-1: 0
+container_color: rabbitmq:0 allocation score on rabbitmq-bundle-2: 0
+container_color: rabbitmq:1 allocation score on controller-0: 0
+container_color: rabbitmq:1 allocation score on controller-1: 0
+container_color: rabbitmq:1 allocation score on controller-2: 0
+container_color: rabbitmq:1 allocation score on rabbitmq-bundle-0: 0
+container_color: rabbitmq:1 allocation score on rabbitmq-bundle-1: INFINITY
+container_color: rabbitmq:1 allocation score on rabbitmq-bundle-2: 0
+container_color: rabbitmq:2 allocation score on controller-0: 0
+container_color: rabbitmq:2 allocation score on controller-1: 0
+container_color: rabbitmq:2 allocation score on controller-2: 0
+container_color: rabbitmq:2 allocation score on rabbitmq-bundle-0: 0
+container_color: rabbitmq:2 allocation score on rabbitmq-bundle-1: 0
+container_color: rabbitmq:2 allocation score on rabbitmq-bundle-2: INFINITY
+container_color: redis-bundle allocation score on controller-0: 0
+container_color: redis-bundle allocation score on controller-1: 0
+container_color: redis-bundle allocation score on controller-2: 0
+container_color: redis-bundle allocation score on galera-bundle-0: -INFINITY
+container_color: redis-bundle allocation score on galera-bundle-1: -INFINITY
+container_color: redis-bundle allocation score on galera-bundle-2: -INFINITY
+container_color: redis-bundle allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: redis-bundle allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: redis-bundle allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: redis-bundle allocation score on redis-bundle-0: -INFINITY
+container_color: redis-bundle allocation score on redis-bundle-1: -INFINITY
+container_color: redis-bundle allocation score on redis-bundle-2: -INFINITY
+container_color: redis-bundle-0 allocation score on controller-0: INFINITY
+container_color: redis-bundle-0 allocation score on controller-1: 0
+container_color: redis-bundle-0 allocation score on controller-2: 0
+container_color: redis-bundle-0 allocation score on galera-bundle-0: -INFINITY
+container_color: redis-bundle-0 allocation score on galera-bundle-1: -INFINITY
+container_color: redis-bundle-0 allocation score on galera-bundle-2: -INFINITY
+container_color: redis-bundle-0 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: redis-bundle-0 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: redis-bundle-0 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: redis-bundle-0 allocation score on redis-bundle-0: -INFINITY
+container_color: redis-bundle-0 allocation score on redis-bundle-1: -INFINITY
+container_color: redis-bundle-0 allocation score on redis-bundle-2: -INFINITY
+container_color: redis-bundle-1 allocation score on controller-0: 0
+container_color: redis-bundle-1 allocation score on controller-1: INFINITY
+container_color: redis-bundle-1 allocation score on controller-2: 0
+container_color: redis-bundle-1 allocation score on galera-bundle-0: -INFINITY
+container_color: redis-bundle-1 allocation score on galera-bundle-1: -INFINITY
+container_color: redis-bundle-1 allocation score on galera-bundle-2: -INFINITY
+container_color: redis-bundle-1 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: redis-bundle-1 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: redis-bundle-1 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: redis-bundle-1 allocation score on redis-bundle-0: -INFINITY
+container_color: redis-bundle-1 allocation score on redis-bundle-1: -INFINITY
+container_color: redis-bundle-1 allocation score on redis-bundle-2: -INFINITY
+container_color: redis-bundle-2 allocation score on controller-0: 0
+container_color: redis-bundle-2 allocation score on controller-1: 0
+container_color: redis-bundle-2 allocation score on controller-2: INFINITY
+container_color: redis-bundle-2 allocation score on galera-bundle-0: -INFINITY
+container_color: redis-bundle-2 allocation score on galera-bundle-1: -INFINITY
+container_color: redis-bundle-2 allocation score on galera-bundle-2: -INFINITY
+container_color: redis-bundle-2 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: redis-bundle-2 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: redis-bundle-2 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: redis-bundle-2 allocation score on redis-bundle-0: -INFINITY
+container_color: redis-bundle-2 allocation score on redis-bundle-1: -INFINITY
+container_color: redis-bundle-2 allocation score on redis-bundle-2: -INFINITY
+container_color: redis-bundle-docker-0 allocation score on controller-0: INFINITY
+container_color: redis-bundle-docker-0 allocation score on controller-1: 0
+container_color: redis-bundle-docker-0 allocation score on controller-2: 0
+container_color: redis-bundle-docker-0 allocation score on galera-bundle-0: -INFINITY
+container_color: redis-bundle-docker-0 allocation score on galera-bundle-1: -INFINITY
+container_color: redis-bundle-docker-0 allocation score on galera-bundle-2: -INFINITY
+container_color: redis-bundle-docker-0 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: redis-bundle-docker-0 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: redis-bundle-docker-0 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: redis-bundle-docker-0 allocation score on redis-bundle-0: -INFINITY
+container_color: redis-bundle-docker-0 allocation score on redis-bundle-1: -INFINITY
+container_color: redis-bundle-docker-0 allocation score on redis-bundle-2: -INFINITY
+container_color: redis-bundle-docker-1 allocation score on controller-0: 0
+container_color: redis-bundle-docker-1 allocation score on controller-1: INFINITY
+container_color: redis-bundle-docker-1 allocation score on controller-2: 0
+container_color: redis-bundle-docker-1 allocation score on galera-bundle-0: -INFINITY
+container_color: redis-bundle-docker-1 allocation score on galera-bundle-1: -INFINITY
+container_color: redis-bundle-docker-1 allocation score on galera-bundle-2: -INFINITY
+container_color: redis-bundle-docker-1 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: redis-bundle-docker-1 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: redis-bundle-docker-1 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: redis-bundle-docker-1 allocation score on redis-bundle-0: -INFINITY
+container_color: redis-bundle-docker-1 allocation score on redis-bundle-1: -INFINITY
+container_color: redis-bundle-docker-1 allocation score on redis-bundle-2: -INFINITY
+container_color: redis-bundle-docker-2 allocation score on controller-0: 0
+container_color: redis-bundle-docker-2 allocation score on controller-1: 0
+container_color: redis-bundle-docker-2 allocation score on controller-2: INFINITY
+container_color: redis-bundle-docker-2 allocation score on galera-bundle-0: -INFINITY
+container_color: redis-bundle-docker-2 allocation score on galera-bundle-1: -INFINITY
+container_color: redis-bundle-docker-2 allocation score on galera-bundle-2: -INFINITY
+container_color: redis-bundle-docker-2 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: redis-bundle-docker-2 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: redis-bundle-docker-2 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: redis-bundle-docker-2 allocation score on redis-bundle-0: -INFINITY
+container_color: redis-bundle-docker-2 allocation score on redis-bundle-1: -INFINITY
+container_color: redis-bundle-docker-2 allocation score on redis-bundle-2: -INFINITY
+container_color: redis-bundle-master allocation score on controller-0: 0
+container_color: redis-bundle-master allocation score on controller-1: 0
+container_color: redis-bundle-master allocation score on controller-2: 0
+container_color: redis-bundle-master allocation score on galera-bundle-0: -INFINITY
+container_color: redis-bundle-master allocation score on galera-bundle-1: -INFINITY
+container_color: redis-bundle-master allocation score on galera-bundle-2: -INFINITY
+container_color: redis-bundle-master allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: redis-bundle-master allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: redis-bundle-master allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: redis-bundle-master allocation score on redis-bundle-0: -INFINITY
+container_color: redis-bundle-master allocation score on redis-bundle-1: -INFINITY
+container_color: redis-bundle-master allocation score on redis-bundle-2: -INFINITY
+container_color: redis:0 allocation score on controller-0: 0
+container_color: redis:0 allocation score on controller-1: 0
+container_color: redis:0 allocation score on controller-2: 0
+container_color: redis:0 allocation score on galera-bundle-0: -INFINITY
+container_color: redis:0 allocation score on galera-bundle-1: -INFINITY
+container_color: redis:0 allocation score on galera-bundle-2: -INFINITY
+container_color: redis:0 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: redis:0 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: redis:0 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: redis:0 allocation score on redis-bundle-0: -INFINITY
+container_color: redis:0 allocation score on redis-bundle-1: -INFINITY
+container_color: redis:0 allocation score on redis-bundle-2: -INFINITY
+container_color: redis:1 allocation score on controller-0: 0
+container_color: redis:1 allocation score on controller-1: 0
+container_color: redis:1 allocation score on controller-2: 0
+container_color: redis:1 allocation score on galera-bundle-0: -INFINITY
+container_color: redis:1 allocation score on galera-bundle-1: -INFINITY
+container_color: redis:1 allocation score on galera-bundle-2: -INFINITY
+container_color: redis:1 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: redis:1 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: redis:1 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: redis:1 allocation score on redis-bundle-0: -INFINITY
+container_color: redis:1 allocation score on redis-bundle-1: -INFINITY
+container_color: redis:1 allocation score on redis-bundle-2: -INFINITY
+container_color: redis:2 allocation score on controller-0: 0
+container_color: redis:2 allocation score on controller-1: 0
+container_color: redis:2 allocation score on controller-2: 0
+container_color: redis:2 allocation score on galera-bundle-0: -INFINITY
+container_color: redis:2 allocation score on galera-bundle-1: -INFINITY
+container_color: redis:2 allocation score on galera-bundle-2: -INFINITY
+container_color: redis:2 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: redis:2 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: redis:2 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: redis:2 allocation score on redis-bundle-0: -INFINITY
+container_color: redis:2 allocation score on redis-bundle-1: -INFINITY
+container_color: redis:2 allocation score on redis-bundle-2: -INFINITY
+galera:0 promotion score on galera-bundle-0: -1
+galera:1 promotion score on galera-bundle-1: 100
+galera:2 promotion score on galera-bundle-2: 100
+native_color: galera-bundle-0 allocation score on controller-0: INFINITY
+native_color: galera-bundle-0 allocation score on controller-1: 0
+native_color: galera-bundle-0 allocation score on controller-2: 0
+native_color: galera-bundle-0 allocation score on galera-bundle-0: -INFINITY
+native_color: galera-bundle-0 allocation score on galera-bundle-1: -INFINITY
+native_color: galera-bundle-0 allocation score on galera-bundle-2: -INFINITY
+native_color: galera-bundle-0 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: galera-bundle-0 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: galera-bundle-0 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: galera-bundle-1 allocation score on controller-0: 0
+native_color: galera-bundle-1 allocation score on controller-1: INFINITY
+native_color: galera-bundle-1 allocation score on controller-2: 0
+native_color: galera-bundle-1 allocation score on galera-bundle-0: -INFINITY
+native_color: galera-bundle-1 allocation score on galera-bundle-1: -INFINITY
+native_color: galera-bundle-1 allocation score on galera-bundle-2: -INFINITY
+native_color: galera-bundle-1 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: galera-bundle-1 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: galera-bundle-1 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: galera-bundle-2 allocation score on controller-0: 0
+native_color: galera-bundle-2 allocation score on controller-1: 0
+native_color: galera-bundle-2 allocation score on controller-2: INFINITY
+native_color: galera-bundle-2 allocation score on galera-bundle-0: -INFINITY
+native_color: galera-bundle-2 allocation score on galera-bundle-1: -INFINITY
+native_color: galera-bundle-2 allocation score on galera-bundle-2: -INFINITY
+native_color: galera-bundle-2 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: galera-bundle-2 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: galera-bundle-2 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: galera-bundle-docker-0 allocation score on controller-0: -INFINITY
+native_color: galera-bundle-docker-0 allocation score on controller-1: -INFINITY
+native_color: galera-bundle-docker-0 allocation score on controller-2: -INFINITY
+native_color: galera-bundle-docker-0 allocation score on galera-bundle-0: -INFINITY
+native_color: galera-bundle-docker-0 allocation score on galera-bundle-1: -INFINITY
+native_color: galera-bundle-docker-0 allocation score on galera-bundle-2: -INFINITY
+native_color: galera-bundle-docker-0 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: galera-bundle-docker-0 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: galera-bundle-docker-0 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: galera-bundle-docker-1 allocation score on controller-0: -INFINITY
+native_color: galera-bundle-docker-1 allocation score on controller-1: INFINITY
+native_color: galera-bundle-docker-1 allocation score on controller-2: 0
+native_color: galera-bundle-docker-1 allocation score on galera-bundle-0: -INFINITY
+native_color: galera-bundle-docker-1 allocation score on galera-bundle-1: -INFINITY
+native_color: galera-bundle-docker-1 allocation score on galera-bundle-2: -INFINITY
+native_color: galera-bundle-docker-1 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: galera-bundle-docker-1 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: galera-bundle-docker-1 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: galera-bundle-docker-2 allocation score on controller-0: -INFINITY
+native_color: galera-bundle-docker-2 allocation score on controller-1: -INFINITY
+native_color: galera-bundle-docker-2 allocation score on controller-2: INFINITY
+native_color: galera-bundle-docker-2 allocation score on galera-bundle-0: -INFINITY
+native_color: galera-bundle-docker-2 allocation score on galera-bundle-1: -INFINITY
+native_color: galera-bundle-docker-2 allocation score on galera-bundle-2: -INFINITY
+native_color: galera-bundle-docker-2 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: galera-bundle-docker-2 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: galera-bundle-docker-2 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: galera:0 allocation score on controller-0: -INFINITY
+native_color: galera:0 allocation score on controller-1: -INFINITY
+native_color: galera:0 allocation score on controller-2: -INFINITY
+native_color: galera:0 allocation score on galera-bundle-0: INFINITY
+native_color: galera:0 allocation score on galera-bundle-1: -INFINITY
+native_color: galera:0 allocation score on galera-bundle-2: -INFINITY
+native_color: galera:0 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: galera:0 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: galera:0 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: galera:1 allocation score on controller-0: -INFINITY
+native_color: galera:1 allocation score on controller-1: -INFINITY
+native_color: galera:1 allocation score on controller-2: -INFINITY
+native_color: galera:1 allocation score on galera-bundle-0: -INFINITY
+native_color: galera:1 allocation score on galera-bundle-1: INFINITY
+native_color: galera:1 allocation score on galera-bundle-2: -INFINITY
+native_color: galera:1 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: galera:1 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: galera:1 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: galera:2 allocation score on controller-0: -INFINITY
+native_color: galera:2 allocation score on controller-1: -INFINITY
+native_color: galera:2 allocation score on controller-2: -INFINITY
+native_color: galera:2 allocation score on galera-bundle-0: -INFINITY
+native_color: galera:2 allocation score on galera-bundle-1: -INFINITY
+native_color: galera:2 allocation score on galera-bundle-2: INFINITY
+native_color: galera:2 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: galera:2 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: galera:2 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: haproxy-bundle-docker-0 allocation score on controller-0: -INFINITY
+native_color: haproxy-bundle-docker-0 allocation score on controller-1: -INFINITY
+native_color: haproxy-bundle-docker-0 allocation score on controller-2: -INFINITY
+native_color: haproxy-bundle-docker-0 allocation score on galera-bundle-0: -INFINITY
+native_color: haproxy-bundle-docker-0 allocation score on galera-bundle-1: -INFINITY
+native_color: haproxy-bundle-docker-0 allocation score on galera-bundle-2: -INFINITY
+native_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: haproxy-bundle-docker-0 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: haproxy-bundle-docker-0 allocation score on redis-bundle-0: -INFINITY
+native_color: haproxy-bundle-docker-0 allocation score on redis-bundle-1: -INFINITY
+native_color: haproxy-bundle-docker-0 allocation score on redis-bundle-2: -INFINITY
+native_color: haproxy-bundle-docker-1 allocation score on controller-0: -INFINITY
+native_color: haproxy-bundle-docker-1 allocation score on controller-1: 0
+native_color: haproxy-bundle-docker-1 allocation score on controller-2: INFINITY
+native_color: haproxy-bundle-docker-1 allocation score on galera-bundle-0: -INFINITY
+native_color: haproxy-bundle-docker-1 allocation score on galera-bundle-1: -INFINITY
+native_color: haproxy-bundle-docker-1 allocation score on galera-bundle-2: -INFINITY
+native_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: haproxy-bundle-docker-1 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: haproxy-bundle-docker-1 allocation score on redis-bundle-0: -INFINITY
+native_color: haproxy-bundle-docker-1 allocation score on redis-bundle-1: -INFINITY
+native_color: haproxy-bundle-docker-1 allocation score on redis-bundle-2: -INFINITY
+native_color: haproxy-bundle-docker-2 allocation score on controller-0: -INFINITY
+native_color: haproxy-bundle-docker-2 allocation score on controller-1: INFINITY
+native_color: haproxy-bundle-docker-2 allocation score on controller-2: -INFINITY
+native_color: haproxy-bundle-docker-2 allocation score on galera-bundle-0: -INFINITY
+native_color: haproxy-bundle-docker-2 allocation score on galera-bundle-1: -INFINITY
+native_color: haproxy-bundle-docker-2 allocation score on galera-bundle-2: -INFINITY
+native_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: haproxy-bundle-docker-2 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: haproxy-bundle-docker-2 allocation score on redis-bundle-0: -INFINITY
+native_color: haproxy-bundle-docker-2 allocation score on redis-bundle-1: -INFINITY
+native_color: haproxy-bundle-docker-2 allocation score on redis-bundle-2: -INFINITY
+native_color: ip-10.0.0.109 allocation score on controller-0: -INFINITY
+native_color: ip-10.0.0.109 allocation score on controller-1: 0
+native_color: ip-10.0.0.109 allocation score on controller-2: 0
+native_color: ip-10.0.0.109 allocation score on galera-bundle-0: -INFINITY
+native_color: ip-10.0.0.109 allocation score on galera-bundle-1: -INFINITY
+native_color: ip-10.0.0.109 allocation score on galera-bundle-2: -INFINITY
+native_color: ip-10.0.0.109 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: ip-10.0.0.109 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: ip-10.0.0.109 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: ip-10.0.0.109 allocation score on redis-bundle-0: -INFINITY
+native_color: ip-10.0.0.109 allocation score on redis-bundle-1: -INFINITY
+native_color: ip-10.0.0.109 allocation score on redis-bundle-2: -INFINITY
+native_color: ip-172.17.1.14 allocation score on controller-0: -INFINITY
+native_color: ip-172.17.1.14 allocation score on controller-1: 0
+native_color: ip-172.17.1.14 allocation score on controller-2: INFINITY
+native_color: ip-172.17.1.14 allocation score on galera-bundle-0: -INFINITY
+native_color: ip-172.17.1.14 allocation score on galera-bundle-1: -INFINITY
+native_color: ip-172.17.1.14 allocation score on galera-bundle-2: -INFINITY
+native_color: ip-172.17.1.14 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: ip-172.17.1.14 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: ip-172.17.1.14 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: ip-172.17.1.14 allocation score on redis-bundle-0: -INFINITY
+native_color: ip-172.17.1.14 allocation score on redis-bundle-1: -INFINITY
+native_color: ip-172.17.1.14 allocation score on redis-bundle-2: -INFINITY
+native_color: ip-172.17.1.19 allocation score on controller-0: -INFINITY
+native_color: ip-172.17.1.19 allocation score on controller-1: 0
+native_color: ip-172.17.1.19 allocation score on controller-2: INFINITY
+native_color: ip-172.17.1.19 allocation score on galera-bundle-0: -INFINITY
+native_color: ip-172.17.1.19 allocation score on galera-bundle-1: -INFINITY
+native_color: ip-172.17.1.19 allocation score on galera-bundle-2: -INFINITY
+native_color: ip-172.17.1.19 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: ip-172.17.1.19 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: ip-172.17.1.19 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: ip-172.17.1.19 allocation score on redis-bundle-0: -INFINITY
+native_color: ip-172.17.1.19 allocation score on redis-bundle-1: -INFINITY
+native_color: ip-172.17.1.19 allocation score on redis-bundle-2: -INFINITY
+native_color: ip-172.17.3.19 allocation score on controller-0: -INFINITY
+native_color: ip-172.17.3.19 allocation score on controller-1: 0
+native_color: ip-172.17.3.19 allocation score on controller-2: INFINITY
+native_color: ip-172.17.3.19 allocation score on galera-bundle-0: -INFINITY
+native_color: ip-172.17.3.19 allocation score on galera-bundle-1: -INFINITY
+native_color: ip-172.17.3.19 allocation score on galera-bundle-2: -INFINITY
+native_color: ip-172.17.3.19 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: ip-172.17.3.19 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: ip-172.17.3.19 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: ip-172.17.3.19 allocation score on redis-bundle-0: -INFINITY
+native_color: ip-172.17.3.19 allocation score on redis-bundle-1: -INFINITY
+native_color: ip-172.17.3.19 allocation score on redis-bundle-2: -INFINITY
+native_color: ip-172.17.4.11 allocation score on controller-0: -INFINITY
+native_color: ip-172.17.4.11 allocation score on controller-1: 0
+native_color: ip-172.17.4.11 allocation score on controller-2: 0
+native_color: ip-172.17.4.11 allocation score on galera-bundle-0: -INFINITY
+native_color: ip-172.17.4.11 allocation score on galera-bundle-1: -INFINITY
+native_color: ip-172.17.4.11 allocation score on galera-bundle-2: -INFINITY
+native_color: ip-172.17.4.11 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: ip-172.17.4.11 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: ip-172.17.4.11 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: ip-172.17.4.11 allocation score on redis-bundle-0: -INFINITY
+native_color: ip-172.17.4.11 allocation score on redis-bundle-1: -INFINITY
+native_color: ip-172.17.4.11 allocation score on redis-bundle-2: -INFINITY
+native_color: ip-192.168.24.7 allocation score on controller-0: -INFINITY
+native_color: ip-192.168.24.7 allocation score on controller-1: 0
+native_color: ip-192.168.24.7 allocation score on controller-2: 0
+native_color: ip-192.168.24.7 allocation score on galera-bundle-0: -INFINITY
+native_color: ip-192.168.24.7 allocation score on galera-bundle-1: -INFINITY
+native_color: ip-192.168.24.7 allocation score on galera-bundle-2: -INFINITY
+native_color: ip-192.168.24.7 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: ip-192.168.24.7 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: ip-192.168.24.7 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: ip-192.168.24.7 allocation score on redis-bundle-0: -INFINITY
+native_color: ip-192.168.24.7 allocation score on redis-bundle-1: -INFINITY
+native_color: ip-192.168.24.7 allocation score on redis-bundle-2: -INFINITY
+native_color: openstack-cinder-volume allocation score on controller-0: 0
+native_color: openstack-cinder-volume allocation score on controller-1: 0
+native_color: openstack-cinder-volume allocation score on controller-2: INFINITY
+native_color: openstack-cinder-volume allocation score on galera-bundle-0: -INFINITY
+native_color: openstack-cinder-volume allocation score on galera-bundle-1: -INFINITY
+native_color: openstack-cinder-volume allocation score on galera-bundle-2: -INFINITY
+native_color: openstack-cinder-volume allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: openstack-cinder-volume allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: openstack-cinder-volume allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: openstack-cinder-volume allocation score on redis-bundle-0: -INFINITY
+native_color: openstack-cinder-volume allocation score on redis-bundle-1: -INFINITY
+native_color: openstack-cinder-volume allocation score on redis-bundle-2: -INFINITY
+native_color: rabbitmq-bundle-0 allocation score on controller-0: INFINITY
+native_color: rabbitmq-bundle-0 allocation score on controller-1: 0
+native_color: rabbitmq-bundle-0 allocation score on controller-2: 0
+native_color: rabbitmq-bundle-0 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: rabbitmq-bundle-0 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: rabbitmq-bundle-0 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: rabbitmq-bundle-1 allocation score on controller-0: 0
+native_color: rabbitmq-bundle-1 allocation score on controller-1: INFINITY
+native_color: rabbitmq-bundle-1 allocation score on controller-2: 0
+native_color: rabbitmq-bundle-1 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: rabbitmq-bundle-1 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: rabbitmq-bundle-1 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: rabbitmq-bundle-2 allocation score on controller-0: 0
+native_color: rabbitmq-bundle-2 allocation score on controller-1: 0
+native_color: rabbitmq-bundle-2 allocation score on controller-2: INFINITY
+native_color: rabbitmq-bundle-2 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: rabbitmq-bundle-2 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: rabbitmq-bundle-2 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: rabbitmq-bundle-docker-0 allocation score on controller-0: -INFINITY
+native_color: rabbitmq-bundle-docker-0 allocation score on controller-1: -INFINITY
+native_color: rabbitmq-bundle-docker-0 allocation score on controller-2: -INFINITY
+native_color: rabbitmq-bundle-docker-0 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: rabbitmq-bundle-docker-0 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: rabbitmq-bundle-docker-0 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: rabbitmq-bundle-docker-1 allocation score on controller-0: -INFINITY
+native_color: rabbitmq-bundle-docker-1 allocation score on controller-1: INFINITY
+native_color: rabbitmq-bundle-docker-1 allocation score on controller-2: 0
+native_color: rabbitmq-bundle-docker-1 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: rabbitmq-bundle-docker-1 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: rabbitmq-bundle-docker-1 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: rabbitmq-bundle-docker-2 allocation score on controller-0: -INFINITY
+native_color: rabbitmq-bundle-docker-2 allocation score on controller-1: -INFINITY
+native_color: rabbitmq-bundle-docker-2 allocation score on controller-2: INFINITY
+native_color: rabbitmq-bundle-docker-2 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: rabbitmq-bundle-docker-2 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: rabbitmq-bundle-docker-2 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: rabbitmq:0 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:0 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:0 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:0 allocation score on rabbitmq-bundle-0: INFINITY
+native_color: rabbitmq:0 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: rabbitmq:0 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: rabbitmq:1 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:1 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:1 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:1 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: rabbitmq:1 allocation score on rabbitmq-bundle-1: INFINITY
+native_color: rabbitmq:1 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: rabbitmq:2 allocation score on controller-0: -INFINITY
+native_color: rabbitmq:2 allocation score on controller-1: -INFINITY
+native_color: rabbitmq:2 allocation score on controller-2: -INFINITY
+native_color: rabbitmq:2 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: rabbitmq:2 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: rabbitmq:2 allocation score on rabbitmq-bundle-2: INFINITY
+native_color: redis-bundle-0 allocation score on controller-0: INFINITY
+native_color: redis-bundle-0 allocation score on controller-1: 0
+native_color: redis-bundle-0 allocation score on controller-2: 0
+native_color: redis-bundle-0 allocation score on galera-bundle-0: -INFINITY
+native_color: redis-bundle-0 allocation score on galera-bundle-1: -INFINITY
+native_color: redis-bundle-0 allocation score on galera-bundle-2: -INFINITY
+native_color: redis-bundle-0 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: redis-bundle-0 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: redis-bundle-0 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: redis-bundle-0 allocation score on redis-bundle-0: -INFINITY
+native_color: redis-bundle-0 allocation score on redis-bundle-1: -INFINITY
+native_color: redis-bundle-0 allocation score on redis-bundle-2: -INFINITY
+native_color: redis-bundle-1 allocation score on controller-0: 0
+native_color: redis-bundle-1 allocation score on controller-1: INFINITY
+native_color: redis-bundle-1 allocation score on controller-2: 0
+native_color: redis-bundle-1 allocation score on galera-bundle-0: -INFINITY
+native_color: redis-bundle-1 allocation score on galera-bundle-1: -INFINITY
+native_color: redis-bundle-1 allocation score on galera-bundle-2: -INFINITY
+native_color: redis-bundle-1 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: redis-bundle-1 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: redis-bundle-1 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: redis-bundle-1 allocation score on redis-bundle-0: -INFINITY
+native_color: redis-bundle-1 allocation score on redis-bundle-1: -INFINITY
+native_color: redis-bundle-1 allocation score on redis-bundle-2: -INFINITY
+native_color: redis-bundle-2 allocation score on controller-0: 0
+native_color: redis-bundle-2 allocation score on controller-1: 0
+native_color: redis-bundle-2 allocation score on controller-2: INFINITY
+native_color: redis-bundle-2 allocation score on galera-bundle-0: -INFINITY
+native_color: redis-bundle-2 allocation score on galera-bundle-1: -INFINITY
+native_color: redis-bundle-2 allocation score on galera-bundle-2: -INFINITY
+native_color: redis-bundle-2 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: redis-bundle-2 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: redis-bundle-2 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: redis-bundle-2 allocation score on redis-bundle-0: -INFINITY
+native_color: redis-bundle-2 allocation score on redis-bundle-1: -INFINITY
+native_color: redis-bundle-2 allocation score on redis-bundle-2: -INFINITY
+native_color: redis-bundle-docker-0 allocation score on controller-0: -INFINITY
+native_color: redis-bundle-docker-0 allocation score on controller-1: -INFINITY
+native_color: redis-bundle-docker-0 allocation score on controller-2: -INFINITY
+native_color: redis-bundle-docker-0 allocation score on galera-bundle-0: -INFINITY
+native_color: redis-bundle-docker-0 allocation score on galera-bundle-1: -INFINITY
+native_color: redis-bundle-docker-0 allocation score on galera-bundle-2: -INFINITY
+native_color: redis-bundle-docker-0 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: redis-bundle-docker-0 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: redis-bundle-docker-0 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: redis-bundle-docker-0 allocation score on redis-bundle-0: -INFINITY
+native_color: redis-bundle-docker-0 allocation score on redis-bundle-1: -INFINITY
+native_color: redis-bundle-docker-0 allocation score on redis-bundle-2: -INFINITY
+native_color: redis-bundle-docker-1 allocation score on controller-0: -INFINITY
+native_color: redis-bundle-docker-1 allocation score on controller-1: INFINITY
+native_color: redis-bundle-docker-1 allocation score on controller-2: 0
+native_color: redis-bundle-docker-1 allocation score on galera-bundle-0: -INFINITY
+native_color: redis-bundle-docker-1 allocation score on galera-bundle-1: -INFINITY
+native_color: redis-bundle-docker-1 allocation score on galera-bundle-2: -INFINITY
+native_color: redis-bundle-docker-1 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: redis-bundle-docker-1 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: redis-bundle-docker-1 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: redis-bundle-docker-1 allocation score on redis-bundle-0: -INFINITY
+native_color: redis-bundle-docker-1 allocation score on redis-bundle-1: -INFINITY
+native_color: redis-bundle-docker-1 allocation score on redis-bundle-2: -INFINITY
+native_color: redis-bundle-docker-2 allocation score on controller-0: -INFINITY
+native_color: redis-bundle-docker-2 allocation score on controller-1: -INFINITY
+native_color: redis-bundle-docker-2 allocation score on controller-2: INFINITY
+native_color: redis-bundle-docker-2 allocation score on galera-bundle-0: -INFINITY
+native_color: redis-bundle-docker-2 allocation score on galera-bundle-1: -INFINITY
+native_color: redis-bundle-docker-2 allocation score on galera-bundle-2: -INFINITY
+native_color: redis-bundle-docker-2 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: redis-bundle-docker-2 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: redis-bundle-docker-2 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: redis-bundle-docker-2 allocation score on redis-bundle-0: -INFINITY
+native_color: redis-bundle-docker-2 allocation score on redis-bundle-1: -INFINITY
+native_color: redis-bundle-docker-2 allocation score on redis-bundle-2: -INFINITY
+native_color: redis:0 allocation score on controller-0: -INFINITY
+native_color: redis:0 allocation score on controller-1: -INFINITY
+native_color: redis:0 allocation score on controller-2: -INFINITY
+native_color: redis:0 allocation score on galera-bundle-0: -INFINITY
+native_color: redis:0 allocation score on galera-bundle-1: -INFINITY
+native_color: redis:0 allocation score on galera-bundle-2: -INFINITY
+native_color: redis:0 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: redis:0 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: redis:0 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: redis:0 allocation score on redis-bundle-0: INFINITY
+native_color: redis:0 allocation score on redis-bundle-1: -INFINITY
+native_color: redis:0 allocation score on redis-bundle-2: -INFINITY
+native_color: redis:1 allocation score on controller-0: -INFINITY
+native_color: redis:1 allocation score on controller-1: -INFINITY
+native_color: redis:1 allocation score on controller-2: -INFINITY
+native_color: redis:1 allocation score on galera-bundle-0: -INFINITY
+native_color: redis:1 allocation score on galera-bundle-1: -INFINITY
+native_color: redis:1 allocation score on galera-bundle-2: -INFINITY
+native_color: redis:1 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: redis:1 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: redis:1 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: redis:1 allocation score on redis-bundle-0: -INFINITY
+native_color: redis:1 allocation score on redis-bundle-1: INFINITY
+native_color: redis:1 allocation score on redis-bundle-2: -INFINITY
+native_color: redis:2 allocation score on controller-0: -INFINITY
+native_color: redis:2 allocation score on controller-1: -INFINITY
+native_color: redis:2 allocation score on controller-2: -INFINITY
+native_color: redis:2 allocation score on galera-bundle-0: -INFINITY
+native_color: redis:2 allocation score on galera-bundle-1: -INFINITY
+native_color: redis:2 allocation score on galera-bundle-2: -INFINITY
+native_color: redis:2 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: redis:2 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: redis:2 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: redis:2 allocation score on redis-bundle-0: -INFINITY
+native_color: redis:2 allocation score on redis-bundle-1: -INFINITY
+native_color: redis:2 allocation score on redis-bundle-2: INFINITY
+native_color: stonith-fence_ipmilan-5254000dcb3f allocation score on controller-0: INFINITY
+native_color: stonith-fence_ipmilan-5254000dcb3f allocation score on controller-1: -INFINITY
+native_color: stonith-fence_ipmilan-5254000dcb3f allocation score on controller-2: 0
+native_color: stonith-fence_ipmilan-5254000dcb3f allocation score on galera-bundle-0: -INFINITY
+native_color: stonith-fence_ipmilan-5254000dcb3f allocation score on galera-bundle-1: -INFINITY
+native_color: stonith-fence_ipmilan-5254000dcb3f allocation score on galera-bundle-2: -INFINITY
+native_color: stonith-fence_ipmilan-5254000dcb3f allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: stonith-fence_ipmilan-5254000dcb3f allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: stonith-fence_ipmilan-5254000dcb3f allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: stonith-fence_ipmilan-5254000dcb3f allocation score on redis-bundle-0: -INFINITY
+native_color: stonith-fence_ipmilan-5254000dcb3f allocation score on redis-bundle-1: -INFINITY
+native_color: stonith-fence_ipmilan-5254000dcb3f allocation score on redis-bundle-2: -INFINITY
+native_color: stonith-fence_ipmilan-5254003e8e97 allocation score on controller-0: INFINITY
+native_color: stonith-fence_ipmilan-5254003e8e97 allocation score on controller-1: 0
+native_color: stonith-fence_ipmilan-5254003e8e97 allocation score on controller-2: -INFINITY
+native_color: stonith-fence_ipmilan-5254003e8e97 allocation score on galera-bundle-0: -INFINITY
+native_color: stonith-fence_ipmilan-5254003e8e97 allocation score on galera-bundle-1: -INFINITY
+native_color: stonith-fence_ipmilan-5254003e8e97 allocation score on galera-bundle-2: -INFINITY
+native_color: stonith-fence_ipmilan-5254003e8e97 allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: stonith-fence_ipmilan-5254003e8e97 allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: stonith-fence_ipmilan-5254003e8e97 allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: stonith-fence_ipmilan-5254003e8e97 allocation score on redis-bundle-0: -INFINITY
+native_color: stonith-fence_ipmilan-5254003e8e97 allocation score on redis-bundle-1: -INFINITY
+native_color: stonith-fence_ipmilan-5254003e8e97 allocation score on redis-bundle-2: -INFINITY
+native_color: stonith-fence_ipmilan-525400efba5c allocation score on controller-0: -INFINITY
+native_color: stonith-fence_ipmilan-525400efba5c allocation score on controller-1: 0
+native_color: stonith-fence_ipmilan-525400efba5c allocation score on controller-2: INFINITY
+native_color: stonith-fence_ipmilan-525400efba5c allocation score on galera-bundle-0: -INFINITY
+native_color: stonith-fence_ipmilan-525400efba5c allocation score on galera-bundle-1: -INFINITY
+native_color: stonith-fence_ipmilan-525400efba5c allocation score on galera-bundle-2: -INFINITY
+native_color: stonith-fence_ipmilan-525400efba5c allocation score on rabbitmq-bundle-0: -INFINITY
+native_color: stonith-fence_ipmilan-525400efba5c allocation score on rabbitmq-bundle-1: -INFINITY
+native_color: stonith-fence_ipmilan-525400efba5c allocation score on rabbitmq-bundle-2: -INFINITY
+native_color: stonith-fence_ipmilan-525400efba5c allocation score on redis-bundle-0: -INFINITY
+native_color: stonith-fence_ipmilan-525400efba5c allocation score on redis-bundle-1: -INFINITY
+native_color: stonith-fence_ipmilan-525400efba5c allocation score on redis-bundle-2: -INFINITY
+redis:0 promotion score on redis-bundle-0: -1
+redis:1 promotion score on redis-bundle-1: 1
+redis:2 promotion score on redis-bundle-2: 1
diff --git a/pengine/test10/bundle-order-fencing.summary b/pengine/test10/bundle-order-fencing.summary
new file mode 100644
index 0000000..e2128cb
--- /dev/null
+++ b/pengine/test10/bundle-order-fencing.summary
@@ -0,0 +1,222 @@
+Using the original execution date of: 2017-09-12 10:51:59Z
+
+Current cluster status:
+Node controller-0 (1): UNCLEAN (offline)
+Online: [ controller-1 controller-2 ]
+Containers: [ galera-bundle-1:galera-bundle-docker-1 galera-bundle-2:galera-bundle-docker-2 rabbitmq-bundle-1:rabbitmq-bundle-docker-1 rabbitmq-bundle-2:rabbitmq-bundle-docker-2 redis-bundle-1:redis-bundle-docker-1 redis-bundle-2:redis-bundle-docker-2 ]
+
+ Docker container set: rabbitmq-bundle [192.168.24.1:8787/rhosp12/openstack-rabbitmq-docker:pcmklatest]
+   rabbitmq-bundle-0	(ocf::heartbeat:rabbitmq-cluster):	FAILED controller-0 (UNCLEAN)
+   rabbitmq-bundle-1	(ocf::heartbeat:rabbitmq-cluster):	Started controller-1
+   rabbitmq-bundle-2	(ocf::heartbeat:rabbitmq-cluster):	Started controller-2
+ Docker container set: galera-bundle [192.168.24.1:8787/rhosp12/openstack-mariadb-docker:pcmklatest]
+   galera-bundle-0	(ocf::heartbeat:galera):	FAILED Master controller-0 (UNCLEAN)
+   galera-bundle-1	(ocf::heartbeat:galera):	Master controller-1
+   galera-bundle-2	(ocf::heartbeat:galera):	Master controller-2
+ Docker container set: redis-bundle [192.168.24.1:8787/rhosp12/openstack-redis-docker:pcmklatest]
+   redis-bundle-0	(ocf::heartbeat:redis):	FAILED Master controller-0 (UNCLEAN)
+   redis-bundle-1	(ocf::heartbeat:redis):	Slave controller-1
+   redis-bundle-2	(ocf::heartbeat:redis):	Slave controller-2
+ ip-192.168.24.7	(ocf::heartbeat:IPaddr2):	Started controller-0 (UNCLEAN)
+ ip-10.0.0.109	(ocf::heartbeat:IPaddr2):	Started controller-0 (UNCLEAN)
+ ip-172.17.1.14	(ocf::heartbeat:IPaddr2):	Started controller-2
+ ip-172.17.1.19	(ocf::heartbeat:IPaddr2):	Started controller-2
+ ip-172.17.3.19	(ocf::heartbeat:IPaddr2):	Started controller-2
+ ip-172.17.4.11	(ocf::heartbeat:IPaddr2):	Started controller-0 (UNCLEAN)
+ Docker container set: haproxy-bundle [192.168.24.1:8787/rhosp12/openstack-haproxy-docker:pcmklatest]
+   haproxy-bundle-docker-0	(ocf::heartbeat:docker):	Started controller-0 (UNCLEAN)
+   haproxy-bundle-docker-1	(ocf::heartbeat:docker):	Started controller-2
+   haproxy-bundle-docker-2	(ocf::heartbeat:docker):	Started controller-1
+ openstack-cinder-volume	(systemd:openstack-cinder-volume):	Started controller-2
+ stonith-fence_ipmilan-525400efba5c	(stonith:fence_ipmilan):	Started controller-2
+ stonith-fence_ipmilan-5254003e8e97	(stonith:fence_ipmilan):	Started controller-0 (UNCLEAN)
+ stonith-fence_ipmilan-5254000dcb3f	(stonith:fence_ipmilan):	Started controller-0 (UNCLEAN)
+
+Transition Summary:
+ * Fence (off) redis-bundle-0 (resource: redis-bundle-docker-0) 'guest is unclean'
+ * Fence (off) rabbitmq-bundle-0 (resource: rabbitmq-bundle-docker-0) 'guest is unclean'
+ * Fence (off) galera-bundle-0 (resource: galera-bundle-docker-0) 'guest is unclean'
+ * Fence (reboot) controller-0 'peer is no longer part of the cluster'
+ * Stop       rabbitmq-bundle-docker-0               (                   controller-0 )   due to node availability
+ * Stop       rabbitmq-bundle-0                      (                   controller-0 )   due to unrunnable rabbitmq-bundle-docker-0 start
+ * Stop       rabbitmq:0                             (              rabbitmq-bundle-0 )   due to unrunnable rabbitmq-bundle-docker-0 start
+ * Stop       galera-bundle-docker-0                 (                   controller-0 )   due to node availability
+ * Stop       galera-bundle-0                        (                   controller-0 )   due to unrunnable galera-bundle-docker-0 start
+ * Stop       galera:0                               (         Master galera-bundle-0 )   due to unrunnable galera-bundle-docker-0 start
+ * Stop       redis-bundle-docker-0                  (                   controller-0 )   due to node availability
+ * Stop       redis-bundle-0                         (                   controller-0 )   due to unrunnable redis-bundle-docker-0 start
+ * Stop       redis:0                                (          Master redis-bundle-0 )   due to unrunnable redis-bundle-docker-0 start
+ * Promote    redis:1                                ( Slave -> Master redis-bundle-1 )  
+ * Move       ip-192.168.24.7                        (   controller-0 -> controller-2 )  
+ * Move       ip-10.0.0.109                          (   controller-0 -> controller-1 )  
+ * Move       ip-172.17.4.11                         (   controller-0 -> controller-1 )  
+ * Stop       haproxy-bundle-docker-0                (                   controller-0 )   due to node availability
+ * Move       stonith-fence_ipmilan-5254003e8e97     (   controller-0 -> controller-1 )  
+ * Move       stonith-fence_ipmilan-5254000dcb3f     (   controller-0 -> controller-2 )  
+
+Executing cluster transition:
+ * Pseudo action:   rabbitmq-bundle-clone_pre_notify_stop_0
+ * Resource action: redis           cancel=45000 on redis-bundle-1
+ * Resource action: redis           cancel=60000 on redis-bundle-1
+ * Pseudo action:   redis-bundle-master_pre_notify_demote_0
+ * Pseudo action:   stonith-fence_ipmilan-5254003e8e97_stop_0
+ * Pseudo action:   stonith-fence_ipmilan-5254000dcb3f_stop_0
+ * Pseudo action:   haproxy-bundle_stop_0
+ * Pseudo action:   redis-bundle_demote_0
+ * Pseudo action:   galera-bundle_demote_0
+ * Pseudo action:   rabbitmq-bundle_stop_0
+ * Pseudo action:   rabbitmq-bundle_start_0
+ * Fencing controller-0 (reboot)
+ * Resource action: rabbitmq        notify on rabbitmq-bundle-1
+ * Resource action: rabbitmq        notify on rabbitmq-bundle-2
+ * Pseudo action:   rabbitmq-bundle-clone_confirmed-pre_notify_stop_0
+ * Pseudo action:   rabbitmq-bundle-0_stop_0
+ * Pseudo action:   galera-bundle-master_demote_0
+ * Pseudo action:   galera-bundle-0_stop_0
+ * Resource action: redis           notify on redis-bundle-1
+ * Resource action: redis           notify on redis-bundle-2
+ * Pseudo action:   redis-bundle-master_confirmed-pre_notify_demote_0
+ * Pseudo action:   redis-bundle-master_demote_0
+ * Pseudo action:   redis-bundle-0_stop_0
+ * Pseudo action:   haproxy-bundle-docker-0_stop_0
+ * Pseudo action:   stonith-redis-bundle-0-off on redis-bundle-0
+ * Pseudo action:   stonith-rabbitmq-bundle-0-off on rabbitmq-bundle-0
+ * Pseudo action:   stonith-galera-bundle-0-off on galera-bundle-0
+ * Pseudo action:   stonith_complete
+ * Pseudo action:   haproxy-bundle_stopped_0
+ * Pseudo action:   rabbitmq_post_notify_stop_0
+ * Pseudo action:   rabbitmq-bundle-clone_stop_0
+ * Pseudo action:   rabbitmq-bundle-docker-0_stop_0
+ * Pseudo action:   galera_demote_0
+ * Pseudo action:   galera-bundle-master_demoted_0
+ * Pseudo action:   redis_post_notify_stop_0
+ * Pseudo action:   redis_demote_0
+ * Pseudo action:   redis-bundle-master_demoted_0
+ * Pseudo action:   ip-192.168.24.7_stop_0
+ * Pseudo action:   ip-10.0.0.109_stop_0
+ * Pseudo action:   ip-172.17.4.11_stop_0
+ * Pseudo action:   galera-bundle_demoted_0
+ * Pseudo action:   galera-bundle_stop_0
+ * Pseudo action:   rabbitmq_stop_0
+ * Pseudo action:   rabbitmq-bundle-clone_stopped_0
+ * Pseudo action:   galera-bundle-master_stop_0
+ * Pseudo action:   galera-bundle-docker-0_stop_0
+ * Pseudo action:   redis-bundle-master_post_notify_demoted_0
+ * Resource action: ip-192.168.24.7 start on controller-2
+ * Resource action: ip-10.0.0.109   start on controller-1
+ * Resource action: ip-172.17.4.11  start on controller-1
+ * Pseudo action:   rabbitmq-bundle-clone_post_notify_stopped_0
+ * Pseudo action:   galera_stop_0
+ * Pseudo action:   galera-bundle-master_stopped_0
+ * Resource action: redis           notify on redis-bundle-1
+ * Resource action: redis           notify on redis-bundle-2
+ * Pseudo action:   redis-bundle-master_confirmed-post_notify_demoted_0
+ * Pseudo action:   redis-bundle-master_pre_notify_stop_0
+ * Resource action: ip-192.168.24.7 monitor=10000 on controller-2
+ * Resource action: ip-10.0.0.109   monitor=10000 on controller-1
+ * Resource action: ip-172.17.4.11  monitor=10000 on controller-1
+ * Pseudo action:   redis-bundle_demoted_0
+ * Pseudo action:   redis-bundle_stop_0
+ * Pseudo action:   galera-bundle_stopped_0
+ * Pseudo action:   galera-bundle_start_0
+ * Resource action: rabbitmq        notify on rabbitmq-bundle-1
+ * Resource action: rabbitmq        notify on rabbitmq-bundle-2
+ * Pseudo action:   rabbitmq-bundle-clone_confirmed-post_notify_stopped_0
+ * Pseudo action:   rabbitmq-bundle-clone_pre_notify_start_0
+ * Pseudo action:   galera-bundle-master_start_0
+ * Resource action: redis           notify on redis-bundle-1
+ * Resource action: redis           notify on redis-bundle-2
+ * Pseudo action:   redis-bundle-master_confirmed-pre_notify_stop_0
+ * Pseudo action:   redis-bundle-master_stop_0
+ * Pseudo action:   redis-bundle-docker-0_stop_0
+ * Pseudo action:   rabbitmq-bundle_stopped_0
+ * Pseudo action:   rabbitmq_notified_0
+ * Resource action: rabbitmq        notify on rabbitmq-bundle-1
+ * Resource action: rabbitmq        notify on rabbitmq-bundle-2
+ * Pseudo action:   rabbitmq-bundle-clone_confirmed-pre_notify_start_0
+ * Pseudo action:   rabbitmq-bundle-clone_start_0
+ * Pseudo action:   galera-bundle-master_running_0
+ * Pseudo action:   redis_stop_0
+ * Pseudo action:   redis-bundle-master_stopped_0
+ * Pseudo action:   galera-bundle_running_0
+ * Pseudo action:   rabbitmq-bundle-clone_running_0
+ * Pseudo action:   redis-bundle-master_post_notify_stopped_0
+ * Pseudo action:   rabbitmq-bundle-clone_post_notify_running_0
+ * Resource action: redis           notify on redis-bundle-1
+ * Resource action: redis           notify on redis-bundle-2
+ * Pseudo action:   redis-bundle-master_confirmed-post_notify_stopped_0
+ * Pseudo action:   redis-bundle-master_pre_notify_start_0
+ * Pseudo action:   redis-bundle_stopped_0
+ * Pseudo action:   redis-bundle_start_0
+ * Resource action: rabbitmq        notify on rabbitmq-bundle-0
+ * Resource action: rabbitmq        notify on rabbitmq-bundle-1
+ * Resource action: rabbitmq        notify on rabbitmq-bundle-2
+ * Pseudo action:   rabbitmq-bundle-clone_confirmed-post_notify_running_0
+ * Pseudo action:   redis_notified_0
+ * Resource action: redis           notify on redis-bundle-1
+ * Resource action: redis           notify on redis-bundle-2
+ * Pseudo action:   redis-bundle-master_confirmed-pre_notify_start_0
+ * Pseudo action:   redis-bundle-master_start_0
+ * Pseudo action:   rabbitmq-bundle_running_0
+ * Pseudo action:   all_stopped
+ * Pseudo action:   redis-bundle-master_running_0
+ * Resource action: stonith-fence_ipmilan-5254003e8e97 start on controller-1
+ * Resource action: stonith-fence_ipmilan-5254000dcb3f start on controller-2
+ * Pseudo action:   redis-bundle-master_post_notify_running_0
+ * Resource action: stonith-fence_ipmilan-5254003e8e97 monitor=60000 on controller-1
+ * Resource action: stonith-fence_ipmilan-5254000dcb3f monitor=60000 on controller-2
+ * Resource action: redis           notify on redis-bundle-0
+ * Resource action: redis           notify on redis-bundle-1
+ * Resource action: redis           notify on redis-bundle-2
+ * Pseudo action:   redis-bundle-master_confirmed-post_notify_running_0
+ * Pseudo action:   redis-bundle_running_0
+ * Pseudo action:   redis-bundle-master_pre_notify_promote_0
+ * Pseudo action:   redis-bundle_promote_0
+ * Resource action: redis           notify on redis-bundle-0
+ * Resource action: redis           notify on redis-bundle-1
+ * Resource action: redis           notify on redis-bundle-2
+ * Pseudo action:   redis-bundle-master_confirmed-pre_notify_promote_0
+ * Pseudo action:   redis-bundle-master_promote_0
+ * Resource action: redis           promote on redis-bundle-1
+ * Pseudo action:   redis-bundle-master_promoted_0
+ * Pseudo action:   redis-bundle-master_post_notify_promoted_0
+ * Resource action: redis           notify on redis-bundle-0
+ * Resource action: redis           notify on redis-bundle-1
+ * Resource action: redis           notify on redis-bundle-2
+ * Pseudo action:   redis-bundle-master_confirmed-post_notify_promoted_0
+ * Pseudo action:   redis-bundle_promoted_0
+ * Resource action: redis           monitor=20000 on redis-bundle-1
+Using the original execution date of: 2017-09-12 10:51:59Z
+
+Revised cluster status:
+Online: [ controller-1 controller-2 ]
+OFFLINE: [ controller-0 ]
+Containers: [ galera-bundle-1:galera-bundle-docker-1 galera-bundle-2:galera-bundle-docker-2 rabbitmq-bundle-1:rabbitmq-bundle-docker-1 rabbitmq-bundle-2:rabbitmq-bundle-docker-2 redis-bundle-1:redis-bundle-docker-1 redis-bundle-2:redis-bundle-docker-2 ]
+
+ Docker container set: rabbitmq-bundle [192.168.24.1:8787/rhosp12/openstack-rabbitmq-docker:pcmklatest]
+   rabbitmq-bundle-0	(ocf::heartbeat:rabbitmq-cluster):	FAILED
+   rabbitmq-bundle-1	(ocf::heartbeat:rabbitmq-cluster):	Started controller-1
+   rabbitmq-bundle-2	(ocf::heartbeat:rabbitmq-cluster):	Started controller-2
+ Docker container set: galera-bundle [192.168.24.1:8787/rhosp12/openstack-mariadb-docker:pcmklatest]
+   galera-bundle-0	(ocf::heartbeat:galera):	FAILED Master
+   galera-bundle-1	(ocf::heartbeat:galera):	Master controller-1
+   galera-bundle-2	(ocf::heartbeat:galera):	Master controller-2
+ Docker container set: redis-bundle [192.168.24.1:8787/rhosp12/openstack-redis-docker:pcmklatest]
+   redis-bundle-0	(ocf::heartbeat:redis):	FAILED Master
+   redis-bundle-1	(ocf::heartbeat:redis):	Master controller-1
+   redis-bundle-2	(ocf::heartbeat:redis):	Slave controller-2
+ ip-192.168.24.7	(ocf::heartbeat:IPaddr2):	Started controller-2
+ ip-10.0.0.109	(ocf::heartbeat:IPaddr2):	Started controller-1
+ ip-172.17.1.14	(ocf::heartbeat:IPaddr2):	Started controller-2
+ ip-172.17.1.19	(ocf::heartbeat:IPaddr2):	Started controller-2
+ ip-172.17.3.19	(ocf::heartbeat:IPaddr2):	Started controller-2
+ ip-172.17.4.11	(ocf::heartbeat:IPaddr2):	Started controller-1
+ Docker container set: haproxy-bundle [192.168.24.1:8787/rhosp12/openstack-haproxy-docker:pcmklatest]
+   haproxy-bundle-docker-0	(ocf::heartbeat:docker):	Stopped
+   haproxy-bundle-docker-1	(ocf::heartbeat:docker):	Started controller-2
+   haproxy-bundle-docker-2	(ocf::heartbeat:docker):	Started controller-1
+ openstack-cinder-volume	(systemd:openstack-cinder-volume):	Started controller-2
+ stonith-fence_ipmilan-525400efba5c	(stonith:fence_ipmilan):	Started controller-2
+ stonith-fence_ipmilan-5254003e8e97	(stonith:fence_ipmilan):	Started controller-1
+ stonith-fence_ipmilan-5254000dcb3f	(stonith:fence_ipmilan):	Started controller-2
+
diff --git a/pengine/test10/bundle-order-fencing.xml b/pengine/test10/bundle-order-fencing.xml
new file mode 100644
index 0000000..b303116
--- /dev/null
+++ b/pengine/test10/bundle-order-fencing.xml
@@ -0,0 +1,799 @@
+<cib crm_feature_set="3.0.12" validate-with="pacemaker-2.8" epoch="126" num_updates="91" admin_epoch="0" cib-last-written="Tue Sep 12 10:20:22 2017" update-origin="controller-0" update-client="crm_attribute" update-user="redis-bundle-0" have-quorum="1" dc-uuid="3" execution-date="1505213519">
+  <configuration>
+    <crm_config>
+      <cluster_property_set id="cib-bootstrap-options">
+        <nvpair id="cib-bootstrap-options-have-watchdog" name="have-watchdog" value="false"/>
+        <nvpair id="cib-bootstrap-options-dc-version" name="dc-version" value="1.1.16-12.12.el7-94ff4df"/>
+        <nvpair id="cib-bootstrap-options-cluster-infrastructure" name="cluster-infrastructure" value="corosync"/>
+        <nvpair id="cib-bootstrap-options-cluster-name" name="cluster-name" value="tripleo_cluster"/>
+        <nvpair id="cib-bootstrap-options-stonith-enabled" name="stonith-enabled" value="true"/>
+        <nvpair id="cib-bootstrap-options-last-lrm-refresh" name="last-lrm-refresh" value="1505141561"/>
+        <nvpair id="cib-bootstrap-options-cluster-recheck-interval" name="cluster-recheck-interval" value="15m"/>
+      </cluster_property_set>
+      <cluster_property_set id="redis_replication">
+        <nvpair id="redis_replication-redis_REPL_INFO" name="redis_REPL_INFO" value="controller-0"/>
+      </cluster_property_set>
+    </crm_config>
+    <nodes>
+      <node id="1" uname="controller-0">
+        <instance_attributes id="nodes-1">
+          <nvpair id="nodes-1-cinder-volume-role" name="cinder-volume-role" value="true"/>
+          <nvpair id="nodes-1-rabbitmq-role" name="rabbitmq-role" value="true"/>
+          <nvpair id="nodes-1-galera-role" name="galera-role" value="true"/>
+          <nvpair id="nodes-1-redis-role" name="redis-role" value="true"/>
+          <nvpair id="nodes-1-haproxy-role" name="haproxy-role" value="true"/>
+          <nvpair id="nodes-1-rmq-node-attr-last-known-rabbitmq" name="rmq-node-attr-last-known-rabbitmq" value="rabbit@controller-0"/>
+        </instance_attributes>
+      </node>
+      <node id="2" uname="controller-1">
+        <instance_attributes id="nodes-2">
+          <nvpair id="nodes-2-cinder-volume-role" name="cinder-volume-role" value="true"/>
+          <nvpair id="nodes-2-rabbitmq-role" name="rabbitmq-role" value="true"/>
+          <nvpair id="nodes-2-galera-role" name="galera-role" value="true"/>
+          <nvpair id="nodes-2-redis-role" name="redis-role" value="true"/>
+          <nvpair id="nodes-2-haproxy-role" name="haproxy-role" value="true"/>
+          <nvpair id="nodes-2-rmq-node-attr-last-known-rabbitmq" name="rmq-node-attr-last-known-rabbitmq" value="rabbit@controller-1"/>
+        </instance_attributes>
+      </node>
+      <node id="3" uname="controller-2">
+        <instance_attributes id="nodes-3">
+          <nvpair id="nodes-3-cinder-volume-role" name="cinder-volume-role" value="true"/>
+          <nvpair id="nodes-3-rabbitmq-role" name="rabbitmq-role" value="true"/>
+          <nvpair id="nodes-3-galera-role" name="galera-role" value="true"/>
+          <nvpair id="nodes-3-redis-role" name="redis-role" value="true"/>
+          <nvpair id="nodes-3-haproxy-role" name="haproxy-role" value="true"/>
+          <nvpair id="nodes-3-rmq-node-attr-last-known-rabbitmq" name="rmq-node-attr-last-known-rabbitmq" value="rabbit@controller-2"/>
+        </instance_attributes>
+      </node>
+      <node id="rabbitmq-bundle-0" type="remote" uname="rabbitmq-bundle-0">
+        <instance_attributes id="nodes-rabbitmq-bundle-0">
+          <nvpair id="nodes-rabbitmq-bundle-0-rmq-node-attr-last-known-rabbitmq" name="rmq-node-attr-last-known-rabbitmq" value="rabbit@controller-0"/>
+        </instance_attributes>
+      </node>
+      <node id="rabbitmq-bundle-1" type="remote" uname="rabbitmq-bundle-1">
+        <instance_attributes id="nodes-rabbitmq-bundle-1">
+          <nvpair id="nodes-rabbitmq-bundle-1-rmq-node-attr-last-known-rabbitmq" name="rmq-node-attr-last-known-rabbitmq" value="rabbit@controller-1"/>
+        </instance_attributes>
+      </node>
+      <node id="rabbitmq-bundle-2" type="remote" uname="rabbitmq-bundle-2">
+        <instance_attributes id="nodes-rabbitmq-bundle-2">
+          <nvpair id="nodes-rabbitmq-bundle-2-rmq-node-attr-last-known-rabbitmq" name="rmq-node-attr-last-known-rabbitmq" value="rabbit@controller-2"/>
+        </instance_attributes>
+      </node>
+    </nodes>
+    <resources>
+      <bundle id="rabbitmq-bundle">
+        <docker image="192.168.24.1:8787/rhosp12/openstack-rabbitmq-docker:pcmklatest" network="host" options="--user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS" replicas="3" run-command="/bin/bash /usr/local/bin/kolla_start"/>
+        <network control-port="3122"/>
+        <storage>
+          <storage-mapping id="rabbitmq-cfg-files" options="ro" source-dir="/var/lib/kolla/config_files/rabbitmq.json" target-dir="/var/lib/kolla/config_files/config.json"/>
+          <storage-mapping id="rabbitmq-cfg-data" options="ro" source-dir="/var/lib/config-data/puppet-generated/rabbitmq/" target-dir="/var/lib/kolla/config_files/src"/>
+          <storage-mapping id="rabbitmq-hosts" options="ro" source-dir="/etc/hosts" target-dir="/etc/hosts"/>
+          <storage-mapping id="rabbitmq-localtime" options="ro" source-dir="/etc/localtime" target-dir="/etc/localtime"/>
+          <storage-mapping id="rabbitmq-lib" options="rw" source-dir="/var/lib/rabbitmq" target-dir="/var/lib/rabbitmq"/>
+          <storage-mapping id="rabbitmq-pki-extracted" options="ro" source-dir="/etc/pki/ca-trust/extracted" target-dir="/etc/pki/ca-trust/extracted"/>
+          <storage-mapping id="rabbitmq-pki-ca-bundle-crt" options="ro" source-dir="/etc/pki/tls/certs/ca-bundle.crt" target-dir="/etc/pki/tls/certs/ca-bundle.crt"/>
+          <storage-mapping id="rabbitmq-pki-ca-bundle-trust-crt" options="ro" source-dir="/etc/pki/tls/certs/ca-bundle.trust.crt" target-dir="/etc/pki/tls/certs/ca-bundle.trust.crt"/>
+          <storage-mapping id="rabbitmq-pki-cert" options="ro" source-dir="/etc/pki/tls/cert.pem" target-dir="/etc/pki/tls/cert.pem"/>
+          <storage-mapping id="rabbitmq-dev-log" options="rw" source-dir="/dev/log" target-dir="/dev/log"/>
+        </storage>
+        <primitive class="ocf" id="rabbitmq" provider="heartbeat" type="rabbitmq-cluster">
+          <instance_attributes id="rabbitmq-instance_attributes">
+            <nvpair id="rabbitmq-instance_attributes-set_policy" name="set_policy" value="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+          </instance_attributes>
+          <meta_attributes id="rabbitmq-meta_attributes">
+            <nvpair id="rabbitmq-meta_attributes-notify" name="notify" value="true"/>
+            <nvpair id="rabbitmq-meta_attributes-container-attribute-target" name="container-attribute-target" value="host"/>
+          </meta_attributes>
+          <operations>
+            <op id="rabbitmq-monitor-interval-10" interval="10" name="monitor" timeout="40"/>
+            <op id="rabbitmq-start-interval-0s" interval="0s" name="start" timeout="200s"/>
+            <op id="rabbitmq-stop-interval-0s" interval="0s" name="stop" timeout="200s"/>
+          </operations>
+        </primitive>
+      </bundle>
+      <bundle id="galera-bundle">
+        <docker image="192.168.24.1:8787/rhosp12/openstack-mariadb-docker:pcmklatest" masters="3" network="host" options="--user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS" replicas="3" run-command="/bin/bash /usr/local/bin/kolla_start"/>
+        <network control-port="3123"/>
+        <storage>
+          <storage-mapping id="mysql-cfg-files" options="ro" source-dir="/var/lib/kolla/config_files/mysql.json" target-dir="/var/lib/kolla/config_files/config.json"/>
+          <storage-mapping id="mysql-cfg-data" options="ro" source-dir="/var/lib/config-data/puppet-generated/mysql/" target-dir="/var/lib/kolla/config_files/src"/>
+          <storage-mapping id="mysql-hosts" options="ro" source-dir="/etc/hosts" target-dir="/etc/hosts"/>
+          <storage-mapping id="mysql-localtime" options="ro" source-dir="/etc/localtime" target-dir="/etc/localtime"/>
+          <storage-mapping id="mysql-lib" options="rw" source-dir="/var/lib/mysql" target-dir="/var/lib/mysql"/>
+          <storage-mapping id="mysql-log-mariadb" options="rw" source-dir="/var/log/mariadb" target-dir="/var/log/mariadb"/>
+          <storage-mapping id="mysql-dev-log" options="rw" source-dir="/dev/log" target-dir="/dev/log"/>
+        </storage>
+        <primitive class="ocf" id="galera" provider="heartbeat" type="galera">
+          <instance_attributes id="galera-instance_attributes">
+            <nvpair id="galera-instance_attributes-additional_parameters" name="additional_parameters" value="--open-files-limit=16384"/>
+            <nvpair id="galera-instance_attributes-cluster_host_map" name="cluster_host_map" value="controller-0:controller-0.internalapi.localdomain;controller-1:controller-1.internalapi.localdomain;controller-2:controller-2.internalapi.localdomain"/>
+            <nvpair id="galera-instance_attributes-enable_creation" name="enable_creation" value="true"/>
+            <nvpair id="galera-instance_attributes-wsrep_cluster_address" name="wsrep_cluster_address" value="gcomm://controller-0.internalapi.localdomain,controller-1.internalapi.localdomain,controller-2.internalapi.localdomain"/>
+          </instance_attributes>
+          <meta_attributes id="galera-meta_attributes">
+            <nvpair id="galera-meta_attributes-master-max" name="master-max" value="3"/>
+            <nvpair id="galera-meta_attributes-ordered" name="ordered" value="true"/>
+            <nvpair id="galera-meta_attributes-container-attribute-target" name="container-attribute-target" value="host"/>
+          </meta_attributes>
+          <operations>
+            <op id="galera-demote-interval-0s" interval="0s" name="demote" timeout="120"/>
+            <op id="galera-monitor-interval-20" interval="20" name="monitor" timeout="30"/>
+            <op id="galera-monitor-interval-10" interval="10" name="monitor" role="Master" timeout="30"/>
+            <op id="galera-monitor-interval-30" interval="30" name="monitor" role="Slave" timeout="30"/>
+            <op id="galera-promote-interval-0s" interval="0s" name="promote" on-fail="block" timeout="300s"/>
+            <op id="galera-start-interval-0s" interval="0s" name="start" timeout="120"/>
+            <op id="galera-stop-interval-0s" interval="0s" name="stop" timeout="120"/>
+          </operations>
+        </primitive>
+      </bundle>
+      <bundle id="redis-bundle">
+        <docker image="192.168.24.1:8787/rhosp12/openstack-redis-docker:pcmklatest" masters="1" network="host" options="--user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS" replicas="3" run-command="/bin/bash /usr/local/bin/kolla_start"/>
+        <network control-port="3124"/>
+        <storage>
+          <storage-mapping id="redis-cfg-files" options="ro" source-dir="/var/lib/kolla/config_files/redis.json" target-dir="/var/lib/kolla/config_files/config.json"/>
+          <storage-mapping id="redis-cfg-data-redis" options="ro" source-dir="/var/lib/config-data/puppet-generated/redis/" target-dir="/var/lib/kolla/config_files/src"/>
+          <storage-mapping id="redis-hosts" options="ro" source-dir="/etc/hosts" target-dir="/etc/hosts"/>
+          <storage-mapping id="redis-localtime" options="ro" source-dir="/etc/localtime" target-dir="/etc/localtime"/>
+          <storage-mapping id="redis-lib" options="rw" source-dir="/var/lib/redis" target-dir="/var/lib/redis"/>
+          <storage-mapping id="redis-log" options="rw" source-dir="/var/log/redis" target-dir="/var/log/redis"/>
+          <storage-mapping id="redis-run" options="rw" source-dir="/var/run/redis" target-dir="/var/run/redis"/>
+          <storage-mapping id="redis-pki-extracted" options="ro" source-dir="/etc/pki/ca-trust/extracted" target-dir="/etc/pki/ca-trust/extracted"/>
+          <storage-mapping id="redis-pki-ca-bundle-crt" options="ro" source-dir="/etc/pki/tls/certs/ca-bundle.crt" target-dir="/etc/pki/tls/certs/ca-bundle.crt"/>
+          <storage-mapping id="redis-pki-ca-bundle-trust-crt" options="ro" source-dir="/etc/pki/tls/certs/ca-bundle.trust.crt" target-dir="/etc/pki/tls/certs/ca-bundle.trust.crt"/>
+          <storage-mapping id="redis-pki-cert" options="ro" source-dir="/etc/pki/tls/cert.pem" target-dir="/etc/pki/tls/cert.pem"/>
+          <storage-mapping id="redis-dev-log" options="rw" source-dir="/dev/log" target-dir="/dev/log"/>
+        </storage>
+        <primitive class="ocf" id="redis" provider="heartbeat" type="redis">
+          <instance_attributes id="redis-instance_attributes">
+            <nvpair id="redis-instance_attributes-wait_last_known_master" name="wait_last_known_master" value="true"/>
+          </instance_attributes>
+          <meta_attributes id="redis-meta_attributes">
+            <nvpair id="redis-meta_attributes-interleave" name="interleave" value="true"/>
+            <nvpair id="redis-meta_attributes-notify" name="notify" value="true"/>
+            <nvpair id="redis-meta_attributes-ordered" name="ordered" value="true"/>
+            <nvpair id="redis-meta_attributes-container-attribute-target" name="container-attribute-target" value="host"/>
+          </meta_attributes>
+          <operations>
+            <op id="redis-demote-interval-0s" interval="0s" name="demote" timeout="120"/>
+            <op id="redis-monitor-interval-45" interval="45" name="monitor" timeout="60"/>
+            <op id="redis-monitor-interval-20" interval="20" name="monitor" role="Master" timeout="60"/>
+            <op id="redis-monitor-interval-60" interval="60" name="monitor" role="Slave" timeout="60"/>
+            <op id="redis-promote-interval-0s" interval="0s" name="promote" timeout="120"/>
+            <op id="redis-start-interval-0s" interval="0s" name="start" timeout="200s"/>
+            <op id="redis-stop-interval-0s" interval="0s" name="stop" timeout="200s"/>
+          </operations>
+        </primitive>
+      </bundle>
+      <primitive class="ocf" id="ip-192.168.24.7" provider="heartbeat" type="IPaddr2">
+        <instance_attributes id="ip-192.168.24.7-instance_attributes">
+          <nvpair id="ip-192.168.24.7-instance_attributes-cidr_netmask" name="cidr_netmask" value="32"/>
+          <nvpair id="ip-192.168.24.7-instance_attributes-ip" name="ip" value="192.168.24.7"/>
+        </instance_attributes>
+        <operations>
+          <op id="ip-192.168.24.7-monitor-interval-10s" interval="10s" name="monitor" timeout="20s"/>
+          <op id="ip-192.168.24.7-start-interval-0s" interval="0s" name="start" timeout="20s"/>
+          <op id="ip-192.168.24.7-stop-interval-0s" interval="0s" name="stop" timeout="20s"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="ip-10.0.0.109" provider="heartbeat" type="IPaddr2">
+        <instance_attributes id="ip-10.0.0.109-instance_attributes">
+          <nvpair id="ip-10.0.0.109-instance_attributes-cidr_netmask" name="cidr_netmask" value="32"/>
+          <nvpair id="ip-10.0.0.109-instance_attributes-ip" name="ip" value="10.0.0.109"/>
+        </instance_attributes>
+        <operations>
+          <op id="ip-10.0.0.109-monitor-interval-10s" interval="10s" name="monitor" timeout="20s"/>
+          <op id="ip-10.0.0.109-start-interval-0s" interval="0s" name="start" timeout="20s"/>
+          <op id="ip-10.0.0.109-stop-interval-0s" interval="0s" name="stop" timeout="20s"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="ip-172.17.1.14" provider="heartbeat" type="IPaddr2">
+        <instance_attributes id="ip-172.17.1.14-instance_attributes">
+          <nvpair id="ip-172.17.1.14-instance_attributes-cidr_netmask" name="cidr_netmask" value="32"/>
+          <nvpair id="ip-172.17.1.14-instance_attributes-ip" name="ip" value="172.17.1.14"/>
+        </instance_attributes>
+        <operations>
+          <op id="ip-172.17.1.14-monitor-interval-10s" interval="10s" name="monitor" timeout="20s"/>
+          <op id="ip-172.17.1.14-start-interval-0s" interval="0s" name="start" timeout="20s"/>
+          <op id="ip-172.17.1.14-stop-interval-0s" interval="0s" name="stop" timeout="20s"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="ip-172.17.1.19" provider="heartbeat" type="IPaddr2">
+        <instance_attributes id="ip-172.17.1.19-instance_attributes">
+          <nvpair id="ip-172.17.1.19-instance_attributes-cidr_netmask" name="cidr_netmask" value="32"/>
+          <nvpair id="ip-172.17.1.19-instance_attributes-ip" name="ip" value="172.17.1.19"/>
+        </instance_attributes>
+        <operations>
+          <op id="ip-172.17.1.19-monitor-interval-10s" interval="10s" name="monitor" timeout="20s"/>
+          <op id="ip-172.17.1.19-start-interval-0s" interval="0s" name="start" timeout="20s"/>
+          <op id="ip-172.17.1.19-stop-interval-0s" interval="0s" name="stop" timeout="20s"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="ip-172.17.3.19" provider="heartbeat" type="IPaddr2">
+        <instance_attributes id="ip-172.17.3.19-instance_attributes">
+          <nvpair id="ip-172.17.3.19-instance_attributes-cidr_netmask" name="cidr_netmask" value="32"/>
+          <nvpair id="ip-172.17.3.19-instance_attributes-ip" name="ip" value="172.17.3.19"/>
+        </instance_attributes>
+        <operations>
+          <op id="ip-172.17.3.19-monitor-interval-10s" interval="10s" name="monitor" timeout="20s"/>
+          <op id="ip-172.17.3.19-start-interval-0s" interval="0s" name="start" timeout="20s"/>
+          <op id="ip-172.17.3.19-stop-interval-0s" interval="0s" name="stop" timeout="20s"/>
+        </operations>
+      </primitive>
+      <primitive class="ocf" id="ip-172.17.4.11" provider="heartbeat" type="IPaddr2">
+        <instance_attributes id="ip-172.17.4.11-instance_attributes">
+          <nvpair id="ip-172.17.4.11-instance_attributes-cidr_netmask" name="cidr_netmask" value="32"/>
+          <nvpair id="ip-172.17.4.11-instance_attributes-ip" name="ip" value="172.17.4.11"/>
+        </instance_attributes>
+        <operations>
+          <op id="ip-172.17.4.11-monitor-interval-10s" interval="10s" name="monitor" timeout="20s"/>
+          <op id="ip-172.17.4.11-start-interval-0s" interval="0s" name="start" timeout="20s"/>
+          <op id="ip-172.17.4.11-stop-interval-0s" interval="0s" name="stop" timeout="20s"/>
+        </operations>
+      </primitive>
+      <bundle id="haproxy-bundle">
+        <docker image="192.168.24.1:8787/rhosp12/openstack-haproxy-docker:pcmklatest" network="host" options="--user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS" replicas="3" run-command="/bin/bash /usr/local/bin/kolla_start"/>
+        <storage>
+          <storage-mapping id="haproxy-cfg-files" options="ro" source-dir="/var/lib/kolla/config_files/haproxy.json" target-dir="/var/lib/kolla/config_files/config.json"/>
+          <storage-mapping id="haproxy-cfg-data" options="ro" source-dir="/var/lib/config-data/puppet-generated/haproxy/" target-dir="/var/lib/kolla/config_files/src"/>
+          <storage-mapping id="haproxy-hosts" options="ro" source-dir="/etc/hosts" target-dir="/etc/hosts"/>
+          <storage-mapping id="haproxy-localtime" options="ro" source-dir="/etc/localtime" target-dir="/etc/localtime"/>
+          <storage-mapping id="haproxy-pki-extracted" options="ro" source-dir="/etc/pki/ca-trust/extracted" target-dir="/etc/pki/ca-trust/extracted"/>
+          <storage-mapping id="haproxy-pki-ca-bundle-crt" options="ro" source-dir="/etc/pki/tls/certs/ca-bundle.crt" target-dir="/etc/pki/tls/certs/ca-bundle.crt"/>
+          <storage-mapping id="haproxy-pki-ca-bundle-trust-crt" options="ro" source-dir="/etc/pki/tls/certs/ca-bundle.trust.crt" target-dir="/etc/pki/tls/certs/ca-bundle.trust.crt"/>
+          <storage-mapping id="haproxy-pki-cert" options="ro" source-dir="/etc/pki/tls/cert.pem" target-dir="/etc/pki/tls/cert.pem"/>
+          <storage-mapping id="haproxy-dev-log" options="rw" source-dir="/dev/log" target-dir="/dev/log"/>
+        </storage>
+      </bundle>
+      <primitive class="systemd" id="openstack-cinder-volume" type="openstack-cinder-volume">
+        <operations>
+          <op id="openstack-cinder-volume-monitor-interval-60" interval="60" name="monitor" timeout="100"/>
+          <op id="openstack-cinder-volume-start-interval-0s" interval="0s" name="start" timeout="200s"/>
+          <op id="openstack-cinder-volume-stop-interval-0s" interval="0s" name="stop" timeout="200s"/>
+        </operations>
+      </primitive>
+      <primitive class="stonith" id="stonith-fence_ipmilan-525400efba5c" type="fence_ipmilan">
+        <instance_attributes id="stonith-fence_ipmilan-525400efba5c-instance_attributes">
+          <nvpair id="stonith-fence_ipmilan-525400efba5c-instance_attributes-action" name="action" value="reboot"/>
+          <nvpair id="stonith-fence_ipmilan-525400efba5c-instance_attributes-ipaddr" name="ipaddr" value="172.16.0.1"/>
+          <nvpair id="stonith-fence_ipmilan-525400efba5c-instance_attributes-ipport" name="ipport" value="6232"/>
+          <nvpair id="stonith-fence_ipmilan-525400efba5c-instance_attributes-lanplus" name="lanplus" value="true"/>
+          <nvpair id="stonith-fence_ipmilan-525400efba5c-instance_attributes-login" name="login" value="admin"/>
+          <nvpair id="stonith-fence_ipmilan-525400efba5c-instance_attributes-passwd" name="passwd" value="password"/>
+          <nvpair id="stonith-fence_ipmilan-525400efba5c-instance_attributes-pcmk_host_list" name="pcmk_host_list" value="controller-0"/>
+          <nvpair id="stonith-fence_ipmilan-525400efba5c-instance_attributes-privlvl" name="privlvl" value="administrator"/>
+        </instance_attributes>
+        <operations>
+          <op id="stonith-fence_ipmilan-525400efba5c-monitor-interval-60s" interval="60s" name="monitor"/>
+        </operations>
+      </primitive>
+      <primitive class="stonith" id="stonith-fence_ipmilan-5254003e8e97" type="fence_ipmilan">
+        <instance_attributes id="stonith-fence_ipmilan-5254003e8e97-instance_attributes">
+          <nvpair id="stonith-fence_ipmilan-5254003e8e97-instance_attributes-action" name="action" value="reboot"/>
+          <nvpair id="stonith-fence_ipmilan-5254003e8e97-instance_attributes-ipaddr" name="ipaddr" value="172.16.0.1"/>
+          <nvpair id="stonith-fence_ipmilan-5254003e8e97-instance_attributes-ipport" name="ipport" value="6231"/>
+          <nvpair id="stonith-fence_ipmilan-5254003e8e97-instance_attributes-lanplus" name="lanplus" value="true"/>
+          <nvpair id="stonith-fence_ipmilan-5254003e8e97-instance_attributes-login" name="login" value="admin"/>
+          <nvpair id="stonith-fence_ipmilan-5254003e8e97-instance_attributes-passwd" name="passwd" value="password"/>
+          <nvpair id="stonith-fence_ipmilan-5254003e8e97-instance_attributes-pcmk_host_list" name="pcmk_host_list" value="controller-2"/>
+          <nvpair id="stonith-fence_ipmilan-5254003e8e97-instance_attributes-privlvl" name="privlvl" value="administrator"/>
+        </instance_attributes>
+        <operations>
+          <op id="stonith-fence_ipmilan-5254003e8e97-monitor-interval-60s" interval="60s" name="monitor"/>
+        </operations>
+      </primitive>
+      <primitive class="stonith" id="stonith-fence_ipmilan-5254000dcb3f" type="fence_ipmilan">
+        <instance_attributes id="stonith-fence_ipmilan-5254000dcb3f-instance_attributes">
+          <nvpair id="stonith-fence_ipmilan-5254000dcb3f-instance_attributes-action" name="action" value="reboot"/>
+          <nvpair id="stonith-fence_ipmilan-5254000dcb3f-instance_attributes-ipaddr" name="ipaddr" value="172.16.0.1"/>
+          <nvpair id="stonith-fence_ipmilan-5254000dcb3f-instance_attributes-ipport" name="ipport" value="6230"/>
+          <nvpair id="stonith-fence_ipmilan-5254000dcb3f-instance_attributes-lanplus" name="lanplus" value="true"/>
+          <nvpair id="stonith-fence_ipmilan-5254000dcb3f-instance_attributes-login" name="login" value="admin"/>
+          <nvpair id="stonith-fence_ipmilan-5254000dcb3f-instance_attributes-passwd" name="passwd" value="password"/>
+          <nvpair id="stonith-fence_ipmilan-5254000dcb3f-instance_attributes-pcmk_host_list" name="pcmk_host_list" value="controller-1"/>
+          <nvpair id="stonith-fence_ipmilan-5254000dcb3f-instance_attributes-privlvl" name="privlvl" value="administrator"/>
+        </instance_attributes>
+        <operations>
+          <op id="stonith-fence_ipmilan-5254000dcb3f-monitor-interval-60s" interval="60s" name="monitor"/>
+        </operations>
+      </primitive>
+    </resources>
+    <constraints>
+      <rsc_location id="location-rabbitmq-bundle" resource-discovery="exclusive" rsc="rabbitmq-bundle">
+        <rule id="location-rabbitmq-bundle-rule" score="0">
+          <expression attribute="rabbitmq-role" id="location-rabbitmq-bundle-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-galera-bundle" resource-discovery="exclusive" rsc="galera-bundle">
+        <rule id="location-galera-bundle-rule" score="0">
+          <expression attribute="galera-role" id="location-galera-bundle-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-redis-bundle" resource-discovery="exclusive" rsc="redis-bundle">
+        <rule id="location-redis-bundle-rule" score="0">
+          <expression attribute="redis-role" id="location-redis-bundle-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-ip-192.168.24.7" resource-discovery="exclusive" rsc="ip-192.168.24.7">
+        <rule id="location-ip-192.168.24.7-rule" score="0">
+          <expression attribute="haproxy-role" id="location-ip-192.168.24.7-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-ip-10.0.0.109" resource-discovery="exclusive" rsc="ip-10.0.0.109">
+        <rule id="location-ip-10.0.0.109-rule" score="0">
+          <expression attribute="haproxy-role" id="location-ip-10.0.0.109-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-ip-172.17.1.14" resource-discovery="exclusive" rsc="ip-172.17.1.14">
+        <rule id="location-ip-172.17.1.14-rule" score="0">
+          <expression attribute="haproxy-role" id="location-ip-172.17.1.14-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-ip-172.17.1.19" resource-discovery="exclusive" rsc="ip-172.17.1.19">
+        <rule id="location-ip-172.17.1.19-rule" score="0">
+          <expression attribute="haproxy-role" id="location-ip-172.17.1.19-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-ip-172.17.3.19" resource-discovery="exclusive" rsc="ip-172.17.3.19">
+        <rule id="location-ip-172.17.3.19-rule" score="0">
+          <expression attribute="haproxy-role" id="location-ip-172.17.3.19-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-ip-172.17.4.11" resource-discovery="exclusive" rsc="ip-172.17.4.11">
+        <rule id="location-ip-172.17.4.11-rule" score="0">
+          <expression attribute="haproxy-role" id="location-ip-172.17.4.11-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-haproxy-bundle" resource-discovery="exclusive" rsc="haproxy-bundle">
+        <rule id="location-haproxy-bundle-rule" score="0">
+          <expression attribute="haproxy-role" id="location-haproxy-bundle-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_order first="ip-192.168.24.7" first-action="start" id="order-ip-192.168.24.7-haproxy-bundle-Optional" kind="Optional" then="haproxy-bundle" then-action="start"/>
+      <rsc_colocation id="colocation-ip-192.168.24.7-haproxy-bundle-INFINITY" rsc="ip-192.168.24.7" score="INFINITY" with-rsc="haproxy-bundle"/>
+      <rsc_order first="ip-10.0.0.109" first-action="start" id="order-ip-10.0.0.109-haproxy-bundle-Optional" kind="Optional" then="haproxy-bundle" then-action="start"/>
+      <rsc_colocation id="colocation-ip-10.0.0.109-haproxy-bundle-INFINITY" rsc="ip-10.0.0.109" score="INFINITY" with-rsc="haproxy-bundle"/>
+      <rsc_order first="ip-172.17.1.14" first-action="start" id="order-ip-172.17.1.14-haproxy-bundle-Optional" kind="Optional" then="haproxy-bundle" then-action="start"/>
+      <rsc_colocation id="colocation-ip-172.17.1.14-haproxy-bundle-INFINITY" rsc="ip-172.17.1.14" score="INFINITY" with-rsc="haproxy-bundle"/>
+      <rsc_order first="ip-172.17.1.19" first-action="start" id="order-ip-172.17.1.19-haproxy-bundle-Optional" kind="Optional" then="haproxy-bundle" then-action="start"/>
+      <rsc_colocation id="colocation-ip-172.17.1.19-haproxy-bundle-INFINITY" rsc="ip-172.17.1.19" score="INFINITY" with-rsc="haproxy-bundle"/>
+      <rsc_order first="ip-172.17.3.19" first-action="start" id="order-ip-172.17.3.19-haproxy-bundle-Optional" kind="Optional" then="haproxy-bundle" then-action="start"/>
+      <rsc_colocation id="colocation-ip-172.17.3.19-haproxy-bundle-INFINITY" rsc="ip-172.17.3.19" score="INFINITY" with-rsc="haproxy-bundle"/>
+      <rsc_order first="ip-172.17.4.11" first-action="start" id="order-ip-172.17.4.11-haproxy-bundle-Optional" kind="Optional" then="haproxy-bundle" then-action="start"/>
+      <rsc_colocation id="colocation-ip-172.17.4.11-haproxy-bundle-INFINITY" rsc="ip-172.17.4.11" score="INFINITY" with-rsc="haproxy-bundle"/>
+      <rsc_location id="location-openstack-cinder-volume" resource-discovery="exclusive" rsc="openstack-cinder-volume">
+        <rule id="location-openstack-cinder-volume-rule" score="0">
+          <expression attribute="cinder-volume-role" id="location-openstack-cinder-volume-rule-expr" operation="eq" value="true"/>
+        </rule>
+      </rsc_location>
+      <rsc_location id="location-stonith-fence_ipmilan-525400efba5c-controller-0--INFINITY" node="controller-0" rsc="stonith-fence_ipmilan-525400efba5c" score="-INFINITY"/>
+      <rsc_location id="location-stonith-fence_ipmilan-5254003e8e97-controller-2--INFINITY" node="controller-2" rsc="stonith-fence_ipmilan-5254003e8e97" score="-INFINITY"/>
+      <rsc_location id="location-stonith-fence_ipmilan-5254000dcb3f-controller-1--INFINITY" node="controller-1" rsc="stonith-fence_ipmilan-5254000dcb3f" score="-INFINITY"/>
+    </constraints>
+    <rsc_defaults>
+      <meta_attributes id="rsc_defaults-options">
+        <nvpair id="rsc_defaults-options-resource-stickiness" name="resource-stickiness" value="INFINITY"/>
+      </meta_attributes>
+    </rsc_defaults>
+  </configuration>
+  <status>
+    <node_state id="3" uname="controller-2" in_ccm="true" crmd="online" crm-debug-origin="do_state_transition" join="member" expected="member">
+      <transient_attributes id="3">
+        <instance_attributes id="status-3">
+          <nvpair id="status-3-shutdown" name="shutdown" value="0"/>
+          <nvpair id="status-3-master-galera" name="master-galera" value="100"/>
+          <nvpair id="status-3-rmq-node-attr-rabbitmq" name="rmq-node-attr-rabbitmq" value="rabbit@controller-2"/>
+          <nvpair id="status-3-master-redis" name="master-redis" value="1"/>
+        </instance_attributes>
+      </transient_attributes>
+      <lrm id="3">
+        <lrm_resources>
+          <lrm_resource id="stonith-fence_ipmilan-5254000dcb3f" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-5254000dcb3f_last_0" operation_key="stonith-fence_ipmilan-5254000dcb3f_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="51:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:7;51:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="90" rc-code="7" op-status="0" interval="0" last-run="1505142206" last-rc-change="1505142206" exec-time="0" queue-time="0" op-digest="bc0ef483fd42598086833dcc7d9d16a0" op-secure-params=" passwd  password " op-secure-digest="dd2f06ba4e4b068af99defcb12eeac50"/>
+          </lrm_resource>
+          <lrm_resource id="rabbitmq-bundle-2" type="remote" class="ocf" provider="pacemaker" container="rabbitmq-bundle-docker-2">
+            <lrm_rsc_op id="rabbitmq-bundle-2_last_0" operation_key="rabbitmq-bundle-2_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="48:1898:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;48:1898:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="3" rc-code="0" op-status="0" interval="0" last-run="1505142219" last-rc-change="1505142219" exec-time="0" queue-time="0" op-digest="205c791aea96714f7aa1cb111c727e1b" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="rabbitmq-bundle-2_monitor_60000" operation_key="rabbitmq-bundle-2_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="52:1899:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;52:1899:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="6" rc-code="0" op-status="0" interval="60000" last-rc-change="1505142229" exec-time="0" queue-time="0" op-digest="19642b17998fd21ff264d776e5dcffb7"/>
+          </lrm_resource>
+          <lrm_resource id="openstack-cinder-volume" type="openstack-cinder-volume" class="systemd">
+            <lrm_rsc_op id="openstack-cinder-volume_last_0" operation_key="openstack-cinder-volume_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="200:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;200:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="91" rc-code="0" op-status="0" interval="0" last-run="1505142206" last-rc-change="1505142206" exec-time="2252" queue-time="1" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="openstack-cinder-volume_monitor_60000" operation_key="openstack-cinder-volume_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="201:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;201:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="92" rc-code="0" op-status="0" interval="60000" last-rc-change="1505142209" exec-time="54" queue-time="0" op-digest="2d296eeac3e5f7d1cfdb1557b8eb3457"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.4.11" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.4.11_last_0" operation_key="ip-172.17.4.11_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="44:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:7;44:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="61" rc-code="7" op-status="0" interval="0" last-run="1505142205" last-rc-change="1505142205" exec-time="86" queue-time="0" op-digest="fe27c3edbb73480aff571d34c88b21a7"/>
+          </lrm_resource>
+          <lrm_resource id="ip-10.0.0.109" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-10.0.0.109_last_0" operation_key="ip-10.0.0.109_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="40:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:7;40:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="45" rc-code="7" op-status="0" interval="0" last-run="1505142205" last-rc-change="1505142205" exec-time="95" queue-time="0" op-digest="03a15e984166f433c51a2466e09fd9ff"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.1.14" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.1.14_last_0" operation_key="ip-172.17.1.14_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="182:2:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;182:2:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-2" call-id="107" rc-code="0" op-status="0" interval="0" last-run="1505209762" last-rc-change="1505209762" exec-time="4094" queue-time="0" op-digest="1fab2783a8d283e33a945588908e98a4"/>
+            <lrm_rsc_op id="ip-172.17.1.14_monitor_10000" operation_key="ip-172.17.1.14_monitor_10000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="183:2:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;183:2:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-2" call-id="108" rc-code="0" op-status="0" interval="10000" last-rc-change="1505209766" exec-time="46" queue-time="0" op-digest="19c32490a75539eb9cf2ca18727e305e"/>
+          </lrm_resource>
+          <lrm_resource id="rabbitmq-bundle-docker-0" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="rabbitmq-bundle-docker-0_last_0" operation_key="rabbitmq-bundle-docker-0_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="30:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:7;30:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="5" rc-code="7" op-status="0" interval="0" last-run="1505142205" last-rc-change="1505142205" exec-time="7669" queue-time="0" op-digest="3da6a17e4bfc5ea348c41e41bca8b0a2"/>
+          </lrm_resource>
+          <lrm_resource id="ip-192.168.24.7" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-192.168.24.7_last_0" operation_key="ip-192.168.24.7_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="39:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:7;39:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="41" rc-code="7" op-status="0" interval="0" last-run="1505142205" last-rc-change="1505142205" exec-time="96" queue-time="0" op-digest="6f976df44e37af09ecb5c03346a52559"/>
+          </lrm_resource>
+          <lrm_resource id="rabbitmq-bundle-docker-1" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="rabbitmq-bundle-docker-1_last_0" operation_key="rabbitmq-bundle-docker-1_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="31:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:7;31:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="9" rc-code="7" op-status="0" interval="0" last-run="1505142205" last-rc-change="1505142205" exec-time="7679" queue-time="0" op-digest="bf832eda4aa91b107d859f72dc02f785"/>
+          </lrm_resource>
+          <lrm_resource id="rabbitmq-bundle-docker-2" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="rabbitmq-bundle-docker-2_last_0" operation_key="rabbitmq-bundle-docker-2_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="60:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;60:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="95" rc-code="0" op-status="0" interval="0" last-run="1505142213" last-rc-change="1505142213" exec-time="5624" queue-time="0" op-digest="f50186d9782ae0addf8521a6f507c881"/>
+            <lrm_rsc_op id="rabbitmq-bundle-docker-2_monitor_60000" operation_key="rabbitmq-bundle-docker-2_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="47:1898:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;47:1898:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="103" rc-code="0" op-status="0" interval="60000" last-rc-change="1505142219" exec-time="718" queue-time="0" op-digest="561b6847afca6bfbe64a925fc8f9a586"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.1.19" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.1.19_last_0" operation_key="ip-172.17.1.19_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="188:2:0:6cc81ba4-720a-4e73-9f86-78ca5873faac" transition-magic="0:0;188:2:0:6cc81ba4-720a-4e73-9f86-78ca5873faac" on_node="controller-2" call-id="105" rc-code="0" op-status="0" interval="0" last-run="1505209227" last-rc-change="1505209227" exec-time="4109" queue-time="1" op-digest="2c46df7582fe8b55e9dcdeaceb4c84c7"/>
+            <lrm_rsc_op id="ip-172.17.1.19_monitor_10000" operation_key="ip-172.17.1.19_monitor_10000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="168:3:0:6cc81ba4-720a-4e73-9f86-78ca5873faac" transition-magic="0:0;168:3:0:6cc81ba4-720a-4e73-9f86-78ca5873faac" on_node="controller-2" call-id="106" rc-code="0" op-status="0" interval="10000" last-rc-change="1505209233" exec-time="81" queue-time="0" op-digest="1aa0805e76d86953238cd18a51b57487"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-5254003e8e97" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-5254003e8e97_last_0" operation_key="stonith-fence_ipmilan-5254003e8e97_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="50:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:7;50:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="85" rc-code="7" op-status="0" interval="0" last-run="1505142205" last-rc-change="1505142205" exec-time="0" queue-time="0" op-digest="aae606fe8f16c8c197c6c54ef2856c02" op-secure-params=" passwd  password " op-secure-digest="98c0e9fe35800294f69854ae869bcf70"/>
+          </lrm_resource>
+          <lrm_resource id="galera-bundle-docker-0" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="galera-bundle-docker-0_last_0" operation_key="galera-bundle-docker-0_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="33:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:7;33:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="17" rc-code="7" op-status="0" interval="0" last-run="1505142205" last-rc-change="1505142205" exec-time="7664" queue-time="0" op-digest="c4193f3afb494a6a0ebfd33f930e7be4"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.3.19" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.3.19_last_0" operation_key="ip-172.17.3.19_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="186:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;186:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="86" rc-code="0" op-status="0" interval="0" last-run="1505142206" last-rc-change="1505142206" exec-time="4251" queue-time="0" op-digest="c10af75380b3171e73a9db4cccb57358"/>
+            <lrm_rsc_op id="ip-172.17.3.19_monitor_10000" operation_key="ip-172.17.3.19_monitor_10000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="187:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;187:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="93" rc-code="0" op-status="0" interval="10000" last-rc-change="1505142211" exec-time="270" queue-time="0" op-digest="189813e5c19cd2c64fc44fae8b66c73e"/>
+          </lrm_resource>
+          <lrm_resource id="galera-bundle-docker-2" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="galera-bundle-docker-2_last_0" operation_key="galera-bundle-docker-2_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="94:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;94:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="94" rc-code="0" op-status="0" interval="0" last-run="1505142213" last-rc-change="1505142213" exec-time="5145" queue-time="0" op-digest="d389b2daff811fe7a1fa6943a5e18b34"/>
+            <lrm_rsc_op id="galera-bundle-docker-2_monitor_60000" operation_key="galera-bundle-docker-2_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="95:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;95:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="101" rc-code="0" op-status="0" interval="60000" last-rc-change="1505142218" exec-time="611" queue-time="0" op-digest="08059ef72be0f8f883ba84c83b6492b6"/>
+          </lrm_resource>
+          <lrm_resource id="galera-bundle-docker-1" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="galera-bundle-docker-1_last_0" operation_key="galera-bundle-docker-1_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="34:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:7;34:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="21" rc-code="7" op-status="0" interval="0" last-run="1505142205" last-rc-change="1505142205" exec-time="7662" queue-time="0" op-digest="90b7b2b5826b874d7be1cb44875d1ef5"/>
+          </lrm_resource>
+          <lrm_resource id="redis-bundle-2" type="remote" class="ocf" provider="pacemaker" container="redis-bundle-docker-2">
+            <lrm_rsc_op id="redis-bundle-2_last_0" operation_key="redis-bundle-2_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="137:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;137:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="1" rc-code="0" op-status="0" interval="0" last-run="1505142218" last-rc-change="1505142218" exec-time="0" queue-time="0" op-digest="f325849fbffe2e62970eb201a50da9f3" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="redis-bundle-2_monitor_60000" operation_key="redis-bundle-2_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="124:1898:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;124:1898:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="5" rc-code="0" op-status="0" interval="60000" last-rc-change="1505142219" exec-time="0" queue-time="0" op-digest="1c97595acf862a2449ada08e9770bdf5"/>
+          </lrm_resource>
+          <lrm_resource id="haproxy-bundle-docker-0" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="haproxy-bundle-docker-0_last_0" operation_key="haproxy-bundle-docker-0_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="45:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:7;45:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="65" rc-code="7" op-status="0" interval="0" last-run="1505142205" last-rc-change="1505142205" exec-time="7640" queue-time="0" op-digest="29c58e541af90f274b1d822e91d3f2f1"/>
+          </lrm_resource>
+          <lrm_resource id="haproxy-bundle-docker-1" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="haproxy-bundle-docker-1_last_0" operation_key="haproxy-bundle-docker-1_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="192:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;192:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="96" rc-code="0" op-status="0" interval="0" last-run="1505142213" last-rc-change="1505142213" exec-time="3546" queue-time="0" op-digest="29c58e541af90f274b1d822e91d3f2f1"/>
+            <lrm_rsc_op id="haproxy-bundle-docker-1_monitor_60000" operation_key="haproxy-bundle-docker-1_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="193:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;193:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="98" rc-code="0" op-status="0" interval="60000" last-rc-change="1505142217" exec-time="1337" queue-time="0" op-digest="4b2db678b64bf44c2e087203a776559e"/>
+          </lrm_resource>
+          <lrm_resource id="redis-bundle-docker-0" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="redis-bundle-docker-0_last_0" operation_key="redis-bundle-docker-0_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="36:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:7;36:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="29" rc-code="7" op-status="0" interval="0" last-run="1505142205" last-rc-change="1505142205" exec-time="7658" queue-time="0" op-digest="f6f1f5d0cf4620d4bedb1c8326252d6e"/>
+          </lrm_resource>
+          <lrm_resource id="redis-bundle-docker-1" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="redis-bundle-docker-1_last_0" operation_key="redis-bundle-docker-1_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="37:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:7;37:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="33" rc-code="7" op-status="0" interval="0" last-run="1505142205" last-rc-change="1505142205" exec-time="7628" queue-time="0" op-digest="c15ee65856a09285286dcaf670b8efbe"/>
+          </lrm_resource>
+          <lrm_resource id="redis-bundle-docker-2" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="redis-bundle-docker-2_last_0" operation_key="redis-bundle-docker-2_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="135:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;135:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="97" rc-code="0" op-status="0" interval="0" last-run="1505142213" last-rc-change="1505142213" exec-time="4562" queue-time="0" op-digest="1cd67d814d23e799920dcc7f0f89d1ff"/>
+            <lrm_rsc_op id="redis-bundle-docker-2_monitor_60000" operation_key="redis-bundle-docker-2_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="136:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;136:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="99" rc-code="0" op-status="0" interval="60000" last-rc-change="1505142218" exec-time="760" queue-time="0" op-digest="65886fe28262ef6210fac116dd630079"/>
+          </lrm_resource>
+          <lrm_resource id="haproxy-bundle-docker-2" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="haproxy-bundle-docker-2_last_0" operation_key="haproxy-bundle-docker-2_monitor_0" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="47:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:7;47:1897:7:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="73" rc-code="7" op-status="0" interval="0" last-run="1505142205" last-rc-change="1505142205" exec-time="7557" queue-time="0" op-digest="29c58e541af90f274b1d822e91d3f2f1"/>
+          </lrm_resource>
+          <lrm_resource id="galera-bundle-2" type="remote" class="ocf" provider="pacemaker" container="galera-bundle-docker-2">
+            <lrm_rsc_op id="galera-bundle-2_last_0" operation_key="galera-bundle-2_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="96:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;96:1897:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="2" rc-code="0" op-status="0" interval="0" last-run="1505142218" last-rc-change="1505142218" exec-time="0" queue-time="0" op-digest="f282b02648444d9d95065cede4784d97" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="galera-bundle-2_monitor_60000" operation_key="galera-bundle-2_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="84:1898:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;84:1898:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="4" rc-code="0" op-status="0" interval="60000" last-rc-change="1505142219" exec-time="0" queue-time="0" op-digest="67d79251e7c202b367dded079a1a25eb"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-525400efba5c" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400efba5c_last_0" operation_key="stonith-fence_ipmilan-525400efba5c_start_0" operation="start" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="174:19:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;174:19:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-2" call-id="109" rc-code="0" op-status="0" interval="0" last-run="1505211628" last-rc-change="1505211628" exec-time="91" queue-time="0" op-digest="7e2644d21ce439341c432a3349cc59f9" op-secure-params=" passwd  password " op-secure-digest="e904c2fd62f29caf0b307c1b84254bc0"/>
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400efba5c_monitor_60000" operation_key="stonith-fence_ipmilan-525400efba5c_monitor_60000" operation="monitor" crm-debug-origin="build_active_RAs" crm_feature_set="3.0.12" transition-key="175:19:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;175:19:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-2" call-id="110" rc-code="0" op-status="0" interval="60000" last-rc-change="1505211629" exec-time="73" queue-time="1" op-digest="7c9d789e29a694a2b7aa494079650cd6" op-secure-params=" passwd  password " op-secure-digest="e904c2fd62f29caf0b307c1b84254bc0"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+    <node_state id="2" uname="controller-1" in_ccm="true" crmd="online" crm-debug-origin="do_state_transition" join="member" expected="member">
+      <transient_attributes id="2">
+        <instance_attributes id="status-2">
+          <nvpair id="status-2-shutdown" name="shutdown" value="0"/>
+          <nvpair id="status-2-master-redis" name="master-redis" value="1"/>
+          <nvpair id="status-2-master-galera" name="master-galera" value="100"/>
+          <nvpair id="status-2-rmq-node-attr-rabbitmq" name="rmq-node-attr-rabbitmq" value="rabbit@controller-1"/>
+        </instance_attributes>
+      </transient_attributes>
+      <lrm id="2">
+        <lrm_resources>
+          <lrm_resource id="ip-172.17.1.14" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.1.14_last_0" operation_key="ip-172.17.1.14_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="44:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;44:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="49" rc-code="7" op-status="0" interval="0" last-run="1505211876" last-rc-change="1505211876" exec-time="81" queue-time="0" op-digest="1fab2783a8d283e33a945588908e98a4"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.4.11" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.4.11_last_0" operation_key="ip-172.17.4.11_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="47:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;47:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="61" rc-code="7" op-status="0" interval="0" last-run="1505211876" last-rc-change="1505211876" exec-time="54" queue-time="0" op-digest="fe27c3edbb73480aff571d34c88b21a7"/>
+          </lrm_resource>
+          <lrm_resource id="ip-192.168.24.7" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-192.168.24.7_last_0" operation_key="ip-192.168.24.7_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="42:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;42:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="41" rc-code="7" op-status="0" interval="0" last-run="1505211876" last-rc-change="1505211876" exec-time="90" queue-time="0" op-digest="6f976df44e37af09ecb5c03346a52559"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.1.19" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.1.19_last_0" operation_key="ip-172.17.1.19_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="45:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;45:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="53" rc-code="7" op-status="0" interval="0" last-run="1505211876" last-rc-change="1505211876" exec-time="67" queue-time="0" op-digest="2c46df7582fe8b55e9dcdeaceb4c84c7"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.3.19" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.3.19_last_0" operation_key="ip-172.17.3.19_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="46:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;46:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="57" rc-code="7" op-status="0" interval="0" last-run="1505211876" last-rc-change="1505211876" exec-time="68" queue-time="0" op-digest="c10af75380b3171e73a9db4cccb57358"/>
+          </lrm_resource>
+          <lrm_resource id="ip-10.0.0.109" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-10.0.0.109_last_0" operation_key="ip-10.0.0.109_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="43:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;43:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="45" rc-code="7" op-status="0" interval="0" last-run="1505211876" last-rc-change="1505211876" exec-time="100" queue-time="0" op-digest="03a15e984166f433c51a2466e09fd9ff"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-525400efba5c" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400efba5c_last_0" operation_key="stonith-fence_ipmilan-525400efba5c_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="52:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;52:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="81" rc-code="7" op-status="0" interval="0" last-run="1505211876" last-rc-change="1505211876" exec-time="2" queue-time="0" op-digest="7e2644d21ce439341c432a3349cc59f9" op-secure-params=" passwd  password " op-secure-digest="e904c2fd62f29caf0b307c1b84254bc0"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-5254003e8e97" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-5254003e8e97_last_0" operation_key="stonith-fence_ipmilan-5254003e8e97_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="53:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;53:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="85" rc-code="7" op-status="0" interval="0" last-run="1505211876" last-rc-change="1505211876" exec-time="0" queue-time="0" op-digest="aae606fe8f16c8c197c6c54ef2856c02" op-secure-params=" passwd  password " op-secure-digest="98c0e9fe35800294f69854ae869bcf70"/>
+          </lrm_resource>
+          <lrm_resource id="openstack-cinder-volume" type="openstack-cinder-volume" class="systemd">
+            <lrm_rsc_op id="openstack-cinder-volume_last_0" operation_key="openstack-cinder-volume_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="51:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;51:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="77" rc-code="7" op-status="0" interval="0" last-run="1505211876" last-rc-change="1505211876" exec-time="17" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-5254000dcb3f" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-5254000dcb3f_last_0" operation_key="stonith-fence_ipmilan-5254000dcb3f_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="54:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;54:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="89" rc-code="7" op-status="0" interval="0" last-run="1505211877" last-rc-change="1505211877" exec-time="0" queue-time="0" op-digest="bc0ef483fd42598086833dcc7d9d16a0" op-secure-params=" passwd  password " op-secure-digest="dd2f06ba4e4b068af99defcb12eeac50"/>
+          </lrm_resource>
+          <lrm_resource id="redis-bundle-docker-2" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="redis-bundle-docker-2_last_0" operation_key="redis-bundle-docker-2_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="41:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;41:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="37" rc-code="7" op-status="0" interval="0" last-run="1505211876" last-rc-change="1505211876" exec-time="7143" queue-time="0" op-digest="1cd67d814d23e799920dcc7f0f89d1ff"/>
+          </lrm_resource>
+          <lrm_resource id="haproxy-bundle-docker-1" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="haproxy-bundle-docker-1_last_0" operation_key="haproxy-bundle-docker-1_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="49:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;49:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="69" rc-code="7" op-status="0" interval="0" last-run="1505211876" last-rc-change="1505211876" exec-time="7043" queue-time="0" op-digest="29c58e541af90f274b1d822e91d3f2f1"/>
+          </lrm_resource>
+          <lrm_resource id="redis-bundle-docker-0" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="redis-bundle-docker-0_last_0" operation_key="redis-bundle-docker-0_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="39:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;39:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="29" rc-code="7" op-status="0" interval="0" last-run="1505211876" last-rc-change="1505211876" exec-time="7162" queue-time="0" op-digest="f6f1f5d0cf4620d4bedb1c8326252d6e"/>
+          </lrm_resource>
+          <lrm_resource id="haproxy-bundle-docker-0" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="haproxy-bundle-docker-0_last_0" operation_key="haproxy-bundle-docker-0_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="48:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;48:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="65" rc-code="7" op-status="0" interval="0" last-run="1505211876" last-rc-change="1505211876" exec-time="7135" queue-time="0" op-digest="29c58e541af90f274b1d822e91d3f2f1"/>
+          </lrm_resource>
+          <lrm_resource id="galera-bundle-docker-2" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="galera-bundle-docker-2_last_0" operation_key="galera-bundle-docker-2_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="38:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;38:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="25" rc-code="7" op-status="0" interval="0" last-run="1505211876" last-rc-change="1505211876" exec-time="7199" queue-time="0" op-digest="d389b2daff811fe7a1fa6943a5e18b34"/>
+          </lrm_resource>
+          <lrm_resource id="rabbitmq-bundle-docker-0" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="rabbitmq-bundle-docker-0_last_0" operation_key="rabbitmq-bundle-docker-0_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="33:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;33:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="5" rc-code="7" op-status="0" interval="0" last-run="1505211876" last-rc-change="1505211876" exec-time="7226" queue-time="0" op-digest="3da6a17e4bfc5ea348c41e41bca8b0a2"/>
+          </lrm_resource>
+          <lrm_resource id="rabbitmq-bundle-docker-2" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="rabbitmq-bundle-docker-2_last_0" operation_key="rabbitmq-bundle-docker-2_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="35:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;35:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="13" rc-code="7" op-status="0" interval="0" last-run="1505211876" last-rc-change="1505211876" exec-time="7269" queue-time="0" op-digest="f50186d9782ae0addf8521a6f507c881"/>
+          </lrm_resource>
+          <lrm_resource id="galera-bundle-docker-0" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="galera-bundle-docker-0_last_0" operation_key="galera-bundle-docker-0_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="36:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;36:20:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="17" rc-code="7" op-status="0" interval="0" last-run="1505211876" last-rc-change="1505211876" exec-time="7268" queue-time="0" op-digest="c4193f3afb494a6a0ebfd33f930e7be4"/>
+          </lrm_resource>
+          <lrm_resource id="redis-bundle-docker-1" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="redis-bundle-docker-1_last_0" operation_key="redis-bundle-docker-1_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="132:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;132:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="90" rc-code="0" op-status="0" interval="0" last-run="1505211884" last-rc-change="1505211884" exec-time="4543" queue-time="0" op-digest="c15ee65856a09285286dcaf670b8efbe"/>
+            <lrm_rsc_op id="redis-bundle-docker-1_monitor_60000" operation_key="redis-bundle-docker-1_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="133:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;133:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="97" rc-code="0" op-status="0" interval="60000" last-rc-change="1505211888" exec-time="487" queue-time="0" op-digest="7362022405a27cc898617c0751e68e51"/>
+          </lrm_resource>
+          <lrm_resource id="rabbitmq-bundle-docker-1" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="rabbitmq-bundle-docker-1_last_0" operation_key="rabbitmq-bundle-docker-1_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="59:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;59:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="91" rc-code="0" op-status="0" interval="0" last-run="1505211884" last-rc-change="1505211884" exec-time="3530" queue-time="0" op-digest="bf832eda4aa91b107d859f72dc02f785"/>
+            <lrm_rsc_op id="rabbitmq-bundle-docker-1_monitor_60000" operation_key="rabbitmq-bundle-docker-1_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="60:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;60:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="94" rc-code="0" op-status="0" interval="60000" last-rc-change="1505211887" exec-time="727" queue-time="0" op-digest="fd68fffbb8bc0dbaef13c9da7cb7e9d3"/>
+          </lrm_resource>
+          <lrm_resource id="haproxy-bundle-docker-2" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="haproxy-bundle-docker-2_last_0" operation_key="haproxy-bundle-docker-2_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="197:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;197:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="92" rc-code="0" op-status="0" interval="0" last-run="1505211884" last-rc-change="1505211884" exec-time="4385" queue-time="0" op-digest="29c58e541af90f274b1d822e91d3f2f1"/>
+            <lrm_rsc_op id="haproxy-bundle-docker-2_monitor_60000" operation_key="haproxy-bundle-docker-2_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="198:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;198:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="96" rc-code="0" op-status="0" interval="60000" last-rc-change="1505211888" exec-time="433" queue-time="0" op-digest="4b2db678b64bf44c2e087203a776559e"/>
+          </lrm_resource>
+          <lrm_resource id="galera-bundle-docker-1" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="galera-bundle-docker-1_last_0" operation_key="galera-bundle-docker-1_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="93:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;93:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="93" rc-code="0" op-status="0" interval="0" last-run="1505211884" last-rc-change="1505211884" exec-time="4402" queue-time="0" op-digest="90b7b2b5826b874d7be1cb44875d1ef5"/>
+            <lrm_rsc_op id="galera-bundle-docker-1_monitor_60000" operation_key="galera-bundle-docker-1_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="94:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;94:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="99" rc-code="0" op-status="0" interval="60000" last-rc-change="1505211888" exec-time="396" queue-time="0" op-digest="69fc3d0046f36c83a2a1238d00446bbd"/>
+          </lrm_resource>
+          <lrm_resource id="redis-bundle-1" type="remote" class="ocf" provider="pacemaker" container="redis-bundle-docker-1">
+            <lrm_rsc_op id="redis-bundle-1_last_0" operation_key="redis-bundle-1_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="134:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;134:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="2" rc-code="0" op-status="0" interval="0" last-run="1505211888" last-rc-change="1505211888" exec-time="0" queue-time="0" op-digest="cd98602d6f977947327050913302f861" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="redis-bundle-1_monitor_60000" operation_key="redis-bundle-1_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="120:21:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;120:21:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="6" rc-code="0" op-status="0" interval="60000" last-rc-change="1505211890" exec-time="0" queue-time="0" op-digest="0491b76e934baa33a7f246cd2c3f54a7"/>
+          </lrm_resource>
+          <lrm_resource id="galera-bundle-1" type="remote" class="ocf" provider="pacemaker" container="galera-bundle-docker-1">
+            <lrm_rsc_op id="galera-bundle-1_last_0" operation_key="galera-bundle-1_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="95:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;95:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="3" rc-code="0" op-status="0" interval="0" last-run="1505211888" last-rc-change="1505211888" exec-time="0" queue-time="0" op-digest="ed95b71467015049c875f75798f405fb" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="galera-bundle-1_monitor_60000" operation_key="galera-bundle-1_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="80:21:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;80:21:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="5" rc-code="0" op-status="0" interval="60000" last-rc-change="1505211890" exec-time="0" queue-time="0" op-digest="cd5e49e967c83be8abedad4b1f3136b7"/>
+          </lrm_resource>
+          <lrm_resource id="rabbitmq-bundle-1" type="remote" class="ocf" provider="pacemaker" container="rabbitmq-bundle-docker-1">
+            <lrm_rsc_op id="rabbitmq-bundle-1_last_0" operation_key="rabbitmq-bundle-1_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="61:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;61:20:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="1" rc-code="0" op-status="0" interval="0" last-run="1505211887" last-rc-change="1505211887" exec-time="0" queue-time="0" op-digest="f1d68ab267df6867301fcff08041cd2f" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="rabbitmq-bundle-1_monitor_60000" operation_key="rabbitmq-bundle-1_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="45:21:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;45:21:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="4" rc-code="0" op-status="0" interval="60000" last-rc-change="1505211890" exec-time="0" queue-time="0" op-digest="76f9ab23bc58402930f7f92ff2ab9d75"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+    <node_state id="1" uname="controller-0" in_ccm="false" crmd="offline" crm-debug-origin="do_state_transition" join="down" expected="member">
+      <lrm id="1">
+        <lrm_resources>
+          <lrm_resource id="ip-10.0.0.109" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-10.0.0.109_last_0" operation_key="ip-10.0.0.109_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="159:18:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;159:18:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="113" rc-code="0" op-status="0" interval="0" last-run="1505211616" last-rc-change="1505211616" exec-time="4070" queue-time="1" op-digest="03a15e984166f433c51a2466e09fd9ff"/>
+            <lrm_rsc_op id="ip-10.0.0.109_monitor_10000" operation_key="ip-10.0.0.109_monitor_10000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="160:18:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;160:18:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="114" rc-code="0" op-status="0" interval="10000" last-rc-change="1505211620" exec-time="43" queue-time="0" op-digest="5a0a5239f9d18249912e9d35a8e2eb1d"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.1.14" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.1.14_last_0" operation_key="ip-172.17.1.14_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="39:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;39:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="49" rc-code="7" op-status="0" interval="0" last-run="1505210282" last-rc-change="1505210282" exec-time="90" queue-time="0" op-digest="1fab2783a8d283e33a945588908e98a4"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.3.19" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.3.19_last_0" operation_key="ip-172.17.3.19_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="41:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;41:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="57" rc-code="7" op-status="0" interval="0" last-run="1505210282" last-rc-change="1505210282" exec-time="90" queue-time="0" op-digest="c10af75380b3171e73a9db4cccb57358"/>
+          </lrm_resource>
+          <lrm_resource id="ip-192.168.24.7" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-192.168.24.7_last_0" operation_key="ip-192.168.24.7_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="180:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;180:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="66" rc-code="0" op-status="0" interval="0" last-run="1505210282" last-rc-change="1505210282" exec-time="4110" queue-time="0" op-digest="6f976df44e37af09ecb5c03346a52559"/>
+            <lrm_rsc_op id="ip-192.168.24.7_monitor_10000" operation_key="ip-192.168.24.7_monitor_10000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="181:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;181:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="92" rc-code="0" op-status="0" interval="10000" last-rc-change="1505210287" exec-time="263" queue-time="0" op-digest="51f17fc2e57f6f623f896c960749925d"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.1.19" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.1.19_last_0" operation_key="ip-172.17.1.19_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="40:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;40:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="53" rc-code="7" op-status="0" interval="0" last-run="1505210282" last-rc-change="1505210282" exec-time="96" queue-time="0" op-digest="2c46df7582fe8b55e9dcdeaceb4c84c7"/>
+          </lrm_resource>
+          <lrm_resource id="ip-172.17.4.11" type="IPaddr2" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="ip-172.17.4.11_last_0" operation_key="ip-172.17.4.11_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="190:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;190:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="79" rc-code="0" op-status="0" interval="0" last-run="1505210282" last-rc-change="1505210282" exec-time="4112" queue-time="0" op-digest="fe27c3edbb73480aff571d34c88b21a7"/>
+            <lrm_rsc_op id="ip-172.17.4.11_monitor_10000" operation_key="ip-172.17.4.11_monitor_10000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="191:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;191:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="93" rc-code="0" op-status="0" interval="10000" last-rc-change="1505210287" exec-time="263" queue-time="0" op-digest="392445a354e2da75dcd4cbe6eee1268b"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-525400efba5c" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-525400efba5c_last_0" operation_key="stonith-fence_ipmilan-525400efba5c_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="47:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;47:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="83" rc-code="7" op-status="0" interval="0" last-run="1505210282" last-rc-change="1505210282" exec-time="2" queue-time="1" op-digest="7e2644d21ce439341c432a3349cc59f9" op-secure-params=" passwd  password " op-secure-digest="e904c2fd62f29caf0b307c1b84254bc0"/>
+          </lrm_resource>
+          <lrm_resource id="openstack-cinder-volume" type="openstack-cinder-volume" class="systemd">
+            <lrm_rsc_op id="openstack-cinder-volume_last_0" operation_key="openstack-cinder-volume_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="46:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;46:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="78" rc-code="7" op-status="0" interval="0" last-run="1505210282" last-rc-change="1505210282" exec-time="22" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-5254003e8e97" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-5254003e8e97_last_0" operation_key="stonith-fence_ipmilan-5254003e8e97_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="206:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;206:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="94" rc-code="0" op-status="0" interval="0" last-run="1505210290" last-rc-change="1505210290" exec-time="408" queue-time="0" op-digest="aae606fe8f16c8c197c6c54ef2856c02" op-secure-params=" passwd  password " op-secure-digest="98c0e9fe35800294f69854ae869bcf70"/>
+            <lrm_rsc_op id="stonith-fence_ipmilan-5254003e8e97_monitor_60000" operation_key="stonith-fence_ipmilan-5254003e8e97_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="207:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;207:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="97" rc-code="0" op-status="0" interval="60000" last-rc-change="1505210292" exec-time="768" queue-time="0" op-digest="4c49d2d91618384073fadd7f677572d3" op-secure-params=" passwd  password " op-secure-digest="98c0e9fe35800294f69854ae869bcf70"/>
+          </lrm_resource>
+          <lrm_resource id="stonith-fence_ipmilan-5254000dcb3f" type="fence_ipmilan" class="stonith">
+            <lrm_rsc_op id="stonith-fence_ipmilan-5254000dcb3f_last_0" operation_key="stonith-fence_ipmilan-5254000dcb3f_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="208:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;208:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="95" rc-code="0" op-status="0" interval="0" last-run="1505210290" last-rc-change="1505210290" exec-time="283" queue-time="0" op-digest="bc0ef483fd42598086833dcc7d9d16a0" op-secure-params=" passwd  password " op-secure-digest="dd2f06ba4e4b068af99defcb12eeac50"/>
+            <lrm_rsc_op id="stonith-fence_ipmilan-5254000dcb3f_monitor_60000" operation_key="stonith-fence_ipmilan-5254000dcb3f_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="209:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;209:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="96" rc-code="0" op-status="0" interval="60000" last-rc-change="1505210292" exec-time="778" queue-time="0" op-digest="7a557a7eff20453404b0e464e5f83f4a" op-secure-params=" passwd  password " op-secure-digest="dd2f06ba4e4b068af99defcb12eeac50"/>
+          </lrm_resource>
+          <lrm_resource id="rabbitmq-bundle-docker-2" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="rabbitmq-bundle-docker-2_last_0" operation_key="rabbitmq-bundle-docker-2_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="30:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;30:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="13" rc-code="7" op-status="0" interval="0" last-run="1505210282" last-rc-change="1505210282" exec-time="10133" queue-time="0" op-digest="f50186d9782ae0addf8521a6f507c881"/>
+          </lrm_resource>
+          <lrm_resource id="galera-bundle-docker-2" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="galera-bundle-docker-2_last_0" operation_key="galera-bundle-docker-2_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="33:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;33:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="25" rc-code="7" op-status="0" interval="0" last-run="1505210282" last-rc-change="1505210282" exec-time="10128" queue-time="0" op-digest="d389b2daff811fe7a1fa6943a5e18b34"/>
+          </lrm_resource>
+          <lrm_resource id="redis-bundle-docker-1" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="redis-bundle-docker-1_last_0" operation_key="redis-bundle-docker-1_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="35:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;35:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="33" rc-code="7" op-status="0" interval="0" last-run="1505210282" last-rc-change="1505210282" exec-time="10126" queue-time="0" op-digest="c15ee65856a09285286dcaf670b8efbe"/>
+          </lrm_resource>
+          <lrm_resource id="haproxy-bundle-docker-2" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="haproxy-bundle-docker-2_last_0" operation_key="haproxy-bundle-docker-2_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="45:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;45:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="74" rc-code="7" op-status="0" interval="0" last-run="1505210282" last-rc-change="1505210282" exec-time="9981" queue-time="0" op-digest="29c58e541af90f274b1d822e91d3f2f1"/>
+          </lrm_resource>
+          <lrm_resource id="redis-bundle-docker-2" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="redis-bundle-docker-2_last_0" operation_key="redis-bundle-docker-2_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="36:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;36:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="37" rc-code="7" op-status="0" interval="0" last-run="1505210282" last-rc-change="1505210282" exec-time="10146" queue-time="0" op-digest="1cd67d814d23e799920dcc7f0f89d1ff"/>
+          </lrm_resource>
+          <lrm_resource id="rabbitmq-bundle-docker-1" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="rabbitmq-bundle-docker-1_last_0" operation_key="rabbitmq-bundle-docker-1_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="29:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;29:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="9" rc-code="7" op-status="0" interval="0" last-run="1505210282" last-rc-change="1505210282" exec-time="10168" queue-time="0" op-digest="bf832eda4aa91b107d859f72dc02f785"/>
+          </lrm_resource>
+          <lrm_resource id="galera-bundle-docker-1" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="galera-bundle-docker-1_last_0" operation_key="galera-bundle-docker-1_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="32:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;32:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="21" rc-code="7" op-status="0" interval="0" last-run="1505210282" last-rc-change="1505210282" exec-time="10174" queue-time="0" op-digest="90b7b2b5826b874d7be1cb44875d1ef5"/>
+          </lrm_resource>
+          <lrm_resource id="haproxy-bundle-docker-1" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="haproxy-bundle-docker-1_last_0" operation_key="haproxy-bundle-docker-1_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="44:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:7;44:7:7:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="70" rc-code="7" op-status="0" interval="0" last-run="1505210282" last-rc-change="1505210282" exec-time="10027" queue-time="0" op-digest="29c58e541af90f274b1d822e91d3f2f1"/>
+          </lrm_resource>
+          <lrm_resource id="rabbitmq-bundle-docker-0" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="rabbitmq-bundle-docker-0_last_0" operation_key="rabbitmq-bundle-docker-0_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="50:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;50:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="98" rc-code="0" op-status="0" interval="0" last-run="1505210293" last-rc-change="1505210293" exec-time="4396" queue-time="0" op-digest="3da6a17e4bfc5ea348c41e41bca8b0a2"/>
+            <lrm_rsc_op id="rabbitmq-bundle-docker-0_monitor_60000" operation_key="rabbitmq-bundle-docker-0_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="51:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;51:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="102" rc-code="0" op-status="0" interval="60000" last-rc-change="1505210297" exec-time="912" queue-time="0" op-digest="6b9570f66c0d7dbdd8c6127ee0c80505"/>
+          </lrm_resource>
+          <lrm_resource id="haproxy-bundle-docker-0" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="haproxy-bundle-docker-0_last_0" operation_key="haproxy-bundle-docker-0_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="192:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;192:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="99" rc-code="0" op-status="0" interval="0" last-run="1505210293" last-rc-change="1505210293" exec-time="5581" queue-time="0" op-digest="29c58e541af90f274b1d822e91d3f2f1"/>
+            <lrm_rsc_op id="haproxy-bundle-docker-0_monitor_60000" operation_key="haproxy-bundle-docker-0_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="193:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;193:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="106" rc-code="0" op-status="0" interval="60000" last-rc-change="1505210299" exec-time="610" queue-time="0" op-digest="4b2db678b64bf44c2e087203a776559e"/>
+          </lrm_resource>
+          <lrm_resource id="galera-bundle-docker-0" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="galera-bundle-docker-0_last_0" operation_key="galera-bundle-docker-0_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="84:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;84:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="100" rc-code="0" op-status="0" interval="0" last-run="1505210293" last-rc-change="1505210293" exec-time="5740" queue-time="0" op-digest="c4193f3afb494a6a0ebfd33f930e7be4"/>
+            <lrm_rsc_op id="galera-bundle-docker-0_monitor_60000" operation_key="galera-bundle-docker-0_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="85:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;85:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="107" rc-code="0" op-status="0" interval="60000" last-rc-change="1505210299" exec-time="592" queue-time="0" op-digest="e6306e9147b1dd9858f39577ac842f25"/>
+          </lrm_resource>
+          <lrm_resource id="redis-bundle-docker-0" type="docker" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="redis-bundle-docker-0_last_0" operation_key="redis-bundle-docker-0_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="114:15:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;114:15:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="111" rc-code="0" op-status="0" interval="0" last-run="1505211499" last-rc-change="1505211499" exec-time="452" queue-time="0" op-digest="f6f1f5d0cf4620d4bedb1c8326252d6e"/>
+            <lrm_rsc_op id="redis-bundle-docker-0_monitor_60000" operation_key="redis-bundle-docker-0_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="115:15:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;115:15:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="112" rc-code="0" op-status="0" interval="60000" last-rc-change="1505211500" exec-time="89" queue-time="0" op-digest="1172ed2e92c66fdbc4c8aa28b1d897c4"/>
+          </lrm_resource>
+          <lrm_resource id="redis-bundle-0" type="remote" class="ocf" provider="pacemaker" container="redis-bundle-docker-0">
+            <lrm_rsc_op id="redis-bundle-0_last_0" operation_key="redis-bundle-0_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="116:15:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;116:15:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="8" rc-code="0" op-status="0" interval="0" last-run="1505211500" last-rc-change="1505211500" exec-time="0" queue-time="0" op-digest="dd323696d6c8ed14cb71914c411664c9" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="redis-bundle-0_monitor_60000" operation_key="redis-bundle-0_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="119:16:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;119:16:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="9" rc-code="0" op-status="0" interval="60000" last-rc-change="1505211502" exec-time="0" queue-time="0" op-digest="e3ae7972e4989b9b928f3ff082c5ac23"/>
+          </lrm_resource>
+          <lrm_resource id="galera-bundle-0" type="remote" class="ocf" provider="pacemaker" container="galera-bundle-docker-0">
+            <lrm_rsc_op id="galera-bundle-0_last_0" operation_key="galera-bundle-0_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="86:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;86:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="3" rc-code="0" op-status="0" interval="0" last-run="1505210299" last-rc-change="1505210299" exec-time="0" queue-time="0" op-digest="37e9ab931fa7b5d2122c4cd44c56b7d2" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="galera-bundle-0_monitor_60000" operation_key="galera-bundle-0_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="75:8:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;75:8:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="5" rc-code="0" op-status="0" interval="60000" last-rc-change="1505210300" exec-time="0" queue-time="0" op-digest="1ef5cbd05a3687236c669af720a810bc"/>
+          </lrm_resource>
+          <lrm_resource id="rabbitmq-bundle-0" type="remote" class="ocf" provider="pacemaker" container="rabbitmq-bundle-docker-0">
+            <lrm_rsc_op id="rabbitmq-bundle-0_last_0" operation_key="rabbitmq-bundle-0_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="52:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;52:7:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="1" rc-code="0" op-status="0" interval="0" last-run="1505210297" last-rc-change="1505210297" exec-time="0" queue-time="0" op-digest="8dc3f9844e70d4458a7edcd7091ecf50" op-force-restart=" server " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+            <lrm_rsc_op id="rabbitmq-bundle-0_monitor_60000" operation_key="rabbitmq-bundle-0_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="40:8:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;40:8:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="4" rc-code="0" op-status="0" interval="60000" last-rc-change="1505210300" exec-time="0" queue-time="0" op-digest="cca9d25863986607e6440270f0640ff5"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+    <node_state remote_node="true" id="rabbitmq-bundle-0" uname="rabbitmq-bundle-0" in_ccm="true" crm-debug-origin="do_state_transition" node_fenced="0">
+      <lrm id="rabbitmq-bundle-0">
+        <lrm_resources>
+          <lrm_resource id="rabbitmq" type="rabbitmq-cluster" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="rabbitmq_last_0" operation_key="rabbitmq_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="57:8:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;57:8:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="7" rc-code="0" op-status="0" interval="0" last-run="1505210301" last-rc-change="1505210301" exec-time="26574" queue-time="0" op-digest="780d433233eb4f94c1a151623d002e84"/>
+            <lrm_rsc_op id="rabbitmq_monitor_10000" operation_key="rabbitmq_monitor_10000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="57:9:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;57:9:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="45" rc-code="0" op-status="0" interval="10000" last-rc-change="1505210328" exec-time="3881" queue-time="0" op-digest="6b46cdf9111345cbd0460b2540d3b2c7"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+      <transient_attributes id="rabbitmq-bundle-0">
+        <instance_attributes id="status-rabbitmq-bundle-0"/>
+      </transient_attributes>
+    </node_state>
+    <node_state remote_node="true" id="rabbitmq-bundle-2" uname="rabbitmq-bundle-2" in_ccm="true" crm-debug-origin="do_state_transition" node_fenced="0">
+      <lrm id="rabbitmq-bundle-2">
+        <lrm_resources>
+          <lrm_resource id="rabbitmq" type="rabbitmq-cluster" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="rabbitmq_last_0" operation_key="rabbitmq_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="61:1899:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;61:1899:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="7" rc-code="0" op-status="0" interval="0" last-run="1505142230" last-rc-change="1505142230" exec-time="28301" queue-time="0" op-digest="780d433233eb4f94c1a151623d002e84"/>
+            <lrm_rsc_op id="rabbitmq_monitor_10000" operation_key="rabbitmq_monitor_10000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="65:1900:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;65:1900:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="45" rc-code="0" op-status="0" interval="10000" last-rc-change="1505142258" exec-time="3773" queue-time="0" op-digest="6b46cdf9111345cbd0460b2540d3b2c7"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+      <transient_attributes id="rabbitmq-bundle-2">
+        <instance_attributes id="status-rabbitmq-bundle-2"/>
+      </transient_attributes>
+    </node_state>
+    <node_state remote_node="true" id="rabbitmq-bundle-1" uname="rabbitmq-bundle-1" in_ccm="true" crm-debug-origin="do_state_transition" node_fenced="0">
+      <lrm id="rabbitmq-bundle-1">
+        <lrm_resources>
+          <lrm_resource id="rabbitmq" type="rabbitmq-cluster" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="rabbitmq_last_0" operation_key="rabbitmq_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="58:21:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;58:21:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="7" rc-code="0" op-status="0" interval="0" last-run="1505211892" last-rc-change="1505211892" exec-time="24504" queue-time="0" op-digest="780d433233eb4f94c1a151623d002e84"/>
+            <lrm_rsc_op id="rabbitmq_monitor_10000" operation_key="rabbitmq_monitor_10000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="60:22:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;60:22:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="45" rc-code="0" op-status="0" interval="10000" last-rc-change="1505211919" exec-time="3880" queue-time="0" op-digest="6b46cdf9111345cbd0460b2540d3b2c7"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+      <transient_attributes id="rabbitmq-bundle-1">
+        <instance_attributes id="status-rabbitmq-bundle-1"/>
+      </transient_attributes>
+    </node_state>
+    <node_state remote_node="true" id="galera-bundle-1" uname="galera-bundle-1" in_ccm="true" crm-debug-origin="do_state_transition" node_fenced="0">
+      <lrm id="galera-bundle-1">
+        <lrm_resources>
+          <lrm_resource id="galera" type="galera" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="galera_last_0" operation_key="galera_promote_0" operation="promote" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="101:22:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;101:22:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="31" rc-code="0" op-status="0" interval="0" last-run="1505211919" last-rc-change="1505211919" exec-time="9865" queue-time="0" op-digest="a27a7301241d321527115de47ec94f52" op-secure-params=" user " op-secure-digest="a27a7301241d321527115de47ec94f52"/>
+            <lrm_rsc_op id="galera_monitor_10000" operation_key="galera_monitor_10000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="101:23:8:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:8;101:23:8:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="66" rc-code="8" op-status="0" interval="10000" last-rc-change="1505211930" exec-time="397" queue-time="0" op-digest="5a80d9ca7bb4f6ad0bdb3b4395b9f4ec" op-secure-params=" user " op-secure-digest="a27a7301241d321527115de47ec94f52"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+      <transient_attributes id="galera-bundle-1">
+        <instance_attributes id="status-galera-bundle-1"/>
+      </transient_attributes>
+    </node_state>
+    <node_state remote_node="true" id="galera-bundle-0" uname="galera-bundle-0" in_ccm="true" crm-debug-origin="do_state_transition" node_fenced="0">
+      <lrm id="galera-bundle-0">
+        <lrm_resources>
+          <lrm_resource id="galera" type="galera" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="galera_last_0" operation_key="galera_promote_0" operation="promote" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="100:9:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;100:9:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="31" rc-code="0" op-status="0" interval="0" last-run="1505210333" last-rc-change="1505210333" exec-time="9885" queue-time="0" op-digest="a27a7301241d321527115de47ec94f52" op-secure-params=" user " op-secure-digest="a27a7301241d321527115de47ec94f52"/>
+            <lrm_rsc_op id="galera_monitor_10000" operation_key="galera_monitor_10000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="94:10:8:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:8;94:10:8:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="66" rc-code="8" op-status="0" interval="10000" last-rc-change="1505210343" exec-time="421" queue-time="1" op-digest="5a80d9ca7bb4f6ad0bdb3b4395b9f4ec" op-secure-params=" user " op-secure-digest="a27a7301241d321527115de47ec94f52"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+      <transient_attributes id="galera-bundle-0">
+        <instance_attributes id="status-galera-bundle-0"/>
+      </transient_attributes>
+    </node_state>
+    <node_state remote_node="true" id="galera-bundle-2" uname="galera-bundle-2" in_ccm="true" crm-debug-origin="do_state_transition" node_fenced="0">
+      <lrm id="galera-bundle-2">
+        <lrm_resources>
+          <lrm_resource id="galera" type="galera" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="galera_last_0" operation_key="galera_promote_0" operation="promote" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="101:1899:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;101:1899:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="31" rc-code="0" op-status="0" interval="0" last-run="1505142229" last-rc-change="1505142229" exec-time="11966" queue-time="0" op-digest="a27a7301241d321527115de47ec94f52" op-secure-params=" user " op-secure-digest="a27a7301241d321527115de47ec94f52"/>
+            <lrm_rsc_op id="galera_monitor_10000" operation_key="galera_monitor_10000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="106:1900:8:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:8;106:1900:8:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="66" rc-code="8" op-status="0" interval="10000" last-rc-change="1505142259" exec-time="375" queue-time="0" op-digest="5a80d9ca7bb4f6ad0bdb3b4395b9f4ec" op-secure-params=" user " op-secure-digest="a27a7301241d321527115de47ec94f52"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+      <transient_attributes id="galera-bundle-2">
+        <instance_attributes id="status-galera-bundle-2"/>
+      </transient_attributes>
+    </node_state>
+    <node_state remote_node="true" id="redis-bundle-0" uname="redis-bundle-0" in_ccm="true" crm-debug-origin="do_state_transition" node_fenced="0">
+      <transient_attributes id="redis-bundle-0">
+        <instance_attributes id="status-redis-bundle-0">
+          <nvpair id="status-redis-bundle-0-master-redis" name="master-redis" value="1"/>
+        </instance_attributes>
+      </transient_attributes>
+      <lrm id="redis-bundle-0">
+        <lrm_resources>
+          <lrm_resource id="redis" type="redis" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="redis_last_0" operation_key="redis_promote_0" operation="promote" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="120:18:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;120:18:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="192" rc-code="0" op-status="0" interval="0" last-run="1505211620" last-rc-change="1505211620" exec-time="2201" queue-time="0" op-digest="a5b2a4f5c557278af14d6cbffc5a229d" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+            <lrm_rsc_op id="redis_monitor_20000" operation_key="redis_monitor_20000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="118:19:8:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:8;118:19:8:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-0" call-id="241" rc-code="8" op-status="0" interval="20000" last-rc-change="1505211632" exec-time="1027" queue-time="0" op-digest="992feffd37882eb5ce9bfc847b2fa75e" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+    <node_state remote_node="true" id="redis-bundle-2" uname="redis-bundle-2" in_ccm="true" crm-debug-origin="do_state_transition" node_fenced="0">
+      <lrm id="redis-bundle-2">
+        <lrm_resources>
+          <lrm_resource id="redis" type="redis" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="redis_last_0" operation_key="redis_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="137:1907:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;137:1907:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="1903" rc-code="0" op-status="0" interval="0" last-run="1505143910" last-rc-change="1505143910" exec-time="6076" queue-time="0" op-digest="a5b2a4f5c557278af14d6cbffc5a229d" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+            <lrm_rsc_op id="redis_last_failure_0" operation_key="redis_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="138:1899:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:8;138:1899:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="80" rc-code="8" op-status="0" interval="60000" last-rc-change="1505143894" exec-time="0" queue-time="0" op-digest="992feffd37882eb5ce9bfc847b2fa75e" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+            <lrm_rsc_op id="redis_monitor_60000" operation_key="redis_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="141:1909:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;141:1909:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="2030" rc-code="0" op-status="0" interval="60000" last-rc-change="1505143925" exec-time="1166" queue-time="0" op-digest="992feffd37882eb5ce9bfc847b2fa75e" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+            <lrm_rsc_op id="redis_monitor_45000" operation_key="redis_monitor_45000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="140:1909:0:5030f43e-a349-47db-a369-6cf7555e61d3" transition-magic="0:0;140:1909:0:5030f43e-a349-47db-a369-6cf7555e61d3" on_node="controller-2" call-id="2031" rc-code="0" op-status="0" interval="45000" last-rc-change="1505143926" exec-time="1121" queue-time="1124" op-digest="992feffd37882eb5ce9bfc847b2fa75e" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+      <transient_attributes id="redis-bundle-2">
+        <instance_attributes id="status-redis-bundle-2">
+          <nvpair id="status-redis-bundle-2-fail-count-redis" name="fail-count-redis" value="1"/>
+          <nvpair id="status-redis-bundle-2-last-failure-redis" name="last-failure-redis" value="1505143894"/>
+          <nvpair id="status-redis-bundle-2-master-redis" name="master-redis" value="1"/>
+        </instance_attributes>
+      </transient_attributes>
+    </node_state>
+    <node_state remote_node="true" id="redis-bundle-1" uname="redis-bundle-1" in_ccm="true" crm-debug-origin="do_state_transition" node_fenced="0">
+      <transient_attributes id="redis-bundle-1">
+        <instance_attributes id="status-redis-bundle-1">
+          <nvpair id="status-redis-bundle-1-master-redis" name="master-redis" value="1"/>
+        </instance_attributes>
+      </transient_attributes>
+      <lrm id="redis-bundle-1">
+        <lrm_resources>
+          <lrm_resource id="redis" type="redis" class="ocf" provider="heartbeat">
+            <lrm_rsc_op id="redis_last_0" operation_key="redis_start_0" operation="start" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="135:21:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;135:21:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="7" rc-code="0" op-status="0" interval="0" last-run="1505211890" last-rc-change="1505211890" exec-time="6751" queue-time="1" op-digest="a5b2a4f5c557278af14d6cbffc5a229d" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+            <lrm_rsc_op id="redis_monitor_60000" operation_key="redis_monitor_60000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="138:22:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;138:22:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="85" rc-code="0" op-status="0" interval="60000" last-rc-change="1505211919" exec-time="1072" queue-time="0" op-digest="992feffd37882eb5ce9bfc847b2fa75e" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+            <lrm_rsc_op id="redis_monitor_45000" operation_key="redis_monitor_45000" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.12" transition-key="137:22:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" transition-magic="0:0;137:22:0:5d83e3c7-3fae-4ec0-b903-5c8f7b5c42ae" on_node="controller-1" call-id="86" rc-code="0" op-status="0" interval="45000" last-rc-change="1505211920" exec-time="1066" queue-time="1031" op-digest="992feffd37882eb5ce9bfc847b2fa75e" op-secure-params=" user " op-secure-digest="a5b2a4f5c557278af14d6cbffc5a229d"/>
+          </lrm_resource>
+        </lrm_resources>
+      </lrm>
+    </node_state>
+  </status>
+</cib>
-- 
1.8.3.1


From 14583c664638d17a14bccfd130739c7242f5cec4 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Wed, 20 Sep 2017 21:53:00 +1000
Subject: [PATCH 10/21] Fix: PE: Resources in bundles should also respect
 failcounts

---
 pengine/container.c | 35 ++++++++++++++++++++++++++++++++++-
 1 file changed, 34 insertions(+), 1 deletion(-)

diff --git a/pengine/container.c b/pengine/container.c
index 1e9b971..0e556bb 100644
--- a/pengine/container.c
+++ b/pengine/container.c
@@ -74,6 +74,38 @@ static GListPtr get_containers_or_children(resource_t *rsc)
     }
 }
 
+static bool
+migration_threshold_reached(resource_t *rsc, node_t *node,
+                            pe_working_set_t *data_set)
+{
+    int fail_count, countdown;
+
+    /* Migration threshold of 0 means never force away */
+    if (rsc->migration_threshold == 0) {
+        return FALSE;
+    }
+
+    /* If there are no failures, there's no need to force away */
+    fail_count = get_failcount_all(node, rsc, NULL, data_set);
+    if (fail_count <= 0) {
+        return FALSE;
+    }
+
+    /* How many more times recovery will be tried on this node */
+    countdown = QB_MAX(rsc->migration_threshold - fail_count, 0);
+
+    if (countdown == 0) {
+        crm_warn("Forcing %s away from %s after %d failures (max=%d)",
+                 rsc->id, node->details->uname, fail_count,
+                 rsc->migration_threshold);
+        return TRUE;
+    }
+
+    crm_info("%s can fail %d more times on %s before being forced off",
+             rsc->id, countdown, node->details->uname);
+    return FALSE;
+}
+
 node_t *
 container_color(resource_t * rsc, node_t * prefer, pe_working_set_t * data_set)
 {
@@ -128,7 +160,7 @@ container_color(resource_t * rsc, node_t * prefer, pe_working_set_t * data_set)
             while (g_hash_table_iter_next(&iter, NULL, (gpointer *) & node)) {
                 if(node->details != tuple->node->details) {
                     node->weight = -INFINITY;
-                } else {
+                } else if(migration_threshold_reached(tuple->child, node, data_set) == FALSE) {
                     node->weight = INFINITY;
                 }
             }
@@ -158,6 +190,7 @@ container_color(resource_t * rsc, node_t * prefer, pe_working_set_t * data_set)
     return NULL;
 }
 
+
 void
 container_create_actions(resource_t * rsc, pe_working_set_t * data_set)
 {
-- 
1.8.3.1


From 1eacc741d04098d24b97631a273501ef0aff2fc1 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Thu, 21 Sep 2017 20:59:16 +1000
Subject: [PATCH 11/21] crm_resource: Do not send history erasure commands for
 nodes where this is none

If a resource is not known on a given node, thats because we have no
operation history for it there.  So there is no benefit to requesting a
cleanup for that resource/node combination.
---
 tools/crm_resource_runtime.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/tools/crm_resource_runtime.c b/tools/crm_resource_runtime.c
index 8f9ae0d..210ea7d 100644
--- a/tools/crm_resource_runtime.c
+++ b/tools/crm_resource_runtime.c
@@ -573,7 +573,7 @@ send_lrm_rsc_op(crm_ipc_t * crmd_channel, const char *op,
         rc = 0;
 
     } else {
-        CMD_ERR("Could not send %s op to the crmd", op);
+        crm_debug("Could not send %s op to the crmd", op);
         rc = -ENOTCONN;
     }
 
@@ -627,8 +627,9 @@ cli_resource_delete(crm_ipc_t *crmd_channel, const char *host_uname,
 
     } else if (host_uname == NULL) {
         GListPtr lpc = NULL;
+        GListPtr nodes = g_hash_table_get_values(rsc->known_on);
 
-        for (lpc = data_set->nodes; lpc != NULL; lpc = lpc->next) {
+        for (lpc = nodes; lpc != NULL; lpc = lpc->next) {
             node = (node_t *) lpc->data;
 
             if (node->details->online) {
@@ -637,6 +638,7 @@ cli_resource_delete(crm_ipc_t *crmd_channel, const char *host_uname,
             }
         }
 
+        g_list_free(nodes);
         return pcmk_ok;
     }
 
-- 
1.8.3.1


From e10299600e87356114dbb96df981c2ff196b8f9e Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Fri, 22 Sep 2017 19:51:35 +1000
Subject: [PATCH 12/21] Log: attrd: Tweak log messages for clarity

---
 attrd/commands.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/attrd/commands.c b/attrd/commands.c
index 6f40d60..96a1167 100644
--- a/attrd/commands.c
+++ b/attrd/commands.c
@@ -670,12 +670,12 @@ attrd_peer_remove(const char *host, gboolean uncache, const char *source)
     GHashTableIter aIter;
 
     CRM_CHECK(host != NULL, return);
-    crm_notice("Removing all %s attributes for %s", host, source);
+    crm_notice("Removing all %s attributes for peer %s", host, source);
 
     g_hash_table_iter_init(&aIter, attributes);
     while (g_hash_table_iter_next(&aIter, NULL, (gpointer *) & a)) {
         if(g_hash_table_remove(a->values, host)) {
-            crm_debug("Removed %s[%s] for %s", a->id, host, source);
+            crm_debug("Removed %s[%s] for peer %s", a->id, host, source);
         }
     }
 
-- 
1.8.3.1


From e4bd6faed4481c10befd65e5c8315d81d5e8e43d Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Fri, 22 Sep 2017 20:03:02 +1000
Subject: [PATCH 13/21] PE: Revert e21a4d00 since we will support probing
 remote connections

Also it causes containers to be unnecessarily restarted when the admin
triggers a cleanup.
---
 lib/pengine/unpack.c | 24 +-----------------------
 1 file changed, 1 insertion(+), 23 deletions(-)

diff --git a/lib/pengine/unpack.c b/lib/pengine/unpack.c
index 6e0651e..859d638 100644
--- a/lib/pengine/unpack.c
+++ b/lib/pengine/unpack.c
@@ -2342,9 +2342,6 @@ unpack_lrm_resources(node_t * node, xmlNode * lrm_rsc_list, pe_working_set_t * d
 {
     xmlNode *rsc_entry = NULL;
     gboolean found_orphaned_container_filler = FALSE;
-    GListPtr unexpected_containers = NULL;
-    GListPtr gIter = NULL;
-    resource_t *remote = NULL;
 
     CRM_CHECK(node != NULL, return FALSE);
 
@@ -2354,31 +2351,13 @@ unpack_lrm_resources(node_t * node, xmlNode * lrm_rsc_list, pe_working_set_t * d
          rsc_entry = __xml_next_element(rsc_entry)) {
 
         if (crm_str_eq((const char *)rsc_entry->name, XML_LRM_TAG_RESOURCE, TRUE)) {
-            resource_t *rsc;
-            rsc = unpack_lrm_rsc_state(node, rsc_entry, data_set);
+            resource_t *rsc = unpack_lrm_rsc_state(node, rsc_entry, data_set);
             if (!rsc) {
                 continue;
             }
             if (is_set(rsc->flags, pe_rsc_orphan_container_filler)) {
                 found_orphaned_container_filler = TRUE;
             }
-            if (is_set(rsc->flags, pe_rsc_unexpectedly_running)) {
-                remote = rsc_contains_remote_node(data_set, rsc);
-                if (remote) {
-                    unexpected_containers = g_list_append(unexpected_containers, remote);
-                }
-            }
-        }
-    }
-
-    /* If a container resource is unexpectedly up... and the remote-node
-     * connection resource for that container is not up, the entire container
-     * must be recovered. */
-    for (gIter = unexpected_containers; gIter != NULL; gIter = gIter->next) {
-        remote = (resource_t *) gIter->data;
-        if (remote->role != RSC_ROLE_STARTED) {
-            crm_warn("Recovering container resource %s. Resource is unexpectedly running and involves a remote-node.", remote->container->id);
-            set_bit(remote->container->flags, pe_rsc_failed);
         }
     }
 
@@ -2388,7 +2367,6 @@ unpack_lrm_resources(node_t * node, xmlNode * lrm_rsc_list, pe_working_set_t * d
     if (found_orphaned_container_filler) {
         handle_orphaned_container_fillers(lrm_rsc_list, data_set);
     }
-    g_list_free(unexpected_containers);
     return TRUE;
 }
 
-- 
1.8.3.1


From 12d453ccfa3a3a36456e6c2985f65137fde2a01d Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Mon, 25 Sep 2017 17:48:40 +1000
Subject: [PATCH 14/21] PE: Implement probing of container remote nodes

---
 include/crm/pengine/status.h                       |   7 +
 lib/pengine/container.c                            |   3 +
 pengine/allocate.c                                 |   3 +-
 pengine/native.c                                   |  71 +++-
 pengine/pengine.h                                  |   6 -
 pengine/test10/bug-cl-5247.dot                     |   6 +
 pengine/test10/bug-cl-5247.exp                     | 346 +++++++++-------
 pengine/test10/bug-cl-5247.summary                 |   2 +
 pengine/test10/bug-rh-1097457.dot                  |  32 ++
 pengine/test10/bug-rh-1097457.exp                  | 456 +++++++++++++++------
 pengine/test10/bug-rh-1097457.summary              |  20 +
 pengine/test10/bundle-order-partial-start-2.dot    |   2 +
 pengine/test10/bundle-order-partial-start-2.exp    | 282 +++++++------
 .../test10/bundle-order-partial-start-2.summary    |   1 +
 pengine/test10/bundle-order-partial-start.dot      |   2 +
 pengine/test10/bundle-order-partial-start.exp      | 272 ++++++------
 pengine/test10/bundle-order-partial-start.summary  |   1 +
 pengine/test10/bundle-order-startup.exp            |   8 +-
 pengine/test10/container-is-remote-node.dot        |   4 +
 pengine/test10/container-is-remote-node.exp        |  39 +-
 pengine/test10/container-is-remote-node.summary    |   4 +
 pengine/test10/guest-node-host-dies.dot            |   2 +
 pengine/test10/guest-node-host-dies.exp            |   6 +
 pengine/test10/whitebox-asymmetric.dot             |   4 +
 pengine/test10/whitebox-asymmetric.exp             |  48 ++-
 pengine/test10/whitebox-asymmetric.summary         |   2 +
 pengine/test10/whitebox-fail1.dot                  |   5 +
 pengine/test10/whitebox-fail1.exp                  | 145 ++++---
 pengine/test10/whitebox-fail1.summary              |   3 +
 pengine/test10/whitebox-fail2.dot                  |   5 +
 pengine/test10/whitebox-fail2.exp                  | 145 ++++---
 pengine/test10/whitebox-fail2.summary              |   3 +
 pengine/test10/whitebox-fail3.dot                  |   3 +
 pengine/test10/whitebox-fail3.exp                  |  15 +-
 pengine/test10/whitebox-fail3.summary              |   4 +-
 pengine/test10/whitebox-imply-stop-on-fence.dot    |  19 +
 pengine/test10/whitebox-imply-stop-on-fence.exp    | 325 ++++++++++-----
 .../test10/whitebox-imply-stop-on-fence.summary    |   8 +
 pengine/test10/whitebox-migrate1.dot               |   1 +
 pengine/test10/whitebox-move.dot                   |   3 +
 pengine/test10/whitebox-move.exp                   | 108 ++---
 pengine/test10/whitebox-move.summary               |   3 +-
 pengine/test10/whitebox-ms-ordering-move.dot       |  12 +
 pengine/test10/whitebox-ms-ordering-move.exp       | 294 ++++++++-----
 pengine/test10/whitebox-ms-ordering-move.summary   |  12 +
 pengine/test10/whitebox-nested-group.dot           |  21 +
 pengine/test10/whitebox-nested-group.exp           |  66 ++-
 pengine/test10/whitebox-nested-group.summary       |  16 +-
 pengine/test10/whitebox-orphan-ms.dot              |  18 +
 pengine/test10/whitebox-orphan-ms.exp              |  92 ++---
 pengine/test10/whitebox-orphaned.dot               |   8 +
 pengine/test10/whitebox-orphaned.exp               | 120 ++++--
 pengine/test10/whitebox-orphaned.summary           |   9 +-
 pengine/test10/whitebox-start.dot                  |   4 +
 pengine/test10/whitebox-start.exp                  |  99 +++--
 pengine/test10/whitebox-start.summary              |  10 +-
 pengine/test10/whitebox-stop.dot                   |   5 +
 pengine/test10/whitebox-stop.exp                   |  82 ++--
 pengine/test10/whitebox-stop.summary               |   9 +-
 pengine/test10/whitebox-unexpectedly-running.dot   |  24 +-
 pengine/test10/whitebox-unexpectedly-running.exp   | 112 +++--
 .../test10/whitebox-unexpectedly-running.scores    |   8 +
 .../test10/whitebox-unexpectedly-running.summary   |  23 +-
 pengine/test10/whitebox-unexpectedly-running.xml   |  11 +
 64 files changed, 2322 insertions(+), 1157 deletions(-)

diff --git a/include/crm/pengine/status.h b/include/crm/pengine/status.h
index fcd5226..dc5f6eb 100644
--- a/include/crm/pengine/status.h
+++ b/include/crm/pengine/status.h
@@ -395,6 +395,13 @@ enum pe_link_state {
     pe_link_dup,
 };
 
+
+enum rsc_discover_e {
+    discover_always = 0,
+    discover_never,
+    discover_exclusive,
+};
+
 /* *INDENT-OFF* */
 enum pe_ordering {
     pe_order_none                  = 0x0,       /* deleted */
diff --git a/lib/pengine/container.c b/lib/pengine/container.c
index 5831b58..a550ff3 100644
--- a/lib/pengine/container.c
+++ b/lib/pengine/container.c
@@ -348,6 +348,7 @@ disallow_node(resource_t *rsc, const char *uname)
 
     if (match) {
         ((pe_node_t *) match)->weight = -INFINITY;
+        ((pe_node_t *) match)->rsc_discover_mode = discover_never;
     }
     if (rsc->children) {
         GListPtr child;
@@ -434,6 +435,7 @@ create_remote_resource(
         } else {
             node->weight = -INFINITY;
         }
+        node->rsc_discover_mode = discover_never;
 
         /* unpack_remote_nodes() ensures that each remote node and guest node
          * has a pe_node_t entry. Ideally, it would do the same for bundle nodes.
@@ -458,6 +460,7 @@ create_remote_resource(
 
         tuple->node = node_copy(node);
         tuple->node->weight = 500;
+        tuple->node->rsc_discover_mode = discover_exclusive;
 
         if (common_unpack(xml_remote, &tuple->remote, parent, data_set) == FALSE) {
             return FALSE;
diff --git a/pengine/allocate.c b/pengine/allocate.c
index d610035..401c18e 100644
--- a/pengine/allocate.c
+++ b/pengine/allocate.c
@@ -900,8 +900,7 @@ probe_resources(pe_working_set_t * data_set)
         const char *probed = node_attribute_raw(node, CRM_OP_PROBED);
 
         if (is_container_remote_node(node)) {
-            /* TODO enable guest node probes once ordered probing is implemented */
-            continue;
+            /* Guest node probes and their ordering requirements are now functional */
 
         } else if (node->details->online == FALSE && node->details->remote_rsc) {
             enum remote_connection_state state = get_remote_node_state(node);
diff --git a/pengine/native.c b/pengine/native.c
index 37cf541..2e40a4c 100644
--- a/pengine/native.c
+++ b/pengine/native.c
@@ -2784,10 +2784,6 @@ native_create_probe(resource_t * rsc, node_t * node, action_t * complete,
     if (force == FALSE && is_not_set(data_set->flags, pe_flag_startup_probes)) {
         pe_rsc_trace(rsc, "Skipping active resource detection for %s", rsc->id);
         return FALSE;
-    } else if (force == FALSE && is_container_remote_node(node)) {
-        pe_rsc_trace(rsc, "Skipping active resource detection for %s on container %s",
-                     rsc->id, node->details->id);
-        return FALSE;
     }
 
     if (is_remote_node(node)) {
@@ -2847,6 +2843,7 @@ native_create_probe(resource_t * rsc, node_t * node, action_t * complete,
     }
 
     allowed = g_hash_table_lookup(rsc->allowed_nodes, node->details->id);
+
     if (rsc->exclusive_discover || top->exclusive_discover) {
         if (allowed == NULL) {
             /* exclusive discover is enabled and this node is not in the allowed list. */    
@@ -2857,11 +2854,77 @@ native_create_probe(resource_t * rsc, node_t * node, action_t * complete,
             return FALSE;
         }
     }
+
+    if(allowed == NULL && node->rsc_discover_mode == discover_never) {
+        /* If this node was allowed to host this resource it would
+         * have been explicitly added to the 'allowed_nodes' list.
+         * However it wasn't and the node has discovery disabled, so
+         * no need to probe for this resource.
+         */
+        return FALSE;
+    }
+
     if (allowed && allowed->rsc_discover_mode == discover_never) {
         /* this resource is marked as not needing to be discovered on this node */
         return FALSE;
     }
 
+    if(allowed != NULL && is_container_remote_node(allowed)) {
+        resource_t *remote = allowed->details->remote_rsc;
+
+        if(remote->role == RSC_ROLE_STOPPED) {
+            /* If the container is stopped, then we know anything that
+             * might have been inside it is also stopped and there is
+             * no need to probe.
+             *
+             * If we don't know the container's state on the target
+             * either:
+             *
+             * - the container is running, the transition will abort
+             *   and we'll end up in a different case next time, or
+             *
+             * - the container is stopped
+             *
+             * Either way there is no need to probe.
+             *
+             */
+            if(remote->allocated_to
+               && g_hash_table_lookup(remote->known_on, remote->allocated_to->details->id) == NULL) {
+                /* For safety, we order the 'rsc' start after 'remote'
+                 * has been probed.
+                 *
+                 * Using 'top' helps for groups, but in we may need to
+                 * follow the start's ordering chain backwards.
+                 */
+                custom_action_order(remote, generate_op_key(remote->id, RSC_STATUS, 0), NULL,
+                                    top, generate_op_key(top->id, RSC_START, 0), NULL,
+                                    pe_order_optional, data_set);
+            }
+            return FALSE;
+
+            /* Here we really we want to check if remote->stop is required,
+             * but that information doesn't exist yet
+             */
+        } else if(allowed->details->remote_requires_reset
+                  || allowed->details->unclean
+                  || is_set(remote->flags, pe_rsc_failed)
+                  || remote->next_role == RSC_ROLE_STOPPED
+                  || (remote->allocated_to
+                      && pe_find_node(remote->running_on, remote->allocated_to->details->uname) == NULL)
+            ) {
+            /* The container is stopping or restarting, don't start
+             * 'rsc' until 'remote' stops as this also implies that
+             * 'rsc' is stopped - avoiding the need to probe
+             */
+            custom_action_order(remote, generate_op_key(remote->id, RSC_STOP, 0), NULL,
+                                top, generate_op_key(top->id, RSC_START, 0), NULL,
+                                pe_order_optional, data_set);
+            return FALSE;
+/*      } else {
+ *            The container is running so there is no problem probing it
+ */
+        }
+    }
 
     key = generate_op_key(rsc->id, RSC_STATUS, 0);
     probe = custom_action(rsc, key, RSC_STATUS, node, FALSE, TRUE, data_set);
diff --git a/pengine/pengine.h b/pengine/pengine.h
index e3f4874..2c13258 100644
--- a/pengine/pengine.h
+++ b/pengine/pengine.h
@@ -75,12 +75,6 @@ struct rsc_ticket_s {
     int role_lh;
 };
 
-enum rsc_discover_e {
-    discover_always = 0,
-    discover_never,
-    discover_exclusive,
-};
-
 struct rsc_to_node_s {
     char *id;
     resource_t *rsc_lh;
diff --git a/pengine/test10/bug-cl-5247.dot b/pengine/test10/bug-cl-5247.dot
index 44f788d..decf5c3 100644
--- a/pengine/test10/bug-cl-5247.dot
+++ b/pengine/test10/bug-cl-5247.dot
@@ -127,6 +127,9 @@ digraph "g" {
 "stonith_complete" -> "vip-master_start_0 pgsr01" [ style = bold]
 "stonith_complete" -> "vip-rep_start_0 pgsr01" [ style = bold]
 "stonith_complete" [ style=bold color="green" fontcolor="orange"]
+"vip-master_monitor_0 pgsr01" -> "vip-master_start_0 pgsr01" [ style = bold]
+"vip-master_monitor_0 pgsr01" -> "vip-master_stop_0 pgsr02" [ style = bold]
+"vip-master_monitor_0 pgsr01" [ style=bold color="green" fontcolor="black"]
 "vip-master_monitor_10000 pgsr01" [ style=bold color="green" fontcolor="black"]
 "vip-master_start_0 pgsr01" -> "master-group_running_0" [ style = bold]
 "vip-master_start_0 pgsr01" -> "vip-master_monitor_10000 pgsr01" [ style = bold]
@@ -136,6 +139,9 @@ digraph "g" {
 "vip-master_stop_0 pgsr02" -> "master-group_stopped_0" [ style = bold]
 "vip-master_stop_0 pgsr02" -> "vip-master_start_0 pgsr01" [ style = bold]
 "vip-master_stop_0 pgsr02" [ style=bold color="green" fontcolor="orange"]
+"vip-rep_monitor_0 pgsr01" -> "vip-rep_start_0 pgsr01" [ style = bold]
+"vip-rep_monitor_0 pgsr01" -> "vip-rep_stop_0 pgsr02" [ style = bold]
+"vip-rep_monitor_0 pgsr01" [ style=bold color="green" fontcolor="black"]
 "vip-rep_monitor_10000 pgsr01" [ style=bold color="green" fontcolor="black"]
 "vip-rep_start_0 pgsr01" -> "master-group_running_0" [ style = bold]
 "vip-rep_start_0 pgsr01" -> "vip-rep_monitor_10000 pgsr01" [ style = bold]
diff --git a/pengine/test10/bug-cl-5247.exp b/pengine/test10/bug-cl-5247.exp
index 2ec83c0..47c369a 100644
--- a/pengine/test10/bug-cl-5247.exp
+++ b/pengine/test10/bug-cl-5247.exp
@@ -8,28 +8,28 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="68" operation="stop" operation_key="pgsr02_stop_0" on_node="bl460g8n4" on_node_uuid="3232261400"/>
+        <rsc_op id="70" operation="stop" operation_key="pgsr02_stop_0" on_node="bl460g8n4" on_node_uuid="3232261400"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <pseudo_event id="19" operation="stopped" operation_key="grpStonith1_stopped_0">
+      <pseudo_event id="21" operation="stopped" operation_key="grpStonith1_stopped_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="15" operation="stop" operation_key="prmStonith1-2_stop_0" on_node="bl460g8n4" on_node_uuid="3232261400"/>
+        <rsc_op id="17" operation="stop" operation_key="prmStonith1-2_stop_0" on_node="bl460g8n4" on_node_uuid="3232261400"/>
       </trigger>
       <trigger>
-        <pseudo_event id="18" operation="stop" operation_key="grpStonith1_stop_0"/>
+        <pseudo_event id="20" operation="stop" operation_key="grpStonith1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="18" operation="stop" operation_key="grpStonith1_stop_0">
+      <pseudo_event id="20" operation="stop" operation_key="grpStonith1_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -37,7 +37,7 @@
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="17" operation="running" operation_key="grpStonith1_running_0">
+      <pseudo_event id="19" operation="running" operation_key="grpStonith1_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -46,32 +46,32 @@
         <rsc_op id="9" operation="start" operation_key="prmStonith1-2_start_0" on_node="bl460g8n4" on_node_uuid="3232261400"/>
       </trigger>
       <trigger>
-        <pseudo_event id="16" operation="start" operation_key="grpStonith1_start_0"/>
+        <pseudo_event id="18" operation="start" operation_key="grpStonith1_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="16" operation="start" operation_key="grpStonith1_start_0">
+      <pseudo_event id="18" operation="start" operation_key="grpStonith1_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="19" operation="stopped" operation_key="grpStonith1_stopped_0"/>
+        <pseudo_event id="21" operation="stopped" operation_key="grpStonith1_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <rsc_op id="15" operation="stop" operation_key="prmStonith1-2_stop_0" on_node="bl460g8n4" on_node_uuid="3232261400">
+      <rsc_op id="17" operation="stop" operation_key="prmStonith1-2_stop_0" on_node="bl460g8n4" on_node_uuid="3232261400">
         <primitive id="prmStonith1-2" class="stonith" type="external/ipmi"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_fail="ignore" CRM_meta_on_node="bl460g8n4" CRM_meta_on_node_uuid="3232261400" CRM_meta_timeout="60000"  hostname="bl460g8n3" interface="lanplus" ipaddr="192.168.28.43" passwd="****" pcmk_reboot_timeout="60s" userid="USERID"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="18" operation="stop" operation_key="grpStonith1_stop_0"/>
+        <pseudo_event id="20" operation="stop" operation_key="grpStonith1_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -87,10 +87,10 @@
         <pseudo_event id="8" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <rsc_op id="15" operation="stop" operation_key="prmStonith1-2_stop_0" on_node="bl460g8n4" on_node_uuid="3232261400"/>
+        <rsc_op id="17" operation="stop" operation_key="prmStonith1-2_stop_0" on_node="bl460g8n4" on_node_uuid="3232261400"/>
       </trigger>
       <trigger>
-        <pseudo_event id="16" operation="start" operation_key="grpStonith1_start_0"/>
+        <pseudo_event id="18" operation="start" operation_key="grpStonith1_start_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -109,22 +109,22 @@
   </synapse>
   <synapse id="8">
     <action_set>
-      <pseudo_event id="24" operation="stopped" operation_key="grpStonith2_stopped_0">
+      <pseudo_event id="26" operation="stopped" operation_key="grpStonith2_stopped_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="20" operation="stop" operation_key="prmStonith2-2_stop_0" on_node="bl460g8n3" on_node_uuid="3232261399"/>
+        <rsc_op id="22" operation="stop" operation_key="prmStonith2-2_stop_0" on_node="bl460g8n3" on_node_uuid="3232261399"/>
       </trigger>
       <trigger>
-        <pseudo_event id="23" operation="stop" operation_key="grpStonith2_stop_0"/>
+        <pseudo_event id="25" operation="stop" operation_key="grpStonith2_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <pseudo_event id="23" operation="stop" operation_key="grpStonith2_stop_0">
+      <pseudo_event id="25" operation="stop" operation_key="grpStonith2_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -132,7 +132,7 @@
   </synapse>
   <synapse id="10">
     <action_set>
-      <pseudo_event id="22" operation="running" operation_key="grpStonith2_running_0">
+      <pseudo_event id="24" operation="running" operation_key="grpStonith2_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -141,32 +141,32 @@
         <rsc_op id="10" operation="start" operation_key="prmStonith2-2_start_0" on_node="bl460g8n3" on_node_uuid="3232261399"/>
       </trigger>
       <trigger>
-        <pseudo_event id="21" operation="start" operation_key="grpStonith2_start_0"/>
+        <pseudo_event id="23" operation="start" operation_key="grpStonith2_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <pseudo_event id="21" operation="start" operation_key="grpStonith2_start_0">
+      <pseudo_event id="23" operation="start" operation_key="grpStonith2_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="24" operation="stopped" operation_key="grpStonith2_stopped_0"/>
+        <pseudo_event id="26" operation="stopped" operation_key="grpStonith2_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <rsc_op id="20" operation="stop" operation_key="prmStonith2-2_stop_0" on_node="bl460g8n3" on_node_uuid="3232261399">
+      <rsc_op id="22" operation="stop" operation_key="prmStonith2-2_stop_0" on_node="bl460g8n3" on_node_uuid="3232261399">
         <primitive id="prmStonith2-2" class="stonith" type="external/ipmi"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_fail="ignore" CRM_meta_on_node="bl460g8n3" CRM_meta_on_node_uuid="3232261399" CRM_meta_timeout="60000"  hostname="bl460g8n4" interface="lanplus" ipaddr="192.168.28.44" passwd="****" pcmk_reboot_timeout="60s" userid="USERID"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="23" operation="stop" operation_key="grpStonith2_stop_0"/>
+        <pseudo_event id="25" operation="stop" operation_key="grpStonith2_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -182,10 +182,10 @@
         <pseudo_event id="8" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <rsc_op id="20" operation="stop" operation_key="prmStonith2-2_stop_0" on_node="bl460g8n3" on_node_uuid="3232261399"/>
+        <rsc_op id="22" operation="stop" operation_key="prmStonith2-2_stop_0" on_node="bl460g8n3" on_node_uuid="3232261399"/>
       </trigger>
       <trigger>
-        <pseudo_event id="21" operation="start" operation_key="grpStonith2_start_0"/>
+        <pseudo_event id="23" operation="start" operation_key="grpStonith2_start_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -204,472 +204,502 @@
   </synapse>
   <synapse id="15">
     <action_set>
-      <pseudo_event id="34" operation="stopped" operation_key="master-group_stopped_0">
+      <pseudo_event id="36" operation="stopped" operation_key="master-group_stopped_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="25" operation="stop" operation_key="vip-master_stop_0"/>
+        <pseudo_event id="27" operation="stop" operation_key="vip-master_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="28" operation="stop" operation_key="vip-rep_stop_0"/>
+        <pseudo_event id="30" operation="stop" operation_key="vip-rep_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="33" operation="stop" operation_key="master-group_stop_0"/>
+        <pseudo_event id="35" operation="stop" operation_key="master-group_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="16">
     <action_set>
-      <pseudo_event id="33" operation="stop" operation_key="master-group_stop_0">
+      <pseudo_event id="35" operation="stop" operation_key="master-group_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="65" operation="notified" operation_key="msPostgresql_confirmed-post_notify_demoted_0"/>
+        <pseudo_event id="67" operation="notified" operation_key="msPostgresql_confirmed-post_notify_demoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="70" operation="stonith" operation_key="stonith-pgsr02-off" on_node="pgsr02" on_node_uuid="pgsr02"/>
+        <pseudo_event id="72" operation="stonith" operation_key="stonith-pgsr02-off" on_node="pgsr02" on_node_uuid="pgsr02"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="17">
     <action_set>
-      <pseudo_event id="32" operation="running" operation_key="master-group_running_0">
+      <pseudo_event id="34" operation="running" operation_key="master-group_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="26" operation="start" operation_key="vip-master_start_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
+        <rsc_op id="28" operation="start" operation_key="vip-master_start_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
       </trigger>
       <trigger>
-        <rsc_op id="29" operation="start" operation_key="vip-rep_start_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
+        <rsc_op id="31" operation="start" operation_key="vip-rep_start_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="31" operation="start" operation_key="master-group_start_0"/>
+        <pseudo_event id="33" operation="start" operation_key="master-group_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="18">
     <action_set>
-      <pseudo_event id="31" operation="start" operation_key="master-group_start_0">
+      <pseudo_event id="33" operation="start" operation_key="master-group_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="34" operation="stopped" operation_key="master-group_stopped_0"/>
+        <pseudo_event id="36" operation="stopped" operation_key="master-group_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="19">
     <action_set>
-      <rsc_op id="27" operation="monitor" operation_key="vip-master_monitor_10000" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
+      <rsc_op id="29" operation="monitor" operation_key="vip-master_monitor_10000" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
         <primitive id="vip-master" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_fail="restart" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_physical_host="bl460g8n3" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="26" operation="start" operation_key="vip-master_start_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
+        <rsc_op id="28" operation="start" operation_key="vip-master_start_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="20">
     <action_set>
-      <rsc_op id="26" operation="start" operation_key="vip-master_start_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
+      <rsc_op id="28" operation="start" operation_key="vip-master_start_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
         <primitive id="vip-master" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_fail="restart" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_physical_host="bl460g8n3" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="25" operation="stop" operation_key="vip-master_stop_0"/>
+        <rsc_op id="13" operation="monitor" operation_key="vip-master_monitor_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="31" operation="start" operation_key="master-group_start_0"/>
+        <pseudo_event id="27" operation="stop" operation_key="vip-master_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="69" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="33" operation="start" operation_key="master-group_start_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="71" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21">
     <action_set>
-      <pseudo_event id="25" operation="stop" operation_key="vip-master_stop_0">
+      <pseudo_event id="27" operation="stop" operation_key="vip-master_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_on_fail="fence" CRM_meta_physical_host="bl460g8n4" CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="28" operation="stop" operation_key="vip-rep_stop_0"/>
+        <rsc_op id="13" operation="monitor" operation_key="vip-master_monitor_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="30" operation="stop" operation_key="vip-rep_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="33" operation="stop" operation_key="master-group_stop_0"/>
+        <pseudo_event id="35" operation="stop" operation_key="master-group_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="70" operation="stonith" operation_key="stonith-pgsr02-off" on_node="pgsr02" on_node_uuid="pgsr02"/>
+        <pseudo_event id="72" operation="stonith" operation_key="stonith-pgsr02-off" on_node="pgsr02" on_node_uuid="pgsr02"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="22">
     <action_set>
-      <rsc_op id="30" operation="monitor" operation_key="vip-rep_monitor_10000" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
+      <rsc_op id="13" operation="monitor" operation_key="vip-master_monitor_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
+        <primitive id="vip-master" class="ocf" provider="heartbeat" type="Dummy"/>
+        <attributes CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_op_target_rc="7" CRM_meta_physical_host="bl460g8n3" CRM_meta_timeout="60000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="23">
+    <action_set>
+      <rsc_op id="32" operation="monitor" operation_key="vip-rep_monitor_10000" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
         <primitive id="vip-rep" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_fail="restart" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_physical_host="bl460g8n3" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="29" operation="start" operation_key="vip-rep_start_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
+        <rsc_op id="31" operation="start" operation_key="vip-rep_start_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="23">
+  <synapse id="24">
     <action_set>
-      <rsc_op id="29" operation="start" operation_key="vip-rep_start_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
+      <rsc_op id="31" operation="start" operation_key="vip-rep_start_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
         <primitive id="vip-rep" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_fail="stop" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_physical_host="bl460g8n3" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="26" operation="start" operation_key="vip-master_start_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
+        <rsc_op id="14" operation="monitor" operation_key="vip-rep_monitor_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="28" operation="start" operation_key="vip-master_start_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="28" operation="stop" operation_key="vip-rep_stop_0"/>
+        <pseudo_event id="30" operation="stop" operation_key="vip-rep_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="31" operation="start" operation_key="master-group_start_0"/>
+        <pseudo_event id="33" operation="start" operation_key="master-group_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="69" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="71" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="24">
+  <synapse id="25">
     <action_set>
-      <pseudo_event id="28" operation="stop" operation_key="vip-rep_stop_0">
+      <pseudo_event id="30" operation="stop" operation_key="vip-rep_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_on_fail="ignore" CRM_meta_physical_host="bl460g8n4" CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="33" operation="stop" operation_key="master-group_stop_0"/>
+        <rsc_op id="14" operation="monitor" operation_key="vip-rep_monitor_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="35" operation="stop" operation_key="master-group_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="70" operation="stonith" operation_key="stonith-pgsr02-off" on_node="pgsr02" on_node_uuid="pgsr02"/>
+        <pseudo_event id="72" operation="stonith" operation_key="stonith-pgsr02-off" on_node="pgsr02" on_node_uuid="pgsr02"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="25" priority="1000000">
+  <synapse id="26">
+    <action_set>
+      <rsc_op id="14" operation="monitor" operation_key="vip-rep_monitor_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
+        <primitive id="vip-rep" class="ocf" provider="heartbeat" type="Dummy"/>
+        <attributes CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_op_target_rc="7" CRM_meta_physical_host="bl460g8n3" CRM_meta_timeout="60000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="27" priority="1000000">
     <action_set>
-      <pseudo_event id="72" operation="notified" operation_key="pgsql_notified_0" internal_operation_key="pgsql:0_confirmed-post_notify_stonith_0">
+      <pseudo_event id="74" operation="notified" operation_key="pgsql_notified_0" internal_operation_key="pgsql:0_confirmed-post_notify_stonith_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="notify" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="71" operation="notify" operation_key="pgsql_post_notify_stop_0" internal_operation_key="pgsql:0_post_notify_stonith_0"/>
+        <pseudo_event id="73" operation="notify" operation_key="pgsql_post_notify_stop_0" internal_operation_key="pgsql:0_post_notify_stonith_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="73" operation="notify" operation_key="pgsql_post_notify_stop_0" internal_operation_key="pgsql:1_post_notify_stop_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
+        <rsc_op id="75" operation="notify" operation_key="pgsql_post_notify_stop_0" internal_operation_key="pgsql:1_post_notify_stop_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="26" priority="1000000">
+  <synapse id="28" priority="1000000">
     <action_set>
-      <pseudo_event id="71" operation="notify" operation_key="pgsql_post_notify_stop_0" internal_operation_key="pgsql:0_post_notify_stonith_0">
+      <pseudo_event id="73" operation="notify" operation_key="pgsql_post_notify_stop_0" internal_operation_key="pgsql:0_post_notify_stonith_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="notify" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="60000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="70" operation="stonith" operation_key="stonith-pgsr02-off" on_node="pgsr02" on_node_uuid="pgsr02"/>
+        <pseudo_event id="72" operation="stonith" operation_key="stonith-pgsr02-off" on_node="pgsr02" on_node_uuid="pgsr02"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="27">
+  <synapse id="29">
     <action_set>
-      <pseudo_event id="36" operation="stop" operation_key="pgsql_stop_0" internal_operation_key="pgsql:0_stop_0">
+      <pseudo_event id="38" operation="stop" operation_key="pgsql_stop_0" internal_operation_key="pgsql:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1" CRM_meta_notify_active_uname="pgsr02 pgsr01" CRM_meta_notify_all_uname="bl460g8n3 bl460g8n4 pgsr01 pgsr02" CRM_meta_notify_available_uname="bl460g8n4 bl460g8n3 pgsr01 pgsr02" CRM_meta_notify_demote_resource="pgsql:0" CRM_meta_notify_demote_uname="pgsr02" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="pgsql:0 pgsql:1" CRM_meta_notify_master_uname="pgsr02 pgsr01" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0" CRM_meta_notify_stop_uname="pgsr02" CRM_meta_on_fail="fence" CRM_meta_physical_host="bl460g8n4" CRM_meta_timeout="300000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="35" operation="demote" operation_key="pgsql_demote_0" internal_operation_key="pgsql:0_demote_0"/>
+        <pseudo_event id="37" operation="demote" operation_key="pgsql_demote_0" internal_operation_key="pgsql:0_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="48" operation="stop" operation_key="msPostgresql_stop_0"/>
+        <pseudo_event id="50" operation="stop" operation_key="msPostgresql_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="70" operation="stonith" operation_key="stonith-pgsr02-off" on_node="pgsr02" on_node_uuid="pgsr02"/>
+        <pseudo_event id="72" operation="stonith" operation_key="stonith-pgsr02-off" on_node="pgsr02" on_node_uuid="pgsr02"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="28">
+  <synapse id="30">
     <action_set>
-      <pseudo_event id="35" operation="demote" operation_key="pgsql_demote_0" internal_operation_key="pgsql:0_demote_0">
+      <pseudo_event id="37" operation="demote" operation_key="pgsql_demote_0" internal_operation_key="pgsql:0_demote_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1" CRM_meta_notify_active_uname="pgsr02 pgsr01" CRM_meta_notify_all_uname="bl460g8n3 bl460g8n4 pgsr01 pgsr02" CRM_meta_notify_available_uname="bl460g8n4 bl460g8n3 pgsr01 pgsr02" CRM_meta_notify_demote_resource="pgsql:0" CRM_meta_notify_demote_uname="pgsr02" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="pgsql:0 pgsql:1" CRM_meta_notify_master_uname="pgsr02 pgsr01" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0" CRM_meta_notify_stop_uname="pgsr02" CRM_meta_on_fail="fence" CRM_meta_physical_host="bl460g8n4" CRM_meta_timeout="300000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="60" operation="demote" operation_key="msPostgresql_demote_0"/>
+        <pseudo_event id="62" operation="demote" operation_key="msPostgresql_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="70" operation="stonith" operation_key="stonith-pgsr02-off" on_node="pgsr02" on_node_uuid="pgsr02"/>
+        <pseudo_event id="72" operation="stonith" operation_key="stonith-pgsr02-off" on_node="pgsr02" on_node_uuid="pgsr02"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="29" priority="1000000">
+  <synapse id="31" priority="1000000">
     <action_set>
-      <rsc_op id="83" operation="notify" operation_key="pgsql_post_notify_demote_0" internal_operation_key="pgsql:1_post_notify_demote_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
+      <rsc_op id="85" operation="notify" operation_key="pgsql_post_notify_demote_0" internal_operation_key="pgsql:1_post_notify_demote_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
         <primitive id="pgsql" long-id="pgsql:1" class="ocf" provider="heartbeat" type="Stateful"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="notify" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1" CRM_meta_notify_active_uname="pgsr02 pgsr01" CRM_meta_notify_all_uname="bl460g8n3 bl460g8n4 pgsr01 pgsr02" CRM_meta_notify_available_uname="bl460g8n4 bl460g8n3 pgsr01 pgsr02" CRM_meta_notify_demote_resource="pgsql:0" CRM_meta_notify_demote_uname="pgsr02" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="pgsql:0 pgsql:1" CRM_meta_notify_master_uname="pgsr02 pgsr01" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0" CRM_meta_notify_stop_uname="pgsr02" CRM_meta_notify_type="post" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_physical_host="bl460g8n3" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="64" operation="notify" operation_key="msPostgresql_post_notify_demoted_0"/>
+        <pseudo_event id="66" operation="notify" operation_key="msPostgresql_post_notify_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="30">
+  <synapse id="32">
     <action_set>
-      <rsc_op id="82" operation="notify" operation_key="pgsql_pre_notify_demote_0" internal_operation_key="pgsql:1_pre_notify_demote_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
+      <rsc_op id="84" operation="notify" operation_key="pgsql_pre_notify_demote_0" internal_operation_key="pgsql:1_pre_notify_demote_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
         <primitive id="pgsql" long-id="pgsql:1" class="ocf" provider="heartbeat" type="Stateful"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="notify" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1" CRM_meta_notify_active_uname="pgsr02 pgsr01" CRM_meta_notify_all_uname="bl460g8n3 bl460g8n4 pgsr01 pgsr02" CRM_meta_notify_available_uname="bl460g8n4 bl460g8n3 pgsr01 pgsr02" CRM_meta_notify_demote_resource="pgsql:0" CRM_meta_notify_demote_uname="pgsr02" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="pgsql:0 pgsql:1" CRM_meta_notify_master_uname="pgsr02 pgsr01" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0" CRM_meta_notify_stop_uname="pgsr02" CRM_meta_notify_type="pre" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_physical_host="bl460g8n3" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="62" operation="notify" operation_key="msPostgresql_pre_notify_demote_0"/>
+        <pseudo_event id="64" operation="notify" operation_key="msPostgresql_pre_notify_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="31">
+  <synapse id="33">
     <action_set>
-      <rsc_op id="79" operation="notify" operation_key="pgsql_pre_notify_stop_0" internal_operation_key="pgsql:1_pre_notify_stop_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
+      <rsc_op id="81" operation="notify" operation_key="pgsql_pre_notify_stop_0" internal_operation_key="pgsql:1_pre_notify_stop_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
         <primitive id="pgsql" long-id="pgsql:1" class="ocf" provider="heartbeat" type="Stateful"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="notify" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1" CRM_meta_notify_active_uname="pgsr02 pgsr01" CRM_meta_notify_all_uname="bl460g8n3 bl460g8n4 pgsr01 pgsr02" CRM_meta_notify_available_uname="bl460g8n4 bl460g8n3 pgsr01 pgsr02" CRM_meta_notify_demote_resource="pgsql:0" CRM_meta_notify_demote_uname="pgsr02" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="pgsql:0 pgsql:1" CRM_meta_notify_master_uname="pgsr02 pgsr01" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0" CRM_meta_notify_stop_uname="pgsr02" CRM_meta_notify_type="pre" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_physical_host="bl460g8n3" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="50" operation="notify" operation_key="msPostgresql_pre_notify_stop_0"/>
+        <pseudo_event id="52" operation="notify" operation_key="msPostgresql_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="32" priority="1000000">
+  <synapse id="34" priority="1000000">
     <action_set>
-      <rsc_op id="73" operation="notify" operation_key="pgsql_post_notify_stop_0" internal_operation_key="pgsql:1_post_notify_stop_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
+      <rsc_op id="75" operation="notify" operation_key="pgsql_post_notify_stop_0" internal_operation_key="pgsql:1_post_notify_stop_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
         <primitive id="pgsql" long-id="pgsql:1" class="ocf" provider="heartbeat" type="Stateful"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="notify" CRM_meta_notify="true" CRM_meta_notify_active_resource="pgsql:0 pgsql:1" CRM_meta_notify_active_uname="pgsr02 pgsr01" CRM_meta_notify_all_uname="bl460g8n3 bl460g8n4 pgsr01 pgsr02" CRM_meta_notify_available_uname="bl460g8n4 bl460g8n3 pgsr01 pgsr02" CRM_meta_notify_demote_resource="pgsql:0" CRM_meta_notify_demote_uname="pgsr02" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="pgsql:0 pgsql:1" CRM_meta_notify_master_uname="pgsr02 pgsr01" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="pgsql:0" CRM_meta_notify_stop_uname="pgsr02" CRM_meta_notify_type="post" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_physical_host="bl460g8n3" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="52" operation="notify" operation_key="msPostgresql_post_notify_stopped_0"/>
+        <pseudo_event id="54" operation="notify" operation_key="msPostgresql_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="71" operation="notify" operation_key="pgsql_post_notify_stop_0" internal_operation_key="pgsql:0_post_notify_stonith_0"/>
+        <pseudo_event id="73" operation="notify" operation_key="pgsql_post_notify_stop_0" internal_operation_key="pgsql:0_post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="33">
+  <synapse id="35">
     <action_set>
-      <rsc_op id="41" operation="monitor" operation_key="pgsql_monitor_9000" internal_operation_key="pgsql:1_monitor_9000" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
+      <rsc_op id="43" operation="monitor" operation_key="pgsql_monitor_9000" internal_operation_key="pgsql:1_monitor_9000" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3">
         <primitive id="pgsql" long-id="pgsql:1" class="ocf" provider="heartbeat" type="Stateful"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="9000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_fail="restart" CRM_meta_on_node="pgsr01" CRM_meta_on_node_uuid="pgsr01" CRM_meta_op_target_rc="8" CRM_meta_physical_host="bl460g8n3" CRM_meta_role="Master" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="53" operation="notified" operation_key="msPostgresql_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="55" operation="notified" operation_key="msPostgresql_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="65" operation="notified" operation_key="msPostgresql_confirmed-post_notify_demoted_0"/>
+        <pseudo_event id="67" operation="notified" operation_key="msPostgresql_confirmed-post_notify_demoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="72" operation="notified" operation_key="pgsql_notified_0" internal_operation_key="pgsql:0_confirmed-post_notify_stonith_0"/>
+        <pseudo_event id="74" operation="notified" operation_key="pgsql_notified_0" internal_operation_key="pgsql:0_confirmed-post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="34" priority="1000000">
+  <synapse id="36" priority="1000000">
     <action_set>
-      <pseudo_event id="65" operation="notified" operation_key="msPostgresql_confirmed-post_notify_demoted_0">
+      <pseudo_event id="67" operation="notified" operation_key="msPostgresql_confirmed-post_notify_demoted_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="demote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="64" operation="notify" operation_key="msPostgresql_post_notify_demoted_0"/>
+        <pseudo_event id="66" operation="notify" operation_key="msPostgresql_post_notify_demoted_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="83" operation="notify" operation_key="pgsql_post_notify_demote_0" internal_operation_key="pgsql:1_post_notify_demote_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
+        <rsc_op id="85" operation="notify" operation_key="pgsql_post_notify_demote_0" internal_operation_key="pgsql:1_post_notify_demote_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="35" priority="1000000">
+  <synapse id="37" priority="1000000">
     <action_set>
-      <pseudo_event id="64" operation="notify" operation_key="msPostgresql_post_notify_demoted_0">
+      <pseudo_event id="66" operation="notify" operation_key="msPostgresql_post_notify_demoted_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="demote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="61" operation="demoted" operation_key="msPostgresql_demoted_0"/>
+        <pseudo_event id="63" operation="demoted" operation_key="msPostgresql_demoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="63" operation="notified" operation_key="msPostgresql_confirmed-pre_notify_demote_0"/>
+        <pseudo_event id="65" operation="notified" operation_key="msPostgresql_confirmed-pre_notify_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="36">
+  <synapse id="38">
     <action_set>
-      <pseudo_event id="63" operation="notified" operation_key="msPostgresql_confirmed-pre_notify_demote_0">
+      <pseudo_event id="65" operation="notified" operation_key="msPostgresql_confirmed-pre_notify_demote_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="demote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="62" operation="notify" operation_key="msPostgresql_pre_notify_demote_0"/>
+        <pseudo_event id="64" operation="notify" operation_key="msPostgresql_pre_notify_demote_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="82" operation="notify" operation_key="pgsql_pre_notify_demote_0" internal_operation_key="pgsql:1_pre_notify_demote_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
+        <rsc_op id="84" operation="notify" operation_key="pgsql_pre_notify_demote_0" internal_operation_key="pgsql:1_pre_notify_demote_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="37">
+  <synapse id="39">
     <action_set>
-      <pseudo_event id="62" operation="notify" operation_key="msPostgresql_pre_notify_demote_0">
+      <pseudo_event id="64" operation="notify" operation_key="msPostgresql_pre_notify_demote_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="demote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="38" priority="1000000">
+  <synapse id="40" priority="1000000">
     <action_set>
-      <pseudo_event id="61" operation="demoted" operation_key="msPostgresql_demoted_0">
+      <pseudo_event id="63" operation="demoted" operation_key="msPostgresql_demoted_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="35" operation="demote" operation_key="pgsql_demote_0" internal_operation_key="pgsql:0_demote_0"/>
+        <pseudo_event id="37" operation="demote" operation_key="pgsql_demote_0" internal_operation_key="pgsql:0_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="60" operation="demote" operation_key="msPostgresql_demote_0"/>
+        <pseudo_event id="62" operation="demote" operation_key="msPostgresql_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="39">
+  <synapse id="41">
     <action_set>
-      <pseudo_event id="60" operation="demote" operation_key="msPostgresql_demote_0">
+      <pseudo_event id="62" operation="demote" operation_key="msPostgresql_demote_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="63" operation="notified" operation_key="msPostgresql_confirmed-pre_notify_demote_0"/>
+        <pseudo_event id="65" operation="notified" operation_key="msPostgresql_confirmed-pre_notify_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="40" priority="1000000">
+  <synapse id="42" priority="1000000">
     <action_set>
-      <pseudo_event id="53" operation="notified" operation_key="msPostgresql_confirmed-post_notify_stopped_0">
+      <pseudo_event id="55" operation="notified" operation_key="msPostgresql_confirmed-post_notify_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="52" operation="notify" operation_key="msPostgresql_post_notify_stopped_0"/>
+        <pseudo_event id="54" operation="notify" operation_key="msPostgresql_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="73" operation="notify" operation_key="pgsql_post_notify_stop_0" internal_operation_key="pgsql:1_post_notify_stop_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
+        <rsc_op id="75" operation="notify" operation_key="pgsql_post_notify_stop_0" internal_operation_key="pgsql:1_post_notify_stop_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="41" priority="1000000">
+  <synapse id="43" priority="1000000">
     <action_set>
-      <pseudo_event id="52" operation="notify" operation_key="msPostgresql_post_notify_stopped_0">
+      <pseudo_event id="54" operation="notify" operation_key="msPostgresql_post_notify_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="49" operation="stopped" operation_key="msPostgresql_stopped_0"/>
+        <pseudo_event id="51" operation="stopped" operation_key="msPostgresql_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="51" operation="notified" operation_key="msPostgresql_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="53" operation="notified" operation_key="msPostgresql_confirmed-pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="42">
+  <synapse id="44">
     <action_set>
-      <pseudo_event id="51" operation="notified" operation_key="msPostgresql_confirmed-pre_notify_stop_0">
+      <pseudo_event id="53" operation="notified" operation_key="msPostgresql_confirmed-pre_notify_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="50" operation="notify" operation_key="msPostgresql_pre_notify_stop_0"/>
+        <pseudo_event id="52" operation="notify" operation_key="msPostgresql_pre_notify_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="79" operation="notify" operation_key="pgsql_pre_notify_stop_0" internal_operation_key="pgsql:1_pre_notify_stop_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
+        <rsc_op id="81" operation="notify" operation_key="pgsql_pre_notify_stop_0" internal_operation_key="pgsql:1_pre_notify_stop_0" on_node="pgsr01" on_node_uuid="pgsr01" router_node="bl460g8n3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="43">
+  <synapse id="45">
     <action_set>
-      <pseudo_event id="50" operation="notify" operation_key="msPostgresql_pre_notify_stop_0">
+      <pseudo_event id="52" operation="notify" operation_key="msPostgresql_pre_notify_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="65" operation="notified" operation_key="msPostgresql_confirmed-post_notify_demoted_0"/>
+        <pseudo_event id="67" operation="notified" operation_key="msPostgresql_confirmed-post_notify_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="44" priority="1000000">
+  <synapse id="46" priority="1000000">
     <action_set>
-      <pseudo_event id="49" operation="stopped" operation_key="msPostgresql_stopped_0">
+      <pseudo_event id="51" operation="stopped" operation_key="msPostgresql_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="36" operation="stop" operation_key="pgsql_stop_0" internal_operation_key="pgsql:0_stop_0"/>
+        <pseudo_event id="38" operation="stop" operation_key="pgsql_stop_0" internal_operation_key="pgsql:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="48" operation="stop" operation_key="msPostgresql_stop_0"/>
+        <pseudo_event id="50" operation="stop" operation_key="msPostgresql_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="45">
+  <synapse id="47">
     <action_set>
-      <pseudo_event id="48" operation="stop" operation_key="msPostgresql_stop_0">
+      <pseudo_event id="50" operation="stop" operation_key="msPostgresql_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="51" operation="notified" operation_key="msPostgresql_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="53" operation="notified" operation_key="msPostgresql_confirmed-pre_notify_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="61" operation="demoted" operation_key="msPostgresql_demoted_0"/>
+        <pseudo_event id="63" operation="demoted" operation_key="msPostgresql_demoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="70" operation="stonith" operation_key="stonith-pgsr02-off" on_node="pgsr02" on_node_uuid="pgsr02"/>
+        <pseudo_event id="72" operation="stonith" operation_key="stonith-pgsr02-off" on_node="pgsr02" on_node_uuid="pgsr02"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="46">
+  <synapse id="48">
     <action_set>
       <rsc_op id="12" operation="monitor" operation_key="pgsr01_monitor_0" on_node="bl460g8n4" on_node_uuid="3232261400">
         <primitive id="pgsr01" class="ocf" provider="pacemaker" type="remote"/>
@@ -678,9 +708,9 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="47">
+  <synapse id="49">
     <action_set>
-      <rsc_op id="68" operation="stop" operation_key="pgsr02_stop_0" on_node="bl460g8n4" on_node_uuid="3232261400">
+      <rsc_op id="70" operation="stop" operation_key="pgsr02_stop_0" on_node="bl460g8n4" on_node_uuid="3232261400">
         <primitive id="pgsr02" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="prmDB2" CRM_meta_on_node="bl460g8n4" CRM_meta_on_node_uuid="3232261400" CRM_meta_timeout="20000" />
         <downed>
@@ -694,7 +724,7 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="48">
+  <synapse id="50">
     <action_set>
       <rsc_op id="11" operation="monitor" operation_key="pgsr02_monitor_0" on_node="bl460g8n3" on_node_uuid="3232261399">
         <primitive id="pgsr02" class="ocf" provider="pacemaker" type="remote"/>
@@ -703,9 +733,9 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="49">
+  <synapse id="51">
     <action_set>
-      <pseudo_event id="70" operation="stonith" operation_key="stonith-pgsr02-off" on_node="pgsr02" on_node_uuid="pgsr02">
+      <pseudo_event id="72" operation="stonith" operation_key="stonith-pgsr02-off" on_node="pgsr02" on_node_uuid="pgsr02">
         <attributes CRM_meta_master_pgsql="10" CRM_meta_on_node="pgsr02" CRM_meta_on_node_uuid="pgsr02" CRM_meta_stonith_action="off" />
         <downed>
           <node id="pgsr02"/>
@@ -718,19 +748,19 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="50">
+  <synapse id="52">
     <action_set>
-      <pseudo_event id="69" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="71" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="70" operation="stonith" operation_key="stonith-pgsr02-off" on_node="pgsr02" on_node_uuid="pgsr02"/>
+        <pseudo_event id="72" operation="stonith" operation_key="stonith-pgsr02-off" on_node="pgsr02" on_node_uuid="pgsr02"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="51">
+  <synapse id="53">
     <action_set>
       <pseudo_event id="8" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -741,31 +771,31 @@
         <rsc_op id="4" operation="stop" operation_key="prmDB2_stop_0" on_node="bl460g8n4" on_node_uuid="3232261400"/>
       </trigger>
       <trigger>
-        <rsc_op id="15" operation="stop" operation_key="prmStonith1-2_stop_0" on_node="bl460g8n4" on_node_uuid="3232261400"/>
+        <rsc_op id="17" operation="stop" operation_key="prmStonith1-2_stop_0" on_node="bl460g8n4" on_node_uuid="3232261400"/>
       </trigger>
       <trigger>
-        <rsc_op id="20" operation="stop" operation_key="prmStonith2-2_stop_0" on_node="bl460g8n3" on_node_uuid="3232261399"/>
+        <rsc_op id="22" operation="stop" operation_key="prmStonith2-2_stop_0" on_node="bl460g8n3" on_node_uuid="3232261399"/>
       </trigger>
       <trigger>
-        <pseudo_event id="25" operation="stop" operation_key="vip-master_stop_0"/>
+        <pseudo_event id="27" operation="stop" operation_key="vip-master_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="28" operation="stop" operation_key="vip-rep_stop_0"/>
+        <pseudo_event id="30" operation="stop" operation_key="vip-rep_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="36" operation="stop" operation_key="pgsql_stop_0" internal_operation_key="pgsql:0_stop_0"/>
+        <pseudo_event id="38" operation="stop" operation_key="pgsql_stop_0" internal_operation_key="pgsql:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="53" operation="notified" operation_key="msPostgresql_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="55" operation="notified" operation_key="msPostgresql_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="68" operation="stop" operation_key="pgsr02_stop_0" on_node="bl460g8n4" on_node_uuid="3232261400"/>
+        <rsc_op id="70" operation="stop" operation_key="pgsr02_stop_0" on_node="bl460g8n4" on_node_uuid="3232261400"/>
       </trigger>
       <trigger>
-        <pseudo_event id="69" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="71" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
       <trigger>
-        <pseudo_event id="72" operation="notified" operation_key="pgsql_notified_0" internal_operation_key="pgsql:0_confirmed-post_notify_stonith_0"/>
+        <pseudo_event id="74" operation="notified" operation_key="pgsql_notified_0" internal_operation_key="pgsql:0_confirmed-post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/bug-cl-5247.summary b/pengine/test10/bug-cl-5247.summary
index 3e5511d..f15ef2e 100644
--- a/pengine/test10/bug-cl-5247.summary
+++ b/pengine/test10/bug-cl-5247.summary
@@ -32,6 +32,8 @@ Executing cluster transition:
  * Resource action: prmStonith1-2   stop on bl460g8n4
  * Pseudo action:   grpStonith2_stop_0
  * Resource action: prmStonith2-2   stop on bl460g8n3
+ * Resource action: vip-master      monitor on pgsr01
+ * Resource action: vip-rep         monitor on pgsr01
  * Pseudo action:   msPostgresql_pre_notify_demote_0
  * Resource action: pgsr01          monitor on bl460g8n4
  * Resource action: pgsr02          monitor on bl460g8n3
diff --git a/pengine/test10/bug-rh-1097457.dot b/pengine/test10/bug-rh-1097457.dot
index e74c8fb..7791e06 100644
--- a/pengine/test10/bug-rh-1097457.dot
+++ b/pengine/test10/bug-rh-1097457.dot
@@ -1,4 +1,16 @@
 digraph "g" {
+"FAKE1-IP_monitor_0 lamaVM3" [ style=bold color="green" fontcolor="black"]
+"FAKE1_monitor_0 lamaVM3" [ style=bold color="green" fontcolor="black"]
+"FAKE2-IP_monitor_0 lamaVM3" [ style=bold color="green" fontcolor="black"]
+"FAKE2_monitor_0 lamaVM3" [ style=bold color="green" fontcolor="black"]
+"FAKE3-IP_monitor_0 lamaVM3" [ style=bold color="green" fontcolor="black"]
+"FAKE3_monitor_0 lamaVM3" [ style=bold color="green" fontcolor="black"]
+"FAKE4-IP_monitor_0 lamaVM1" -> "FAKE4-IP_start_0 lamaVM2" [ style = bold]
+"FAKE4-IP_monitor_0 lamaVM1" -> "FAKE4-IP_stop_0 lamaVM2" [ style = bold]
+"FAKE4-IP_monitor_0 lamaVM1" [ style=bold color="green" fontcolor="black"]
+"FAKE4-IP_monitor_0 lamaVM3" -> "FAKE4-IP_start_0 lamaVM2" [ style = bold]
+"FAKE4-IP_monitor_0 lamaVM3" -> "FAKE4-IP_stop_0 lamaVM2" [ style = bold]
+"FAKE4-IP_monitor_0 lamaVM3" [ style=bold color="green" fontcolor="black"]
 "FAKE4-IP_monitor_30000 lamaVM2" [ style=bold color="green" fontcolor="black"]
 "FAKE4-IP_start_0 lamaVM2" -> "FAKE4-IP_monitor_30000 lamaVM2" [ style = bold]
 "FAKE4-IP_start_0 lamaVM2" -> "lamaVM2-G4_running_0" [ style = bold]
@@ -8,6 +20,12 @@ digraph "g" {
 "FAKE4-IP_stop_0 lamaVM2" -> "all_stopped" [ style = bold]
 "FAKE4-IP_stop_0 lamaVM2" -> "lamaVM2-G4_stopped_0" [ style = bold]
 "FAKE4-IP_stop_0 lamaVM2" [ style=bold color="green" fontcolor="orange"]
+"FAKE4_monitor_0 lamaVM1" -> "FAKE4_start_0 lamaVM2" [ style = bold]
+"FAKE4_monitor_0 lamaVM1" -> "FAKE4_stop_0 lamaVM2" [ style = bold]
+"FAKE4_monitor_0 lamaVM1" [ style=bold color="green" fontcolor="black"]
+"FAKE4_monitor_0 lamaVM3" -> "FAKE4_start_0 lamaVM2" [ style = bold]
+"FAKE4_monitor_0 lamaVM3" -> "FAKE4_stop_0 lamaVM2" [ style = bold]
+"FAKE4_monitor_0 lamaVM3" [ style=bold color="green" fontcolor="black"]
 "FAKE4_monitor_30000 lamaVM2" [ style=bold color="green" fontcolor="black"]
 "FAKE4_start_0 lamaVM2" -> "FAKE4-IP_start_0 lamaVM2" [ style = bold]
 "FAKE4_start_0 lamaVM2" -> "FAKE4_monitor_30000 lamaVM2" [ style = bold]
@@ -17,6 +35,11 @@ digraph "g" {
 "FAKE4_stop_0 lamaVM2" -> "all_stopped" [ style = bold]
 "FAKE4_stop_0 lamaVM2" -> "lamaVM2-G4_stopped_0" [ style = bold]
 "FAKE4_stop_0 lamaVM2" [ style=bold color="green" fontcolor="orange"]
+"FAKE5-IP_monitor_0 lamaVM1" [ style=bold color="green" fontcolor="black"]
+"FAKE5-IP_monitor_0 lamaVM3" [ style=bold color="green" fontcolor="black"]
+"FAKE5_monitor_0 lamaVM1" [ style=bold color="green" fontcolor="black"]
+"FAKE6-IP_monitor_0 lamaVM1" [ style=bold color="green" fontcolor="black"]
+"FAKE6-IP_monitor_0 lamaVM3" [ style=bold color="green" fontcolor="black"]
 "FAKE6-clone_running_0" [ style=bold color="green" fontcolor="orange"]
 "FAKE6-clone_start_0" -> "FAKE6-clone_running_0" [ style = bold]
 "FAKE6-clone_start_0" -> "FAKE6_start_0 lamaVM2" [ style = bold]
@@ -34,6 +57,14 @@ digraph "g" {
 "FAKE6_stop_0 lamaVM2" -> "FAKE6_start_0 lamaVM2" [ style = bold]
 "FAKE6_stop_0 lamaVM2" -> "all_stopped" [ style = bold]
 "FAKE6_stop_0 lamaVM2" [ style=bold color="green" fontcolor="orange"]
+"FSlun1_monitor_0 lamaVM3" [ style=bold color="green" fontcolor="black"]
+"FSlun2_monitor_0 lamaVM3" [ style=bold color="green" fontcolor="black"]
+"FSlun3_monitor_0 lamaVM1" -> "FSlun3_start_0 lama2" [ style = bold]
+"FSlun3_monitor_0 lamaVM1" -> "FSlun3_stop_0 lamaVM2" [ style = bold]
+"FSlun3_monitor_0 lamaVM1" [ style=bold color="green" fontcolor="black"]
+"FSlun3_monitor_0 lamaVM3" -> "FSlun3_start_0 lama2" [ style = bold]
+"FSlun3_monitor_0 lamaVM3" -> "FSlun3_stop_0 lamaVM2" [ style = bold]
+"FSlun3_monitor_0 lamaVM3" [ style=bold color="green" fontcolor="black"]
 "FSlun3_monitor_10000 lama2" [ style=bold color="green" fontcolor="black"]
 "FSlun3_monitor_10000 lamaVM2" [ style=bold color="green" fontcolor="black"]
 "FSlun3_start_0 lama2" -> "FSlun3_monitor_10000 lama2" [ style = bold]
@@ -42,6 +73,7 @@ digraph "g" {
 "FSlun3_stop_0 lamaVM2" -> "FSlun3_start_0 lama2" [ style = bold]
 "FSlun3_stop_0 lamaVM2" -> "all_stopped" [ style = bold]
 "FSlun3_stop_0 lamaVM2" [ style=bold color="green" fontcolor="orange"]
+"FSlun4_monitor_0 lamaVM1" [ style=bold color="green" fontcolor="black"]
 "VM2_monitor_10000 lama3" [ style=bold color="green" fontcolor="black"]
 "VM2_start_0 lama3" -> "FAKE4-IP_start_0 lamaVM2" [ style = bold]
 "VM2_start_0 lama3" -> "FAKE4_start_0 lamaVM2" [ style = bold]
diff --git a/pengine/test10/bug-rh-1097457.exp b/pengine/test10/bug-rh-1097457.exp
index eb9b225..33c13bd 100644
--- a/pengine/test10/bug-rh-1097457.exp
+++ b/pengine/test10/bug-rh-1097457.exp
@@ -1,34 +1,52 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="37" operation="start" operation_key="VM2_start_0" on_node="lama3" on_node_uuid="2">
+      <rsc_op id="33" operation="monitor" operation_key="FSlun1_monitor_0" on_node="lamaVM3" on_node_uuid="lamaVM3" router_node="lama3">
+        <primitive id="FSlun1" class="ocf" provider="heartbeat" type="Filesystem"/>
+        <attributes CRM_meta_on_node="lamaVM3" CRM_meta_on_node_uuid="lamaVM3" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000"  device="-L FSlun1" directory="/lun1" fstype="ext4"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="1">
+    <action_set>
+      <rsc_op id="34" operation="monitor" operation_key="FSlun2_monitor_0" on_node="lamaVM3" on_node_uuid="lamaVM3" router_node="lama3">
+        <primitive id="FSlun2" class="ocf" provider="heartbeat" type="Filesystem"/>
+        <attributes CRM_meta_on_node="lamaVM3" CRM_meta_on_node_uuid="lamaVM3" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000"  device="-L FSlun2" directory="/lun2" fstype="ext4"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="2">
+    <action_set>
+      <rsc_op id="57" operation="start" operation_key="VM2_start_0" on_node="lama3" on_node_uuid="2">
         <primitive id="VM2" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="lama3" CRM_meta_on_node_uuid="2" CRM_meta_remote_node="lamaVM2" CRM_meta_timeout="90000000" config="/etc/libvirt/qemu/VM2.xml"  hypervisor="qemu:///system"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="36" operation="stop" operation_key="VM2_stop_0" on_node="lama3" on_node_uuid="2"/>
+        <rsc_op id="56" operation="stop" operation_key="VM2_stop_0" on_node="lama3" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="95" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="115" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="1">
+  <synapse id="3">
     <action_set>
-      <rsc_op id="36" operation="stop" operation_key="VM2_stop_0" on_node="lama3" on_node_uuid="2">
+      <rsc_op id="56" operation="stop" operation_key="VM2_stop_0" on_node="lama3" on_node_uuid="2">
         <primitive id="VM2" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_name="stop" CRM_meta_on_node="lama3" CRM_meta_on_node_uuid="2" CRM_meta_remote_node="lamaVM2" CRM_meta_timeout="90000000" config="/etc/libvirt/qemu/VM2.xml"  hypervisor="qemu:///system"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="91" operation="stop" operation_key="lamaVM2_stop_0" on_node="lama3" on_node_uuid="2"/>
+        <rsc_op id="111" operation="stop" operation_key="lamaVM2_stop_0" on_node="lama3" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="2">
+  <synapse id="4">
     <action_set>
       <rsc_op id="5" operation="monitor" operation_key="VM2_monitor_10000" on_node="lama3" on_node_uuid="2">
         <primitive id="VM2" class="ocf" provider="heartbeat" type="VirtualDomain"/>
@@ -37,58 +55,88 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="VM2_start_0" on_node="lama3" on_node_uuid="2"/>
+        <rsc_op id="57" operation="start" operation_key="VM2_start_0" on_node="lama3" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="3">
+  <synapse id="5">
     <action_set>
-      <rsc_op id="42" operation="monitor" operation_key="FSlun3_monitor_10000" on_node="lama2" on_node_uuid="1">
+      <rsc_op id="62" operation="monitor" operation_key="FSlun3_monitor_10000" on_node="lama2" on_node_uuid="1">
         <primitive id="FSlun3" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_fail="fence" CRM_meta_on_node="lama2" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  device="-L FSlun3" directory="/lun3" fstype="ext4"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="41" operation="start" operation_key="FSlun3_start_0" on_node="lama2" on_node_uuid="1"/>
+        <rsc_op id="61" operation="start" operation_key="FSlun3_start_0" on_node="lama2" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="4">
+  <synapse id="6">
     <action_set>
-      <rsc_op id="41" operation="start" operation_key="FSlun3_start_0" on_node="lama2" on_node_uuid="1">
+      <rsc_op id="61" operation="start" operation_key="FSlun3_start_0" on_node="lama2" on_node_uuid="1">
         <primitive id="FSlun3" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="lama2" CRM_meta_on_node_uuid="1" CRM_meta_timeout="60000"  device="-L FSlun3" directory="/lun3" fstype="ext4"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="VM2_start_0" on_node="lama3" on_node_uuid="2"/>
+        <rsc_op id="26" operation="monitor" operation_key="FSlun3_monitor_0" on_node="lamaVM1" on_node_uuid="lamaVM1" router_node="lama2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="35" operation="monitor" operation_key="FSlun3_monitor_0" on_node="lamaVM3" on_node_uuid="lamaVM3" router_node="lama3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="57" operation="start" operation_key="VM2_start_0" on_node="lama3" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="40" operation="stop" operation_key="FSlun3_stop_0"/>
+        <pseudo_event id="60" operation="stop" operation_key="FSlun3_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="95" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="115" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="5">
+  <synapse id="7">
     <action_set>
-      <pseudo_event id="40" operation="stop" operation_key="FSlun3_stop_0">
+      <pseudo_event id="60" operation="stop" operation_key="FSlun3_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_physical_host="lama3" CRM_meta_timeout="60000"  device="-L FSlun3" directory="/lun3" fstype="ext4"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="78" operation="stopped" operation_key="lamaVM2-G4_stopped_0"/>
+        <rsc_op id="26" operation="monitor" operation_key="FSlun3_monitor_0" on_node="lamaVM1" on_node_uuid="lamaVM1" router_node="lama2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="35" operation="monitor" operation_key="FSlun3_monitor_0" on_node="lamaVM3" on_node_uuid="lamaVM3" router_node="lama3"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="98" operation="stopped" operation_key="lamaVM2-G4_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="96" operation="stonith" operation_key="stonith-lamaVM2-reboot" on_node="lamaVM2" on_node_uuid="lamaVM2"/>
+        <pseudo_event id="116" operation="stonith" operation_key="stonith-lamaVM2-reboot" on_node="lamaVM2" on_node_uuid="lamaVM2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="6">
+  <synapse id="8">
+    <action_set>
+      <rsc_op id="35" operation="monitor" operation_key="FSlun3_monitor_0" on_node="lamaVM3" on_node_uuid="lamaVM3" router_node="lama3">
+        <primitive id="FSlun3" class="ocf" provider="heartbeat" type="Filesystem"/>
+        <attributes CRM_meta_on_node="lamaVM3" CRM_meta_on_node_uuid="lamaVM3" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000"  device="-L FSlun3" directory="/lun3" fstype="ext4"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="9">
+    <action_set>
+      <rsc_op id="26" operation="monitor" operation_key="FSlun3_monitor_0" on_node="lamaVM1" on_node_uuid="lamaVM1" router_node="lama2">
+        <primitive id="FSlun3" class="ocf" provider="heartbeat" type="Filesystem"/>
+        <attributes CRM_meta_on_node="lamaVM1" CRM_meta_on_node_uuid="lamaVM1" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama2" CRM_meta_timeout="20000"  device="-L FSlun3" directory="/lun3" fstype="ext4"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="10">
     <action_set>
       <rsc_op id="21" operation="monitor" operation_key="FSlun3_monitor_10000" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3">
         <primitive id="FSlun3" class="ocf" provider="heartbeat" type="Filesystem"/>
@@ -97,117 +145,255 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="92" operation="start" operation_key="lamaVM2_start_0" on_node="lama3" on_node_uuid="2"/>
+        <rsc_op id="112" operation="start" operation_key="lamaVM2_start_0" on_node="lama3" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="7">
+  <synapse id="11">
+    <action_set>
+      <rsc_op id="27" operation="monitor" operation_key="FSlun4_monitor_0" on_node="lamaVM1" on_node_uuid="lamaVM1" router_node="lama2">
+        <primitive id="FSlun4" class="ocf" provider="heartbeat" type="Filesystem"/>
+        <attributes CRM_meta_on_node="lamaVM1" CRM_meta_on_node_uuid="lamaVM1" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama2" CRM_meta_timeout="20000"  device="-L FSlun4" directory="/lun4" fstype="ext4"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="12">
+    <action_set>
+      <rsc_op id="36" operation="monitor" operation_key="FAKE5-IP_monitor_0" on_node="lamaVM3" on_node_uuid="lamaVM3" router_node="lama3">
+        <primitive id="FAKE5-IP" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_on_node="lamaVM3" CRM_meta_on_node_uuid="lamaVM3" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" cidr_netmask="16"  ip="10.1.1.55"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="13">
+    <action_set>
+      <rsc_op id="28" operation="monitor" operation_key="FAKE5-IP_monitor_0" on_node="lamaVM1" on_node_uuid="lamaVM1" router_node="lama2">
+        <primitive id="FAKE5-IP" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_on_node="lamaVM1" CRM_meta_on_node_uuid="lamaVM1" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama2" CRM_meta_timeout="20000" cidr_netmask="16"  ip="10.1.1.55"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="14">
+    <action_set>
+      <rsc_op id="37" operation="monitor" operation_key="FAKE6-IP_monitor_0" on_node="lamaVM3" on_node_uuid="lamaVM3" router_node="lama3">
+        <primitive id="FAKE6-IP" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_on_node="lamaVM3" CRM_meta_on_node_uuid="lamaVM3" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" cidr_netmask="16"  ip="10.1.1.56"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="15">
+    <action_set>
+      <rsc_op id="29" operation="monitor" operation_key="FAKE6-IP_monitor_0" on_node="lamaVM1" on_node_uuid="lamaVM1" router_node="lama2">
+        <primitive id="FAKE6-IP" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_on_node="lamaVM1" CRM_meta_on_node_uuid="lamaVM1" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama2" CRM_meta_timeout="20000" cidr_netmask="16"  ip="10.1.1.56"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="16">
+    <action_set>
+      <rsc_op id="30" operation="monitor" operation_key="FAKE5_monitor_0" on_node="lamaVM1" on_node_uuid="lamaVM1" router_node="lama2">
+        <primitive id="FAKE5" class="ocf" provider="heartbeat" type="Dummy"/>
+        <attributes CRM_meta_on_node="lamaVM1" CRM_meta_on_node_uuid="lamaVM1" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="17">
+    <action_set>
+      <rsc_op id="38" operation="monitor" operation_key="FAKE1_monitor_0" on_node="lamaVM3" on_node_uuid="lamaVM3" router_node="lama3">
+        <primitive id="FAKE1" class="ocf" provider="heartbeat" type="Dummy"/>
+        <attributes CRM_meta_on_node="lamaVM3" CRM_meta_on_node_uuid="lamaVM3" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="18">
+    <action_set>
+      <rsc_op id="39" operation="monitor" operation_key="FAKE1-IP_monitor_0" on_node="lamaVM3" on_node_uuid="lamaVM3" router_node="lama3">
+        <primitive id="FAKE1-IP" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_on_node="lamaVM3" CRM_meta_on_node_uuid="lamaVM3" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" cidr_netmask="16"  ip="10.1.1.51"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="19">
+    <action_set>
+      <rsc_op id="40" operation="monitor" operation_key="FAKE2_monitor_0" on_node="lamaVM3" on_node_uuid="lamaVM3" router_node="lama3">
+        <primitive id="FAKE2" class="ocf" provider="heartbeat" type="Dummy"/>
+        <attributes CRM_meta_on_node="lamaVM3" CRM_meta_on_node_uuid="lamaVM3" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="20">
+    <action_set>
+      <rsc_op id="41" operation="monitor" operation_key="FAKE2-IP_monitor_0" on_node="lamaVM3" on_node_uuid="lamaVM3" router_node="lama3">
+        <primitive id="FAKE2-IP" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_on_node="lamaVM3" CRM_meta_on_node_uuid="lamaVM3" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" cidr_netmask="16"  ip="10.1.1.52"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="21">
+    <action_set>
+      <rsc_op id="42" operation="monitor" operation_key="FAKE3_monitor_0" on_node="lamaVM3" on_node_uuid="lamaVM3" router_node="lama3">
+        <primitive id="FAKE3" class="ocf" provider="heartbeat" type="Dummy"/>
+        <attributes CRM_meta_on_node="lamaVM3" CRM_meta_on_node_uuid="lamaVM3" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="22">
+    <action_set>
+      <rsc_op id="43" operation="monitor" operation_key="FAKE3-IP_monitor_0" on_node="lamaVM3" on_node_uuid="lamaVM3" router_node="lama3">
+        <primitive id="FAKE3-IP" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_on_node="lamaVM3" CRM_meta_on_node_uuid="lamaVM3" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" cidr_netmask="16"  ip="10.1.1.53"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="23">
     <action_set>
-      <pseudo_event id="78" operation="stopped" operation_key="lamaVM2-G4_stopped_0">
+      <pseudo_event id="98" operation="stopped" operation_key="lamaVM2-G4_stopped_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="71" operation="stop" operation_key="FAKE4_stop_0"/>
+        <pseudo_event id="91" operation="stop" operation_key="FAKE4_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="73" operation="stop" operation_key="FAKE4-IP_stop_0"/>
+        <pseudo_event id="93" operation="stop" operation_key="FAKE4-IP_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="77" operation="stop" operation_key="lamaVM2-G4_stop_0"/>
+        <pseudo_event id="97" operation="stop" operation_key="lamaVM2-G4_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="8">
+  <synapse id="24">
     <action_set>
-      <pseudo_event id="77" operation="stop" operation_key="lamaVM2-G4_stop_0">
+      <pseudo_event id="97" operation="stop" operation_key="lamaVM2-G4_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="96" operation="stonith" operation_key="stonith-lamaVM2-reboot" on_node="lamaVM2" on_node_uuid="lamaVM2"/>
+        <pseudo_event id="116" operation="stonith" operation_key="stonith-lamaVM2-reboot" on_node="lamaVM2" on_node_uuid="lamaVM2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="9">
+  <synapse id="25">
     <action_set>
-      <pseudo_event id="76" operation="running" operation_key="lamaVM2-G4_running_0">
+      <pseudo_event id="96" operation="running" operation_key="lamaVM2-G4_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="72" operation="start" operation_key="FAKE4_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3"/>
+        <rsc_op id="92" operation="start" operation_key="FAKE4_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3"/>
       </trigger>
       <trigger>
-        <rsc_op id="74" operation="start" operation_key="FAKE4-IP_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3"/>
+        <rsc_op id="94" operation="start" operation_key="FAKE4-IP_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="75" operation="start" operation_key="lamaVM2-G4_start_0"/>
+        <pseudo_event id="95" operation="start" operation_key="lamaVM2-G4_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10">
+  <synapse id="26">
     <action_set>
-      <pseudo_event id="75" operation="start" operation_key="lamaVM2-G4_start_0">
+      <pseudo_event id="95" operation="start" operation_key="lamaVM2-G4_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="41" operation="start" operation_key="FSlun3_start_0" on_node="lama2" on_node_uuid="1"/>
+        <rsc_op id="61" operation="start" operation_key="FSlun3_start_0" on_node="lama2" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="78" operation="stopped" operation_key="lamaVM2-G4_stopped_0"/>
+        <pseudo_event id="98" operation="stopped" operation_key="lamaVM2-G4_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="11">
+  <synapse id="27">
     <action_set>
-      <rsc_op id="72" operation="start" operation_key="FAKE4_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3">
+      <rsc_op id="92" operation="start" operation_key="FAKE4_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3">
         <primitive id="FAKE4" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="lamaVM2" CRM_meta_on_node_uuid="lamaVM2" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="VM2_start_0" on_node="lama3" on_node_uuid="2"/>
+        <rsc_op id="31" operation="monitor" operation_key="FAKE4_monitor_0" on_node="lamaVM1" on_node_uuid="lamaVM1" router_node="lama2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="71" operation="stop" operation_key="FAKE4_stop_0"/>
+        <rsc_op id="44" operation="monitor" operation_key="FAKE4_monitor_0" on_node="lamaVM3" on_node_uuid="lamaVM3" router_node="lama3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="75" operation="start" operation_key="lamaVM2-G4_start_0"/>
+        <rsc_op id="57" operation="start" operation_key="VM2_start_0" on_node="lama3" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="92" operation="start" operation_key="lamaVM2_start_0" on_node="lama3" on_node_uuid="2"/>
+        <pseudo_event id="91" operation="stop" operation_key="FAKE4_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="95" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="95" operation="start" operation_key="lamaVM2-G4_start_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="112" operation="start" operation_key="lamaVM2_start_0" on_node="lama3" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="115" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12">
+  <synapse id="28">
     <action_set>
-      <pseudo_event id="71" operation="stop" operation_key="FAKE4_stop_0">
+      <pseudo_event id="91" operation="stop" operation_key="FAKE4_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="73" operation="stop" operation_key="FAKE4-IP_stop_0"/>
+        <rsc_op id="31" operation="monitor" operation_key="FAKE4_monitor_0" on_node="lamaVM1" on_node_uuid="lamaVM1" router_node="lama2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="77" operation="stop" operation_key="lamaVM2-G4_stop_0"/>
+        <rsc_op id="44" operation="monitor" operation_key="FAKE4_monitor_0" on_node="lamaVM3" on_node_uuid="lamaVM3" router_node="lama3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="96" operation="stonith" operation_key="stonith-lamaVM2-reboot" on_node="lamaVM2" on_node_uuid="lamaVM2"/>
+        <pseudo_event id="93" operation="stop" operation_key="FAKE4-IP_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="97" operation="stop" operation_key="lamaVM2-G4_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="116" operation="stonith" operation_key="stonith-lamaVM2-reboot" on_node="lamaVM2" on_node_uuid="lamaVM2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="13">
+  <synapse id="29">
+    <action_set>
+      <rsc_op id="44" operation="monitor" operation_key="FAKE4_monitor_0" on_node="lamaVM3" on_node_uuid="lamaVM3" router_node="lama3">
+        <primitive id="FAKE4" class="ocf" provider="heartbeat" type="Dummy"/>
+        <attributes CRM_meta_on_node="lamaVM3" CRM_meta_on_node_uuid="lamaVM3" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="30">
+    <action_set>
+      <rsc_op id="31" operation="monitor" operation_key="FAKE4_monitor_0" on_node="lamaVM1" on_node_uuid="lamaVM1" router_node="lama2">
+        <primitive id="FAKE4" class="ocf" provider="heartbeat" type="Dummy"/>
+        <attributes CRM_meta_on_node="lamaVM1" CRM_meta_on_node_uuid="lamaVM1" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="31">
     <action_set>
       <rsc_op id="23" operation="monitor" operation_key="FAKE4_monitor_30000" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3">
         <primitive id="FAKE4" class="ocf" provider="heartbeat" type="Dummy"/>
@@ -216,57 +402,87 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="72" operation="start" operation_key="FAKE4_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3"/>
+        <rsc_op id="92" operation="start" operation_key="FAKE4_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3"/>
       </trigger>
       <trigger>
-        <rsc_op id="92" operation="start" operation_key="lamaVM2_start_0" on_node="lama3" on_node_uuid="2"/>
+        <rsc_op id="112" operation="start" operation_key="lamaVM2_start_0" on_node="lama3" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14">
+  <synapse id="32">
     <action_set>
-      <rsc_op id="74" operation="start" operation_key="FAKE4-IP_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3">
+      <rsc_op id="94" operation="start" operation_key="FAKE4-IP_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3">
         <primitive id="FAKE4-IP" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="lamaVM2" CRM_meta_on_node_uuid="lamaVM2" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" cidr_netmask="16"  ip="10.1.1.54"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="VM2_start_0" on_node="lama3" on_node_uuid="2"/>
+        <rsc_op id="32" operation="monitor" operation_key="FAKE4-IP_monitor_0" on_node="lamaVM1" on_node_uuid="lamaVM1" router_node="lama2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="45" operation="monitor" operation_key="FAKE4-IP_monitor_0" on_node="lamaVM3" on_node_uuid="lamaVM3" router_node="lama3"/>
       </trigger>
       <trigger>
-        <rsc_op id="72" operation="start" operation_key="FAKE4_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3"/>
+        <rsc_op id="57" operation="start" operation_key="VM2_start_0" on_node="lama3" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="73" operation="stop" operation_key="FAKE4-IP_stop_0"/>
+        <rsc_op id="92" operation="start" operation_key="FAKE4_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="75" operation="start" operation_key="lamaVM2-G4_start_0"/>
+        <pseudo_event id="93" operation="stop" operation_key="FAKE4-IP_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="92" operation="start" operation_key="lamaVM2_start_0" on_node="lama3" on_node_uuid="2"/>
+        <pseudo_event id="95" operation="start" operation_key="lamaVM2-G4_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="95" operation="stonith_complete" operation_key="stonith_complete"/>
+        <rsc_op id="112" operation="start" operation_key="lamaVM2_start_0" on_node="lama3" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="115" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="33">
     <action_set>
-      <pseudo_event id="73" operation="stop" operation_key="FAKE4-IP_stop_0">
+      <pseudo_event id="93" operation="stop" operation_key="FAKE4-IP_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" cidr_netmask="16"  ip="10.1.1.54"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="77" operation="stop" operation_key="lamaVM2-G4_stop_0"/>
+        <rsc_op id="32" operation="monitor" operation_key="FAKE4-IP_monitor_0" on_node="lamaVM1" on_node_uuid="lamaVM1" router_node="lama2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="96" operation="stonith" operation_key="stonith-lamaVM2-reboot" on_node="lamaVM2" on_node_uuid="lamaVM2"/>
+        <rsc_op id="45" operation="monitor" operation_key="FAKE4-IP_monitor_0" on_node="lamaVM3" on_node_uuid="lamaVM3" router_node="lama3"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="97" operation="stop" operation_key="lamaVM2-G4_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="116" operation="stonith" operation_key="stonith-lamaVM2-reboot" on_node="lamaVM2" on_node_uuid="lamaVM2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="16">
+  <synapse id="34">
+    <action_set>
+      <rsc_op id="45" operation="monitor" operation_key="FAKE4-IP_monitor_0" on_node="lamaVM3" on_node_uuid="lamaVM3" router_node="lama3">
+        <primitive id="FAKE4-IP" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_on_node="lamaVM3" CRM_meta_on_node_uuid="lamaVM3" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" cidr_netmask="16"  ip="10.1.1.54"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="35">
+    <action_set>
+      <rsc_op id="32" operation="monitor" operation_key="FAKE4-IP_monitor_0" on_node="lamaVM1" on_node_uuid="lamaVM1" router_node="lama2">
+        <primitive id="FAKE4-IP" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_on_node="lamaVM1" CRM_meta_on_node_uuid="lamaVM1" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama2" CRM_meta_timeout="20000" cidr_netmask="16"  ip="10.1.1.54"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="36">
     <action_set>
       <rsc_op id="24" operation="monitor" operation_key="FAKE4-IP_monitor_30000" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3">
         <primitive id="FAKE4-IP" class="ocf" provider="heartbeat" type="IPaddr2"/>
@@ -275,54 +491,54 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="74" operation="start" operation_key="FAKE4-IP_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3"/>
+        <rsc_op id="94" operation="start" operation_key="FAKE4-IP_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3"/>
       </trigger>
       <trigger>
-        <rsc_op id="92" operation="start" operation_key="lamaVM2_start_0" on_node="lama3" on_node_uuid="2"/>
+        <rsc_op id="112" operation="start" operation_key="lamaVM2_start_0" on_node="lama3" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="17">
+  <synapse id="37">
     <action_set>
-      <rsc_op id="84" operation="start" operation_key="FAKE6_start_0" internal_operation_key="FAKE6:2_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3">
+      <rsc_op id="104" operation="start" operation_key="FAKE6_start_0" internal_operation_key="FAKE6:2_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3">
         <primitive id="FAKE6" long-id="FAKE6:2" class="ocf" provider="heartbeat" type="Dummy"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="lamaVM2" CRM_meta_on_node_uuid="lamaVM2" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="VM2_start_0" on_node="lama3" on_node_uuid="2"/>
+        <rsc_op id="57" operation="start" operation_key="VM2_start_0" on_node="lama3" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="83" operation="stop" operation_key="FAKE6_stop_0" internal_operation_key="FAKE6:2_stop_0"/>
+        <pseudo_event id="103" operation="stop" operation_key="FAKE6_stop_0" internal_operation_key="FAKE6:2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="85" operation="start" operation_key="FAKE6-clone_start_0"/>
+        <pseudo_event id="105" operation="start" operation_key="FAKE6-clone_start_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="92" operation="start" operation_key="lamaVM2_start_0" on_node="lama3" on_node_uuid="2"/>
+        <rsc_op id="112" operation="start" operation_key="lamaVM2_start_0" on_node="lama3" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="95" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="115" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="18">
+  <synapse id="38">
     <action_set>
-      <pseudo_event id="83" operation="stop" operation_key="FAKE6_stop_0" internal_operation_key="FAKE6:2_stop_0">
+      <pseudo_event id="103" operation="stop" operation_key="FAKE6_stop_0" internal_operation_key="FAKE6:2_stop_0">
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_physical_host="lama3" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="87" operation="stop" operation_key="FAKE6-clone_stop_0"/>
+        <pseudo_event id="107" operation="stop" operation_key="FAKE6-clone_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="96" operation="stonith" operation_key="stonith-lamaVM2-reboot" on_node="lamaVM2" on_node_uuid="lamaVM2"/>
+        <pseudo_event id="116" operation="stonith" operation_key="stonith-lamaVM2-reboot" on_node="lamaVM2" on_node_uuid="lamaVM2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="19">
+  <synapse id="39">
     <action_set>
       <rsc_op id="22" operation="monitor" operation_key="FAKE6_monitor_30000" internal_operation_key="FAKE6:2_monitor_30000" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3">
         <primitive id="FAKE6" long-id="FAKE6:2" class="ocf" provider="heartbeat" type="Dummy"/>
@@ -331,89 +547,89 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="84" operation="start" operation_key="FAKE6_start_0" internal_operation_key="FAKE6:2_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3"/>
+        <rsc_op id="104" operation="start" operation_key="FAKE6_start_0" internal_operation_key="FAKE6:2_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3"/>
       </trigger>
       <trigger>
-        <rsc_op id="92" operation="start" operation_key="lamaVM2_start_0" on_node="lama3" on_node_uuid="2"/>
+        <rsc_op id="112" operation="start" operation_key="lamaVM2_start_0" on_node="lama3" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="20" priority="1000000">
+  <synapse id="40" priority="1000000">
     <action_set>
-      <pseudo_event id="88" operation="stopped" operation_key="FAKE6-clone_stopped_0">
+      <pseudo_event id="108" operation="stopped" operation_key="FAKE6-clone_stopped_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="83" operation="stop" operation_key="FAKE6_stop_0" internal_operation_key="FAKE6:2_stop_0"/>
+        <pseudo_event id="103" operation="stop" operation_key="FAKE6_stop_0" internal_operation_key="FAKE6:2_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="87" operation="stop" operation_key="FAKE6-clone_stop_0"/>
+        <pseudo_event id="107" operation="stop" operation_key="FAKE6-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="21">
+  <synapse id="41">
     <action_set>
-      <pseudo_event id="87" operation="stop" operation_key="FAKE6-clone_stop_0">
+      <pseudo_event id="107" operation="stop" operation_key="FAKE6-clone_stop_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="96" operation="stonith" operation_key="stonith-lamaVM2-reboot" on_node="lamaVM2" on_node_uuid="lamaVM2"/>
+        <pseudo_event id="116" operation="stonith" operation_key="stonith-lamaVM2-reboot" on_node="lamaVM2" on_node_uuid="lamaVM2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="22" priority="1000000">
+  <synapse id="42" priority="1000000">
     <action_set>
-      <pseudo_event id="86" operation="running" operation_key="FAKE6-clone_running_0">
+      <pseudo_event id="106" operation="running" operation_key="FAKE6-clone_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="84" operation="start" operation_key="FAKE6_start_0" internal_operation_key="FAKE6:2_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3"/>
+        <rsc_op id="104" operation="start" operation_key="FAKE6_start_0" internal_operation_key="FAKE6:2_start_0" on_node="lamaVM2" on_node_uuid="lamaVM2" router_node="lama3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="85" operation="start" operation_key="FAKE6-clone_start_0"/>
+        <pseudo_event id="105" operation="start" operation_key="FAKE6-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="23">
+  <synapse id="43">
     <action_set>
-      <pseudo_event id="85" operation="start" operation_key="FAKE6-clone_start_0">
+      <pseudo_event id="105" operation="start" operation_key="FAKE6-clone_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="88" operation="stopped" operation_key="FAKE6-clone_stopped_0"/>
+        <pseudo_event id="108" operation="stopped" operation_key="FAKE6-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="24">
+  <synapse id="44">
     <action_set>
-      <rsc_op id="92" operation="start" operation_key="lamaVM2_start_0" on_node="lama3" on_node_uuid="2">
+      <rsc_op id="112" operation="start" operation_key="lamaVM2_start_0" on_node="lama3" on_node_uuid="2">
         <primitive id="lamaVM2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="VM2" CRM_meta_name="start" CRM_meta_on_node="lama3" CRM_meta_on_node_uuid="2" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="VM2_start_0" on_node="lama3" on_node_uuid="2"/>
+        <rsc_op id="57" operation="start" operation_key="VM2_start_0" on_node="lama3" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="91" operation="stop" operation_key="lamaVM2_stop_0" on_node="lama3" on_node_uuid="2"/>
+        <rsc_op id="111" operation="stop" operation_key="lamaVM2_stop_0" on_node="lama3" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="95" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="115" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="25">
+  <synapse id="45">
     <action_set>
-      <rsc_op id="91" operation="stop" operation_key="lamaVM2_stop_0" on_node="lama3" on_node_uuid="2">
+      <rsc_op id="111" operation="stop" operation_key="lamaVM2_stop_0" on_node="lama3" on_node_uuid="2">
         <primitive id="lamaVM2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="VM2" CRM_meta_on_node="lama3" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
         <downed>
@@ -423,7 +639,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="26">
+  <synapse id="46">
     <action_set>
       <rsc_op id="4" operation="monitor" operation_key="lamaVM2_monitor_30000" on_node="lama3" on_node_uuid="2">
         <primitive id="lamaVM2" class="ocf" provider="pacemaker" type="remote"/>
@@ -432,13 +648,13 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="92" operation="start" operation_key="lamaVM2_start_0" on_node="lama3" on_node_uuid="2"/>
+        <rsc_op id="112" operation="start" operation_key="lamaVM2_start_0" on_node="lama3" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="27">
+  <synapse id="47">
     <action_set>
-      <pseudo_event id="96" operation="stonith" operation_key="stonith-lamaVM2-reboot" on_node="lamaVM2" on_node_uuid="lamaVM2">
+      <pseudo_event id="116" operation="stonith" operation_key="stonith-lamaVM2-reboot" on_node="lamaVM2" on_node_uuid="lamaVM2">
         <attributes CRM_meta_fail_count_FSlun3="1" CRM_meta_last_failure_FSlun3="1399961984" CRM_meta_on_node="lamaVM2" CRM_meta_on_node_uuid="lamaVM2" CRM_meta_stonith_action="reboot" />
         <downed>
           <node id="lamaVM2"/>
@@ -447,23 +663,23 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="36" operation="stop" operation_key="VM2_stop_0" on_node="lama3" on_node_uuid="2"/>
+        <rsc_op id="56" operation="stop" operation_key="VM2_stop_0" on_node="lama3" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="28">
+  <synapse id="48">
     <action_set>
-      <pseudo_event id="95" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="115" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="96" operation="stonith" operation_key="stonith-lamaVM2-reboot" on_node="lamaVM2" on_node_uuid="lamaVM2"/>
+        <pseudo_event id="116" operation="stonith" operation_key="stonith-lamaVM2-reboot" on_node="lamaVM2" on_node_uuid="lamaVM2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="29">
+  <synapse id="49">
     <action_set>
       <pseudo_event id="25" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -471,25 +687,25 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="36" operation="stop" operation_key="VM2_stop_0" on_node="lama3" on_node_uuid="2"/>
+        <rsc_op id="56" operation="stop" operation_key="VM2_stop_0" on_node="lama3" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="40" operation="stop" operation_key="FSlun3_stop_0"/>
+        <pseudo_event id="60" operation="stop" operation_key="FSlun3_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="71" operation="stop" operation_key="FAKE4_stop_0"/>
+        <pseudo_event id="91" operation="stop" operation_key="FAKE4_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="73" operation="stop" operation_key="FAKE4-IP_stop_0"/>
+        <pseudo_event id="93" operation="stop" operation_key="FAKE4-IP_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="83" operation="stop" operation_key="FAKE6_stop_0" internal_operation_key="FAKE6:2_stop_0"/>
+        <pseudo_event id="103" operation="stop" operation_key="FAKE6_stop_0" internal_operation_key="FAKE6:2_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="91" operation="stop" operation_key="lamaVM2_stop_0" on_node="lama3" on_node_uuid="2"/>
+        <rsc_op id="111" operation="stop" operation_key="lamaVM2_stop_0" on_node="lama3" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="95" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="115" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/bug-rh-1097457.summary b/pengine/test10/bug-rh-1097457.summary
index c50df5f..e23c6ad 100644
--- a/pengine/test10/bug-rh-1097457.summary
+++ b/pengine/test10/bug-rh-1097457.summary
@@ -41,6 +41,26 @@ Transition Summary:
  * Restart    lamaVM2    (            lama3 )   due to required VM2 start
 
 Executing cluster transition:
+ * Resource action: FSlun1          monitor on lamaVM3
+ * Resource action: FSlun2          monitor on lamaVM3
+ * Resource action: FSlun3          monitor on lamaVM3
+ * Resource action: FSlun3          monitor on lamaVM1
+ * Resource action: FSlun4          monitor on lamaVM1
+ * Resource action: FAKE5-IP        monitor on lamaVM3
+ * Resource action: FAKE5-IP        monitor on lamaVM1
+ * Resource action: FAKE6-IP        monitor on lamaVM3
+ * Resource action: FAKE6-IP        monitor on lamaVM1
+ * Resource action: FAKE5           monitor on lamaVM1
+ * Resource action: FAKE1           monitor on lamaVM3
+ * Resource action: FAKE1-IP        monitor on lamaVM3
+ * Resource action: FAKE2           monitor on lamaVM3
+ * Resource action: FAKE2-IP        monitor on lamaVM3
+ * Resource action: FAKE3           monitor on lamaVM3
+ * Resource action: FAKE3-IP        monitor on lamaVM3
+ * Resource action: FAKE4           monitor on lamaVM3
+ * Resource action: FAKE4           monitor on lamaVM1
+ * Resource action: FAKE4-IP        monitor on lamaVM3
+ * Resource action: FAKE4-IP        monitor on lamaVM1
  * Resource action: lamaVM2         stop on lama3
  * Resource action: VM2             stop on lama3
  * Pseudo action:   stonith-lamaVM2-reboot on lamaVM2
diff --git a/pengine/test10/bundle-order-partial-start-2.dot b/pengine/test10/bundle-order-partial-start-2.dot
index d58e809..163be1f 100644
--- a/pengine/test10/bundle-order-partial-start-2.dot
+++ b/pengine/test10/bundle-order-partial-start-2.dot
@@ -64,6 +64,8 @@ digraph "g" {
 "rabbitmq-bundle_running_0" [ style=bold color="green" fontcolor="orange"]
 "rabbitmq-bundle_start_0" -> "rabbitmq-bundle-clone_start_0" [ style = bold]
 "rabbitmq-bundle_start_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq:0_monitor_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_start_0" [ style = bold]
+"rabbitmq:0_monitor_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
 "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
 "rabbitmq:0_post_notify_start_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = bold]
 "rabbitmq:0_post_notify_start_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
diff --git a/pengine/test10/bundle-order-partial-start-2.exp b/pengine/test10/bundle-order-partial-start-2.exp
index f600983..087ed6c 100644
--- a/pengine/test10/bundle-order-partial-start-2.exp
+++ b/pengine/test10/bundle-order-partial-start-2.exp
@@ -1,234 +1,246 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0" priority="1000000">
     <action_set>
-      <rsc_op id="128" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+      <rsc_op id="129" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="30" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="31" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="25" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+      <rsc_op id="26" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="24" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="25" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="31" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="32" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="24" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+      <rsc_op id="25" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="26" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="27" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="3" priority="1000000">
+  <synapse id="3">
     <action_set>
-      <pseudo_event id="31" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
+      <rsc_op id="15" operation="monitor" operation_key="rabbitmq:0_monitor_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+        <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_op_target_rc="7" CRM_meta_physical_host="undercloud" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="4" priority="1000000">
+    <action_set>
+      <pseudo_event id="32" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="30" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="31" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="128" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="129" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="4" priority="1000000">
+  <synapse id="5" priority="1000000">
     <action_set>
-      <pseudo_event id="30" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
+      <pseudo_event id="31" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="27" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
+        <pseudo_event id="28" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="30" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="5">
+  <synapse id="6">
     <action_set>
-      <pseudo_event id="29" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
+      <pseudo_event id="30" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="28" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
+        <pseudo_event id="29" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="6">
+  <synapse id="7">
     <action_set>
-      <pseudo_event id="28" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
+      <pseudo_event id="29" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="7" priority="1000000">
+  <synapse id="8" priority="1000000">
     <action_set>
-      <pseudo_event id="27" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
+      <pseudo_event id="28" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="24" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="25" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="26" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="27" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="8">
+  <synapse id="9">
     <action_set>
-      <pseudo_event id="26" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
+      <pseudo_event id="27" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="20" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+        <rsc_op id="15" operation="monitor" operation_key="rabbitmq:0_monitor_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="21" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="30" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="9">
+  <synapse id="10">
     <action_set>
-      <rsc_op id="48" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="49" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="41" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="42" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="47" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10">
+  <synapse id="11">
     <action_set>
-      <rsc_op id="47" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="48" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="41" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="42" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="47" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="11">
+  <synapse id="12">
     <action_set>
-      <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="47" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="39" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="40" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="41" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="42" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="49" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <pseudo_event id="50" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12" priority="1000000">
+  <synapse id="13" priority="1000000">
     <action_set>
-      <pseudo_event id="50" operation="running" operation_key="galera-bundle-master_running_0">
+      <pseudo_event id="51" operation="running" operation_key="galera-bundle-master_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="47" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="49" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <pseudo_event id="50" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="13">
+  <synapse id="14">
     <action_set>
-      <pseudo_event id="49" operation="start" operation_key="galera-bundle-master_start_0">
+      <pseudo_event id="50" operation="start" operation_key="galera-bundle-master_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="42" operation="start" operation_key="galera-bundle_start_0"/>
+        <pseudo_event id="43" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14">
+  <synapse id="15">
     <action_set>
-      <rsc_op id="39" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="40" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="39" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="42" operation="start" operation_key="galera-bundle_start_0"/>
+        <pseudo_event id="43" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="16">
     <action_set>
-      <rsc_op id="38" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="39" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="40" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="41" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="16">
+  <synapse id="17">
     <action_set>
       <rsc_op id="3" operation="monitor" operation_key="galera-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -237,29 +249,29 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="39" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="40" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="17">
+  <synapse id="18">
     <action_set>
-      <rsc_op id="41" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="42" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3123"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="39" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="40" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="40" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="41" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="18">
+  <synapse id="19">
     <action_set>
-      <rsc_op id="40" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="41" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3123"/>
         <downed>
@@ -269,7 +281,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="19">
+  <synapse id="20">
     <action_set>
       <rsc_op id="4" operation="monitor" operation_key="galera-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
@@ -278,277 +290,277 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="41" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="42" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="20" priority="1000000">
+  <synapse id="21" priority="1000000">
     <action_set>
-      <rsc_op id="134" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="135" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="89" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+        <pseudo_event id="90" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="21">
+  <synapse id="22">
     <action_set>
-      <rsc_op id="133" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="134" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="87" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+        <pseudo_event id="88" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="22">
+  <synapse id="23">
     <action_set>
-      <rsc_op id="72" operation="monitor" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="73" operation="monitor" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_op_target_rc="8" CRM_meta_physical_host="undercloud" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="71" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="72" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="90" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
+        <pseudo_event id="91" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="23">
+  <synapse id="24">
     <action_set>
-      <rsc_op id="71" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="72" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="85" operation="promote" operation_key="redis-bundle-master_promote_0"/>
+        <pseudo_event id="86" operation="promote" operation_key="redis-bundle-master_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="24" priority="1000000">
+  <synapse id="25" priority="1000000">
     <action_set>
-      <pseudo_event id="90" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0">
+      <pseudo_event id="91" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="89" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+        <pseudo_event id="90" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="134" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="135" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="25" priority="1000000">
+  <synapse id="26" priority="1000000">
     <action_set>
-      <pseudo_event id="89" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0">
+      <pseudo_event id="90" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="86" operation="promoted" operation_key="redis-bundle-master_promoted_0"/>
+        <pseudo_event id="87" operation="promoted" operation_key="redis-bundle-master_promoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="88" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+        <pseudo_event id="89" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="26">
+  <synapse id="27">
     <action_set>
-      <pseudo_event id="88" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0">
+      <pseudo_event id="89" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="87" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+        <pseudo_event id="88" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="133" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="134" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="27">
+  <synapse id="28">
     <action_set>
-      <pseudo_event id="87" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0">
+      <pseudo_event id="88" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="28" priority="1000000">
+  <synapse id="29" priority="1000000">
     <action_set>
-      <pseudo_event id="86" operation="promoted" operation_key="redis-bundle-master_promoted_0">
+      <pseudo_event id="87" operation="promoted" operation_key="redis-bundle-master_promoted_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="71" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="72" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="29">
+  <synapse id="30">
     <action_set>
-      <pseudo_event id="85" operation="promote" operation_key="redis-bundle-master_promote_0">
+      <pseudo_event id="86" operation="promote" operation_key="redis-bundle-master_promote_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="88" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+        <pseudo_event id="89" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="97" operation="promote" operation_key="redis-bundle_promote_0"/>
+        <pseudo_event id="98" operation="promote" operation_key="redis-bundle_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="30">
+  <synapse id="31">
     <action_set>
-      <rsc_op id="114" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="115" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="113" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="114" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="31">
+  <synapse id="32">
     <action_set>
-      <rsc_op id="113" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="114" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="15" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="16" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="115" operation="start" operation_key="haproxy-bundle_start_0"/>
+        <pseudo_event id="116" operation="start" operation_key="haproxy-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="32">
+  <synapse id="33">
     <action_set>
-      <rsc_op id="15" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="16" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="33" priority="1000000">
+  <synapse id="34" priority="1000000">
     <action_set>
-      <pseudo_event id="116" operation="running" operation_key="haproxy-bundle_running_0">
+      <pseudo_event id="117" operation="running" operation_key="haproxy-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="113" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="114" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="34">
+  <synapse id="35">
     <action_set>
-      <pseudo_event id="115" operation="start" operation_key="haproxy-bundle_start_0">
+      <pseudo_event id="116" operation="start" operation_key="haproxy-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="35" priority="1000000">
+  <synapse id="36" priority="1000000">
     <action_set>
-      <pseudo_event id="98" operation="promoted" operation_key="redis-bundle_promoted_0">
+      <pseudo_event id="99" operation="promoted" operation_key="redis-bundle_promoted_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="90" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
+        <pseudo_event id="91" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="36">
+  <synapse id="37">
     <action_set>
-      <pseudo_event id="97" operation="promote" operation_key="redis-bundle_promote_0">
+      <pseudo_event id="98" operation="promote" operation_key="redis-bundle_promote_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="37" priority="1000000">
+  <synapse id="38" priority="1000000">
     <action_set>
-      <pseudo_event id="43" operation="running" operation_key="galera-bundle_running_0">
+      <pseudo_event id="44" operation="running" operation_key="galera-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="39" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="40" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="50" operation="running" operation_key="galera-bundle-master_running_0"/>
+        <pseudo_event id="51" operation="running" operation_key="galera-bundle-master_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="38">
+  <synapse id="39">
     <action_set>
-      <pseudo_event id="42" operation="start" operation_key="galera-bundle_start_0">
+      <pseudo_event id="43" operation="start" operation_key="galera-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="21" operation="running" operation_key="rabbitmq-bundle_running_0"/>
+        <pseudo_event id="22" operation="running" operation_key="rabbitmq-bundle_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="98" operation="promoted" operation_key="redis-bundle_promoted_0"/>
+        <pseudo_event id="99" operation="promoted" operation_key="redis-bundle_promoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="116" operation="running" operation_key="haproxy-bundle_running_0"/>
+        <pseudo_event id="117" operation="running" operation_key="haproxy-bundle_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="39" priority="1000000">
+  <synapse id="40" priority="1000000">
     <action_set>
-      <pseudo_event id="21" operation="running" operation_key="rabbitmq-bundle_running_0">
+      <pseudo_event id="22" operation="running" operation_key="rabbitmq-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="31" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="32" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="40">
+  <synapse id="41">
     <action_set>
-      <pseudo_event id="20" operation="start" operation_key="rabbitmq-bundle_start_0">
+      <pseudo_event id="21" operation="start" operation_key="rabbitmq-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="41">
+  <synapse id="42">
     <action_set>
       <pseudo_event id="14" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -556,10 +568,10 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="39" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="40" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="41" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/bundle-order-partial-start-2.summary b/pengine/test10/bundle-order-partial-start-2.summary
index bf14db0..50933a2 100644
--- a/pengine/test10/bundle-order-partial-start-2.summary
+++ b/pengine/test10/bundle-order-partial-start-2.summary
@@ -29,6 +29,7 @@ Transition Summary:
  * Start   haproxy-bundle-docker-0	(undercloud)
 
 Executing cluster transition:
+ * Resource action: rabbitmq:0      monitor on rabbitmq-bundle-0
  * Pseudo action:   rabbitmq-bundle-clone_pre_notify_start_0
  * Resource action: galera-bundle-0 stop on undercloud
  * Pseudo action:   redis-bundle-master_pre_notify_promote_0
diff --git a/pengine/test10/bundle-order-partial-start.dot b/pengine/test10/bundle-order-partial-start.dot
index 796749d..958e7f4 100644
--- a/pengine/test10/bundle-order-partial-start.dot
+++ b/pengine/test10/bundle-order-partial-start.dot
@@ -58,6 +58,8 @@ digraph "g" {
 "rabbitmq-bundle_running_0" [ style=bold color="green" fontcolor="orange"]
 "rabbitmq-bundle_start_0" -> "rabbitmq-bundle-clone_start_0" [ style = bold]
 "rabbitmq-bundle_start_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq:0_monitor_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_start_0" [ style = bold]
+"rabbitmq:0_monitor_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
 "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
 "rabbitmq:0_post_notify_start_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = bold]
 "rabbitmq:0_post_notify_start_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
diff --git a/pengine/test10/bundle-order-partial-start.exp b/pengine/test10/bundle-order-partial-start.exp
index d48fccf..8aad157 100644
--- a/pengine/test10/bundle-order-partial-start.exp
+++ b/pengine/test10/bundle-order-partial-start.exp
@@ -1,529 +1,541 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0" priority="1000000">
     <action_set>
-      <rsc_op id="127" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+      <rsc_op id="128" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="29" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="30" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="24" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+      <rsc_op id="25" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="23" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="24" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="30" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="31" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="23" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+      <rsc_op id="24" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="25" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="26" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="3" priority="1000000">
+  <synapse id="3">
     <action_set>
-      <pseudo_event id="30" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
+      <rsc_op id="13" operation="monitor" operation_key="rabbitmq:0_monitor_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+        <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_op_target_rc="7" CRM_meta_physical_host="undercloud" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="4" priority="1000000">
+    <action_set>
+      <pseudo_event id="31" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="29" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="30" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="127" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="128" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="4" priority="1000000">
+  <synapse id="5" priority="1000000">
     <action_set>
-      <pseudo_event id="29" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
+      <pseudo_event id="30" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="26" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
+        <pseudo_event id="27" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="28" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="29" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="5">
+  <synapse id="6">
     <action_set>
-      <pseudo_event id="28" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
+      <pseudo_event id="29" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="27" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
+        <pseudo_event id="28" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="6">
+  <synapse id="7">
     <action_set>
-      <pseudo_event id="27" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
+      <pseudo_event id="28" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="7" priority="1000000">
+  <synapse id="8" priority="1000000">
     <action_set>
-      <pseudo_event id="26" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
+      <pseudo_event id="27" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="23" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="24" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="25" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="26" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="8">
+  <synapse id="9">
     <action_set>
-      <pseudo_event id="25" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
+      <pseudo_event id="26" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="19" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+        <rsc_op id="13" operation="monitor" operation_key="rabbitmq:0_monitor_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="28" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="20" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="29" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="9">
+  <synapse id="10">
     <action_set>
-      <rsc_op id="47" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="48" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="39" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="40" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="45" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10">
+  <synapse id="11">
     <action_set>
-      <rsc_op id="46" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="47" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="39" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="40" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="45" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="11">
+  <synapse id="12">
     <action_set>
-      <rsc_op id="45" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="38" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="39" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="40" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="48" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <pseudo_event id="49" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12" priority="1000000">
+  <synapse id="13" priority="1000000">
     <action_set>
-      <pseudo_event id="49" operation="running" operation_key="galera-bundle-master_running_0">
+      <pseudo_event id="50" operation="running" operation_key="galera-bundle-master_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="45" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="48" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <pseudo_event id="49" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="13">
+  <synapse id="14">
     <action_set>
-      <pseudo_event id="48" operation="start" operation_key="galera-bundle-master_start_0">
+      <pseudo_event id="49" operation="start" operation_key="galera-bundle-master_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="41" operation="start" operation_key="galera-bundle_start_0"/>
+        <pseudo_event id="42" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14">
+  <synapse id="15">
     <action_set>
-      <rsc_op id="38" operation="monitor" operation_key="galera-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="39" operation="monitor" operation_key="galera-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="38" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="16">
     <action_set>
-      <rsc_op id="37" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="38" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="13" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="14" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="41" operation="start" operation_key="galera-bundle_start_0"/>
+        <pseudo_event id="42" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="16">
+  <synapse id="17">
     <action_set>
-      <rsc_op id="13" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="14" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="17">
+  <synapse id="18">
     <action_set>
-      <rsc_op id="40" operation="monitor" operation_key="galera-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="41" operation="monitor" operation_key="galera-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3123"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="39" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="40" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="18">
+  <synapse id="19">
     <action_set>
-      <rsc_op id="39" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="40" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3123"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="38" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="19" priority="1000000">
+  <synapse id="20" priority="1000000">
     <action_set>
-      <rsc_op id="133" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="134" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="88" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+        <pseudo_event id="89" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="20">
+  <synapse id="21">
     <action_set>
-      <rsc_op id="132" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="133" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="86" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+        <pseudo_event id="87" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="21">
+  <synapse id="22">
     <action_set>
-      <rsc_op id="71" operation="monitor" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="72" operation="monitor" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_op_target_rc="8" CRM_meta_physical_host="undercloud" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="70" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="71" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="89" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
+        <pseudo_event id="90" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="22">
+  <synapse id="23">
     <action_set>
-      <rsc_op id="70" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="71" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="84" operation="promote" operation_key="redis-bundle-master_promote_0"/>
+        <pseudo_event id="85" operation="promote" operation_key="redis-bundle-master_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="23" priority="1000000">
+  <synapse id="24" priority="1000000">
     <action_set>
-      <pseudo_event id="89" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0">
+      <pseudo_event id="90" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="88" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+        <pseudo_event id="89" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="133" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="134" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="24" priority="1000000">
+  <synapse id="25" priority="1000000">
     <action_set>
-      <pseudo_event id="88" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0">
+      <pseudo_event id="89" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="85" operation="promoted" operation_key="redis-bundle-master_promoted_0"/>
+        <pseudo_event id="86" operation="promoted" operation_key="redis-bundle-master_promoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="87" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+        <pseudo_event id="88" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="25">
+  <synapse id="26">
     <action_set>
-      <pseudo_event id="87" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0">
+      <pseudo_event id="88" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="86" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+        <pseudo_event id="87" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="132" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="133" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="26">
+  <synapse id="27">
     <action_set>
-      <pseudo_event id="86" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0">
+      <pseudo_event id="87" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="27" priority="1000000">
+  <synapse id="28" priority="1000000">
     <action_set>
-      <pseudo_event id="85" operation="promoted" operation_key="redis-bundle-master_promoted_0">
+      <pseudo_event id="86" operation="promoted" operation_key="redis-bundle-master_promoted_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="70" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="71" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="28">
+  <synapse id="29">
     <action_set>
-      <pseudo_event id="84" operation="promote" operation_key="redis-bundle-master_promote_0">
+      <pseudo_event id="85" operation="promote" operation_key="redis-bundle-master_promote_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="87" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+        <pseudo_event id="88" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="96" operation="promote" operation_key="redis-bundle_promote_0"/>
+        <pseudo_event id="97" operation="promote" operation_key="redis-bundle_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="29">
+  <synapse id="30">
     <action_set>
-      <rsc_op id="113" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="114" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="112" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="113" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="30">
+  <synapse id="31">
     <action_set>
-      <rsc_op id="112" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="113" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="14" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="15" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="114" operation="start" operation_key="haproxy-bundle_start_0"/>
+        <pseudo_event id="115" operation="start" operation_key="haproxy-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="31">
+  <synapse id="32">
     <action_set>
-      <rsc_op id="14" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="15" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="32" priority="1000000">
+  <synapse id="33" priority="1000000">
     <action_set>
-      <pseudo_event id="115" operation="running" operation_key="haproxy-bundle_running_0">
+      <pseudo_event id="116" operation="running" operation_key="haproxy-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="112" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="113" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="33">
+  <synapse id="34">
     <action_set>
-      <pseudo_event id="114" operation="start" operation_key="haproxy-bundle_start_0">
+      <pseudo_event id="115" operation="start" operation_key="haproxy-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="34" priority="1000000">
+  <synapse id="35" priority="1000000">
     <action_set>
-      <pseudo_event id="97" operation="promoted" operation_key="redis-bundle_promoted_0">
+      <pseudo_event id="98" operation="promoted" operation_key="redis-bundle_promoted_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="89" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
+        <pseudo_event id="90" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="35">
+  <synapse id="36">
     <action_set>
-      <pseudo_event id="96" operation="promote" operation_key="redis-bundle_promote_0">
+      <pseudo_event id="97" operation="promote" operation_key="redis-bundle_promote_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="36" priority="1000000">
+  <synapse id="37" priority="1000000">
     <action_set>
-      <pseudo_event id="42" operation="running" operation_key="galera-bundle_running_0">
+      <pseudo_event id="43" operation="running" operation_key="galera-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="38" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="49" operation="running" operation_key="galera-bundle-master_running_0"/>
+        <pseudo_event id="50" operation="running" operation_key="galera-bundle-master_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="37">
+  <synapse id="38">
     <action_set>
-      <pseudo_event id="41" operation="start" operation_key="galera-bundle_start_0">
+      <pseudo_event id="42" operation="start" operation_key="galera-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="20" operation="running" operation_key="rabbitmq-bundle_running_0"/>
+        <pseudo_event id="21" operation="running" operation_key="rabbitmq-bundle_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="97" operation="promoted" operation_key="redis-bundle_promoted_0"/>
+        <pseudo_event id="98" operation="promoted" operation_key="redis-bundle_promoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="115" operation="running" operation_key="haproxy-bundle_running_0"/>
+        <pseudo_event id="116" operation="running" operation_key="haproxy-bundle_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="38" priority="1000000">
+  <synapse id="39" priority="1000000">
     <action_set>
-      <pseudo_event id="20" operation="running" operation_key="rabbitmq-bundle_running_0">
+      <pseudo_event id="21" operation="running" operation_key="rabbitmq-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="30" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="31" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="39">
+  <synapse id="40">
     <action_set>
-      <pseudo_event id="19" operation="start" operation_key="rabbitmq-bundle_start_0">
+      <pseudo_event id="20" operation="start" operation_key="rabbitmq-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
diff --git a/pengine/test10/bundle-order-partial-start.summary b/pengine/test10/bundle-order-partial-start.summary
index 4e02e88..9045545 100644
--- a/pengine/test10/bundle-order-partial-start.summary
+++ b/pengine/test10/bundle-order-partial-start.summary
@@ -29,6 +29,7 @@ Transition Summary:
  * Start   haproxy-bundle-docker-0	(undercloud)
 
 Executing cluster transition:
+ * Resource action: rabbitmq:0      monitor on rabbitmq-bundle-0
  * Pseudo action:   rabbitmq-bundle-clone_pre_notify_start_0
  * Resource action: galera-bundle-docker-0 monitor on undercloud
  * Pseudo action:   redis-bundle-master_pre_notify_promote_0
diff --git a/pengine/test10/bundle-order-startup.exp b/pengine/test10/bundle-order-startup.exp
index 03b064a..ec1053c 100644
--- a/pengine/test10/bundle-order-startup.exp
+++ b/pengine/test10/bundle-order-startup.exp
@@ -1,7 +1,7 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0" priority="1000000">
     <action_set>
-      <rsc_op id="126" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+      <rsc_op id="127" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
@@ -61,7 +61,7 @@
         <pseudo_event id="27" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="126" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="127" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
@@ -338,7 +338,7 @@
   </synapse>
   <synapse id="24" priority="1000000">
     <action_set>
-      <rsc_op id="127" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="128" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
@@ -417,7 +417,7 @@
         <pseudo_event id="73" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="127" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="128" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/container-is-remote-node.dot b/pengine/test10/container-is-remote-node.dot
index d8f1c9f..ebb0793 100644
--- a/pengine/test10/container-is-remote-node.dot
+++ b/pengine/test10/container-is-remote-node.dot
@@ -1,2 +1,6 @@
  digraph "g" {
+"clvmd_monitor_0 RNVM1" [ style=bold color="green" fontcolor="black"]
+"dlm_monitor_0 RNVM1" [ style=bold color="green" fontcolor="black"]
+"gfs2-lv_1_1_monitor_0 RNVM1" [ style=bold color="green" fontcolor="black"]
+"gfs2-lv_1_2_monitor_0 RNVM1" [ style=bold color="green" fontcolor="black"]
 }
diff --git a/pengine/test10/container-is-remote-node.exp b/pengine/test10/container-is-remote-node.exp
index 56e315f..d656dd2 100644
--- a/pengine/test10/container-is-remote-node.exp
+++ b/pengine/test10/container-is-remote-node.exp
@@ -1 +1,38 @@
-<transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0"/>
+<transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
+  <synapse id="0">
+    <action_set>
+      <rsc_op id="15" operation="monitor" operation_key="dlm_monitor_0" internal_operation_key="dlm:0_monitor_0" on_node="RNVM1" on_node_uuid="RNVM1" router_node="lama2">
+        <primitive id="dlm" long-id="dlm:0" class="ocf" provider="pacemaker" type="controld"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="RNVM1" CRM_meta_on_node_uuid="RNVM1" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="1">
+    <action_set>
+      <rsc_op id="16" operation="monitor" operation_key="clvmd_monitor_0" internal_operation_key="clvmd:0_monitor_0" on_node="RNVM1" on_node_uuid="RNVM1" router_node="lama2">
+        <primitive id="clvmd" long-id="clvmd:0" class="ocf" provider="heartbeat" type="clvm"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="RNVM1" CRM_meta_on_node_uuid="RNVM1" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="2">
+    <action_set>
+      <rsc_op id="17" operation="monitor" operation_key="gfs2-lv_1_1_monitor_0" internal_operation_key="gfs2-lv_1_1:0_monitor_0" on_node="RNVM1" on_node_uuid="RNVM1" router_node="lama2">
+        <primitive id="gfs2-lv_1_1" long-id="gfs2-lv_1_1:0" class="ocf" provider="heartbeat" type="Filesystem"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="RNVM1" CRM_meta_on_node_uuid="RNVM1" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama2" CRM_meta_timeout="20000"  device="/dev/vg1/lv_1_1" directory="/FSimg1" fstype="gfs2"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="3">
+    <action_set>
+      <rsc_op id="18" operation="monitor" operation_key="gfs2-lv_1_2_monitor_0" internal_operation_key="gfs2-lv_1_2:0_monitor_0" on_node="RNVM1" on_node_uuid="RNVM1" router_node="lama2">
+        <primitive id="gfs2-lv_1_2" long-id="gfs2-lv_1_2:0" class="ocf" provider="heartbeat" type="Filesystem"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="RNVM1" CRM_meta_on_node_uuid="RNVM1" CRM_meta_op_target_rc="7" CRM_meta_physical_host="lama2" CRM_meta_timeout="20000"  device="/dev/vg1/lv_1_2" directory="/FSimg2" fstype="gfs2"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+</transition_graph>
diff --git a/pengine/test10/container-is-remote-node.summary b/pengine/test10/container-is-remote-node.summary
index 6ed0526..f5c78ce 100644
--- a/pengine/test10/container-is-remote-node.summary
+++ b/pengine/test10/container-is-remote-node.summary
@@ -26,6 +26,10 @@ Containers: [ RNVM1:VM1 ]
 Transition Summary:
 
 Executing cluster transition:
+ * Resource action: dlm             monitor on RNVM1
+ * Resource action: clvmd           monitor on RNVM1
+ * Resource action: gfs2-lv_1_1     monitor on RNVM1
+ * Resource action: gfs2-lv_1_2     monitor on RNVM1
 
 Revised cluster status:
 Online: [ lama2 lama3 ]
diff --git a/pengine/test10/guest-node-host-dies.dot b/pengine/test10/guest-node-host-dies.dot
index 04152d1..83f38c4 100644
--- a/pengine/test10/guest-node-host-dies.dot
+++ b/pengine/test10/guest-node-host-dies.dot
@@ -83,6 +83,7 @@ digraph "g" {
 "lxc1_stop_0 rhel7-1" -> "all_stopped" [ style = bold]
 "lxc1_stop_0 rhel7-1" -> "container1_stop_0 rhel7-1" [ style = bold]
 "lxc1_stop_0 rhel7-1" -> "lxc1_start_0 rhel7-2" [ style = bold]
+"lxc1_stop_0 rhel7-1" -> "rsc_rhel7-1_start_0 rhel7-5" [ style = bold]
 "lxc1_stop_0 rhel7-1" [ style=bold color="green" fontcolor="orange"]
 "lxc2_monitor_0 rhel7-2" -> "lxc2_start_0 rhel7-3" [ style = bold]
 "lxc2_monitor_0 rhel7-2" -> "lxc2_stop_0 rhel7-1" [ style = bold]
@@ -101,6 +102,7 @@ digraph "g" {
 "lxc2_stop_0 rhel7-1" -> "all_stopped" [ style = bold]
 "lxc2_stop_0 rhel7-1" -> "container2_stop_0 rhel7-1" [ style = bold]
 "lxc2_stop_0 rhel7-1" -> "lxc2_start_0 rhel7-3" [ style = bold]
+"lxc2_stop_0 rhel7-1" -> "rsc_rhel7-1_start_0 rhel7-5" [ style = bold]
 "lxc2_stop_0 rhel7-1" [ style=bold color="green" fontcolor="orange"]
 "rsc_rhel7-1_monitor_5000 rhel7-5" [ style=bold color="green" fontcolor="black"]
 "rsc_rhel7-1_start_0 rhel7-5" -> "rsc_rhel7-1_monitor_5000 rhel7-5" [ style = bold]
diff --git a/pengine/test10/guest-node-host-dies.exp b/pengine/test10/guest-node-host-dies.exp
index cd8d81a..01fe678 100644
--- a/pengine/test10/guest-node-host-dies.exp
+++ b/pengine/test10/guest-node-host-dies.exp
@@ -62,6 +62,12 @@
         <pseudo_event id="12" operation="stop" operation_key="rsc_rhel7-1_stop_0"/>
       </trigger>
       <trigger>
+        <pseudo_event id="34" operation="stop" operation_key="lxc1_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="37" operation="stop" operation_key="lxc2_stop_0"/>
+      </trigger>
+      <trigger>
         <pseudo_event id="40" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
diff --git a/pengine/test10/whitebox-asymmetric.dot b/pengine/test10/whitebox-asymmetric.dot
index 896f66a..da2f3e3 100644
--- a/pengine/test10/whitebox-asymmetric.dot
+++ b/pengine/test10/whitebox-asymmetric.dot
@@ -3,8 +3,12 @@
 "18node2_start_0 18builder" -> "18node2_monitor_30000 18builder" [ style = bold]
 "18node2_start_0 18builder" -> "nfs_mount_monitor_10000 18node2" [ style = bold]
 "18node2_start_0 18builder" -> "nfs_mount_start_0 18node2" [ style = bold]
+"18node2_start_0 18builder" -> "vg_tags_dup_monitor_0 18node2" [ style = bold]
+"18node2_start_0 18builder" -> "webserver_monitor_0 18node2" [ style = bold]
 "18node2_start_0 18builder" [ style=bold color="green" fontcolor="black"]
 "nfs_mount_monitor_10000 18node2" [ style=bold color="green" fontcolor="black"]
 "nfs_mount_start_0 18node2" -> "nfs_mount_monitor_10000 18node2" [ style = bold]
 "nfs_mount_start_0 18node2" [ style=bold color="green" fontcolor="black"]
+"vg_tags_dup_monitor_0 18node2" [ style=bold color="green" fontcolor="black"]
+"webserver_monitor_0 18node2" [ style=bold color="green" fontcolor="black"]
 }
diff --git a/pengine/test10/whitebox-asymmetric.exp b/pengine/test10/whitebox-asymmetric.exp
index 1178fb6..db71443 100644
--- a/pengine/test10/whitebox-asymmetric.exp
+++ b/pengine/test10/whitebox-asymmetric.exp
@@ -1,49 +1,75 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="5" operation="monitor" operation_key="nfs_mount_monitor_10000" on_node="18node2" on_node_uuid="18node2" router_node="18builder">
+      <rsc_op id="2" operation="monitor" operation_key="webserver_monitor_0" on_node="18node2" on_node_uuid="18node2" router_node="18builder">
+        <primitive id="webserver" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="18node2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18builder" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="12" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="1">
+    <action_set>
+      <rsc_op id="7" operation="monitor" operation_key="nfs_mount_monitor_10000" on_node="18node2" on_node_uuid="18node2" router_node="18builder">
         <primitive id="nfs_mount" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="18node2" CRM_meta_physical_host="18builder" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="start" operation_key="nfs_mount_start_0" on_node="18node2" on_node_uuid="18node2" router_node="18builder"/>
+        <rsc_op id="6" operation="start" operation_key="nfs_mount_start_0" on_node="18node2" on_node_uuid="18node2" router_node="18builder"/>
       </trigger>
       <trigger>
-        <rsc_op id="10" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
+        <rsc_op id="12" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="1">
+  <synapse id="2">
     <action_set>
-      <rsc_op id="4" operation="start" operation_key="nfs_mount_start_0" on_node="18node2" on_node_uuid="18node2" router_node="18builder">
+      <rsc_op id="6" operation="start" operation_key="nfs_mount_start_0" on_node="18node2" on_node_uuid="18node2" router_node="18builder">
         <primitive id="nfs_mount" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="18node2" CRM_meta_physical_host="18builder" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="10" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
+        <rsc_op id="12" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="2">
+  <synapse id="3">
     <action_set>
-      <rsc_op id="11" operation="monitor" operation_key="18node2_monitor_30000" on_node="18builder" on_node_uuid="5">
+      <rsc_op id="3" operation="monitor" operation_key="vg_tags_dup_monitor_0" on_node="18node2" on_node_uuid="18node2" router_node="18builder">
+        <primitive id="vg_tags_dup" class="ocf" provider="heartbeat" type="LVM"/>
+        <attributes CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="18node2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18builder" CRM_meta_timeout="20000"  exclusive="true" volgrpname="fakesss"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="12" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="4">
+    <action_set>
+      <rsc_op id="13" operation="monitor" operation_key="18node2_monitor_30000" on_node="18builder" on_node_uuid="5">
         <primitive id="18node2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container2" CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="10" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
+        <rsc_op id="12" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="3">
+  <synapse id="5">
     <action_set>
-      <rsc_op id="10" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5">
+      <rsc_op id="12" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5">
         <primitive id="18node2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container2" CRM_meta_name="start" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_timeout="60000" />
       </rsc_op>
diff --git a/pengine/test10/whitebox-asymmetric.summary b/pengine/test10/whitebox-asymmetric.summary
index 1c5011d..8da9996 100644
--- a/pengine/test10/whitebox-asymmetric.summary
+++ b/pengine/test10/whitebox-asymmetric.summary
@@ -17,7 +17,9 @@ Transition Summary:
 
 Executing cluster transition:
  * Resource action: 18node2         start on 18builder
+ * Resource action: webserver       monitor on 18node2
  * Resource action: nfs_mount       start on 18node2
+ * Resource action: vg_tags_dup     monitor on 18node2
  * Resource action: 18node2         monitor=30000 on 18builder
  * Resource action: nfs_mount       monitor=10000 on 18node2
 
diff --git a/pengine/test10/whitebox-fail1.dot b/pengine/test10/whitebox-fail1.dot
index 0123a58..3cf4f76 100644
--- a/pengine/test10/whitebox-fail1.dot
+++ b/pengine/test10/whitebox-fail1.dot
@@ -1,10 +1,15 @@
 digraph "g" {
+"A_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
+"B_monitor_0 lxc2" -> "B_start_0 lxc1" [ style = bold]
+"B_monitor_0 lxc2" -> "B_stop_0 lxc1" [ style = bold]
+"B_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
 "B_monitor_10000 lxc1" [ style=bold color="green" fontcolor="black"]
 "B_start_0 lxc1" -> "B_monitor_10000 lxc1" [ style = bold]
 "B_start_0 lxc1" [ style=bold color="green" fontcolor="black"]
 "B_stop_0 lxc1" -> "B_start_0 lxc1" [ style = bold]
 "B_stop_0 lxc1" -> "all_stopped" [ style = bold]
 "B_stop_0 lxc1" [ style=bold color="green" fontcolor="orange"]
+"D_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
 "M-clone_running_0" [ style=bold color="green" fontcolor="orange"]
 "M-clone_start_0" -> "M-clone_running_0" [ style = bold]
 "M-clone_start_0" -> "M_start_0 lxc1" [ style = bold]
diff --git a/pengine/test10/whitebox-fail1.exp b/pengine/test10/whitebox-fail1.exp
index 4cb6136..ab739b5 100644
--- a/pengine/test10/whitebox-fail1.exp
+++ b/pengine/test10/whitebox-fail1.exp
@@ -1,7 +1,7 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="12" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2">
+      <rsc_op id="15" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2">
         <primitive id="container1" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="2" CRM_meta_remote_node="lxc1" CRM_meta_timeout="20000" config="/home/dvossel/virtual_machines/lxc/lxc1.xml"  force_stop="true" hypervisor="lxc:///"/>
       </rsc_op>
@@ -11,7 +11,7 @@
         <rsc_op id="5" operation="stop" operation_key="container1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
@@ -24,192 +24,225 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="41" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="44" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="27" operation="monitor" operation_key="M_monitor_10000" internal_operation_key="M:4_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
+      <rsc_op id="30" operation="monitor" operation_key="M_monitor_10000" internal_operation_key="M:4_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="M" long-id="M:4" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="26" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="29" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
       <trigger>
-        <rsc_op id="42" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="45" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="26" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
+      <rsc_op id="29" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="M" long-id="M:4" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="12" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="15" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="25" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0"/>
+        <pseudo_event id="28" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="28" operation="start" operation_key="M-clone_start_0"/>
+        <pseudo_event id="31" operation="start" operation_key="M-clone_start_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="42" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="45" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="25" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0">
+      <pseudo_event id="28" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0">
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="30" operation="stop" operation_key="M-clone_stop_0"/>
+        <pseudo_event id="33" operation="stop" operation_key="M-clone_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="46" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
+        <pseudo_event id="49" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5" priority="1000000">
     <action_set>
-      <pseudo_event id="31" operation="stopped" operation_key="M-clone_stopped_0">
+      <pseudo_event id="34" operation="stopped" operation_key="M-clone_stopped_0">
         <attributes CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="25" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0"/>
+        <pseudo_event id="28" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="30" operation="stop" operation_key="M-clone_stop_0"/>
+        <pseudo_event id="33" operation="stop" operation_key="M-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="30" operation="stop" operation_key="M-clone_stop_0">
+      <pseudo_event id="33" operation="stop" operation_key="M-clone_stop_0">
         <attributes CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="46" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
+        <pseudo_event id="49" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7" priority="1000000">
     <action_set>
-      <pseudo_event id="29" operation="running" operation_key="M-clone_running_0">
+      <pseudo_event id="32" operation="running" operation_key="M-clone_running_0">
         <attributes CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="26" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="29" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="28" operation="start" operation_key="M-clone_start_0"/>
+        <pseudo_event id="31" operation="start" operation_key="M-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <pseudo_event id="28" operation="start" operation_key="M-clone_start_0">
+      <pseudo_event id="31" operation="start" operation_key="M-clone_start_0">
         <attributes CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="31" operation="stopped" operation_key="M-clone_stopped_0"/>
+        <pseudo_event id="34" operation="stopped" operation_key="M-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <rsc_op id="36" operation="monitor" operation_key="B_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
+      <rsc_op id="12" operation="monitor" operation_key="A_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+        <primitive id="A" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="10">
+    <action_set>
+      <rsc_op id="39" operation="monitor" operation_key="B_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="B_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="38" operation="start" operation_key="B_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
       <trigger>
-        <rsc_op id="42" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="45" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10">
+  <synapse id="11">
     <action_set>
-      <rsc_op id="35" operation="start" operation_key="B_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
+      <rsc_op id="38" operation="start" operation_key="B_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="12" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="13" operation="monitor" operation_key="B_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="15" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="34" operation="stop" operation_key="B_stop_0"/>
+        <pseudo_event id="37" operation="stop" operation_key="B_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="42" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="45" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="11">
+  <synapse id="12">
     <action_set>
-      <pseudo_event id="34" operation="stop" operation_key="B_stop_0">
+      <pseudo_event id="37" operation="stop" operation_key="B_stop_0">
         <attributes CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="46" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
+        <rsc_op id="13" operation="monitor" operation_key="B_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="49" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12">
+  <synapse id="13">
+    <action_set>
+      <rsc_op id="13" operation="monitor" operation_key="B_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+        <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="14">
+    <action_set>
+      <rsc_op id="14" operation="monitor" operation_key="D_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+        <primitive id="D" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="15">
     <action_set>
-      <rsc_op id="42" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2">
+      <rsc_op id="45" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_name="start" CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="12" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="15" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="41" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="44" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="13">
+  <synapse id="16">
     <action_set>
-      <rsc_op id="41" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2">
+      <rsc_op id="44" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
         <downed>
@@ -219,7 +252,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="14">
+  <synapse id="17">
     <action_set>
       <rsc_op id="6" operation="monitor" operation_key="lxc1_monitor_30000" on_node="18node2" on_node_uuid="2">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
@@ -228,13 +261,13 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="42" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="45" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="18">
     <action_set>
-      <pseudo_event id="46" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1">
+      <pseudo_event id="49" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1">
         <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_stonith_action="reboot" />
         <downed>
           <node id="lxc1"/>
@@ -247,19 +280,19 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="16">
+  <synapse id="19">
     <action_set>
-      <pseudo_event id="45" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="46" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
+        <pseudo_event id="49" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="17">
+  <synapse id="20">
     <action_set>
       <pseudo_event id="11" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -270,16 +303,16 @@
         <rsc_op id="5" operation="stop" operation_key="container1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="25" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0"/>
+        <pseudo_event id="28" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="34" operation="stop" operation_key="B_stop_0"/>
+        <pseudo_event id="37" operation="stop" operation_key="B_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="41" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="44" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/whitebox-fail1.summary b/pengine/test10/whitebox-fail1.summary
index 1271d4f..d1f3480 100644
--- a/pengine/test10/whitebox-fail1.summary
+++ b/pengine/test10/whitebox-fail1.summary
@@ -21,6 +21,9 @@ Transition Summary:
  * Restart    lxc1           ( 18node2 )   due to required container1 start
 
 Executing cluster transition:
+ * Resource action: A               monitor on lxc2
+ * Resource action: B               monitor on lxc2
+ * Resource action: D               monitor on lxc2
  * Resource action: lxc1            stop on 18node2
  * Resource action: container1      stop on 18node2
  * Pseudo action:   stonith-lxc1-reboot on lxc1
diff --git a/pengine/test10/whitebox-fail2.dot b/pengine/test10/whitebox-fail2.dot
index 0123a58..3cf4f76 100644
--- a/pengine/test10/whitebox-fail2.dot
+++ b/pengine/test10/whitebox-fail2.dot
@@ -1,10 +1,15 @@
 digraph "g" {
+"A_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
+"B_monitor_0 lxc2" -> "B_start_0 lxc1" [ style = bold]
+"B_monitor_0 lxc2" -> "B_stop_0 lxc1" [ style = bold]
+"B_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
 "B_monitor_10000 lxc1" [ style=bold color="green" fontcolor="black"]
 "B_start_0 lxc1" -> "B_monitor_10000 lxc1" [ style = bold]
 "B_start_0 lxc1" [ style=bold color="green" fontcolor="black"]
 "B_stop_0 lxc1" -> "B_start_0 lxc1" [ style = bold]
 "B_stop_0 lxc1" -> "all_stopped" [ style = bold]
 "B_stop_0 lxc1" [ style=bold color="green" fontcolor="orange"]
+"D_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
 "M-clone_running_0" [ style=bold color="green" fontcolor="orange"]
 "M-clone_start_0" -> "M-clone_running_0" [ style = bold]
 "M-clone_start_0" -> "M_start_0 lxc1" [ style = bold]
diff --git a/pengine/test10/whitebox-fail2.exp b/pengine/test10/whitebox-fail2.exp
index 4cb6136..ab739b5 100644
--- a/pengine/test10/whitebox-fail2.exp
+++ b/pengine/test10/whitebox-fail2.exp
@@ -1,7 +1,7 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="12" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2">
+      <rsc_op id="15" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2">
         <primitive id="container1" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="2" CRM_meta_remote_node="lxc1" CRM_meta_timeout="20000" config="/home/dvossel/virtual_machines/lxc/lxc1.xml"  force_stop="true" hypervisor="lxc:///"/>
       </rsc_op>
@@ -11,7 +11,7 @@
         <rsc_op id="5" operation="stop" operation_key="container1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
@@ -24,192 +24,225 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="41" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="44" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="27" operation="monitor" operation_key="M_monitor_10000" internal_operation_key="M:4_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
+      <rsc_op id="30" operation="monitor" operation_key="M_monitor_10000" internal_operation_key="M:4_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="M" long-id="M:4" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="26" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="29" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
       <trigger>
-        <rsc_op id="42" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="45" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="26" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
+      <rsc_op id="29" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="M" long-id="M:4" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="12" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="15" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="25" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0"/>
+        <pseudo_event id="28" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="28" operation="start" operation_key="M-clone_start_0"/>
+        <pseudo_event id="31" operation="start" operation_key="M-clone_start_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="42" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="45" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="25" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0">
+      <pseudo_event id="28" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0">
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="30" operation="stop" operation_key="M-clone_stop_0"/>
+        <pseudo_event id="33" operation="stop" operation_key="M-clone_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="46" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
+        <pseudo_event id="49" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5" priority="1000000">
     <action_set>
-      <pseudo_event id="31" operation="stopped" operation_key="M-clone_stopped_0">
+      <pseudo_event id="34" operation="stopped" operation_key="M-clone_stopped_0">
         <attributes CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="25" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0"/>
+        <pseudo_event id="28" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="30" operation="stop" operation_key="M-clone_stop_0"/>
+        <pseudo_event id="33" operation="stop" operation_key="M-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="30" operation="stop" operation_key="M-clone_stop_0">
+      <pseudo_event id="33" operation="stop" operation_key="M-clone_stop_0">
         <attributes CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="46" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
+        <pseudo_event id="49" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7" priority="1000000">
     <action_set>
-      <pseudo_event id="29" operation="running" operation_key="M-clone_running_0">
+      <pseudo_event id="32" operation="running" operation_key="M-clone_running_0">
         <attributes CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="26" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="29" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="28" operation="start" operation_key="M-clone_start_0"/>
+        <pseudo_event id="31" operation="start" operation_key="M-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <pseudo_event id="28" operation="start" operation_key="M-clone_start_0">
+      <pseudo_event id="31" operation="start" operation_key="M-clone_start_0">
         <attributes CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="31" operation="stopped" operation_key="M-clone_stopped_0"/>
+        <pseudo_event id="34" operation="stopped" operation_key="M-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <rsc_op id="36" operation="monitor" operation_key="B_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
+      <rsc_op id="12" operation="monitor" operation_key="A_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+        <primitive id="A" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="10">
+    <action_set>
+      <rsc_op id="39" operation="monitor" operation_key="B_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="B_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="38" operation="start" operation_key="B_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
       <trigger>
-        <rsc_op id="42" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="45" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10">
+  <synapse id="11">
     <action_set>
-      <rsc_op id="35" operation="start" operation_key="B_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
+      <rsc_op id="38" operation="start" operation_key="B_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="12" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="13" operation="monitor" operation_key="B_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="15" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="34" operation="stop" operation_key="B_stop_0"/>
+        <pseudo_event id="37" operation="stop" operation_key="B_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="42" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="45" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="11">
+  <synapse id="12">
     <action_set>
-      <pseudo_event id="34" operation="stop" operation_key="B_stop_0">
+      <pseudo_event id="37" operation="stop" operation_key="B_stop_0">
         <attributes CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="46" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
+        <rsc_op id="13" operation="monitor" operation_key="B_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="49" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12">
+  <synapse id="13">
+    <action_set>
+      <rsc_op id="13" operation="monitor" operation_key="B_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+        <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="14">
+    <action_set>
+      <rsc_op id="14" operation="monitor" operation_key="D_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+        <primitive id="D" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="15">
     <action_set>
-      <rsc_op id="42" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2">
+      <rsc_op id="45" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_name="start" CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="12" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="15" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="41" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="44" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="13">
+  <synapse id="16">
     <action_set>
-      <rsc_op id="41" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2">
+      <rsc_op id="44" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
         <downed>
@@ -219,7 +252,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="14">
+  <synapse id="17">
     <action_set>
       <rsc_op id="6" operation="monitor" operation_key="lxc1_monitor_30000" on_node="18node2" on_node_uuid="2">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
@@ -228,13 +261,13 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="42" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="45" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="18">
     <action_set>
-      <pseudo_event id="46" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1">
+      <pseudo_event id="49" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1">
         <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_stonith_action="reboot" />
         <downed>
           <node id="lxc1"/>
@@ -247,19 +280,19 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="16">
+  <synapse id="19">
     <action_set>
-      <pseudo_event id="45" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="46" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
+        <pseudo_event id="49" operation="stonith" operation_key="stonith-lxc1-reboot" on_node="lxc1" on_node_uuid="lxc1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="17">
+  <synapse id="20">
     <action_set>
       <pseudo_event id="11" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -270,16 +303,16 @@
         <rsc_op id="5" operation="stop" operation_key="container1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="25" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0"/>
+        <pseudo_event id="28" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="34" operation="stop" operation_key="B_stop_0"/>
+        <pseudo_event id="37" operation="stop" operation_key="B_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="41" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="44" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="48" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/whitebox-fail2.summary b/pengine/test10/whitebox-fail2.summary
index 5fd1ebd..ebf6c51 100644
--- a/pengine/test10/whitebox-fail2.summary
+++ b/pengine/test10/whitebox-fail2.summary
@@ -21,6 +21,9 @@ Transition Summary:
  * Recover    lxc1           ( 18node2 )  
 
 Executing cluster transition:
+ * Resource action: A               monitor on lxc2
+ * Resource action: B               monitor on lxc2
+ * Resource action: D               monitor on lxc2
  * Resource action: lxc1            stop on 18node2
  * Resource action: container1      stop on 18node2
  * Pseudo action:   stonith-lxc1-reboot on lxc1
diff --git a/pengine/test10/whitebox-fail3.dot b/pengine/test10/whitebox-fail3.dot
index 9814f66..6f608d1 100644
--- a/pengine/test10/whitebox-fail3.dot
+++ b/pengine/test10/whitebox-fail3.dot
@@ -1,5 +1,8 @@
 digraph "g" {
 "18builder_monitor_0 dvossel-laptop2" -> "18builder_start_0 dvossel-laptop2" [ style = bold]
+"18builder_monitor_0 dvossel-laptop2" -> "FAKE_start_0 18builder" [ style = bold]
+"18builder_monitor_0 dvossel-laptop2" -> "W-master_start_0" [ style = bold]
+"18builder_monitor_0 dvossel-laptop2" -> "X-master_start_0" [ style = bold]
 "18builder_monitor_0 dvossel-laptop2" [ style=bold color="green" fontcolor="black"]
 "18builder_monitor_30000 dvossel-laptop2" [ style=bold color="green" fontcolor="black"]
 "18builder_start_0 dvossel-laptop2" -> "18builder_monitor_30000 dvossel-laptop2" [ style = bold]
diff --git a/pengine/test10/whitebox-fail3.exp b/pengine/test10/whitebox-fail3.exp
index ec28f12..cddd7dd 100644
--- a/pengine/test10/whitebox-fail3.exp
+++ b/pengine/test10/whitebox-fail3.exp
@@ -17,6 +17,9 @@
     </action_set>
     <inputs>
       <trigger>
+        <rsc_op id="2" operation="monitor" operation_key="18builder_monitor_0" on_node="dvossel-laptop2" on_node_uuid="24815808"/>
+      </trigger>
+      <trigger>
         <rsc_op id="3" operation="start" operation_key="vm_start_0" on_node="dvossel-laptop2" on_node_uuid="24815808"/>
       </trigger>
       <trigger>
@@ -92,7 +95,11 @@
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <rsc_op id="2" operation="monitor" operation_key="18builder_monitor_0" on_node="dvossel-laptop2" on_node_uuid="24815808"/>
+      </trigger>
+    </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
@@ -150,7 +157,11 @@
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <rsc_op id="2" operation="monitor" operation_key="18builder_monitor_0" on_node="dvossel-laptop2" on_node_uuid="24815808"/>
+      </trigger>
+    </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
diff --git a/pengine/test10/whitebox-fail3.summary b/pengine/test10/whitebox-fail3.summary
index eded099..374fb69 100644
--- a/pengine/test10/whitebox-fail3.summary
+++ b/pengine/test10/whitebox-fail3.summary
@@ -22,10 +22,10 @@ Transition Summary:
 Executing cluster transition:
  * Resource action: vm              start on dvossel-laptop2
  * Resource action: FAKE            stop on dvossel-laptop2
- * Pseudo action:   W-master_start_0
- * Pseudo action:   X-master_start_0
  * Resource action: 18builder       monitor on dvossel-laptop2
  * Pseudo action:   all_stopped
+ * Pseudo action:   W-master_start_0
+ * Pseudo action:   X-master_start_0
  * Resource action: 18builder       start on dvossel-laptop2
  * Resource action: FAKE            start on 18builder
  * Resource action: W               start on 18builder
diff --git a/pengine/test10/whitebox-imply-stop-on-fence.dot b/pengine/test10/whitebox-imply-stop-on-fence.dot
index 8ef42fd..029e9f1 100644
--- a/pengine/test10/whitebox-imply-stop-on-fence.dot
+++ b/pengine/test10/whitebox-imply-stop-on-fence.dot
@@ -23,6 +23,10 @@
 "clvmd-clone_stop_0" [ style=bold color="green" fontcolor="orange"]
 "clvmd-clone_stopped_0" -> "dlm-clone_stop_0" [ style = bold]
 "clvmd-clone_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"clvmd_monitor_0 lxc-01_kiff-02" -> "clvmd_stop_0 kiff-01" [ style = bold]
+"clvmd_monitor_0 lxc-01_kiff-02" [ style=bold color="green" fontcolor="black"]
+"clvmd_monitor_0 lxc-02_kiff-02" -> "clvmd_stop_0 kiff-01" [ style = bold]
+"clvmd_monitor_0 lxc-02_kiff-02" [ style=bold color="green" fontcolor="black"]
 "clvmd_stop_0 kiff-01" -> "all_stopped" [ style = bold]
 "clvmd_stop_0 kiff-01" -> "clvmd-clone_stopped_0" [ style = bold]
 "clvmd_stop_0 kiff-01" -> "dlm_stop_0 kiff-01" [ style = bold]
@@ -31,6 +35,10 @@
 "dlm-clone_stop_0" -> "dlm_stop_0 kiff-01" [ style = bold]
 "dlm-clone_stop_0" [ style=bold color="green" fontcolor="orange"]
 "dlm-clone_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"dlm_monitor_0 lxc-01_kiff-02" -> "dlm_stop_0 kiff-01" [ style = bold]
+"dlm_monitor_0 lxc-01_kiff-02" [ style=bold color="green" fontcolor="black"]
+"dlm_monitor_0 lxc-02_kiff-02" -> "dlm_stop_0 kiff-01" [ style = bold]
+"dlm_monitor_0 lxc-02_kiff-02" [ style=bold color="green" fontcolor="black"]
 "dlm_stop_0 kiff-01" -> "all_stopped" [ style = bold]
 "dlm_stop_0 kiff-01" -> "dlm-clone_stopped_0" [ style = bold]
 "dlm_stop_0 kiff-01" [ style=bold color="green" fontcolor="orange"]
@@ -55,12 +63,17 @@
 "lxc-02_kiff-01_stop_0 kiff-01" -> "R-lxc-02_kiff-01_stop_0 kiff-01" [ style = bold]
 "lxc-02_kiff-01_stop_0 kiff-01" -> "all_stopped" [ style = bold]
 "lxc-02_kiff-01_stop_0 kiff-01" -> "lxc-02_kiff-01_start_0 kiff-02" [ style = bold]
+"lxc-02_kiff-01_stop_0 kiff-01" -> "vm-fs_start_0 lxc-01_kiff-01" [ style = bold]
 "lxc-02_kiff-01_stop_0 kiff-01" [ style=bold color="green" fontcolor="orange"]
 "shared0-clone_stop_0" -> "shared0-clone_stopped_0" [ style = bold]
 "shared0-clone_stop_0" -> "shared0_stop_0 kiff-01" [ style = bold]
 "shared0-clone_stop_0" [ style=bold color="green" fontcolor="orange"]
 "shared0-clone_stopped_0" -> "clvmd-clone_stop_0" [ style = bold]
 "shared0-clone_stopped_0" [ style=bold color="green" fontcolor="orange"]
+"shared0_monitor_0 lxc-01_kiff-02" -> "shared0_stop_0 kiff-01" [ style = bold]
+"shared0_monitor_0 lxc-01_kiff-02" [ style=bold color="green" fontcolor="black"]
+"shared0_monitor_0 lxc-02_kiff-02" -> "shared0_stop_0 kiff-01" [ style = bold]
+"shared0_monitor_0 lxc-02_kiff-02" [ style=bold color="green" fontcolor="black"]
 "shared0_stop_0 kiff-01" -> "all_stopped" [ style = bold]
 "shared0_stop_0 kiff-01" -> "clvmd_stop_0 kiff-01" [ style = bold]
 "shared0_stop_0 kiff-01" -> "shared0-clone_stopped_0" [ style = bold]
@@ -91,6 +104,12 @@
 "stonith_complete" -> "lxc-02_kiff-01_start_0 kiff-02" [ style = bold]
 "stonith_complete" -> "vm-fs_start_0 lxc-01_kiff-01" [ style = bold]
 "stonith_complete" [ style=bold color="green" fontcolor="orange"]
+"vm-fs_monitor_0 lxc-01_kiff-02" -> "vm-fs_start_0 lxc-01_kiff-01" [ style = bold]
+"vm-fs_monitor_0 lxc-01_kiff-02" -> "vm-fs_stop_0 lxc-01_kiff-01" [ style = bold]
+"vm-fs_monitor_0 lxc-01_kiff-02" [ style=bold color="green" fontcolor="black"]
+"vm-fs_monitor_0 lxc-02_kiff-02" -> "vm-fs_start_0 lxc-01_kiff-01" [ style = bold]
+"vm-fs_monitor_0 lxc-02_kiff-02" -> "vm-fs_stop_0 lxc-01_kiff-01" [ style = bold]
+"vm-fs_monitor_0 lxc-02_kiff-02" [ style=bold color="green" fontcolor="black"]
 "vm-fs_monitor_20000 lxc-01_kiff-01" [ style=bold color="green" fontcolor="black"]
 "vm-fs_start_0 lxc-01_kiff-01" -> "vm-fs_monitor_20000 lxc-01_kiff-01" [ style = bold]
 "vm-fs_start_0 lxc-01_kiff-01" [ style=bold color="green" fontcolor="black"]
diff --git a/pengine/test10/whitebox-imply-stop-on-fence.exp b/pengine/test10/whitebox-imply-stop-on-fence.exp
index d1e22ee..b5700c0 100644
--- a/pengine/test10/whitebox-imply-stop-on-fence.exp
+++ b/pengine/test10/whitebox-imply-stop-on-fence.exp
@@ -1,20 +1,20 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="15" operation="monitor" operation_key="fence-kiff-02_monitor_60000" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="23" operation="monitor" operation_key="fence-kiff-02_monitor_60000" on_node="kiff-02" on_node_uuid="2">
         <primitive id="fence-kiff-02" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" action="reboot"  ipaddr="kiff-02-ilo" login="admin" passwd="admin" pcmk_host_check="static-list" pcmk_host_list="kiff-02"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="14" operation="start" operation_key="fence-kiff-02_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="22" operation="start" operation_key="fence-kiff-02_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="14" operation="start" operation_key="fence-kiff-02_start_0" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="22" operation="start" operation_key="fence-kiff-02_start_0" on_node="kiff-02" on_node_uuid="2">
         <primitive id="fence-kiff-02" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" action="reboot"  ipaddr="kiff-02-ilo" login="admin" passwd="admin" pcmk_host_check="static-list" pcmk_host_list="kiff-02"/>
       </rsc_op>
@@ -24,13 +24,13 @@
         <pseudo_event id="10" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <pseudo_event id="13" operation="stop" operation_key="fence-kiff-02_stop_0"/>
+        <pseudo_event id="21" operation="stop" operation_key="fence-kiff-02_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="13" operation="stop" operation_key="fence-kiff-02_stop_0">
+      <pseudo_event id="21" operation="stop" operation_key="fence-kiff-02_stop_0">
         <attributes CRM_meta_timeout="20000" action="reboot"  ipaddr="kiff-02-ilo" login="admin" passwd="admin" pcmk_host_check="static-list" pcmk_host_list="kiff-02"/>
       </pseudo_event>
     </action_set>
@@ -38,7 +38,7 @@
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="16" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:0_stop_0">
+      <pseudo_event id="24" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="100000" />
       </pseudo_event>
     </action_set>
@@ -47,31 +47,55 @@
         <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="21" operation="stop" operation_key="dlm-clone_stop_0"/>
+        <rsc_op id="11" operation="monitor" operation_key="dlm_monitor_0" internal_operation_key="dlm:0_monitor_0" on_node="lxc-01_kiff-02" on_node_uuid="lxc-01_kiff-02" router_node="kiff-02"/>
       </trigger>
       <trigger>
-        <pseudo_event id="23" operation="stop" operation_key="clvmd_stop_0" internal_operation_key="clvmd:0_stop_0"/>
+        <rsc_op id="15" operation="monitor" operation_key="dlm_monitor_0" internal_operation_key="dlm:0_monitor_0" on_node="lxc-02_kiff-02" on_node_uuid="lxc-02_kiff-02" router_node="kiff-02"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="29" operation="stop" operation_key="dlm-clone_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="31" operation="stop" operation_key="clvmd_stop_0" internal_operation_key="clvmd:0_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="4" priority="1000000">
+  <synapse id="4">
+    <action_set>
+      <rsc_op id="15" operation="monitor" operation_key="dlm_monitor_0" internal_operation_key="dlm:0_monitor_0" on_node="lxc-02_kiff-02" on_node_uuid="lxc-02_kiff-02" router_node="kiff-02">
+        <primitive id="dlm" long-id="dlm:0" class="ocf" provider="pacemaker" type="controld"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc-02_kiff-02" CRM_meta_on_node_uuid="lxc-02_kiff-02" CRM_meta_op_target_rc="7" CRM_meta_physical_host="kiff-02" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="5">
     <action_set>
-      <pseudo_event id="22" operation="stopped" operation_key="dlm-clone_stopped_0">
+      <rsc_op id="11" operation="monitor" operation_key="dlm_monitor_0" internal_operation_key="dlm:0_monitor_0" on_node="lxc-01_kiff-02" on_node_uuid="lxc-01_kiff-02" router_node="kiff-02">
+        <primitive id="dlm" long-id="dlm:0" class="ocf" provider="pacemaker" type="controld"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc-01_kiff-02" CRM_meta_on_node_uuid="lxc-01_kiff-02" CRM_meta_op_target_rc="7" CRM_meta_physical_host="kiff-02" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="6" priority="1000000">
+    <action_set>
+      <pseudo_event id="30" operation="stopped" operation_key="dlm-clone_stopped_0">
         <attributes CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="16" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:0_stop_0"/>
+        <pseudo_event id="24" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="21" operation="stop" operation_key="dlm-clone_stop_0"/>
+        <pseudo_event id="29" operation="stop" operation_key="dlm-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="5">
+  <synapse id="7">
     <action_set>
-      <pseudo_event id="21" operation="stop" operation_key="dlm-clone_stop_0">
+      <pseudo_event id="29" operation="stop" operation_key="dlm-clone_stop_0">
         <attributes CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -80,13 +104,13 @@
         <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="stopped" operation_key="clvmd-clone_stopped_0"/>
+        <pseudo_event id="37" operation="stopped" operation_key="clvmd-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="6">
+  <synapse id="8">
     <action_set>
-      <pseudo_event id="23" operation="stop" operation_key="clvmd_stop_0" internal_operation_key="clvmd:0_stop_0">
+      <pseudo_event id="31" operation="stop" operation_key="clvmd_stop_0" internal_operation_key="clvmd:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="90000"  with_cmirrord="1"/>
       </pseudo_event>
     </action_set>
@@ -95,31 +119,55 @@
         <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="28" operation="stop" operation_key="clvmd-clone_stop_0"/>
+        <rsc_op id="12" operation="monitor" operation_key="clvmd_monitor_0" internal_operation_key="clvmd:0_monitor_0" on_node="lxc-01_kiff-02" on_node_uuid="lxc-01_kiff-02" router_node="kiff-02"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="16" operation="monitor" operation_key="clvmd_monitor_0" internal_operation_key="clvmd:0_monitor_0" on_node="lxc-02_kiff-02" on_node_uuid="lxc-02_kiff-02" router_node="kiff-02"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="36" operation="stop" operation_key="clvmd-clone_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="30" operation="stop" operation_key="shared0_stop_0" internal_operation_key="shared0:0_stop_0"/>
+        <pseudo_event id="38" operation="stop" operation_key="shared0_stop_0" internal_operation_key="shared0:0_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="7" priority="1000000">
+  <synapse id="9">
+    <action_set>
+      <rsc_op id="16" operation="monitor" operation_key="clvmd_monitor_0" internal_operation_key="clvmd:0_monitor_0" on_node="lxc-02_kiff-02" on_node_uuid="lxc-02_kiff-02" router_node="kiff-02">
+        <primitive id="clvmd" long-id="clvmd:0" class="ocf" provider="heartbeat" type="clvm"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc-02_kiff-02" CRM_meta_on_node_uuid="lxc-02_kiff-02" CRM_meta_op_target_rc="7" CRM_meta_physical_host="kiff-02" CRM_meta_timeout="20000"  with_cmirrord="1"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="10">
     <action_set>
-      <pseudo_event id="29" operation="stopped" operation_key="clvmd-clone_stopped_0">
+      <rsc_op id="12" operation="monitor" operation_key="clvmd_monitor_0" internal_operation_key="clvmd:0_monitor_0" on_node="lxc-01_kiff-02" on_node_uuid="lxc-01_kiff-02" router_node="kiff-02">
+        <primitive id="clvmd" long-id="clvmd:0" class="ocf" provider="heartbeat" type="clvm"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc-01_kiff-02" CRM_meta_on_node_uuid="lxc-01_kiff-02" CRM_meta_op_target_rc="7" CRM_meta_physical_host="kiff-02" CRM_meta_timeout="20000"  with_cmirrord="1"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="11" priority="1000000">
+    <action_set>
+      <pseudo_event id="37" operation="stopped" operation_key="clvmd-clone_stopped_0">
         <attributes CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="23" operation="stop" operation_key="clvmd_stop_0" internal_operation_key="clvmd:0_stop_0"/>
+        <pseudo_event id="31" operation="stop" operation_key="clvmd_stop_0" internal_operation_key="clvmd:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="28" operation="stop" operation_key="clvmd-clone_stop_0"/>
+        <pseudo_event id="36" operation="stop" operation_key="clvmd-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="8">
+  <synapse id="12">
     <action_set>
-      <pseudo_event id="28" operation="stop" operation_key="clvmd-clone_stop_0">
+      <pseudo_event id="36" operation="stop" operation_key="clvmd-clone_stop_0">
         <attributes CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -128,13 +176,13 @@
         <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="36" operation="stopped" operation_key="shared0-clone_stopped_0"/>
+        <pseudo_event id="44" operation="stopped" operation_key="shared0-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="9">
+  <synapse id="13">
     <action_set>
-      <pseudo_event id="30" operation="stop" operation_key="shared0_stop_0" internal_operation_key="shared0:0_stop_0">
+      <pseudo_event id="38" operation="stop" operation_key="shared0_stop_0" internal_operation_key="shared0:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_timeout="60000"  device="/dev/shared/shared0" directory="/mnt/shared0" fstype="gfs2" options="errors=panic"/>
       </pseudo_event>
     </action_set>
@@ -143,28 +191,52 @@
         <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="35" operation="stop" operation_key="shared0-clone_stop_0"/>
+        <rsc_op id="13" operation="monitor" operation_key="shared0_monitor_0" internal_operation_key="shared0:0_monitor_0" on_node="lxc-01_kiff-02" on_node_uuid="lxc-01_kiff-02" router_node="kiff-02"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="17" operation="monitor" operation_key="shared0_monitor_0" internal_operation_key="shared0:0_monitor_0" on_node="lxc-02_kiff-02" on_node_uuid="lxc-02_kiff-02" router_node="kiff-02"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="43" operation="stop" operation_key="shared0-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10" priority="1000000">
+  <synapse id="14">
     <action_set>
-      <pseudo_event id="36" operation="stopped" operation_key="shared0-clone_stopped_0">
+      <rsc_op id="17" operation="monitor" operation_key="shared0_monitor_0" internal_operation_key="shared0:0_monitor_0" on_node="lxc-02_kiff-02" on_node_uuid="lxc-02_kiff-02" router_node="kiff-02">
+        <primitive id="shared0" long-id="shared0:0" class="ocf" provider="heartbeat" type="Filesystem"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc-02_kiff-02" CRM_meta_on_node_uuid="lxc-02_kiff-02" CRM_meta_op_target_rc="7" CRM_meta_physical_host="kiff-02" CRM_meta_timeout="20000"  device="/dev/shared/shared0" directory="/mnt/shared0" fstype="gfs2" options="errors=panic"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="15">
+    <action_set>
+      <rsc_op id="13" operation="monitor" operation_key="shared0_monitor_0" internal_operation_key="shared0:0_monitor_0" on_node="lxc-01_kiff-02" on_node_uuid="lxc-01_kiff-02" router_node="kiff-02">
+        <primitive id="shared0" long-id="shared0:0" class="ocf" provider="heartbeat" type="Filesystem"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc-01_kiff-02" CRM_meta_on_node_uuid="lxc-01_kiff-02" CRM_meta_op_target_rc="7" CRM_meta_physical_host="kiff-02" CRM_meta_timeout="20000"  device="/dev/shared/shared0" directory="/mnt/shared0" fstype="gfs2" options="errors=panic"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="16" priority="1000000">
+    <action_set>
+      <pseudo_event id="44" operation="stopped" operation_key="shared0-clone_stopped_0">
         <attributes CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="30" operation="stop" operation_key="shared0_stop_0" internal_operation_key="shared0:0_stop_0"/>
+        <pseudo_event id="38" operation="stop" operation_key="shared0_stop_0" internal_operation_key="shared0:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="35" operation="stop" operation_key="shared0-clone_stop_0"/>
+        <pseudo_event id="43" operation="stop" operation_key="shared0-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="11">
+  <synapse id="17">
     <action_set>
-      <pseudo_event id="35" operation="stop" operation_key="shared0-clone_stop_0">
+      <pseudo_event id="43" operation="stop" operation_key="shared0-clone_stop_0">
         <attributes CRM_meta_clone_max="6" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -173,45 +245,45 @@
         <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="37" operation="stop" operation_key="R-lxc-01_kiff-01_stop_0"/>
+        <pseudo_event id="45" operation="stop" operation_key="R-lxc-01_kiff-01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="40" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0"/>
+        <pseudo_event id="48" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12">
+  <synapse id="18">
     <action_set>
-      <rsc_op id="39" operation="monitor" operation_key="R-lxc-01_kiff-01_monitor_10000" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="47" operation="monitor" operation_key="R-lxc-01_kiff-01_monitor_10000" on_node="kiff-02" on_node_uuid="2">
         <primitive id="R-lxc-01_kiff-01" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_remote_node="lxc-01_kiff-01" CRM_meta_timeout="30000" config="/mnt/shared0/test-virtual-domain/lxc/lxc-01_kiff-01.xml"  force_stop="true" hypervisor="lxc:///"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="R-lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="46" operation="start" operation_key="R-lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="13">
+  <synapse id="19">
     <action_set>
-      <rsc_op id="38" operation="start" operation_key="R-lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="46" operation="start" operation_key="R-lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2">
         <primitive id="R-lxc-01_kiff-01" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_remote_node="lxc-01_kiff-01" CRM_meta_timeout="90000" config="/mnt/shared0/test-virtual-domain/lxc/lxc-01_kiff-01.xml"  force_stop="true" hypervisor="lxc:///"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="37" operation="stop" operation_key="R-lxc-01_kiff-01_stop_0"/>
+        <pseudo_event id="45" operation="stop" operation_key="R-lxc-01_kiff-01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="60" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="68" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14">
+  <synapse id="20">
     <action_set>
-      <pseudo_event id="37" operation="stop" operation_key="R-lxc-01_kiff-01_stop_0">
+      <pseudo_event id="45" operation="stop" operation_key="R-lxc-01_kiff-01_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_remote_node="lxc-01_kiff-01" CRM_meta_timeout="90000" config="/mnt/shared0/test-virtual-domain/lxc/lxc-01_kiff-01.xml"  force_stop="true" hypervisor="lxc:///"/>
       </pseudo_event>
     </action_set>
@@ -220,42 +292,42 @@
         <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="50" operation="stop" operation_key="lxc-01_kiff-01_stop_0"/>
+        <pseudo_event id="58" operation="stop" operation_key="lxc-01_kiff-01_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="21">
     <action_set>
-      <rsc_op id="42" operation="monitor" operation_key="R-lxc-02_kiff-01_monitor_10000" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="50" operation="monitor" operation_key="R-lxc-02_kiff-01_monitor_10000" on_node="kiff-02" on_node_uuid="2">
         <primitive id="R-lxc-02_kiff-01" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_remote_node="lxc-02_kiff-01" CRM_meta_timeout="30000" config="/mnt/shared0/test-virtual-domain/lxc/lxc-02_kiff-01.xml"  force_stop="true" hypervisor="lxc:///"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="41" operation="start" operation_key="R-lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="49" operation="start" operation_key="R-lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="16">
+  <synapse id="22">
     <action_set>
-      <rsc_op id="41" operation="start" operation_key="R-lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="49" operation="start" operation_key="R-lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2">
         <primitive id="R-lxc-02_kiff-01" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_remote_node="lxc-02_kiff-01" CRM_meta_timeout="90000" config="/mnt/shared0/test-virtual-domain/lxc/lxc-02_kiff-01.xml"  force_stop="true" hypervisor="lxc:///"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="40" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0"/>
+        <pseudo_event id="48" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="60" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="68" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="17">
+  <synapse id="23">
     <action_set>
-      <pseudo_event id="40" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0">
+      <pseudo_event id="48" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_remote_node="lxc-02_kiff-01" CRM_meta_timeout="90000" config="/mnt/shared0/test-virtual-domain/lxc/lxc-02_kiff-01.xml"  force_stop="true" hypervisor="lxc:///"/>
       </pseudo_event>
     </action_set>
@@ -264,95 +336,128 @@
         <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="53" operation="stop" operation_key="lxc-02_kiff-01_stop_0"/>
+        <pseudo_event id="61" operation="stop" operation_key="lxc-02_kiff-01_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="18">
+  <synapse id="24">
     <action_set>
-      <rsc_op id="49" operation="monitor" operation_key="vm-fs_monitor_20000" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01" router_node="kiff-02">
+      <rsc_op id="57" operation="monitor" operation_key="vm-fs_monitor_20000" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01" router_node="kiff-02">
         <primitive id="vm-fs" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_interval="20000" CRM_meta_name="monitor" CRM_meta_on_node="lxc-01_kiff-01" CRM_meta_on_node_uuid="lxc-01_kiff-01" CRM_meta_physical_host="kiff-02" CRM_meta_timeout="40000"  device="/root" directory="/mnt/vm-fs" fstype="none" options="bind"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="48" operation="start" operation_key="vm-fs_start_0" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01" router_node="kiff-02"/>
+        <rsc_op id="56" operation="start" operation_key="vm-fs_start_0" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01" router_node="kiff-02"/>
       </trigger>
       <trigger>
-        <rsc_op id="51" operation="start" operation_key="lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="59" operation="start" operation_key="lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="19">
+  <synapse id="25">
     <action_set>
-      <rsc_op id="48" operation="start" operation_key="vm-fs_start_0" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01" router_node="kiff-02">
+      <rsc_op id="56" operation="start" operation_key="vm-fs_start_0" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01" router_node="kiff-02">
         <primitive id="vm-fs" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="lxc-01_kiff-01" CRM_meta_on_node_uuid="lxc-01_kiff-01" CRM_meta_physical_host="kiff-02" CRM_meta_timeout="60000"  device="/root" directory="/mnt/vm-fs" fstype="none" options="bind"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="R-lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="14" operation="monitor" operation_key="vm-fs_monitor_0" on_node="lxc-01_kiff-02" on_node_uuid="lxc-01_kiff-02" router_node="kiff-02"/>
       </trigger>
       <trigger>
-        <pseudo_event id="47" operation="stop" operation_key="vm-fs_stop_0"/>
+        <rsc_op id="18" operation="monitor" operation_key="vm-fs_monitor_0" on_node="lxc-02_kiff-02" on_node_uuid="lxc-02_kiff-02" router_node="kiff-02"/>
       </trigger>
       <trigger>
-        <rsc_op id="51" operation="start" operation_key="lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="46" operation="start" operation_key="R-lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="60" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="55" operation="stop" operation_key="vm-fs_stop_0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="59" operation="start" operation_key="lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="61" operation="stop" operation_key="lxc-02_kiff-01_stop_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="68" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="20">
+  <synapse id="26">
     <action_set>
-      <pseudo_event id="47" operation="stop" operation_key="vm-fs_stop_0">
+      <pseudo_event id="55" operation="stop" operation_key="vm-fs_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_physical_host="kiff-01" CRM_meta_timeout="60000"  device="/root" directory="/mnt/vm-fs" fstype="none" options="bind"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="61" operation="stonith" operation_key="stonith-lxc-01_kiff-01-reboot" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01"/>
+        <rsc_op id="14" operation="monitor" operation_key="vm-fs_monitor_0" on_node="lxc-01_kiff-02" on_node_uuid="lxc-01_kiff-02" router_node="kiff-02"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="18" operation="monitor" operation_key="vm-fs_monitor_0" on_node="lxc-02_kiff-02" on_node_uuid="lxc-02_kiff-02" router_node="kiff-02"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="69" operation="stonith" operation_key="stonith-lxc-01_kiff-01-reboot" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="21">
+  <synapse id="27">
+    <action_set>
+      <rsc_op id="18" operation="monitor" operation_key="vm-fs_monitor_0" on_node="lxc-02_kiff-02" on_node_uuid="lxc-02_kiff-02" router_node="kiff-02">
+        <primitive id="vm-fs" class="ocf" provider="heartbeat" type="Filesystem"/>
+        <attributes CRM_meta_on_node="lxc-02_kiff-02" CRM_meta_on_node_uuid="lxc-02_kiff-02" CRM_meta_op_target_rc="7" CRM_meta_physical_host="kiff-02" CRM_meta_timeout="40000"  device="/root" directory="/mnt/vm-fs" fstype="none" options="bind"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="28">
     <action_set>
-      <rsc_op id="52" operation="monitor" operation_key="lxc-01_kiff-01_monitor_30000" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="14" operation="monitor" operation_key="vm-fs_monitor_0" on_node="lxc-01_kiff-02" on_node_uuid="lxc-01_kiff-02" router_node="kiff-02">
+        <primitive id="vm-fs" class="ocf" provider="heartbeat" type="Filesystem"/>
+        <attributes CRM_meta_on_node="lxc-01_kiff-02" CRM_meta_on_node_uuid="lxc-01_kiff-02" CRM_meta_op_target_rc="7" CRM_meta_physical_host="kiff-02" CRM_meta_timeout="40000"  device="/root" directory="/mnt/vm-fs" fstype="none" options="bind"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="29">
+    <action_set>
+      <rsc_op id="60" operation="monitor" operation_key="lxc-01_kiff-01_monitor_30000" on_node="kiff-02" on_node_uuid="2">
         <primitive id="lxc-01_kiff-01" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="R-lxc-01_kiff-01" CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="51" operation="start" operation_key="lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="59" operation="start" operation_key="lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="22">
+  <synapse id="30">
     <action_set>
-      <rsc_op id="51" operation="start" operation_key="lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="59" operation="start" operation_key="lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2">
         <primitive id="lxc-01_kiff-01" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="R-lxc-01_kiff-01" CRM_meta_name="start" CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="R-lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="46" operation="start" operation_key="R-lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="50" operation="stop" operation_key="lxc-01_kiff-01_stop_0"/>
+        <pseudo_event id="58" operation="stop" operation_key="lxc-01_kiff-01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="60" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="68" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="23">
+  <synapse id="31">
     <action_set>
-      <pseudo_event id="50" operation="stop" operation_key="lxc-01_kiff-01_stop_0">
+      <pseudo_event id="58" operation="stop" operation_key="lxc-01_kiff-01_stop_0">
         <attributes CRM_meta_container="R-lxc-01_kiff-01" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -362,41 +467,41 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="24">
+  <synapse id="32">
     <action_set>
-      <rsc_op id="55" operation="monitor" operation_key="lxc-02_kiff-01_monitor_30000" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="63" operation="monitor" operation_key="lxc-02_kiff-01_monitor_30000" on_node="kiff-02" on_node_uuid="2">
         <primitive id="lxc-02_kiff-01" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="R-lxc-02_kiff-01" CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="54" operation="start" operation_key="lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="62" operation="start" operation_key="lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="25">
+  <synapse id="33">
     <action_set>
-      <rsc_op id="54" operation="start" operation_key="lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2">
+      <rsc_op id="62" operation="start" operation_key="lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2">
         <primitive id="lxc-02_kiff-01" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="R-lxc-02_kiff-01" CRM_meta_name="start" CRM_meta_on_node="kiff-02" CRM_meta_on_node_uuid="2" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="41" operation="start" operation_key="R-lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <rsc_op id="49" operation="start" operation_key="R-lxc-02_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="53" operation="stop" operation_key="lxc-02_kiff-01_stop_0"/>
+        <pseudo_event id="61" operation="stop" operation_key="lxc-02_kiff-01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="60" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="68" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="26">
+  <synapse id="34">
     <action_set>
-      <pseudo_event id="53" operation="stop" operation_key="lxc-02_kiff-01_stop_0">
+      <pseudo_event id="61" operation="stop" operation_key="lxc-02_kiff-01_stop_0">
         <attributes CRM_meta_container="R-lxc-02_kiff-01" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -406,9 +511,9 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="27">
+  <synapse id="35">
     <action_set>
-      <pseudo_event id="62" operation="stonith" operation_key="stonith-lxc-02_kiff-01-reboot" on_node="lxc-02_kiff-01" on_node_uuid="lxc-02_kiff-01">
+      <pseudo_event id="70" operation="stonith" operation_key="stonith-lxc-02_kiff-01-reboot" on_node="lxc-02_kiff-01" on_node_uuid="lxc-02_kiff-01">
         <attributes CRM_meta_on_node="lxc-02_kiff-01" CRM_meta_on_node_uuid="lxc-02_kiff-01" CRM_meta_stonith_action="reboot" />
         <downed>
           <node id="lxc-02_kiff-01"/>
@@ -421,9 +526,9 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="28">
+  <synapse id="36">
     <action_set>
-      <pseudo_event id="61" operation="stonith" operation_key="stonith-lxc-01_kiff-01-reboot" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01">
+      <pseudo_event id="69" operation="stonith" operation_key="stonith-lxc-01_kiff-01-reboot" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01">
         <attributes CRM_meta_on_node="lxc-01_kiff-01" CRM_meta_on_node_uuid="lxc-01_kiff-01" CRM_meta_stonith_action="reboot" />
         <downed>
           <node id="lxc-01_kiff-01"/>
@@ -436,9 +541,9 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="29">
+  <synapse id="37">
     <action_set>
-      <pseudo_event id="60" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="68" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
@@ -447,14 +552,14 @@
         <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="61" operation="stonith" operation_key="stonith-lxc-01_kiff-01-reboot" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01"/>
+        <pseudo_event id="69" operation="stonith" operation_key="stonith-lxc-01_kiff-01-reboot" on_node="lxc-01_kiff-01" on_node_uuid="lxc-01_kiff-01"/>
       </trigger>
       <trigger>
-        <pseudo_event id="62" operation="stonith" operation_key="stonith-lxc-02_kiff-01-reboot" on_node="lxc-02_kiff-01" on_node_uuid="lxc-02_kiff-01"/>
+        <pseudo_event id="70" operation="stonith" operation_key="stonith-lxc-02_kiff-01-reboot" on_node="lxc-02_kiff-01" on_node_uuid="lxc-02_kiff-01"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="30">
+  <synapse id="38">
     <action_set>
       <pseudo_event id="10" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -462,38 +567,38 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="13" operation="stop" operation_key="fence-kiff-02_stop_0"/>
+        <pseudo_event id="21" operation="stop" operation_key="fence-kiff-02_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="16" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:0_stop_0"/>
+        <pseudo_event id="24" operation="stop" operation_key="dlm_stop_0" internal_operation_key="dlm:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="23" operation="stop" operation_key="clvmd_stop_0" internal_operation_key="clvmd:0_stop_0"/>
+        <pseudo_event id="31" operation="stop" operation_key="clvmd_stop_0" internal_operation_key="clvmd:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="30" operation="stop" operation_key="shared0_stop_0" internal_operation_key="shared0:0_stop_0"/>
+        <pseudo_event id="38" operation="stop" operation_key="shared0_stop_0" internal_operation_key="shared0:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="37" operation="stop" operation_key="R-lxc-01_kiff-01_stop_0"/>
+        <pseudo_event id="45" operation="stop" operation_key="R-lxc-01_kiff-01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="40" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0"/>
+        <pseudo_event id="48" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="47" operation="stop" operation_key="vm-fs_stop_0"/>
+        <pseudo_event id="55" operation="stop" operation_key="vm-fs_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="50" operation="stop" operation_key="lxc-01_kiff-01_stop_0"/>
+        <pseudo_event id="58" operation="stop" operation_key="lxc-01_kiff-01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="53" operation="stop" operation_key="lxc-02_kiff-01_stop_0"/>
+        <pseudo_event id="61" operation="stop" operation_key="lxc-02_kiff-01_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="60" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="68" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="31">
+  <synapse id="39">
     <action_set>
       <crm_event id="1" operation="stonith" operation_key="stonith-kiff-01-reboot" on_node="kiff-01" on_node_uuid="1">
         <attributes CRM_meta_on_node="kiff-01" CRM_meta_on_node_uuid="1" CRM_meta_probe_complete="true" CRM_meta_shutdown="0" CRM_meta_stonith_action="reboot" />
diff --git a/pengine/test10/whitebox-imply-stop-on-fence.summary b/pengine/test10/whitebox-imply-stop-on-fence.summary
index 87d7b4f..d272b25 100644
--- a/pengine/test10/whitebox-imply-stop-on-fence.summary
+++ b/pengine/test10/whitebox-imply-stop-on-fence.summary
@@ -40,6 +40,14 @@ Transition Summary:
 
 Executing cluster transition:
  * Pseudo action:   fence-kiff-02_stop_0
+ * Resource action: dlm             monitor on lxc-02_kiff-02
+ * Resource action: dlm             monitor on lxc-01_kiff-02
+ * Resource action: clvmd           monitor on lxc-02_kiff-02
+ * Resource action: clvmd           monitor on lxc-01_kiff-02
+ * Resource action: shared0         monitor on lxc-02_kiff-02
+ * Resource action: shared0         monitor on lxc-01_kiff-02
+ * Resource action: vm-fs           monitor on lxc-02_kiff-02
+ * Resource action: vm-fs           monitor on lxc-01_kiff-02
  * Fencing kiff-01 (reboot)
  * Pseudo action:   lxc-01_kiff-01_stop_0
  * Pseudo action:   lxc-02_kiff-01_stop_0
diff --git a/pengine/test10/whitebox-migrate1.dot b/pengine/test10/whitebox-migrate1.dot
index e54df2c..53d37e0 100644
--- a/pengine/test10/whitebox-migrate1.dot
+++ b/pengine/test10/whitebox-migrate1.dot
@@ -32,6 +32,7 @@
 "rhel7-node1_monitor_30000 rhel7-node3" [ style=bold color="green" fontcolor="black"]
 "rhel7-node1_start_0 rhel7-node3" -> "rhel7-node1_monitor_30000 rhel7-node3" [ style = bold]
 "rhel7-node1_start_0 rhel7-node3" [ style=bold color="green" fontcolor="orange"]
+"rhel7-node1_stop_0 rhel7-node2" -> "FAKE3_start_0 rhel7-node2" [ style = dashed]
 "rhel7-node1_stop_0 rhel7-node2" -> "all_stopped" [ style = bold]
 "rhel7-node1_stop_0 rhel7-node2" -> "remote-rsc_migrate_to_0 rhel7-node2" [ style = dashed]
 "rhel7-node1_stop_0 rhel7-node2" -> "remote-rsc_stop_0 rhel7-node2" [ style = bold]
diff --git a/pengine/test10/whitebox-move.dot b/pengine/test10/whitebox-move.dot
index f47c95b..ed06b7c 100644
--- a/pengine/test10/whitebox-move.dot
+++ b/pengine/test10/whitebox-move.dot
@@ -1,4 +1,7 @@
 digraph "g" {
+"A_monitor_0 lxc2" -> "A_start_0 lxc1" [ style = bold]
+"A_monitor_0 lxc2" -> "A_stop_0 lxc1" [ style = bold]
+"A_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
 "A_monitor_10000 lxc1" [ style=bold color="green" fontcolor="black"]
 "A_start_0 lxc1" -> "A_monitor_10000 lxc1" [ style = bold]
 "A_start_0 lxc1" [ style=bold color="green" fontcolor="black"]
diff --git a/pengine/test10/whitebox-move.exp b/pengine/test10/whitebox-move.exp
index 4461890..6f00275 100644
--- a/pengine/test10/whitebox-move.exp
+++ b/pengine/test10/whitebox-move.exp
@@ -1,62 +1,62 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="11" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2">
+      <rsc_op id="12" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2">
         <primitive id="container1" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="2" CRM_meta_remote_node="lxc1" CRM_meta_timeout="20000" config="/home/dvossel/virtual_machines/lxc/lxc1.xml"  force_stop="true" hypervisor="lxc:///"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="10" operation="stop" operation_key="container1_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="11" operation="stop" operation_key="container1_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="10" operation="stop" operation_key="container1_stop_0" on_node="18node1" on_node_uuid="1">
+      <rsc_op id="11" operation="stop" operation_key="container1_stop_0" on_node="18node1" on_node_uuid="1">
         <primitive id="container1" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_on_node="18node1" CRM_meta_on_node_uuid="1" CRM_meta_remote_node="lxc1" CRM_meta_timeout="20000" config="/home/dvossel/virtual_machines/lxc/lxc1.xml"  force_stop="true" hypervisor="lxc:///"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="32" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="33" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="23" operation="start" operation_key="M_start_0" internal_operation_key="M:3_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
+      <rsc_op id="24" operation="start" operation_key="M_start_0" internal_operation_key="M:3_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="M" long-id="M:3" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="11" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="12" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="22" operation="stop" operation_key="M_stop_0" internal_operation_key="M:3_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
+        <rsc_op id="23" operation="stop" operation_key="M_stop_0" internal_operation_key="M:3_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="26" operation="start" operation_key="M-clone_start_0"/>
+        <pseudo_event id="27" operation="start" operation_key="M-clone_start_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="33" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="34" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="22" operation="stop" operation_key="M_stop_0" internal_operation_key="M:3_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
+      <rsc_op id="23" operation="stop" operation_key="M_stop_0" internal_operation_key="M:3_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
         <primitive id="M" long-id="M:3" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_clone="3" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="28" operation="stop" operation_key="M-clone_stop_0"/>
+        <pseudo_event id="29" operation="stop" operation_key="M-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -69,31 +69,31 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="23" operation="start" operation_key="M_start_0" internal_operation_key="M:3_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="24" operation="start" operation_key="M_start_0" internal_operation_key="M:3_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
       <trigger>
-        <rsc_op id="33" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="34" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5" priority="1000000">
     <action_set>
-      <pseudo_event id="29" operation="stopped" operation_key="M-clone_stopped_0">
+      <pseudo_event id="30" operation="stopped" operation_key="M-clone_stopped_0">
         <attributes CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="22" operation="stop" operation_key="M_stop_0" internal_operation_key="M:3_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
+        <rsc_op id="23" operation="stop" operation_key="M_stop_0" internal_operation_key="M:3_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="28" operation="stop" operation_key="M-clone_stop_0"/>
+        <pseudo_event id="29" operation="stop" operation_key="M-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="28" operation="stop" operation_key="M-clone_stop_0">
+      <pseudo_event id="29" operation="stop" operation_key="M-clone_stop_0">
         <attributes CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -101,61 +101,77 @@
   </synapse>
   <synapse id="7" priority="1000000">
     <action_set>
-      <pseudo_event id="27" operation="running" operation_key="M-clone_running_0">
+      <pseudo_event id="28" operation="running" operation_key="M-clone_running_0">
         <attributes CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="23" operation="start" operation_key="M_start_0" internal_operation_key="M:3_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="24" operation="start" operation_key="M_start_0" internal_operation_key="M:3_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="26" operation="start" operation_key="M-clone_start_0"/>
+        <pseudo_event id="27" operation="start" operation_key="M-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <pseudo_event id="26" operation="start" operation_key="M-clone_start_0">
+      <pseudo_event id="27" operation="start" operation_key="M-clone_start_0">
         <attributes CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="29" operation="stopped" operation_key="M-clone_stopped_0"/>
+        <pseudo_event id="30" operation="stopped" operation_key="M-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <rsc_op id="31" operation="start" operation_key="A_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
+      <rsc_op id="32" operation="start" operation_key="A_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="A" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="11" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="10" operation="monitor" operation_key="A_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
       </trigger>
       <trigger>
-        <rsc_op id="30" operation="stop" operation_key="A_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
+        <rsc_op id="12" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="33" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="31" operation="stop" operation_key="A_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="34" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="30" operation="stop" operation_key="A_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
+      <rsc_op id="31" operation="stop" operation_key="A_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
         <primitive id="A" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <rsc_op id="10" operation="monitor" operation_key="A_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
+      </trigger>
+    </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
+      <rsc_op id="10" operation="monitor" operation_key="A_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+        <primitive id="A" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="12">
+    <action_set>
       <rsc_op id="7" operation="monitor" operation_key="A_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="A" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
@@ -163,45 +179,45 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="31" operation="start" operation_key="A_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="32" operation="start" operation_key="A_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
       <trigger>
-        <rsc_op id="33" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="34" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12">
+  <synapse id="13">
     <action_set>
-      <rsc_op id="34" operation="monitor" operation_key="lxc1_monitor_30000" on_node="18node2" on_node_uuid="2">
+      <rsc_op id="35" operation="monitor" operation_key="lxc1_monitor_30000" on_node="18node2" on_node_uuid="2">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="33" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="34" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="13">
+  <synapse id="14">
     <action_set>
-      <rsc_op id="33" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2">
+      <rsc_op id="34" operation="start" operation_key="lxc1_start_0" on_node="18node2" on_node_uuid="2">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_name="start" CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="11" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="12" operation="start" operation_key="container1_start_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="32" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="33" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14">
+  <synapse id="15">
     <action_set>
-      <rsc_op id="32" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1">
+      <rsc_op id="33" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_on_node="18node1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" />
         <downed>
@@ -211,14 +227,14 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="22" operation="stop" operation_key="M_stop_0" internal_operation_key="M:3_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
+        <rsc_op id="23" operation="stop" operation_key="M_stop_0" internal_operation_key="M:3_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
       </trigger>
       <trigger>
-        <rsc_op id="30" operation="stop" operation_key="A_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
+        <rsc_op id="31" operation="stop" operation_key="A_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="16">
     <action_set>
       <pseudo_event id="9" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -226,16 +242,16 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="10" operation="stop" operation_key="container1_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="11" operation="stop" operation_key="container1_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="22" operation="stop" operation_key="M_stop_0" internal_operation_key="M:3_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
+        <rsc_op id="23" operation="stop" operation_key="M_stop_0" internal_operation_key="M:3_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
       </trigger>
       <trigger>
-        <rsc_op id="30" operation="stop" operation_key="A_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
+        <rsc_op id="31" operation="stop" operation_key="A_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
       </trigger>
       <trigger>
-        <rsc_op id="32" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="33" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/whitebox-move.summary b/pengine/test10/whitebox-move.summary
index 5e27a67..23bc5de 100644
--- a/pengine/test10/whitebox-move.summary
+++ b/pengine/test10/whitebox-move.summary
@@ -18,10 +18,11 @@ Transition Summary:
 
 Executing cluster transition:
  * Pseudo action:   M-clone_stop_0
- * Resource action: A               stop on lxc1
+ * Resource action: A               monitor on lxc2
  * Resource action: M               stop on lxc1
  * Pseudo action:   M-clone_stopped_0
  * Pseudo action:   M-clone_start_0
+ * Resource action: A               stop on lxc1
  * Resource action: lxc1            stop on 18node1
  * Resource action: container1      stop on 18node1
  * Pseudo action:   all_stopped
diff --git a/pengine/test10/whitebox-ms-ordering-move.dot b/pengine/test10/whitebox-ms-ordering-move.dot
index 43c1d4f..e6b5406 100644
--- a/pengine/test10/whitebox-ms-ordering-move.dot
+++ b/pengine/test10/whitebox-ms-ordering-move.dot
@@ -7,6 +7,7 @@ digraph "g" {
 "container1_stop_0 rhel7-1" -> "all_stopped" [ style = bold]
 "container1_stop_0 rhel7-1" -> "container1_start_0 rhel7-2" [ style = bold]
 "container1_stop_0 rhel7-1" [ style=bold color="green" fontcolor="black"]
+"lsb-dummy_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
 "lxc-ms-master_demote_0" -> "lxc-ms-master_demoted_0" [ style = bold]
 "lxc-ms-master_demote_0" -> "lxc-ms_demote_0 lxc1" [ style = bold]
 "lxc-ms-master_demote_0" [ style=bold color="green" fontcolor="orange"]
@@ -68,4 +69,15 @@ digraph "g" {
 "lxc2_monitor_0 rhel7-3" [ style=bold color="green" fontcolor="black"]
 "lxc2_monitor_0 rhel7-4" [ style=bold color="green" fontcolor="black"]
 "lxc2_monitor_0 rhel7-5" [ style=bold color="green" fontcolor="black"]
+"migrator_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
+"petulant_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
+"ping-1_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
+"r192.168.122.207_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
+"r192.168.122.208_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
+"rsc_rhel7-1_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
+"rsc_rhel7-2_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
+"rsc_rhel7-3_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
+"rsc_rhel7-4_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
+"rsc_rhel7-5_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
+"stateful-1_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
 }
diff --git a/pengine/test10/whitebox-ms-ordering-move.exp b/pengine/test10/whitebox-ms-ordering-move.exp
index dc5e473..a8ffa64 100644
--- a/pengine/test10/whitebox-ms-ordering-move.exp
+++ b/pengine/test10/whitebox-ms-ordering-move.exp
@@ -1,260 +1,368 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="1"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="99" operation="start" operation_key="container1_start_0" on_node="rhel7-2" on_node_uuid="2">
+      <rsc_op id="26" operation="monitor" operation_key="rsc_rhel7-1_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-1">
+        <primitive id="rsc_rhel7-1" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="rhel7-1" CRM_meta_timeout="90000" cidr_netmask="32"  ip="192.168.122.202"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="1">
+    <action_set>
+      <rsc_op id="27" operation="monitor" operation_key="rsc_rhel7-2_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-1">
+        <primitive id="rsc_rhel7-2" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="rhel7-1" CRM_meta_timeout="90000" cidr_netmask="32"  ip="192.168.122.203"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="2">
+    <action_set>
+      <rsc_op id="28" operation="monitor" operation_key="rsc_rhel7-3_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-1">
+        <primitive id="rsc_rhel7-3" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="rhel7-1" CRM_meta_timeout="90000" cidr_netmask="32"  ip="192.168.122.204"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="3">
+    <action_set>
+      <rsc_op id="29" operation="monitor" operation_key="rsc_rhel7-4_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-1">
+        <primitive id="rsc_rhel7-4" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="rhel7-1" CRM_meta_timeout="90000" cidr_netmask="32"  ip="192.168.122.205"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="4">
+    <action_set>
+      <rsc_op id="30" operation="monitor" operation_key="rsc_rhel7-5_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-1">
+        <primitive id="rsc_rhel7-5" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="rhel7-1" CRM_meta_timeout="90000" cidr_netmask="32"  ip="192.168.122.206"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="5">
+    <action_set>
+      <rsc_op id="31" operation="monitor" operation_key="migrator_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-1">
+        <primitive id="migrator" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="rhel7-1" CRM_meta_timeout="90000"  passwd="whatever"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="6">
+    <action_set>
+      <rsc_op id="32" operation="monitor" operation_key="ping-1_monitor_0" internal_operation_key="ping-1:0_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-1">
+        <primitive id="ping-1" long-id="ping-1:0" class="ocf" provider="pacemaker" type="ping"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="7" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="rhel7-1" CRM_meta_timeout="90000"  debug="true" host_list="192.168.122.70" name="connected"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="7">
+    <action_set>
+      <rsc_op id="33" operation="monitor" operation_key="stateful-1_monitor_0" internal_operation_key="stateful-1:0_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-1">
+        <primitive id="stateful-1" long-id="stateful-1:0" class="ocf" provider="pacemaker" type="Stateful"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="rhel7-1" CRM_meta_timeout="60000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="8">
+    <action_set>
+      <rsc_op id="34" operation="monitor" operation_key="r192.168.122.207_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-1">
+        <primitive id="r192.168.122.207" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="rhel7-1" CRM_meta_timeout="90000" cidr_netmask="32"  ip="192.168.122.207"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="9">
+    <action_set>
+      <rsc_op id="35" operation="monitor" operation_key="petulant_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-1">
+        <primitive id="petulant" class="service" type="DummySD"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="rhel7-1" CRM_meta_timeout="90000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="10">
+    <action_set>
+      <rsc_op id="36" operation="monitor" operation_key="r192.168.122.208_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-1">
+        <primitive id="r192.168.122.208" class="ocf" provider="heartbeat" type="IPaddr2"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="rhel7-1" CRM_meta_timeout="90000" cidr_netmask="32"  ip="192.168.122.208"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="11">
+    <action_set>
+      <rsc_op id="37" operation="monitor" operation_key="lsb-dummy_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="rhel7-1">
+        <primitive id="lsb-dummy" class="lsb" type="/usr/share/pacemaker/tests/cts/LSBDummy"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="rhel7-1" CRM_meta_timeout="90000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="12">
+    <action_set>
+      <rsc_op id="111" operation="start" operation_key="container1_start_0" on_node="rhel7-2" on_node_uuid="2">
         <primitive id="container1" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_on_node="rhel7-2" CRM_meta_on_node_uuid="2" CRM_meta_remote_node="lxc1" CRM_meta_timeout="90000" config="/var/lib/pacemaker/cts/lxc/lxc1.xml"  force_stop="true" hypervisor="lxc:///"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="98" operation="stop" operation_key="container1_stop_0" on_node="rhel7-1" on_node_uuid="1"/>
+        <rsc_op id="110" operation="stop" operation_key="container1_stop_0" on_node="rhel7-1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="1">
+  <synapse id="13">
     <action_set>
-      <rsc_op id="98" operation="stop" operation_key="container1_stop_0" on_node="rhel7-1" on_node_uuid="1">
+      <rsc_op id="110" operation="stop" operation_key="container1_stop_0" on_node="rhel7-1" on_node_uuid="1">
         <primitive id="container1" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_on_node="rhel7-1" CRM_meta_on_node_uuid="1" CRM_meta_remote_node="lxc1" CRM_meta_timeout="90000" config="/var/lib/pacemaker/cts/lxc/lxc1.xml"  force_stop="true" hypervisor="lxc:///"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="116" operation="stop" operation_key="lxc1_stop_0" on_node="rhel7-1" on_node_uuid="1"/>
+        <rsc_op id="128" operation="stop" operation_key="lxc1_stop_0" on_node="rhel7-1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="2">
+  <synapse id="14">
     <action_set>
-      <rsc_op id="105" operation="promote" operation_key="lxc-ms_promote_0" internal_operation_key="lxc-ms:0_promote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2">
+      <rsc_op id="117" operation="promote" operation_key="lxc-ms_promote_0" internal_operation_key="lxc-ms:0_promote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2">
         <primitive id="lxc-ms" long-id="lxc-ms:0" class="ocf" provider="pacemaker" type="Stateful"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="rhel7-2" CRM_meta_timeout="90000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="99" operation="start" operation_key="container1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
+        <rsc_op id="111" operation="start" operation_key="container1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="102" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:0_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2"/>
+        <rsc_op id="114" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:0_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2"/>
       </trigger>
       <trigger>
-        <rsc_op id="103" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1"/>
+        <rsc_op id="115" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="112" operation="promote" operation_key="lxc-ms-master_promote_0"/>
+        <pseudo_event id="124" operation="promote" operation_key="lxc-ms-master_promote_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="117" operation="start" operation_key="lxc1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
+        <rsc_op id="129" operation="start" operation_key="lxc1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="3">
+  <synapse id="15">
     <action_set>
-      <rsc_op id="104" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1">
+      <rsc_op id="116" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1">
         <primitive id="lxc-ms" long-id="lxc-ms:0" class="ocf" provider="pacemaker" type="Stateful"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="rhel7-1" CRM_meta_timeout="90000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="103" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1"/>
+        <rsc_op id="115" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="110" operation="stop" operation_key="lxc-ms-master_stop_0"/>
+        <pseudo_event id="122" operation="stop" operation_key="lxc-ms-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="4">
+  <synapse id="16">
     <action_set>
-      <rsc_op id="103" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1">
+      <rsc_op id="115" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1">
         <primitive id="lxc-ms" long-id="lxc-ms:0" class="ocf" provider="pacemaker" type="Stateful"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="rhel7-1" CRM_meta_timeout="90000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="114" operation="demote" operation_key="lxc-ms-master_demote_0"/>
+        <pseudo_event id="126" operation="demote" operation_key="lxc-ms-master_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="5">
+  <synapse id="17">
     <action_set>
-      <rsc_op id="102" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:0_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2">
+      <rsc_op id="114" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:0_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2">
         <primitive id="lxc-ms" long-id="lxc-ms:0" class="ocf" provider="pacemaker" type="Stateful"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="rhel7-2" CRM_meta_timeout="90000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="99" operation="start" operation_key="container1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
+        <rsc_op id="111" operation="start" operation_key="container1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="104" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1"/>
+        <rsc_op id="116" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="108" operation="start" operation_key="lxc-ms-master_start_0"/>
+        <pseudo_event id="120" operation="start" operation_key="lxc-ms-master_start_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="117" operation="start" operation_key="lxc1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
+        <rsc_op id="129" operation="start" operation_key="lxc1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="6" priority="1000000">
+  <synapse id="18" priority="1000000">
     <action_set>
-      <pseudo_event id="115" operation="demoted" operation_key="lxc-ms-master_demoted_0">
+      <pseudo_event id="127" operation="demoted" operation_key="lxc-ms-master_demoted_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="90000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="103" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1"/>
+        <rsc_op id="115" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="114" operation="demote" operation_key="lxc-ms-master_demote_0"/>
+        <pseudo_event id="126" operation="demote" operation_key="lxc-ms-master_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="7">
+  <synapse id="19">
     <action_set>
-      <pseudo_event id="114" operation="demote" operation_key="lxc-ms-master_demote_0">
+      <pseudo_event id="126" operation="demote" operation_key="lxc-ms-master_demote_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="90000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="8" priority="1000000">
+  <synapse id="20" priority="1000000">
     <action_set>
-      <pseudo_event id="113" operation="promoted" operation_key="lxc-ms-master_promoted_0">
+      <pseudo_event id="125" operation="promoted" operation_key="lxc-ms-master_promoted_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="90000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="105" operation="promote" operation_key="lxc-ms_promote_0" internal_operation_key="lxc-ms:0_promote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2"/>
+        <rsc_op id="117" operation="promote" operation_key="lxc-ms_promote_0" internal_operation_key="lxc-ms:0_promote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="9">
+  <synapse id="21">
     <action_set>
-      <pseudo_event id="112" operation="promote" operation_key="lxc-ms-master_promote_0">
+      <pseudo_event id="124" operation="promote" operation_key="lxc-ms-master_promote_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="90000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="109" operation="running" operation_key="lxc-ms-master_running_0"/>
+        <pseudo_event id="121" operation="running" operation_key="lxc-ms-master_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="111" operation="stopped" operation_key="lxc-ms-master_stopped_0"/>
+        <pseudo_event id="123" operation="stopped" operation_key="lxc-ms-master_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="115" operation="demoted" operation_key="lxc-ms-master_demoted_0"/>
+        <pseudo_event id="127" operation="demoted" operation_key="lxc-ms-master_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10" priority="1000000">
+  <synapse id="22" priority="1000000">
     <action_set>
-      <pseudo_event id="111" operation="stopped" operation_key="lxc-ms-master_stopped_0">
+      <pseudo_event id="123" operation="stopped" operation_key="lxc-ms-master_stopped_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="90000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="104" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1"/>
+        <rsc_op id="116" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="110" operation="stop" operation_key="lxc-ms-master_stop_0"/>
+        <pseudo_event id="122" operation="stop" operation_key="lxc-ms-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="11">
+  <synapse id="23">
     <action_set>
-      <pseudo_event id="110" operation="stop" operation_key="lxc-ms-master_stop_0">
+      <pseudo_event id="122" operation="stop" operation_key="lxc-ms-master_stop_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="90000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="115" operation="demoted" operation_key="lxc-ms-master_demoted_0"/>
+        <pseudo_event id="127" operation="demoted" operation_key="lxc-ms-master_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12" priority="1000000">
+  <synapse id="24" priority="1000000">
     <action_set>
-      <pseudo_event id="109" operation="running" operation_key="lxc-ms-master_running_0">
+      <pseudo_event id="121" operation="running" operation_key="lxc-ms-master_running_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="90000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="102" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:0_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2"/>
+        <rsc_op id="114" operation="start" operation_key="lxc-ms_start_0" internal_operation_key="lxc-ms:0_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="108" operation="start" operation_key="lxc-ms-master_start_0"/>
+        <pseudo_event id="120" operation="start" operation_key="lxc-ms-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="13">
+  <synapse id="25">
     <action_set>
-      <pseudo_event id="108" operation="start" operation_key="lxc-ms-master_start_0">
+      <pseudo_event id="120" operation="start" operation_key="lxc-ms-master_start_0">
         <attributes CRM_meta_clone_max="2" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="90000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="111" operation="stopped" operation_key="lxc-ms-master_stopped_0"/>
+        <pseudo_event id="123" operation="stopped" operation_key="lxc-ms-master_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="115" operation="demoted" operation_key="lxc-ms-master_demoted_0"/>
+        <pseudo_event id="127" operation="demoted" operation_key="lxc-ms-master_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14">
+  <synapse id="26">
     <action_set>
-      <rsc_op id="118" operation="monitor" operation_key="lxc1_monitor_30000" on_node="rhel7-2" on_node_uuid="2">
+      <rsc_op id="130" operation="monitor" operation_key="lxc1_monitor_30000" on_node="rhel7-2" on_node_uuid="2">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_on_node="rhel7-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="117" operation="start" operation_key="lxc1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
+        <rsc_op id="129" operation="start" operation_key="lxc1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="27">
     <action_set>
-      <rsc_op id="117" operation="start" operation_key="lxc1_start_0" on_node="rhel7-2" on_node_uuid="2">
+      <rsc_op id="129" operation="start" operation_key="lxc1_start_0" on_node="rhel7-2" on_node_uuid="2">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_name="start" CRM_meta_on_node="rhel7-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="26" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-2" on_node_uuid="2"/>
+        <rsc_op id="38" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="28" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-3" on_node_uuid="4"/>
+        <rsc_op id="40" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-3" on_node_uuid="4"/>
       </trigger>
       <trigger>
-        <rsc_op id="30" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-4" on_node_uuid="5"/>
+        <rsc_op id="42" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-4" on_node_uuid="5"/>
       </trigger>
       <trigger>
-        <rsc_op id="32" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-5" on_node_uuid="3"/>
+        <rsc_op id="44" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-5" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="99" operation="start" operation_key="container1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
+        <rsc_op id="111" operation="start" operation_key="container1_start_0" on_node="rhel7-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="116" operation="stop" operation_key="lxc1_stop_0" on_node="rhel7-1" on_node_uuid="1"/>
+        <rsc_op id="128" operation="stop" operation_key="lxc1_stop_0" on_node="rhel7-1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="16">
+  <synapse id="28">
     <action_set>
-      <rsc_op id="116" operation="stop" operation_key="lxc1_stop_0" on_node="rhel7-1" on_node_uuid="1">
+      <rsc_op id="128" operation="stop" operation_key="lxc1_stop_0" on_node="rhel7-1" on_node_uuid="1">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_on_node="rhel7-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="90000" />
         <downed>
@@ -264,98 +372,98 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="26" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-2" on_node_uuid="2"/>
+        <rsc_op id="38" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="28" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-3" on_node_uuid="4"/>
+        <rsc_op id="40" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-3" on_node_uuid="4"/>
       </trigger>
       <trigger>
-        <rsc_op id="30" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-4" on_node_uuid="5"/>
+        <rsc_op id="42" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-4" on_node_uuid="5"/>
       </trigger>
       <trigger>
-        <rsc_op id="32" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-5" on_node_uuid="3"/>
+        <rsc_op id="44" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-5" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="103" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1"/>
+        <rsc_op id="115" operation="demote" operation_key="lxc-ms_demote_0" internal_operation_key="lxc-ms:0_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="104" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1"/>
+        <rsc_op id="116" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="17">
+  <synapse id="29">
     <action_set>
-      <rsc_op id="32" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-5" on_node_uuid="3">
+      <rsc_op id="44" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-5" on_node_uuid="3">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_on_node="rhel7-5" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="18">
+  <synapse id="30">
     <action_set>
-      <rsc_op id="30" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-4" on_node_uuid="5">
+      <rsc_op id="42" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-4" on_node_uuid="5">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_on_node="rhel7-4" CRM_meta_on_node_uuid="5" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="19">
+  <synapse id="31">
     <action_set>
-      <rsc_op id="28" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-3" on_node_uuid="4">
+      <rsc_op id="40" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-3" on_node_uuid="4">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_on_node="rhel7-3" CRM_meta_on_node_uuid="4" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="20">
+  <synapse id="32">
     <action_set>
-      <rsc_op id="26" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-2" on_node_uuid="2">
+      <rsc_op id="38" operation="monitor" operation_key="lxc1_monitor_0" on_node="rhel7-2" on_node_uuid="2">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_on_node="rhel7-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="21">
+  <synapse id="33">
     <action_set>
-      <rsc_op id="33" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-5" on_node_uuid="3">
+      <rsc_op id="45" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-5" on_node_uuid="3">
         <primitive id="lxc2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container2" CRM_meta_on_node="rhel7-5" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="22">
+  <synapse id="34">
     <action_set>
-      <rsc_op id="31" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-4" on_node_uuid="5">
+      <rsc_op id="43" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-4" on_node_uuid="5">
         <primitive id="lxc2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container2" CRM_meta_on_node="rhel7-4" CRM_meta_on_node_uuid="5" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="23">
+  <synapse id="35">
     <action_set>
-      <rsc_op id="29" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-3" on_node_uuid="4">
+      <rsc_op id="41" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-3" on_node_uuid="4">
         <primitive id="lxc2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container2" CRM_meta_on_node="rhel7-3" CRM_meta_on_node_uuid="4" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="24">
+  <synapse id="36">
     <action_set>
-      <rsc_op id="27" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-2" on_node_uuid="2">
+      <rsc_op id="39" operation="monitor" operation_key="lxc2_monitor_0" on_node="rhel7-2" on_node_uuid="2">
         <primitive id="lxc2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container2" CRM_meta_on_node="rhel7-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="25">
+  <synapse id="37">
     <action_set>
       <pseudo_event id="25" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -363,13 +471,13 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="98" operation="stop" operation_key="container1_stop_0" on_node="rhel7-1" on_node_uuid="1"/>
+        <rsc_op id="110" operation="stop" operation_key="container1_stop_0" on_node="rhel7-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="104" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1"/>
+        <rsc_op id="116" operation="stop" operation_key="lxc-ms_stop_0" internal_operation_key="lxc-ms:0_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="rhel7-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="116" operation="stop" operation_key="lxc1_stop_0" on_node="rhel7-1" on_node_uuid="1"/>
+        <rsc_op id="128" operation="stop" operation_key="lxc1_stop_0" on_node="rhel7-1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/whitebox-ms-ordering-move.summary b/pengine/test10/whitebox-ms-ordering-move.summary
index 80156b0..af86d74 100644
--- a/pengine/test10/whitebox-ms-ordering-move.summary
+++ b/pengine/test10/whitebox-ms-ordering-move.summary
@@ -35,6 +35,18 @@ Transition Summary:
  * Move       lxc1           ( rhel7-1 -> rhel7-2 )  
 
 Executing cluster transition:
+ * Resource action: rsc_rhel7-1     monitor on lxc2
+ * Resource action: rsc_rhel7-2     monitor on lxc2
+ * Resource action: rsc_rhel7-3     monitor on lxc2
+ * Resource action: rsc_rhel7-4     monitor on lxc2
+ * Resource action: rsc_rhel7-5     monitor on lxc2
+ * Resource action: migrator        monitor on lxc2
+ * Resource action: ping-1          monitor on lxc2
+ * Resource action: stateful-1      monitor on lxc2
+ * Resource action: r192.168.122.207 monitor on lxc2
+ * Resource action: petulant        monitor on lxc2
+ * Resource action: r192.168.122.208 monitor on lxc2
+ * Resource action: lsb-dummy       monitor on lxc2
  * Pseudo action:   lxc-ms-master_demote_0
  * Resource action: lxc1            monitor on rhel7-5
  * Resource action: lxc1            monitor on rhel7-4
diff --git a/pengine/test10/whitebox-nested-group.dot b/pengine/test10/whitebox-nested-group.dot
index 9e1abce..e5749ec 100644
--- a/pengine/test10/whitebox-nested-group.dot
+++ b/pengine/test10/whitebox-nested-group.dot
@@ -1,9 +1,30 @@
  digraph "g" {
 "c7auto4_monitor_0 c7auto1" -> "c7auto4_start_0 c7auto1" [ style = bold]
+"c7auto4_monitor_0 c7auto1" -> "fake1_start_0 c7auto3" [ style = bold]
+"c7auto4_monitor_0 c7auto1" -> "fake2_start_0 c7auto4" [ style = bold]
+"c7auto4_monitor_0 c7auto1" -> "fake3_start_0 c7auto2" [ style = bold]
+"c7auto4_monitor_0 c7auto1" -> "fake4_start_0 c7auto3" [ style = bold]
+"c7auto4_monitor_0 c7auto1" -> "fake5_start_0 c7auto4" [ style = bold]
+"c7auto4_monitor_0 c7auto1" -> "fake_clone_start_0" [ style = bold]
+"c7auto4_monitor_0 c7auto1" -> "fake_group_start_0" [ style = bold]
 "c7auto4_monitor_0 c7auto1" [ style=bold color="green" fontcolor="black"]
 "c7auto4_monitor_0 c7auto2" -> "c7auto4_start_0 c7auto1" [ style = bold]
+"c7auto4_monitor_0 c7auto2" -> "fake1_start_0 c7auto3" [ style = bold]
+"c7auto4_monitor_0 c7auto2" -> "fake2_start_0 c7auto4" [ style = bold]
+"c7auto4_monitor_0 c7auto2" -> "fake3_start_0 c7auto2" [ style = bold]
+"c7auto4_monitor_0 c7auto2" -> "fake4_start_0 c7auto3" [ style = bold]
+"c7auto4_monitor_0 c7auto2" -> "fake5_start_0 c7auto4" [ style = bold]
+"c7auto4_monitor_0 c7auto2" -> "fake_clone_start_0" [ style = bold]
+"c7auto4_monitor_0 c7auto2" -> "fake_group_start_0" [ style = bold]
 "c7auto4_monitor_0 c7auto2" [ style=bold color="green" fontcolor="black"]
 "c7auto4_monitor_0 c7auto3" -> "c7auto4_start_0 c7auto1" [ style = bold]
+"c7auto4_monitor_0 c7auto3" -> "fake1_start_0 c7auto3" [ style = bold]
+"c7auto4_monitor_0 c7auto3" -> "fake2_start_0 c7auto4" [ style = bold]
+"c7auto4_monitor_0 c7auto3" -> "fake3_start_0 c7auto2" [ style = bold]
+"c7auto4_monitor_0 c7auto3" -> "fake4_start_0 c7auto3" [ style = bold]
+"c7auto4_monitor_0 c7auto3" -> "fake5_start_0 c7auto4" [ style = bold]
+"c7auto4_monitor_0 c7auto3" -> "fake_clone_start_0" [ style = bold]
+"c7auto4_monitor_0 c7auto3" -> "fake_group_start_0" [ style = bold]
 "c7auto4_monitor_0 c7auto3" [ style=bold color="green" fontcolor="black"]
 "c7auto4_monitor_30000 c7auto1" [ style=bold color="green" fontcolor="black"]
 "c7auto4_start_0 c7auto1" -> "c7auto4_monitor_30000 c7auto1" [ style = bold]
diff --git a/pengine/test10/whitebox-nested-group.exp b/pengine/test10/whitebox-nested-group.exp
index 388c4d4..5625c92 100644
--- a/pengine/test10/whitebox-nested-group.exp
+++ b/pengine/test10/whitebox-nested-group.exp
@@ -24,11 +24,20 @@
         <rsc_op id="3" operation="monitor" operation_key="fake1_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
       </trigger>
       <trigger>
+        <rsc_op id="10" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
         <rsc_op id="11" operation="monitor" operation_key="fake1_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
       </trigger>
       <trigger>
+        <rsc_op id="18" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
         <rsc_op id="19" operation="monitor" operation_key="fake1_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
       </trigger>
+      <trigger>
+        <rsc_op id="26" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
+      </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
@@ -86,12 +95,21 @@
         <rsc_op id="4" operation="monitor" operation_key="fake2_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
       </trigger>
       <trigger>
+        <rsc_op id="10" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
         <rsc_op id="12" operation="monitor" operation_key="fake2_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
       </trigger>
       <trigger>
+        <rsc_op id="18" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
         <rsc_op id="20" operation="monitor" operation_key="fake2_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
       </trigger>
       <trigger>
+        <rsc_op id="26" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
         <rsc_op id="53" operation="start" operation_key="container_start_0" on_node="c7auto1" on_node_uuid="1"/>
       </trigger>
       <trigger>
@@ -151,11 +169,20 @@
         <rsc_op id="5" operation="monitor" operation_key="fake3_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
       </trigger>
       <trigger>
+        <rsc_op id="10" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
         <rsc_op id="13" operation="monitor" operation_key="fake3_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
       </trigger>
       <trigger>
+        <rsc_op id="18" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
         <rsc_op id="21" operation="monitor" operation_key="fake3_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
       </trigger>
+      <trigger>
+        <rsc_op id="26" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
+      </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
@@ -210,11 +237,20 @@
         <rsc_op id="6" operation="monitor" operation_key="fake4_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
       </trigger>
       <trigger>
+        <rsc_op id="10" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
         <rsc_op id="14" operation="monitor" operation_key="fake4_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
       </trigger>
       <trigger>
+        <rsc_op id="18" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
         <rsc_op id="22" operation="monitor" operation_key="fake4_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
       </trigger>
+      <trigger>
+        <rsc_op id="26" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
+      </trigger>
     </inputs>
   </synapse>
   <synapse id="17">
@@ -272,12 +308,21 @@
         <rsc_op id="7" operation="monitor" operation_key="fake5_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
       </trigger>
       <trigger>
+        <rsc_op id="10" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
         <rsc_op id="15" operation="monitor" operation_key="fake5_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
       </trigger>
       <trigger>
+        <rsc_op id="18" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
         <rsc_op id="23" operation="monitor" operation_key="fake5_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
       </trigger>
       <trigger>
+        <rsc_op id="26" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
         <rsc_op id="53" operation="start" operation_key="container_start_0" on_node="c7auto1" on_node_uuid="1"/>
       </trigger>
       <trigger>
@@ -487,11 +532,20 @@
         <rsc_op id="8" operation="monitor" operation_key="fake:3_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
       </trigger>
       <trigger>
+        <rsc_op id="10" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
         <rsc_op id="16" operation="monitor" operation_key="fake:0_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
       </trigger>
       <trigger>
+        <rsc_op id="18" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
         <rsc_op id="24" operation="monitor" operation_key="fake:1_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
       </trigger>
+      <trigger>
+        <rsc_op id="26" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
+      </trigger>
     </inputs>
   </synapse>
   <synapse id="38">
@@ -518,7 +572,17 @@
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <rsc_op id="10" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="18" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="26" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
   </synapse>
   <synapse id="40">
     <action_set>
diff --git a/pengine/test10/whitebox-nested-group.summary b/pengine/test10/whitebox-nested-group.summary
index ca9c47f..b03b357 100644
--- a/pengine/test10/whitebox-nested-group.summary
+++ b/pengine/test10/whitebox-nested-group.summary
@@ -47,8 +47,6 @@ Executing cluster transition:
  * Resource action: fake:0          monitor on c7auto2
  * Resource action: fake:1          monitor on c7auto3
  * Resource action: fake:3          monitor on c7auto1
- * Pseudo action:   fake_clone_start_0
- * Pseudo action:   fake_group_start_0
  * Resource action: fake_fs         monitor on c7auto3
  * Resource action: fake_fs         monitor on c7auto2
  * Resource action: fake_fs         monitor on c7auto1
@@ -58,9 +56,8 @@ Executing cluster transition:
  * Resource action: fake1           start on c7auto3
  * Resource action: fake3           start on c7auto2
  * Resource action: fake4           start on c7auto3
- * Resource action: fake:0          start on c7auto2
- * Resource action: fake:1          start on c7auto3
- * Resource action: fake:3          start on c7auto1
+ * Pseudo action:   fake_clone_start_0
+ * Pseudo action:   fake_group_start_0
  * Resource action: fake_fs         start on c7auto1
  * Resource action: container       start on c7auto1
  * Resource action: c7auto4         start on c7auto1
@@ -69,10 +66,10 @@ Executing cluster transition:
  * Resource action: fake3           monitor=10000 on c7auto2
  * Resource action: fake4           monitor=10000 on c7auto3
  * Resource action: fake5           start on c7auto4
- * Resource action: fake:0          monitor=10000 on c7auto2
- * Resource action: fake:1          monitor=10000 on c7auto3
+ * Resource action: fake:0          start on c7auto2
+ * Resource action: fake:1          start on c7auto3
  * Resource action: fake:2          start on c7auto4
- * Resource action: fake:3          monitor=10000 on c7auto1
+ * Resource action: fake:3          start on c7auto1
  * Pseudo action:   fake_clone_running_0
  * Pseudo action:   fake_group_running_0
  * Resource action: fake_fs         monitor=10000 on c7auto1
@@ -80,7 +77,10 @@ Executing cluster transition:
  * Resource action: c7auto4         monitor=30000 on c7auto1
  * Resource action: fake2           monitor=10000 on c7auto4
  * Resource action: fake5           monitor=10000 on c7auto4
+ * Resource action: fake:0          monitor=10000 on c7auto2
+ * Resource action: fake:1          monitor=10000 on c7auto3
  * Resource action: fake:2          monitor=10000 on c7auto4
+ * Resource action: fake:3          monitor=10000 on c7auto1
 
 Revised cluster status:
 Online: [ c7auto1 c7auto2 c7auto3 ]
diff --git a/pengine/test10/whitebox-orphan-ms.dot b/pengine/test10/whitebox-orphan-ms.dot
index 46b6cda..4e2e211 100644
--- a/pengine/test10/whitebox-orphan-ms.dot
+++ b/pengine/test10/whitebox-orphan-ms.dot
@@ -25,6 +25,8 @@
 "container2_stop_0 18node1" -> "container2_delete_0 18node2" [ style = bold]
 "container2_stop_0 18node1" -> "container2_delete_0 18node3" [ style = bold]
 "container2_stop_0 18node1" [ style=bold color="green" fontcolor="black"]
+"lsb-dummy_monitor_0 lxc1" [ style=dashed color="red" fontcolor="black"]
+"lsb-dummy_monitor_0 lxc2" [ style=dashed color="red" fontcolor="black"]
 "lxc-ms_clear_failcount_0 lxc1" -> "lxc-ms_stop_0 lxc1" [ style = dashed]
 "lxc-ms_clear_failcount_0 lxc1" -> "lxc-ms_stop_0 lxc2" [ style = dashed]
 "lxc-ms_clear_failcount_0 lxc1" [ style=dashed color="red" fontcolor="black"]
@@ -69,4 +71,20 @@
 "lxc2_stop_0 18node1" -> "lxc2_delete_0 18node2" [ style = bold]
 "lxc2_stop_0 18node1" -> "lxc2_delete_0 18node3" [ style = bold]
 "lxc2_stop_0 18node1" [ style=bold color="green" fontcolor="black"]
+"migrator_monitor_0 lxc1" [ style=dashed color="red" fontcolor="black"]
+"migrator_monitor_0 lxc2" [ style=dashed color="red" fontcolor="black"]
+"ping-1_monitor_0 lxc1" [ style=dashed color="red" fontcolor="black"]
+"ping-1_monitor_0 lxc2" [ style=dashed color="red" fontcolor="black"]
+"r192.168.122.87_monitor_0 lxc1" [ style=dashed color="red" fontcolor="black"]
+"r192.168.122.87_monitor_0 lxc2" [ style=dashed color="red" fontcolor="black"]
+"r192.168.122.88_monitor_0 lxc1" [ style=dashed color="red" fontcolor="black"]
+"r192.168.122.88_monitor_0 lxc2" [ style=dashed color="red" fontcolor="black"]
+"r192.168.122.89_monitor_0 lxc1" [ style=dashed color="red" fontcolor="black"]
+"r192.168.122.89_monitor_0 lxc2" [ style=dashed color="red" fontcolor="black"]
+"rsc_18node1_monitor_0 lxc1" [ style=dashed color="red" fontcolor="black"]
+"rsc_18node1_monitor_0 lxc2" [ style=dashed color="red" fontcolor="black"]
+"rsc_18node2_monitor_0 lxc1" [ style=dashed color="red" fontcolor="black"]
+"rsc_18node2_monitor_0 lxc2" [ style=dashed color="red" fontcolor="black"]
+"rsc_18node3_monitor_0 lxc1" [ style=dashed color="red" fontcolor="black"]
+"rsc_18node3_monitor_0 lxc2" [ style=dashed color="red" fontcolor="black"]
 }
diff --git a/pengine/test10/whitebox-orphan-ms.exp b/pengine/test10/whitebox-orphan-ms.exp
index ef81317..564e92d 100644
--- a/pengine/test10/whitebox-orphan-ms.exp
+++ b/pengine/test10/whitebox-orphan-ms.exp
@@ -1,20 +1,20 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="1"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="41" operation="start" operation_key="FencingFail_start_0" on_node="18node1" on_node_uuid="1">
+      <rsc_op id="59" operation="start" operation_key="FencingFail_start_0" on_node="18node1" on_node_uuid="1">
         <primitive id="FencingFail" class="stonith" type="fence_dummy"/>
         <attributes CRM_meta_on_node="18node1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="90000"  delay="20" mode="fail" pcmk_host_list="18node1 18node3" random_sleep_range="30"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="40" operation="stop" operation_key="FencingFail_stop_0" on_node="18node3" on_node_uuid="3"/>
+        <rsc_op id="58" operation="stop" operation_key="FencingFail_stop_0" on_node="18node3" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="40" operation="stop" operation_key="FencingFail_stop_0" on_node="18node3" on_node_uuid="3">
+      <rsc_op id="58" operation="stop" operation_key="FencingFail_stop_0" on_node="18node3" on_node_uuid="3">
         <primitive id="FencingFail" class="stonith" type="fence_dummy"/>
         <attributes CRM_meta_on_node="18node3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="90000"  delay="20" mode="fail" pcmk_host_list="18node1 18node3" random_sleep_range="30"/>
       </rsc_op>
@@ -23,14 +23,14 @@
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="88" operation="stop" operation_key="container2_stop_0" on_node="18node1" on_node_uuid="1">
+      <rsc_op id="106" operation="stop" operation_key="container2_stop_0" on_node="18node1" on_node_uuid="1">
         <primitive id="container2" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_on_node="18node1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="90000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="94" operation="stop" operation_key="lxc2_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="112" operation="stop" operation_key="lxc2_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
@@ -43,7 +43,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="88" operation="stop" operation_key="container2_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="106" operation="stop" operation_key="container2_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
@@ -56,7 +56,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="88" operation="stop" operation_key="container2_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="106" operation="stop" operation_key="container2_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
@@ -69,13 +69,13 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="88" operation="stop" operation_key="container2_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="106" operation="stop" operation_key="container2_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <rsc_op id="89" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1">
+      <rsc_op id="107" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_on_node="18node1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="90000" />
         <downed>
@@ -85,10 +85,10 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="90" operation="demote" operation_key="lxc-ms_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
+        <rsc_op id="108" operation="demote" operation_key="lxc-ms_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
       </trigger>
       <trigger>
-        <rsc_op id="92" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
+        <rsc_op id="110" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
       </trigger>
     </inputs>
   </synapse>
@@ -101,7 +101,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="89" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="107" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
@@ -114,7 +114,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="89" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="107" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
@@ -127,45 +127,45 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="89" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="107" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="93" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1">
+      <rsc_op id="111" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1">
         <primitive id="lxc-ms" class="ocf" provider="pacemaker" type="Stateful"/>
         <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_physical_host="18node1" CRM_meta_timeout="90000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="90" operation="demote" operation_key="lxc-ms_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
+        <rsc_op id="108" operation="demote" operation_key="lxc-ms_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
       </trigger>
       <trigger>
-        <rsc_op id="91" operation="demote" operation_key="lxc-ms_demote_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1"/>
+        <rsc_op id="109" operation="demote" operation_key="lxc-ms_demote_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="92" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
+      <rsc_op id="110" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
         <primitive id="lxc-ms" class="ocf" provider="pacemaker" type="Stateful"/>
         <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node1" CRM_meta_timeout="90000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="90" operation="demote" operation_key="lxc-ms_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
+        <rsc_op id="108" operation="demote" operation_key="lxc-ms_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
       </trigger>
       <trigger>
-        <rsc_op id="91" operation="demote" operation_key="lxc-ms_demote_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1"/>
+        <rsc_op id="109" operation="demote" operation_key="lxc-ms_demote_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <rsc_op id="91" operation="demote" operation_key="lxc-ms_demote_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1">
+      <rsc_op id="109" operation="demote" operation_key="lxc-ms_demote_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1">
         <primitive id="lxc-ms" class="ocf" provider="pacemaker" type="Stateful"/>
         <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_physical_host="18node1" CRM_meta_timeout="90000" />
       </rsc_op>
@@ -174,7 +174,7 @@
   </synapse>
   <synapse id="13">
     <action_set>
-      <rsc_op id="90" operation="demote" operation_key="lxc-ms_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
+      <rsc_op id="108" operation="demote" operation_key="lxc-ms_demote_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
         <primitive id="lxc-ms" class="ocf" provider="pacemaker" type="Stateful"/>
         <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node1" CRM_meta_timeout="90000" />
       </rsc_op>
@@ -190,10 +190,10 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="92" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
+        <rsc_op id="110" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
       </trigger>
       <trigger>
-        <rsc_op id="93" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1"/>
+        <rsc_op id="111" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1"/>
       </trigger>
     </inputs>
   </synapse>
@@ -206,10 +206,10 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="92" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
+        <rsc_op id="110" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
       </trigger>
       <trigger>
-        <rsc_op id="93" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1"/>
+        <rsc_op id="111" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1"/>
       </trigger>
     </inputs>
   </synapse>
@@ -222,16 +222,16 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="92" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
+        <rsc_op id="110" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
       </trigger>
       <trigger>
-        <rsc_op id="93" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1"/>
+        <rsc_op id="111" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="17">
     <action_set>
-      <rsc_op id="94" operation="stop" operation_key="lxc2_stop_0" on_node="18node1" on_node_uuid="1">
+      <rsc_op id="112" operation="stop" operation_key="lxc2_stop_0" on_node="18node1" on_node_uuid="1">
         <primitive id="lxc2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container2" CRM_meta_on_node="18node1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="90000" />
         <downed>
@@ -241,10 +241,10 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="91" operation="demote" operation_key="lxc-ms_demote_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1"/>
+        <rsc_op id="109" operation="demote" operation_key="lxc-ms_demote_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1"/>
       </trigger>
       <trigger>
-        <rsc_op id="93" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1"/>
+        <rsc_op id="111" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1"/>
       </trigger>
     </inputs>
   </synapse>
@@ -257,7 +257,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="94" operation="stop" operation_key="lxc2_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="112" operation="stop" operation_key="lxc2_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
@@ -270,7 +270,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="94" operation="stop" operation_key="lxc2_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="112" operation="stop" operation_key="lxc2_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
@@ -283,20 +283,20 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="94" operation="stop" operation_key="lxc2_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="112" operation="stop" operation_key="lxc2_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21">
     <action_set>
-      <rsc_op id="95" operation="stop" operation_key="container1_stop_0" on_node="18node1" on_node_uuid="1">
+      <rsc_op id="113" operation="stop" operation_key="container1_stop_0" on_node="18node1" on_node_uuid="1">
         <primitive id="container1" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_on_node="18node1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="90000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="89" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="107" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
@@ -309,7 +309,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="95" operation="stop" operation_key="container1_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="113" operation="stop" operation_key="container1_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
@@ -322,7 +322,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="95" operation="stop" operation_key="container1_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="113" operation="stop" operation_key="container1_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
@@ -335,7 +335,7 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="95" operation="stop" operation_key="container1_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="113" operation="stop" operation_key="container1_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
@@ -347,25 +347,25 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="40" operation="stop" operation_key="FencingFail_stop_0" on_node="18node3" on_node_uuid="3"/>
+        <rsc_op id="58" operation="stop" operation_key="FencingFail_stop_0" on_node="18node3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="88" operation="stop" operation_key="container2_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="106" operation="stop" operation_key="container2_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="89" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="107" operation="stop" operation_key="lxc1_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="92" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
+        <rsc_op id="110" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
       </trigger>
       <trigger>
-        <rsc_op id="93" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1"/>
+        <rsc_op id="111" operation="stop" operation_key="lxc-ms_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node1"/>
       </trigger>
       <trigger>
-        <rsc_op id="94" operation="stop" operation_key="lxc2_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="112" operation="stop" operation_key="lxc2_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="95" operation="stop" operation_key="container1_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="113" operation="stop" operation_key="container1_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/whitebox-orphaned.dot b/pengine/test10/whitebox-orphaned.dot
index e50252d..4ef1f7e 100644
--- a/pengine/test10/whitebox-orphaned.dot
+++ b/pengine/test10/whitebox-orphaned.dot
@@ -1,4 +1,9 @@
  digraph "g" {
+"A_monitor_0 lxc1" [ style=dashed color="red" fontcolor="black"]
+"A_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
+"B_monitor_0 lxc2" -> "B_start_0 lxc2" [ style = bold]
+"B_monitor_0 lxc2" -> "B_stop_0 lxc1" [ style = bold]
+"B_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
 "B_monitor_10000 lxc2" [ style=bold color="green" fontcolor="black"]
 "B_start_0 lxc2" -> "B_monitor_10000 lxc2" [ style = bold]
 "B_start_0 lxc2" [ style=bold color="green" fontcolor="black"]
@@ -6,6 +11,9 @@
 "B_stop_0 lxc1" -> "all_stopped" [ style = bold]
 "B_stop_0 lxc1" -> "lxc1_stop_0 18node2" [ style = bold]
 "B_stop_0 lxc1" [ style=bold color="green" fontcolor="black"]
+"C_monitor_0 lxc1" [ style=dashed color="red" fontcolor="black"]
+"D_monitor_0 lxc1" [ style=dashed color="red" fontcolor="black"]
+"D_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
 "M-clone_stop_0" -> "M-clone_stopped_0" [ style = bold]
 "M-clone_stop_0" -> "M_stop_0 lxc1" [ style = bold]
 "M-clone_stop_0" [ style=bold color="green" fontcolor="orange"]
diff --git a/pengine/test10/whitebox-orphaned.exp b/pengine/test10/whitebox-orphaned.exp
index 334e594..843f186 100644
--- a/pengine/test10/whitebox-orphaned.exp
+++ b/pengine/test10/whitebox-orphaned.exp
@@ -1,35 +1,35 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="33" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
+      <rsc_op id="39" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="M" long-id="M:4" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="36" operation="stop" operation_key="M-clone_stop_0"/>
+        <pseudo_event id="42" operation="stop" operation_key="M-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1" priority="1000000">
     <action_set>
-      <pseudo_event id="37" operation="stopped" operation_key="M-clone_stopped_0">
+      <pseudo_event id="43" operation="stopped" operation_key="M-clone_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="33" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="39" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="36" operation="stop" operation_key="M-clone_stop_0"/>
+        <pseudo_event id="42" operation="stop" operation_key="M-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <pseudo_event id="36" operation="stop" operation_key="M-clone_stop_0">
+      <pseudo_event id="42" operation="stop" operation_key="M-clone_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -37,65 +37,99 @@
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="42" operation="monitor" operation_key="B_monitor_10000" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+      <rsc_op id="22" operation="monitor" operation_key="A_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+        <primitive id="A" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="4">
+    <action_set>
+      <rsc_op id="48" operation="monitor" operation_key="B_monitor_10000" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="41" operation="start" operation_key="B_start_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
+        <rsc_op id="47" operation="start" operation_key="B_start_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="4">
+  <synapse id="5">
     <action_set>
-      <rsc_op id="41" operation="start" operation_key="B_start_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+      <rsc_op id="47" operation="start" operation_key="B_start_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="40" operation="stop" operation_key="B_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="23" operation="monitor" operation_key="B_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="46" operation="stop" operation_key="B_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="5">
+  <synapse id="6">
     <action_set>
-      <rsc_op id="40" operation="stop" operation_key="B_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
+      <rsc_op id="46" operation="stop" operation_key="B_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="23" operation="monitor" operation_key="B_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="7">
+    <action_set>
+      <rsc_op id="23" operation="monitor" operation_key="B_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+        <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
     <inputs/>
   </synapse>
-  <synapse id="6">
+  <synapse id="8">
     <action_set>
-      <rsc_op id="49" operation="stop" operation_key="container1_stop_0" on_node="18node2" on_node_uuid="2">
+      <rsc_op id="24" operation="monitor" operation_key="D_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+        <primitive id="D" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="9">
+    <action_set>
+      <rsc_op id="55" operation="stop" operation_key="container1_stop_0" on_node="18node2" on_node_uuid="2">
         <primitive id="container1" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="19" operation="clear_failcount" operation_key="container1_clear_failcount_0" on_node="18node2" on_node_uuid="2"/>
+        <crm_event id="25" operation="clear_failcount" operation_key="container1_clear_failcount_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="50" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="56" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="7">
+  <synapse id="10">
     <action_set>
-      <crm_event id="19" operation="clear_failcount" operation_key="container1_clear_failcount_0" on_node="18node2" on_node_uuid="2">
+      <crm_event id="25" operation="clear_failcount" operation_key="container1_clear_failcount_0" on_node="18node2" on_node_uuid="2">
         <primitive id="container1" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="2" CRM_meta_op_no_wait="true" CRM_meta_timeout="20000" />
       </crm_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="8">
+  <synapse id="11">
     <action_set>
       <rsc_op id="17" operation="delete" operation_key="container1_delete_0" on_node="18node3" on_node_uuid="3">
         <primitive id="container1" class="ocf" provider="heartbeat" type="VirtualDomain"/>
@@ -104,11 +138,11 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="49" operation="stop" operation_key="container1_stop_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="55" operation="stop" operation_key="container1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="9">
+  <synapse id="12">
     <action_set>
       <rsc_op id="15" operation="delete" operation_key="container1_delete_0" on_node="18node2" on_node_uuid="2">
         <primitive id="container1" class="ocf" provider="heartbeat" type="VirtualDomain"/>
@@ -117,11 +151,11 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="49" operation="stop" operation_key="container1_stop_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="55" operation="stop" operation_key="container1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10">
+  <synapse id="13">
     <action_set>
       <rsc_op id="13" operation="delete" operation_key="container1_delete_0" on_node="18node1" on_node_uuid="1">
         <primitive id="container1" class="ocf" provider="heartbeat" type="VirtualDomain"/>
@@ -130,13 +164,13 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="49" operation="stop" operation_key="container1_stop_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="55" operation="stop" operation_key="container1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="11">
+  <synapse id="14">
     <action_set>
-      <rsc_op id="50" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2">
+      <rsc_op id="56" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
         <downed>
@@ -146,26 +180,26 @@
     </action_set>
     <inputs>
       <trigger>
-        <crm_event id="20" operation="clear_failcount" operation_key="lxc1_clear_failcount_0" on_node="18node2" on_node_uuid="2"/>
+        <crm_event id="26" operation="clear_failcount" operation_key="lxc1_clear_failcount_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="33" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="39" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
       <trigger>
-        <rsc_op id="40" operation="stop" operation_key="B_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="46" operation="stop" operation_key="B_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12">
+  <synapse id="15">
     <action_set>
-      <crm_event id="20" operation="clear_failcount" operation_key="lxc1_clear_failcount_0" on_node="18node2" on_node_uuid="2">
+      <crm_event id="26" operation="clear_failcount" operation_key="lxc1_clear_failcount_0" on_node="18node2" on_node_uuid="2">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="2" CRM_meta_op_no_wait="true" CRM_meta_timeout="20000" />
       </crm_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="13">
+  <synapse id="16">
     <action_set>
       <rsc_op id="18" operation="delete" operation_key="lxc1_delete_0" on_node="18node3" on_node_uuid="3">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
@@ -174,11 +208,11 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="50" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="56" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14">
+  <synapse id="17">
     <action_set>
       <rsc_op id="16" operation="delete" operation_key="lxc1_delete_0" on_node="18node2" on_node_uuid="2">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
@@ -187,11 +221,11 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="50" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="56" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="18">
     <action_set>
       <rsc_op id="14" operation="delete" operation_key="lxc1_delete_0" on_node="18node1" on_node_uuid="1">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
@@ -200,11 +234,11 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="50" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="56" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="16">
+  <synapse id="19">
     <action_set>
       <pseudo_event id="12" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -212,16 +246,16 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="33" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="39" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
       <trigger>
-        <rsc_op id="40" operation="stop" operation_key="B_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="46" operation="stop" operation_key="B_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
       <trigger>
-        <rsc_op id="49" operation="stop" operation_key="container1_stop_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="55" operation="stop" operation_key="container1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="50" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="56" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/whitebox-orphaned.summary b/pengine/test10/whitebox-orphaned.summary
index 7d173b2..e0928b1 100644
--- a/pengine/test10/whitebox-orphaned.summary
+++ b/pengine/test10/whitebox-orphaned.summary
@@ -23,22 +23,25 @@ Transition Summary:
 
 Executing cluster transition:
  * Pseudo action:   M-clone_stop_0
- * Resource action: B               stop on lxc1
+ * Resource action: A               monitor on lxc2
+ * Resource action: B               monitor on lxc2
+ * Resource action: D               monitor on lxc2
  * Cluster action:  clear_failcount for container1 on 18node2
  * Cluster action:  clear_failcount for lxc1 on 18node2
  * Resource action: M               stop on lxc1
  * Pseudo action:   M-clone_stopped_0
- * Resource action: B               start on lxc2
+ * Resource action: B               stop on lxc1
  * Resource action: lxc1            stop on 18node2
  * Resource action: lxc1            delete on 18node3
  * Resource action: lxc1            delete on 18node2
  * Resource action: lxc1            delete on 18node1
- * Resource action: B               monitor=10000 on lxc2
+ * Resource action: B               start on lxc2
  * Resource action: container1      stop on 18node2
  * Resource action: container1      delete on 18node3
  * Resource action: container1      delete on 18node2
  * Resource action: container1      delete on 18node1
  * Pseudo action:   all_stopped
+ * Resource action: B               monitor=10000 on lxc2
 
 Revised cluster status:
 Online: [ 18node1 18node2 18node3 ]
diff --git a/pengine/test10/whitebox-start.dot b/pengine/test10/whitebox-start.dot
index 8b4dbcd..28f747a 100644
--- a/pengine/test10/whitebox-start.dot
+++ b/pengine/test10/whitebox-start.dot
@@ -1,4 +1,7 @@
 digraph "g" {
+"A_monitor_0 lxc2" -> "A_start_0 lxc1" [ style = bold]
+"A_monitor_0 lxc2" -> "A_stop_0 18node1" [ style = bold]
+"A_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
 "A_monitor_10000 lxc1" [ style=bold color="green" fontcolor="black"]
 "A_start_0 lxc1" -> "A_monitor_10000 lxc1" [ style = bold]
 "A_start_0 lxc1" [ style=bold color="green" fontcolor="black"]
@@ -11,6 +14,7 @@ digraph "g" {
 "B_stop_0 lxc2" -> "B_start_0 18node3" [ style = bold]
 "B_stop_0 lxc2" -> "all_stopped" [ style = bold]
 "B_stop_0 lxc2" [ style=bold color="green" fontcolor="black"]
+"D_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
 "M-clone_running_0" [ style=bold color="green" fontcolor="orange"]
 "M-clone_start_0" -> "M-clone_running_0" [ style = bold]
 "M-clone_start_0" -> "M_start_0 lxc1" [ style = bold]
diff --git a/pengine/test10/whitebox-start.exp b/pengine/test10/whitebox-start.exp
index ccccf60..360b8a7 100644
--- a/pengine/test10/whitebox-start.exp
+++ b/pengine/test10/whitebox-start.exp
@@ -1,7 +1,7 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="11" operation="start" operation_key="container1_start_0" on_node="18node1" on_node_uuid="1">
+      <rsc_op id="13" operation="start" operation_key="container1_start_0" on_node="18node1" on_node_uuid="1">
         <primitive id="container1" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_on_node="18node1" CRM_meta_on_node_uuid="1" CRM_meta_remote_node="lxc1" CRM_meta_timeout="20000" config="/home/dvossel/virtual_machines/lxc/lxc1.xml"  force_stop="true" hypervisor="lxc:///"/>
       </rsc_op>
@@ -10,57 +10,57 @@
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="25" operation="monitor" operation_key="M_monitor_10000" internal_operation_key="M:4_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
+      <rsc_op id="27" operation="monitor" operation_key="M_monitor_10000" internal_operation_key="M:4_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
         <primitive id="M" long-id="M:4" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="24" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
+        <rsc_op id="26" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
       </trigger>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="lxc1_start_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="42" operation="start" operation_key="lxc1_start_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="24" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
+      <rsc_op id="26" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
         <primitive id="M" long-id="M:4" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="11" operation="start" operation_key="container1_start_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="13" operation="start" operation_key="container1_start_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="26" operation="start" operation_key="M-clone_start_0"/>
+        <pseudo_event id="28" operation="start" operation_key="M-clone_start_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="lxc1_start_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="42" operation="start" operation_key="lxc1_start_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3" priority="1000000">
     <action_set>
-      <pseudo_event id="27" operation="running" operation_key="M-clone_running_0">
+      <pseudo_event id="29" operation="running" operation_key="M-clone_running_0">
         <attributes CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="24" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
+        <rsc_op id="26" operation="start" operation_key="M_start_0" internal_operation_key="M:4_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="26" operation="start" operation_key="M-clone_start_0"/>
+        <pseudo_event id="28" operation="start" operation_key="M-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <pseudo_event id="26" operation="start" operation_key="M-clone_start_0">
+      <pseudo_event id="28" operation="start" operation_key="M-clone_start_0">
         <attributes CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -68,110 +68,135 @@
   </synapse>
   <synapse id="5">
     <action_set>
-      <rsc_op id="32" operation="monitor" operation_key="A_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
+      <rsc_op id="34" operation="monitor" operation_key="A_monitor_10000" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
         <primitive id="A" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="31" operation="start" operation_key="A_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
+        <rsc_op id="33" operation="start" operation_key="A_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1"/>
       </trigger>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="lxc1_start_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="42" operation="start" operation_key="lxc1_start_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <rsc_op id="31" operation="start" operation_key="A_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
+      <rsc_op id="33" operation="start" operation_key="A_start_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node1">
         <primitive id="A" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="11" operation="start" operation_key="container1_start_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="11" operation="monitor" operation_key="A_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
       </trigger>
       <trigger>
-        <rsc_op id="30" operation="stop" operation_key="A_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="13" operation="start" operation_key="container1_start_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="lxc1_start_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="32" operation="stop" operation_key="A_stop_0" on_node="18node1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="42" operation="start" operation_key="lxc1_start_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <rsc_op id="30" operation="stop" operation_key="A_stop_0" on_node="18node1" on_node_uuid="1">
+      <rsc_op id="32" operation="stop" operation_key="A_stop_0" on_node="18node1" on_node_uuid="1">
         <primitive id="A" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_on_node="18node1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
-    <inputs/>
+    <inputs>
+      <trigger>
+        <rsc_op id="11" operation="monitor" operation_key="A_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
+      </trigger>
+    </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <rsc_op id="35" operation="monitor" operation_key="B_monitor_10000" on_node="18node3" on_node_uuid="3">
+      <rsc_op id="11" operation="monitor" operation_key="A_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+        <primitive id="A" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="9">
+    <action_set>
+      <rsc_op id="37" operation="monitor" operation_key="B_monitor_10000" on_node="18node3" on_node_uuid="3">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="18node3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="34" operation="start" operation_key="B_start_0" on_node="18node3" on_node_uuid="3"/>
+        <rsc_op id="36" operation="start" operation_key="B_start_0" on_node="18node3" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="9">
+  <synapse id="10">
     <action_set>
-      <rsc_op id="34" operation="start" operation_key="B_start_0" on_node="18node3" on_node_uuid="3">
+      <rsc_op id="36" operation="start" operation_key="B_start_0" on_node="18node3" on_node_uuid="3">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_on_node="18node3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="33" operation="stop" operation_key="B_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
+        <rsc_op id="35" operation="stop" operation_key="B_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10">
+  <synapse id="11">
     <action_set>
-      <rsc_op id="33" operation="stop" operation_key="B_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+      <rsc_op id="35" operation="stop" operation_key="B_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="11">
+  <synapse id="12">
+    <action_set>
+      <rsc_op id="12" operation="monitor" operation_key="D_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+        <primitive id="D" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="13">
     <action_set>
-      <rsc_op id="41" operation="monitor" operation_key="lxc1_monitor_30000" on_node="18node1" on_node_uuid="1">
+      <rsc_op id="43" operation="monitor" operation_key="lxc1_monitor_30000" on_node="18node1" on_node_uuid="1">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_on_node="18node1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="lxc1_start_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="42" operation="start" operation_key="lxc1_start_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12">
+  <synapse id="14">
     <action_set>
-      <rsc_op id="40" operation="start" operation_key="lxc1_start_0" on_node="18node1" on_node_uuid="1">
+      <rsc_op id="42" operation="start" operation_key="lxc1_start_0" on_node="18node1" on_node_uuid="1">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_name="start" CRM_meta_on_node="18node1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="11" operation="start" operation_key="container1_start_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="13" operation="start" operation_key="container1_start_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="13">
+  <synapse id="15">
     <action_set>
       <pseudo_event id="10" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -179,10 +204,10 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="30" operation="stop" operation_key="A_stop_0" on_node="18node1" on_node_uuid="1"/>
+        <rsc_op id="32" operation="stop" operation_key="A_stop_0" on_node="18node1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="33" operation="stop" operation_key="B_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
+        <rsc_op id="35" operation="stop" operation_key="B_stop_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/whitebox-start.summary b/pengine/test10/whitebox-start.summary
index e76e28a..01a1b74 100644
--- a/pengine/test10/whitebox-start.summary
+++ b/pengine/test10/whitebox-start.summary
@@ -24,18 +24,20 @@ Transition Summary:
 Executing cluster transition:
  * Resource action: container1      start on 18node1
  * Pseudo action:   M-clone_start_0
- * Resource action: A               stop on 18node1
+ * Resource action: A               monitor on lxc2
  * Resource action: B               stop on lxc2
+ * Resource action: D               monitor on lxc2
  * Resource action: lxc1            start on 18node1
- * Pseudo action:   all_stopped
  * Resource action: M               start on lxc1
  * Pseudo action:   M-clone_running_0
- * Resource action: A               start on lxc1
+ * Resource action: A               stop on 18node1
  * Resource action: B               start on 18node3
  * Resource action: lxc1            monitor=30000 on 18node1
+ * Pseudo action:   all_stopped
  * Resource action: M               monitor=10000 on lxc1
- * Resource action: A               monitor=10000 on lxc1
+ * Resource action: A               start on lxc1
  * Resource action: B               monitor=10000 on 18node3
+ * Resource action: A               monitor=10000 on lxc1
 
 Revised cluster status:
 Online: [ 18node1 18node2 18node3 ]
diff --git a/pengine/test10/whitebox-stop.dot b/pengine/test10/whitebox-stop.dot
index 9900483..0ecdcba 100644
--- a/pengine/test10/whitebox-stop.dot
+++ b/pengine/test10/whitebox-stop.dot
@@ -1,4 +1,8 @@
 digraph "g" {
+"A_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
+"B_monitor_0 lxc2" -> "B_start_0 lxc2" [ style = bold]
+"B_monitor_0 lxc2" -> "B_stop_0 lxc1" [ style = bold]
+"B_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
 "B_monitor_10000 lxc2" [ style=bold color="green" fontcolor="black"]
 "B_start_0 lxc2" -> "B_monitor_10000 lxc2" [ style = bold]
 "B_start_0 lxc2" [ style=bold color="green" fontcolor="black"]
@@ -6,6 +10,7 @@ digraph "g" {
 "B_stop_0 lxc1" -> "all_stopped" [ style = bold]
 "B_stop_0 lxc1" -> "lxc1_stop_0 18node2" [ style = bold]
 "B_stop_0 lxc1" [ style=bold color="green" fontcolor="black"]
+"D_monitor_0 lxc2" [ style=bold color="green" fontcolor="black"]
 "M-clone_stop_0" -> "M-clone_stopped_0" [ style = bold]
 "M-clone_stop_0" -> "M_stop_0 lxc1" [ style = bold]
 "M-clone_stop_0" [ style=bold color="green" fontcolor="orange"]
diff --git a/pengine/test10/whitebox-stop.exp b/pengine/test10/whitebox-stop.exp
index 354b6d4..84a5288 100644
--- a/pengine/test10/whitebox-stop.exp
+++ b/pengine/test10/whitebox-stop.exp
@@ -1,48 +1,48 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="13" operation="stop" operation_key="container1_stop_0" on_node="18node2" on_node_uuid="2">
+      <rsc_op id="16" operation="stop" operation_key="container1_stop_0" on_node="18node2" on_node_uuid="2">
         <primitive id="container1" class="ocf" provider="heartbeat" type="VirtualDomain"/>
         <attributes CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="2" CRM_meta_remote_node="lxc1" CRM_meta_timeout="20000" config="/home/dvossel/virtual_machines/lxc/lxc1.xml"  force_stop="true" hypervisor="lxc:///"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="40" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="43" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="26" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
+      <rsc_op id="29" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="M" long-id="M:4" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_clone="4" CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="M-clone_stop_0"/>
+        <pseudo_event id="32" operation="stop" operation_key="M-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2" priority="1000000">
     <action_set>
-      <pseudo_event id="30" operation="stopped" operation_key="M-clone_stopped_0">
+      <pseudo_event id="33" operation="stopped" operation_key="M-clone_stopped_0">
         <attributes CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="26" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="29" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="stop" operation_key="M-clone_stop_0"/>
+        <pseudo_event id="32" operation="stop" operation_key="M-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="29" operation="stop" operation_key="M-clone_stop_0">
+      <pseudo_event id="32" operation="stop" operation_key="M-clone_stop_0">
         <attributes CRM_meta_clone_max="5" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -50,42 +50,76 @@
   </synapse>
   <synapse id="4">
     <action_set>
-      <rsc_op id="35" operation="monitor" operation_key="B_monitor_10000" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+      <rsc_op id="13" operation="monitor" operation_key="A_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+        <primitive id="A" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="5">
+    <action_set>
+      <rsc_op id="38" operation="monitor" operation_key="B_monitor_10000" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="34" operation="start" operation_key="B_start_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
+        <rsc_op id="37" operation="start" operation_key="B_start_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="5">
+  <synapse id="6">
     <action_set>
-      <rsc_op id="34" operation="start" operation_key="B_start_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+      <rsc_op id="37" operation="start" operation_key="B_start_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="33" operation="stop" operation_key="B_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="14" operation="monitor" operation_key="B_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="36" operation="stop" operation_key="B_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="6">
+  <synapse id="7">
     <action_set>
-      <rsc_op id="33" operation="stop" operation_key="B_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
+      <rsc_op id="36" operation="stop" operation_key="B_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2">
         <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_on_node="lxc1" CRM_meta_on_node_uuid="lxc1" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="14" operation="monitor" operation_key="B_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="8">
+    <action_set>
+      <rsc_op id="14" operation="monitor" operation_key="B_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+        <primitive id="B" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
     <inputs/>
   </synapse>
-  <synapse id="7">
+  <synapse id="9">
     <action_set>
-      <rsc_op id="40" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2">
+      <rsc_op id="15" operation="monitor" operation_key="D_monitor_0" on_node="lxc2" on_node_uuid="lxc2" router_node="18node2">
+        <primitive id="D" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="lxc2" CRM_meta_on_node_uuid="lxc2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18node2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="10">
+    <action_set>
+      <rsc_op id="43" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2">
         <primitive id="lxc1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container1" CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" />
         <downed>
@@ -95,14 +129,14 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="26" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="29" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
       <trigger>
-        <rsc_op id="33" operation="stop" operation_key="B_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="36" operation="stop" operation_key="B_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="8">
+  <synapse id="11">
     <action_set>
       <pseudo_event id="12" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -110,16 +144,16 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="13" operation="stop" operation_key="container1_stop_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="16" operation="stop" operation_key="container1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="26" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="29" operation="stop" operation_key="M_stop_0" internal_operation_key="M:4_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
       <trigger>
-        <rsc_op id="33" operation="stop" operation_key="B_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
+        <rsc_op id="36" operation="stop" operation_key="B_stop_0" on_node="lxc1" on_node_uuid="lxc1" router_node="18node2"/>
       </trigger>
       <trigger>
-        <rsc_op id="40" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
+        <rsc_op id="43" operation="stop" operation_key="lxc1_stop_0" on_node="18node2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/whitebox-stop.summary b/pengine/test10/whitebox-stop.summary
index 9b15ea0..44e570f 100644
--- a/pengine/test10/whitebox-stop.summary
+++ b/pengine/test10/whitebox-stop.summary
@@ -22,14 +22,17 @@ Transition Summary:
 
 Executing cluster transition:
  * Pseudo action:   M-clone_stop_0
- * Resource action: B               stop on lxc1
+ * Resource action: A               monitor on lxc2
+ * Resource action: B               monitor on lxc2
+ * Resource action: D               monitor on lxc2
  * Resource action: M               stop on lxc1
  * Pseudo action:   M-clone_stopped_0
- * Resource action: B               start on lxc2
+ * Resource action: B               stop on lxc1
  * Resource action: lxc1            stop on 18node2
  * Resource action: container1      stop on 18node2
- * Resource action: B               monitor=10000 on lxc2
+ * Resource action: B               start on lxc2
  * Pseudo action:   all_stopped
+ * Resource action: B               monitor=10000 on lxc2
 
 Revised cluster status:
 Online: [ 18node1 18node2 18node3 ]
diff --git a/pengine/test10/whitebox-unexpectedly-running.dot b/pengine/test10/whitebox-unexpectedly-running.dot
index 0e2e5bb..fa1171e 100644
--- a/pengine/test10/whitebox-unexpectedly-running.dot
+++ b/pengine/test10/whitebox-unexpectedly-running.dot
@@ -1,20 +1,26 @@
  digraph "g" {
+"FAKE-crashed_monitor_60000 18builder" [ style=bold color="green" fontcolor="black"]
+"FAKE-crashed_start_0 18builder" -> "FAKE-crashed_monitor_60000 18builder" [ style = bold]
+"FAKE-crashed_start_0 18builder" -> "remote2_start_0 18builder" [ style = bold]
+"FAKE-crashed_start_0 18builder" [ style=bold color="green" fontcolor="black"]
+"FAKE-crashed_stop_0 18builder" -> "FAKE-crashed_start_0 18builder" [ style = bold]
+"FAKE-crashed_stop_0 18builder" -> "all_stopped" [ style = bold]
+"FAKE-crashed_stop_0 18builder" -> "stonith 'reboot' remote2" [ style = bold]
+"FAKE-crashed_stop_0 18builder" [ style=bold color="green" fontcolor="black"]
 "FAKE_monitor_60000 18builder" [ style=bold color="green" fontcolor="black"]
-"FAKE_start_0 18builder" -> "FAKE_monitor_60000 18builder" [ style = bold]
-"FAKE_start_0 18builder" -> "remote1_start_0 18builder" [ style = bold]
-"FAKE_start_0 18builder" [ style=bold color="green" fontcolor="black"]
-"FAKE_stop_0 18builder" -> "FAKE_start_0 18builder" [ style = bold]
-"FAKE_stop_0 18builder" -> "all_stopped" [ style = bold]
-"FAKE_stop_0 18builder" -> "stonith 'reboot' remote1" [ style = bold]
-"FAKE_stop_0 18builder" [ style=bold color="green" fontcolor="black"]
 "all_stopped" [ style=bold color="green" fontcolor="orange"]
 "remote1_monitor_0 18builder" -> "remote1_start_0 18builder" [ style = bold]
 "remote1_monitor_0 18builder" [ style=bold color="green" fontcolor="black"]
 "remote1_monitor_30000 18builder" [ style=bold color="green" fontcolor="black"]
 "remote1_start_0 18builder" -> "remote1_monitor_30000 18builder" [ style = bold]
 "remote1_start_0 18builder" [ style=bold color="green" fontcolor="black"]
-"stonith 'reboot' remote1" -> "stonith_complete" [ style = bold]
-"stonith 'reboot' remote1" [ style=bold color="green" fontcolor="orange"]
+"remote2_monitor_0 18builder" -> "remote2_start_0 18builder" [ style = bold]
+"remote2_monitor_0 18builder" [ style=bold color="green" fontcolor="black"]
+"remote2_monitor_30000 18builder" [ style=bold color="green" fontcolor="black"]
+"remote2_start_0 18builder" -> "remote2_monitor_30000 18builder" [ style = bold]
+"remote2_start_0 18builder" [ style=bold color="green" fontcolor="black"]
+"stonith 'reboot' remote2" -> "stonith_complete" [ style = bold]
+"stonith 'reboot' remote2" [ style=bold color="green" fontcolor="orange"]
 "stonith_complete" -> "all_stopped" [ style = bold]
 "stonith_complete" [ style=bold color="green" fontcolor="orange"]
 }
diff --git a/pengine/test10/whitebox-unexpectedly-running.exp b/pengine/test10/whitebox-unexpectedly-running.exp
index a0e5cae..c4e13b9 100644
--- a/pengine/test10/whitebox-unexpectedly-running.exp
+++ b/pengine/test10/whitebox-unexpectedly-running.exp
@@ -1,116 +1,160 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="5" operation="monitor" operation_key="FAKE_monitor_60000" on_node="18builder" on_node_uuid="5">
+      <rsc_op id="7" operation="monitor" operation_key="FAKE_monitor_60000" on_node="18builder" on_node_uuid="5">
         <primitive id="FAKE" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_remote_node="remote1" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="1">
+    <action_set>
+      <rsc_op id="9" operation="monitor" operation_key="FAKE-crashed_monitor_60000" on_node="18builder" on_node_uuid="5">
+        <primitive id="FAKE-crashed" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_remote_node="remote2" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="start" operation_key="FAKE_start_0" on_node="18builder" on_node_uuid="5"/>
+        <rsc_op id="8" operation="start" operation_key="FAKE-crashed_start_0" on_node="18builder" on_node_uuid="5"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="1">
+  <synapse id="2">
     <action_set>
-      <rsc_op id="4" operation="start" operation_key="FAKE_start_0" on_node="18builder" on_node_uuid="5">
-        <primitive id="FAKE" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_remote_node="remote1" CRM_meta_timeout="20000" />
+      <rsc_op id="8" operation="start" operation_key="FAKE-crashed_start_0" on_node="18builder" on_node_uuid="5">
+        <primitive id="FAKE-crashed" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_remote_node="remote2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="3" operation="stop" operation_key="FAKE_stop_0" on_node="18builder" on_node_uuid="5"/>
+        <rsc_op id="1" operation="stop" operation_key="FAKE-crashed_stop_0" on_node="18builder" on_node_uuid="5"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="2">
+  <synapse id="3">
     <action_set>
-      <rsc_op id="3" operation="stop" operation_key="FAKE_stop_0" on_node="18builder" on_node_uuid="5">
-        <primitive id="FAKE" class="ocf" provider="pacemaker" type="Dummy"/>
-        <attributes CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_remote_node="remote1" CRM_meta_timeout="20000" />
+      <rsc_op id="1" operation="stop" operation_key="FAKE-crashed_stop_0" on_node="18builder" on_node_uuid="5">
+        <primitive id="FAKE-crashed" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_remote_node="remote2" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="3">
+  <synapse id="4">
     <action_set>
-      <rsc_op id="7" operation="monitor" operation_key="remote1_monitor_30000" on_node="18builder" on_node_uuid="5">
+      <rsc_op id="11" operation="monitor" operation_key="remote1_monitor_30000" on_node="18builder" on_node_uuid="5">
         <primitive id="remote1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="FAKE" CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="6" operation="start" operation_key="remote1_start_0" on_node="18builder" on_node_uuid="5"/>
+        <rsc_op id="10" operation="start" operation_key="remote1_start_0" on_node="18builder" on_node_uuid="5"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="4">
+  <synapse id="5">
     <action_set>
-      <rsc_op id="6" operation="start" operation_key="remote1_start_0" on_node="18builder" on_node_uuid="5">
+      <rsc_op id="10" operation="start" operation_key="remote1_start_0" on_node="18builder" on_node_uuid="5">
         <primitive id="remote1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="FAKE" CRM_meta_name="start" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_timeout="60000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="2" operation="monitor" operation_key="remote1_monitor_0" on_node="18builder" on_node_uuid="5"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="4" operation="start" operation_key="FAKE_start_0" on_node="18builder" on_node_uuid="5"/>
+        <rsc_op id="3" operation="monitor" operation_key="remote1_monitor_0" on_node="18builder" on_node_uuid="5"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="5">
+  <synapse id="6">
     <action_set>
-      <rsc_op id="2" operation="monitor" operation_key="remote1_monitor_0" on_node="18builder" on_node_uuid="5">
+      <rsc_op id="3" operation="monitor" operation_key="remote1_monitor_0" on_node="18builder" on_node_uuid="5">
         <primitive id="remote1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="FAKE" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="6">
+  <synapse id="7">
+    <action_set>
+      <rsc_op id="13" operation="monitor" operation_key="remote2_monitor_30000" on_node="18builder" on_node_uuid="5">
+        <primitive id="remote2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="FAKE-crashed" CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_timeout="30000" />
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="12" operation="start" operation_key="remote2_start_0" on_node="18builder" on_node_uuid="5"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="8">
+    <action_set>
+      <rsc_op id="12" operation="start" operation_key="remote2_start_0" on_node="18builder" on_node_uuid="5">
+        <primitive id="remote2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="FAKE-crashed" CRM_meta_name="start" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_timeout="60000" />
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="4" operation="monitor" operation_key="remote2_monitor_0" on_node="18builder" on_node_uuid="5"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="8" operation="start" operation_key="FAKE-crashed_start_0" on_node="18builder" on_node_uuid="5"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="9">
+    <action_set>
+      <rsc_op id="4" operation="monitor" operation_key="remote2_monitor_0" on_node="18builder" on_node_uuid="5">
+        <primitive id="remote2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="FAKE-crashed" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000" />
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="10">
     <action_set>
-      <pseudo_event id="9" operation="stonith" operation_key="stonith-remote1-reboot" on_node="remote1" on_node_uuid="remote1">
-        <attributes CRM_meta_on_node="remote1" CRM_meta_on_node_uuid="remote1" CRM_meta_stonith_action="reboot" />
+      <pseudo_event id="15" operation="stonith" operation_key="stonith-remote2-reboot" on_node="remote2" on_node_uuid="remote2">
+        <attributes CRM_meta_on_node="remote2" CRM_meta_on_node_uuid="remote2" CRM_meta_stonith_action="reboot" />
         <downed>
-          <node id="remote1"/>
+          <node id="remote2"/>
         </downed>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="3" operation="stop" operation_key="FAKE_stop_0" on_node="18builder" on_node_uuid="5"/>
+        <rsc_op id="1" operation="stop" operation_key="FAKE-crashed_stop_0" on_node="18builder" on_node_uuid="5"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="7">
+  <synapse id="11">
     <action_set>
-      <pseudo_event id="8" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="14" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="9" operation="stonith" operation_key="stonith-remote1-reboot" on_node="remote1" on_node_uuid="remote1"/>
+        <pseudo_event id="15" operation="stonith" operation_key="stonith-remote2-reboot" on_node="remote2" on_node_uuid="remote2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="8">
+  <synapse id="12">
     <action_set>
-      <pseudo_event id="1" operation="all_stopped" operation_key="all_stopped">
+      <pseudo_event id="2" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="3" operation="stop" operation_key="FAKE_stop_0" on_node="18builder" on_node_uuid="5"/>
+        <rsc_op id="1" operation="stop" operation_key="FAKE-crashed_stop_0" on_node="18builder" on_node_uuid="5"/>
       </trigger>
       <trigger>
-        <pseudo_event id="8" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="14" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/whitebox-unexpectedly-running.scores b/pengine/test10/whitebox-unexpectedly-running.scores
index 7f8a1d9..45e1d39 100644
--- a/pengine/test10/whitebox-unexpectedly-running.scores
+++ b/pengine/test10/whitebox-unexpectedly-running.scores
@@ -1,5 +1,13 @@
 Allocation scores:
 native_color: FAKE allocation score on 18builder: 0
 native_color: FAKE allocation score on remote1: -INFINITY
+native_color: FAKE allocation score on remote2: -INFINITY
+native_color: FAKE-crashed allocation score on 18builder: 0
+native_color: FAKE-crashed allocation score on remote1: -INFINITY
+native_color: FAKE-crashed allocation score on remote2: -INFINITY
 native_color: remote1 allocation score on 18builder: 0
 native_color: remote1 allocation score on remote1: -INFINITY
+native_color: remote1 allocation score on remote2: -INFINITY
+native_color: remote2 allocation score on 18builder: 0
+native_color: remote2 allocation score on remote1: -INFINITY
+native_color: remote2 allocation score on remote2: -INFINITY
diff --git a/pengine/test10/whitebox-unexpectedly-running.summary b/pengine/test10/whitebox-unexpectedly-running.summary
index eef4f63..3e0c898 100644
--- a/pengine/test10/whitebox-unexpectedly-running.summary
+++ b/pengine/test10/whitebox-unexpectedly-running.summary
@@ -2,27 +2,34 @@
 Current cluster status:
 Online: [ 18builder ]
 
- FAKE	(ocf::pacemaker:Dummy):	FAILED 18builder 
+ FAKE	(ocf::pacemaker:Dummy):	Started 18builder
+ FAKE-crashed	(ocf::pacemaker:Dummy):	FAILED 18builder
 
 Transition Summary:
- * Fence (reboot) remote1 (resource: FAKE) 'guest is unclean'
- * Recover    FAKE        ( 18builder )  
+ * Fence (reboot) remote2 (resource: FAKE-crashed) 'guest is unclean'
+ * Recover    FAKE-crashed     ( 18builder )  
  * Start   remote1	(18builder)
+ * Start      remote2          ( 18builder )  
 
 Executing cluster transition:
- * Resource action: FAKE            stop on 18builder
+ * Resource action: FAKE            monitor=60000 on 18builder
+ * Resource action: FAKE-crashed    stop on 18builder
  * Resource action: remote1         monitor on 18builder
- * Pseudo action:   stonith-remote1-reboot on remote1
+ * Resource action: remote2         monitor on 18builder
+ * Pseudo action:   stonith-remote2-reboot on remote2
  * Pseudo action:   stonith_complete
  * Pseudo action:   all_stopped
- * Resource action: FAKE            start on 18builder
+ * Resource action: FAKE-crashed    start on 18builder
  * Resource action: remote1         start on 18builder
- * Resource action: FAKE            monitor=60000 on 18builder
+ * Resource action: remote2         start on 18builder
+ * Resource action: FAKE-crashed    monitor=60000 on 18builder
  * Resource action: remote1         monitor=30000 on 18builder
+ * Resource action: remote2         monitor=30000 on 18builder
 
 Revised cluster status:
 Online: [ 18builder ]
-Containers: [ remote1:FAKE ]
+Containers: [ remote1:FAKE remote2:FAKE-crashed ]
 
  FAKE	(ocf::pacemaker:Dummy):	Started 18builder 
+ FAKE-crashed	(ocf::pacemaker:Dummy):	Started 18builder
 
diff --git a/pengine/test10/whitebox-unexpectedly-running.xml b/pengine/test10/whitebox-unexpectedly-running.xml
index 4ec20c4..638ed1a 100644
--- a/pengine/test10/whitebox-unexpectedly-running.xml
+++ b/pengine/test10/whitebox-unexpectedly-running.xml
@@ -21,6 +21,14 @@
           <nvpair id="FAKE-meta_attributes-remote-node" name="remote-node" value="remote1"/>
         </meta_attributes>
       </primitive>
+      <primitive class="ocf" id="FAKE-crashed" provider="pacemaker" type="Dummy">
+        <operations>
+          <op id="FAKE-crashed-monitor-interval-60s" interval="60s" name="monitor"/>
+        </operations>
+        <meta_attributes id="FAKE-crashed-meta_attributes">
+          <nvpair id="FAKE-crashed-meta_attributes-remote-node" name="remote-node" value="remote2"/>
+        </meta_attributes>
+      </primitive>
     </resources>
     <constraints/>
   </configuration>
@@ -36,6 +44,9 @@
           <lrm_resource id="FAKE" type="Dummy" class="ocf" provider="pacemaker">
             <lrm_rsc_op id="FAKE_last_failure_0" operation_key="FAKE_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="6:12:7:a4f42c3a-abaf-4801-a5c0-5956eecf3e7f" transition-magic="0:0;6:12:7:a4f42c3a-abaf-4801-a5c0-5956eecf3e7f" call-id="28" rc-code="0" op-status="0" interval="0" last-run="1383341551" last-rc-change="1383341551" exec-time="16" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8" op-force-restart=" state  op_sleep " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
           </lrm_resource>
+          <lrm_resource id="FAKE-crashed" type="Dummy" class="ocf" provider="pacemaker">
+            <lrm_rsc_op id="FAKE-crashed_last_failure_0" operation_key="FAKE-crashed_monitor_0" operation="monitor" crm-debug-origin="do_update_resource" crm_feature_set="3.0.7" transition-key="6:12:7:a4f42c3a-abaf-4801-a5c0-5956eecf3e7f" transition-magic="0:0;6:12:7:a4f42c3a-abaf-4801-a5c0-5956eecf3e7f" call-id="28" rc-code="1" op-status="0" interval="0" last-run="1383341551" last-rc-change="1383341551" exec-time="16" queue-time="0" op-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8" op-force-restart=" state  op_sleep " op-restart-digest="f2317cad3d54cec5d7d7aa7d0bf35cf8"/>
+          </lrm_resource>
         </lrm_resources>
       </lrm>
     </node_state>
-- 
1.8.3.1


From 62b9b988123589d590b30c17b0f4cee269cdad70 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Tue, 26 Sep 2017 20:44:34 +1000
Subject: [PATCH 15/21] Fix: PE: Ensure the bundle nodes get set with the
 correct discovery mode

---
 lib/pengine/container.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/lib/pengine/container.c b/lib/pengine/container.c
index a550ff3..1d658e8 100644
--- a/lib/pengine/container.c
+++ b/lib/pengine/container.c
@@ -462,6 +462,9 @@ create_remote_resource(
         tuple->node->weight = 500;
         tuple->node->rsc_discover_mode = discover_exclusive;
 
+        /* Ensure the node shows up as allowed and with the correct discovery set */
+        g_hash_table_insert(tuple->child->allowed_nodes, (gpointer) tuple->node->details->id, node_copy(tuple->node));
+
         if (common_unpack(xml_remote, &tuple->remote, parent, data_set) == FALSE) {
             return FALSE;
         }
-- 
1.8.3.1


From 37b36a1c02b73711c82e90231b00d56e51179a90 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Tue, 26 Sep 2017 20:46:00 +1000
Subject: [PATCH 16/21] Fix: PE: Make assumptions about the state of
 conatinerized resources based ont he container state, not the connection
 resource

---
 pengine/native.c | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

diff --git a/pengine/native.c b/pengine/native.c
index 2e40a4c..06a5c19 100644
--- a/pengine/native.c
+++ b/pengine/native.c
@@ -2847,10 +2847,12 @@ native_create_probe(resource_t * rsc, node_t * node, action_t * complete,
     if (rsc->exclusive_discover || top->exclusive_discover) {
         if (allowed == NULL) {
             /* exclusive discover is enabled and this node is not in the allowed list. */    
+            pe_rsc_trace(rsc, "Skipping probe for %s on node %s, A", rsc->id, node->details->id);
             return FALSE;
         } else if (allowed->rsc_discover_mode != discover_exclusive) {
             /* exclusive discover is enabled and this node is not marked
              * as a node this resource should be discovered on */ 
+            pe_rsc_trace(rsc, "Skipping probe for %s on node %s, B", rsc->id, node->details->id);
             return FALSE;
         }
     }
@@ -2861,16 +2863,18 @@ native_create_probe(resource_t * rsc, node_t * node, action_t * complete,
          * However it wasn't and the node has discovery disabled, so
          * no need to probe for this resource.
          */
+        pe_rsc_trace(rsc, "Skipping probe for %s on node %s, C", rsc->id, node->details->id);
         return FALSE;
     }
 
     if (allowed && allowed->rsc_discover_mode == discover_never) {
         /* this resource is marked as not needing to be discovered on this node */
+        pe_rsc_trace(rsc, "Skipping probe for %s on node %s, discovery mode", rsc->id, node->details->id);
         return FALSE;
     }
 
     if(allowed != NULL && is_container_remote_node(allowed)) {
-        resource_t *remote = allowed->details->remote_rsc;
+        resource_t *remote = allowed->details->remote_rsc->container;
 
         if(remote->role == RSC_ROLE_STOPPED) {
             /* If the container is stopped, then we know anything that
@@ -2900,6 +2904,8 @@ native_create_probe(resource_t * rsc, node_t * node, action_t * complete,
                                     top, generate_op_key(top->id, RSC_START, 0), NULL,
                                     pe_order_optional, data_set);
             }
+            pe_rsc_trace(rsc, "Skipping probe for %s on node %s, %s is stopped",
+                         rsc->id, node->details->id, remote->id);
             return FALSE;
 
             /* Here we really we want to check if remote->stop is required,
@@ -2919,6 +2925,8 @@ native_create_probe(resource_t * rsc, node_t * node, action_t * complete,
             custom_action_order(remote, generate_op_key(remote->id, RSC_STOP, 0), NULL,
                                 top, generate_op_key(top->id, RSC_START, 0), NULL,
                                 pe_order_optional, data_set);
+        pe_rsc_trace(rsc, "Skipping probe for %s on node %s, %s is stopping, restarting or moving",
+                     rsc->id, node->details->id, remote->id);
             return FALSE;
 /*      } else {
  *            The container is running so there is no problem probing it
-- 
1.8.3.1


From f3dcf9364b2bc7753c7683fb95959454da824afc Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Tue, 26 Sep 2017 21:19:17 +1000
Subject: [PATCH 17/21] Test: PE: Make assumptions about the state of
 conatinerized resources based ont he container state, not the connection
 resource

---
 pengine/test10/bundle-nested-colocation.dot        |   9 +
 pengine/test10/bundle-nested-colocation.exp        | 252 +++++++++++--------
 pengine/test10/bundle-nested-colocation.scores     |   6 +-
 pengine/test10/bundle-nested-colocation.summary    |  11 +-
 pengine/test10/bundle-order-fencing.scores         |  12 +-
 pengine/test10/bundle-order-partial-start-2.dot    |   3 +
 pengine/test10/bundle-order-partial-start-2.exp    | 272 +++++++++++----------
 pengine/test10/bundle-order-partial-start-2.scores |   6 +-
 .../test10/bundle-order-partial-start-2.summary    |   3 +-
 pengine/test10/bundle-order-partial-start.dot      |   1 +
 pengine/test10/bundle-order-partial-start.exp      |   3 +
 pengine/test10/bundle-order-partial-start.scores   |   6 +-
 pengine/test10/bundle-order-partial-stop.scores    |   4 +-
 pengine/test10/bundle-order-startup-clone-2.dot    |  18 ++
 pengine/test10/bundle-order-startup-clone-2.exp    |  54 ++++
 pengine/test10/bundle-order-startup-clone-2.scores |  12 +-
 pengine/test10/bundle-order-startup-clone.dot      |   6 +
 pengine/test10/bundle-order-startup-clone.exp      |   9 +
 pengine/test10/bundle-order-startup-clone.scores   |   4 +-
 pengine/test10/bundle-order-startup.dot            |   3 +
 pengine/test10/bundle-order-startup.exp            |  17 +-
 pengine/test10/bundle-order-startup.scores         |   6 +-
 pengine/test10/bundle-order-stop-clone.scores      |  12 +-
 pengine/test10/bundle-order-stop.scores            |   4 +-
 pengine/test10/guest-node-host-dies.dot            |   4 +-
 pengine/test10/guest-node-host-dies.exp            |   4 +-
 pengine/test10/remote-fence-unclean-3.scores       |  12 +-
 pengine/test10/whitebox-asymmetric.dot             |   5 +
 pengine/test10/whitebox-asymmetric.exp             |  55 ++++-
 pengine/test10/whitebox-asymmetric.summary         |   4 +-
 pengine/test10/whitebox-fail3.dot                  |   3 -
 pengine/test10/whitebox-fail3.exp                  |  15 +-
 pengine/test10/whitebox-fail3.summary              |   4 +-
 pengine/test10/whitebox-imply-stop-on-fence.dot    |   2 +-
 pengine/test10/whitebox-imply-stop-on-fence.exp    |   6 +-
 pengine/test10/whitebox-migrate1.dot               |   2 +-
 pengine/test10/whitebox-nested-group.dot           |  21 --
 pengine/test10/whitebox-nested-group.exp           |  66 +----
 pengine/test10/whitebox-nested-group.summary       |  16 +-
 39 files changed, 536 insertions(+), 416 deletions(-)

diff --git a/pengine/test10/bundle-nested-colocation.dot b/pengine/test10/bundle-nested-colocation.dot
index 2a2d71a..1a197c1 100644
--- a/pengine/test10/bundle-nested-colocation.dot
+++ b/pengine/test10/bundle-nested-colocation.dot
@@ -2,16 +2,19 @@ digraph "g" {
 "all_stopped" [ style=bold color="green" fontcolor="orange"]
 "rabbitmq-bundle-0_monitor_60000 overcloud-controller-0" [ style=bold color="green" fontcolor="black"]
 "rabbitmq-bundle-0_start_0 overcloud-controller-0" -> "rabbitmq-bundle-0_monitor_60000 overcloud-controller-0" [ style = bold]
+"rabbitmq-bundle-0_start_0 overcloud-controller-0" -> "rabbitmq:0_monitor_0 rabbitmq-bundle-0" [ style = bold]
 "rabbitmq-bundle-0_start_0 overcloud-controller-0" -> "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style = bold]
 "rabbitmq-bundle-0_start_0 overcloud-controller-0" -> "rabbitmq:0_start_0 rabbitmq-bundle-0" [ style = bold]
 "rabbitmq-bundle-0_start_0 overcloud-controller-0" [ style=bold color="green" fontcolor="black"]
 "rabbitmq-bundle-1_monitor_60000 overcloud-controller-1" [ style=bold color="green" fontcolor="black"]
 "rabbitmq-bundle-1_start_0 overcloud-controller-1" -> "rabbitmq-bundle-1_monitor_60000 overcloud-controller-1" [ style = bold]
+"rabbitmq-bundle-1_start_0 overcloud-controller-1" -> "rabbitmq:1_monitor_0 rabbitmq-bundle-1" [ style = bold]
 "rabbitmq-bundle-1_start_0 overcloud-controller-1" -> "rabbitmq:1_monitor_10000 rabbitmq-bundle-1" [ style = bold]
 "rabbitmq-bundle-1_start_0 overcloud-controller-1" -> "rabbitmq:1_start_0 rabbitmq-bundle-1" [ style = bold]
 "rabbitmq-bundle-1_start_0 overcloud-controller-1" [ style=bold color="green" fontcolor="black"]
 "rabbitmq-bundle-2_monitor_60000 overcloud-controller-2" [ style=bold color="green" fontcolor="black"]
 "rabbitmq-bundle-2_start_0 overcloud-controller-2" -> "rabbitmq-bundle-2_monitor_60000 overcloud-controller-2" [ style = bold]
+"rabbitmq-bundle-2_start_0 overcloud-controller-2" -> "rabbitmq:2_monitor_0 rabbitmq-bundle-2" [ style = bold]
 "rabbitmq-bundle-2_start_0 overcloud-controller-2" -> "rabbitmq:2_monitor_10000 rabbitmq-bundle-2" [ style = bold]
 "rabbitmq-bundle-2_start_0 overcloud-controller-2" -> "rabbitmq:2_start_0 rabbitmq-bundle-2" [ style = bold]
 "rabbitmq-bundle-2_start_0 overcloud-controller-2" [ style=bold color="green" fontcolor="black"]
@@ -70,6 +73,8 @@ digraph "g" {
 "rabbitmq-bundle_start_0" -> "rabbitmq-bundle-docker-1_start_0 overcloud-rabbit-1" [ style = bold]
 "rabbitmq-bundle_start_0" -> "rabbitmq-bundle-docker-2_start_0 overcloud-rabbit-2" [ style = bold]
 "rabbitmq-bundle_start_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq:0_monitor_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_start_0" [ style = bold]
+"rabbitmq:0_monitor_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
 "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
 "rabbitmq:0_post_notify_start_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = bold]
 "rabbitmq:0_post_notify_start_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
@@ -77,6 +82,8 @@ digraph "g" {
 "rabbitmq:0_start_0 rabbitmq-bundle-0" -> "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style = bold]
 "rabbitmq:0_start_0 rabbitmq-bundle-0" -> "rabbitmq:1_start_0 rabbitmq-bundle-1" [ style = bold]
 "rabbitmq:0_start_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
+"rabbitmq:1_monitor_0 rabbitmq-bundle-1" -> "rabbitmq-bundle-clone_start_0" [ style = bold]
+"rabbitmq:1_monitor_0 rabbitmq-bundle-1" [ style=bold color="green" fontcolor="black"]
 "rabbitmq:1_monitor_10000 rabbitmq-bundle-1" [ style=bold color="green" fontcolor="black"]
 "rabbitmq:1_post_notify_start_0 rabbitmq-bundle-1" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = bold]
 "rabbitmq:1_post_notify_start_0 rabbitmq-bundle-1" [ style=bold color="green" fontcolor="black"]
@@ -84,6 +91,8 @@ digraph "g" {
 "rabbitmq:1_start_0 rabbitmq-bundle-1" -> "rabbitmq:1_monitor_10000 rabbitmq-bundle-1" [ style = bold]
 "rabbitmq:1_start_0 rabbitmq-bundle-1" -> "rabbitmq:2_start_0 rabbitmq-bundle-2" [ style = bold]
 "rabbitmq:1_start_0 rabbitmq-bundle-1" [ style=bold color="green" fontcolor="black"]
+"rabbitmq:2_monitor_0 rabbitmq-bundle-2" -> "rabbitmq-bundle-clone_start_0" [ style = bold]
+"rabbitmq:2_monitor_0 rabbitmq-bundle-2" [ style=bold color="green" fontcolor="black"]
 "rabbitmq:2_monitor_10000 rabbitmq-bundle-2" [ style=bold color="green" fontcolor="black"]
 "rabbitmq:2_post_notify_start_0 rabbitmq-bundle-2" -> "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style = bold]
 "rabbitmq:2_post_notify_start_0 rabbitmq-bundle-2" [ style=bold color="green" fontcolor="black"]
diff --git a/pengine/test10/bundle-nested-colocation.exp b/pengine/test10/bundle-nested-colocation.exp
index 916c44b..b91ced5 100644
--- a/pengine/test10/bundle-nested-colocation.exp
+++ b/pengine/test10/bundle-nested-colocation.exp
@@ -1,39 +1,39 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0" priority="1000000">
     <action_set>
-      <rsc_op id="62" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
+      <rsc_op id="65" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="overcloud-rabbit-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="43" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="46" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="34" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
+      <rsc_op id="37" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="overcloud-rabbit-0" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="21" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
+        <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="33" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
+        <rsc_op id="36" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="44" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="47" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="33" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
+      <rsc_op id="36" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="overcloud-rabbit-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
@@ -43,48 +43,61 @@
         <rsc_op id="11" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0"/>
       </trigger>
       <trigger>
-        <rsc_op id="21" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
+        <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="39" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="42" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="3" priority="1000000">
+  <synapse id="3">
     <action_set>
-      <rsc_op id="63" operation="notify" operation_key="rabbitmq:1_post_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
+      <rsc_op id="14" operation="monitor" operation_key="rabbitmq:0_monitor_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
+        <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_op_target_rc="7" CRM_meta_physical_host="overcloud-rabbit-0" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="4" priority="1000000">
+    <action_set>
+      <rsc_op id="66" operation="notify" operation_key="rabbitmq:1_post_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
         <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_physical_host="overcloud-rabbit-1" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="43" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="46" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="4">
+  <synapse id="5">
     <action_set>
-      <rsc_op id="36" operation="monitor" operation_key="rabbitmq:1_monitor_10000" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
+      <rsc_op id="39" operation="monitor" operation_key="rabbitmq:1_monitor_10000" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
         <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_physical_host="overcloud-rabbit-1" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
+        <rsc_op id="27" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
+        <rsc_op id="38" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="44" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="47" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="5">
+  <synapse id="6">
     <action_set>
-      <rsc_op id="35" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
+      <rsc_op id="38" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
         <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_physical_host="overcloud-rabbit-1" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
@@ -94,51 +107,64 @@
         <rsc_op id="12" operation="start" operation_key="rabbitmq-bundle-docker-1_start_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
+        <rsc_op id="27" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="36" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
       </trigger>
       <trigger>
-        <rsc_op id="33" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
+        <pseudo_event id="42" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="7">
+    <action_set>
+      <rsc_op id="15" operation="monitor" operation_key="rabbitmq:1_monitor_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
+        <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_op_target_rc="7" CRM_meta_physical_host="overcloud-rabbit-1" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
       <trigger>
-        <pseudo_event id="39" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <rsc_op id="27" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="6" priority="1000000">
+  <synapse id="8" priority="1000000">
     <action_set>
-      <rsc_op id="64" operation="notify" operation_key="rabbitmq:2_post_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
+      <rsc_op id="67" operation="notify" operation_key="rabbitmq:2_post_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
         <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_physical_host="overcloud-rabbit-2" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="43" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="46" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="7">
+  <synapse id="9">
     <action_set>
-      <rsc_op id="38" operation="monitor" operation_key="rabbitmq:2_monitor_10000" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
+      <rsc_op id="41" operation="monitor" operation_key="rabbitmq:2_monitor_10000" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
         <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_physical_host="overcloud-rabbit-2" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="27" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
+        <rsc_op id="30" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="rabbitmq:2_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
+        <rsc_op id="40" operation="start" operation_key="rabbitmq:2_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="44" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="47" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="8">
+  <synapse id="10">
     <action_set>
-      <rsc_op id="37" operation="start" operation_key="rabbitmq:2_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
+      <rsc_op id="40" operation="start" operation_key="rabbitmq:2_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
         <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_physical_host="overcloud-rabbit-2" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
@@ -148,118 +174,140 @@
         <rsc_op id="13" operation="start" operation_key="rabbitmq-bundle-docker-2_start_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2"/>
       </trigger>
       <trigger>
-        <rsc_op id="27" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
+        <rsc_op id="30" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
+        <rsc_op id="38" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="39" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="42" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="9" priority="1000000">
+  <synapse id="11">
     <action_set>
-      <pseudo_event id="44" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
+      <rsc_op id="16" operation="monitor" operation_key="rabbitmq:2_monitor_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
+        <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
+        <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="overcloud-rabbit-2" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="30" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="12" priority="1000000">
+    <action_set>
+      <pseudo_event id="47" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="43" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="46" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="62" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
+        <rsc_op id="65" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
       </trigger>
       <trigger>
-        <rsc_op id="63" operation="notify" operation_key="rabbitmq:1_post_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
+        <rsc_op id="66" operation="notify" operation_key="rabbitmq:1_post_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="64" operation="notify" operation_key="rabbitmq:2_post_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
+        <rsc_op id="67" operation="notify" operation_key="rabbitmq:2_post_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="10" priority="1000000">
+  <synapse id="13" priority="1000000">
     <action_set>
-      <pseudo_event id="43" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
+      <pseudo_event id="46" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="40" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
+        <pseudo_event id="43" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="42" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="45" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="11">
+  <synapse id="14">
     <action_set>
-      <pseudo_event id="42" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
+      <pseudo_event id="45" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="41" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
+        <pseudo_event id="44" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12">
+  <synapse id="15">
     <action_set>
-      <pseudo_event id="41" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
+      <pseudo_event id="44" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="13" priority="1000000">
+  <synapse id="16" priority="1000000">
     <action_set>
-      <pseudo_event id="40" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
+      <pseudo_event id="43" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="33" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
+        <rsc_op id="36" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
       </trigger>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
+        <rsc_op id="38" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="rabbitmq:2_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
+        <rsc_op id="40" operation="start" operation_key="rabbitmq:2_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="39" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="42" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14">
+  <synapse id="17">
     <action_set>
-      <pseudo_event id="39" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
+      <pseudo_event id="42" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="29" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+        <rsc_op id="14" operation="monitor" operation_key="rabbitmq:0_monitor_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="15" operation="monitor" operation_key="rabbitmq:1_monitor_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="16" operation="monitor" operation_key="rabbitmq:2_monitor_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="42" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="32" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="45" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="18">
     <action_set>
-      <rsc_op id="20" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0">
+      <rsc_op id="23" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0">
         <primitive id="rabbitmq-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="overcloud-rabbit-0" CRM_meta_on_node_uuid="overcloud-rabbit-0" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-0:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="16">
+  <synapse id="19">
     <action_set>
       <rsc_op id="11" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0">
         <primitive id="rabbitmq-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -268,14 +316,14 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="20" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0"/>
+        <rsc_op id="23" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+        <pseudo_event id="32" operation="start" operation_key="rabbitmq-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="17">
+  <synapse id="20">
     <action_set>
       <rsc_op id="7" operation="monitor" operation_key="rabbitmq-bundle-docker-0_monitor_60000" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0">
         <primitive id="rabbitmq-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -288,22 +336,22 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="18">
+  <synapse id="21">
     <action_set>
-      <rsc_op id="22" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_60000" on_node="overcloud-controller-0" on_node_uuid="1">
+      <rsc_op id="25" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_60000" on_node="overcloud-controller-0" on_node_uuid="1">
         <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="overcloud-rabbit-0"  port="3121"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="21" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
+        <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="19">
+  <synapse id="22">
     <action_set>
-      <rsc_op id="21" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1">
+      <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1">
         <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="overcloud-rabbit-0"  port="3121"/>
       </rsc_op>
@@ -314,16 +362,16 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="20">
+  <synapse id="23">
     <action_set>
-      <rsc_op id="23" operation="stop" operation_key="rabbitmq-bundle-docker-1_stop_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1">
+      <rsc_op id="26" operation="stop" operation_key="rabbitmq-bundle-docker-1_stop_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1">
         <primitive id="rabbitmq-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="overcloud-rabbit-1" CRM_meta_on_node_uuid="overcloud-rabbit-1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-1" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-1:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="21">
+  <synapse id="24">
     <action_set>
       <rsc_op id="12" operation="start" operation_key="rabbitmq-bundle-docker-1_start_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1">
         <primitive id="rabbitmq-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
@@ -332,14 +380,14 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="23" operation="stop" operation_key="rabbitmq-bundle-docker-1_stop_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1"/>
+        <rsc_op id="26" operation="stop" operation_key="rabbitmq-bundle-docker-1_stop_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+        <pseudo_event id="32" operation="start" operation_key="rabbitmq-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="22">
+  <synapse id="25">
     <action_set>
       <rsc_op id="8" operation="monitor" operation_key="rabbitmq-bundle-docker-1_monitor_60000" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1">
         <primitive id="rabbitmq-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
@@ -352,22 +400,22 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="23">
+  <synapse id="26">
     <action_set>
-      <rsc_op id="25" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_60000" on_node="overcloud-controller-1" on_node_uuid="2">
+      <rsc_op id="28" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_60000" on_node="overcloud-controller-1" on_node_uuid="2">
         <primitive id="rabbitmq-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="rabbitmq-bundle-docker-1" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="overcloud-controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" addr="overcloud-rabbit-1"  port="3121"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
+        <rsc_op id="27" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="24">
+  <synapse id="27">
     <action_set>
-      <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2">
+      <rsc_op id="27" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2">
         <primitive id="rabbitmq-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="rabbitmq-bundle-docker-1" CRM_meta_on_node="overcloud-controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" addr="overcloud-rabbit-1"  port="3121"/>
       </rsc_op>
@@ -378,16 +426,16 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="25">
+  <synapse id="28">
     <action_set>
-      <rsc_op id="26" operation="stop" operation_key="rabbitmq-bundle-docker-2_stop_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2">
+      <rsc_op id="29" operation="stop" operation_key="rabbitmq-bundle-docker-2_stop_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2">
         <primitive id="rabbitmq-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="overcloud-rabbit-2" CRM_meta_on_node_uuid="overcloud-rabbit-2" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-2" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-2:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="26">
+  <synapse id="29">
     <action_set>
       <rsc_op id="13" operation="start" operation_key="rabbitmq-bundle-docker-2_start_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2">
         <primitive id="rabbitmq-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -396,14 +444,14 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="26" operation="stop" operation_key="rabbitmq-bundle-docker-2_stop_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2"/>
+        <rsc_op id="29" operation="stop" operation_key="rabbitmq-bundle-docker-2_stop_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+        <pseudo_event id="32" operation="start" operation_key="rabbitmq-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="27">
+  <synapse id="30">
     <action_set>
       <rsc_op id="9" operation="monitor" operation_key="rabbitmq-bundle-docker-2_monitor_60000" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2">
         <primitive id="rabbitmq-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -416,22 +464,22 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="28">
+  <synapse id="31">
     <action_set>
-      <rsc_op id="28" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_60000" on_node="overcloud-controller-2" on_node_uuid="3">
+      <rsc_op id="31" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_60000" on_node="overcloud-controller-2" on_node_uuid="3">
         <primitive id="rabbitmq-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="rabbitmq-bundle-docker-2" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="overcloud-controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" addr="overcloud-rabbit-2"  port="3121"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="27" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
+        <rsc_op id="30" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="29">
+  <synapse id="32">
     <action_set>
-      <rsc_op id="27" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3">
+      <rsc_op id="30" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3">
         <primitive id="rabbitmq-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="rabbitmq-bundle-docker-2" CRM_meta_on_node="overcloud-controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" addr="overcloud-rabbit-2"  port="3121"/>
       </rsc_op>
@@ -442,9 +490,9 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="30" priority="1000000">
+  <synapse id="33" priority="1000000">
     <action_set>
-      <pseudo_event id="30" operation="running" operation_key="rabbitmq-bundle_running_0">
+      <pseudo_event id="33" operation="running" operation_key="rabbitmq-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -459,19 +507,19 @@
         <rsc_op id="13" operation="start" operation_key="rabbitmq-bundle-docker-2_start_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="44" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="47" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="31">
+  <synapse id="34">
     <action_set>
-      <pseudo_event id="29" operation="start" operation_key="rabbitmq-bundle_start_0">
+      <pseudo_event id="32" operation="start" operation_key="rabbitmq-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="32">
+  <synapse id="35">
     <action_set>
       <pseudo_event id="10" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -479,13 +527,13 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="20" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0"/>
+        <rsc_op id="23" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0"/>
       </trigger>
       <trigger>
-        <rsc_op id="23" operation="stop" operation_key="rabbitmq-bundle-docker-1_stop_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1"/>
+        <rsc_op id="26" operation="stop" operation_key="rabbitmq-bundle-docker-1_stop_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="26" operation="stop" operation_key="rabbitmq-bundle-docker-2_stop_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2"/>
+        <rsc_op id="29" operation="stop" operation_key="rabbitmq-bundle-docker-2_stop_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/bundle-nested-colocation.scores b/pengine/test10/bundle-nested-colocation.scores
index c79e0ff..83d776d 100644
--- a/pengine/test10/bundle-nested-colocation.scores
+++ b/pengine/test10/bundle-nested-colocation.scores
@@ -201,7 +201,7 @@ container_color: rabbitmq:0 allocation score on overcloud-galera-2: 0
 container_color: rabbitmq:0 allocation score on overcloud-rabbit-0: 0
 container_color: rabbitmq:0 allocation score on overcloud-rabbit-1: 0
 container_color: rabbitmq:0 allocation score on overcloud-rabbit-2: 0
-container_color: rabbitmq:0 allocation score on rabbitmq-bundle-0: -INFINITY
+container_color: rabbitmq:0 allocation score on rabbitmq-bundle-0: 500
 container_color: rabbitmq:0 allocation score on rabbitmq-bundle-1: -INFINITY
 container_color: rabbitmq:0 allocation score on rabbitmq-bundle-2: -INFINITY
 container_color: rabbitmq:1 allocation score on overcloud-controller-0: 0
@@ -214,7 +214,7 @@ container_color: rabbitmq:1 allocation score on overcloud-rabbit-0: 0
 container_color: rabbitmq:1 allocation score on overcloud-rabbit-1: 0
 container_color: rabbitmq:1 allocation score on overcloud-rabbit-2: 0
 container_color: rabbitmq:1 allocation score on rabbitmq-bundle-0: -INFINITY
-container_color: rabbitmq:1 allocation score on rabbitmq-bundle-1: -INFINITY
+container_color: rabbitmq:1 allocation score on rabbitmq-bundle-1: 500
 container_color: rabbitmq:1 allocation score on rabbitmq-bundle-2: -INFINITY
 container_color: rabbitmq:2 allocation score on overcloud-controller-0: 0
 container_color: rabbitmq:2 allocation score on overcloud-controller-1: 0
@@ -227,7 +227,7 @@ container_color: rabbitmq:2 allocation score on overcloud-rabbit-1: 0
 container_color: rabbitmq:2 allocation score on overcloud-rabbit-2: 0
 container_color: rabbitmq:2 allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: rabbitmq:2 allocation score on rabbitmq-bundle-1: -INFINITY
-container_color: rabbitmq:2 allocation score on rabbitmq-bundle-2: -INFINITY
+container_color: rabbitmq:2 allocation score on rabbitmq-bundle-2: 500
 native_color: galera-bundle-docker-0 allocation score on overcloud-controller-0: -INFINITY
 native_color: galera-bundle-docker-0 allocation score on overcloud-controller-1: -INFINITY
 native_color: galera-bundle-docker-0 allocation score on overcloud-controller-2: -INFINITY
diff --git a/pengine/test10/bundle-nested-colocation.summary b/pengine/test10/bundle-nested-colocation.summary
index b2cec51..7c708d2 100644
--- a/pengine/test10/bundle-nested-colocation.summary
+++ b/pengine/test10/bundle-nested-colocation.summary
@@ -35,7 +35,6 @@ Executing cluster transition:
  * Pseudo action:   rabbitmq-bundle_start_0
  * Pseudo action:   all_stopped
  * Pseudo action:   rabbitmq-bundle-clone_confirmed-pre_notify_start_0
- * Pseudo action:   rabbitmq-bundle-clone_start_0
  * Resource action: rabbitmq-bundle-docker-0 start on overcloud-rabbit-0
  * Resource action: rabbitmq-bundle-docker-0 monitor=60000 on overcloud-rabbit-0
  * Resource action: rabbitmq-bundle-0 start on overcloud-controller-0
@@ -45,13 +44,17 @@ Executing cluster transition:
  * Resource action: rabbitmq-bundle-docker-2 start on overcloud-rabbit-2
  * Resource action: rabbitmq-bundle-docker-2 monitor=60000 on overcloud-rabbit-2
  * Resource action: rabbitmq-bundle-2 start on overcloud-controller-2
+ * Resource action: rabbitmq:0      monitor on rabbitmq-bundle-0
+ * Resource action: rabbitmq:1      monitor on rabbitmq-bundle-1
+ * Resource action: rabbitmq:2      monitor on rabbitmq-bundle-2
+ * Pseudo action:   rabbitmq-bundle-clone_start_0
+ * Resource action: rabbitmq-bundle-0 monitor=60000 on overcloud-controller-0
+ * Resource action: rabbitmq-bundle-1 monitor=60000 on overcloud-controller-1
+ * Resource action: rabbitmq-bundle-2 monitor=60000 on overcloud-controller-2
  * Resource action: rabbitmq:0      start on rabbitmq-bundle-0
  * Resource action: rabbitmq:1      start on rabbitmq-bundle-1
  * Resource action: rabbitmq:2      start on rabbitmq-bundle-2
  * Pseudo action:   rabbitmq-bundle-clone_running_0
- * Resource action: rabbitmq-bundle-0 monitor=60000 on overcloud-controller-0
- * Resource action: rabbitmq-bundle-1 monitor=60000 on overcloud-controller-1
- * Resource action: rabbitmq-bundle-2 monitor=60000 on overcloud-controller-2
  * Pseudo action:   rabbitmq-bundle-clone_post_notify_running_0
  * Resource action: rabbitmq:0      notify on rabbitmq-bundle-0
  * Resource action: rabbitmq:1      notify on rabbitmq-bundle-1
diff --git a/pengine/test10/bundle-order-fencing.scores b/pengine/test10/bundle-order-fencing.scores
index 9037624..25c3e79 100644
--- a/pengine/test10/bundle-order-fencing.scores
+++ b/pengine/test10/bundle-order-fencing.scores
@@ -183,7 +183,7 @@ container_color: galera-bundle-master allocation score on rabbitmq-bundle-2: -IN
 container_color: galera:0 allocation score on controller-0: 0
 container_color: galera:0 allocation score on controller-1: 0
 container_color: galera:0 allocation score on controller-2: 0
-container_color: galera:0 allocation score on galera-bundle-0: -INFINITY
+container_color: galera:0 allocation score on galera-bundle-0: INFINITY
 container_color: galera:0 allocation score on galera-bundle-1: -INFINITY
 container_color: galera:0 allocation score on galera-bundle-2: -INFINITY
 container_color: galera:0 allocation score on rabbitmq-bundle-0: -INFINITY
@@ -193,7 +193,7 @@ container_color: galera:1 allocation score on controller-0: 0
 container_color: galera:1 allocation score on controller-1: 0
 container_color: galera:1 allocation score on controller-2: 0
 container_color: galera:1 allocation score on galera-bundle-0: -INFINITY
-container_color: galera:1 allocation score on galera-bundle-1: -INFINITY
+container_color: galera:1 allocation score on galera-bundle-1: INFINITY
 container_color: galera:1 allocation score on galera-bundle-2: -INFINITY
 container_color: galera:1 allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: galera:1 allocation score on rabbitmq-bundle-1: -INFINITY
@@ -203,7 +203,7 @@ container_color: galera:2 allocation score on controller-1: 0
 container_color: galera:2 allocation score on controller-2: 0
 container_color: galera:2 allocation score on galera-bundle-0: -INFINITY
 container_color: galera:2 allocation score on galera-bundle-1: -INFINITY
-container_color: galera:2 allocation score on galera-bundle-2: -INFINITY
+container_color: galera:2 allocation score on galera-bundle-2: INFINITY
 container_color: galera:2 allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: galera:2 allocation score on rabbitmq-bundle-1: -INFINITY
 container_color: galera:2 allocation score on rabbitmq-bundle-2: -INFINITY
@@ -714,7 +714,7 @@ container_color: redis:0 allocation score on galera-bundle-2: -INFINITY
 container_color: redis:0 allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: redis:0 allocation score on rabbitmq-bundle-1: -INFINITY
 container_color: redis:0 allocation score on rabbitmq-bundle-2: -INFINITY
-container_color: redis:0 allocation score on redis-bundle-0: -INFINITY
+container_color: redis:0 allocation score on redis-bundle-0: INFINITY
 container_color: redis:0 allocation score on redis-bundle-1: -INFINITY
 container_color: redis:0 allocation score on redis-bundle-2: -INFINITY
 container_color: redis:1 allocation score on controller-0: 0
@@ -727,7 +727,7 @@ container_color: redis:1 allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: redis:1 allocation score on rabbitmq-bundle-1: -INFINITY
 container_color: redis:1 allocation score on rabbitmq-bundle-2: -INFINITY
 container_color: redis:1 allocation score on redis-bundle-0: -INFINITY
-container_color: redis:1 allocation score on redis-bundle-1: -INFINITY
+container_color: redis:1 allocation score on redis-bundle-1: INFINITY
 container_color: redis:1 allocation score on redis-bundle-2: -INFINITY
 container_color: redis:2 allocation score on controller-0: 0
 container_color: redis:2 allocation score on controller-1: 0
@@ -740,7 +740,7 @@ container_color: redis:2 allocation score on rabbitmq-bundle-1: -INFINITY
 container_color: redis:2 allocation score on rabbitmq-bundle-2: -INFINITY
 container_color: redis:2 allocation score on redis-bundle-0: -INFINITY
 container_color: redis:2 allocation score on redis-bundle-1: -INFINITY
-container_color: redis:2 allocation score on redis-bundle-2: -INFINITY
+container_color: redis:2 allocation score on redis-bundle-2: INFINITY
 galera:0 promotion score on galera-bundle-0: -1
 galera:1 promotion score on galera-bundle-1: 100
 galera:2 promotion score on galera-bundle-2: 100
diff --git a/pengine/test10/bundle-order-partial-start-2.dot b/pengine/test10/bundle-order-partial-start-2.dot
index 163be1f..d6608bb 100644
--- a/pengine/test10/bundle-order-partial-start-2.dot
+++ b/pengine/test10/bundle-order-partial-start-2.dot
@@ -2,6 +2,7 @@ digraph "g" {
 "all_stopped" [ style=bold color="green" fontcolor="orange"]
 "galera-bundle-0_monitor_60000 undercloud" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-0_start_0 undercloud" -> "galera-bundle-0_monitor_60000 undercloud" [ style = bold]
+"galera-bundle-0_start_0 undercloud" -> "galera:0_monitor_0 galera-bundle-0" [ style = bold]
 "galera-bundle-0_start_0 undercloud" -> "galera:0_monitor_20000 galera-bundle-0" [ style = bold]
 "galera-bundle-0_start_0 undercloud" -> "galera:0_monitor_30000 galera-bundle-0" [ style = bold]
 "galera-bundle-0_start_0 undercloud" -> "galera:0_start_0 galera-bundle-0" [ style = bold]
@@ -28,6 +29,8 @@ digraph "g" {
 "galera-bundle_start_0" -> "galera-bundle-docker-0_start_0 undercloud" [ style = bold]
 "galera-bundle_start_0" -> "galera-bundle-master_start_0" [ style = bold]
 "galera-bundle_start_0" [ style=bold color="green" fontcolor="orange"]
+"galera:0_monitor_0 galera-bundle-0" -> "galera-bundle-master_start_0" [ style = bold]
+"galera:0_monitor_0 galera-bundle-0" [ style=bold color="green" fontcolor="black"]
 "galera:0_monitor_20000 galera-bundle-0" [ style=bold color="green" fontcolor="black"]
 "galera:0_monitor_30000 galera-bundle-0" [ style=bold color="green" fontcolor="black"]
 "galera:0_start_0 galera-bundle-0" -> "galera-bundle-master_running_0" [ style = bold]
diff --git a/pengine/test10/bundle-order-partial-start-2.exp b/pengine/test10/bundle-order-partial-start-2.exp
index 087ed6c..d17819c 100644
--- a/pengine/test10/bundle-order-partial-start-2.exp
+++ b/pengine/test10/bundle-order-partial-start-2.exp
@@ -1,49 +1,49 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0" priority="1000000">
     <action_set>
-      <rsc_op id="129" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+      <rsc_op id="130" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="31" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="32" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="26" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+      <rsc_op id="27" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="25" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="26" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="32" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="33" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="25" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+      <rsc_op id="26" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="27" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="28" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="15" operation="monitor" operation_key="rabbitmq:0_monitor_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+      <rsc_op id="16" operation="monitor" operation_key="rabbitmq:0_monitor_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_op_target_rc="7" CRM_meta_physical_host="undercloud" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
@@ -52,49 +52,49 @@
   </synapse>
   <synapse id="4" priority="1000000">
     <action_set>
-      <pseudo_event id="32" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
+      <pseudo_event id="33" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="31" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="32" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="129" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="130" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5" priority="1000000">
     <action_set>
-      <pseudo_event id="31" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
+      <pseudo_event id="32" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="28" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
+        <pseudo_event id="29" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="30" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="31" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="30" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
+      <pseudo_event id="31" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="29" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
+        <pseudo_event id="30" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <pseudo_event id="29" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
+      <pseudo_event id="30" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -102,145 +102,161 @@
   </synapse>
   <synapse id="8" priority="1000000">
     <action_set>
-      <pseudo_event id="28" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
+      <pseudo_event id="29" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="25" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="26" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="27" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="28" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <pseudo_event id="27" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
+      <pseudo_event id="28" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="15" operation="monitor" operation_key="rabbitmq:0_monitor_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="16" operation="monitor" operation_key="rabbitmq:0_monitor_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="21" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+        <pseudo_event id="22" operation="start" operation_key="rabbitmq-bundle_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="30" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="31" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="49" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="50" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="42" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="43" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="47" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="48" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="48" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="49" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="42" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="43" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="47" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="48" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <rsc_op id="47" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="48" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="41" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="42" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="43" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="50" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <pseudo_event id="51" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="13" priority="1000000">
+  <synapse id="13">
     <action_set>
-      <pseudo_event id="51" operation="running" operation_key="galera-bundle-master_running_0">
+      <rsc_op id="15" operation="monitor" operation_key="galera:0_monitor_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+        <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
+        <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_op_target_rc="7" CRM_meta_physical_host="undercloud" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="43" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="14" priority="1000000">
+    <action_set>
+      <pseudo_event id="52" operation="running" operation_key="galera-bundle-master_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="47" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="48" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="50" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <pseudo_event id="51" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14">
+  <synapse id="15">
     <action_set>
-      <pseudo_event id="50" operation="start" operation_key="galera-bundle-master_start_0">
+      <pseudo_event id="51" operation="start" operation_key="galera-bundle-master_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="43" operation="start" operation_key="galera-bundle_start_0"/>
+        <rsc_op id="15" operation="monitor" operation_key="galera:0_monitor_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+      </trigger>
+      <trigger>
+        <pseudo_event id="44" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="16">
     <action_set>
-      <rsc_op id="40" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="41" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="39" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="40" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="43" operation="start" operation_key="galera-bundle_start_0"/>
+        <pseudo_event id="44" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="16">
+  <synapse id="17">
     <action_set>
-      <rsc_op id="39" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="40" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="41" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="42" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="17">
+  <synapse id="18">
     <action_set>
       <rsc_op id="3" operation="monitor" operation_key="galera-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
@@ -249,29 +265,29 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="41" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="18">
+  <synapse id="19">
     <action_set>
-      <rsc_op id="42" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="43" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3123"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="41" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="41" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="42" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="19">
+  <synapse id="20">
     <action_set>
-      <rsc_op id="41" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="42" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3123"/>
         <downed>
@@ -281,7 +297,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="20">
+  <synapse id="21">
     <action_set>
       <rsc_op id="4" operation="monitor" operation_key="galera-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
@@ -290,277 +306,277 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="42" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="43" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="21" priority="1000000">
+  <synapse id="22" priority="1000000">
     <action_set>
-      <rsc_op id="135" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="136" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="90" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+        <pseudo_event id="91" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="22">
+  <synapse id="23">
     <action_set>
-      <rsc_op id="134" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="135" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="88" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+        <pseudo_event id="89" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="23">
+  <synapse id="24">
     <action_set>
-      <rsc_op id="73" operation="monitor" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="74" operation="monitor" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_op_target_rc="8" CRM_meta_physical_host="undercloud" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="72" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="73" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="91" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
+        <pseudo_event id="92" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="24">
+  <synapse id="25">
     <action_set>
-      <rsc_op id="72" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="73" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="86" operation="promote" operation_key="redis-bundle-master_promote_0"/>
+        <pseudo_event id="87" operation="promote" operation_key="redis-bundle-master_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="25" priority="1000000">
+  <synapse id="26" priority="1000000">
     <action_set>
-      <pseudo_event id="91" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0">
+      <pseudo_event id="92" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="90" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+        <pseudo_event id="91" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="135" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="136" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="26" priority="1000000">
+  <synapse id="27" priority="1000000">
     <action_set>
-      <pseudo_event id="90" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0">
+      <pseudo_event id="91" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="87" operation="promoted" operation_key="redis-bundle-master_promoted_0"/>
+        <pseudo_event id="88" operation="promoted" operation_key="redis-bundle-master_promoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="89" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+        <pseudo_event id="90" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="27">
+  <synapse id="28">
     <action_set>
-      <pseudo_event id="89" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0">
+      <pseudo_event id="90" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="88" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+        <pseudo_event id="89" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="134" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="135" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="28">
+  <synapse id="29">
     <action_set>
-      <pseudo_event id="88" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0">
+      <pseudo_event id="89" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="29" priority="1000000">
+  <synapse id="30" priority="1000000">
     <action_set>
-      <pseudo_event id="87" operation="promoted" operation_key="redis-bundle-master_promoted_0">
+      <pseudo_event id="88" operation="promoted" operation_key="redis-bundle-master_promoted_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="72" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="73" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="30">
+  <synapse id="31">
     <action_set>
-      <pseudo_event id="86" operation="promote" operation_key="redis-bundle-master_promote_0">
+      <pseudo_event id="87" operation="promote" operation_key="redis-bundle-master_promote_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="89" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+        <pseudo_event id="90" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="98" operation="promote" operation_key="redis-bundle_promote_0"/>
+        <pseudo_event id="99" operation="promote" operation_key="redis-bundle_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="31">
+  <synapse id="32">
     <action_set>
-      <rsc_op id="115" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="116" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="114" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="115" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="32">
+  <synapse id="33">
     <action_set>
-      <rsc_op id="114" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="115" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="16" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="17" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="116" operation="start" operation_key="haproxy-bundle_start_0"/>
+        <pseudo_event id="117" operation="start" operation_key="haproxy-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="33">
+  <synapse id="34">
     <action_set>
-      <rsc_op id="16" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="17" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="34" priority="1000000">
+  <synapse id="35" priority="1000000">
     <action_set>
-      <pseudo_event id="117" operation="running" operation_key="haproxy-bundle_running_0">
+      <pseudo_event id="118" operation="running" operation_key="haproxy-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="114" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="115" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="35">
+  <synapse id="36">
     <action_set>
-      <pseudo_event id="116" operation="start" operation_key="haproxy-bundle_start_0">
+      <pseudo_event id="117" operation="start" operation_key="haproxy-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="36" priority="1000000">
+  <synapse id="37" priority="1000000">
     <action_set>
-      <pseudo_event id="99" operation="promoted" operation_key="redis-bundle_promoted_0">
+      <pseudo_event id="100" operation="promoted" operation_key="redis-bundle_promoted_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="91" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
+        <pseudo_event id="92" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="37">
+  <synapse id="38">
     <action_set>
-      <pseudo_event id="98" operation="promote" operation_key="redis-bundle_promote_0">
+      <pseudo_event id="99" operation="promote" operation_key="redis-bundle_promote_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="38" priority="1000000">
+  <synapse id="39" priority="1000000">
     <action_set>
-      <pseudo_event id="44" operation="running" operation_key="galera-bundle_running_0">
+      <pseudo_event id="45" operation="running" operation_key="galera-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="41" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="51" operation="running" operation_key="galera-bundle-master_running_0"/>
+        <pseudo_event id="52" operation="running" operation_key="galera-bundle-master_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="39">
+  <synapse id="40">
     <action_set>
-      <pseudo_event id="43" operation="start" operation_key="galera-bundle_start_0">
+      <pseudo_event id="44" operation="start" operation_key="galera-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="22" operation="running" operation_key="rabbitmq-bundle_running_0"/>
+        <pseudo_event id="23" operation="running" operation_key="rabbitmq-bundle_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="99" operation="promoted" operation_key="redis-bundle_promoted_0"/>
+        <pseudo_event id="100" operation="promoted" operation_key="redis-bundle_promoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="117" operation="running" operation_key="haproxy-bundle_running_0"/>
+        <pseudo_event id="118" operation="running" operation_key="haproxy-bundle_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="40" priority="1000000">
+  <synapse id="41" priority="1000000">
     <action_set>
-      <pseudo_event id="22" operation="running" operation_key="rabbitmq-bundle_running_0">
+      <pseudo_event id="23" operation="running" operation_key="rabbitmq-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="32" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="33" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="41">
+  <synapse id="42">
     <action_set>
-      <pseudo_event id="21" operation="start" operation_key="rabbitmq-bundle_start_0">
+      <pseudo_event id="22" operation="start" operation_key="rabbitmq-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="42">
+  <synapse id="43">
     <action_set>
       <pseudo_event id="14" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -568,10 +584,10 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="39" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="40" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="41" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="42" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/bundle-order-partial-start-2.scores b/pengine/test10/bundle-order-partial-start-2.scores
index f5e86de..b4a441d 100644
--- a/pengine/test10/bundle-order-partial-start-2.scores
+++ b/pengine/test10/bundle-order-partial-start-2.scores
@@ -29,7 +29,7 @@ container_color: galera-bundle-docker-0 allocation score on undercloud: INFINITY
 container_color: galera-bundle-master allocation score on galera-bundle-0: -INFINITY
 container_color: galera-bundle-master allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: galera-bundle-master allocation score on undercloud: 0
-container_color: galera:0 allocation score on galera-bundle-0: -INFINITY
+container_color: galera:0 allocation score on galera-bundle-0: 500
 container_color: galera:0 allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: galera:0 allocation score on undercloud: 0
 container_color: haproxy-bundle allocation score on galera-bundle-0: -INFINITY
@@ -112,7 +112,7 @@ container_color: rabbitmq-bundle-clone allocation score on rabbitmq-bundle-0: 0
 container_color: rabbitmq-bundle-clone allocation score on undercloud: 0
 container_color: rabbitmq-bundle-docker-0 allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: rabbitmq-bundle-docker-0 allocation score on undercloud: INFINITY
-container_color: rabbitmq:0 allocation score on rabbitmq-bundle-0: 0
+container_color: rabbitmq:0 allocation score on rabbitmq-bundle-0: 500
 container_color: rabbitmq:0 allocation score on undercloud: 0
 container_color: redis-bundle allocation score on galera-bundle-0: -INFINITY
 container_color: redis-bundle allocation score on rabbitmq-bundle-0: -INFINITY
@@ -132,7 +132,7 @@ container_color: redis-bundle-master allocation score on redis-bundle-0: -INFINI
 container_color: redis-bundle-master allocation score on undercloud: 0
 container_color: redis:0 allocation score on galera-bundle-0: -INFINITY
 container_color: redis:0 allocation score on rabbitmq-bundle-0: -INFINITY
-container_color: redis:0 allocation score on redis-bundle-0: -INFINITY
+container_color: redis:0 allocation score on redis-bundle-0: INFINITY
 container_color: redis:0 allocation score on undercloud: 0
 galera:0 promotion score on galera-bundle-0: -1
 native_color: galera-bundle-0 allocation score on galera-bundle-0: -INFINITY
diff --git a/pengine/test10/bundle-order-partial-start-2.summary b/pengine/test10/bundle-order-partial-start-2.summary
index 50933a2..f9748d2 100644
--- a/pengine/test10/bundle-order-partial-start-2.summary
+++ b/pengine/test10/bundle-order-partial-start-2.summary
@@ -62,11 +62,12 @@ Executing cluster transition:
  * Resource action: rabbitmq:0      monitor=10000 on rabbitmq-bundle-0
  * Resource action: redis           monitor=20000 on redis-bundle-0
  * Pseudo action:   galera-bundle_start_0
- * Pseudo action:   galera-bundle-master_start_0
  * Resource action: galera-bundle-docker-0 start on undercloud
  * Resource action: galera-bundle-docker-0 monitor=60000 on undercloud
  * Resource action: galera-bundle-0 start on undercloud
  * Resource action: galera-bundle-0 monitor=60000 on undercloud
+ * Resource action: galera:0        monitor on galera-bundle-0
+ * Pseudo action:   galera-bundle-master_start_0
  * Resource action: galera:0        start on galera-bundle-0
  * Pseudo action:   galera-bundle-master_running_0
  * Pseudo action:   galera-bundle_running_0
diff --git a/pengine/test10/bundle-order-partial-start.dot b/pengine/test10/bundle-order-partial-start.dot
index 958e7f4..0e121a4 100644
--- a/pengine/test10/bundle-order-partial-start.dot
+++ b/pengine/test10/bundle-order-partial-start.dot
@@ -6,6 +6,7 @@ digraph "g" {
 "galera-bundle-0_start_0 undercloud" -> "galera:0_start_0 galera-bundle-0" [ style = bold]
 "galera-bundle-0_start_0 undercloud" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-0_monitor_0 undercloud" -> "galera-bundle-docker-0_start_0 undercloud" [ style = bold]
+"galera-bundle-docker-0_monitor_0 undercloud" -> "galera-bundle-master_start_0" [ style = bold]
 "galera-bundle-docker-0_monitor_0 undercloud" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-0_monitor_60000 undercloud" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-0_start_0 undercloud" -> "galera-bundle-0_start_0 undercloud" [ style = bold]
diff --git a/pengine/test10/bundle-order-partial-start.exp b/pengine/test10/bundle-order-partial-start.exp
index 8aad157..98922d5 100644
--- a/pengine/test10/bundle-order-partial-start.exp
+++ b/pengine/test10/bundle-order-partial-start.exp
@@ -207,6 +207,9 @@
     </action_set>
     <inputs>
       <trigger>
+        <rsc_op id="14" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
         <pseudo_event id="42" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
diff --git a/pengine/test10/bundle-order-partial-start.scores b/pengine/test10/bundle-order-partial-start.scores
index ea702d0..1c50e66 100644
--- a/pengine/test10/bundle-order-partial-start.scores
+++ b/pengine/test10/bundle-order-partial-start.scores
@@ -29,7 +29,7 @@ container_color: galera-bundle-docker-0 allocation score on undercloud: 0
 container_color: galera-bundle-master allocation score on galera-bundle-0: -INFINITY
 container_color: galera-bundle-master allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: galera-bundle-master allocation score on undercloud: 0
-container_color: galera:0 allocation score on galera-bundle-0: -INFINITY
+container_color: galera:0 allocation score on galera-bundle-0: 500
 container_color: galera:0 allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: galera:0 allocation score on undercloud: 0
 container_color: haproxy-bundle allocation score on galera-bundle-0: -INFINITY
@@ -112,7 +112,7 @@ container_color: rabbitmq-bundle-clone allocation score on rabbitmq-bundle-0: 0
 container_color: rabbitmq-bundle-clone allocation score on undercloud: 0
 container_color: rabbitmq-bundle-docker-0 allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: rabbitmq-bundle-docker-0 allocation score on undercloud: INFINITY
-container_color: rabbitmq:0 allocation score on rabbitmq-bundle-0: 0
+container_color: rabbitmq:0 allocation score on rabbitmq-bundle-0: 500
 container_color: rabbitmq:0 allocation score on undercloud: 0
 container_color: redis-bundle allocation score on galera-bundle-0: -INFINITY
 container_color: redis-bundle allocation score on rabbitmq-bundle-0: -INFINITY
@@ -132,7 +132,7 @@ container_color: redis-bundle-master allocation score on redis-bundle-0: -INFINI
 container_color: redis-bundle-master allocation score on undercloud: 0
 container_color: redis:0 allocation score on galera-bundle-0: -INFINITY
 container_color: redis:0 allocation score on rabbitmq-bundle-0: -INFINITY
-container_color: redis:0 allocation score on redis-bundle-0: -INFINITY
+container_color: redis:0 allocation score on redis-bundle-0: INFINITY
 container_color: redis:0 allocation score on undercloud: 0
 galera:0 promotion score on galera-bundle-0: -1
 native_color: galera-bundle-0 allocation score on galera-bundle-0: -INFINITY
diff --git a/pengine/test10/bundle-order-partial-stop.scores b/pengine/test10/bundle-order-partial-stop.scores
index a662f42..528842e 100644
--- a/pengine/test10/bundle-order-partial-stop.scores
+++ b/pengine/test10/bundle-order-partial-stop.scores
@@ -29,7 +29,7 @@ container_color: galera-bundle-docker-0 allocation score on undercloud: INFINITY
 container_color: galera-bundle-master allocation score on galera-bundle-0: -INFINITY
 container_color: galera-bundle-master allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: galera-bundle-master allocation score on undercloud: 0
-container_color: galera:0 allocation score on galera-bundle-0: -INFINITY
+container_color: galera:0 allocation score on galera-bundle-0: INFINITY
 container_color: galera:0 allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: galera:0 allocation score on undercloud: 0
 container_color: haproxy-bundle allocation score on galera-bundle-0: -INFINITY
@@ -132,7 +132,7 @@ container_color: redis-bundle-master allocation score on redis-bundle-0: -INFINI
 container_color: redis-bundle-master allocation score on undercloud: 0
 container_color: redis:0 allocation score on galera-bundle-0: -INFINITY
 container_color: redis:0 allocation score on rabbitmq-bundle-0: -INFINITY
-container_color: redis:0 allocation score on redis-bundle-0: -INFINITY
+container_color: redis:0 allocation score on redis-bundle-0: INFINITY
 container_color: redis:0 allocation score on undercloud: 0
 galera:0 promotion score on galera-bundle-0: 100
 native_color: galera-bundle-0 allocation score on galera-bundle-0: -INFINITY
diff --git a/pengine/test10/bundle-order-startup-clone-2.dot b/pengine/test10/bundle-order-startup-clone-2.dot
index 8726909..d0b0f03 100644
--- a/pengine/test10/bundle-order-startup-clone-2.dot
+++ b/pengine/test10/bundle-order-startup-clone-2.dot
@@ -20,14 +20,17 @@ digraph "g" {
 "galera-bundle-docker-0_monitor_0 metal-1" -> "galera-bundle-docker-0_start_0 metal-1" [ style = bold]
 "galera-bundle-docker-0_monitor_0 metal-1" -> "galera-bundle-docker-1_start_0 metal-2" [ style = bold]
 "galera-bundle-docker-0_monitor_0 metal-1" -> "galera-bundle-docker-2_start_0 metal-3" [ style = bold]
+"galera-bundle-docker-0_monitor_0 metal-1" -> "galera-bundle-master_start_0" [ style = bold]
 "galera-bundle-docker-0_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-0_monitor_0 metal-2" -> "galera-bundle-docker-0_start_0 metal-1" [ style = bold]
 "galera-bundle-docker-0_monitor_0 metal-2" -> "galera-bundle-docker-1_start_0 metal-2" [ style = bold]
 "galera-bundle-docker-0_monitor_0 metal-2" -> "galera-bundle-docker-2_start_0 metal-3" [ style = bold]
+"galera-bundle-docker-0_monitor_0 metal-2" -> "galera-bundle-master_start_0" [ style = bold]
 "galera-bundle-docker-0_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-0_monitor_0 metal-3" -> "galera-bundle-docker-0_start_0 metal-1" [ style = bold]
 "galera-bundle-docker-0_monitor_0 metal-3" -> "galera-bundle-docker-1_start_0 metal-2" [ style = bold]
 "galera-bundle-docker-0_monitor_0 metal-3" -> "galera-bundle-docker-2_start_0 metal-3" [ style = bold]
+"galera-bundle-docker-0_monitor_0 metal-3" -> "galera-bundle-master_start_0" [ style = bold]
 "galera-bundle-docker-0_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-0_monitor_60000 metal-1" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-0_start_0 metal-1" -> "galera-bundle-0_start_0 metal-1" [ style = bold]
@@ -38,14 +41,17 @@ digraph "g" {
 "galera-bundle-docker-1_monitor_0 metal-1" -> "galera-bundle-docker-0_start_0 metal-1" [ style = bold]
 "galera-bundle-docker-1_monitor_0 metal-1" -> "galera-bundle-docker-1_start_0 metal-2" [ style = bold]
 "galera-bundle-docker-1_monitor_0 metal-1" -> "galera-bundle-docker-2_start_0 metal-3" [ style = bold]
+"galera-bundle-docker-1_monitor_0 metal-1" -> "galera-bundle-master_start_0" [ style = bold]
 "galera-bundle-docker-1_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-1_monitor_0 metal-2" -> "galera-bundle-docker-0_start_0 metal-1" [ style = bold]
 "galera-bundle-docker-1_monitor_0 metal-2" -> "galera-bundle-docker-1_start_0 metal-2" [ style = bold]
 "galera-bundle-docker-1_monitor_0 metal-2" -> "galera-bundle-docker-2_start_0 metal-3" [ style = bold]
+"galera-bundle-docker-1_monitor_0 metal-2" -> "galera-bundle-master_start_0" [ style = bold]
 "galera-bundle-docker-1_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-1_monitor_0 metal-3" -> "galera-bundle-docker-0_start_0 metal-1" [ style = bold]
 "galera-bundle-docker-1_monitor_0 metal-3" -> "galera-bundle-docker-1_start_0 metal-2" [ style = bold]
 "galera-bundle-docker-1_monitor_0 metal-3" -> "galera-bundle-docker-2_start_0 metal-3" [ style = bold]
+"galera-bundle-docker-1_monitor_0 metal-3" -> "galera-bundle-master_start_0" [ style = bold]
 "galera-bundle-docker-1_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-1_monitor_60000 metal-2" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-1_start_0 metal-2" -> "galera-bundle-1_start_0 metal-2" [ style = bold]
@@ -56,14 +62,17 @@ digraph "g" {
 "galera-bundle-docker-2_monitor_0 metal-1" -> "galera-bundle-docker-0_start_0 metal-1" [ style = bold]
 "galera-bundle-docker-2_monitor_0 metal-1" -> "galera-bundle-docker-1_start_0 metal-2" [ style = bold]
 "galera-bundle-docker-2_monitor_0 metal-1" -> "galera-bundle-docker-2_start_0 metal-3" [ style = bold]
+"galera-bundle-docker-2_monitor_0 metal-1" -> "galera-bundle-master_start_0" [ style = bold]
 "galera-bundle-docker-2_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-2_monitor_0 metal-2" -> "galera-bundle-docker-0_start_0 metal-1" [ style = bold]
 "galera-bundle-docker-2_monitor_0 metal-2" -> "galera-bundle-docker-1_start_0 metal-2" [ style = bold]
 "galera-bundle-docker-2_monitor_0 metal-2" -> "galera-bundle-docker-2_start_0 metal-3" [ style = bold]
+"galera-bundle-docker-2_monitor_0 metal-2" -> "galera-bundle-master_start_0" [ style = bold]
 "galera-bundle-docker-2_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-2_monitor_0 metal-3" -> "galera-bundle-docker-0_start_0 metal-1" [ style = bold]
 "galera-bundle-docker-2_monitor_0 metal-3" -> "galera-bundle-docker-1_start_0 metal-2" [ style = bold]
 "galera-bundle-docker-2_monitor_0 metal-3" -> "galera-bundle-docker-2_start_0 metal-3" [ style = bold]
+"galera-bundle-docker-2_monitor_0 metal-3" -> "galera-bundle-master_start_0" [ style = bold]
 "galera-bundle-docker-2_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-2_monitor_60000 metal-3" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-2_start_0 metal-3" -> "galera-bundle-2_start_0 metal-3" [ style = bold]
@@ -179,14 +188,17 @@ digraph "g" {
 "redis-bundle-docker-0_monitor_0 metal-1" -> "redis-bundle-docker-0_start_0 metal-1" [ style = bold]
 "redis-bundle-docker-0_monitor_0 metal-1" -> "redis-bundle-docker-1_start_0 metal-2" [ style = bold]
 "redis-bundle-docker-0_monitor_0 metal-1" -> "redis-bundle-docker-2_start_0 metal-3" [ style = bold]
+"redis-bundle-docker-0_monitor_0 metal-1" -> "redis-bundle-master_start_0" [ style = bold]
 "redis-bundle-docker-0_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-0_monitor_0 metal-2" -> "redis-bundle-docker-0_start_0 metal-1" [ style = bold]
 "redis-bundle-docker-0_monitor_0 metal-2" -> "redis-bundle-docker-1_start_0 metal-2" [ style = bold]
 "redis-bundle-docker-0_monitor_0 metal-2" -> "redis-bundle-docker-2_start_0 metal-3" [ style = bold]
+"redis-bundle-docker-0_monitor_0 metal-2" -> "redis-bundle-master_start_0" [ style = bold]
 "redis-bundle-docker-0_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-0_monitor_0 metal-3" -> "redis-bundle-docker-0_start_0 metal-1" [ style = bold]
 "redis-bundle-docker-0_monitor_0 metal-3" -> "redis-bundle-docker-1_start_0 metal-2" [ style = bold]
 "redis-bundle-docker-0_monitor_0 metal-3" -> "redis-bundle-docker-2_start_0 metal-3" [ style = bold]
+"redis-bundle-docker-0_monitor_0 metal-3" -> "redis-bundle-master_start_0" [ style = bold]
 "redis-bundle-docker-0_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-0_monitor_60000 metal-1" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-0_start_0 metal-1" -> "redis-bundle-0_start_0 metal-1" [ style = bold]
@@ -198,14 +210,17 @@ digraph "g" {
 "redis-bundle-docker-1_monitor_0 metal-1" -> "redis-bundle-docker-0_start_0 metal-1" [ style = bold]
 "redis-bundle-docker-1_monitor_0 metal-1" -> "redis-bundle-docker-1_start_0 metal-2" [ style = bold]
 "redis-bundle-docker-1_monitor_0 metal-1" -> "redis-bundle-docker-2_start_0 metal-3" [ style = bold]
+"redis-bundle-docker-1_monitor_0 metal-1" -> "redis-bundle-master_start_0" [ style = bold]
 "redis-bundle-docker-1_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-1_monitor_0 metal-2" -> "redis-bundle-docker-0_start_0 metal-1" [ style = bold]
 "redis-bundle-docker-1_monitor_0 metal-2" -> "redis-bundle-docker-1_start_0 metal-2" [ style = bold]
 "redis-bundle-docker-1_monitor_0 metal-2" -> "redis-bundle-docker-2_start_0 metal-3" [ style = bold]
+"redis-bundle-docker-1_monitor_0 metal-2" -> "redis-bundle-master_start_0" [ style = bold]
 "redis-bundle-docker-1_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-1_monitor_0 metal-3" -> "redis-bundle-docker-0_start_0 metal-1" [ style = bold]
 "redis-bundle-docker-1_monitor_0 metal-3" -> "redis-bundle-docker-1_start_0 metal-2" [ style = bold]
 "redis-bundle-docker-1_monitor_0 metal-3" -> "redis-bundle-docker-2_start_0 metal-3" [ style = bold]
+"redis-bundle-docker-1_monitor_0 metal-3" -> "redis-bundle-master_start_0" [ style = bold]
 "redis-bundle-docker-1_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-1_monitor_60000 metal-2" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-1_start_0 metal-2" -> "redis-bundle-1_start_0 metal-2" [ style = bold]
@@ -217,14 +232,17 @@ digraph "g" {
 "redis-bundle-docker-2_monitor_0 metal-1" -> "redis-bundle-docker-0_start_0 metal-1" [ style = bold]
 "redis-bundle-docker-2_monitor_0 metal-1" -> "redis-bundle-docker-1_start_0 metal-2" [ style = bold]
 "redis-bundle-docker-2_monitor_0 metal-1" -> "redis-bundle-docker-2_start_0 metal-3" [ style = bold]
+"redis-bundle-docker-2_monitor_0 metal-1" -> "redis-bundle-master_start_0" [ style = bold]
 "redis-bundle-docker-2_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-2_monitor_0 metal-2" -> "redis-bundle-docker-0_start_0 metal-1" [ style = bold]
 "redis-bundle-docker-2_monitor_0 metal-2" -> "redis-bundle-docker-1_start_0 metal-2" [ style = bold]
 "redis-bundle-docker-2_monitor_0 metal-2" -> "redis-bundle-docker-2_start_0 metal-3" [ style = bold]
+"redis-bundle-docker-2_monitor_0 metal-2" -> "redis-bundle-master_start_0" [ style = bold]
 "redis-bundle-docker-2_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-2_monitor_0 metal-3" -> "redis-bundle-docker-0_start_0 metal-1" [ style = bold]
 "redis-bundle-docker-2_monitor_0 metal-3" -> "redis-bundle-docker-1_start_0 metal-2" [ style = bold]
 "redis-bundle-docker-2_monitor_0 metal-3" -> "redis-bundle-docker-2_start_0 metal-3" [ style = bold]
+"redis-bundle-docker-2_monitor_0 metal-3" -> "redis-bundle-master_start_0" [ style = bold]
 "redis-bundle-docker-2_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-2_monitor_60000 metal-3" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-2_start_0 metal-3" -> "redis-bundle-2_start_0 metal-3" [ style = bold]
diff --git a/pengine/test10/bundle-order-startup-clone-2.exp b/pengine/test10/bundle-order-startup-clone-2.exp
index 7d18d29..b6f90d4 100644
--- a/pengine/test10/bundle-order-startup-clone-2.exp
+++ b/pengine/test10/bundle-order-startup-clone-2.exp
@@ -444,6 +444,33 @@
     </action_set>
     <inputs>
       <trigger>
+        <rsc_op id="3" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="4" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="5" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="13" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="14" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="15" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="23" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="24" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="25" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
         <pseudo_event id="62" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
@@ -1523,6 +1550,33 @@
     </action_set>
     <inputs>
       <trigger>
+        <rsc_op id="9" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="10" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="11" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="19" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="20" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="21" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="29" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="30" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="31" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
         <pseudo_event id="109" operation="start" operation_key="redis-bundle_start_0"/>
       </trigger>
       <trigger>
diff --git a/pengine/test10/bundle-order-startup-clone-2.scores b/pengine/test10/bundle-order-startup-clone-2.scores
index 493cd87..bcc4905 100644
--- a/pengine/test10/bundle-order-startup-clone-2.scores
+++ b/pengine/test10/bundle-order-startup-clone-2.scores
@@ -143,7 +143,7 @@ container_color: galera-bundle-master allocation score on metal-1: 0
 container_color: galera-bundle-master allocation score on metal-2: 0
 container_color: galera-bundle-master allocation score on metal-3: 0
 container_color: galera-bundle-master allocation score on rabbitmq-bundle-0: 0
-container_color: galera:0 allocation score on galera-bundle-0: -INFINITY
+container_color: galera:0 allocation score on galera-bundle-0: 500
 container_color: galera:0 allocation score on galera-bundle-1: -INFINITY
 container_color: galera:0 allocation score on galera-bundle-2: -INFINITY
 container_color: galera:0 allocation score on metal-1: 0
@@ -151,7 +151,7 @@ container_color: galera:0 allocation score on metal-2: 0
 container_color: galera:0 allocation score on metal-3: 0
 container_color: galera:0 allocation score on rabbitmq-bundle-0: 0
 container_color: galera:1 allocation score on galera-bundle-0: -INFINITY
-container_color: galera:1 allocation score on galera-bundle-1: -INFINITY
+container_color: galera:1 allocation score on galera-bundle-1: 500
 container_color: galera:1 allocation score on galera-bundle-2: -INFINITY
 container_color: galera:1 allocation score on metal-1: 0
 container_color: galera:1 allocation score on metal-2: 0
@@ -159,7 +159,7 @@ container_color: galera:1 allocation score on metal-3: 0
 container_color: galera:1 allocation score on rabbitmq-bundle-0: 0
 container_color: galera:2 allocation score on galera-bundle-0: -INFINITY
 container_color: galera:2 allocation score on galera-bundle-1: -INFINITY
-container_color: galera:2 allocation score on galera-bundle-2: -INFINITY
+container_color: galera:2 allocation score on galera-bundle-2: 500
 container_color: galera:2 allocation score on metal-1: 0
 container_color: galera:2 allocation score on metal-2: 0
 container_color: galera:2 allocation score on metal-3: 0
@@ -363,7 +363,7 @@ container_color: redis:0 allocation score on metal-1: 0
 container_color: redis:0 allocation score on metal-2: 0
 container_color: redis:0 allocation score on metal-3: 0
 container_color: redis:0 allocation score on rabbitmq-bundle-0: 0
-container_color: redis:0 allocation score on redis-bundle-0: -INFINITY
+container_color: redis:0 allocation score on redis-bundle-0: 500
 container_color: redis:0 allocation score on redis-bundle-1: -INFINITY
 container_color: redis:0 allocation score on redis-bundle-2: -INFINITY
 container_color: redis:1 allocation score on galera-bundle-0: -INFINITY
@@ -374,7 +374,7 @@ container_color: redis:1 allocation score on metal-2: 0
 container_color: redis:1 allocation score on metal-3: 0
 container_color: redis:1 allocation score on rabbitmq-bundle-0: 0
 container_color: redis:1 allocation score on redis-bundle-0: -INFINITY
-container_color: redis:1 allocation score on redis-bundle-1: -INFINITY
+container_color: redis:1 allocation score on redis-bundle-1: 500
 container_color: redis:1 allocation score on redis-bundle-2: -INFINITY
 container_color: redis:2 allocation score on galera-bundle-0: -INFINITY
 container_color: redis:2 allocation score on galera-bundle-1: -INFINITY
@@ -385,7 +385,7 @@ container_color: redis:2 allocation score on metal-3: 0
 container_color: redis:2 allocation score on rabbitmq-bundle-0: 0
 container_color: redis:2 allocation score on redis-bundle-0: -INFINITY
 container_color: redis:2 allocation score on redis-bundle-1: -INFINITY
-container_color: redis:2 allocation score on redis-bundle-2: -INFINITY
+container_color: redis:2 allocation score on redis-bundle-2: 500
 galera:0 promotion score on galera-bundle-0: -1
 galera:1 promotion score on galera-bundle-1: -1
 galera:2 promotion score on galera-bundle-2: -1
diff --git a/pengine/test10/bundle-order-startup-clone.dot b/pengine/test10/bundle-order-startup-clone.dot
index 219b676..b791c10 100644
--- a/pengine/test10/bundle-order-startup-clone.dot
+++ b/pengine/test10/bundle-order-startup-clone.dot
@@ -6,10 +6,13 @@ digraph "g" {
 "galera-bundle-0_start_0 metal-1" -> "galera:0_start_0 galera-bundle-0" [ style = dashed]
 "galera-bundle-0_start_0 metal-1" [ style=dashed color="red" fontcolor="black"]
 "galera-bundle-docker-0_monitor_0 metal-1" -> "galera-bundle-docker-0_start_0 metal-1" [ style = dashed]
+"galera-bundle-docker-0_monitor_0 metal-1" -> "galera-bundle-master_start_0" [ style = dashed]
 "galera-bundle-docker-0_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-0_monitor_0 metal-2" -> "galera-bundle-docker-0_start_0 metal-1" [ style = dashed]
+"galera-bundle-docker-0_monitor_0 metal-2" -> "galera-bundle-master_start_0" [ style = dashed]
 "galera-bundle-docker-0_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-0_monitor_0 metal-3" -> "galera-bundle-docker-0_start_0 metal-1" [ style = dashed]
+"galera-bundle-docker-0_monitor_0 metal-3" -> "galera-bundle-master_start_0" [ style = dashed]
 "galera-bundle-docker-0_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-0_monitor_60000 metal-1" [ style=dashed color="red" fontcolor="black"]
 "galera-bundle-docker-0_start_0 metal-1" -> "galera-bundle-0_start_0 metal-1" [ style = dashed]
@@ -53,10 +56,13 @@ digraph "g" {
 "redis-bundle-0_start_0 metal-2" -> "redis:0_start_0 redis-bundle-0" [ style = bold]
 "redis-bundle-0_start_0 metal-2" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-0_monitor_0 metal-1" -> "redis-bundle-docker-0_start_0 metal-2" [ style = bold]
+"redis-bundle-docker-0_monitor_0 metal-1" -> "redis-bundle-master_start_0" [ style = bold]
 "redis-bundle-docker-0_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-0_monitor_0 metal-2" -> "redis-bundle-docker-0_start_0 metal-2" [ style = bold]
+"redis-bundle-docker-0_monitor_0 metal-2" -> "redis-bundle-master_start_0" [ style = bold]
 "redis-bundle-docker-0_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-0_monitor_0 metal-3" -> "redis-bundle-docker-0_start_0 metal-2" [ style = bold]
+"redis-bundle-docker-0_monitor_0 metal-3" -> "redis-bundle-master_start_0" [ style = bold]
 "redis-bundle-docker-0_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-0_monitor_60000 metal-2" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-0_start_0 metal-2" -> "redis-bundle-0_start_0 metal-2" [ style = bold]
diff --git a/pengine/test10/bundle-order-startup-clone.exp b/pengine/test10/bundle-order-startup-clone.exp
index 8c8ba6aa..5be495e 100644
--- a/pengine/test10/bundle-order-startup-clone.exp
+++ b/pengine/test10/bundle-order-startup-clone.exp
@@ -258,6 +258,15 @@
     </action_set>
     <inputs>
       <trigger>
+        <rsc_op id="5" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="9" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="13" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
         <pseudo_event id="65" operation="start" operation_key="redis-bundle_start_0"/>
       </trigger>
       <trigger>
diff --git a/pengine/test10/bundle-order-startup-clone.scores b/pengine/test10/bundle-order-startup-clone.scores
index d907861..4361fc4 100644
--- a/pengine/test10/bundle-order-startup-clone.scores
+++ b/pengine/test10/bundle-order-startup-clone.scores
@@ -61,7 +61,7 @@ container_color: galera-bundle-master allocation score on metal-1: 0
 container_color: galera-bundle-master allocation score on metal-2: 0
 container_color: galera-bundle-master allocation score on metal-3: 0
 container_color: galera-bundle-master allocation score on rabbitmq-bundle-0: 0
-container_color: galera:0 allocation score on galera-bundle-0: -INFINITY
+container_color: galera:0 allocation score on galera-bundle-0: 500
 container_color: galera:0 allocation score on metal-1: 0
 container_color: galera:0 allocation score on metal-2: 0
 container_color: galera:0 allocation score on metal-3: 0
@@ -115,7 +115,7 @@ container_color: redis:0 allocation score on metal-1: 0
 container_color: redis:0 allocation score on metal-2: 0
 container_color: redis:0 allocation score on metal-3: 0
 container_color: redis:0 allocation score on rabbitmq-bundle-0: 0
-container_color: redis:0 allocation score on redis-bundle-0: -INFINITY
+container_color: redis:0 allocation score on redis-bundle-0: 500
 galera:0 promotion score on galera-bundle-0: -1
 native_color: galera-bundle-0 allocation score on galera-bundle-0: -INFINITY
 native_color: galera-bundle-0 allocation score on metal-1: 10000
diff --git a/pengine/test10/bundle-order-startup.dot b/pengine/test10/bundle-order-startup.dot
index 3ec10fa..98f1c3c 100644
--- a/pengine/test10/bundle-order-startup.dot
+++ b/pengine/test10/bundle-order-startup.dot
@@ -6,6 +6,7 @@ digraph "g" {
 "galera-bundle-0_start_0 undercloud" -> "galera:0_start_0 galera-bundle-0" [ style = bold]
 "galera-bundle-0_start_0 undercloud" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-0_monitor_0 undercloud" -> "galera-bundle-docker-0_start_0 undercloud" [ style = bold]
+"galera-bundle-docker-0_monitor_0 undercloud" -> "galera-bundle-master_start_0" [ style = bold]
 "galera-bundle-docker-0_monitor_0 undercloud" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-0_monitor_60000 undercloud" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-0_start_0 undercloud" -> "galera-bundle-0_start_0 undercloud" [ style = bold]
@@ -104,6 +105,7 @@ digraph "g" {
 "rabbitmq-bundle-clone_start_0" -> "rabbitmq-bundle-clone_running_0" [ style = bold]
 "rabbitmq-bundle-clone_start_0" -> "rabbitmq:0_start_0 rabbitmq-bundle-0" [ style = bold]
 "rabbitmq-bundle-clone_start_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-docker-0_monitor_0 undercloud" -> "rabbitmq-bundle-clone_start_0" [ style = bold]
 "rabbitmq-bundle-docker-0_monitor_0 undercloud" -> "rabbitmq-bundle-docker-0_start_0 undercloud" [ style = bold]
 "rabbitmq-bundle-docker-0_monitor_0 undercloud" [ style=bold color="green" fontcolor="black"]
 "rabbitmq-bundle-docker-0_monitor_60000 undercloud" [ style=bold color="green" fontcolor="black"]
@@ -129,6 +131,7 @@ digraph "g" {
 "redis-bundle-0_start_0 undercloud" -> "redis:0_start_0 redis-bundle-0" [ style = bold]
 "redis-bundle-0_start_0 undercloud" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-0_monitor_0 undercloud" -> "redis-bundle-docker-0_start_0 undercloud" [ style = bold]
+"redis-bundle-docker-0_monitor_0 undercloud" -> "redis-bundle-master_start_0" [ style = bold]
 "redis-bundle-docker-0_monitor_0 undercloud" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-0_monitor_60000 undercloud" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-0_start_0 undercloud" -> "redis-bundle-0_start_0 undercloud" [ style = bold]
diff --git a/pengine/test10/bundle-order-startup.exp b/pengine/test10/bundle-order-startup.exp
index ec1053c..bcef087 100644
--- a/pengine/test10/bundle-order-startup.exp
+++ b/pengine/test10/bundle-order-startup.exp
@@ -1,7 +1,7 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0" priority="1000000">
     <action_set>
-      <rsc_op id="127" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+      <rsc_op id="126" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
@@ -61,7 +61,7 @@
         <pseudo_event id="27" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="127" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="126" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
@@ -123,6 +123,9 @@
     </action_set>
     <inputs>
       <trigger>
+        <rsc_op id="2" operation="monitor" operation_key="rabbitmq-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
         <pseudo_event id="17" operation="start" operation_key="rabbitmq-bundle_start_0"/>
       </trigger>
       <trigger>
@@ -268,6 +271,9 @@
     </action_set>
     <inputs>
       <trigger>
+        <rsc_op id="3" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
         <pseudo_event id="39" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
@@ -338,7 +344,7 @@
   </synapse>
   <synapse id="24" priority="1000000">
     <action_set>
-      <rsc_op id="128" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="127" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
@@ -417,7 +423,7 @@
         <pseudo_event id="73" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="128" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="127" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
@@ -479,6 +485,9 @@
     </action_set>
     <inputs>
       <trigger>
+        <rsc_op id="4" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
         <pseudo_event id="62" operation="start" operation_key="redis-bundle_start_0"/>
       </trigger>
       <trigger>
diff --git a/pengine/test10/bundle-order-startup.scores b/pengine/test10/bundle-order-startup.scores
index 565b47e..d49dd6e 100644
--- a/pengine/test10/bundle-order-startup.scores
+++ b/pengine/test10/bundle-order-startup.scores
@@ -29,7 +29,7 @@ container_color: galera-bundle-docker-0 allocation score on undercloud: 0
 container_color: galera-bundle-master allocation score on galera-bundle-0: -INFINITY
 container_color: galera-bundle-master allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: galera-bundle-master allocation score on undercloud: 0
-container_color: galera:0 allocation score on galera-bundle-0: -INFINITY
+container_color: galera:0 allocation score on galera-bundle-0: 500
 container_color: galera:0 allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: galera:0 allocation score on undercloud: 0
 container_color: haproxy-bundle allocation score on galera-bundle-0: -INFINITY
@@ -112,7 +112,7 @@ container_color: rabbitmq-bundle-clone allocation score on rabbitmq-bundle-0: 0
 container_color: rabbitmq-bundle-clone allocation score on undercloud: 0
 container_color: rabbitmq-bundle-docker-0 allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: rabbitmq-bundle-docker-0 allocation score on undercloud: 0
-container_color: rabbitmq:0 allocation score on rabbitmq-bundle-0: 0
+container_color: rabbitmq:0 allocation score on rabbitmq-bundle-0: 500
 container_color: rabbitmq:0 allocation score on undercloud: 0
 container_color: redis-bundle allocation score on galera-bundle-0: -INFINITY
 container_color: redis-bundle allocation score on rabbitmq-bundle-0: -INFINITY
@@ -132,7 +132,7 @@ container_color: redis-bundle-master allocation score on redis-bundle-0: -INFINI
 container_color: redis-bundle-master allocation score on undercloud: 0
 container_color: redis:0 allocation score on galera-bundle-0: -INFINITY
 container_color: redis:0 allocation score on rabbitmq-bundle-0: -INFINITY
-container_color: redis:0 allocation score on redis-bundle-0: -INFINITY
+container_color: redis:0 allocation score on redis-bundle-0: 500
 container_color: redis:0 allocation score on undercloud: 0
 galera:0 promotion score on galera-bundle-0: -1
 native_color: galera-bundle-0 allocation score on galera-bundle-0: -INFINITY
diff --git a/pengine/test10/bundle-order-stop-clone.scores b/pengine/test10/bundle-order-stop-clone.scores
index df53f32..f8ec05c 100644
--- a/pengine/test10/bundle-order-stop-clone.scores
+++ b/pengine/test10/bundle-order-stop-clone.scores
@@ -143,7 +143,7 @@ container_color: galera-bundle-master allocation score on metal-1: 0
 container_color: galera-bundle-master allocation score on metal-2: 0
 container_color: galera-bundle-master allocation score on metal-3: 0
 container_color: galera-bundle-master allocation score on rabbitmq-bundle-0: 0
-container_color: galera:0 allocation score on galera-bundle-0: -INFINITY
+container_color: galera:0 allocation score on galera-bundle-0: INFINITY
 container_color: galera:0 allocation score on galera-bundle-1: -INFINITY
 container_color: galera:0 allocation score on galera-bundle-2: -INFINITY
 container_color: galera:0 allocation score on metal-1: 0
@@ -151,7 +151,7 @@ container_color: galera:0 allocation score on metal-2: 0
 container_color: galera:0 allocation score on metal-3: 0
 container_color: galera:0 allocation score on rabbitmq-bundle-0: 0
 container_color: galera:1 allocation score on galera-bundle-0: -INFINITY
-container_color: galera:1 allocation score on galera-bundle-1: -INFINITY
+container_color: galera:1 allocation score on galera-bundle-1: INFINITY
 container_color: galera:1 allocation score on galera-bundle-2: -INFINITY
 container_color: galera:1 allocation score on metal-1: 0
 container_color: galera:1 allocation score on metal-2: 0
@@ -159,7 +159,7 @@ container_color: galera:1 allocation score on metal-3: 0
 container_color: galera:1 allocation score on rabbitmq-bundle-0: 0
 container_color: galera:2 allocation score on galera-bundle-0: -INFINITY
 container_color: galera:2 allocation score on galera-bundle-1: -INFINITY
-container_color: galera:2 allocation score on galera-bundle-2: -INFINITY
+container_color: galera:2 allocation score on galera-bundle-2: INFINITY
 container_color: galera:2 allocation score on metal-1: 0
 container_color: galera:2 allocation score on metal-2: 0
 container_color: galera:2 allocation score on metal-3: 0
@@ -363,7 +363,7 @@ container_color: redis:0 allocation score on metal-1: 0
 container_color: redis:0 allocation score on metal-2: 0
 container_color: redis:0 allocation score on metal-3: 0
 container_color: redis:0 allocation score on rabbitmq-bundle-0: 0
-container_color: redis:0 allocation score on redis-bundle-0: -INFINITY
+container_color: redis:0 allocation score on redis-bundle-0: INFINITY
 container_color: redis:0 allocation score on redis-bundle-1: -INFINITY
 container_color: redis:0 allocation score on redis-bundle-2: -INFINITY
 container_color: redis:1 allocation score on galera-bundle-0: -INFINITY
@@ -374,7 +374,7 @@ container_color: redis:1 allocation score on metal-2: 0
 container_color: redis:1 allocation score on metal-3: 0
 container_color: redis:1 allocation score on rabbitmq-bundle-0: 0
 container_color: redis:1 allocation score on redis-bundle-0: -INFINITY
-container_color: redis:1 allocation score on redis-bundle-1: -INFINITY
+container_color: redis:1 allocation score on redis-bundle-1: INFINITY
 container_color: redis:1 allocation score on redis-bundle-2: -INFINITY
 container_color: redis:2 allocation score on galera-bundle-0: -INFINITY
 container_color: redis:2 allocation score on galera-bundle-1: -INFINITY
@@ -385,7 +385,7 @@ container_color: redis:2 allocation score on metal-3: 0
 container_color: redis:2 allocation score on rabbitmq-bundle-0: 0
 container_color: redis:2 allocation score on redis-bundle-0: -INFINITY
 container_color: redis:2 allocation score on redis-bundle-1: -INFINITY
-container_color: redis:2 allocation score on redis-bundle-2: -INFINITY
+container_color: redis:2 allocation score on redis-bundle-2: INFINITY
 galera:0 promotion score on galera-bundle-0: -1
 galera:1 promotion score on galera-bundle-1: -1
 galera:2 promotion score on galera-bundle-2: -1
diff --git a/pengine/test10/bundle-order-stop.scores b/pengine/test10/bundle-order-stop.scores
index a662f42..528842e 100644
--- a/pengine/test10/bundle-order-stop.scores
+++ b/pengine/test10/bundle-order-stop.scores
@@ -29,7 +29,7 @@ container_color: galera-bundle-docker-0 allocation score on undercloud: INFINITY
 container_color: galera-bundle-master allocation score on galera-bundle-0: -INFINITY
 container_color: galera-bundle-master allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: galera-bundle-master allocation score on undercloud: 0
-container_color: galera:0 allocation score on galera-bundle-0: -INFINITY
+container_color: galera:0 allocation score on galera-bundle-0: INFINITY
 container_color: galera:0 allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: galera:0 allocation score on undercloud: 0
 container_color: haproxy-bundle allocation score on galera-bundle-0: -INFINITY
@@ -132,7 +132,7 @@ container_color: redis-bundle-master allocation score on redis-bundle-0: -INFINI
 container_color: redis-bundle-master allocation score on undercloud: 0
 container_color: redis:0 allocation score on galera-bundle-0: -INFINITY
 container_color: redis:0 allocation score on rabbitmq-bundle-0: -INFINITY
-container_color: redis:0 allocation score on redis-bundle-0: -INFINITY
+container_color: redis:0 allocation score on redis-bundle-0: INFINITY
 container_color: redis:0 allocation score on undercloud: 0
 galera:0 promotion score on galera-bundle-0: 100
 native_color: galera-bundle-0 allocation score on galera-bundle-0: -INFINITY
diff --git a/pengine/test10/guest-node-host-dies.dot b/pengine/test10/guest-node-host-dies.dot
index 83f38c4..2082d07 100644
--- a/pengine/test10/guest-node-host-dies.dot
+++ b/pengine/test10/guest-node-host-dies.dot
@@ -13,6 +13,7 @@ digraph "g" {
 "container1_start_0 rhel7-2" [ style=bold color="green" fontcolor="black"]
 "container1_stop_0 rhel7-1" -> "all_stopped" [ style = bold]
 "container1_stop_0 rhel7-1" -> "container1_start_0 rhel7-2" [ style = bold]
+"container1_stop_0 rhel7-1" -> "rsc_rhel7-1_start_0 rhel7-5" [ style = bold]
 "container1_stop_0 rhel7-1" -> "stonith 'reboot' lxc1" [ style = bold]
 "container1_stop_0 rhel7-1" [ style=bold color="green" fontcolor="orange"]
 "container2_start_0 rhel7-3" -> "lxc-ms_start_0 lxc2" [ style = bold]
@@ -20,6 +21,7 @@ digraph "g" {
 "container2_start_0 rhel7-3" [ style=bold color="green" fontcolor="black"]
 "container2_stop_0 rhel7-1" -> "all_stopped" [ style = bold]
 "container2_stop_0 rhel7-1" -> "container2_start_0 rhel7-3" [ style = bold]
+"container2_stop_0 rhel7-1" -> "rsc_rhel7-1_start_0 rhel7-5" [ style = bold]
 "container2_stop_0 rhel7-1" -> "stonith 'reboot' lxc2" [ style = bold]
 "container2_stop_0 rhel7-1" [ style=bold color="green" fontcolor="orange"]
 "lxc-ms-master_demote_0" -> "lxc-ms-master_demoted_0" [ style = bold]
@@ -83,7 +85,6 @@ digraph "g" {
 "lxc1_stop_0 rhel7-1" -> "all_stopped" [ style = bold]
 "lxc1_stop_0 rhel7-1" -> "container1_stop_0 rhel7-1" [ style = bold]
 "lxc1_stop_0 rhel7-1" -> "lxc1_start_0 rhel7-2" [ style = bold]
-"lxc1_stop_0 rhel7-1" -> "rsc_rhel7-1_start_0 rhel7-5" [ style = bold]
 "lxc1_stop_0 rhel7-1" [ style=bold color="green" fontcolor="orange"]
 "lxc2_monitor_0 rhel7-2" -> "lxc2_start_0 rhel7-3" [ style = bold]
 "lxc2_monitor_0 rhel7-2" -> "lxc2_stop_0 rhel7-1" [ style = bold]
@@ -102,7 +103,6 @@ digraph "g" {
 "lxc2_stop_0 rhel7-1" -> "all_stopped" [ style = bold]
 "lxc2_stop_0 rhel7-1" -> "container2_stop_0 rhel7-1" [ style = bold]
 "lxc2_stop_0 rhel7-1" -> "lxc2_start_0 rhel7-3" [ style = bold]
-"lxc2_stop_0 rhel7-1" -> "rsc_rhel7-1_start_0 rhel7-5" [ style = bold]
 "lxc2_stop_0 rhel7-1" [ style=bold color="green" fontcolor="orange"]
 "rsc_rhel7-1_monitor_5000 rhel7-5" [ style=bold color="green" fontcolor="black"]
 "rsc_rhel7-1_start_0 rhel7-5" -> "rsc_rhel7-1_monitor_5000 rhel7-5" [ style = bold]
diff --git a/pengine/test10/guest-node-host-dies.exp b/pengine/test10/guest-node-host-dies.exp
index 01fe678..06362e2 100644
--- a/pengine/test10/guest-node-host-dies.exp
+++ b/pengine/test10/guest-node-host-dies.exp
@@ -62,10 +62,10 @@
         <pseudo_event id="12" operation="stop" operation_key="rsc_rhel7-1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="34" operation="stop" operation_key="lxc1_stop_0"/>
+        <pseudo_event id="15" operation="stop" operation_key="container1_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="37" operation="stop" operation_key="lxc2_stop_0"/>
+        <pseudo_event id="17" operation="stop" operation_key="container2_stop_0"/>
       </trigger>
       <trigger>
         <pseudo_event id="40" operation="stonith_complete" operation_key="stonith_complete"/>
diff --git a/pengine/test10/remote-fence-unclean-3.scores b/pengine/test10/remote-fence-unclean-3.scores
index 77d71d6..dba2026 100644
--- a/pengine/test10/remote-fence-unclean-3.scores
+++ b/pengine/test10/remote-fence-unclean-3.scores
@@ -199,7 +199,7 @@ container_color: galera-bundle-master allocation score on overcloud-novacompute-
 container_color: galera-bundle-master allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: galera-bundle-master allocation score on rabbitmq-bundle-1: -INFINITY
 container_color: galera-bundle-master allocation score on rabbitmq-bundle-2: -INFINITY
-container_color: galera:0 allocation score on galera-bundle-0: -INFINITY
+container_color: galera:0 allocation score on galera-bundle-0: INFINITY
 container_color: galera:0 allocation score on galera-bundle-1: -INFINITY
 container_color: galera:0 allocation score on galera-bundle-2: -INFINITY
 container_color: galera:0 allocation score on overcloud-controller-0: 0
@@ -210,7 +210,7 @@ container_color: galera:0 allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: galera:0 allocation score on rabbitmq-bundle-1: -INFINITY
 container_color: galera:0 allocation score on rabbitmq-bundle-2: -INFINITY
 container_color: galera:1 allocation score on galera-bundle-0: -INFINITY
-container_color: galera:1 allocation score on galera-bundle-1: -INFINITY
+container_color: galera:1 allocation score on galera-bundle-1: INFINITY
 container_color: galera:1 allocation score on galera-bundle-2: -INFINITY
 container_color: galera:1 allocation score on overcloud-controller-0: 0
 container_color: galera:1 allocation score on overcloud-controller-1: 0
@@ -221,7 +221,7 @@ container_color: galera:1 allocation score on rabbitmq-bundle-1: -INFINITY
 container_color: galera:1 allocation score on rabbitmq-bundle-2: -INFINITY
 container_color: galera:2 allocation score on galera-bundle-0: -INFINITY
 container_color: galera:2 allocation score on galera-bundle-1: -INFINITY
-container_color: galera:2 allocation score on galera-bundle-2: -INFINITY
+container_color: galera:2 allocation score on galera-bundle-2: INFINITY
 container_color: galera:2 allocation score on overcloud-controller-0: 0
 container_color: galera:2 allocation score on overcloud-controller-1: 0
 container_color: galera:2 allocation score on overcloud-controller-2: 0
@@ -836,7 +836,7 @@ container_color: redis:0 allocation score on overcloud-novacompute-0: 0
 container_color: redis:0 allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: redis:0 allocation score on rabbitmq-bundle-1: -INFINITY
 container_color: redis:0 allocation score on rabbitmq-bundle-2: -INFINITY
-container_color: redis:0 allocation score on redis-bundle-0: -INFINITY
+container_color: redis:0 allocation score on redis-bundle-0: INFINITY
 container_color: redis:0 allocation score on redis-bundle-1: -INFINITY
 container_color: redis:0 allocation score on redis-bundle-2: -INFINITY
 container_color: redis:1 allocation score on galera-bundle-0: -INFINITY
@@ -850,7 +850,7 @@ container_color: redis:1 allocation score on rabbitmq-bundle-0: -INFINITY
 container_color: redis:1 allocation score on rabbitmq-bundle-1: -INFINITY
 container_color: redis:1 allocation score on rabbitmq-bundle-2: -INFINITY
 container_color: redis:1 allocation score on redis-bundle-0: -INFINITY
-container_color: redis:1 allocation score on redis-bundle-1: -INFINITY
+container_color: redis:1 allocation score on redis-bundle-1: INFINITY
 container_color: redis:1 allocation score on redis-bundle-2: -INFINITY
 container_color: redis:2 allocation score on galera-bundle-0: -INFINITY
 container_color: redis:2 allocation score on galera-bundle-1: -INFINITY
@@ -864,7 +864,7 @@ container_color: redis:2 allocation score on rabbitmq-bundle-1: -INFINITY
 container_color: redis:2 allocation score on rabbitmq-bundle-2: -INFINITY
 container_color: redis:2 allocation score on redis-bundle-0: -INFINITY
 container_color: redis:2 allocation score on redis-bundle-1: -INFINITY
-container_color: redis:2 allocation score on redis-bundle-2: -INFINITY
+container_color: redis:2 allocation score on redis-bundle-2: INFINITY
 galera:0 promotion score on galera-bundle-0: 100
 galera:1 promotion score on galera-bundle-1: 100
 galera:2 promotion score on galera-bundle-2: 100
diff --git a/pengine/test10/whitebox-asymmetric.dot b/pengine/test10/whitebox-asymmetric.dot
index da2f3e3..529caa6 100644
--- a/pengine/test10/whitebox-asymmetric.dot
+++ b/pengine/test10/whitebox-asymmetric.dot
@@ -1,14 +1,19 @@
  digraph "g" {
 "18node2_monitor_30000 18builder" [ style=bold color="green" fontcolor="black"]
 "18node2_start_0 18builder" -> "18node2_monitor_30000 18builder" [ style = bold]
+"18node2_start_0 18builder" -> "nfs_mount_monitor_0 18node2" [ style = bold]
 "18node2_start_0 18builder" -> "nfs_mount_monitor_10000 18node2" [ style = bold]
 "18node2_start_0 18builder" -> "nfs_mount_start_0 18node2" [ style = bold]
 "18node2_start_0 18builder" -> "vg_tags_dup_monitor_0 18node2" [ style = bold]
+"18node2_start_0 18builder" -> "vg_tags_monitor_0 18node2" [ style = bold]
 "18node2_start_0 18builder" -> "webserver_monitor_0 18node2" [ style = bold]
 "18node2_start_0 18builder" [ style=bold color="green" fontcolor="black"]
+"nfs_mount_monitor_0 18node2" -> "nfs_mount_start_0 18node2" [ style = bold]
+"nfs_mount_monitor_0 18node2" [ style=bold color="green" fontcolor="black"]
 "nfs_mount_monitor_10000 18node2" [ style=bold color="green" fontcolor="black"]
 "nfs_mount_start_0 18node2" -> "nfs_mount_monitor_10000 18node2" [ style = bold]
 "nfs_mount_start_0 18node2" [ style=bold color="green" fontcolor="black"]
 "vg_tags_dup_monitor_0 18node2" [ style=bold color="green" fontcolor="black"]
+"vg_tags_monitor_0 18node2" [ style=bold color="green" fontcolor="black"]
 "webserver_monitor_0 18node2" [ style=bold color="green" fontcolor="black"]
 }
diff --git a/pengine/test10/whitebox-asymmetric.exp b/pengine/test10/whitebox-asymmetric.exp
index db71443..3f105a1 100644
--- a/pengine/test10/whitebox-asymmetric.exp
+++ b/pengine/test10/whitebox-asymmetric.exp
@@ -8,68 +8,97 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="12" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
+        <rsc_op id="14" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="7" operation="monitor" operation_key="nfs_mount_monitor_10000" on_node="18node2" on_node_uuid="18node2" router_node="18builder">
+      <rsc_op id="9" operation="monitor" operation_key="nfs_mount_monitor_10000" on_node="18node2" on_node_uuid="18node2" router_node="18builder">
         <primitive id="nfs_mount" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="18node2" CRM_meta_physical_host="18builder" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="6" operation="start" operation_key="nfs_mount_start_0" on_node="18node2" on_node_uuid="18node2" router_node="18builder"/>
+        <rsc_op id="8" operation="start" operation_key="nfs_mount_start_0" on_node="18node2" on_node_uuid="18node2" router_node="18builder"/>
       </trigger>
       <trigger>
-        <rsc_op id="12" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
+        <rsc_op id="14" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="6" operation="start" operation_key="nfs_mount_start_0" on_node="18node2" on_node_uuid="18node2" router_node="18builder">
+      <rsc_op id="8" operation="start" operation_key="nfs_mount_start_0" on_node="18node2" on_node_uuid="18node2" router_node="18builder">
         <primitive id="nfs_mount" class="ocf" provider="pacemaker" type="Dummy"/>
         <attributes CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="18node2" CRM_meta_physical_host="18builder" CRM_meta_timeout="20000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="12" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
+        <rsc_op id="3" operation="monitor" operation_key="nfs_mount_monitor_0" on_node="18node2" on_node_uuid="18node2" router_node="18builder"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="14" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="3" operation="monitor" operation_key="vg_tags_dup_monitor_0" on_node="18node2" on_node_uuid="18node2" router_node="18builder">
+      <rsc_op id="3" operation="monitor" operation_key="nfs_mount_monitor_0" on_node="18node2" on_node_uuid="18node2" router_node="18builder">
+        <primitive id="nfs_mount" class="ocf" provider="pacemaker" type="Dummy"/>
+        <attributes CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="18node2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18builder" CRM_meta_timeout="20000" />
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="14" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="4">
+    <action_set>
+      <rsc_op id="4" operation="monitor" operation_key="vg_tags_monitor_0" on_node="18node2" on_node_uuid="18node2" router_node="18builder">
+        <primitive id="vg_tags" class="ocf" provider="heartbeat" type="LVM"/>
+        <attributes CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="18node2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18builder" CRM_meta_timeout="20000"  exclusive="true" volgrpname="vg_tags"/>
+      </rsc_op>
+    </action_set>
+    <inputs>
+      <trigger>
+        <rsc_op id="14" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="5">
+    <action_set>
+      <rsc_op id="5" operation="monitor" operation_key="vg_tags_dup_monitor_0" on_node="18node2" on_node_uuid="18node2" router_node="18builder">
         <primitive id="vg_tags_dup" class="ocf" provider="heartbeat" type="LVM"/>
         <attributes CRM_meta_on_node="18node2" CRM_meta_on_node_uuid="18node2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="18builder" CRM_meta_timeout="20000"  exclusive="true" volgrpname="fakesss"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="12" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
+        <rsc_op id="14" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="4">
+  <synapse id="6">
     <action_set>
-      <rsc_op id="13" operation="monitor" operation_key="18node2_monitor_30000" on_node="18builder" on_node_uuid="5">
+      <rsc_op id="15" operation="monitor" operation_key="18node2_monitor_30000" on_node="18builder" on_node_uuid="5">
         <primitive id="18node2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container2" CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_timeout="30000" />
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="12" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
+        <rsc_op id="14" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="5">
+  <synapse id="7">
     <action_set>
-      <rsc_op id="12" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5">
+      <rsc_op id="14" operation="start" operation_key="18node2_start_0" on_node="18builder" on_node_uuid="5">
         <primitive id="18node2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="container2" CRM_meta_name="start" CRM_meta_on_node="18builder" CRM_meta_on_node_uuid="5" CRM_meta_timeout="60000" />
       </rsc_op>
diff --git a/pengine/test10/whitebox-asymmetric.summary b/pengine/test10/whitebox-asymmetric.summary
index 8da9996..15bf9e7 100644
--- a/pengine/test10/whitebox-asymmetric.summary
+++ b/pengine/test10/whitebox-asymmetric.summary
@@ -18,9 +18,11 @@ Transition Summary:
 Executing cluster transition:
  * Resource action: 18node2         start on 18builder
  * Resource action: webserver       monitor on 18node2
- * Resource action: nfs_mount       start on 18node2
+ * Resource action: nfs_mount       monitor on 18node2
+ * Resource action: vg_tags         monitor on 18node2
  * Resource action: vg_tags_dup     monitor on 18node2
  * Resource action: 18node2         monitor=30000 on 18builder
+ * Resource action: nfs_mount       start on 18node2
  * Resource action: nfs_mount       monitor=10000 on 18node2
 
 Revised cluster status:
diff --git a/pengine/test10/whitebox-fail3.dot b/pengine/test10/whitebox-fail3.dot
index 6f608d1..9814f66 100644
--- a/pengine/test10/whitebox-fail3.dot
+++ b/pengine/test10/whitebox-fail3.dot
@@ -1,8 +1,5 @@
 digraph "g" {
 "18builder_monitor_0 dvossel-laptop2" -> "18builder_start_0 dvossel-laptop2" [ style = bold]
-"18builder_monitor_0 dvossel-laptop2" -> "FAKE_start_0 18builder" [ style = bold]
-"18builder_monitor_0 dvossel-laptop2" -> "W-master_start_0" [ style = bold]
-"18builder_monitor_0 dvossel-laptop2" -> "X-master_start_0" [ style = bold]
 "18builder_monitor_0 dvossel-laptop2" [ style=bold color="green" fontcolor="black"]
 "18builder_monitor_30000 dvossel-laptop2" [ style=bold color="green" fontcolor="black"]
 "18builder_start_0 dvossel-laptop2" -> "18builder_monitor_30000 dvossel-laptop2" [ style = bold]
diff --git a/pengine/test10/whitebox-fail3.exp b/pengine/test10/whitebox-fail3.exp
index cddd7dd..ec28f12 100644
--- a/pengine/test10/whitebox-fail3.exp
+++ b/pengine/test10/whitebox-fail3.exp
@@ -17,9 +17,6 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="2" operation="monitor" operation_key="18builder_monitor_0" on_node="dvossel-laptop2" on_node_uuid="24815808"/>
-      </trigger>
-      <trigger>
         <rsc_op id="3" operation="start" operation_key="vm_start_0" on_node="dvossel-laptop2" on_node_uuid="24815808"/>
       </trigger>
       <trigger>
@@ -95,11 +92,7 @@
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="2" operation="monitor" operation_key="18builder_monitor_0" on_node="dvossel-laptop2" on_node_uuid="24815808"/>
-      </trigger>
-    </inputs>
+    <inputs/>
   </synapse>
   <synapse id="7">
     <action_set>
@@ -157,11 +150,7 @@
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="2" operation="monitor" operation_key="18builder_monitor_0" on_node="dvossel-laptop2" on_node_uuid="24815808"/>
-      </trigger>
-    </inputs>
+    <inputs/>
   </synapse>
   <synapse id="11">
     <action_set>
diff --git a/pengine/test10/whitebox-fail3.summary b/pengine/test10/whitebox-fail3.summary
index 374fb69..eded099 100644
--- a/pengine/test10/whitebox-fail3.summary
+++ b/pengine/test10/whitebox-fail3.summary
@@ -22,10 +22,10 @@ Transition Summary:
 Executing cluster transition:
  * Resource action: vm              start on dvossel-laptop2
  * Resource action: FAKE            stop on dvossel-laptop2
- * Resource action: 18builder       monitor on dvossel-laptop2
- * Pseudo action:   all_stopped
  * Pseudo action:   W-master_start_0
  * Pseudo action:   X-master_start_0
+ * Resource action: 18builder       monitor on dvossel-laptop2
+ * Pseudo action:   all_stopped
  * Resource action: 18builder       start on dvossel-laptop2
  * Resource action: FAKE            start on 18builder
  * Resource action: W               start on 18builder
diff --git a/pengine/test10/whitebox-imply-stop-on-fence.dot b/pengine/test10/whitebox-imply-stop-on-fence.dot
index 029e9f1..1c41ad2 100644
--- a/pengine/test10/whitebox-imply-stop-on-fence.dot
+++ b/pengine/test10/whitebox-imply-stop-on-fence.dot
@@ -15,6 +15,7 @@
 "R-lxc-02_kiff-01_stop_0 kiff-01" -> "R-lxc-02_kiff-01_start_0 kiff-02" [ style = bold]
 "R-lxc-02_kiff-01_stop_0 kiff-01" -> "all_stopped" [ style = bold]
 "R-lxc-02_kiff-01_stop_0 kiff-01" -> "shared0-clone_stop_0" [ style = bold]
+"R-lxc-02_kiff-01_stop_0 kiff-01" -> "vm-fs_start_0 lxc-01_kiff-01" [ style = bold]
 "R-lxc-02_kiff-01_stop_0 kiff-01" [ style=bold color="green" fontcolor="orange"]
 "all_stopped" -> "fence-kiff-02_start_0 kiff-02" [ style = bold]
 "all_stopped" [ style=bold color="green" fontcolor="orange"]
@@ -63,7 +64,6 @@
 "lxc-02_kiff-01_stop_0 kiff-01" -> "R-lxc-02_kiff-01_stop_0 kiff-01" [ style = bold]
 "lxc-02_kiff-01_stop_0 kiff-01" -> "all_stopped" [ style = bold]
 "lxc-02_kiff-01_stop_0 kiff-01" -> "lxc-02_kiff-01_start_0 kiff-02" [ style = bold]
-"lxc-02_kiff-01_stop_0 kiff-01" -> "vm-fs_start_0 lxc-01_kiff-01" [ style = bold]
 "lxc-02_kiff-01_stop_0 kiff-01" [ style=bold color="green" fontcolor="orange"]
 "shared0-clone_stop_0" -> "shared0-clone_stopped_0" [ style = bold]
 "shared0-clone_stop_0" -> "shared0_stop_0 kiff-01" [ style = bold]
diff --git a/pengine/test10/whitebox-imply-stop-on-fence.exp b/pengine/test10/whitebox-imply-stop-on-fence.exp
index b5700c0..9a469f2 100644
--- a/pengine/test10/whitebox-imply-stop-on-fence.exp
+++ b/pengine/test10/whitebox-imply-stop-on-fence.exp
@@ -374,13 +374,13 @@
         <rsc_op id="46" operation="start" operation_key="R-lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="55" operation="stop" operation_key="vm-fs_stop_0"/>
+        <pseudo_event id="48" operation="stop" operation_key="R-lxc-02_kiff-01_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="59" operation="start" operation_key="lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
+        <pseudo_event id="55" operation="stop" operation_key="vm-fs_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="61" operation="stop" operation_key="lxc-02_kiff-01_stop_0"/>
+        <rsc_op id="59" operation="start" operation_key="lxc-01_kiff-01_start_0" on_node="kiff-02" on_node_uuid="2"/>
       </trigger>
       <trigger>
         <pseudo_event id="68" operation="stonith_complete" operation_key="stonith_complete"/>
diff --git a/pengine/test10/whitebox-migrate1.dot b/pengine/test10/whitebox-migrate1.dot
index 53d37e0..29874e6 100644
--- a/pengine/test10/whitebox-migrate1.dot
+++ b/pengine/test10/whitebox-migrate1.dot
@@ -17,6 +17,7 @@
 "remote-rsc_start_0 rhel7-node3" -> "rhel7-node1_migrate_to_0 rhel7-node2" [ style = dashed]
 "remote-rsc_start_0 rhel7-node3" -> "rhel7-node1_start_0 rhel7-node3" [ style = bold]
 "remote-rsc_start_0 rhel7-node3" [ style=bold color="green" fontcolor="orange"]
+"remote-rsc_stop_0 rhel7-node2" -> "FAKE3_start_0 rhel7-node2" [ style = dashed]
 "remote-rsc_stop_0 rhel7-node2" -> "all_stopped" [ style = bold]
 "remote-rsc_stop_0 rhel7-node2" -> "remote-rsc_start_0 rhel7-node3" [ style = bold]
 "remote-rsc_stop_0 rhel7-node2" [ style=bold color="green" fontcolor="black"]
@@ -32,7 +33,6 @@
 "rhel7-node1_monitor_30000 rhel7-node3" [ style=bold color="green" fontcolor="black"]
 "rhel7-node1_start_0 rhel7-node3" -> "rhel7-node1_monitor_30000 rhel7-node3" [ style = bold]
 "rhel7-node1_start_0 rhel7-node3" [ style=bold color="green" fontcolor="orange"]
-"rhel7-node1_stop_0 rhel7-node2" -> "FAKE3_start_0 rhel7-node2" [ style = dashed]
 "rhel7-node1_stop_0 rhel7-node2" -> "all_stopped" [ style = bold]
 "rhel7-node1_stop_0 rhel7-node2" -> "remote-rsc_migrate_to_0 rhel7-node2" [ style = dashed]
 "rhel7-node1_stop_0 rhel7-node2" -> "remote-rsc_stop_0 rhel7-node2" [ style = bold]
diff --git a/pengine/test10/whitebox-nested-group.dot b/pengine/test10/whitebox-nested-group.dot
index e5749ec..9e1abce 100644
--- a/pengine/test10/whitebox-nested-group.dot
+++ b/pengine/test10/whitebox-nested-group.dot
@@ -1,30 +1,9 @@
  digraph "g" {
 "c7auto4_monitor_0 c7auto1" -> "c7auto4_start_0 c7auto1" [ style = bold]
-"c7auto4_monitor_0 c7auto1" -> "fake1_start_0 c7auto3" [ style = bold]
-"c7auto4_monitor_0 c7auto1" -> "fake2_start_0 c7auto4" [ style = bold]
-"c7auto4_monitor_0 c7auto1" -> "fake3_start_0 c7auto2" [ style = bold]
-"c7auto4_monitor_0 c7auto1" -> "fake4_start_0 c7auto3" [ style = bold]
-"c7auto4_monitor_0 c7auto1" -> "fake5_start_0 c7auto4" [ style = bold]
-"c7auto4_monitor_0 c7auto1" -> "fake_clone_start_0" [ style = bold]
-"c7auto4_monitor_0 c7auto1" -> "fake_group_start_0" [ style = bold]
 "c7auto4_monitor_0 c7auto1" [ style=bold color="green" fontcolor="black"]
 "c7auto4_monitor_0 c7auto2" -> "c7auto4_start_0 c7auto1" [ style = bold]
-"c7auto4_monitor_0 c7auto2" -> "fake1_start_0 c7auto3" [ style = bold]
-"c7auto4_monitor_0 c7auto2" -> "fake2_start_0 c7auto4" [ style = bold]
-"c7auto4_monitor_0 c7auto2" -> "fake3_start_0 c7auto2" [ style = bold]
-"c7auto4_monitor_0 c7auto2" -> "fake4_start_0 c7auto3" [ style = bold]
-"c7auto4_monitor_0 c7auto2" -> "fake5_start_0 c7auto4" [ style = bold]
-"c7auto4_monitor_0 c7auto2" -> "fake_clone_start_0" [ style = bold]
-"c7auto4_monitor_0 c7auto2" -> "fake_group_start_0" [ style = bold]
 "c7auto4_monitor_0 c7auto2" [ style=bold color="green" fontcolor="black"]
 "c7auto4_monitor_0 c7auto3" -> "c7auto4_start_0 c7auto1" [ style = bold]
-"c7auto4_monitor_0 c7auto3" -> "fake1_start_0 c7auto3" [ style = bold]
-"c7auto4_monitor_0 c7auto3" -> "fake2_start_0 c7auto4" [ style = bold]
-"c7auto4_monitor_0 c7auto3" -> "fake3_start_0 c7auto2" [ style = bold]
-"c7auto4_monitor_0 c7auto3" -> "fake4_start_0 c7auto3" [ style = bold]
-"c7auto4_monitor_0 c7auto3" -> "fake5_start_0 c7auto4" [ style = bold]
-"c7auto4_monitor_0 c7auto3" -> "fake_clone_start_0" [ style = bold]
-"c7auto4_monitor_0 c7auto3" -> "fake_group_start_0" [ style = bold]
 "c7auto4_monitor_0 c7auto3" [ style=bold color="green" fontcolor="black"]
 "c7auto4_monitor_30000 c7auto1" [ style=bold color="green" fontcolor="black"]
 "c7auto4_start_0 c7auto1" -> "c7auto4_monitor_30000 c7auto1" [ style = bold]
diff --git a/pengine/test10/whitebox-nested-group.exp b/pengine/test10/whitebox-nested-group.exp
index 5625c92..388c4d4 100644
--- a/pengine/test10/whitebox-nested-group.exp
+++ b/pengine/test10/whitebox-nested-group.exp
@@ -24,20 +24,11 @@
         <rsc_op id="3" operation="monitor" operation_key="fake1_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="10" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
         <rsc_op id="11" operation="monitor" operation_key="fake1_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="18" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
         <rsc_op id="19" operation="monitor" operation_key="fake1_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
       </trigger>
-      <trigger>
-        <rsc_op id="26" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
-      </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
@@ -95,21 +86,12 @@
         <rsc_op id="4" operation="monitor" operation_key="fake2_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="10" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
         <rsc_op id="12" operation="monitor" operation_key="fake2_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="18" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
         <rsc_op id="20" operation="monitor" operation_key="fake2_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="26" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
-      </trigger>
-      <trigger>
         <rsc_op id="53" operation="start" operation_key="container_start_0" on_node="c7auto1" on_node_uuid="1"/>
       </trigger>
       <trigger>
@@ -169,20 +151,11 @@
         <rsc_op id="5" operation="monitor" operation_key="fake3_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="10" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
         <rsc_op id="13" operation="monitor" operation_key="fake3_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="18" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
         <rsc_op id="21" operation="monitor" operation_key="fake3_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
       </trigger>
-      <trigger>
-        <rsc_op id="26" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
-      </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
@@ -237,20 +210,11 @@
         <rsc_op id="6" operation="monitor" operation_key="fake4_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="10" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
         <rsc_op id="14" operation="monitor" operation_key="fake4_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="18" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
         <rsc_op id="22" operation="monitor" operation_key="fake4_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
       </trigger>
-      <trigger>
-        <rsc_op id="26" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
-      </trigger>
     </inputs>
   </synapse>
   <synapse id="17">
@@ -308,21 +272,12 @@
         <rsc_op id="7" operation="monitor" operation_key="fake5_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="10" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
         <rsc_op id="15" operation="monitor" operation_key="fake5_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="18" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
         <rsc_op id="23" operation="monitor" operation_key="fake5_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="26" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
-      </trigger>
-      <trigger>
         <rsc_op id="53" operation="start" operation_key="container_start_0" on_node="c7auto1" on_node_uuid="1"/>
       </trigger>
       <trigger>
@@ -532,20 +487,11 @@
         <rsc_op id="8" operation="monitor" operation_key="fake:3_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="10" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
         <rsc_op id="16" operation="monitor" operation_key="fake:0_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="18" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
         <rsc_op id="24" operation="monitor" operation_key="fake:1_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
       </trigger>
-      <trigger>
-        <rsc_op id="26" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
-      </trigger>
     </inputs>
   </synapse>
   <synapse id="38">
@@ -572,17 +518,7 @@
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
-    <inputs>
-      <trigger>
-        <rsc_op id="10" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto1" on_node_uuid="1"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="18" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto2" on_node_uuid="2"/>
-      </trigger>
-      <trigger>
-        <rsc_op id="26" operation="monitor" operation_key="c7auto4_monitor_0" on_node="c7auto3" on_node_uuid="3"/>
-      </trigger>
-    </inputs>
+    <inputs/>
   </synapse>
   <synapse id="40">
     <action_set>
diff --git a/pengine/test10/whitebox-nested-group.summary b/pengine/test10/whitebox-nested-group.summary
index b03b357..ca9c47f 100644
--- a/pengine/test10/whitebox-nested-group.summary
+++ b/pengine/test10/whitebox-nested-group.summary
@@ -47,6 +47,8 @@ Executing cluster transition:
  * Resource action: fake:0          monitor on c7auto2
  * Resource action: fake:1          monitor on c7auto3
  * Resource action: fake:3          monitor on c7auto1
+ * Pseudo action:   fake_clone_start_0
+ * Pseudo action:   fake_group_start_0
  * Resource action: fake_fs         monitor on c7auto3
  * Resource action: fake_fs         monitor on c7auto2
  * Resource action: fake_fs         monitor on c7auto1
@@ -56,8 +58,9 @@ Executing cluster transition:
  * Resource action: fake1           start on c7auto3
  * Resource action: fake3           start on c7auto2
  * Resource action: fake4           start on c7auto3
- * Pseudo action:   fake_clone_start_0
- * Pseudo action:   fake_group_start_0
+ * Resource action: fake:0          start on c7auto2
+ * Resource action: fake:1          start on c7auto3
+ * Resource action: fake:3          start on c7auto1
  * Resource action: fake_fs         start on c7auto1
  * Resource action: container       start on c7auto1
  * Resource action: c7auto4         start on c7auto1
@@ -66,10 +69,10 @@ Executing cluster transition:
  * Resource action: fake3           monitor=10000 on c7auto2
  * Resource action: fake4           monitor=10000 on c7auto3
  * Resource action: fake5           start on c7auto4
- * Resource action: fake:0          start on c7auto2
- * Resource action: fake:1          start on c7auto3
+ * Resource action: fake:0          monitor=10000 on c7auto2
+ * Resource action: fake:1          monitor=10000 on c7auto3
  * Resource action: fake:2          start on c7auto4
- * Resource action: fake:3          start on c7auto1
+ * Resource action: fake:3          monitor=10000 on c7auto1
  * Pseudo action:   fake_clone_running_0
  * Pseudo action:   fake_group_running_0
  * Resource action: fake_fs         monitor=10000 on c7auto1
@@ -77,10 +80,7 @@ Executing cluster transition:
  * Resource action: c7auto4         monitor=30000 on c7auto1
  * Resource action: fake2           monitor=10000 on c7auto4
  * Resource action: fake5           monitor=10000 on c7auto4
- * Resource action: fake:0          monitor=10000 on c7auto2
- * Resource action: fake:1          monitor=10000 on c7auto3
  * Resource action: fake:2          monitor=10000 on c7auto4
- * Resource action: fake:3          monitor=10000 on c7auto1
 
 Revised cluster status:
 Online: [ c7auto1 c7auto2 c7auto3 ]
-- 
1.8.3.1


From 6a0dd3429c13343a7177f43cf4c82c352d39f672 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Tue, 26 Sep 2017 21:28:53 +1000
Subject: [PATCH 18/21] Fix: PE: We most definitely need to probe connection
 resources

---
 pengine/container.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/pengine/container.c b/pengine/container.c
index 0e556bb..a205c53 100644
--- a/pengine/container.c
+++ b/pengine/container.c
@@ -885,8 +885,7 @@ container_create_probe(resource_t * rsc, node_t * node, action_t * complete,
                 }
             }
         }
-        if(FALSE && tuple->remote) {
-            // TODO: Needed?
+        if(tuple->remote) {
             any_created |= tuple->remote->cmds->create_probe(tuple->remote, node, complete, force, data_set);
         }
     }
-- 
1.8.3.1


From 5d27b590abc98d70ecbca3829569ee2de5e0e75d Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Tue, 26 Sep 2017 21:30:37 +1000
Subject: [PATCH 19/21] Test: PE: We most definitely need to probe connection
 resources

---
 pengine/test10/bundle-nested-colocation.dot        |   36 +
 pengine/test10/bundle-nested-colocation.exp        |  402 +++++--
 pengine/test10/bundle-nested-colocation.summary    |   18 +
 pengine/test10/bundle-order-fencing.dot            |   24 +
 pengine/test10/bundle-order-fencing.exp            | 1056 +++++++++--------
 pengine/test10/bundle-order-fencing.summary        |   12 +
 pengine/test10/bundle-order-partial-start.dot      |    2 +
 pengine/test10/bundle-order-partial-start.exp      |  236 ++--
 pengine/test10/bundle-order-partial-start.summary  |    1 +
 pengine/test10/bundle-order-startup-clone-2.dot    |   36 +
 pengine/test10/bundle-order-startup-clone-2.exp    | 1182 ++++++++++++--------
 .../test10/bundle-order-startup-clone-2.summary    |   18 +
 pengine/test10/bundle-order-startup-clone.dot      |   12 +
 pengine/test10/bundle-order-startup-clone.exp      |  247 ++--
 pengine/test10/bundle-order-startup-clone.summary  |    6 +
 pengine/test10/bundle-order-startup.dot            |    6 +
 pengine/test10/bundle-order-startup.exp            |  486 ++++----
 pengine/test10/bundle-order-startup.summary        |    3 +
 pengine/test10/bundle-order-stop-clone.dot         |   16 +
 pengine/test10/bundle-order-stop-clone.exp         |  248 ++--
 pengine/test10/bundle-order-stop-clone.summary     |   12 +
 pengine/test10/remote-fence-unclean-3.dot          |   18 +
 pengine/test10/remote-fence-unclean-3.exp          |  176 ++-
 pengine/test10/remote-fence-unclean-3.summary      |   18 +
 24 files changed, 2727 insertions(+), 1544 deletions(-)

diff --git a/pengine/test10/bundle-nested-colocation.dot b/pengine/test10/bundle-nested-colocation.dot
index 1a197c1..baa80e2 100644
--- a/pengine/test10/bundle-nested-colocation.dot
+++ b/pengine/test10/bundle-nested-colocation.dot
@@ -1,17 +1,53 @@
 digraph "g" {
 "all_stopped" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-0_monitor_0 overcloud-controller-0" -> "rabbitmq-bundle-0_start_0 overcloud-controller-0" [ style = bold]
+"rabbitmq-bundle-0_monitor_0 overcloud-controller-0" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-0_monitor_0 overcloud-controller-1" -> "rabbitmq-bundle-0_start_0 overcloud-controller-0" [ style = bold]
+"rabbitmq-bundle-0_monitor_0 overcloud-controller-1" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-0_monitor_0 overcloud-controller-2" -> "rabbitmq-bundle-0_start_0 overcloud-controller-0" [ style = bold]
+"rabbitmq-bundle-0_monitor_0 overcloud-controller-2" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-0_monitor_0 overcloud-galera-0" -> "rabbitmq-bundle-0_start_0 overcloud-controller-0" [ style = bold]
+"rabbitmq-bundle-0_monitor_0 overcloud-galera-0" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-0_monitor_0 overcloud-galera-1" -> "rabbitmq-bundle-0_start_0 overcloud-controller-0" [ style = bold]
+"rabbitmq-bundle-0_monitor_0 overcloud-galera-1" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-0_monitor_0 overcloud-galera-2" -> "rabbitmq-bundle-0_start_0 overcloud-controller-0" [ style = bold]
+"rabbitmq-bundle-0_monitor_0 overcloud-galera-2" [ style=bold color="green" fontcolor="black"]
 "rabbitmq-bundle-0_monitor_60000 overcloud-controller-0" [ style=bold color="green" fontcolor="black"]
 "rabbitmq-bundle-0_start_0 overcloud-controller-0" -> "rabbitmq-bundle-0_monitor_60000 overcloud-controller-0" [ style = bold]
 "rabbitmq-bundle-0_start_0 overcloud-controller-0" -> "rabbitmq:0_monitor_0 rabbitmq-bundle-0" [ style = bold]
 "rabbitmq-bundle-0_start_0 overcloud-controller-0" -> "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style = bold]
 "rabbitmq-bundle-0_start_0 overcloud-controller-0" -> "rabbitmq:0_start_0 rabbitmq-bundle-0" [ style = bold]
 "rabbitmq-bundle-0_start_0 overcloud-controller-0" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-1_monitor_0 overcloud-controller-0" -> "rabbitmq-bundle-1_start_0 overcloud-controller-1" [ style = bold]
+"rabbitmq-bundle-1_monitor_0 overcloud-controller-0" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-1_monitor_0 overcloud-controller-1" -> "rabbitmq-bundle-1_start_0 overcloud-controller-1" [ style = bold]
+"rabbitmq-bundle-1_monitor_0 overcloud-controller-1" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-1_monitor_0 overcloud-controller-2" -> "rabbitmq-bundle-1_start_0 overcloud-controller-1" [ style = bold]
+"rabbitmq-bundle-1_monitor_0 overcloud-controller-2" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-1_monitor_0 overcloud-galera-0" -> "rabbitmq-bundle-1_start_0 overcloud-controller-1" [ style = bold]
+"rabbitmq-bundle-1_monitor_0 overcloud-galera-0" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-1_monitor_0 overcloud-galera-1" -> "rabbitmq-bundle-1_start_0 overcloud-controller-1" [ style = bold]
+"rabbitmq-bundle-1_monitor_0 overcloud-galera-1" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-1_monitor_0 overcloud-galera-2" -> "rabbitmq-bundle-1_start_0 overcloud-controller-1" [ style = bold]
+"rabbitmq-bundle-1_monitor_0 overcloud-galera-2" [ style=bold color="green" fontcolor="black"]
 "rabbitmq-bundle-1_monitor_60000 overcloud-controller-1" [ style=bold color="green" fontcolor="black"]
 "rabbitmq-bundle-1_start_0 overcloud-controller-1" -> "rabbitmq-bundle-1_monitor_60000 overcloud-controller-1" [ style = bold]
 "rabbitmq-bundle-1_start_0 overcloud-controller-1" -> "rabbitmq:1_monitor_0 rabbitmq-bundle-1" [ style = bold]
 "rabbitmq-bundle-1_start_0 overcloud-controller-1" -> "rabbitmq:1_monitor_10000 rabbitmq-bundle-1" [ style = bold]
 "rabbitmq-bundle-1_start_0 overcloud-controller-1" -> "rabbitmq:1_start_0 rabbitmq-bundle-1" [ style = bold]
 "rabbitmq-bundle-1_start_0 overcloud-controller-1" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-2_monitor_0 overcloud-controller-0" -> "rabbitmq-bundle-2_start_0 overcloud-controller-2" [ style = bold]
+"rabbitmq-bundle-2_monitor_0 overcloud-controller-0" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-2_monitor_0 overcloud-controller-1" -> "rabbitmq-bundle-2_start_0 overcloud-controller-2" [ style = bold]
+"rabbitmq-bundle-2_monitor_0 overcloud-controller-1" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-2_monitor_0 overcloud-controller-2" -> "rabbitmq-bundle-2_start_0 overcloud-controller-2" [ style = bold]
+"rabbitmq-bundle-2_monitor_0 overcloud-controller-2" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-2_monitor_0 overcloud-galera-0" -> "rabbitmq-bundle-2_start_0 overcloud-controller-2" [ style = bold]
+"rabbitmq-bundle-2_monitor_0 overcloud-galera-0" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-2_monitor_0 overcloud-galera-1" -> "rabbitmq-bundle-2_start_0 overcloud-controller-2" [ style = bold]
+"rabbitmq-bundle-2_monitor_0 overcloud-galera-1" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-2_monitor_0 overcloud-galera-2" -> "rabbitmq-bundle-2_start_0 overcloud-controller-2" [ style = bold]
+"rabbitmq-bundle-2_monitor_0 overcloud-galera-2" [ style=bold color="green" fontcolor="black"]
 "rabbitmq-bundle-2_monitor_60000 overcloud-controller-2" [ style=bold color="green" fontcolor="black"]
 "rabbitmq-bundle-2_start_0 overcloud-controller-2" -> "rabbitmq-bundle-2_monitor_60000 overcloud-controller-2" [ style = bold]
 "rabbitmq-bundle-2_start_0 overcloud-controller-2" -> "rabbitmq:2_monitor_0 rabbitmq-bundle-2" [ style = bold]
diff --git a/pengine/test10/bundle-nested-colocation.exp b/pengine/test10/bundle-nested-colocation.exp
index b91ced5..266d4c0 100644
--- a/pengine/test10/bundle-nested-colocation.exp
+++ b/pengine/test10/bundle-nested-colocation.exp
@@ -1,39 +1,39 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0" priority="1000000">
     <action_set>
-      <rsc_op id="65" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
+      <rsc_op id="83" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="overcloud-rabbit-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="46" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="64" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="37" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
+      <rsc_op id="55" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="overcloud-rabbit-0" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
+        <rsc_op id="42" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="36" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
+        <rsc_op id="54" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="47" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="65" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="36" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
+      <rsc_op id="54" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="overcloud-rabbit-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
@@ -43,61 +43,61 @@
         <rsc_op id="11" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0"/>
       </trigger>
       <trigger>
-        <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
+        <rsc_op id="42" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="42" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="60" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="14" operation="monitor" operation_key="rabbitmq:0_monitor_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
+      <rsc_op id="32" operation="monitor" operation_key="rabbitmq:0_monitor_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_op_target_rc="7" CRM_meta_physical_host="overcloud-rabbit-0" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
+        <rsc_op id="42" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4" priority="1000000">
     <action_set>
-      <rsc_op id="66" operation="notify" operation_key="rabbitmq:1_post_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
+      <rsc_op id="84" operation="notify" operation_key="rabbitmq:1_post_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
         <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_physical_host="overcloud-rabbit-1" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="46" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="64" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <rsc_op id="39" operation="monitor" operation_key="rabbitmq:1_monitor_10000" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
+      <rsc_op id="57" operation="monitor" operation_key="rabbitmq:1_monitor_10000" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
         <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_physical_host="overcloud-rabbit-1" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="27" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
+        <rsc_op id="45" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
+        <rsc_op id="56" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="47" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="65" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <rsc_op id="38" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
+      <rsc_op id="56" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
         <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_physical_host="overcloud-rabbit-1" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
@@ -107,64 +107,64 @@
         <rsc_op id="12" operation="start" operation_key="rabbitmq-bundle-docker-1_start_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="27" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
+        <rsc_op id="45" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="36" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
+        <rsc_op id="54" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="42" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="60" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <rsc_op id="15" operation="monitor" operation_key="rabbitmq:1_monitor_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
+      <rsc_op id="33" operation="monitor" operation_key="rabbitmq:1_monitor_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1">
         <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_op_target_rc="7" CRM_meta_physical_host="overcloud-rabbit-1" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="27" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
+        <rsc_op id="45" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8" priority="1000000">
     <action_set>
-      <rsc_op id="67" operation="notify" operation_key="rabbitmq:2_post_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
+      <rsc_op id="85" operation="notify" operation_key="rabbitmq:2_post_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
         <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_physical_host="overcloud-rabbit-2" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="46" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="64" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <rsc_op id="41" operation="monitor" operation_key="rabbitmq:2_monitor_10000" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
+      <rsc_op id="59" operation="monitor" operation_key="rabbitmq:2_monitor_10000" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
         <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_physical_host="overcloud-rabbit-2" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="30" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
+        <rsc_op id="48" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="rabbitmq:2_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
+        <rsc_op id="58" operation="start" operation_key="rabbitmq:2_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="47" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="65" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="40" operation="start" operation_key="rabbitmq:2_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
+      <rsc_op id="58" operation="start" operation_key="rabbitmq:2_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
         <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="overcloud-controller-0 overcloud-controller-1 overcloud-controller-2 overcloud-galera-0 overcloud-galera-1 overcloud-galera-2 overcloud-rabbit-0 overcloud-rabbit-1 overcloud-rabbit-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 overcloud-galera-2 overcloud-galera-1 overcloud-galera-0 overcloud-controller-2 overcloud-controller-1 overcloud-controller-0 overcloud-rabbit-2 overcloud-rabbit-1 overcloud-rabbit-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_start_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_physical_host="overcloud-rabbit-2" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
@@ -174,80 +174,80 @@
         <rsc_op id="13" operation="start" operation_key="rabbitmq-bundle-docker-2_start_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2"/>
       </trigger>
       <trigger>
-        <rsc_op id="30" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
+        <rsc_op id="48" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
+        <rsc_op id="56" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="42" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="60" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="16" operation="monitor" operation_key="rabbitmq:2_monitor_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
+      <rsc_op id="34" operation="monitor" operation_key="rabbitmq:2_monitor_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2">
         <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_op_target_rc="7" CRM_meta_physical_host="overcloud-rabbit-2" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="30" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
+        <rsc_op id="48" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12" priority="1000000">
     <action_set>
-      <pseudo_event id="47" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
+      <pseudo_event id="65" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="46" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="64" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="65" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
+        <rsc_op id="83" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
       </trigger>
       <trigger>
-        <rsc_op id="66" operation="notify" operation_key="rabbitmq:1_post_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
+        <rsc_op id="84" operation="notify" operation_key="rabbitmq:1_post_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="67" operation="notify" operation_key="rabbitmq:2_post_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
+        <rsc_op id="85" operation="notify" operation_key="rabbitmq:2_post_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13" priority="1000000">
     <action_set>
-      <pseudo_event id="46" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
+      <pseudo_event id="64" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="43" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
+        <pseudo_event id="61" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="63" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <pseudo_event id="45" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
+      <pseudo_event id="63" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="44" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
+        <pseudo_event id="62" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15">
     <action_set>
-      <pseudo_event id="44" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
+      <pseudo_event id="62" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -255,52 +255,52 @@
   </synapse>
   <synapse id="16" priority="1000000">
     <action_set>
-      <pseudo_event id="43" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
+      <pseudo_event id="61" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="36" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
+        <rsc_op id="54" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
       </trigger>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
+        <rsc_op id="56" operation="start" operation_key="rabbitmq:1_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="rabbitmq:2_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
+        <rsc_op id="58" operation="start" operation_key="rabbitmq:2_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="42" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="60" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="17">
     <action_set>
-      <pseudo_event id="42" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
+      <pseudo_event id="60" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="14" operation="monitor" operation_key="rabbitmq:0_monitor_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
+        <rsc_op id="32" operation="monitor" operation_key="rabbitmq:0_monitor_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="overcloud-controller-0"/>
       </trigger>
       <trigger>
-        <rsc_op id="15" operation="monitor" operation_key="rabbitmq:1_monitor_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
+        <rsc_op id="33" operation="monitor" operation_key="rabbitmq:1_monitor_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="overcloud-controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="16" operation="monitor" operation_key="rabbitmq:2_monitor_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
+        <rsc_op id="34" operation="monitor" operation_key="rabbitmq:2_monitor_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="overcloud-controller-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="32" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+        <pseudo_event id="50" operation="start" operation_key="rabbitmq-bundle_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="63" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="18">
     <action_set>
-      <rsc_op id="23" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0">
+      <rsc_op id="41" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0">
         <primitive id="rabbitmq-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="overcloud-rabbit-0" CRM_meta_on_node_uuid="overcloud-rabbit-0" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-0:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
@@ -316,10 +316,10 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="23" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0"/>
+        <rsc_op id="41" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="32" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+        <pseudo_event id="50" operation="start" operation_key="rabbitmq-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -338,20 +338,20 @@
   </synapse>
   <synapse id="21">
     <action_set>
-      <rsc_op id="25" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_60000" on_node="overcloud-controller-0" on_node_uuid="1">
+      <rsc_op id="43" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_60000" on_node="overcloud-controller-0" on_node_uuid="1">
         <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="overcloud-rabbit-0"  port="3121"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
+        <rsc_op id="42" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="22">
     <action_set>
-      <rsc_op id="24" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1">
+      <rsc_op id="42" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="overcloud-controller-0" on_node_uuid="1">
         <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="overcloud-rabbit-0"  port="3121"/>
       </rsc_op>
@@ -360,18 +360,90 @@
       <trigger>
         <rsc_op id="11" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0"/>
       </trigger>
+      <trigger>
+        <rsc_op id="14" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="17" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="20" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="23" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="overcloud-galera-0" on_node_uuid="4"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="26" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="overcloud-galera-1" on_node_uuid="5"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="29" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="overcloud-galera-2" on_node_uuid="6"/>
+      </trigger>
     </inputs>
   </synapse>
   <synapse id="23">
     <action_set>
-      <rsc_op id="26" operation="stop" operation_key="rabbitmq-bundle-docker-1_stop_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1">
+      <rsc_op id="29" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="overcloud-galera-2" on_node_uuid="6">
+        <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_on_node="overcloud-galera-2" CRM_meta_on_node_uuid="6" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-rabbit-0"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="24">
+    <action_set>
+      <rsc_op id="26" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="overcloud-galera-1" on_node_uuid="5">
+        <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_on_node="overcloud-galera-1" CRM_meta_on_node_uuid="5" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-rabbit-0"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="25">
+    <action_set>
+      <rsc_op id="23" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="overcloud-galera-0" on_node_uuid="4">
+        <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_on_node="overcloud-galera-0" CRM_meta_on_node_uuid="4" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-rabbit-0"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="26">
+    <action_set>
+      <rsc_op id="20" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="overcloud-controller-2" on_node_uuid="3">
+        <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_on_node="overcloud-controller-2" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-rabbit-0"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="27">
+    <action_set>
+      <rsc_op id="17" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="overcloud-controller-1" on_node_uuid="2">
+        <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_on_node="overcloud-controller-1" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-rabbit-0"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="28">
+    <action_set>
+      <rsc_op id="14" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="overcloud-controller-0" on_node_uuid="1">
+        <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-rabbit-0"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="29">
+    <action_set>
+      <rsc_op id="44" operation="stop" operation_key="rabbitmq-bundle-docker-1_stop_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1">
         <primitive id="rabbitmq-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="overcloud-rabbit-1" CRM_meta_on_node_uuid="overcloud-rabbit-1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-1" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-1:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="24">
+  <synapse id="30">
     <action_set>
       <rsc_op id="12" operation="start" operation_key="rabbitmq-bundle-docker-1_start_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1">
         <primitive id="rabbitmq-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
@@ -380,14 +452,14 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="26" operation="stop" operation_key="rabbitmq-bundle-docker-1_stop_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1"/>
+        <rsc_op id="44" operation="stop" operation_key="rabbitmq-bundle-docker-1_stop_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="32" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+        <pseudo_event id="50" operation="start" operation_key="rabbitmq-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="25">
+  <synapse id="31">
     <action_set>
       <rsc_op id="8" operation="monitor" operation_key="rabbitmq-bundle-docker-1_monitor_60000" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1">
         <primitive id="rabbitmq-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
@@ -400,22 +472,22 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="26">
+  <synapse id="32">
     <action_set>
-      <rsc_op id="28" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_60000" on_node="overcloud-controller-1" on_node_uuid="2">
+      <rsc_op id="46" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_60000" on_node="overcloud-controller-1" on_node_uuid="2">
         <primitive id="rabbitmq-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="rabbitmq-bundle-docker-1" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="overcloud-controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" addr="overcloud-rabbit-1"  port="3121"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="27" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
+        <rsc_op id="45" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="27">
+  <synapse id="33">
     <action_set>
-      <rsc_op id="27" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2">
+      <rsc_op id="45" operation="start" operation_key="rabbitmq-bundle-1_start_0" on_node="overcloud-controller-1" on_node_uuid="2">
         <primitive id="rabbitmq-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="rabbitmq-bundle-docker-1" CRM_meta_on_node="overcloud-controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" addr="overcloud-rabbit-1"  port="3121"/>
       </rsc_op>
@@ -424,18 +496,90 @@
       <trigger>
         <rsc_op id="12" operation="start" operation_key="rabbitmq-bundle-docker-1_start_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1"/>
       </trigger>
+      <trigger>
+        <rsc_op id="15" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="18" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="21" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="24" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_0" on_node="overcloud-galera-0" on_node_uuid="4"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="27" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_0" on_node="overcloud-galera-1" on_node_uuid="5"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="30" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_0" on_node="overcloud-galera-2" on_node_uuid="6"/>
+      </trigger>
     </inputs>
   </synapse>
-  <synapse id="28">
+  <synapse id="34">
+    <action_set>
+      <rsc_op id="30" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_0" on_node="overcloud-galera-2" on_node_uuid="6">
+        <primitive id="rabbitmq-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-1" CRM_meta_on_node="overcloud-galera-2" CRM_meta_on_node_uuid="6" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-rabbit-1"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="35">
+    <action_set>
+      <rsc_op id="27" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_0" on_node="overcloud-galera-1" on_node_uuid="5">
+        <primitive id="rabbitmq-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-1" CRM_meta_on_node="overcloud-galera-1" CRM_meta_on_node_uuid="5" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-rabbit-1"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="36">
+    <action_set>
+      <rsc_op id="24" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_0" on_node="overcloud-galera-0" on_node_uuid="4">
+        <primitive id="rabbitmq-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-1" CRM_meta_on_node="overcloud-galera-0" CRM_meta_on_node_uuid="4" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-rabbit-1"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="37">
+    <action_set>
+      <rsc_op id="21" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_0" on_node="overcloud-controller-2" on_node_uuid="3">
+        <primitive id="rabbitmq-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-1" CRM_meta_on_node="overcloud-controller-2" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-rabbit-1"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="38">
+    <action_set>
+      <rsc_op id="18" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_0" on_node="overcloud-controller-1" on_node_uuid="2">
+        <primitive id="rabbitmq-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-1" CRM_meta_on_node="overcloud-controller-1" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-rabbit-1"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="39">
     <action_set>
-      <rsc_op id="29" operation="stop" operation_key="rabbitmq-bundle-docker-2_stop_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2">
+      <rsc_op id="15" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_0" on_node="overcloud-controller-0" on_node_uuid="1">
+        <primitive id="rabbitmq-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-1" CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-rabbit-1"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="40">
+    <action_set>
+      <rsc_op id="47" operation="stop" operation_key="rabbitmq-bundle-docker-2_stop_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2">
         <primitive id="rabbitmq-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="overcloud-rabbit-2" CRM_meta_on_node_uuid="overcloud-rabbit-2" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-2" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-2:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="29">
+  <synapse id="41">
     <action_set>
       <rsc_op id="13" operation="start" operation_key="rabbitmq-bundle-docker-2_start_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2">
         <primitive id="rabbitmq-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -444,14 +588,14 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="29" operation="stop" operation_key="rabbitmq-bundle-docker-2_stop_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2"/>
+        <rsc_op id="47" operation="stop" operation_key="rabbitmq-bundle-docker-2_stop_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="32" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+        <pseudo_event id="50" operation="start" operation_key="rabbitmq-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="30">
+  <synapse id="42">
     <action_set>
       <rsc_op id="9" operation="monitor" operation_key="rabbitmq-bundle-docker-2_monitor_60000" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2">
         <primitive id="rabbitmq-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
@@ -464,22 +608,22 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="31">
+  <synapse id="43">
     <action_set>
-      <rsc_op id="31" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_60000" on_node="overcloud-controller-2" on_node_uuid="3">
+      <rsc_op id="49" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_60000" on_node="overcloud-controller-2" on_node_uuid="3">
         <primitive id="rabbitmq-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="rabbitmq-bundle-docker-2" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="overcloud-controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" addr="overcloud-rabbit-2"  port="3121"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="30" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
+        <rsc_op id="48" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="32">
+  <synapse id="44">
     <action_set>
-      <rsc_op id="30" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3">
+      <rsc_op id="48" operation="start" operation_key="rabbitmq-bundle-2_start_0" on_node="overcloud-controller-2" on_node_uuid="3">
         <primitive id="rabbitmq-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="rabbitmq-bundle-docker-2" CRM_meta_on_node="overcloud-controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" addr="overcloud-rabbit-2"  port="3121"/>
       </rsc_op>
@@ -488,11 +632,83 @@
       <trigger>
         <rsc_op id="13" operation="start" operation_key="rabbitmq-bundle-docker-2_start_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2"/>
       </trigger>
+      <trigger>
+        <rsc_op id="16" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="19" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="22" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="25" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_0" on_node="overcloud-galera-0" on_node_uuid="4"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="28" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_0" on_node="overcloud-galera-1" on_node_uuid="5"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="31" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_0" on_node="overcloud-galera-2" on_node_uuid="6"/>
+      </trigger>
     </inputs>
   </synapse>
-  <synapse id="33" priority="1000000">
+  <synapse id="45">
+    <action_set>
+      <rsc_op id="31" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_0" on_node="overcloud-galera-2" on_node_uuid="6">
+        <primitive id="rabbitmq-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-2" CRM_meta_on_node="overcloud-galera-2" CRM_meta_on_node_uuid="6" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-rabbit-2"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="46">
+    <action_set>
+      <rsc_op id="28" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_0" on_node="overcloud-galera-1" on_node_uuid="5">
+        <primitive id="rabbitmq-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-2" CRM_meta_on_node="overcloud-galera-1" CRM_meta_on_node_uuid="5" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-rabbit-2"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="47">
+    <action_set>
+      <rsc_op id="25" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_0" on_node="overcloud-galera-0" on_node_uuid="4">
+        <primitive id="rabbitmq-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-2" CRM_meta_on_node="overcloud-galera-0" CRM_meta_on_node_uuid="4" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-rabbit-2"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="48">
     <action_set>
-      <pseudo_event id="33" operation="running" operation_key="rabbitmq-bundle_running_0">
+      <rsc_op id="22" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_0" on_node="overcloud-controller-2" on_node_uuid="3">
+        <primitive id="rabbitmq-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-2" CRM_meta_on_node="overcloud-controller-2" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-rabbit-2"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="49">
+    <action_set>
+      <rsc_op id="19" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_0" on_node="overcloud-controller-1" on_node_uuid="2">
+        <primitive id="rabbitmq-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-2" CRM_meta_on_node="overcloud-controller-1" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-rabbit-2"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="50">
+    <action_set>
+      <rsc_op id="16" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_0" on_node="overcloud-controller-0" on_node_uuid="1">
+        <primitive id="rabbitmq-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-2" CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-rabbit-2"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="51" priority="1000000">
+    <action_set>
+      <pseudo_event id="51" operation="running" operation_key="rabbitmq-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -507,19 +723,19 @@
         <rsc_op id="13" operation="start" operation_key="rabbitmq-bundle-docker-2_start_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="47" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="65" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="34">
+  <synapse id="52">
     <action_set>
-      <pseudo_event id="32" operation="start" operation_key="rabbitmq-bundle_start_0">
+      <pseudo_event id="50" operation="start" operation_key="rabbitmq-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="35">
+  <synapse id="53">
     <action_set>
       <pseudo_event id="10" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -527,13 +743,13 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="23" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0"/>
+        <rsc_op id="41" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0" on_node="overcloud-rabbit-0" on_node_uuid="overcloud-rabbit-0" router_node="overcloud-controller-0"/>
       </trigger>
       <trigger>
-        <rsc_op id="26" operation="stop" operation_key="rabbitmq-bundle-docker-1_stop_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1"/>
+        <rsc_op id="44" operation="stop" operation_key="rabbitmq-bundle-docker-1_stop_0" on_node="overcloud-rabbit-1" on_node_uuid="overcloud-rabbit-1" router_node="overcloud-controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="29" operation="stop" operation_key="rabbitmq-bundle-docker-2_stop_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2"/>
+        <rsc_op id="47" operation="stop" operation_key="rabbitmq-bundle-docker-2_stop_0" on_node="overcloud-rabbit-2" on_node_uuid="overcloud-rabbit-2" router_node="overcloud-controller-2"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/bundle-nested-colocation.summary b/pengine/test10/bundle-nested-colocation.summary
index 7c708d2..2cc1c7c 100644
--- a/pengine/test10/bundle-nested-colocation.summary
+++ b/pengine/test10/bundle-nested-colocation.summary
@@ -30,8 +30,26 @@ Transition Summary:
 Executing cluster transition:
  * Pseudo action:   rabbitmq-bundle-clone_pre_notify_start_0
  * Resource action: rabbitmq-bundle-docker-0 stop on overcloud-rabbit-0
+ * Resource action: rabbitmq-bundle-0 monitor on overcloud-galera-2
+ * Resource action: rabbitmq-bundle-0 monitor on overcloud-galera-1
+ * Resource action: rabbitmq-bundle-0 monitor on overcloud-galera-0
+ * Resource action: rabbitmq-bundle-0 monitor on overcloud-controller-2
+ * Resource action: rabbitmq-bundle-0 monitor on overcloud-controller-1
+ * Resource action: rabbitmq-bundle-0 monitor on overcloud-controller-0
  * Resource action: rabbitmq-bundle-docker-1 stop on overcloud-rabbit-1
+ * Resource action: rabbitmq-bundle-1 monitor on overcloud-galera-2
+ * Resource action: rabbitmq-bundle-1 monitor on overcloud-galera-1
+ * Resource action: rabbitmq-bundle-1 monitor on overcloud-galera-0
+ * Resource action: rabbitmq-bundle-1 monitor on overcloud-controller-2
+ * Resource action: rabbitmq-bundle-1 monitor on overcloud-controller-1
+ * Resource action: rabbitmq-bundle-1 monitor on overcloud-controller-0
  * Resource action: rabbitmq-bundle-docker-2 stop on overcloud-rabbit-2
+ * Resource action: rabbitmq-bundle-2 monitor on overcloud-galera-2
+ * Resource action: rabbitmq-bundle-2 monitor on overcloud-galera-1
+ * Resource action: rabbitmq-bundle-2 monitor on overcloud-galera-0
+ * Resource action: rabbitmq-bundle-2 monitor on overcloud-controller-2
+ * Resource action: rabbitmq-bundle-2 monitor on overcloud-controller-1
+ * Resource action: rabbitmq-bundle-2 monitor on overcloud-controller-0
  * Pseudo action:   rabbitmq-bundle_start_0
  * Pseudo action:   all_stopped
  * Pseudo action:   rabbitmq-bundle-clone_confirmed-pre_notify_start_0
diff --git a/pengine/test10/bundle-order-fencing.dot b/pengine/test10/bundle-order-fencing.dot
index 0db9605..cff477b 100644
--- a/pengine/test10/bundle-order-fencing.dot
+++ b/pengine/test10/bundle-order-fencing.dot
@@ -6,6 +6,12 @@ digraph "g" {
 "all_stopped" -> "stonith-fence_ipmilan-5254000dcb3f_start_0 controller-2" [ style = bold]
 "all_stopped" -> "stonith-fence_ipmilan-5254003e8e97_start_0 controller-1" [ style = bold]
 "all_stopped" [ style=bold color="green" fontcolor="orange"]
+"galera-bundle-0_monitor_0 controller-1" -> "galera-bundle-0_start_0 controller-2" [ style = dashed]
+"galera-bundle-0_monitor_0 controller-1" -> "galera-bundle-0_stop_0 controller-0" [ style = bold]
+"galera-bundle-0_monitor_0 controller-1" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-0_monitor_0 controller-2" -> "galera-bundle-0_start_0 controller-2" [ style = dashed]
+"galera-bundle-0_monitor_0 controller-2" -> "galera-bundle-0_stop_0 controller-0" [ style = bold]
+"galera-bundle-0_monitor_0 controller-2" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-0_monitor_60000 controller-2" [ style=dashed color="red" fontcolor="black"]
 "galera-bundle-0_start_0 controller-2" -> "galera-bundle-0_monitor_60000 controller-2" [ style = dashed]
 "galera-bundle-0_start_0 controller-2" -> "galera_monitor_20000 galera-bundle-0" [ style = dashed]
@@ -16,6 +22,8 @@ digraph "g" {
 "galera-bundle-0_stop_0 controller-0" -> "galera-bundle-0_start_0 controller-2" [ style = dashed]
 "galera-bundle-0_stop_0 controller-0" -> "galera-bundle-docker-0_stop_0 controller-0" [ style = bold]
 "galera-bundle-0_stop_0 controller-0" [ style=bold color="green" fontcolor="orange"]
+"galera-bundle-1_monitor_0 controller-2" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-2_monitor_0 controller-1" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-0_stop_0 controller-0" -> "all_stopped" [ style = bold]
 "galera-bundle-docker-0_stop_0 controller-0" -> "galera-bundle_stopped_0" [ style = bold]
 "galera-bundle-docker-0_stop_0 controller-0" [ style=bold color="green" fontcolor="orange"]
@@ -94,6 +102,12 @@ digraph "g" {
 "ip-192.168.24.7_stop_0 controller-0" -> "all_stopped" [ style = bold]
 "ip-192.168.24.7_stop_0 controller-0" -> "ip-192.168.24.7_start_0 controller-2" [ style = bold]
 "ip-192.168.24.7_stop_0 controller-0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-0_monitor_0 controller-1" -> "rabbitmq-bundle-0_start_0 controller-1" [ style = dashed]
+"rabbitmq-bundle-0_monitor_0 controller-1" -> "rabbitmq-bundle-0_stop_0 controller-0" [ style = bold]
+"rabbitmq-bundle-0_monitor_0 controller-1" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-0_monitor_0 controller-2" -> "rabbitmq-bundle-0_start_0 controller-1" [ style = dashed]
+"rabbitmq-bundle-0_monitor_0 controller-2" -> "rabbitmq-bundle-0_stop_0 controller-0" [ style = bold]
+"rabbitmq-bundle-0_monitor_0 controller-2" [ style=bold color="green" fontcolor="black"]
 "rabbitmq-bundle-0_monitor_60000 controller-1" [ style=dashed color="red" fontcolor="black"]
 "rabbitmq-bundle-0_start_0 controller-1" -> "rabbitmq-bundle-0_monitor_60000 controller-1" [ style = dashed]
 "rabbitmq-bundle-0_start_0 controller-1" -> "rabbitmq_monitor_10000 rabbitmq-bundle-0" [ style = dashed]
@@ -103,6 +117,8 @@ digraph "g" {
 "rabbitmq-bundle-0_stop_0 controller-0" -> "rabbitmq-bundle-0_start_0 controller-1" [ style = dashed]
 "rabbitmq-bundle-0_stop_0 controller-0" -> "rabbitmq-bundle-docker-0_stop_0 controller-0" [ style = bold]
 "rabbitmq-bundle-0_stop_0 controller-0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-1_monitor_0 controller-2" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-2_monitor_0 controller-1" [ style=bold color="green" fontcolor="black"]
 "rabbitmq-bundle-clone_confirmed-post_notify_running_0" -> "rabbitmq-bundle_running_0" [ style = bold]
 "rabbitmq-bundle-clone_confirmed-post_notify_running_0" -> "rabbitmq_monitor_10000 rabbitmq-bundle-0" [ style = dashed]
 "rabbitmq-bundle-clone_confirmed-post_notify_running_0" [ style=bold color="green" fontcolor="orange"]
@@ -189,6 +205,12 @@ digraph "g" {
 "rabbitmq_stop_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_stopped_0" [ style = bold]
 "rabbitmq_stop_0 rabbitmq-bundle-0" -> "rabbitmq_start_0 rabbitmq-bundle-0" [ style = dashed]
 "rabbitmq_stop_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-0_monitor_0 controller-1" -> "redis-bundle-0_start_0 controller-1" [ style = dashed]
+"redis-bundle-0_monitor_0 controller-1" -> "redis-bundle-0_stop_0 controller-0" [ style = bold]
+"redis-bundle-0_monitor_0 controller-1" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-0_monitor_0 controller-2" -> "redis-bundle-0_start_0 controller-1" [ style = dashed]
+"redis-bundle-0_monitor_0 controller-2" -> "redis-bundle-0_stop_0 controller-0" [ style = bold]
+"redis-bundle-0_monitor_0 controller-2" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-0_monitor_60000 controller-1" [ style=dashed color="red" fontcolor="black"]
 "redis-bundle-0_start_0 controller-1" -> "redis-bundle-0_monitor_60000 controller-1" [ style = dashed]
 "redis-bundle-0_start_0 controller-1" -> "redis_monitor_45000 redis-bundle-0" [ style = dashed]
@@ -199,6 +221,8 @@ digraph "g" {
 "redis-bundle-0_stop_0 controller-0" -> "redis-bundle-0_start_0 controller-1" [ style = dashed]
 "redis-bundle-0_stop_0 controller-0" -> "redis-bundle-docker-0_stop_0 controller-0" [ style = bold]
 "redis-bundle-0_stop_0 controller-0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-1_monitor_0 controller-2" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-2_monitor_0 controller-1" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-docker-0_stop_0 controller-0" -> "all_stopped" [ style = bold]
 "redis-bundle-docker-0_stop_0 controller-0" -> "redis-bundle_stopped_0" [ style = bold]
 "redis-bundle-docker-0_stop_0 controller-0" [ style=bold color="green" fontcolor="orange"]
diff --git a/pengine/test10/bundle-order-fencing.exp b/pengine/test10/bundle-order-fencing.exp
index d072d85..6782060 100644
--- a/pengine/test10/bundle-order-fencing.exp
+++ b/pengine/test10/bundle-order-fencing.exp
@@ -1,229 +1,229 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0" priority="1000000">
     <action_set>
-      <rsc_op id="214" operation="notify" operation_key="rabbitmq_post_notify_start_0" internal_operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="controller-1">
+      <rsc_op id="226" operation="notify" operation_key="rabbitmq_post_notify_start_0" internal_operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="controller-1">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="57" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="69" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1" priority="1000000">
     <action_set>
-      <pseudo_event id="199" operation="notified" operation_key="rabbitmq_notified_0" internal_operation_key="rabbitmq:0_confirmed-post_notify_stonith_0">
+      <pseudo_event id="211" operation="notified" operation_key="rabbitmq_notified_0" internal_operation_key="rabbitmq:0_confirmed-post_notify_stonith_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="198" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stonith_0"/>
+        <pseudo_event id="210" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stonith_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="200" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:1_post_notify_stop_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1"/>
+        <rsc_op id="212" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:1_post_notify_stop_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="201" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stop_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2"/>
+        <rsc_op id="213" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stop_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2" priority="1000000">
     <action_set>
-      <pseudo_event id="198" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stonith_0">
+      <pseudo_event id="210" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stonith_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="197" operation="stonith" operation_key="stonith-rabbitmq-bundle-0-off" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0"/>
+        <pseudo_event id="209" operation="stonith" operation_key="stonith-rabbitmq-bundle-0-off" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <pseudo_event id="50" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:0_stop_0">
+      <pseudo_event id="62" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_physical_host="controller-0" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="44" operation="stop" operation_key="rabbitmq-bundle_stop_0"/>
+        <pseudo_event id="56" operation="stop" operation_key="rabbitmq-bundle_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="59" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0"/>
+        <pseudo_event id="71" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="197" operation="stonith" operation_key="stonith-rabbitmq-bundle-0-off" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0"/>
+        <pseudo_event id="209" operation="stonith" operation_key="stonith-rabbitmq-bundle-0-off" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4">
     <action_set>
-      <rsc_op id="219" operation="notify" operation_key="rabbitmq_pre_notify_stop_0" internal_operation_key="rabbitmq:1_pre_notify_stop_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1">
+      <rsc_op id="231" operation="notify" operation_key="rabbitmq_pre_notify_stop_0" internal_operation_key="rabbitmq:1_pre_notify_stop_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1">
         <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="61" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_stop_0"/>
+        <pseudo_event id="73" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5" priority="1000000">
     <action_set>
-      <rsc_op id="216" operation="notify" operation_key="rabbitmq_post_notify_start_0" internal_operation_key="rabbitmq:1_post_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1">
+      <rsc_op id="228" operation="notify" operation_key="rabbitmq_post_notify_start_0" internal_operation_key="rabbitmq:1_post_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1">
         <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="57" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="69" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <rsc_op id="215" operation="notify" operation_key="rabbitmq_pre_notify_start_0" internal_operation_key="rabbitmq:1_pre_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1">
+      <rsc_op id="227" operation="notify" operation_key="rabbitmq_pre_notify_start_0" internal_operation_key="rabbitmq:1_pre_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1">
         <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="55" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
+        <pseudo_event id="67" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7" priority="1000000">
     <action_set>
-      <rsc_op id="200" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:1_post_notify_stop_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1">
+      <rsc_op id="212" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:1_post_notify_stop_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1">
         <primitive id="rabbitmq" long-id="rabbitmq:1" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-1" CRM_meta_on_node_uuid="rabbitmq-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="63" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_stopped_0"/>
+        <pseudo_event id="75" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="198" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stonith_0"/>
+        <pseudo_event id="210" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <rsc_op id="220" operation="notify" operation_key="rabbitmq_pre_notify_stop_0" internal_operation_key="rabbitmq:2_pre_notify_stop_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2">
+      <rsc_op id="232" operation="notify" operation_key="rabbitmq_pre_notify_stop_0" internal_operation_key="rabbitmq:2_pre_notify_stop_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2">
         <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="61" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_stop_0"/>
+        <pseudo_event id="73" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9" priority="1000000">
     <action_set>
-      <rsc_op id="218" operation="notify" operation_key="rabbitmq_post_notify_start_0" internal_operation_key="rabbitmq:2_post_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2">
+      <rsc_op id="230" operation="notify" operation_key="rabbitmq_post_notify_start_0" internal_operation_key="rabbitmq:2_post_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2">
         <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="57" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="69" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="217" operation="notify" operation_key="rabbitmq_pre_notify_start_0" internal_operation_key="rabbitmq:2_pre_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2">
+      <rsc_op id="229" operation="notify" operation_key="rabbitmq_pre_notify_start_0" internal_operation_key="rabbitmq:2_pre_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2">
         <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="55" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
+        <pseudo_event id="67" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11" priority="1000000">
     <action_set>
-      <rsc_op id="201" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stop_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2">
+      <rsc_op id="213" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stop_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2">
         <primitive id="rabbitmq" long-id="rabbitmq:2" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="rabbitmq:0 rabbitmq:1 rabbitmq:2" CRM_meta_notify_active_uname="rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 controller-2 controller-1 controller-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource="rabbitmq:0" CRM_meta_notify_stop_uname="rabbitmq-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-2" CRM_meta_on_node_uuid="rabbitmq-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="63" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_stopped_0"/>
+        <pseudo_event id="75" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="198" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stonith_0"/>
+        <pseudo_event id="210" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:0_post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12" priority="1000000">
     <action_set>
-      <pseudo_event id="64" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_stopped_0">
+      <pseudo_event id="76" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_stopped_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="63" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_stopped_0"/>
+        <pseudo_event id="75" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="200" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:1_post_notify_stop_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1"/>
+        <rsc_op id="212" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:1_post_notify_stop_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="201" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stop_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2"/>
+        <rsc_op id="213" operation="notify" operation_key="rabbitmq_post_notify_stop_0" internal_operation_key="rabbitmq:2_post_notify_stop_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13" priority="1000000">
     <action_set>
-      <pseudo_event id="63" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_stopped_0">
+      <pseudo_event id="75" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_stopped_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="60" operation="stopped" operation_key="rabbitmq-bundle-clone_stopped_0"/>
+        <pseudo_event id="72" operation="stopped" operation_key="rabbitmq-bundle-clone_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="62" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="74" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <pseudo_event id="62" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_stop_0">
+      <pseudo_event id="74" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_stop_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="61" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_stop_0"/>
+        <pseudo_event id="73" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="219" operation="notify" operation_key="rabbitmq_pre_notify_stop_0" internal_operation_key="rabbitmq:1_pre_notify_stop_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1"/>
+        <rsc_op id="231" operation="notify" operation_key="rabbitmq_pre_notify_stop_0" internal_operation_key="rabbitmq:1_pre_notify_stop_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="220" operation="notify" operation_key="rabbitmq_pre_notify_stop_0" internal_operation_key="rabbitmq:2_pre_notify_stop_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2"/>
+        <rsc_op id="232" operation="notify" operation_key="rabbitmq_pre_notify_stop_0" internal_operation_key="rabbitmq:2_pre_notify_stop_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15">
     <action_set>
-      <pseudo_event id="61" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_stop_0">
+      <pseudo_event id="73" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_stop_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -231,136 +231,136 @@
   </synapse>
   <synapse id="16" priority="1000000">
     <action_set>
-      <pseudo_event id="60" operation="stopped" operation_key="rabbitmq-bundle-clone_stopped_0">
+      <pseudo_event id="72" operation="stopped" operation_key="rabbitmq-bundle-clone_stopped_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="50" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:0_stop_0"/>
+        <pseudo_event id="62" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="59" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0"/>
+        <pseudo_event id="71" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="17">
     <action_set>
-      <pseudo_event id="59" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0">
+      <pseudo_event id="71" operation="stop" operation_key="rabbitmq-bundle-clone_stop_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="44" operation="stop" operation_key="rabbitmq-bundle_stop_0"/>
+        <pseudo_event id="56" operation="stop" operation_key="rabbitmq-bundle_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="62" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="74" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="197" operation="stonith" operation_key="stonith-rabbitmq-bundle-0-off" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0"/>
+        <pseudo_event id="209" operation="stonith" operation_key="stonith-rabbitmq-bundle-0-off" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="18" priority="1000000">
     <action_set>
-      <pseudo_event id="58" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
+      <pseudo_event id="70" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="57" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="69" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="214" operation="notify" operation_key="rabbitmq_post_notify_start_0" internal_operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="controller-1"/>
+        <rsc_op id="226" operation="notify" operation_key="rabbitmq_post_notify_start_0" internal_operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="216" operation="notify" operation_key="rabbitmq_post_notify_start_0" internal_operation_key="rabbitmq:1_post_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1"/>
+        <rsc_op id="228" operation="notify" operation_key="rabbitmq_post_notify_start_0" internal_operation_key="rabbitmq:1_post_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="218" operation="notify" operation_key="rabbitmq_post_notify_start_0" internal_operation_key="rabbitmq:2_post_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2"/>
+        <rsc_op id="230" operation="notify" operation_key="rabbitmq_post_notify_start_0" internal_operation_key="rabbitmq:2_post_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="19" priority="1000000">
     <action_set>
-      <pseudo_event id="57" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
+      <pseudo_event id="69" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="54" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
+        <pseudo_event id="66" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="56" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="68" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="20">
     <action_set>
-      <pseudo_event id="56" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
+      <pseudo_event id="68" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="55" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
+        <pseudo_event id="67" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="215" operation="notify" operation_key="rabbitmq_pre_notify_start_0" internal_operation_key="rabbitmq:1_pre_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1"/>
+        <rsc_op id="227" operation="notify" operation_key="rabbitmq_pre_notify_start_0" internal_operation_key="rabbitmq:1_pre_notify_start_0" on_node="rabbitmq-bundle-1" on_node_uuid="rabbitmq-bundle-1" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="217" operation="notify" operation_key="rabbitmq_pre_notify_start_0" internal_operation_key="rabbitmq:2_pre_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2"/>
+        <rsc_op id="229" operation="notify" operation_key="rabbitmq_pre_notify_start_0" internal_operation_key="rabbitmq:2_pre_notify_start_0" on_node="rabbitmq-bundle-2" on_node_uuid="rabbitmq-bundle-2" router_node="controller-2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21">
     <action_set>
-      <pseudo_event id="55" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
+      <pseudo_event id="67" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="64" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="76" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="22" priority="1000000">
     <action_set>
-      <pseudo_event id="54" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
+      <pseudo_event id="66" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="53" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="65" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="23">
     <action_set>
-      <pseudo_event id="53" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
+      <pseudo_event id="65" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="42" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+        <pseudo_event id="54" operation="start" operation_key="rabbitmq-bundle_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="56" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="68" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="60" operation="stopped" operation_key="rabbitmq-bundle-clone_stopped_0"/>
+        <pseudo_event id="72" operation="stopped" operation_key="rabbitmq-bundle-clone_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="24">
     <action_set>
-      <pseudo_event id="30" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0">
+      <pseudo_event id="42" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0">
         <attributes CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/rhosp12/openstack-rabbitmq-docker:pcmklatest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3122 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/rabbitmq/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-0:/var/log -p 3122:3122 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </pseudo_event>
     </action_set>
@@ -369,16 +369,16 @@
         <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="31" operation="stop" operation_key="rabbitmq-bundle-0_stop_0"/>
+        <pseudo_event id="43" operation="stop" operation_key="rabbitmq-bundle-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="44" operation="stop" operation_key="rabbitmq-bundle_stop_0"/>
+        <pseudo_event id="56" operation="stop" operation_key="rabbitmq-bundle_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="25">
     <action_set>
-      <pseudo_event id="31" operation="stop" operation_key="rabbitmq-bundle-0_stop_0">
+      <pseudo_event id="43" operation="stop" operation_key="rabbitmq-bundle-0_stop_0">
         <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_timeout="20000" addr="#uname"  port="3122"/>
       </pseudo_event>
     </action_set>
@@ -386,137 +386,179 @@
       <trigger>
         <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
+      <trigger>
+        <rsc_op id="30" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="36" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
     </inputs>
   </synapse>
   <synapse id="26">
     <action_set>
-      <pseudo_event id="90" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0">
+      <rsc_op id="36" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="#uname"  port="3122"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="27">
+    <action_set>
+      <rsc_op id="30" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="controller-1" on_node_uuid="2">
+        <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="#uname"  port="3122"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="28">
+    <action_set>
+      <rsc_op id="37" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="rabbitmq-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-1" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="controller-1"  port="3122"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="29">
+    <action_set>
+      <rsc_op id="31" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_0" on_node="controller-1" on_node_uuid="2">
+        <primitive id="rabbitmq-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-2" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="controller-2"  port="3122"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="30">
+    <action_set>
+      <pseudo_event id="102" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_physical_host="controller-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="controller-0:controller-0.internalapi.localdomain;controller-1:controller-1.internalapi.localdomain;controller-2:controller-2.internalapi.localdomain"  enable_creation="true" wsrep_cluster_address="gcomm://controller-0.internalapi.localdomain,controller-1.internalapi.localdomain,controller-2.internalapi.localdomain"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="79" operation="stop" operation_key="galera-bundle_stop_0"/>
+        <pseudo_event id="91" operation="stop" operation_key="galera-bundle_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="89" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0"/>
+        <pseudo_event id="101" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="96" operation="stop" operation_key="galera-bundle-master_stop_0"/>
+        <pseudo_event id="108" operation="stop" operation_key="galera-bundle-master_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="196" operation="stonith" operation_key="stonith-galera-bundle-0-off" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0"/>
+        <pseudo_event id="208" operation="stonith" operation_key="stonith-galera-bundle-0-off" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="27">
+  <synapse id="31">
     <action_set>
-      <pseudo_event id="89" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0">
+      <pseudo_event id="101" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="false" CRM_meta_physical_host="controller-0" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="controller-0:controller-0.internalapi.localdomain;controller-1:controller-1.internalapi.localdomain;controller-2:controller-2.internalapi.localdomain"  enable_creation="true" wsrep_cluster_address="gcomm://controller-0.internalapi.localdomain,controller-1.internalapi.localdomain,controller-2.internalapi.localdomain"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="100" operation="demote" operation_key="galera-bundle-master_demote_0"/>
+        <pseudo_event id="112" operation="demote" operation_key="galera-bundle-master_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="196" operation="stonith" operation_key="stonith-galera-bundle-0-off" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0"/>
+        <pseudo_event id="208" operation="stonith" operation_key="stonith-galera-bundle-0-off" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="28" priority="1000000">
+  <synapse id="32" priority="1000000">
     <action_set>
-      <pseudo_event id="101" operation="demoted" operation_key="galera-bundle-master_demoted_0">
+      <pseudo_event id="113" operation="demoted" operation_key="galera-bundle-master_demoted_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="89" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0"/>
+        <pseudo_event id="101" operation="demote" operation_key="galera_demote_0" internal_operation_key="galera:0_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="100" operation="demote" operation_key="galera-bundle-master_demote_0"/>
+        <pseudo_event id="112" operation="demote" operation_key="galera-bundle-master_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="29">
+  <synapse id="33">
     <action_set>
-      <pseudo_event id="100" operation="demote" operation_key="galera-bundle-master_demote_0">
+      <pseudo_event id="112" operation="demote" operation_key="galera-bundle-master_demote_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="104" operation="demote" operation_key="galera-bundle_demote_0"/>
+        <pseudo_event id="116" operation="demote" operation_key="galera-bundle_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="30" priority="1000000">
+  <synapse id="34" priority="1000000">
     <action_set>
-      <pseudo_event id="97" operation="stopped" operation_key="galera-bundle-master_stopped_0">
+      <pseudo_event id="109" operation="stopped" operation_key="galera-bundle-master_stopped_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="90" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0"/>
+        <pseudo_event id="102" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="96" operation="stop" operation_key="galera-bundle-master_stop_0"/>
+        <pseudo_event id="108" operation="stop" operation_key="galera-bundle-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="31">
+  <synapse id="35">
     <action_set>
-      <pseudo_event id="96" operation="stop" operation_key="galera-bundle-master_stop_0">
+      <pseudo_event id="108" operation="stop" operation_key="galera-bundle-master_stop_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="79" operation="stop" operation_key="galera-bundle_stop_0"/>
+        <pseudo_event id="91" operation="stop" operation_key="galera-bundle_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="101" operation="demoted" operation_key="galera-bundle-master_demoted_0"/>
+        <pseudo_event id="113" operation="demoted" operation_key="galera-bundle-master_demoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="196" operation="stonith" operation_key="stonith-galera-bundle-0-off" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0"/>
+        <pseudo_event id="208" operation="stonith" operation_key="stonith-galera-bundle-0-off" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="32" priority="1000000">
+  <synapse id="36" priority="1000000">
     <action_set>
-      <pseudo_event id="95" operation="running" operation_key="galera-bundle-master_running_0">
+      <pseudo_event id="107" operation="running" operation_key="galera-bundle-master_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="94" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <pseudo_event id="106" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="33">
+  <synapse id="37">
     <action_set>
-      <pseudo_event id="94" operation="start" operation_key="galera-bundle-master_start_0">
+      <pseudo_event id="106" operation="start" operation_key="galera-bundle-master_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="77" operation="start" operation_key="galera-bundle_start_0"/>
+        <pseudo_event id="89" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="97" operation="stopped" operation_key="galera-bundle-master_stopped_0"/>
+        <pseudo_event id="109" operation="stopped" operation_key="galera-bundle-master_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="101" operation="demoted" operation_key="galera-bundle-master_demoted_0"/>
+        <pseudo_event id="113" operation="demoted" operation_key="galera-bundle-master_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="34">
+  <synapse id="38">
     <action_set>
-      <pseudo_event id="65" operation="stop" operation_key="galera-bundle-docker-0_stop_0">
+      <pseudo_event id="77" operation="stop" operation_key="galera-bundle-docker-0_stop_0">
         <attributes CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/rhosp12/openstack-mariadb-docker:pcmklatest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/mysql/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </pseudo_event>
     </action_set>
@@ -525,16 +567,16 @@
         <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="66" operation="stop" operation_key="galera-bundle-0_stop_0"/>
+        <pseudo_event id="78" operation="stop" operation_key="galera-bundle-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="79" operation="stop" operation_key="galera-bundle_stop_0"/>
+        <pseudo_event id="91" operation="stop" operation_key="galera-bundle_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="35">
+  <synapse id="39">
     <action_set>
-      <pseudo_event id="66" operation="stop" operation_key="galera-bundle-0_stop_0">
+      <pseudo_event id="78" operation="stop" operation_key="galera-bundle-0_stop_0">
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_timeout="20000" addr="#uname"  port="3123"/>
       </pseudo_event>
     </action_set>
@@ -542,251 +584,293 @@
       <trigger>
         <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
+      <trigger>
+        <rsc_op id="32" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="38" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
     </inputs>
   </synapse>
-  <synapse id="36" priority="1000000">
+  <synapse id="40">
     <action_set>
-      <rsc_op id="229" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="controller-1">
+      <rsc_op id="38" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="#uname"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="41">
+    <action_set>
+      <rsc_op id="32" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="controller-1" on_node_uuid="2">
+        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="#uname"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="42">
+    <action_set>
+      <rsc_op id="39" operation="monitor" operation_key="galera-bundle-1_monitor_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="galera-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-1" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="controller-1"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="43">
+    <action_set>
+      <rsc_op id="33" operation="monitor" operation_key="galera-bundle-2_monitor_0" on_node="controller-1" on_node_uuid="2">
+        <primitive id="galera-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-2" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="controller-2"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="44" priority="1000000">
+    <action_set>
+      <rsc_op id="241" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="controller-1">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="149" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+        <pseudo_event id="161" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="37">
+  <synapse id="45">
     <action_set>
-      <rsc_op id="228" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="controller-1">
+      <rsc_op id="240" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="controller-1">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="147" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+        <pseudo_event id="159" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="38" priority="1000000">
+  <synapse id="46" priority="1000000">
     <action_set>
-      <rsc_op id="221" operation="notify" operation_key="redis_post_notify_start_0" internal_operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="controller-1">
+      <rsc_op id="233" operation="notify" operation_key="redis_post_notify_start_0" internal_operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="controller-1">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="137" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+        <pseudo_event id="149" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="39" priority="1000000">
+  <synapse id="47" priority="1000000">
     <action_set>
-      <pseudo_event id="204" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0">
+      <pseudo_event id="216" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="203" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+        <pseudo_event id="215" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="205" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+        <rsc_op id="217" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="206" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
+        <rsc_op id="218" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="40" priority="1000000">
+  <synapse id="48" priority="1000000">
     <action_set>
-      <pseudo_event id="203" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0">
+      <pseudo_event id="215" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="202" operation="stonith" operation_key="stonith-redis-bundle-0-off" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0"/>
+        <pseudo_event id="214" operation="stonith" operation_key="stonith-redis-bundle-0-off" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="41">
+  <synapse id="49">
     <action_set>
-      <pseudo_event id="129" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0">
+      <pseudo_event id="141" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_physical_host="controller-0" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="120" operation="stop" operation_key="redis-bundle_stop_0"/>
+        <pseudo_event id="132" operation="stop" operation_key="redis-bundle_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="128" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0"/>
+        <pseudo_event id="140" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="139" operation="stop" operation_key="redis-bundle-master_stop_0"/>
+        <pseudo_event id="151" operation="stop" operation_key="redis-bundle-master_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="202" operation="stonith" operation_key="stonith-redis-bundle-0-off" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0"/>
+        <pseudo_event id="214" operation="stonith" operation_key="stonith-redis-bundle-0-off" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="42">
+  <synapse id="50">
     <action_set>
-      <pseudo_event id="128" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0">
+      <pseudo_event id="140" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0">
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="demote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_physical_host="controller-0" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="151" operation="demote" operation_key="redis-bundle-master_demote_0"/>
+        <pseudo_event id="163" operation="demote" operation_key="redis-bundle-master_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="202" operation="stonith" operation_key="stonith-redis-bundle-0-off" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0"/>
+        <pseudo_event id="214" operation="stonith" operation_key="stonith-redis-bundle-0-off" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="43" priority="1000000">
+  <synapse id="51" priority="1000000">
     <action_set>
-      <rsc_op id="235" operation="notify" operation_key="redis_post_notify_demote_0" internal_operation_key="redis:1_post_notify_demote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+      <rsc_op id="247" operation="notify" operation_key="redis_post_notify_demote_0" internal_operation_key="redis:1_post_notify_demote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="155" operation="notify" operation_key="redis-bundle-master_post_notify_demoted_0"/>
+        <pseudo_event id="167" operation="notify" operation_key="redis-bundle-master_post_notify_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="44">
+  <synapse id="52">
     <action_set>
-      <rsc_op id="234" operation="notify" operation_key="redis_pre_notify_demote_0" internal_operation_key="redis:1_pre_notify_demote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+      <rsc_op id="246" operation="notify" operation_key="redis_pre_notify_demote_0" internal_operation_key="redis:1_pre_notify_demote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="153" operation="notify" operation_key="redis-bundle-master_pre_notify_demote_0"/>
+        <pseudo_event id="165" operation="notify" operation_key="redis-bundle-master_pre_notify_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="45" priority="1000000">
+  <synapse id="53" priority="1000000">
     <action_set>
-      <rsc_op id="231" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:1_post_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+      <rsc_op id="243" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:1_post_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="149" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+        <pseudo_event id="161" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="46">
+  <synapse id="54">
     <action_set>
-      <rsc_op id="230" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:1_pre_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+      <rsc_op id="242" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:1_pre_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="147" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+        <pseudo_event id="159" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="47">
+  <synapse id="55">
     <action_set>
-      <rsc_op id="226" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:1_pre_notify_stop_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+      <rsc_op id="238" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:1_pre_notify_stop_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="141" operation="notify" operation_key="redis-bundle-master_pre_notify_stop_0"/>
+        <pseudo_event id="153" operation="notify" operation_key="redis-bundle-master_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="48" priority="1000000">
+  <synapse id="56" priority="1000000">
     <action_set>
-      <rsc_op id="223" operation="notify" operation_key="redis_post_notify_start_0" internal_operation_key="redis:1_post_notify_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+      <rsc_op id="235" operation="notify" operation_key="redis_post_notify_start_0" internal_operation_key="redis:1_post_notify_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="137" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+        <pseudo_event id="149" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="49">
+  <synapse id="57">
     <action_set>
-      <rsc_op id="222" operation="notify" operation_key="redis_pre_notify_start_0" internal_operation_key="redis:1_pre_notify_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+      <rsc_op id="234" operation="notify" operation_key="redis_pre_notify_start_0" internal_operation_key="redis:1_pre_notify_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="135" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0"/>
+        <pseudo_event id="147" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="50" priority="1000000">
+  <synapse id="58" priority="1000000">
     <action_set>
-      <rsc_op id="205" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+      <rsc_op id="217" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="143" operation="notify" operation_key="redis-bundle-master_post_notify_stopped_0"/>
+        <pseudo_event id="155" operation="notify" operation_key="redis-bundle-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="203" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+        <pseudo_event id="215" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="51">
+  <synapse id="59">
     <action_set>
-      <rsc_op id="125" operation="monitor" operation_key="redis_monitor_20000" internal_operation_key="redis:1_monitor_20000" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+      <rsc_op id="137" operation="monitor" operation_key="redis_monitor_20000" internal_operation_key="redis:1_monitor_20000" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_op_target_rc="8" CRM_meta_physical_host="controller-1" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="124" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+        <rsc_op id="136" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="138" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+        <pseudo_event id="150" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="144" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="156" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="150" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
+        <pseudo_event id="162" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="156" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0"/>
+        <pseudo_event id="168" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="204" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0"/>
+        <pseudo_event id="216" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="52">
+  <synapse id="60">
     <action_set>
-      <rsc_op id="124" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
+      <rsc_op id="136" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="controller-1" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
@@ -799,14 +883,14 @@
         <rsc_op id="28" operation="cancel" operation_key="redis_monitor_45000" internal_operation_key="redis:1_monitor_45000" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="145" operation="promote" operation_key="redis-bundle-master_promote_0"/>
+        <pseudo_event id="157" operation="promote" operation_key="redis-bundle-master_promote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="195" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="207" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="53">
+  <synapse id="61">
     <action_set>
       <rsc_op id="28" operation="cancel" operation_key="redis_monitor_45000" internal_operation_key="redis:1_monitor_45000" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
@@ -815,7 +899,7 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="54">
+  <synapse id="62">
     <action_set>
       <rsc_op id="27" operation="cancel" operation_key="redis_monitor_60000" internal_operation_key="redis:1_monitor_60000" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
@@ -824,517 +908,517 @@
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="55" priority="1000000">
+  <synapse id="63" priority="1000000">
     <action_set>
-      <rsc_op id="237" operation="notify" operation_key="redis_post_notify_demote_0" internal_operation_key="redis:2_post_notify_demote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
+      <rsc_op id="249" operation="notify" operation_key="redis_post_notify_demote_0" internal_operation_key="redis:2_post_notify_demote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="155" operation="notify" operation_key="redis-bundle-master_post_notify_demoted_0"/>
+        <pseudo_event id="167" operation="notify" operation_key="redis-bundle-master_post_notify_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="56">
+  <synapse id="64">
     <action_set>
-      <rsc_op id="236" operation="notify" operation_key="redis_pre_notify_demote_0" internal_operation_key="redis:2_pre_notify_demote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
+      <rsc_op id="248" operation="notify" operation_key="redis_pre_notify_demote_0" internal_operation_key="redis:2_pre_notify_demote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="demote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="153" operation="notify" operation_key="redis-bundle-master_pre_notify_demote_0"/>
+        <pseudo_event id="165" operation="notify" operation_key="redis-bundle-master_pre_notify_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="57" priority="1000000">
+  <synapse id="65" priority="1000000">
     <action_set>
-      <rsc_op id="233" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:2_post_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
+      <rsc_op id="245" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:2_post_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="149" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+        <pseudo_event id="161" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="58">
+  <synapse id="66">
     <action_set>
-      <rsc_op id="232" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:2_pre_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
+      <rsc_op id="244" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:2_pre_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="147" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+        <pseudo_event id="159" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="59">
+  <synapse id="67">
     <action_set>
-      <rsc_op id="227" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:2_pre_notify_stop_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
+      <rsc_op id="239" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:2_pre_notify_stop_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="141" operation="notify" operation_key="redis-bundle-master_pre_notify_stop_0"/>
+        <pseudo_event id="153" operation="notify" operation_key="redis-bundle-master_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="60" priority="1000000">
+  <synapse id="68" priority="1000000">
     <action_set>
-      <rsc_op id="225" operation="notify" operation_key="redis_post_notify_start_0" internal_operation_key="redis:2_post_notify_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
+      <rsc_op id="237" operation="notify" operation_key="redis_post_notify_start_0" internal_operation_key="redis:2_post_notify_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="137" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+        <pseudo_event id="149" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="61">
+  <synapse id="69">
     <action_set>
-      <rsc_op id="224" operation="notify" operation_key="redis_pre_notify_start_0" internal_operation_key="redis:2_pre_notify_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
+      <rsc_op id="236" operation="notify" operation_key="redis_pre_notify_start_0" internal_operation_key="redis:2_pre_notify_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="135" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0"/>
+        <pseudo_event id="147" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="62" priority="1000000">
+  <synapse id="70" priority="1000000">
     <action_set>
-      <rsc_op id="206" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
+      <rsc_op id="218" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_container_attribute_target="host" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0 redis:1 redis:2" CRM_meta_notify_active_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_all_hosts="controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2 controller-0 controller-1 controller-2" CRM_meta_notify_all_uname="controller-0 controller-1 controller-2 galera-bundle-0 galera-bundle-1 galera-bundle-2 rabbitmq-bundle-0 rabbitmq-bundle-1 rabbitmq-bundle-2 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 controller-2 controller-1 controller-0 galera-bundle-2 galera-bundle-1 galera-bundle-0 rabbitmq-bundle-2 rabbitmq-bundle-1" CRM_meta_notify_demote_resource="redis:0" CRM_meta_notify_demote_uname="redis-bundle-0" CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="stonith" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource="redis:0" CRM_meta_notify_master_uname="redis-bundle-0" CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource="redis:1" CRM_meta_notify_promote_uname="redis-bundle-1" CRM_meta_notify_slave_resource="redis:1 redis:2" CRM_meta_notify_slave_uname="redis-bundle-1 redis-bundle-2" CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource="redis:0" CRM_meta_notify_stop_uname="redis-bundle-0" CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="controller-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="143" operation="notify" operation_key="redis-bundle-master_post_notify_stopped_0"/>
+        <pseudo_event id="155" operation="notify" operation_key="redis-bundle-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="203" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
+        <pseudo_event id="215" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:0_post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="63" priority="1000000">
+  <synapse id="71" priority="1000000">
     <action_set>
-      <pseudo_event id="156" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0">
+      <pseudo_event id="168" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="demote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="155" operation="notify" operation_key="redis-bundle-master_post_notify_demoted_0"/>
+        <pseudo_event id="167" operation="notify" operation_key="redis-bundle-master_post_notify_demoted_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="235" operation="notify" operation_key="redis_post_notify_demote_0" internal_operation_key="redis:1_post_notify_demote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+        <rsc_op id="247" operation="notify" operation_key="redis_post_notify_demote_0" internal_operation_key="redis:1_post_notify_demote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="237" operation="notify" operation_key="redis_post_notify_demote_0" internal_operation_key="redis:2_post_notify_demote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
+        <rsc_op id="249" operation="notify" operation_key="redis_post_notify_demote_0" internal_operation_key="redis:2_post_notify_demote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="64" priority="1000000">
+  <synapse id="72" priority="1000000">
     <action_set>
-      <pseudo_event id="155" operation="notify" operation_key="redis-bundle-master_post_notify_demoted_0">
+      <pseudo_event id="167" operation="notify" operation_key="redis-bundle-master_post_notify_demoted_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demoted" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="demote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="152" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
+        <pseudo_event id="164" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="154" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_demote_0"/>
+        <pseudo_event id="166" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="65">
+  <synapse id="73">
     <action_set>
-      <pseudo_event id="154" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_demote_0">
+      <pseudo_event id="166" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_demote_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="demote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="153" operation="notify" operation_key="redis-bundle-master_pre_notify_demote_0"/>
+        <pseudo_event id="165" operation="notify" operation_key="redis-bundle-master_pre_notify_demote_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="234" operation="notify" operation_key="redis_pre_notify_demote_0" internal_operation_key="redis:1_pre_notify_demote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+        <rsc_op id="246" operation="notify" operation_key="redis_pre_notify_demote_0" internal_operation_key="redis:1_pre_notify_demote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="236" operation="notify" operation_key="redis_pre_notify_demote_0" internal_operation_key="redis:2_pre_notify_demote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
+        <rsc_op id="248" operation="notify" operation_key="redis_pre_notify_demote_0" internal_operation_key="redis:2_pre_notify_demote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="66">
+  <synapse id="74">
     <action_set>
-      <pseudo_event id="153" operation="notify" operation_key="redis-bundle-master_pre_notify_demote_0">
+      <pseudo_event id="165" operation="notify" operation_key="redis-bundle-master_pre_notify_demote_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="demote" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="demote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="67" priority="1000000">
+  <synapse id="75" priority="1000000">
     <action_set>
-      <pseudo_event id="152" operation="demoted" operation_key="redis-bundle-master_demoted_0">
+      <pseudo_event id="164" operation="demoted" operation_key="redis-bundle-master_demoted_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="128" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0"/>
+        <pseudo_event id="140" operation="demote" operation_key="redis_demote_0" internal_operation_key="redis:0_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="151" operation="demote" operation_key="redis-bundle-master_demote_0"/>
+        <pseudo_event id="163" operation="demote" operation_key="redis-bundle-master_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="68">
+  <synapse id="76">
     <action_set>
-      <pseudo_event id="151" operation="demote" operation_key="redis-bundle-master_demote_0">
+      <pseudo_event id="163" operation="demote" operation_key="redis-bundle-master_demote_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="154" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_demote_0"/>
+        <pseudo_event id="166" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_demote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="159" operation="demote" operation_key="redis-bundle_demote_0"/>
+        <pseudo_event id="171" operation="demote" operation_key="redis-bundle_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="69" priority="1000000">
+  <synapse id="77" priority="1000000">
     <action_set>
-      <pseudo_event id="150" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0">
+      <pseudo_event id="162" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="149" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+        <pseudo_event id="161" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="229" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="controller-1"/>
+        <rsc_op id="241" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="231" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:1_post_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+        <rsc_op id="243" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:1_post_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="233" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:2_post_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
+        <rsc_op id="245" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:2_post_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="70" priority="1000000">
+  <synapse id="78" priority="1000000">
     <action_set>
-      <pseudo_event id="149" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0">
+      <pseudo_event id="161" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="146" operation="promoted" operation_key="redis-bundle-master_promoted_0"/>
+        <pseudo_event id="158" operation="promoted" operation_key="redis-bundle-master_promoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="148" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+        <pseudo_event id="160" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="71">
+  <synapse id="79">
     <action_set>
-      <pseudo_event id="148" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0">
+      <pseudo_event id="160" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="147" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+        <pseudo_event id="159" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="228" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="controller-1"/>
+        <rsc_op id="240" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="230" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:1_pre_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+        <rsc_op id="242" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:1_pre_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="232" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:2_pre_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
+        <rsc_op id="244" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:2_pre_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="72">
+  <synapse id="80">
     <action_set>
-      <pseudo_event id="147" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0">
+      <pseudo_event id="159" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="138" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+        <pseudo_event id="150" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="144" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="156" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="156" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0"/>
+        <pseudo_event id="168" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="73" priority="1000000">
+  <synapse id="81" priority="1000000">
     <action_set>
-      <pseudo_event id="146" operation="promoted" operation_key="redis-bundle-master_promoted_0">
+      <pseudo_event id="158" operation="promoted" operation_key="redis-bundle-master_promoted_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="124" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+        <rsc_op id="136" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="74">
+  <synapse id="82">
     <action_set>
-      <pseudo_event id="145" operation="promote" operation_key="redis-bundle-master_promote_0">
+      <pseudo_event id="157" operation="promote" operation_key="redis-bundle-master_promote_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="134" operation="running" operation_key="redis-bundle-master_running_0"/>
+        <pseudo_event id="146" operation="running" operation_key="redis-bundle-master_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="140" operation="stopped" operation_key="redis-bundle-master_stopped_0"/>
+        <pseudo_event id="152" operation="stopped" operation_key="redis-bundle-master_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="148" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+        <pseudo_event id="160" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="152" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
+        <pseudo_event id="164" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="157" operation="promote" operation_key="redis-bundle_promote_0"/>
+        <pseudo_event id="169" operation="promote" operation_key="redis-bundle_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="75" priority="1000000">
+  <synapse id="83" priority="1000000">
     <action_set>
-      <pseudo_event id="144" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0">
+      <pseudo_event id="156" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="143" operation="notify" operation_key="redis-bundle-master_post_notify_stopped_0"/>
+        <pseudo_event id="155" operation="notify" operation_key="redis-bundle-master_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="205" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+        <rsc_op id="217" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:1_post_notify_stop_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="206" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
+        <rsc_op id="218" operation="notify" operation_key="redis_post_notify_stop_0" internal_operation_key="redis:2_post_notify_stop_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="76" priority="1000000">
+  <synapse id="84" priority="1000000">
     <action_set>
-      <pseudo_event id="143" operation="notify" operation_key="redis-bundle-master_post_notify_stopped_0">
+      <pseudo_event id="155" operation="notify" operation_key="redis-bundle-master_post_notify_stopped_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="140" operation="stopped" operation_key="redis-bundle-master_stopped_0"/>
+        <pseudo_event id="152" operation="stopped" operation_key="redis-bundle-master_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="142" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="154" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="77">
+  <synapse id="85">
     <action_set>
-      <pseudo_event id="142" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_stop_0">
+      <pseudo_event id="154" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_stop_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="141" operation="notify" operation_key="redis-bundle-master_pre_notify_stop_0"/>
+        <pseudo_event id="153" operation="notify" operation_key="redis-bundle-master_pre_notify_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="226" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:1_pre_notify_stop_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+        <rsc_op id="238" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:1_pre_notify_stop_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="227" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:2_pre_notify_stop_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
+        <rsc_op id="239" operation="notify" operation_key="redis_pre_notify_stop_0" internal_operation_key="redis:2_pre_notify_stop_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="78">
+  <synapse id="86">
     <action_set>
-      <pseudo_event id="141" operation="notify" operation_key="redis-bundle-master_pre_notify_stop_0">
+      <pseudo_event id="153" operation="notify" operation_key="redis-bundle-master_pre_notify_stop_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="156" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0"/>
+        <pseudo_event id="168" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="79" priority="1000000">
+  <synapse id="87" priority="1000000">
     <action_set>
-      <pseudo_event id="140" operation="stopped" operation_key="redis-bundle-master_stopped_0">
+      <pseudo_event id="152" operation="stopped" operation_key="redis-bundle-master_stopped_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="129" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+        <pseudo_event id="141" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="139" operation="stop" operation_key="redis-bundle-master_stop_0"/>
+        <pseudo_event id="151" operation="stop" operation_key="redis-bundle-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="80">
+  <synapse id="88">
     <action_set>
-      <pseudo_event id="139" operation="stop" operation_key="redis-bundle-master_stop_0">
+      <pseudo_event id="151" operation="stop" operation_key="redis-bundle-master_stop_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="120" operation="stop" operation_key="redis-bundle_stop_0"/>
+        <pseudo_event id="132" operation="stop" operation_key="redis-bundle_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="142" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="154" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="152" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
+        <pseudo_event id="164" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="202" operation="stonith" operation_key="stonith-redis-bundle-0-off" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0"/>
+        <pseudo_event id="214" operation="stonith" operation_key="stonith-redis-bundle-0-off" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="81" priority="1000000">
+  <synapse id="89" priority="1000000">
     <action_set>
-      <pseudo_event id="138" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0">
+      <pseudo_event id="150" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="137" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+        <pseudo_event id="149" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="221" operation="notify" operation_key="redis_post_notify_start_0" internal_operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="controller-1"/>
+        <rsc_op id="233" operation="notify" operation_key="redis_post_notify_start_0" internal_operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="223" operation="notify" operation_key="redis_post_notify_start_0" internal_operation_key="redis:1_post_notify_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+        <rsc_op id="235" operation="notify" operation_key="redis_post_notify_start_0" internal_operation_key="redis:1_post_notify_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="225" operation="notify" operation_key="redis_post_notify_start_0" internal_operation_key="redis:2_post_notify_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
+        <rsc_op id="237" operation="notify" operation_key="redis_post_notify_start_0" internal_operation_key="redis:2_post_notify_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="82" priority="1000000">
+  <synapse id="90" priority="1000000">
     <action_set>
-      <pseudo_event id="137" operation="notify" operation_key="redis-bundle-master_post_notify_running_0">
+      <pseudo_event id="149" operation="notify" operation_key="redis-bundle-master_post_notify_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="134" operation="running" operation_key="redis-bundle-master_running_0"/>
+        <pseudo_event id="146" operation="running" operation_key="redis-bundle-master_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="136" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="148" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="83">
+  <synapse id="91">
     <action_set>
-      <pseudo_event id="136" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0">
+      <pseudo_event id="148" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="135" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0"/>
+        <pseudo_event id="147" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="222" operation="notify" operation_key="redis_pre_notify_start_0" internal_operation_key="redis:1_pre_notify_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
+        <rsc_op id="234" operation="notify" operation_key="redis_pre_notify_start_0" internal_operation_key="redis:1_pre_notify_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="controller-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="224" operation="notify" operation_key="redis_pre_notify_start_0" internal_operation_key="redis:2_pre_notify_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
+        <rsc_op id="236" operation="notify" operation_key="redis_pre_notify_start_0" internal_operation_key="redis:2_pre_notify_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="controller-2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="84">
+  <synapse id="92">
     <action_set>
-      <pseudo_event id="135" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0">
+      <pseudo_event id="147" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="144" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="156" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="156" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0"/>
+        <pseudo_event id="168" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="85" priority="1000000">
+  <synapse id="93" priority="1000000">
     <action_set>
-      <pseudo_event id="134" operation="running" operation_key="redis-bundle-master_running_0">
+      <pseudo_event id="146" operation="running" operation_key="redis-bundle-master_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="133" operation="start" operation_key="redis-bundle-master_start_0"/>
+        <pseudo_event id="145" operation="start" operation_key="redis-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="86">
+  <synapse id="94">
     <action_set>
-      <pseudo_event id="133" operation="start" operation_key="redis-bundle-master_start_0">
+      <pseudo_event id="145" operation="start" operation_key="redis-bundle-master_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="118" operation="start" operation_key="redis-bundle_start_0"/>
+        <pseudo_event id="130" operation="start" operation_key="redis-bundle_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="136" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="148" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="140" operation="stopped" operation_key="redis-bundle-master_stopped_0"/>
+        <pseudo_event id="152" operation="stopped" operation_key="redis-bundle-master_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="152" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
+        <pseudo_event id="164" operation="demoted" operation_key="redis-bundle-master_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="87">
+  <synapse id="95">
     <action_set>
-      <pseudo_event id="106" operation="stop" operation_key="redis-bundle-docker-0_stop_0">
+      <pseudo_event id="118" operation="stop" operation_key="redis-bundle-docker-0_stop_0">
         <attributes CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/rhosp12/openstack-redis-docker:pcmklatest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/redis/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </pseudo_event>
     </action_set>
@@ -1343,16 +1427,16 @@
         <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="107" operation="stop" operation_key="redis-bundle-0_stop_0"/>
+        <pseudo_event id="119" operation="stop" operation_key="redis-bundle-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="120" operation="stop" operation_key="redis-bundle_stop_0"/>
+        <pseudo_event id="132" operation="stop" operation_key="redis-bundle_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="88">
+  <synapse id="96">
     <action_set>
-      <pseudo_event id="107" operation="stop" operation_key="redis-bundle-0_stop_0">
+      <pseudo_event id="119" operation="stop" operation_key="redis-bundle-0_stop_0">
         <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_timeout="20000" addr="#uname"  port="3124"/>
       </pseudo_event>
     </action_set>
@@ -1360,40 +1444,82 @@
       <trigger>
         <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
+      <trigger>
+        <rsc_op id="34" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="controller-1" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="40" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="controller-2" on_node_uuid="3"/>
+      </trigger>
     </inputs>
   </synapse>
-  <synapse id="89">
+  <synapse id="97">
+    <action_set>
+      <rsc_op id="40" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="#uname"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="98">
     <action_set>
-      <rsc_op id="163" operation="monitor" operation_key="ip-192.168.24.7_monitor_10000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="34" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="controller-1" on_node_uuid="2">
+        <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="#uname"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="99">
+    <action_set>
+      <rsc_op id="41" operation="monitor" operation_key="redis-bundle-1_monitor_0" on_node="controller-2" on_node_uuid="3">
+        <primitive id="redis-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-1" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="controller-1"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="100">
+    <action_set>
+      <rsc_op id="35" operation="monitor" operation_key="redis-bundle-2_monitor_0" on_node="controller-1" on_node_uuid="2">
+        <primitive id="redis-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-2" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="controller-2"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="101">
+    <action_set>
+      <rsc_op id="175" operation="monitor" operation_key="ip-192.168.24.7_monitor_10000" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-192.168.24.7" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.24.7"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="162" operation="start" operation_key="ip-192.168.24.7_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="174" operation="start" operation_key="ip-192.168.24.7_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="90">
+  <synapse id="102">
     <action_set>
-      <rsc_op id="162" operation="start" operation_key="ip-192.168.24.7_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="174" operation="start" operation_key="ip-192.168.24.7_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="ip-192.168.24.7" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.24.7"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="161" operation="stop" operation_key="ip-192.168.24.7_stop_0"/>
+        <pseudo_event id="173" operation="stop" operation_key="ip-192.168.24.7_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="195" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="207" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="91">
+  <synapse id="103">
     <action_set>
-      <pseudo_event id="161" operation="stop" operation_key="ip-192.168.24.7_stop_0">
+      <pseudo_event id="173" operation="stop" operation_key="ip-192.168.24.7_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.24.7"/>
       </pseudo_event>
     </action_set>
@@ -1402,42 +1528,42 @@
         <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="184" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
+        <pseudo_event id="196" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="92">
+  <synapse id="104">
     <action_set>
-      <rsc_op id="166" operation="monitor" operation_key="ip-10.0.0.109_monitor_10000" on_node="controller-1" on_node_uuid="2">
+      <rsc_op id="178" operation="monitor" operation_key="ip-10.0.0.109_monitor_10000" on_node="controller-1" on_node_uuid="2">
         <primitive id="ip-10.0.0.109" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" cidr_netmask="32"  ip="10.0.0.109"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="165" operation="start" operation_key="ip-10.0.0.109_start_0" on_node="controller-1" on_node_uuid="2"/>
+        <rsc_op id="177" operation="start" operation_key="ip-10.0.0.109_start_0" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="93">
+  <synapse id="105">
     <action_set>
-      <rsc_op id="165" operation="start" operation_key="ip-10.0.0.109_start_0" on_node="controller-1" on_node_uuid="2">
+      <rsc_op id="177" operation="start" operation_key="ip-10.0.0.109_start_0" on_node="controller-1" on_node_uuid="2">
         <primitive id="ip-10.0.0.109" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" cidr_netmask="32"  ip="10.0.0.109"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="164" operation="stop" operation_key="ip-10.0.0.109_stop_0"/>
+        <pseudo_event id="176" operation="stop" operation_key="ip-10.0.0.109_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="195" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="207" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="94">
+  <synapse id="106">
     <action_set>
-      <pseudo_event id="164" operation="stop" operation_key="ip-10.0.0.109_stop_0">
+      <pseudo_event id="176" operation="stop" operation_key="ip-10.0.0.109_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="10.0.0.109"/>
       </pseudo_event>
     </action_set>
@@ -1446,42 +1572,42 @@
         <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="184" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
+        <pseudo_event id="196" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="95">
+  <synapse id="107">
     <action_set>
-      <rsc_op id="175" operation="monitor" operation_key="ip-172.17.4.11_monitor_10000" on_node="controller-1" on_node_uuid="2">
+      <rsc_op id="187" operation="monitor" operation_key="ip-172.17.4.11_monitor_10000" on_node="controller-1" on_node_uuid="2">
         <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="174" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-1" on_node_uuid="2"/>
+        <rsc_op id="186" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="96">
+  <synapse id="108">
     <action_set>
-      <rsc_op id="174" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-1" on_node_uuid="2">
+      <rsc_op id="186" operation="start" operation_key="ip-172.17.4.11_start_0" on_node="controller-1" on_node_uuid="2">
         <primitive id="ip-172.17.4.11" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="173" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+        <pseudo_event id="185" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="195" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="207" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="97">
+  <synapse id="109">
     <action_set>
-      <pseudo_event id="173" operation="stop" operation_key="ip-172.17.4.11_stop_0">
+      <pseudo_event id="185" operation="stop" operation_key="ip-172.17.4.11_stop_0">
         <attributes CRM_meta_name="stop" CRM_meta_timeout="20000" cidr_netmask="32"  ip="172.17.4.11"/>
       </pseudo_event>
     </action_set>
@@ -1490,13 +1616,13 @@
         <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="184" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
+        <pseudo_event id="196" operation="stopped" operation_key="haproxy-bundle_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="98">
+  <synapse id="110">
     <action_set>
-      <pseudo_event id="176" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0">
+      <pseudo_event id="188" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0">
         <attributes CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/rhosp12/openstack-haproxy-docker:pcmklatest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/puppet-generated/haproxy/:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </pseudo_event>
     </action_set>
@@ -1505,26 +1631,26 @@
         <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="183" operation="stop" operation_key="haproxy-bundle_stop_0"/>
+        <pseudo_event id="195" operation="stop" operation_key="haproxy-bundle_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="99">
+  <synapse id="111">
     <action_set>
-      <rsc_op id="191" operation="monitor" operation_key="stonith-fence_ipmilan-5254003e8e97_monitor_60000" on_node="controller-1" on_node_uuid="2">
+      <rsc_op id="203" operation="monitor" operation_key="stonith-fence_ipmilan-5254003e8e97_monitor_60000" on_node="controller-1" on_node_uuid="2">
         <primitive id="stonith-fence_ipmilan-5254003e8e97" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6231" lanplus="true" login="admin" passwd="password" pcmk_host_list="controller-2" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="190" operation="start" operation_key="stonith-fence_ipmilan-5254003e8e97_start_0" on_node="controller-1" on_node_uuid="2"/>
+        <rsc_op id="202" operation="start" operation_key="stonith-fence_ipmilan-5254003e8e97_start_0" on_node="controller-1" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="100">
+  <synapse id="112">
     <action_set>
-      <rsc_op id="190" operation="start" operation_key="stonith-fence_ipmilan-5254003e8e97_start_0" on_node="controller-1" on_node_uuid="2">
+      <rsc_op id="202" operation="start" operation_key="stonith-fence_ipmilan-5254003e8e97_start_0" on_node="controller-1" on_node_uuid="2">
         <primitive id="stonith-fence_ipmilan-5254003e8e97" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-1" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6231" lanplus="true" login="admin" passwd="password" pcmk_host_list="controller-2" privlvl="administrator"/>
       </rsc_op>
@@ -1534,34 +1660,34 @@
         <pseudo_event id="29" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <pseudo_event id="189" operation="stop" operation_key="stonith-fence_ipmilan-5254003e8e97_stop_0"/>
+        <pseudo_event id="201" operation="stop" operation_key="stonith-fence_ipmilan-5254003e8e97_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="101">
+  <synapse id="113">
     <action_set>
-      <pseudo_event id="189" operation="stop" operation_key="stonith-fence_ipmilan-5254003e8e97_stop_0">
+      <pseudo_event id="201" operation="stop" operation_key="stonith-fence_ipmilan-5254003e8e97_stop_0">
         <attributes CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6231" lanplus="true" login="admin" passwd="password" pcmk_host_list="controller-2" privlvl="administrator"/>
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="102">
+  <synapse id="114">
     <action_set>
-      <rsc_op id="194" operation="monitor" operation_key="stonith-fence_ipmilan-5254000dcb3f_monitor_60000" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="206" operation="monitor" operation_key="stonith-fence_ipmilan-5254000dcb3f_monitor_60000" on_node="controller-2" on_node_uuid="3">
         <primitive id="stonith-fence_ipmilan-5254000dcb3f" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6230" lanplus="true" login="admin" passwd="password" pcmk_host_list="controller-1" privlvl="administrator"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="193" operation="start" operation_key="stonith-fence_ipmilan-5254000dcb3f_start_0" on_node="controller-2" on_node_uuid="3"/>
+        <rsc_op id="205" operation="start" operation_key="stonith-fence_ipmilan-5254000dcb3f_start_0" on_node="controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="103">
+  <synapse id="115">
     <action_set>
-      <rsc_op id="193" operation="start" operation_key="stonith-fence_ipmilan-5254000dcb3f_start_0" on_node="controller-2" on_node_uuid="3">
+      <rsc_op id="205" operation="start" operation_key="stonith-fence_ipmilan-5254000dcb3f_start_0" on_node="controller-2" on_node_uuid="3">
         <primitive id="stonith-fence_ipmilan-5254000dcb3f" class="stonith" type="fence_ipmilan"/>
         <attributes CRM_meta_on_node="controller-2" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6230" lanplus="true" login="admin" passwd="password" pcmk_host_list="controller-1" privlvl="administrator"/>
       </rsc_op>
@@ -1571,21 +1697,21 @@
         <pseudo_event id="29" operation="all_stopped" operation_key="all_stopped"/>
       </trigger>
       <trigger>
-        <pseudo_event id="192" operation="stop" operation_key="stonith-fence_ipmilan-5254000dcb3f_stop_0"/>
+        <pseudo_event id="204" operation="stop" operation_key="stonith-fence_ipmilan-5254000dcb3f_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="104">
+  <synapse id="116">
     <action_set>
-      <pseudo_event id="192" operation="stop" operation_key="stonith-fence_ipmilan-5254000dcb3f_stop_0">
+      <pseudo_event id="204" operation="stop" operation_key="stonith-fence_ipmilan-5254000dcb3f_stop_0">
         <attributes CRM_meta_timeout="20000" action="reboot"  ipaddr="172.16.0.1" ipport="6230" lanplus="true" login="admin" passwd="password" pcmk_host_list="controller-1" privlvl="administrator"/>
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="105">
+  <synapse id="117">
     <action_set>
-      <pseudo_event id="202" operation="stonith" operation_key="stonith-redis-bundle-0-off" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0">
+      <pseudo_event id="214" operation="stonith" operation_key="stonith-redis-bundle-0-off" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0">
         <attributes CRM_meta_master_redis="1" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_stonith_action="off" />
         <downed>
           <node id="redis-bundle-0"/>
@@ -1598,9 +1724,9 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="106">
+  <synapse id="118">
     <action_set>
-      <pseudo_event id="197" operation="stonith" operation_key="stonith-rabbitmq-bundle-0-off" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0">
+      <pseudo_event id="209" operation="stonith" operation_key="stonith-rabbitmq-bundle-0-off" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0">
         <attributes CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_rmq_node_attr_last_known_rabbitmq="rabbit@controller-0" CRM_meta_stonith_action="off" />
         <downed>
           <node id="rabbitmq-bundle-0"/>
@@ -1613,9 +1739,9 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="107">
+  <synapse id="119">
     <action_set>
-      <pseudo_event id="196" operation="stonith" operation_key="stonith-galera-bundle-0-off" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0">
+      <pseudo_event id="208" operation="stonith" operation_key="stonith-galera-bundle-0-off" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0">
         <attributes CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_stonith_action="off" />
         <downed>
           <node id="galera-bundle-0"/>
@@ -1628,9 +1754,9 @@
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="108">
+  <synapse id="120">
     <action_set>
-      <pseudo_event id="195" operation="stonith_complete" operation_key="stonith_complete">
+      <pseudo_event id="207" operation="stonith_complete" operation_key="stonith_complete">
         <attributes />
       </pseudo_event>
     </action_set>
@@ -1639,264 +1765,264 @@
         <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="196" operation="stonith" operation_key="stonith-galera-bundle-0-off" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0"/>
+        <pseudo_event id="208" operation="stonith" operation_key="stonith-galera-bundle-0-off" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="197" operation="stonith" operation_key="stonith-rabbitmq-bundle-0-off" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0"/>
+        <pseudo_event id="209" operation="stonith" operation_key="stonith-rabbitmq-bundle-0-off" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="202" operation="stonith" operation_key="stonith-redis-bundle-0-off" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0"/>
+        <pseudo_event id="214" operation="stonith" operation_key="stonith-redis-bundle-0-off" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="109" priority="1000000">
+  <synapse id="121" priority="1000000">
     <action_set>
-      <pseudo_event id="184" operation="stopped" operation_key="haproxy-bundle_stopped_0">
+      <pseudo_event id="196" operation="stopped" operation_key="haproxy-bundle_stopped_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="176" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0"/>
+        <pseudo_event id="188" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="110">
+  <synapse id="122">
     <action_set>
-      <pseudo_event id="183" operation="stop" operation_key="haproxy-bundle_stop_0">
+      <pseudo_event id="195" operation="stop" operation_key="haproxy-bundle_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="111" priority="1000000">
+  <synapse id="123" priority="1000000">
     <action_set>
-      <pseudo_event id="160" operation="demoted" operation_key="redis-bundle_demoted_0">
+      <pseudo_event id="172" operation="demoted" operation_key="redis-bundle_demoted_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="156" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0"/>
+        <pseudo_event id="168" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_demoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="159" operation="demote" operation_key="redis-bundle_demote_0"/>
+        <pseudo_event id="171" operation="demote" operation_key="redis-bundle_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="112">
+  <synapse id="124">
     <action_set>
-      <pseudo_event id="159" operation="demote" operation_key="redis-bundle_demote_0">
+      <pseudo_event id="171" operation="demote" operation_key="redis-bundle_demote_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="113" priority="1000000">
+  <synapse id="125" priority="1000000">
     <action_set>
-      <pseudo_event id="158" operation="promoted" operation_key="redis-bundle_promoted_0">
+      <pseudo_event id="170" operation="promoted" operation_key="redis-bundle_promoted_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="150" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
+        <pseudo_event id="162" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="114">
+  <synapse id="126">
     <action_set>
-      <pseudo_event id="157" operation="promote" operation_key="redis-bundle_promote_0">
+      <pseudo_event id="169" operation="promote" operation_key="redis-bundle_promote_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="119" operation="running" operation_key="redis-bundle_running_0"/>
+        <pseudo_event id="131" operation="running" operation_key="redis-bundle_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="121" operation="stopped" operation_key="redis-bundle_stopped_0"/>
+        <pseudo_event id="133" operation="stopped" operation_key="redis-bundle_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="160" operation="demoted" operation_key="redis-bundle_demoted_0"/>
+        <pseudo_event id="172" operation="demoted" operation_key="redis-bundle_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="115" priority="1000000">
+  <synapse id="127" priority="1000000">
     <action_set>
-      <pseudo_event id="121" operation="stopped" operation_key="redis-bundle_stopped_0">
+      <pseudo_event id="133" operation="stopped" operation_key="redis-bundle_stopped_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="106" operation="stop" operation_key="redis-bundle-docker-0_stop_0"/>
+        <pseudo_event id="118" operation="stop" operation_key="redis-bundle-docker-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="144" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="156" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="116">
+  <synapse id="128">
     <action_set>
-      <pseudo_event id="120" operation="stop" operation_key="redis-bundle_stop_0">
+      <pseudo_event id="132" operation="stop" operation_key="redis-bundle_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="160" operation="demoted" operation_key="redis-bundle_demoted_0"/>
+        <pseudo_event id="172" operation="demoted" operation_key="redis-bundle_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="117" priority="1000000">
+  <synapse id="129" priority="1000000">
     <action_set>
-      <pseudo_event id="119" operation="running" operation_key="redis-bundle_running_0">
+      <pseudo_event id="131" operation="running" operation_key="redis-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="138" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+        <pseudo_event id="150" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="118">
+  <synapse id="130">
     <action_set>
-      <pseudo_event id="118" operation="start" operation_key="redis-bundle_start_0">
+      <pseudo_event id="130" operation="start" operation_key="redis-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="121" operation="stopped" operation_key="redis-bundle_stopped_0"/>
+        <pseudo_event id="133" operation="stopped" operation_key="redis-bundle_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="160" operation="demoted" operation_key="redis-bundle_demoted_0"/>
+        <pseudo_event id="172" operation="demoted" operation_key="redis-bundle_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="119" priority="1000000">
+  <synapse id="131" priority="1000000">
     <action_set>
-      <pseudo_event id="105" operation="demoted" operation_key="galera-bundle_demoted_0">
+      <pseudo_event id="117" operation="demoted" operation_key="galera-bundle_demoted_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="101" operation="demoted" operation_key="galera-bundle-master_demoted_0"/>
+        <pseudo_event id="113" operation="demoted" operation_key="galera-bundle-master_demoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="104" operation="demote" operation_key="galera-bundle_demote_0"/>
+        <pseudo_event id="116" operation="demote" operation_key="galera-bundle_demote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="120">
+  <synapse id="132">
     <action_set>
-      <pseudo_event id="104" operation="demote" operation_key="galera-bundle_demote_0">
+      <pseudo_event id="116" operation="demote" operation_key="galera-bundle_demote_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="121" priority="1000000">
+  <synapse id="133" priority="1000000">
     <action_set>
-      <pseudo_event id="80" operation="stopped" operation_key="galera-bundle_stopped_0">
+      <pseudo_event id="92" operation="stopped" operation_key="galera-bundle_stopped_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="65" operation="stop" operation_key="galera-bundle-docker-0_stop_0"/>
+        <pseudo_event id="77" operation="stop" operation_key="galera-bundle-docker-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="97" operation="stopped" operation_key="galera-bundle-master_stopped_0"/>
+        <pseudo_event id="109" operation="stopped" operation_key="galera-bundle-master_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="122">
+  <synapse id="134">
     <action_set>
-      <pseudo_event id="79" operation="stop" operation_key="galera-bundle_stop_0">
+      <pseudo_event id="91" operation="stop" operation_key="galera-bundle_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="105" operation="demoted" operation_key="galera-bundle_demoted_0"/>
+        <pseudo_event id="117" operation="demoted" operation_key="galera-bundle_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="123" priority="1000000">
+  <synapse id="135" priority="1000000">
     <action_set>
-      <pseudo_event id="78" operation="running" operation_key="galera-bundle_running_0">
+      <pseudo_event id="90" operation="running" operation_key="galera-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="95" operation="running" operation_key="galera-bundle-master_running_0"/>
+        <pseudo_event id="107" operation="running" operation_key="galera-bundle-master_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="124">
+  <synapse id="136">
     <action_set>
-      <pseudo_event id="77" operation="start" operation_key="galera-bundle_start_0">
+      <pseudo_event id="89" operation="start" operation_key="galera-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="80" operation="stopped" operation_key="galera-bundle_stopped_0"/>
+        <pseudo_event id="92" operation="stopped" operation_key="galera-bundle_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="105" operation="demoted" operation_key="galera-bundle_demoted_0"/>
+        <pseudo_event id="117" operation="demoted" operation_key="galera-bundle_demoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="125" priority="1000000">
+  <synapse id="137" priority="1000000">
     <action_set>
-      <pseudo_event id="45" operation="stopped" operation_key="rabbitmq-bundle_stopped_0">
+      <pseudo_event id="57" operation="stopped" operation_key="rabbitmq-bundle_stopped_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="30" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0"/>
+        <pseudo_event id="42" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="64" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="76" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="126">
+  <synapse id="138">
     <action_set>
-      <pseudo_event id="44" operation="stop" operation_key="rabbitmq-bundle_stop_0">
+      <pseudo_event id="56" operation="stop" operation_key="rabbitmq-bundle_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="127" priority="1000000">
+  <synapse id="139" priority="1000000">
     <action_set>
-      <pseudo_event id="43" operation="running" operation_key="rabbitmq-bundle_running_0">
+      <pseudo_event id="55" operation="running" operation_key="rabbitmq-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="58" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="70" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="128">
+  <synapse id="140">
     <action_set>
-      <pseudo_event id="42" operation="start" operation_key="rabbitmq-bundle_start_0">
+      <pseudo_event id="54" operation="start" operation_key="rabbitmq-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="129">
+  <synapse id="141">
     <action_set>
       <pseudo_event id="29" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -1904,68 +2030,68 @@
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="30" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0"/>
+        <pseudo_event id="42" operation="stop" operation_key="rabbitmq-bundle-docker-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="31" operation="stop" operation_key="rabbitmq-bundle-0_stop_0"/>
+        <pseudo_event id="43" operation="stop" operation_key="rabbitmq-bundle-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="50" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:0_stop_0"/>
+        <pseudo_event id="62" operation="stop" operation_key="rabbitmq_stop_0" internal_operation_key="rabbitmq:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="64" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="76" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="65" operation="stop" operation_key="galera-bundle-docker-0_stop_0"/>
+        <pseudo_event id="77" operation="stop" operation_key="galera-bundle-docker-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="66" operation="stop" operation_key="galera-bundle-0_stop_0"/>
+        <pseudo_event id="78" operation="stop" operation_key="galera-bundle-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="90" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0"/>
+        <pseudo_event id="102" operation="stop" operation_key="galera_stop_0" internal_operation_key="galera:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="106" operation="stop" operation_key="redis-bundle-docker-0_stop_0"/>
+        <pseudo_event id="118" operation="stop" operation_key="redis-bundle-docker-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="107" operation="stop" operation_key="redis-bundle-0_stop_0"/>
+        <pseudo_event id="119" operation="stop" operation_key="redis-bundle-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="129" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
+        <pseudo_event id="141" operation="stop" operation_key="redis_stop_0" internal_operation_key="redis:0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="144" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="156" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="161" operation="stop" operation_key="ip-192.168.24.7_stop_0"/>
+        <pseudo_event id="173" operation="stop" operation_key="ip-192.168.24.7_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="164" operation="stop" operation_key="ip-10.0.0.109_stop_0"/>
+        <pseudo_event id="176" operation="stop" operation_key="ip-10.0.0.109_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="173" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
+        <pseudo_event id="185" operation="stop" operation_key="ip-172.17.4.11_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="176" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0"/>
+        <pseudo_event id="188" operation="stop" operation_key="haproxy-bundle-docker-0_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="189" operation="stop" operation_key="stonith-fence_ipmilan-5254003e8e97_stop_0"/>
+        <pseudo_event id="201" operation="stop" operation_key="stonith-fence_ipmilan-5254003e8e97_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="192" operation="stop" operation_key="stonith-fence_ipmilan-5254000dcb3f_stop_0"/>
+        <pseudo_event id="204" operation="stop" operation_key="stonith-fence_ipmilan-5254000dcb3f_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="195" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="207" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
       <trigger>
-        <pseudo_event id="199" operation="notified" operation_key="rabbitmq_notified_0" internal_operation_key="rabbitmq:0_confirmed-post_notify_stonith_0"/>
+        <pseudo_event id="211" operation="notified" operation_key="rabbitmq_notified_0" internal_operation_key="rabbitmq:0_confirmed-post_notify_stonith_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="204" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0"/>
+        <pseudo_event id="216" operation="notified" operation_key="redis_notified_0" internal_operation_key="redis:0_confirmed-post_notify_stonith_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="130">
+  <synapse id="142">
     <action_set>
       <crm_event id="1" operation="stonith" operation_key="stonith-controller-0-reboot" on_node="controller-0" on_node_uuid="1">
         <attributes CRM_meta_cinder_volume_role="true" CRM_meta_galera_role="true" CRM_meta_haproxy_role="true" CRM_meta_on_node="controller-0" CRM_meta_on_node_uuid="1" CRM_meta_rabbitmq_role="true" CRM_meta_redis_role="true" CRM_meta_rmq_node_attr_last_known_rabbitmq="rabbit@controller-0" CRM_meta_stonith_action="reboot" />
diff --git a/pengine/test10/bundle-order-fencing.summary b/pengine/test10/bundle-order-fencing.summary
index e2128cb..e78c531 100644
--- a/pengine/test10/bundle-order-fencing.summary
+++ b/pengine/test10/bundle-order-fencing.summary
@@ -56,9 +56,21 @@ Transition Summary:
 
 Executing cluster transition:
  * Pseudo action:   rabbitmq-bundle-clone_pre_notify_stop_0
+ * Resource action: rabbitmq-bundle-0 monitor on controller-2
+ * Resource action: rabbitmq-bundle-0 monitor on controller-1
+ * Resource action: rabbitmq-bundle-1 monitor on controller-2
+ * Resource action: rabbitmq-bundle-2 monitor on controller-1
+ * Resource action: galera-bundle-0 monitor on controller-2
+ * Resource action: galera-bundle-0 monitor on controller-1
+ * Resource action: galera-bundle-1 monitor on controller-2
+ * Resource action: galera-bundle-2 monitor on controller-1
  * Resource action: redis           cancel=45000 on redis-bundle-1
  * Resource action: redis           cancel=60000 on redis-bundle-1
  * Pseudo action:   redis-bundle-master_pre_notify_demote_0
+ * Resource action: redis-bundle-0  monitor on controller-2
+ * Resource action: redis-bundle-0  monitor on controller-1
+ * Resource action: redis-bundle-1  monitor on controller-2
+ * Resource action: redis-bundle-2  monitor on controller-1
  * Pseudo action:   stonith-fence_ipmilan-5254003e8e97_stop_0
  * Pseudo action:   stonith-fence_ipmilan-5254000dcb3f_stop_0
  * Pseudo action:   haproxy-bundle_stop_0
diff --git a/pengine/test10/bundle-order-partial-start.dot b/pengine/test10/bundle-order-partial-start.dot
index 0e121a4..1106b28 100644
--- a/pengine/test10/bundle-order-partial-start.dot
+++ b/pengine/test10/bundle-order-partial-start.dot
@@ -1,4 +1,6 @@
 digraph "g" {
+"galera-bundle-0_monitor_0 undercloud" -> "galera-bundle-0_start_0 undercloud" [ style = bold]
+"galera-bundle-0_monitor_0 undercloud" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-0_monitor_60000 undercloud" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-0_start_0 undercloud" -> "galera-bundle-0_monitor_60000 undercloud" [ style = bold]
 "galera-bundle-0_start_0 undercloud" -> "galera:0_monitor_20000 galera-bundle-0" [ style = bold]
diff --git a/pengine/test10/bundle-order-partial-start.exp b/pengine/test10/bundle-order-partial-start.exp
index 98922d5..e883a3b 100644
--- a/pengine/test10/bundle-order-partial-start.exp
+++ b/pengine/test10/bundle-order-partial-start.exp
@@ -1,43 +1,43 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0" priority="1000000">
     <action_set>
-      <rsc_op id="128" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+      <rsc_op id="129" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="30" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="31" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="25" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+      <rsc_op id="26" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="24" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="25" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="31" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="32" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="24" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+      <rsc_op id="25" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="26" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="27" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -52,49 +52,49 @@
   </synapse>
   <synapse id="4" priority="1000000">
     <action_set>
-      <pseudo_event id="31" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
+      <pseudo_event id="32" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="30" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="31" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="128" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="129" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5" priority="1000000">
     <action_set>
-      <pseudo_event id="30" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
+      <pseudo_event id="31" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="27" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
+        <pseudo_event id="28" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="30" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="29" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
+      <pseudo_event id="30" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="28" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
+        <pseudo_event id="29" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <pseudo_event id="28" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
+      <pseudo_event id="29" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -102,22 +102,22 @@
   </synapse>
   <synapse id="8" priority="1000000">
     <action_set>
-      <pseudo_event id="27" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
+      <pseudo_event id="28" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="24" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="25" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="26" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="27" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <pseudo_event id="26" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
+      <pseudo_event id="27" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -126,82 +126,82 @@
         <rsc_op id="13" operation="monitor" operation_key="rabbitmq:0_monitor_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="20" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+        <pseudo_event id="21" operation="start" operation_key="rabbitmq-bundle_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="29" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="30" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="48" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="49" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="41" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="47" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="47" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="48" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="41" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="47" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="47" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="39" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="41" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="49" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <pseudo_event id="50" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13" priority="1000000">
     <action_set>
-      <pseudo_event id="50" operation="running" operation_key="galera-bundle-master_running_0">
+      <pseudo_event id="51" operation="running" operation_key="galera-bundle-master_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="47" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="49" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <pseudo_event id="50" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <pseudo_event id="49" operation="start" operation_key="galera-bundle-master_start_0">
+      <pseudo_event id="50" operation="start" operation_key="galera-bundle-master_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -210,26 +210,26 @@
         <rsc_op id="14" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="42" operation="start" operation_key="galera-bundle_start_0"/>
+        <pseudo_event id="43" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15">
     <action_set>
-      <rsc_op id="39" operation="monitor" operation_key="galera-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="40" operation="monitor" operation_key="galera-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="39" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="16">
     <action_set>
-      <rsc_op id="38" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="39" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
@@ -239,7 +239,7 @@
         <rsc_op id="14" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="42" operation="start" operation_key="galera-bundle_start_0"/>
+        <pseudo_event id="43" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -254,291 +254,303 @@
   </synapse>
   <synapse id="18">
     <action_set>
-      <rsc_op id="41" operation="monitor" operation_key="galera-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="42" operation="monitor" operation_key="galera-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3123"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="40" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="41" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="19">
     <action_set>
-      <rsc_op id="40" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="41" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3123"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="15" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="39" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="20" priority="1000000">
+  <synapse id="20">
     <action_set>
-      <rsc_op id="134" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="15" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="undercloud"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="21" priority="1000000">
+    <action_set>
+      <rsc_op id="135" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="89" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+        <pseudo_event id="90" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="21">
+  <synapse id="22">
     <action_set>
-      <rsc_op id="133" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="134" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="87" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+        <pseudo_event id="88" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="22">
+  <synapse id="23">
     <action_set>
-      <rsc_op id="72" operation="monitor" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="73" operation="monitor" operation_key="redis_monitor_20000" internal_operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_op_target_rc="8" CRM_meta_physical_host="undercloud" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="71" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="72" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="90" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
+        <pseudo_event id="91" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="23">
+  <synapse id="24">
     <action_set>
-      <rsc_op id="71" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="72" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource="redis:0" CRM_meta_notify_active_uname="redis-bundle-0" CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource=" " CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0" CRM_meta_notify_promote_uname="redis-bundle-0" CRM_meta_notify_slave_resource="redis:0" CRM_meta_notify_slave_uname="redis-bundle-0" CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="85" operation="promote" operation_key="redis-bundle-master_promote_0"/>
+        <pseudo_event id="86" operation="promote" operation_key="redis-bundle-master_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="24" priority="1000000">
+  <synapse id="25" priority="1000000">
     <action_set>
-      <pseudo_event id="90" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0">
+      <pseudo_event id="91" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="89" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+        <pseudo_event id="90" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="134" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="135" operation="notify" operation_key="redis_post_notify_promote_0" internal_operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="25" priority="1000000">
+  <synapse id="26" priority="1000000">
     <action_set>
-      <pseudo_event id="89" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0">
+      <pseudo_event id="90" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="86" operation="promoted" operation_key="redis-bundle-master_promoted_0"/>
+        <pseudo_event id="87" operation="promoted" operation_key="redis-bundle-master_promoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="88" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+        <pseudo_event id="89" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="26">
+  <synapse id="27">
     <action_set>
-      <pseudo_event id="88" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0">
+      <pseudo_event id="89" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="87" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+        <pseudo_event id="88" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="133" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="134" operation="notify" operation_key="redis_pre_notify_promote_0" internal_operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="27">
+  <synapse id="28">
     <action_set>
-      <pseudo_event id="87" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0">
+      <pseudo_event id="88" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="28" priority="1000000">
+  <synapse id="29" priority="1000000">
     <action_set>
-      <pseudo_event id="86" operation="promoted" operation_key="redis-bundle-master_promoted_0">
+      <pseudo_event id="87" operation="promoted" operation_key="redis-bundle-master_promoted_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="71" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="72" operation="promote" operation_key="redis_promote_0" internal_operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="29">
+  <synapse id="30">
     <action_set>
-      <pseudo_event id="85" operation="promote" operation_key="redis-bundle-master_promote_0">
+      <pseudo_event id="86" operation="promote" operation_key="redis-bundle-master_promote_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="88" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+        <pseudo_event id="89" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="97" operation="promote" operation_key="redis-bundle_promote_0"/>
+        <pseudo_event id="98" operation="promote" operation_key="redis-bundle_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="30">
+  <synapse id="31">
     <action_set>
-      <rsc_op id="114" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="115" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="113" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="114" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="31">
+  <synapse id="32">
     <action_set>
-      <rsc_op id="113" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="114" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="15" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="16" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="115" operation="start" operation_key="haproxy-bundle_start_0"/>
+        <pseudo_event id="116" operation="start" operation_key="haproxy-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="32">
+  <synapse id="33">
     <action_set>
-      <rsc_op id="15" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="16" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="33" priority="1000000">
+  <synapse id="34" priority="1000000">
     <action_set>
-      <pseudo_event id="116" operation="running" operation_key="haproxy-bundle_running_0">
+      <pseudo_event id="117" operation="running" operation_key="haproxy-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="113" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="114" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="34">
+  <synapse id="35">
     <action_set>
-      <pseudo_event id="115" operation="start" operation_key="haproxy-bundle_start_0">
+      <pseudo_event id="116" operation="start" operation_key="haproxy-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="35" priority="1000000">
+  <synapse id="36" priority="1000000">
     <action_set>
-      <pseudo_event id="98" operation="promoted" operation_key="redis-bundle_promoted_0">
+      <pseudo_event id="99" operation="promoted" operation_key="redis-bundle_promoted_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="90" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
+        <pseudo_event id="91" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="36">
+  <synapse id="37">
     <action_set>
-      <pseudo_event id="97" operation="promote" operation_key="redis-bundle_promote_0">
+      <pseudo_event id="98" operation="promote" operation_key="redis-bundle_promote_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="37" priority="1000000">
+  <synapse id="38" priority="1000000">
     <action_set>
-      <pseudo_event id="43" operation="running" operation_key="galera-bundle_running_0">
+      <pseudo_event id="44" operation="running" operation_key="galera-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="38" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="39" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="50" operation="running" operation_key="galera-bundle-master_running_0"/>
+        <pseudo_event id="51" operation="running" operation_key="galera-bundle-master_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="38">
+  <synapse id="39">
     <action_set>
-      <pseudo_event id="42" operation="start" operation_key="galera-bundle_start_0">
+      <pseudo_event id="43" operation="start" operation_key="galera-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="21" operation="running" operation_key="rabbitmq-bundle_running_0"/>
+        <pseudo_event id="22" operation="running" operation_key="rabbitmq-bundle_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="98" operation="promoted" operation_key="redis-bundle_promoted_0"/>
+        <pseudo_event id="99" operation="promoted" operation_key="redis-bundle_promoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="116" operation="running" operation_key="haproxy-bundle_running_0"/>
+        <pseudo_event id="117" operation="running" operation_key="haproxy-bundle_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="39" priority="1000000">
+  <synapse id="40" priority="1000000">
     <action_set>
-      <pseudo_event id="21" operation="running" operation_key="rabbitmq-bundle_running_0">
+      <pseudo_event id="22" operation="running" operation_key="rabbitmq-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="31" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="32" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="40">
+  <synapse id="41">
     <action_set>
-      <pseudo_event id="20" operation="start" operation_key="rabbitmq-bundle_start_0">
+      <pseudo_event id="21" operation="start" operation_key="rabbitmq-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
diff --git a/pengine/test10/bundle-order-partial-start.summary b/pengine/test10/bundle-order-partial-start.summary
index 9045545..fb8e7de 100644
--- a/pengine/test10/bundle-order-partial-start.summary
+++ b/pengine/test10/bundle-order-partial-start.summary
@@ -32,6 +32,7 @@ Executing cluster transition:
  * Resource action: rabbitmq:0      monitor on rabbitmq-bundle-0
  * Pseudo action:   rabbitmq-bundle-clone_pre_notify_start_0
  * Resource action: galera-bundle-docker-0 monitor on undercloud
+ * Resource action: galera-bundle-0 monitor on undercloud
  * Pseudo action:   redis-bundle-master_pre_notify_promote_0
  * Resource action: haproxy-bundle-docker-0 monitor on undercloud
  * Pseudo action:   haproxy-bundle_start_0
diff --git a/pengine/test10/bundle-order-startup-clone-2.dot b/pengine/test10/bundle-order-startup-clone-2.dot
index d0b0f03..6026530 100644
--- a/pengine/test10/bundle-order-startup-clone-2.dot
+++ b/pengine/test10/bundle-order-startup-clone-2.dot
@@ -1,16 +1,34 @@
 digraph "g" {
+"galera-bundle-0_monitor_0 metal-1" -> "galera-bundle-0_start_0 metal-1" [ style = bold]
+"galera-bundle-0_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-0_monitor_0 metal-2" -> "galera-bundle-0_start_0 metal-1" [ style = bold]
+"galera-bundle-0_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-0_monitor_0 metal-3" -> "galera-bundle-0_start_0 metal-1" [ style = bold]
+"galera-bundle-0_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-0_monitor_60000 metal-1" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-0_start_0 metal-1" -> "galera-bundle-0_monitor_60000 metal-1" [ style = bold]
 "galera-bundle-0_start_0 metal-1" -> "galera:0_monitor_20000 galera-bundle-0" [ style = bold]
 "galera-bundle-0_start_0 metal-1" -> "galera:0_monitor_30000 galera-bundle-0" [ style = bold]
 "galera-bundle-0_start_0 metal-1" -> "galera:0_start_0 galera-bundle-0" [ style = bold]
 "galera-bundle-0_start_0 metal-1" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-1_monitor_0 metal-1" -> "galera-bundle-1_start_0 metal-2" [ style = bold]
+"galera-bundle-1_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-1_monitor_0 metal-2" -> "galera-bundle-1_start_0 metal-2" [ style = bold]
+"galera-bundle-1_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-1_monitor_0 metal-3" -> "galera-bundle-1_start_0 metal-2" [ style = bold]
+"galera-bundle-1_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-1_monitor_60000 metal-2" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-1_start_0 metal-2" -> "galera-bundle-1_monitor_60000 metal-2" [ style = bold]
 "galera-bundle-1_start_0 metal-2" -> "galera:1_monitor_20000 galera-bundle-1" [ style = bold]
 "galera-bundle-1_start_0 metal-2" -> "galera:1_monitor_30000 galera-bundle-1" [ style = bold]
 "galera-bundle-1_start_0 metal-2" -> "galera:1_start_0 galera-bundle-1" [ style = bold]
 "galera-bundle-1_start_0 metal-2" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-2_monitor_0 metal-1" -> "galera-bundle-2_start_0 metal-3" [ style = bold]
+"galera-bundle-2_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-2_monitor_0 metal-2" -> "galera-bundle-2_start_0 metal-3" [ style = bold]
+"galera-bundle-2_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-2_monitor_0 metal-3" -> "galera-bundle-2_start_0 metal-3" [ style = bold]
+"galera-bundle-2_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-2_monitor_60000 metal-3" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-2_start_0 metal-3" -> "galera-bundle-2_monitor_60000 metal-3" [ style = bold]
 "galera-bundle-2_start_0 metal-3" -> "galera:2_monitor_20000 galera-bundle-2" [ style = bold]
@@ -167,18 +185,36 @@ digraph "g" {
 "haproxy-bundle_start_0" -> "haproxy-bundle-docker-1_start_0 metal-2" [ style = bold]
 "haproxy-bundle_start_0" -> "haproxy-bundle-docker-2_start_0 metal-3" [ style = bold]
 "haproxy-bundle_start_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-0_monitor_0 metal-1" -> "redis-bundle-0_start_0 metal-1" [ style = bold]
+"redis-bundle-0_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-0_monitor_0 metal-2" -> "redis-bundle-0_start_0 metal-1" [ style = bold]
+"redis-bundle-0_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-0_monitor_0 metal-3" -> "redis-bundle-0_start_0 metal-1" [ style = bold]
+"redis-bundle-0_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-0_monitor_60000 metal-1" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-0_start_0 metal-1" -> "redis-bundle-0_monitor_60000 metal-1" [ style = bold]
 "redis-bundle-0_start_0 metal-1" -> "redis:0_monitor_20000 redis-bundle-0" [ style = bold]
 "redis-bundle-0_start_0 metal-1" -> "redis:0_promote_0 redis-bundle-0" [ style = bold]
 "redis-bundle-0_start_0 metal-1" -> "redis:0_start_0 redis-bundle-0" [ style = bold]
 "redis-bundle-0_start_0 metal-1" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-1_monitor_0 metal-1" -> "redis-bundle-1_start_0 metal-2" [ style = bold]
+"redis-bundle-1_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-1_monitor_0 metal-2" -> "redis-bundle-1_start_0 metal-2" [ style = bold]
+"redis-bundle-1_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-1_monitor_0 metal-3" -> "redis-bundle-1_start_0 metal-2" [ style = bold]
+"redis-bundle-1_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-1_monitor_60000 metal-2" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-1_start_0 metal-2" -> "redis-bundle-1_monitor_60000 metal-2" [ style = bold]
 "redis-bundle-1_start_0 metal-2" -> "redis:1_monitor_20000 redis-bundle-1" [ style = bold]
 "redis-bundle-1_start_0 metal-2" -> "redis:1_promote_0 redis-bundle-1" [ style = bold]
 "redis-bundle-1_start_0 metal-2" -> "redis:1_start_0 redis-bundle-1" [ style = bold]
 "redis-bundle-1_start_0 metal-2" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-2_monitor_0 metal-1" -> "redis-bundle-2_start_0 metal-3" [ style = bold]
+"redis-bundle-2_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-2_monitor_0 metal-2" -> "redis-bundle-2_start_0 metal-3" [ style = bold]
+"redis-bundle-2_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-2_monitor_0 metal-3" -> "redis-bundle-2_start_0 metal-3" [ style = bold]
+"redis-bundle-2_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-2_monitor_60000 metal-3" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-2_start_0 metal-3" -> "redis-bundle-2_monitor_60000 metal-3" [ style = bold]
 "redis-bundle-2_start_0 metal-3" -> "redis:2_monitor_20000 redis-bundle-2" [ style = bold]
diff --git a/pengine/test10/bundle-order-startup-clone-2.exp b/pengine/test10/bundle-order-startup-clone-2.exp
index b6f90d4..ae499c0 100644
--- a/pengine/test10/bundle-order-startup-clone-2.exp
+++ b/pengine/test10/bundle-order-startup-clone-2.exp
@@ -1,43 +1,43 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0" priority="1000000">
     <action_set>
-      <rsc_op id="161" operation="notify" operation_key="storage:0_post_notify_start_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="179" operation="notify" operation_key="storage:0_post_notify_start_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="storage" long-id="storage:0" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:0 storage:1 storage:2 storage:3" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="storage:0 storage:1 storage:2" CRM_meta_notify_start_uname="metal-1 metal-2 metal-3" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="42" operation="notify" operation_key="storage-clone_post_notify_running_0"/>
+        <pseudo_event id="60" operation="notify" operation_key="storage-clone_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="33" operation="monitor" operation_key="storage:0_monitor_30000" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="51" operation="monitor" operation_key="storage:0_monitor_30000" on_node="metal-1" on_node_uuid="1">
         <primitive id="storage" long-id="storage:0" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="30000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="32" operation="start" operation_key="storage:0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="50" operation="start" operation_key="storage:0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="43" operation="notified" operation_key="storage-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="61" operation="notified" operation_key="storage-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="32" operation="start" operation_key="storage:0_start_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="50" operation="start" operation_key="storage:0_start_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="storage" long-id="storage:0" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:0 storage:1 storage:2 storage:3" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="storage:0 storage:1 storage:2" CRM_meta_notify_start_uname="metal-1 metal-2 metal-3" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="38" operation="start" operation_key="storage-clone_start_0"/>
+        <pseudo_event id="56" operation="start" operation_key="storage-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -52,49 +52,49 @@
   </synapse>
   <synapse id="4" priority="1000000">
     <action_set>
-      <rsc_op id="162" operation="notify" operation_key="storage:1_post_notify_start_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="180" operation="notify" operation_key="storage:1_post_notify_start_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="storage" long-id="storage:1" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:0 storage:1 storage:2 storage:3" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="storage:0 storage:1 storage:2" CRM_meta_notify_start_uname="metal-1 metal-2 metal-3" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="42" operation="notify" operation_key="storage-clone_post_notify_running_0"/>
+        <pseudo_event id="60" operation="notify" operation_key="storage-clone_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <rsc_op id="35" operation="monitor" operation_key="storage:1_monitor_30000" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="53" operation="monitor" operation_key="storage:1_monitor_30000" on_node="metal-2" on_node_uuid="2">
         <primitive id="storage" long-id="storage:1" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="30000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="34" operation="start" operation_key="storage:1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="52" operation="start" operation_key="storage:1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="43" operation="notified" operation_key="storage-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="61" operation="notified" operation_key="storage-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <rsc_op id="34" operation="start" operation_key="storage:1_start_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="52" operation="start" operation_key="storage:1_start_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="storage" long-id="storage:1" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:0 storage:1 storage:2 storage:3" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="storage:0 storage:1 storage:2" CRM_meta_notify_start_uname="metal-1 metal-2 metal-3" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="38" operation="start" operation_key="storage-clone_start_0"/>
+        <pseudo_event id="56" operation="start" operation_key="storage-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7">
     <action_set>
-      <rsc_op id="12" operation="monitor" operation_key="storage:1_monitor_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="18" operation="monitor" operation_key="storage:1_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="storage" long-id="storage:1" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
@@ -103,49 +103,49 @@
   </synapse>
   <synapse id="8" priority="1000000">
     <action_set>
-      <rsc_op id="163" operation="notify" operation_key="storage:2_post_notify_start_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="181" operation="notify" operation_key="storage:2_post_notify_start_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="storage" long-id="storage:2" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:0 storage:1 storage:2 storage:3" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="storage:0 storage:1 storage:2" CRM_meta_notify_start_uname="metal-1 metal-2 metal-3" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="42" operation="notify" operation_key="storage-clone_post_notify_running_0"/>
+        <pseudo_event id="60" operation="notify" operation_key="storage-clone_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <rsc_op id="37" operation="monitor" operation_key="storage:2_monitor_30000" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="55" operation="monitor" operation_key="storage:2_monitor_30000" on_node="metal-3" on_node_uuid="3">
         <primitive id="storage" long-id="storage:2" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="30000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="36" operation="start" operation_key="storage:2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="54" operation="start" operation_key="storage:2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="43" operation="notified" operation_key="storage-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="61" operation="notified" operation_key="storage-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="36" operation="start" operation_key="storage:2_start_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="54" operation="start" operation_key="storage:2_start_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="storage" long-id="storage:2" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:0 storage:1 storage:2 storage:3" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="storage:0 storage:1 storage:2" CRM_meta_notify_start_uname="metal-1 metal-2 metal-3" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="38" operation="start" operation_key="storage-clone_start_0"/>
+        <pseudo_event id="56" operation="start" operation_key="storage-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <rsc_op id="22" operation="monitor" operation_key="storage:2_monitor_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="34" operation="monitor" operation_key="storage:2_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="storage" long-id="storage:2" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
@@ -154,55 +154,55 @@
   </synapse>
   <synapse id="12" priority="1000000">
     <action_set>
-      <pseudo_event id="43" operation="notified" operation_key="storage-clone_confirmed-post_notify_running_0">
+      <pseudo_event id="61" operation="notified" operation_key="storage-clone_confirmed-post_notify_running_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="42" operation="notify" operation_key="storage-clone_post_notify_running_0"/>
+        <pseudo_event id="60" operation="notify" operation_key="storage-clone_post_notify_running_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="161" operation="notify" operation_key="storage:0_post_notify_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="179" operation="notify" operation_key="storage:0_post_notify_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="162" operation="notify" operation_key="storage:1_post_notify_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="180" operation="notify" operation_key="storage:1_post_notify_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="163" operation="notify" operation_key="storage:2_post_notify_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="181" operation="notify" operation_key="storage:2_post_notify_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13" priority="1000000">
     <action_set>
-      <pseudo_event id="42" operation="notify" operation_key="storage-clone_post_notify_running_0">
+      <pseudo_event id="60" operation="notify" operation_key="storage-clone_post_notify_running_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="39" operation="running" operation_key="storage-clone_running_0"/>
+        <pseudo_event id="57" operation="running" operation_key="storage-clone_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="41" operation="notified" operation_key="storage-clone_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="59" operation="notified" operation_key="storage-clone_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <pseudo_event id="41" operation="notified" operation_key="storage-clone_confirmed-pre_notify_start_0">
+      <pseudo_event id="59" operation="notified" operation_key="storage-clone_confirmed-pre_notify_start_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="40" operation="notify" operation_key="storage-clone_pre_notify_start_0"/>
+        <pseudo_event id="58" operation="notify" operation_key="storage-clone_pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15">
     <action_set>
-      <pseudo_event id="40" operation="notify" operation_key="storage-clone_pre_notify_start_0">
+      <pseudo_event id="58" operation="notify" operation_key="storage-clone_pre_notify_start_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -210,28 +210,28 @@
   </synapse>
   <synapse id="16" priority="1000000">
     <action_set>
-      <pseudo_event id="39" operation="running" operation_key="storage-clone_running_0">
+      <pseudo_event id="57" operation="running" operation_key="storage-clone_running_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="32" operation="start" operation_key="storage:0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="50" operation="start" operation_key="storage:0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="34" operation="start" operation_key="storage:1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="52" operation="start" operation_key="storage:1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="36" operation="start" operation_key="storage:2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="54" operation="start" operation_key="storage:2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="38" operation="start" operation_key="storage-clone_start_0"/>
+        <pseudo_event id="56" operation="start" operation_key="storage-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="17">
     <action_set>
-      <pseudo_event id="38" operation="start" operation_key="storage-clone_start_0">
+      <pseudo_event id="56" operation="start" operation_key="storage-clone_start_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -240,205 +240,205 @@
         <rsc_op id="2" operation="monitor" operation_key="storage:0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="12" operation="monitor" operation_key="storage:1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="18" operation="monitor" operation_key="storage:1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="22" operation="monitor" operation_key="storage:2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="34" operation="monitor" operation_key="storage:2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="41" operation="notified" operation_key="storage-clone_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="59" operation="notified" operation_key="storage-clone_confirmed-pre_notify_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="94" operation="running" operation_key="haproxy-bundle_running_0"/>
+        <pseudo_event id="112" operation="running" operation_key="haproxy-bundle_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="147" operation="promoted" operation_key="redis-bundle_promoted_0"/>
+        <pseudo_event id="165" operation="promoted" operation_key="redis-bundle_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="18">
     <action_set>
-      <rsc_op id="68" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1">
+      <rsc_op id="86" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="metal-1" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="52" operation="start" operation_key="galera-bundle-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="70" operation="start" operation_key="galera-bundle-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
+        <rsc_op id="84" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="19">
     <action_set>
-      <rsc_op id="67" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1">
+      <rsc_op id="85" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="metal-1" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="52" operation="start" operation_key="galera-bundle-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="70" operation="start" operation_key="galera-bundle-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
+        <rsc_op id="84" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="20">
     <action_set>
-      <rsc_op id="66" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1">
+      <rsc_op id="84" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="metal-1" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="50" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="68" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="52" operation="start" operation_key="galera-bundle-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="70" operation="start" operation_key="galera-bundle-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="75" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <pseudo_event id="93" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="21">
     <action_set>
-      <rsc_op id="71" operation="monitor" operation_key="galera:1_monitor_30000" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2">
+      <rsc_op id="89" operation="monitor" operation_key="galera:1_monitor_30000" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2">
         <primitive id="galera" long-id="galera:1" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-1" CRM_meta_on_node_uuid="galera-bundle-1" CRM_meta_physical_host="metal-2" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="56" operation="start" operation_key="galera-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="74" operation="start" operation_key="galera-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="69" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2"/>
+        <rsc_op id="87" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="22">
     <action_set>
-      <rsc_op id="70" operation="monitor" operation_key="galera:1_monitor_20000" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2">
+      <rsc_op id="88" operation="monitor" operation_key="galera:1_monitor_20000" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2">
         <primitive id="galera" long-id="galera:1" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-1" CRM_meta_on_node_uuid="galera-bundle-1" CRM_meta_physical_host="metal-2" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="56" operation="start" operation_key="galera-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="74" operation="start" operation_key="galera-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="69" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2"/>
+        <rsc_op id="87" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="23">
     <action_set>
-      <rsc_op id="69" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2">
+      <rsc_op id="87" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2">
         <primitive id="galera" long-id="galera:1" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-1" CRM_meta_on_node_uuid="galera-bundle-1" CRM_meta_physical_host="metal-2" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="54" operation="start" operation_key="galera-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="72" operation="start" operation_key="galera-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="56" operation="start" operation_key="galera-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="74" operation="start" operation_key="galera-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
+        <rsc_op id="84" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="75" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <pseudo_event id="93" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="24">
     <action_set>
-      <rsc_op id="74" operation="monitor" operation_key="galera:2_monitor_30000" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3">
+      <rsc_op id="92" operation="monitor" operation_key="galera:2_monitor_30000" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3">
         <primitive id="galera" long-id="galera:2" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-2" CRM_meta_on_node_uuid="galera-bundle-2" CRM_meta_physical_host="metal-3" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="60" operation="start" operation_key="galera-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="78" operation="start" operation_key="galera-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="72" operation="start" operation_key="galera:2_start_0" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3"/>
+        <rsc_op id="90" operation="start" operation_key="galera:2_start_0" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="25">
     <action_set>
-      <rsc_op id="73" operation="monitor" operation_key="galera:2_monitor_20000" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3">
+      <rsc_op id="91" operation="monitor" operation_key="galera:2_monitor_20000" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3">
         <primitive id="galera" long-id="galera:2" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-2" CRM_meta_on_node_uuid="galera-bundle-2" CRM_meta_physical_host="metal-3" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="60" operation="start" operation_key="galera-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="78" operation="start" operation_key="galera-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="72" operation="start" operation_key="galera:2_start_0" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3"/>
+        <rsc_op id="90" operation="start" operation_key="galera:2_start_0" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="26">
     <action_set>
-      <rsc_op id="72" operation="start" operation_key="galera:2_start_0" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3">
+      <rsc_op id="90" operation="start" operation_key="galera:2_start_0" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3">
         <primitive id="galera" long-id="galera:2" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-2" CRM_meta_on_node_uuid="galera-bundle-2" CRM_meta_physical_host="metal-3" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="58" operation="start" operation_key="galera-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="76" operation="start" operation_key="galera-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="60" operation="start" operation_key="galera-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="78" operation="start" operation_key="galera-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="69" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2"/>
+        <rsc_op id="87" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="75" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <pseudo_event id="93" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="27" priority="1000000">
     <action_set>
-      <pseudo_event id="76" operation="running" operation_key="galera-bundle-master_running_0">
+      <pseudo_event id="94" operation="running" operation_key="galera-bundle-master_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
+        <rsc_op id="84" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="69" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2"/>
+        <rsc_op id="87" operation="start" operation_key="galera:1_start_0" on_node="galera-bundle-1" on_node_uuid="galera-bundle-1" router_node="metal-2"/>
       </trigger>
       <trigger>
-        <rsc_op id="72" operation="start" operation_key="galera:2_start_0" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3"/>
+        <rsc_op id="90" operation="start" operation_key="galera:2_start_0" on_node="galera-bundle-2" on_node_uuid="galera-bundle-2" router_node="metal-3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="75" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <pseudo_event id="93" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="28">
     <action_set>
-      <pseudo_event id="75" operation="start" operation_key="galera-bundle-master_start_0">
+      <pseudo_event id="93" operation="start" operation_key="galera-bundle-master_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -447,50 +447,50 @@
         <rsc_op id="3" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="5" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="5" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="7" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="13" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="19" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="14" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="21" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="15" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="23" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="23" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="35" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="24" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="37" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="25" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="39" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="62" operation="start" operation_key="galera-bundle_start_0"/>
+        <pseudo_event id="80" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="29">
     <action_set>
-      <rsc_op id="51" operation="monitor" operation_key="galera-bundle-docker-0_monitor_60000" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="69" operation="monitor" operation_key="galera-bundle-docker-0_monitor_60000" on_node="metal-1" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="50" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="68" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="30">
     <action_set>
-      <rsc_op id="50" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="68" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
@@ -500,37 +500,37 @@
         <rsc_op id="3" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="5" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="5" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="7" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="13" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="19" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="14" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="21" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="15" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="23" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="23" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="35" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="24" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="37" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="25" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="39" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="62" operation="start" operation_key="galera-bundle_start_0"/>
+        <pseudo_event id="80" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="31">
     <action_set>
-      <rsc_op id="23" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="35" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
@@ -539,7 +539,7 @@
   </synapse>
   <synapse id="32">
     <action_set>
-      <rsc_op id="13" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="19" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
@@ -557,46 +557,82 @@
   </synapse>
   <synapse id="34">
     <action_set>
-      <rsc_op id="53" operation="monitor" operation_key="galera-bundle-0_monitor_60000" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="71" operation="monitor" operation_key="galera-bundle-0_monitor_60000" on_node="metal-1" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="metal-1"  port="3123"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="52" operation="start" operation_key="galera-bundle-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="70" operation="start" operation_key="galera-bundle-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="35">
     <action_set>
-      <rsc_op id="52" operation="start" operation_key="galera-bundle-0_start_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="70" operation="start" operation_key="galera-bundle-0_start_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="metal-1"  port="3123"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="50" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="4" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="20" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="36" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="68" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="36">
     <action_set>
-      <rsc_op id="55" operation="monitor" operation_key="galera-bundle-docker-1_monitor_60000" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="36" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="metal-3" on_node_uuid="3">
+        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-1"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="37">
+    <action_set>
+      <rsc_op id="20" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="metal-2" on_node_uuid="2">
+        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-1"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="38">
+    <action_set>
+      <rsc_op id="4" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="metal-1" on_node_uuid="1">
+        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-1"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="39">
+    <action_set>
+      <rsc_op id="73" operation="monitor" operation_key="galera-bundle-docker-1_monitor_60000" on_node="metal-2" on_node_uuid="2">
         <primitive id="galera-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-1" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-1:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="54" operation="start" operation_key="galera-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="72" operation="start" operation_key="galera-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="37">
+  <synapse id="40">
     <action_set>
-      <rsc_op id="54" operation="start" operation_key="galera-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="72" operation="start" operation_key="galera-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="galera-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-1" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-1:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
@@ -606,103 +642,139 @@
         <rsc_op id="3" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="5" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="5" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="7" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="13" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="19" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="14" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="21" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="15" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="23" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="23" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="35" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="24" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="37" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="25" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="39" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="62" operation="start" operation_key="galera-bundle_start_0"/>
+        <pseudo_event id="80" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="38">
+  <synapse id="41">
     <action_set>
-      <rsc_op id="24" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="37" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="galera-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-1" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-1:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="39">
+  <synapse id="42">
     <action_set>
-      <rsc_op id="14" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="21" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="galera-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-1" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-1:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="40">
+  <synapse id="43">
     <action_set>
-      <rsc_op id="4" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="5" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="galera-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-1" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-1:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="41">
+  <synapse id="44">
     <action_set>
-      <rsc_op id="57" operation="monitor" operation_key="galera-bundle-1_monitor_60000" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="75" operation="monitor" operation_key="galera-bundle-1_monitor_60000" on_node="metal-2" on_node_uuid="2">
         <primitive id="galera-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-1" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" addr="metal-2"  port="3123"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="56" operation="start" operation_key="galera-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="74" operation="start" operation_key="galera-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="42">
+  <synapse id="45">
     <action_set>
-      <rsc_op id="56" operation="start" operation_key="galera-bundle-1_start_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="74" operation="start" operation_key="galera-bundle-1_start_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="galera-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-1" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" addr="metal-2"  port="3123"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="54" operation="start" operation_key="galera-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="6" operation="monitor" operation_key="galera-bundle-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="22" operation="monitor" operation_key="galera-bundle-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="38" operation="monitor" operation_key="galera-bundle-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="72" operation="start" operation_key="galera-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="43">
+  <synapse id="46">
     <action_set>
-      <rsc_op id="59" operation="monitor" operation_key="galera-bundle-docker-2_monitor_60000" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="38" operation="monitor" operation_key="galera-bundle-1_monitor_0" on_node="metal-3" on_node_uuid="3">
+        <primitive id="galera-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-1" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-2"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="47">
+    <action_set>
+      <rsc_op id="22" operation="monitor" operation_key="galera-bundle-1_monitor_0" on_node="metal-2" on_node_uuid="2">
+        <primitive id="galera-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-1" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-2"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="48">
+    <action_set>
+      <rsc_op id="6" operation="monitor" operation_key="galera-bundle-1_monitor_0" on_node="metal-1" on_node_uuid="1">
+        <primitive id="galera-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-1" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-2"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="49">
+    <action_set>
+      <rsc_op id="77" operation="monitor" operation_key="galera-bundle-docker-2_monitor_60000" on_node="metal-3" on_node_uuid="3">
         <primitive id="galera-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-2" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-2:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="58" operation="start" operation_key="galera-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="76" operation="start" operation_key="galera-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="44">
+  <synapse id="50">
     <action_set>
-      <rsc_op id="58" operation="start" operation_key="galera-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="76" operation="start" operation_key="galera-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="galera-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-2" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-2:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
@@ -712,1305 +784,1449 @@
         <rsc_op id="3" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="5" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="5" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="7" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="13" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="19" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="14" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="21" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="15" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="23" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="23" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="35" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="24" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="37" operation="monitor" operation_key="galera-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="25" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="39" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="62" operation="start" operation_key="galera-bundle_start_0"/>
+        <pseudo_event id="80" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="45">
+  <synapse id="51">
     <action_set>
-      <rsc_op id="25" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="39" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="galera-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-2" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-2:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="46">
+  <synapse id="52">
     <action_set>
-      <rsc_op id="15" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="23" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="galera-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-2" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-2:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="47">
+  <synapse id="53">
     <action_set>
-      <rsc_op id="5" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="7" operation="monitor" operation_key="galera-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="galera-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-2" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-2:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="48">
+  <synapse id="54">
     <action_set>
-      <rsc_op id="61" operation="monitor" operation_key="galera-bundle-2_monitor_60000" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="79" operation="monitor" operation_key="galera-bundle-2_monitor_60000" on_node="metal-3" on_node_uuid="3">
         <primitive id="galera-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-2" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" addr="metal-3"  port="3123"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="60" operation="start" operation_key="galera-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="78" operation="start" operation_key="galera-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="49">
+  <synapse id="55">
     <action_set>
-      <rsc_op id="60" operation="start" operation_key="galera-bundle-2_start_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="78" operation="start" operation_key="galera-bundle-2_start_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="galera-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-2" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" addr="metal-3"  port="3123"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="58" operation="start" operation_key="galera-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="8" operation="monitor" operation_key="galera-bundle-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="24" operation="monitor" operation_key="galera-bundle-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="40" operation="monitor" operation_key="galera-bundle-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="76" operation="start" operation_key="galera-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="50">
+  <synapse id="56">
+    <action_set>
+      <rsc_op id="40" operation="monitor" operation_key="galera-bundle-2_monitor_0" on_node="metal-3" on_node_uuid="3">
+        <primitive id="galera-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-2" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-3"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="57">
+    <action_set>
+      <rsc_op id="24" operation="monitor" operation_key="galera-bundle-2_monitor_0" on_node="metal-2" on_node_uuid="2">
+        <primitive id="galera-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-2" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-3"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="58">
+    <action_set>
+      <rsc_op id="8" operation="monitor" operation_key="galera-bundle-2_monitor_0" on_node="metal-1" on_node_uuid="1">
+        <primitive id="galera-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-2" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-3"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="59">
     <action_set>
-      <rsc_op id="88" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="106" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="metal-1" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="87" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="105" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="51">
+  <synapse id="60">
     <action_set>
-      <rsc_op id="87" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="105" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="6" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="9" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="7" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="10" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="8" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="11" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="16" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="25" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="17" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="26" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="18" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="27" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="26" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="41" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="27" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="42" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="28" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="43" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="93" operation="start" operation_key="haproxy-bundle_start_0"/>
+        <pseudo_event id="111" operation="start" operation_key="haproxy-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="52">
+  <synapse id="61">
     <action_set>
-      <rsc_op id="26" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="41" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="53">
+  <synapse id="62">
     <action_set>
-      <rsc_op id="16" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="25" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="54">
+  <synapse id="63">
     <action_set>
-      <rsc_op id="6" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="9" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="55">
+  <synapse id="64">
     <action_set>
-      <rsc_op id="90" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_60000" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="108" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_60000" on_node="metal-2" on_node_uuid="2">
         <primitive id="haproxy-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="89" operation="start" operation_key="haproxy-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="107" operation="start" operation_key="haproxy-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="56">
+  <synapse id="65">
     <action_set>
-      <rsc_op id="89" operation="start" operation_key="haproxy-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="107" operation="start" operation_key="haproxy-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="haproxy-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="6" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="9" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="7" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="10" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="8" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="11" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="16" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="25" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="17" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="26" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="18" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="27" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="26" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="41" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="27" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="42" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="28" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="43" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="93" operation="start" operation_key="haproxy-bundle_start_0"/>
+        <pseudo_event id="111" operation="start" operation_key="haproxy-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="57">
+  <synapse id="66">
     <action_set>
-      <rsc_op id="27" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="42" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="haproxy-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="58">
+  <synapse id="67">
     <action_set>
-      <rsc_op id="17" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="26" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="haproxy-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="59">
+  <synapse id="68">
     <action_set>
-      <rsc_op id="7" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="10" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="60">
+  <synapse id="69">
     <action_set>
-      <rsc_op id="92" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_60000" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="110" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_60000" on_node="metal-3" on_node_uuid="3">
         <primitive id="haproxy-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="91" operation="start" operation_key="haproxy-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="109" operation="start" operation_key="haproxy-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="61">
+  <synapse id="70">
     <action_set>
-      <rsc_op id="91" operation="start" operation_key="haproxy-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="109" operation="start" operation_key="haproxy-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="haproxy-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="6" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="9" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="7" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="10" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="8" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="11" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="16" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="25" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="17" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="26" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="18" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="27" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="26" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="41" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="27" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="42" operation="monitor" operation_key="haproxy-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="28" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="43" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="93" operation="start" operation_key="haproxy-bundle_start_0"/>
+        <pseudo_event id="111" operation="start" operation_key="haproxy-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="62">
+  <synapse id="71">
     <action_set>
-      <rsc_op id="28" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="43" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="haproxy-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="63">
+  <synapse id="72">
     <action_set>
-      <rsc_op id="18" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="27" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="haproxy-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="64">
+  <synapse id="73">
     <action_set>
-      <rsc_op id="8" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="11" operation="monitor" operation_key="haproxy-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="65" priority="1000000">
+  <synapse id="74" priority="1000000">
     <action_set>
-      <rsc_op id="168" operation="notify" operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
+      <rsc_op id="186" operation="notify" operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="metal-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="138" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+        <pseudo_event id="156" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="66">
+  <synapse id="75">
     <action_set>
-      <rsc_op id="167" operation="notify" operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
+      <rsc_op id="185" operation="notify" operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="metal-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="136" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+        <pseudo_event id="154" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="67" priority="1000000">
+  <synapse id="76" priority="1000000">
     <action_set>
-      <rsc_op id="164" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
+      <rsc_op id="182" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="metal-1" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="126" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+        <pseudo_event id="144" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="68">
+  <synapse id="77">
     <action_set>
-      <rsc_op id="115" operation="monitor" operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
+      <rsc_op id="133" operation="monitor" operation_key="redis:0_monitor_20000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_op_target_rc="8" CRM_meta_physical_host="metal-1" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="99" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="117" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="113" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
+        <rsc_op id="131" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="114" operation="promote" operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
+        <rsc_op id="132" operation="promote" operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="127" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+        <pseudo_event id="145" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="139" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
+        <pseudo_event id="157" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="69">
+  <synapse id="78">
     <action_set>
-      <rsc_op id="114" operation="promote" operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
+      <rsc_op id="132" operation="promote" operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="metal-1" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="97" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="115" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="99" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="117" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="113" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
+        <rsc_op id="131" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="134" operation="promote" operation_key="redis-bundle-master_promote_0"/>
+        <pseudo_event id="152" operation="promote" operation_key="redis-bundle-master_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="70">
+  <synapse id="79">
     <action_set>
-      <rsc_op id="113" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
+      <rsc_op id="131" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="metal-1" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="97" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="115" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="99" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="117" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="122" operation="start" operation_key="redis-bundle-master_start_0"/>
+        <pseudo_event id="140" operation="start" operation_key="redis-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="71" priority="1000000">
+  <synapse id="80" priority="1000000">
     <action_set>
-      <rsc_op id="170" operation="notify" operation_key="redis:1_post_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
+      <rsc_op id="188" operation="notify" operation_key="redis:1_post_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="metal-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="138" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+        <pseudo_event id="156" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="72">
+  <synapse id="81">
     <action_set>
-      <rsc_op id="169" operation="notify" operation_key="redis:1_pre_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
+      <rsc_op id="187" operation="notify" operation_key="redis:1_pre_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="metal-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="136" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+        <pseudo_event id="154" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="73" priority="1000000">
+  <synapse id="82" priority="1000000">
     <action_set>
-      <rsc_op id="165" operation="notify" operation_key="redis:1_post_notify_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
+      <rsc_op id="183" operation="notify" operation_key="redis:1_post_notify_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="metal-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="126" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+        <pseudo_event id="144" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="74">
+  <synapse id="83">
     <action_set>
-      <rsc_op id="118" operation="monitor" operation_key="redis:1_monitor_20000" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
+      <rsc_op id="136" operation="monitor" operation_key="redis:1_monitor_20000" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_op_target_rc="8" CRM_meta_physical_host="metal-2" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="103" operation="start" operation_key="redis-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="121" operation="start" operation_key="redis-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="116" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+        <rsc_op id="134" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
       </trigger>
       <trigger>
-        <rsc_op id="117" operation="promote" operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+        <rsc_op id="135" operation="promote" operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="127" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+        <pseudo_event id="145" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="139" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
+        <pseudo_event id="157" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="75">
+  <synapse id="84">
     <action_set>
-      <rsc_op id="117" operation="promote" operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
+      <rsc_op id="135" operation="promote" operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="metal-2" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="101" operation="start" operation_key="redis-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="119" operation="start" operation_key="redis-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="103" operation="start" operation_key="redis-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="121" operation="start" operation_key="redis-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="114" operation="promote" operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
+        <rsc_op id="132" operation="promote" operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="116" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+        <rsc_op id="134" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="134" operation="promote" operation_key="redis-bundle-master_promote_0"/>
+        <pseudo_event id="152" operation="promote" operation_key="redis-bundle-master_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="76">
+  <synapse id="85">
     <action_set>
-      <rsc_op id="116" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
+      <rsc_op id="134" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2">
         <primitive id="redis" long-id="redis:1" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-1" CRM_meta_on_node_uuid="redis-bundle-1" CRM_meta_physical_host="metal-2" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="101" operation="start" operation_key="redis-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="119" operation="start" operation_key="redis-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="103" operation="start" operation_key="redis-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="121" operation="start" operation_key="redis-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="113" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
+        <rsc_op id="131" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="122" operation="start" operation_key="redis-bundle-master_start_0"/>
+        <pseudo_event id="140" operation="start" operation_key="redis-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="77" priority="1000000">
+  <synapse id="86" priority="1000000">
     <action_set>
-      <rsc_op id="172" operation="notify" operation_key="redis:2_post_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
+      <rsc_op id="190" operation="notify" operation_key="redis:2_post_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="metal-3" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="138" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+        <pseudo_event id="156" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="78">
+  <synapse id="87">
     <action_set>
-      <rsc_op id="171" operation="notify" operation_key="redis:2_pre_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
+      <rsc_op id="189" operation="notify" operation_key="redis:2_pre_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="promote" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="pre" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="metal-3" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="136" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+        <pseudo_event id="154" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="79" priority="1000000">
+  <synapse id="88" priority="1000000">
     <action_set>
-      <rsc_op id="166" operation="notify" operation_key="redis:2_post_notify_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
+      <rsc_op id="184" operation="notify" operation_key="redis:2_post_notify_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="metal-3" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="126" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+        <pseudo_event id="144" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="80">
+  <synapse id="89">
     <action_set>
-      <rsc_op id="121" operation="monitor" operation_key="redis:2_monitor_20000" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
+      <rsc_op id="139" operation="monitor" operation_key="redis:2_monitor_20000" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_op_target_rc="8" CRM_meta_physical_host="metal-3" CRM_meta_role="Master" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="107" operation="start" operation_key="redis-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="125" operation="start" operation_key="redis-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="119" operation="start" operation_key="redis:2_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
+        <rsc_op id="137" operation="start" operation_key="redis:2_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
       </trigger>
       <trigger>
-        <rsc_op id="120" operation="promote" operation_key="redis:2_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
+        <rsc_op id="138" operation="promote" operation_key="redis:2_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="127" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+        <pseudo_event id="145" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="139" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
+        <pseudo_event id="157" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="81">
+  <synapse id="90">
     <action_set>
-      <rsc_op id="120" operation="promote" operation_key="redis:2_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
+      <rsc_op id="138" operation="promote" operation_key="redis:2_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="promote" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="metal-3" CRM_meta_timeout="120000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="105" operation="start" operation_key="redis-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="123" operation="start" operation_key="redis-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="107" operation="start" operation_key="redis-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="125" operation="start" operation_key="redis-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="117" operation="promote" operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+        <rsc_op id="135" operation="promote" operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
       </trigger>
       <trigger>
-        <rsc_op id="119" operation="start" operation_key="redis:2_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
+        <rsc_op id="137" operation="start" operation_key="redis:2_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="134" operation="promote" operation_key="redis-bundle-master_promote_0"/>
+        <pseudo_event id="152" operation="promote" operation_key="redis-bundle-master_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="82">
+  <synapse id="91">
     <action_set>
-      <rsc_op id="119" operation="start" operation_key="redis:2_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
+      <rsc_op id="137" operation="start" operation_key="redis:2_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3">
         <primitive id="redis" long-id="redis:2" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="rabbitmq-bundle-0 redis-bundle-2 redis-bundle-1 redis-bundle-0 metal-3 metal-2 metal-1 galera-bundle-2 galera-bundle-1 galera-bundle-0" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0 redis:1 redis:2" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource="redis:0 redis:1 redis:2" CRM_meta_notify_promote_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0 redis:1 redis:2" CRM_meta_notify_start_uname="redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-2" CRM_meta_on_node_uuid="redis-bundle-2" CRM_meta_physical_host="metal-3" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="105" operation="start" operation_key="redis-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="123" operation="start" operation_key="redis-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="107" operation="start" operation_key="redis-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="125" operation="start" operation_key="redis-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="116" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+        <rsc_op id="134" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="122" operation="start" operation_key="redis-bundle-master_start_0"/>
+        <pseudo_event id="140" operation="start" operation_key="redis-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="83" priority="1000000">
+  <synapse id="92" priority="1000000">
     <action_set>
-      <pseudo_event id="139" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0">
+      <pseudo_event id="157" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="138" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
+        <pseudo_event id="156" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="168" operation="notify" operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
+        <rsc_op id="186" operation="notify" operation_key="redis:0_post_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="170" operation="notify" operation_key="redis:1_post_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+        <rsc_op id="188" operation="notify" operation_key="redis:1_post_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
       </trigger>
       <trigger>
-        <rsc_op id="172" operation="notify" operation_key="redis:2_post_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
+        <rsc_op id="190" operation="notify" operation_key="redis:2_post_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="84" priority="1000000">
+  <synapse id="93" priority="1000000">
     <action_set>
-      <pseudo_event id="138" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0">
+      <pseudo_event id="156" operation="notify" operation_key="redis-bundle-master_post_notify_promoted_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promoted" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="promote" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="135" operation="promoted" operation_key="redis-bundle-master_promoted_0"/>
+        <pseudo_event id="153" operation="promoted" operation_key="redis-bundle-master_promoted_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="137" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+        <pseudo_event id="155" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="85">
+  <synapse id="94">
     <action_set>
-      <pseudo_event id="137" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0">
+      <pseudo_event id="155" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="136" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
+        <pseudo_event id="154" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="167" operation="notify" operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
+        <rsc_op id="185" operation="notify" operation_key="redis:0_pre_notify_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="169" operation="notify" operation_key="redis:1_pre_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+        <rsc_op id="187" operation="notify" operation_key="redis:1_pre_notify_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
       </trigger>
       <trigger>
-        <rsc_op id="171" operation="notify" operation_key="redis:2_pre_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
+        <rsc_op id="189" operation="notify" operation_key="redis:2_pre_notify_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="86">
+  <synapse id="95">
     <action_set>
-      <pseudo_event id="136" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0">
+      <pseudo_event id="154" operation="notify" operation_key="redis-bundle-master_pre_notify_promote_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="promote" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="promote" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="127" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+        <pseudo_event id="145" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="87" priority="1000000">
+  <synapse id="96" priority="1000000">
     <action_set>
-      <pseudo_event id="135" operation="promoted" operation_key="redis-bundle-master_promoted_0">
+      <pseudo_event id="153" operation="promoted" operation_key="redis-bundle-master_promoted_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="114" operation="promote" operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
+        <rsc_op id="132" operation="promote" operation_key="redis:0_promote_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="117" operation="promote" operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+        <rsc_op id="135" operation="promote" operation_key="redis:1_promote_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
       </trigger>
       <trigger>
-        <rsc_op id="120" operation="promote" operation_key="redis:2_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
+        <rsc_op id="138" operation="promote" operation_key="redis:2_promote_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="88">
+  <synapse id="97">
     <action_set>
-      <pseudo_event id="134" operation="promote" operation_key="redis-bundle-master_promote_0">
+      <pseudo_event id="152" operation="promote" operation_key="redis-bundle-master_promote_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="123" operation="running" operation_key="redis-bundle-master_running_0"/>
+        <pseudo_event id="141" operation="running" operation_key="redis-bundle-master_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="137" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
+        <pseudo_event id="155" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_promote_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="146" operation="promote" operation_key="redis-bundle_promote_0"/>
+        <pseudo_event id="164" operation="promote" operation_key="redis-bundle_promote_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="89" priority="1000000">
+  <synapse id="98" priority="1000000">
     <action_set>
-      <pseudo_event id="127" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0">
+      <pseudo_event id="145" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="126" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+        <pseudo_event id="144" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="164" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
+        <rsc_op id="182" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="165" operation="notify" operation_key="redis:1_post_notify_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+        <rsc_op id="183" operation="notify" operation_key="redis:1_post_notify_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
       </trigger>
       <trigger>
-        <rsc_op id="166" operation="notify" operation_key="redis:2_post_notify_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
+        <rsc_op id="184" operation="notify" operation_key="redis:2_post_notify_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="90" priority="1000000">
+  <synapse id="99" priority="1000000">
     <action_set>
-      <pseudo_event id="126" operation="notify" operation_key="redis-bundle-master_post_notify_running_0">
+      <pseudo_event id="144" operation="notify" operation_key="redis-bundle-master_post_notify_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="123" operation="running" operation_key="redis-bundle-master_running_0"/>
+        <pseudo_event id="141" operation="running" operation_key="redis-bundle-master_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="125" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="143" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="91">
+  <synapse id="100">
     <action_set>
-      <pseudo_event id="125" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0">
+      <pseudo_event id="143" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="124" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0"/>
+        <pseudo_event id="142" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="92">
+  <synapse id="101">
     <action_set>
-      <pseudo_event id="124" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0">
+      <pseudo_event id="142" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="93" priority="1000000">
+  <synapse id="102" priority="1000000">
     <action_set>
-      <pseudo_event id="123" operation="running" operation_key="redis-bundle-master_running_0">
+      <pseudo_event id="141" operation="running" operation_key="redis-bundle-master_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="113" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
+        <rsc_op id="131" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-1"/>
       </trigger>
       <trigger>
-        <rsc_op id="116" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
+        <rsc_op id="134" operation="start" operation_key="redis:1_start_0" on_node="redis-bundle-1" on_node_uuid="redis-bundle-1" router_node="metal-2"/>
       </trigger>
       <trigger>
-        <rsc_op id="119" operation="start" operation_key="redis:2_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
+        <rsc_op id="137" operation="start" operation_key="redis:2_start_0" on_node="redis-bundle-2" on_node_uuid="redis-bundle-2" router_node="metal-3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="122" operation="start" operation_key="redis-bundle-master_start_0"/>
+        <pseudo_event id="140" operation="start" operation_key="redis-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="94">
+  <synapse id="103">
     <action_set>
-      <pseudo_event id="122" operation="start" operation_key="redis-bundle-master_start_0">
+      <pseudo_event id="140" operation="start" operation_key="redis-bundle-master_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="9" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="12" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="10" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="14" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="11" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="16" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="19" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="28" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="20" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="30" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="21" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="32" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="29" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="44" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="30" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="46" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="31" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="48" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="109" operation="start" operation_key="redis-bundle_start_0"/>
+        <pseudo_event id="127" operation="start" operation_key="redis-bundle_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="125" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="143" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="95">
+  <synapse id="104">
     <action_set>
-      <rsc_op id="98" operation="monitor" operation_key="redis-bundle-docker-0_monitor_60000" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="116" operation="monitor" operation_key="redis-bundle-docker-0_monitor_60000" on_node="metal-1" on_node_uuid="1">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="97" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="115" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="96">
+  <synapse id="105">
     <action_set>
-      <rsc_op id="97" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="115" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="9" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="12" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="10" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="14" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="11" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="16" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="19" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="28" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="20" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="30" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="21" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="32" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="29" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="44" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="30" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="46" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="31" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="48" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="109" operation="start" operation_key="redis-bundle_start_0"/>
+        <pseudo_event id="127" operation="start" operation_key="redis-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="97">
+  <synapse id="106">
     <action_set>
-      <rsc_op id="29" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="44" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="98">
+  <synapse id="107">
     <action_set>
-      <rsc_op id="19" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="28" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="99">
+  <synapse id="108">
     <action_set>
-      <rsc_op id="9" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="12" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="100">
+  <synapse id="109">
     <action_set>
-      <rsc_op id="100" operation="monitor" operation_key="redis-bundle-0_monitor_60000" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="118" operation="monitor" operation_key="redis-bundle-0_monitor_60000" on_node="metal-1" on_node_uuid="1">
         <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="metal-1"  port="3124"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="99" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="117" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="101">
+  <synapse id="110">
     <action_set>
-      <rsc_op id="99" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="117" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="metal-1"  port="3124"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="97" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="13" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="29" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="45" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="115" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="102">
+  <synapse id="111">
     <action_set>
-      <rsc_op id="102" operation="monitor" operation_key="redis-bundle-docker-1_monitor_60000" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="45" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="metal-3" on_node_uuid="3">
+        <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-1"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="112">
+    <action_set>
+      <rsc_op id="29" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="metal-2" on_node_uuid="2">
+        <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-1"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="113">
+    <action_set>
+      <rsc_op id="13" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="metal-1" on_node_uuid="1">
+        <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-1"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="114">
+    <action_set>
+      <rsc_op id="120" operation="monitor" operation_key="redis-bundle-docker-1_monitor_60000" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-1" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-1:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="101" operation="start" operation_key="redis-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="119" operation="start" operation_key="redis-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="103">
+  <synapse id="115">
     <action_set>
-      <rsc_op id="101" operation="start" operation_key="redis-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="119" operation="start" operation_key="redis-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-1" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-1:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="9" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="12" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="10" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="14" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="11" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="16" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="19" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="28" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="20" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="30" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="21" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="32" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="29" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="44" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="30" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="46" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="31" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="48" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="109" operation="start" operation_key="redis-bundle_start_0"/>
+        <pseudo_event id="127" operation="start" operation_key="redis-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="104">
+  <synapse id="116">
     <action_set>
-      <rsc_op id="30" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="46" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="redis-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-1" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-1:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="105">
+  <synapse id="117">
     <action_set>
-      <rsc_op id="20" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="30" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-1" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-1:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="106">
+  <synapse id="118">
     <action_set>
-      <rsc_op id="10" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="14" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="redis-bundle-docker-1" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-1" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-1:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="107">
+  <synapse id="119">
     <action_set>
-      <rsc_op id="104" operation="monitor" operation_key="redis-bundle-1_monitor_60000" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="122" operation="monitor" operation_key="redis-bundle-1_monitor_60000" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="redis-bundle-docker-1" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" addr="metal-2"  port="3124"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="103" operation="start" operation_key="redis-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="121" operation="start" operation_key="redis-bundle-1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="108">
+  <synapse id="120">
     <action_set>
-      <rsc_op id="103" operation="start" operation_key="redis-bundle-1_start_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="121" operation="start" operation_key="redis-bundle-1_start_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="redis-bundle-docker-1" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" addr="metal-2"  port="3124"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="101" operation="start" operation_key="redis-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="15" operation="monitor" operation_key="redis-bundle-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="31" operation="monitor" operation_key="redis-bundle-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="47" operation="monitor" operation_key="redis-bundle-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="119" operation="start" operation_key="redis-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="109">
+  <synapse id="121">
     <action_set>
-      <rsc_op id="106" operation="monitor" operation_key="redis-bundle-docker-2_monitor_60000" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="47" operation="monitor" operation_key="redis-bundle-1_monitor_0" on_node="metal-3" on_node_uuid="3">
+        <primitive id="redis-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-1" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-2"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="122">
+    <action_set>
+      <rsc_op id="31" operation="monitor" operation_key="redis-bundle-1_monitor_0" on_node="metal-2" on_node_uuid="2">
+        <primitive id="redis-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-1" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-2"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="123">
+    <action_set>
+      <rsc_op id="15" operation="monitor" operation_key="redis-bundle-1_monitor_0" on_node="metal-1" on_node_uuid="1">
+        <primitive id="redis-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-1" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-2"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="124">
+    <action_set>
+      <rsc_op id="124" operation="monitor" operation_key="redis-bundle-docker-2_monitor_60000" on_node="metal-3" on_node_uuid="3">
         <primitive id="redis-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-2" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-2:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="105" operation="start" operation_key="redis-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="123" operation="start" operation_key="redis-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="110">
+  <synapse id="125">
     <action_set>
-      <rsc_op id="105" operation="start" operation_key="redis-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="123" operation="start" operation_key="redis-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="redis-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-2" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-2:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="9" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="12" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="10" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="14" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="11" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="16" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="19" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="28" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="20" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="30" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="21" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="32" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="29" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="44" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="30" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="46" operation="monitor" operation_key="redis-bundle-docker-1_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <rsc_op id="31" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="48" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="109" operation="start" operation_key="redis-bundle_start_0"/>
+        <pseudo_event id="127" operation="start" operation_key="redis-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="111">
+  <synapse id="126">
     <action_set>
-      <rsc_op id="31" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="48" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="redis-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-2" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-2:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="112">
+  <synapse id="127">
     <action_set>
-      <rsc_op id="21" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="32" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-2" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-2:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="113">
+  <synapse id="128">
     <action_set>
-      <rsc_op id="11" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="16" operation="monitor" operation_key="redis-bundle-docker-2_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="redis-bundle-docker-2" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-2" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-2:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="114">
+  <synapse id="129">
     <action_set>
-      <rsc_op id="108" operation="monitor" operation_key="redis-bundle-2_monitor_60000" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="126" operation="monitor" operation_key="redis-bundle-2_monitor_60000" on_node="metal-3" on_node_uuid="3">
         <primitive id="redis-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="redis-bundle-docker-2" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" addr="metal-3"  port="3124"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="107" operation="start" operation_key="redis-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="125" operation="start" operation_key="redis-bundle-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="115">
+  <synapse id="130">
     <action_set>
-      <rsc_op id="107" operation="start" operation_key="redis-bundle-2_start_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="125" operation="start" operation_key="redis-bundle-2_start_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="redis-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="redis-bundle-docker-2" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000" addr="metal-3"  port="3124"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="105" operation="start" operation_key="redis-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="17" operation="monitor" operation_key="redis-bundle-2_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="33" operation="monitor" operation_key="redis-bundle-2_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="49" operation="monitor" operation_key="redis-bundle-2_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="123" operation="start" operation_key="redis-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="116" priority="1000000">
+  <synapse id="131">
+    <action_set>
+      <rsc_op id="49" operation="monitor" operation_key="redis-bundle-2_monitor_0" on_node="metal-3" on_node_uuid="3">
+        <primitive id="redis-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-2" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-3"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="132">
     <action_set>
-      <pseudo_event id="147" operation="promoted" operation_key="redis-bundle_promoted_0">
+      <rsc_op id="33" operation="monitor" operation_key="redis-bundle-2_monitor_0" on_node="metal-2" on_node_uuid="2">
+        <primitive id="redis-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-2" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-3"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="133">
+    <action_set>
+      <rsc_op id="17" operation="monitor" operation_key="redis-bundle-2_monitor_0" on_node="metal-1" on_node_uuid="1">
+        <primitive id="redis-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-2" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-3"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="134" priority="1000000">
+    <action_set>
+      <pseudo_event id="165" operation="promoted" operation_key="redis-bundle_promoted_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="139" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
+        <pseudo_event id="157" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_promoted_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="117">
+  <synapse id="135">
     <action_set>
-      <pseudo_event id="146" operation="promote" operation_key="redis-bundle_promote_0">
+      <pseudo_event id="164" operation="promote" operation_key="redis-bundle_promote_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="110" operation="running" operation_key="redis-bundle_running_0"/>
+        <pseudo_event id="128" operation="running" operation_key="redis-bundle_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="118" priority="1000000">
+  <synapse id="136" priority="1000000">
     <action_set>
-      <pseudo_event id="110" operation="running" operation_key="redis-bundle_running_0">
+      <pseudo_event id="128" operation="running" operation_key="redis-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="97" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="115" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="101" operation="start" operation_key="redis-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="119" operation="start" operation_key="redis-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="105" operation="start" operation_key="redis-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="123" operation="start" operation_key="redis-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="127" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+        <pseudo_event id="145" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="119">
+  <synapse id="137">
     <action_set>
-      <pseudo_event id="109" operation="start" operation_key="redis-bundle_start_0">
+      <pseudo_event id="127" operation="start" operation_key="redis-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="120" priority="1000000">
+  <synapse id="138" priority="1000000">
     <action_set>
-      <pseudo_event id="94" operation="running" operation_key="haproxy-bundle_running_0">
+      <pseudo_event id="112" operation="running" operation_key="haproxy-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="87" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="105" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="89" operation="start" operation_key="haproxy-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="107" operation="start" operation_key="haproxy-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="91" operation="start" operation_key="haproxy-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="109" operation="start" operation_key="haproxy-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="121">
+  <synapse id="139">
     <action_set>
-      <pseudo_event id="93" operation="start" operation_key="haproxy-bundle_start_0">
+      <pseudo_event id="111" operation="start" operation_key="haproxy-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="122" priority="1000000">
+  <synapse id="140" priority="1000000">
     <action_set>
-      <pseudo_event id="63" operation="running" operation_key="galera-bundle_running_0">
+      <pseudo_event id="81" operation="running" operation_key="galera-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="50" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="68" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="54" operation="start" operation_key="galera-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="72" operation="start" operation_key="galera-bundle-docker-1_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="58" operation="start" operation_key="galera-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="76" operation="start" operation_key="galera-bundle-docker-2_start_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="76" operation="running" operation_key="galera-bundle-master_running_0"/>
+        <pseudo_event id="94" operation="running" operation_key="galera-bundle-master_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="123">
+  <synapse id="141">
     <action_set>
-      <pseudo_event id="62" operation="start" operation_key="galera-bundle_start_0">
+      <pseudo_event id="80" operation="start" operation_key="galera-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="43" operation="notified" operation_key="storage-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="61" operation="notified" operation_key="storage-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/bundle-order-startup-clone-2.summary b/pengine/test10/bundle-order-startup-clone-2.summary
index a2c2146..07e6f00 100644
--- a/pengine/test10/bundle-order-startup-clone-2.summary
+++ b/pengine/test10/bundle-order-startup-clone-2.summary
@@ -52,12 +52,21 @@ Executing cluster transition:
  * Resource action: galera-bundle-docker-0 monitor on metal-3
  * Resource action: galera-bundle-docker-0 monitor on metal-2
  * Resource action: galera-bundle-docker-0 monitor on metal-1
+ * Resource action: galera-bundle-0 monitor on metal-3
+ * Resource action: galera-bundle-0 monitor on metal-2
+ * Resource action: galera-bundle-0 monitor on metal-1
  * Resource action: galera-bundle-docker-1 monitor on metal-3
  * Resource action: galera-bundle-docker-1 monitor on metal-2
  * Resource action: galera-bundle-docker-1 monitor on metal-1
+ * Resource action: galera-bundle-1 monitor on metal-3
+ * Resource action: galera-bundle-1 monitor on metal-2
+ * Resource action: galera-bundle-1 monitor on metal-1
  * Resource action: galera-bundle-docker-2 monitor on metal-3
  * Resource action: galera-bundle-docker-2 monitor on metal-2
  * Resource action: galera-bundle-docker-2 monitor on metal-1
+ * Resource action: galera-bundle-2 monitor on metal-3
+ * Resource action: galera-bundle-2 monitor on metal-2
+ * Resource action: galera-bundle-2 monitor on metal-1
  * Resource action: haproxy-bundle-docker-0 monitor on metal-3
  * Resource action: haproxy-bundle-docker-0 monitor on metal-2
  * Resource action: haproxy-bundle-docker-0 monitor on metal-1
@@ -71,12 +80,21 @@ Executing cluster transition:
  * Resource action: redis-bundle-docker-0 monitor on metal-3
  * Resource action: redis-bundle-docker-0 monitor on metal-2
  * Resource action: redis-bundle-docker-0 monitor on metal-1
+ * Resource action: redis-bundle-0  monitor on metal-3
+ * Resource action: redis-bundle-0  monitor on metal-2
+ * Resource action: redis-bundle-0  monitor on metal-1
  * Resource action: redis-bundle-docker-1 monitor on metal-3
  * Resource action: redis-bundle-docker-1 monitor on metal-2
  * Resource action: redis-bundle-docker-1 monitor on metal-1
+ * Resource action: redis-bundle-1  monitor on metal-3
+ * Resource action: redis-bundle-1  monitor on metal-2
+ * Resource action: redis-bundle-1  monitor on metal-1
  * Resource action: redis-bundle-docker-2 monitor on metal-3
  * Resource action: redis-bundle-docker-2 monitor on metal-2
  * Resource action: redis-bundle-docker-2 monitor on metal-1
+ * Resource action: redis-bundle-2  monitor on metal-3
+ * Resource action: redis-bundle-2  monitor on metal-2
+ * Resource action: redis-bundle-2  monitor on metal-1
  * Pseudo action:   redis-bundle_start_0
  * Pseudo action:   haproxy-bundle_start_0
  * Pseudo action:   storage-clone_confirmed-pre_notify_start_0
diff --git a/pengine/test10/bundle-order-startup-clone.dot b/pengine/test10/bundle-order-startup-clone.dot
index b791c10..39f3635 100644
--- a/pengine/test10/bundle-order-startup-clone.dot
+++ b/pengine/test10/bundle-order-startup-clone.dot
@@ -1,4 +1,10 @@
 digraph "g" {
+"galera-bundle-0_monitor_0 metal-1" -> "galera-bundle-0_start_0 metal-1" [ style = dashed]
+"galera-bundle-0_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-0_monitor_0 metal-2" -> "galera-bundle-0_start_0 metal-1" [ style = dashed]
+"galera-bundle-0_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-0_monitor_0 metal-3" -> "galera-bundle-0_start_0 metal-1" [ style = dashed]
+"galera-bundle-0_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-0_monitor_60000 metal-1" [ style=dashed color="red" fontcolor="black"]
 "galera-bundle-0_start_0 metal-1" -> "galera-bundle-0_monitor_60000 metal-1" [ style = dashed]
 "galera-bundle-0_start_0 metal-1" -> "galera:0_monitor_20000 galera-bundle-0" [ style = dashed]
@@ -49,6 +55,12 @@ digraph "g" {
 "haproxy-bundle_running_0" [ style=bold color="green" fontcolor="orange"]
 "haproxy-bundle_start_0" -> "haproxy-bundle-docker-0_start_0 metal-2" [ style = bold]
 "haproxy-bundle_start_0" [ style=bold color="green" fontcolor="orange"]
+"redis-bundle-0_monitor_0 metal-1" -> "redis-bundle-0_start_0 metal-2" [ style = bold]
+"redis-bundle-0_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-0_monitor_0 metal-2" -> "redis-bundle-0_start_0 metal-2" [ style = bold]
+"redis-bundle-0_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-0_monitor_0 metal-3" -> "redis-bundle-0_start_0 metal-2" [ style = bold]
+"redis-bundle-0_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-0_monitor_60000 metal-2" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-0_start_0 metal-2" -> "redis-bundle-0_monitor_60000 metal-2" [ style = bold]
 "redis-bundle-0_start_0 metal-2" -> "redis:0_monitor_45000 redis-bundle-0" [ style = bold]
diff --git a/pengine/test10/bundle-order-startup-clone.exp b/pengine/test10/bundle-order-startup-clone.exp
index 5be495e..9e3dd9b 100644
--- a/pengine/test10/bundle-order-startup-clone.exp
+++ b/pengine/test10/bundle-order-startup-clone.exp
@@ -10,7 +10,7 @@
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="6" operation="monitor" operation_key="storage:1_monitor_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="8" operation="monitor" operation_key="storage:1_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="storage" long-id="storage:1" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
@@ -19,7 +19,7 @@
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="10" operation="monitor" operation_key="storage:2_monitor_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="14" operation="monitor" operation_key="storage:2_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="storage" long-id="storage:2" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="30000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
@@ -28,7 +28,7 @@
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="11" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="15" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
@@ -37,7 +37,7 @@
   </synapse>
   <synapse id="4">
     <action_set>
-      <rsc_op id="7" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="9" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
@@ -55,351 +55,414 @@
   </synapse>
   <synapse id="6">
     <action_set>
-      <rsc_op id="56" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="16" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="metal-3" on_node_uuid="3">
+        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-1"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="7">
+    <action_set>
+      <rsc_op id="10" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="metal-2" on_node_uuid="2">
+        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-1"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="8">
+    <action_set>
+      <rsc_op id="4" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="metal-1" on_node_uuid="1">
+        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-1"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="9">
+    <action_set>
+      <rsc_op id="62" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="metal-2" on_node_uuid="2">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="55" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="61" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="7">
+  <synapse id="10">
     <action_set>
-      <rsc_op id="55" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="61" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="5" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="8" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="11" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="12" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="17" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="57" operation="start" operation_key="haproxy-bundle_start_0"/>
+        <pseudo_event id="63" operation="start" operation_key="haproxy-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="8">
+  <synapse id="11">
     <action_set>
-      <rsc_op id="12" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="17" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="9">
+  <synapse id="12">
     <action_set>
-      <rsc_op id="8" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="11" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="10">
+  <synapse id="13">
     <action_set>
-      <rsc_op id="4" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="5" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="11" priority="1000000">
+  <synapse id="14" priority="1000000">
     <action_set>
-      <rsc_op id="106" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2">
+      <rsc_op id="112" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0" CRM_meta_notify_available_uname="redis-bundle-0 rabbitmq-bundle-0 galera-bundle-0 metal-3 metal-2 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="metal-2" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="76" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+        <pseudo_event id="82" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="12">
+  <synapse id="15">
     <action_set>
-      <rsc_op id="71" operation="monitor" operation_key="redis:0_monitor_60000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2">
+      <rsc_op id="77" operation="monitor" operation_key="redis:0_monitor_60000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="60000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="metal-2" CRM_meta_role="Slave" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="63" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="69" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="69" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2"/>
+        <rsc_op id="75" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="77" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+        <pseudo_event id="83" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="13">
+  <synapse id="16">
     <action_set>
-      <rsc_op id="70" operation="monitor" operation_key="redis:0_monitor_45000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2">
+      <rsc_op id="76" operation="monitor" operation_key="redis:0_monitor_45000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="45000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="metal-2" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="63" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="69" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="69" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2"/>
+        <rsc_op id="75" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="77" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+        <pseudo_event id="83" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="14">
+  <synapse id="17">
     <action_set>
-      <rsc_op id="69" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2">
+      <rsc_op id="75" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0" CRM_meta_notify_available_uname="redis-bundle-0 rabbitmq-bundle-0 galera-bundle-0 metal-3 metal-2 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="metal-2" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="61" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="67" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="63" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="69" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="72" operation="start" operation_key="redis-bundle-master_start_0"/>
+        <pseudo_event id="78" operation="start" operation_key="redis-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15" priority="1000000">
+  <synapse id="18" priority="1000000">
     <action_set>
-      <pseudo_event id="77" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0">
+      <pseudo_event id="83" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="76" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+        <pseudo_event id="82" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="106" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2"/>
+        <rsc_op id="112" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="16" priority="1000000">
+  <synapse id="19" priority="1000000">
     <action_set>
-      <pseudo_event id="76" operation="notify" operation_key="redis-bundle-master_post_notify_running_0">
+      <pseudo_event id="82" operation="notify" operation_key="redis-bundle-master_post_notify_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="73" operation="running" operation_key="redis-bundle-master_running_0"/>
+        <pseudo_event id="79" operation="running" operation_key="redis-bundle-master_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="75" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="81" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="17">
+  <synapse id="20">
     <action_set>
-      <pseudo_event id="75" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0">
+      <pseudo_event id="81" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="74" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0"/>
+        <pseudo_event id="80" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="18">
+  <synapse id="21">
     <action_set>
-      <pseudo_event id="74" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0">
+      <pseudo_event id="80" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="19" priority="1000000">
+  <synapse id="22" priority="1000000">
     <action_set>
-      <pseudo_event id="73" operation="running" operation_key="redis-bundle-master_running_0">
+      <pseudo_event id="79" operation="running" operation_key="redis-bundle-master_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="69" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2"/>
+        <rsc_op id="75" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="metal-2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="72" operation="start" operation_key="redis-bundle-master_start_0"/>
+        <pseudo_event id="78" operation="start" operation_key="redis-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="20">
+  <synapse id="23">
     <action_set>
-      <pseudo_event id="72" operation="start" operation_key="redis-bundle-master_start_0">
+      <pseudo_event id="78" operation="start" operation_key="redis-bundle-master_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="5" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="6" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="9" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="12" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="13" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="18" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="65" operation="start" operation_key="redis-bundle_start_0"/>
+        <pseudo_event id="71" operation="start" operation_key="redis-bundle_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="75" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="81" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="21">
+  <synapse id="24">
     <action_set>
-      <rsc_op id="62" operation="monitor" operation_key="redis-bundle-docker-0_monitor_60000" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="68" operation="monitor" operation_key="redis-bundle-docker-0_monitor_60000" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="61" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="67" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="22">
+  <synapse id="25">
     <action_set>
-      <rsc_op id="61" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="67" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="5" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="6" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="9" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="12" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="13" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="18" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
       <trigger>
-        <pseudo_event id="65" operation="start" operation_key="redis-bundle_start_0"/>
+        <pseudo_event id="71" operation="start" operation_key="redis-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="23">
+  <synapse id="26">
     <action_set>
-      <rsc_op id="13" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="18" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="24">
+  <synapse id="27">
     <action_set>
-      <rsc_op id="9" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="12" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="25">
+  <synapse id="28">
     <action_set>
-      <rsc_op id="5" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="6" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="26">
+  <synapse id="29">
     <action_set>
-      <rsc_op id="64" operation="monitor" operation_key="redis-bundle-0_monitor_60000" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="70" operation="monitor" operation_key="redis-bundle-0_monitor_60000" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" addr="metal-2"  port="3124"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="63" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="69" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="27">
+  <synapse id="30">
     <action_set>
-      <rsc_op id="63" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="69" operation="start" operation_key="redis-bundle-0_start_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000" addr="metal-2"  port="3124"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="61" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="7" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="metal-1" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="13" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="19" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="67" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="28" priority="1000000">
+  <synapse id="31">
+    <action_set>
+      <rsc_op id="19" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="metal-3" on_node_uuid="3">
+        <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-2"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="32">
+    <action_set>
+      <rsc_op id="13" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="metal-2" on_node_uuid="2">
+        <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-2"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="33">
     <action_set>
-      <pseudo_event id="66" operation="running" operation_key="redis-bundle_running_0">
+      <rsc_op id="7" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="metal-1" on_node_uuid="1">
+        <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-2"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="34" priority="1000000">
+    <action_set>
+      <pseudo_event id="72" operation="running" operation_key="redis-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="61" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="67" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <pseudo_event id="77" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+        <pseudo_event id="83" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="29">
+  <synapse id="35">
     <action_set>
-      <pseudo_event id="65" operation="start" operation_key="redis-bundle_start_0">
+      <pseudo_event id="71" operation="start" operation_key="redis-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="30" priority="1000000">
+  <synapse id="36" priority="1000000">
     <action_set>
-      <pseudo_event id="58" operation="running" operation_key="haproxy-bundle_running_0">
+      <pseudo_event id="64" operation="running" operation_key="haproxy-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="55" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="61" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="31">
+  <synapse id="37">
     <action_set>
-      <pseudo_event id="57" operation="start" operation_key="haproxy-bundle_start_0">
+      <pseudo_event id="63" operation="start" operation_key="haproxy-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
diff --git a/pengine/test10/bundle-order-startup-clone.summary b/pengine/test10/bundle-order-startup-clone.summary
index c2b46de..1346bda 100644
--- a/pengine/test10/bundle-order-startup-clone.summary
+++ b/pengine/test10/bundle-order-startup-clone.summary
@@ -31,6 +31,9 @@ Executing cluster transition:
  * Resource action: galera-bundle-docker-0 monitor on metal-3
  * Resource action: galera-bundle-docker-0 monitor on metal-2
  * Resource action: galera-bundle-docker-0 monitor on metal-1
+ * Resource action: galera-bundle-0 monitor on metal-3
+ * Resource action: galera-bundle-0 monitor on metal-2
+ * Resource action: galera-bundle-0 monitor on metal-1
  * Resource action: haproxy-bundle-docker-0 monitor on metal-3
  * Resource action: haproxy-bundle-docker-0 monitor on metal-2
  * Resource action: haproxy-bundle-docker-0 monitor on metal-1
@@ -38,6 +41,9 @@ Executing cluster transition:
  * Resource action: redis-bundle-docker-0 monitor on metal-3
  * Resource action: redis-bundle-docker-0 monitor on metal-2
  * Resource action: redis-bundle-docker-0 monitor on metal-1
+ * Resource action: redis-bundle-0  monitor on metal-3
+ * Resource action: redis-bundle-0  monitor on metal-2
+ * Resource action: redis-bundle-0  monitor on metal-1
  * Pseudo action:   redis-bundle_start_0
  * Pseudo action:   haproxy-bundle_start_0
  * Resource action: haproxy-bundle-docker-0 start on metal-2
diff --git a/pengine/test10/bundle-order-startup.dot b/pengine/test10/bundle-order-startup.dot
index 98f1c3c..213fa4c 100644
--- a/pengine/test10/bundle-order-startup.dot
+++ b/pengine/test10/bundle-order-startup.dot
@@ -1,4 +1,6 @@
 digraph "g" {
+"galera-bundle-0_monitor_0 undercloud" -> "galera-bundle-0_start_0 undercloud" [ style = bold]
+"galera-bundle-0_monitor_0 undercloud" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-0_monitor_60000 undercloud" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-0_start_0 undercloud" -> "galera-bundle-0_monitor_60000 undercloud" [ style = bold]
 "galera-bundle-0_start_0 undercloud" -> "galera:0_monitor_20000 galera-bundle-0" [ style = bold]
@@ -84,6 +86,8 @@ digraph "g" {
 "openstack-cinder-volume_running_0" [ style=bold color="green" fontcolor="orange"]
 "openstack-cinder-volume_start_0" -> "openstack-cinder-volume-docker-0_start_0 undercloud" [ style = bold]
 "openstack-cinder-volume_start_0" [ style=bold color="green" fontcolor="orange"]
+"rabbitmq-bundle-0_monitor_0 undercloud" -> "rabbitmq-bundle-0_start_0 undercloud" [ style = bold]
+"rabbitmq-bundle-0_monitor_0 undercloud" [ style=bold color="green" fontcolor="black"]
 "rabbitmq-bundle-0_monitor_60000 undercloud" [ style=bold color="green" fontcolor="black"]
 "rabbitmq-bundle-0_start_0 undercloud" -> "rabbitmq-bundle-0_monitor_60000 undercloud" [ style = bold]
 "rabbitmq-bundle-0_start_0 undercloud" -> "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style = bold]
@@ -124,6 +128,8 @@ digraph "g" {
 "rabbitmq:0_start_0 rabbitmq-bundle-0" -> "rabbitmq-bundle-clone_running_0" [ style = bold]
 "rabbitmq:0_start_0 rabbitmq-bundle-0" -> "rabbitmq:0_monitor_10000 rabbitmq-bundle-0" [ style = bold]
 "rabbitmq:0_start_0 rabbitmq-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-0_monitor_0 undercloud" -> "redis-bundle-0_start_0 undercloud" [ style = bold]
+"redis-bundle-0_monitor_0 undercloud" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-0_monitor_60000 undercloud" [ style=bold color="green" fontcolor="black"]
 "redis-bundle-0_start_0 undercloud" -> "redis-bundle-0_monitor_60000 undercloud" [ style = bold]
 "redis-bundle-0_start_0 undercloud" -> "redis:0_monitor_45000 redis-bundle-0" [ style = bold]
diff --git a/pengine/test10/bundle-order-startup.exp b/pengine/test10/bundle-order-startup.exp
index bcef087..77e67bd 100644
--- a/pengine/test10/bundle-order-startup.exp
+++ b/pengine/test10/bundle-order-startup.exp
@@ -1,100 +1,100 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0" priority="1000000">
     <action_set>
-      <rsc_op id="126" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+      <rsc_op id="129" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="27" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="30" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="22" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+      <rsc_op id="25" operation="monitor" operation_key="rabbitmq:0_monitor_10000" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="40000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="15" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="18" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="21" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="24" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="28" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="31" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="21" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
+      <rsc_op id="24" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud">
         <primitive id="rabbitmq" long-id="rabbitmq:0" class="ocf" provider="heartbeat" type="rabbitmq-cluster"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="rabbitmq:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="rabbitmq:0" CRM_meta_notify_start_uname="rabbitmq-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="rabbitmq-bundle-0" CRM_meta_on_node_uuid="rabbitmq-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="200000"  set_policy="ha-all ^(?!amq\.).* {&quot;ha-mode&quot;:&quot;all&quot;}"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="13" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="16" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="15" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="18" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="23" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="26" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3" priority="1000000">
     <action_set>
-      <pseudo_event id="28" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
+      <pseudo_event id="31" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="27" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
+        <pseudo_event id="30" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="126" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="129" operation="notify" operation_key="rabbitmq:0_post_notify_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4" priority="1000000">
     <action_set>
-      <pseudo_event id="27" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
+      <pseudo_event id="30" operation="notify" operation_key="rabbitmq-bundle-clone_post_notify_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="24" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
+        <pseudo_event id="27" operation="running" operation_key="rabbitmq-bundle-clone_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="26" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="29" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <pseudo_event id="26" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
+      <pseudo_event id="29" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="25" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
+        <pseudo_event id="28" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="25" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
+      <pseudo_event id="28" operation="notify" operation_key="rabbitmq-bundle-clone_pre_notify_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -102,22 +102,22 @@
   </synapse>
   <synapse id="7" priority="1000000">
     <action_set>
-      <pseudo_event id="24" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
+      <pseudo_event id="27" operation="running" operation_key="rabbitmq-bundle-clone_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="21" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
+        <rsc_op id="24" operation="start" operation_key="rabbitmq:0_start_0" on_node="rabbitmq-bundle-0" on_node_uuid="rabbitmq-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="23" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
+        <pseudo_event id="26" operation="start" operation_key="rabbitmq-bundle-clone_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <pseudo_event id="23" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
+      <pseudo_event id="26" operation="start" operation_key="rabbitmq-bundle-clone_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -126,29 +126,29 @@
         <rsc_op id="2" operation="monitor" operation_key="rabbitmq-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="17" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+        <pseudo_event id="20" operation="start" operation_key="rabbitmq-bundle_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="26" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="29" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <rsc_op id="14" operation="monitor" operation_key="rabbitmq-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="17" operation="monitor" operation_key="rabbitmq-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="rabbitmq-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/rabbitmq/etc/rabbitmq:/etc/rabbitmq:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-0:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="13" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="16" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="10">
     <action_set>
-      <rsc_op id="13" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="16" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="rabbitmq-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-rabbitmq:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/rabbitmq-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/rabbitmq.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/rabbitmq/etc/rabbitmq:/etc/rabbitmq:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/rabbitmq:/var/lib/rabbitmq:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/rabbitmq-bundle-0:/var/log -p 3121:3121 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
@@ -158,7 +158,7 @@
         <rsc_op id="2" operation="monitor" operation_key="rabbitmq-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="17" operation="start" operation_key="rabbitmq-bundle_start_0"/>
+        <pseudo_event id="20" operation="start" operation_key="rabbitmq-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
@@ -173,809 +173,845 @@
   </synapse>
   <synapse id="12">
     <action_set>
-      <rsc_op id="16" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="19" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3121"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="15" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="18" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13">
     <action_set>
-      <rsc_op id="15" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="18" operation="start" operation_key="rabbitmq-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3121"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="13" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="3" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="16" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <rsc_op id="45" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="3" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="undercloud"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="15">
+    <action_set>
+      <rsc_op id="48" operation="monitor" operation_key="galera:0_monitor_30000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="30000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_role="Slave" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="40" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="43" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="15">
+  <synapse id="16">
     <action_set>
-      <rsc_op id="44" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="47" operation="monitor" operation_key="galera:0_monitor_20000" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="20000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="30000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="40" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="43" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="16">
+  <synapse id="17">
     <action_set>
-      <rsc_op id="43" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
+      <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:undercloud"  enable_creation="true" wsrep_cluster_address="gcomm://undercloud"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="38" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="40" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="46" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <pseudo_event id="49" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="17" priority="1000000">
+  <synapse id="18" priority="1000000">
     <action_set>
-      <pseudo_event id="47" operation="running" operation_key="galera-bundle-master_running_0">
+      <pseudo_event id="50" operation="running" operation_key="galera-bundle-master_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="43" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
+        <rsc_op id="46" operation="start" operation_key="galera:0_start_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="46" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <pseudo_event id="49" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="18">
+  <synapse id="19">
     <action_set>
-      <pseudo_event id="46" operation="start" operation_key="galera-bundle-master_start_0">
+      <pseudo_event id="49" operation="start" operation_key="galera-bundle-master_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="3" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="4" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="39" operation="start" operation_key="galera-bundle_start_0"/>
+        <pseudo_event id="42" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="19">
+  <synapse id="20">
     <action_set>
-      <rsc_op id="36" operation="monitor" operation_key="galera-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="39" operation="monitor" operation_key="galera-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="38" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="20">
+  <synapse id="21">
     <action_set>
-      <rsc_op id="35" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="38" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="3" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="4" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="39" operation="start" operation_key="galera-bundle_start_0"/>
+        <pseudo_event id="42" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="21">
+  <synapse id="22">
     <action_set>
-      <rsc_op id="3" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="4" operation="monitor" operation_key="galera-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="22">
+  <synapse id="23">
     <action_set>
-      <rsc_op id="38" operation="monitor" operation_key="galera-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="41" operation="monitor" operation_key="galera-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3123"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="37" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="40" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="23">
+  <synapse id="24">
     <action_set>
-      <rsc_op id="37" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="40" operation="start" operation_key="galera-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3123"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="5" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="38" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="24" priority="1000000">
+  <synapse id="25">
     <action_set>
-      <rsc_op id="127" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="5" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="undercloud"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="26" priority="1000000">
+    <action_set>
+      <rsc_op id="130" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="start" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_notify_type="post" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="20000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="73" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+        <pseudo_event id="76" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="25">
+  <synapse id="27">
     <action_set>
-      <rsc_op id="68" operation="monitor" operation_key="redis:0_monitor_60000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="71" operation="monitor" operation_key="redis:0_monitor_60000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="60000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_role="Slave" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="60" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="63" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="69" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="74" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+        <pseudo_event id="77" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="26">
+  <synapse id="28">
     <action_set>
-      <rsc_op id="67" operation="monitor" operation_key="redis:0_monitor_45000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="70" operation="monitor" operation_key="redis:0_monitor_45000" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_interval="45000" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="monitor" CRM_meta_notify="true" CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="60000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="60" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="63" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="69" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="74" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+        <pseudo_event id="77" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="27">
+  <synapse id="29">
     <action_set>
-      <rsc_op id="66" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
+      <rsc_op id="69" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud">
         <primitive id="redis" long-id="redis:0" class="ocf" provider="heartbeat" type="redis"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_name="start" CRM_meta_notify="true" CRM_meta_notify_active_resource=" " CRM_meta_notify_active_uname=" " CRM_meta_notify_all_uname="galera-bundle-0 rabbitmq-bundle-0 redis-bundle-0 undercloud" CRM_meta_notify_available_uname="redis-bundle-0 galera-bundle-0 rabbitmq-bundle-0 undercloud" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="redis:0" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource="redis:0" CRM_meta_notify_start_uname="redis-bundle-0" CRM_meta_notify_stop_resource=" " CRM_meta_notify_stop_uname=" " CRM_meta_on_node="redis-bundle-0" CRM_meta_on_node_uuid="redis-bundle-0" CRM_meta_physical_host="undercloud" CRM_meta_timeout="200000"  wait_last_known_master="true"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="58" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="61" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="60" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="63" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="69" operation="start" operation_key="redis-bundle-master_start_0"/>
+        <pseudo_event id="72" operation="start" operation_key="redis-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="28" priority="1000000">
+  <synapse id="30" priority="1000000">
     <action_set>
-      <pseudo_event id="74" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0">
+      <pseudo_event id="77" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="73" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
+        <pseudo_event id="76" operation="notify" operation_key="redis-bundle-master_post_notify_running_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="127" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="130" operation="notify" operation_key="redis:0_post_notify_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="29" priority="1000000">
+  <synapse id="31" priority="1000000">
     <action_set>
-      <pseudo_event id="73" operation="notify" operation_key="redis-bundle-master_post_notify_running_0">
+      <pseudo_event id="76" operation="notify" operation_key="redis-bundle-master_post_notify_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="running" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="start" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="70" operation="running" operation_key="redis-bundle-master_running_0"/>
+        <pseudo_event id="73" operation="running" operation_key="redis-bundle-master_running_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="72" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="75" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="30">
+  <synapse id="32">
     <action_set>
-      <pseudo_event id="72" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0">
+      <pseudo_event id="75" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="71" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0"/>
+        <pseudo_event id="74" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="31">
+  <synapse id="33">
     <action_set>
-      <pseudo_event id="71" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0">
+      <pseudo_event id="74" operation="notify" operation_key="redis-bundle-master_pre_notify_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_notify_key_operation="start" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="start" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="32" priority="1000000">
+  <synapse id="34" priority="1000000">
     <action_set>
-      <pseudo_event id="70" operation="running" operation_key="redis-bundle-master_running_0">
+      <pseudo_event id="73" operation="running" operation_key="redis-bundle-master_running_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="66" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
+        <rsc_op id="69" operation="start" operation_key="redis:0_start_0" on_node="redis-bundle-0" on_node_uuid="redis-bundle-0" router_node="undercloud"/>
       </trigger>
       <trigger>
-        <pseudo_event id="69" operation="start" operation_key="redis-bundle-master_start_0"/>
+        <pseudo_event id="72" operation="start" operation_key="redis-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="33">
+  <synapse id="35">
     <action_set>
-      <pseudo_event id="69" operation="start" operation_key="redis-bundle-master_start_0">
+      <pseudo_event id="72" operation="start" operation_key="redis-bundle-master_start_0">
         <attributes CRM_meta_clone_max="1" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="1" CRM_meta_master_node_max="1" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="6" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="62" operation="start" operation_key="redis-bundle_start_0"/>
+        <pseudo_event id="65" operation="start" operation_key="redis-bundle_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="72" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
+        <pseudo_event id="75" operation="notified" operation_key="redis-bundle-master_confirmed-pre_notify_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="34">
+  <synapse id="36">
     <action_set>
-      <rsc_op id="59" operation="monitor" operation_key="redis-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="62" operation="monitor" operation_key="redis-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="58" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="61" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="35">
+  <synapse id="37">
     <action_set>
-      <rsc_op id="58" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="61" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="4" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="6" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="62" operation="start" operation_key="redis-bundle_start_0"/>
+        <pseudo_event id="65" operation="start" operation_key="redis-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="36">
+  <synapse id="38">
     <action_set>
-      <rsc_op id="4" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="6" operation="monitor" operation_key="redis-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="redis-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-redis:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/redis-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3124 -v /var/lib/kolla/config_files/redis.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/redis/etc/redis:/etc/redis:ro -v /var/lib/config-data/redis/etc/redis.conf:/etc/redis.conf:ro -v /var/lib/config-data/redis/etc/redis.conf.puppet:/etc/redis.conf.puppet:ro -v /var/lib/config-data/redis/etc/redis-sentinel.conf:/etc/redis-sentinel.conf:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/redis:/var/lib/redis:rw -v /var/log/redis:/var/log/redis:rw -v /var/run/redis:/var/run/redis:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/redis-bundle-0:/var/log -p 3124:3124 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="37">
+  <synapse id="39">
     <action_set>
-      <rsc_op id="61" operation="monitor" operation_key="redis-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="64" operation="monitor" operation_key="redis-bundle-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3124"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="60" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="63" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="38">
+  <synapse id="40">
     <action_set>
-      <rsc_op id="60" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="63" operation="start" operation_key="redis-bundle-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="undercloud"  port="3124"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="58" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="7" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="61" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="39">
+  <synapse id="41">
+    <action_set>
+      <rsc_op id="7" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="undercloud" on_node_uuid="1">
+        <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="undercloud"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="42">
     <action_set>
-      <rsc_op id="98" operation="monitor" operation_key="ip-192.168.122.254_monitor_10000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="101" operation="monitor" operation_key="ip-192.168.122.254_monitor_10000" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.254" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.254"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="97" operation="start" operation_key="ip-192.168.122.254_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="100" operation="start" operation_key="ip-192.168.122.254_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="40">
+  <synapse id="43">
     <action_set>
-      <rsc_op id="97" operation="start" operation_key="ip-192.168.122.254_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="100" operation="start" operation_key="ip-192.168.122.254_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.254" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.254"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="5" operation="monitor" operation_key="ip-192.168.122.254_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="8" operation="monitor" operation_key="ip-192.168.122.254_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="41">
+  <synapse id="44">
     <action_set>
-      <rsc_op id="5" operation="monitor" operation_key="ip-192.168.122.254_monitor_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="8" operation="monitor" operation_key="ip-192.168.122.254_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.254" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.254"/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="42">
+  <synapse id="45">
     <action_set>
-      <rsc_op id="100" operation="monitor" operation_key="ip-192.168.122.250_monitor_10000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="103" operation="monitor" operation_key="ip-192.168.122.250_monitor_10000" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.250" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.250"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="99" operation="start" operation_key="ip-192.168.122.250_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="102" operation="start" operation_key="ip-192.168.122.250_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="43">
+  <synapse id="46">
     <action_set>
-      <rsc_op id="99" operation="start" operation_key="ip-192.168.122.250_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="102" operation="start" operation_key="ip-192.168.122.250_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.250" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.250"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="6" operation="monitor" operation_key="ip-192.168.122.250_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="9" operation="monitor" operation_key="ip-192.168.122.250_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="44">
+  <synapse id="47">
     <action_set>
-      <rsc_op id="6" operation="monitor" operation_key="ip-192.168.122.250_monitor_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="9" operation="monitor" operation_key="ip-192.168.122.250_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.250" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.250"/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="45">
+  <synapse id="48">
     <action_set>
-      <rsc_op id="102" operation="monitor" operation_key="ip-192.168.122.249_monitor_10000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="105" operation="monitor" operation_key="ip-192.168.122.249_monitor_10000" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.249" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.249"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="101" operation="start" operation_key="ip-192.168.122.249_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="104" operation="start" operation_key="ip-192.168.122.249_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="46">
+  <synapse id="49">
     <action_set>
-      <rsc_op id="101" operation="start" operation_key="ip-192.168.122.249_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="104" operation="start" operation_key="ip-192.168.122.249_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.249" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.249"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="7" operation="monitor" operation_key="ip-192.168.122.249_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="10" operation="monitor" operation_key="ip-192.168.122.249_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="47">
+  <synapse id="50">
     <action_set>
-      <rsc_op id="7" operation="monitor" operation_key="ip-192.168.122.249_monitor_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="10" operation="monitor" operation_key="ip-192.168.122.249_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.249" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.249"/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="48">
+  <synapse id="51">
     <action_set>
-      <rsc_op id="104" operation="monitor" operation_key="ip-192.168.122.253_monitor_10000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="107" operation="monitor" operation_key="ip-192.168.122.253_monitor_10000" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.253" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.253"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="103" operation="start" operation_key="ip-192.168.122.253_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="106" operation="start" operation_key="ip-192.168.122.253_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="49">
+  <synapse id="52">
     <action_set>
-      <rsc_op id="103" operation="start" operation_key="ip-192.168.122.253_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="106" operation="start" operation_key="ip-192.168.122.253_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.253" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.253"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="8" operation="monitor" operation_key="ip-192.168.122.253_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="11" operation="monitor" operation_key="ip-192.168.122.253_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="50">
+  <synapse id="53">
     <action_set>
-      <rsc_op id="8" operation="monitor" operation_key="ip-192.168.122.253_monitor_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="11" operation="monitor" operation_key="ip-192.168.122.253_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.253" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.253"/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="51">
+  <synapse id="54">
     <action_set>
-      <rsc_op id="106" operation="monitor" operation_key="ip-192.168.122.247_monitor_10000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="109" operation="monitor" operation_key="ip-192.168.122.247_monitor_10000" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.247" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.247"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="105" operation="start" operation_key="ip-192.168.122.247_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="108" operation="start" operation_key="ip-192.168.122.247_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="52">
+  <synapse id="55">
     <action_set>
-      <rsc_op id="105" operation="start" operation_key="ip-192.168.122.247_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="108" operation="start" operation_key="ip-192.168.122.247_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.247" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.247"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="9" operation="monitor" operation_key="ip-192.168.122.247_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="12" operation="monitor" operation_key="ip-192.168.122.247_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="53">
+  <synapse id="56">
     <action_set>
-      <rsc_op id="9" operation="monitor" operation_key="ip-192.168.122.247_monitor_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="12" operation="monitor" operation_key="ip-192.168.122.247_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.247" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.247"/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="54">
+  <synapse id="57">
     <action_set>
-      <rsc_op id="108" operation="monitor" operation_key="ip-192.168.122.248_monitor_10000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="111" operation="monitor" operation_key="ip-192.168.122.248_monitor_10000" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.248" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_interval="10000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.248"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="107" operation="start" operation_key="ip-192.168.122.248_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="110" operation="start" operation_key="ip-192.168.122.248_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="55">
+  <synapse id="58">
     <action_set>
-      <rsc_op id="107" operation="start" operation_key="ip-192.168.122.248_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="110" operation="start" operation_key="ip-192.168.122.248_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.248" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_name="start" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.248"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="10" operation="monitor" operation_key="ip-192.168.122.248_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="13" operation="monitor" operation_key="ip-192.168.122.248_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="56">
+  <synapse id="59">
     <action_set>
-      <rsc_op id="10" operation="monitor" operation_key="ip-192.168.122.248_monitor_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="13" operation="monitor" operation_key="ip-192.168.122.248_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="ip-192.168.122.248" class="ocf" provider="heartbeat" type="IPaddr2"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" cidr_netmask="32"  ip="192.168.122.248"/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="57">
+  <synapse id="60">
     <action_set>
-      <rsc_op id="110" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="113" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="109" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="112" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="58">
+  <synapse id="61">
     <action_set>
-      <rsc_op id="109" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="112" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="11" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="14" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="111" operation="start" operation_key="haproxy-bundle_start_0"/>
+        <pseudo_event id="114" operation="start" operation_key="haproxy-bundle_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="59">
+  <synapse id="62">
     <action_set>
-      <rsc_op id="11" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="14" operation="monitor" operation_key="haproxy-bundle-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="haproxy-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-haproxy:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/haproxy.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/haproxy/etc:/etc:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="60">
+  <synapse id="63">
     <action_set>
-      <rsc_op id="116" operation="monitor" operation_key="openstack-cinder-volume-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="119" operation="monitor" operation_key="openstack-cinder-volume-docker-0_monitor_60000" on_node="undercloud" on_node_uuid="1">
         <primitive id="openstack-cinder-volume-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-cinder-volume:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/cinder_volume.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/cinder/etc/cinder:/etc/cinder:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /dev:/dev:rw -v /run:/run:rw -v /sys:/sys:rw -v /lib/modules:/lib/modules:ro -v /etc/iscsi:/etc/iscsi:rw -v /var/lib/cinder:/var/lib/cinder:rw -v /var/log/containers/cinder:/var/log/cinder:rw --ipc=host --privileged=true --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="115" operation="start" operation_key="openstack-cinder-volume-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="118" operation="start" operation_key="openstack-cinder-volume-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="61">
+  <synapse id="64">
     <action_set>
-      <rsc_op id="115" operation="start" operation_key="openstack-cinder-volume-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="118" operation="start" operation_key="openstack-cinder-volume-docker-0_start_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="openstack-cinder-volume-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-cinder-volume:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/cinder_volume.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/cinder/etc/cinder:/etc/cinder:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /dev:/dev:rw -v /run:/run:rw -v /sys:/sys:rw -v /lib/modules:/lib/modules:ro -v /etc/iscsi:/etc/iscsi:rw -v /var/lib/cinder:/var/lib/cinder:rw -v /var/log/containers/cinder:/var/log/cinder:rw --ipc=host --privileged=true --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="12" operation="monitor" operation_key="openstack-cinder-volume-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="15" operation="monitor" operation_key="openstack-cinder-volume-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="117" operation="start" operation_key="openstack-cinder-volume_start_0"/>
+        <pseudo_event id="120" operation="start" operation_key="openstack-cinder-volume_start_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="62">
+  <synapse id="65">
     <action_set>
-      <rsc_op id="12" operation="monitor" operation_key="openstack-cinder-volume-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
+      <rsc_op id="15" operation="monitor" operation_key="openstack-cinder-volume-docker-0_monitor_0" on_node="undercloud" on_node_uuid="1">
         <primitive id="openstack-cinder-volume-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="undercloud" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-cinder-volume:latest" monitor_cmd="/bin/true" mount_points="" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3121 -v /var/lib/kolla/config_files/cinder_volume.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/cinder/etc/cinder:/etc/cinder:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /dev:/dev:rw -v /run:/run:rw -v /sys:/sys:rw -v /lib/modules:/lib/modules:ro -v /etc/iscsi:/etc/iscsi:rw -v /var/lib/cinder:/var/lib/cinder:rw -v /var/log/containers/cinder:/var/log/cinder:rw --ipc=host --privileged=true --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="63" priority="1000000">
+  <synapse id="66" priority="1000000">
     <action_set>
-      <pseudo_event id="118" operation="running" operation_key="openstack-cinder-volume_running_0">
+      <pseudo_event id="121" operation="running" operation_key="openstack-cinder-volume_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="115" operation="start" operation_key="openstack-cinder-volume-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="118" operation="start" operation_key="openstack-cinder-volume-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="64">
+  <synapse id="67">
     <action_set>
-      <pseudo_event id="117" operation="start" operation_key="openstack-cinder-volume_start_0">
+      <pseudo_event id="120" operation="start" operation_key="openstack-cinder-volume_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="65" priority="1000000">
+  <synapse id="68" priority="1000000">
     <action_set>
-      <pseudo_event id="112" operation="running" operation_key="haproxy-bundle_running_0">
+      <pseudo_event id="115" operation="running" operation_key="haproxy-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="109" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="112" operation="start" operation_key="haproxy-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="66">
+  <synapse id="69">
     <action_set>
-      <pseudo_event id="111" operation="start" operation_key="haproxy-bundle_start_0">
+      <pseudo_event id="114" operation="start" operation_key="haproxy-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="97" operation="start" operation_key="ip-192.168.122.254_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="100" operation="start" operation_key="ip-192.168.122.254_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="99" operation="start" operation_key="ip-192.168.122.250_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="102" operation="start" operation_key="ip-192.168.122.250_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="101" operation="start" operation_key="ip-192.168.122.249_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="104" operation="start" operation_key="ip-192.168.122.249_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="103" operation="start" operation_key="ip-192.168.122.253_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="106" operation="start" operation_key="ip-192.168.122.253_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="105" operation="start" operation_key="ip-192.168.122.247_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="108" operation="start" operation_key="ip-192.168.122.247_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="107" operation="start" operation_key="ip-192.168.122.248_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="110" operation="start" operation_key="ip-192.168.122.248_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="67" priority="1000000">
+  <synapse id="70" priority="1000000">
     <action_set>
-      <pseudo_event id="63" operation="running" operation_key="redis-bundle_running_0">
+      <pseudo_event id="66" operation="running" operation_key="redis-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="58" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="61" operation="start" operation_key="redis-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="74" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
+        <pseudo_event id="77" operation="notified" operation_key="redis-bundle-master_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="68">
+  <synapse id="71">
     <action_set>
-      <pseudo_event id="62" operation="start" operation_key="redis-bundle_start_0">
+      <pseudo_event id="65" operation="start" operation_key="redis-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="112" operation="running" operation_key="haproxy-bundle_running_0"/>
+        <pseudo_event id="115" operation="running" operation_key="haproxy-bundle_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="69" priority="1000000">
+  <synapse id="72" priority="1000000">
     <action_set>
-      <pseudo_event id="40" operation="running" operation_key="galera-bundle_running_0">
+      <pseudo_event id="43" operation="running" operation_key="galera-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="35" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="38" operation="start" operation_key="galera-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="47" operation="running" operation_key="galera-bundle-master_running_0"/>
+        <pseudo_event id="50" operation="running" operation_key="galera-bundle-master_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="70">
+  <synapse id="73">
     <action_set>
-      <pseudo_event id="39" operation="start" operation_key="galera-bundle_start_0">
+      <pseudo_event id="42" operation="start" operation_key="galera-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="63" operation="running" operation_key="redis-bundle_running_0"/>
+        <pseudo_event id="66" operation="running" operation_key="redis-bundle_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="71" priority="1000000">
+  <synapse id="74" priority="1000000">
     <action_set>
-      <pseudo_event id="18" operation="running" operation_key="rabbitmq-bundle_running_0">
+      <pseudo_event id="21" operation="running" operation_key="rabbitmq-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="13" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
+        <rsc_op id="16" operation="start" operation_key="rabbitmq-bundle-docker-0_start_0" on_node="undercloud" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="28" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
+        <pseudo_event id="31" operation="notified" operation_key="rabbitmq-bundle-clone_confirmed-post_notify_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="72">
+  <synapse id="75">
     <action_set>
-      <pseudo_event id="17" operation="start" operation_key="rabbitmq-bundle_start_0">
+      <pseudo_event id="20" operation="start" operation_key="rabbitmq-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
diff --git a/pengine/test10/bundle-order-startup.summary b/pengine/test10/bundle-order-startup.summary
index 8da71d0..8e6b685 100644
--- a/pengine/test10/bundle-order-startup.summary
+++ b/pengine/test10/bundle-order-startup.summary
@@ -41,9 +41,12 @@ Transition Summary:
 Executing cluster transition:
  * Pseudo action:   rabbitmq-bundle-clone_pre_notify_start_0
  * Resource action: rabbitmq-bundle-docker-0 monitor on undercloud
+ * Resource action: rabbitmq-bundle-0 monitor on undercloud
  * Resource action: galera-bundle-docker-0 monitor on undercloud
+ * Resource action: galera-bundle-0 monitor on undercloud
  * Pseudo action:   redis-bundle-master_pre_notify_start_0
  * Resource action: redis-bundle-docker-0 monitor on undercloud
+ * Resource action: redis-bundle-0  monitor on undercloud
  * Resource action: ip-192.168.122.254 monitor on undercloud
  * Resource action: ip-192.168.122.250 monitor on undercloud
  * Resource action: ip-192.168.122.249 monitor on undercloud
diff --git a/pengine/test10/bundle-order-stop-clone.dot b/pengine/test10/bundle-order-stop-clone.dot
index 6545fb8..4d03564 100644
--- a/pengine/test10/bundle-order-stop-clone.dot
+++ b/pengine/test10/bundle-order-stop-clone.dot
@@ -1,5 +1,11 @@
 digraph "g" {
 "all_stopped" [ style=bold color="green" fontcolor="orange"]
+"galera-bundle-0_monitor_0 metal-2" -> "galera-bundle-0_start_0 metal-1" [ style = dashed]
+"galera-bundle-0_monitor_0 metal-2" -> "galera-bundle-0_stop_0 metal-1" [ style = bold]
+"galera-bundle-0_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-0_monitor_0 metal-3" -> "galera-bundle-0_start_0 metal-1" [ style = dashed]
+"galera-bundle-0_monitor_0 metal-3" -> "galera-bundle-0_stop_0 metal-1" [ style = bold]
+"galera-bundle-0_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-0_monitor_60000 metal-1" [ style=dashed color="red" fontcolor="black"]
 "galera-bundle-0_start_0 metal-1" -> "galera-bundle-0_monitor_60000 metal-1" [ style = dashed]
 "galera-bundle-0_start_0 metal-1" -> "galera:0_monitor_20000 galera-bundle-0" [ style = dashed]
@@ -10,6 +16,10 @@ digraph "g" {
 "galera-bundle-0_stop_0 metal-1" -> "galera-bundle-0_start_0 metal-1" [ style = dashed]
 "galera-bundle-0_stop_0 metal-1" -> "galera-bundle-docker-0_stop_0 metal-1" [ style = bold]
 "galera-bundle-0_stop_0 metal-1" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-1_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-1_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-2_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-2_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
 "galera-bundle-docker-0_stop_0 metal-1" -> "all_stopped" [ style = bold]
 "galera-bundle-docker-0_stop_0 metal-1" -> "galera-bundle_stopped_0" [ style = bold]
 "galera-bundle-docker-0_stop_0 metal-1" [ style=bold color="green" fontcolor="black"]
@@ -45,6 +55,12 @@ digraph "g" {
 "galera:0_stop_0 galera-bundle-0" -> "galera-bundle-master_stopped_0" [ style = bold]
 "galera:0_stop_0 galera-bundle-0" -> "galera:0_start_0 galera-bundle-0" [ style = dashed]
 "galera:0_stop_0 galera-bundle-0" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-0_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-0_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-1_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-1_monitor_0 metal-3" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-2_monitor_0 metal-1" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-2_monitor_0 metal-2" [ style=bold color="green" fontcolor="black"]
 "storage-clone_confirmed-post_notify_stopped_0" -> "all_stopped" [ style = bold]
 "storage-clone_confirmed-post_notify_stopped_0" [ style=bold color="green" fontcolor="orange"]
 "storage-clone_confirmed-pre_notify_stop_0" -> "storage-clone_post_notify_stopped_0" [ style = bold]
diff --git a/pengine/test10/bundle-order-stop-clone.exp b/pengine/test10/bundle-order-stop-clone.exp
index e78e235..a1106aa 100644
--- a/pengine/test10/bundle-order-stop-clone.exp
+++ b/pengine/test10/bundle-order-stop-clone.exp
@@ -1,139 +1,139 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="156" operation="notify" operation_key="storage:0_pre_notify_stop_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="168" operation="notify" operation_key="storage:0_pre_notify_stop_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="storage" long-id="storage:0" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="storage:0 storage:1 storage:2" CRM_meta_notify_active_uname="metal-1 metal-2 metal-3" CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:3" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="storage:0" CRM_meta_notify_stop_uname="metal-1" CRM_meta_notify_type="pre" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="42" operation="notify" operation_key="storage-clone_pre_notify_stop_0"/>
+        <pseudo_event id="54" operation="notify" operation_key="storage-clone_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="29" operation="stop" operation_key="storage:0_stop_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="41" operation="stop" operation_key="storage:0_stop_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="storage" long-id="storage:0" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="storage:0 storage:1 storage:2" CRM_meta_notify_active_uname="metal-1 metal-2 metal-3" CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:3" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="storage:0" CRM_meta_notify_stop_uname="metal-1" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="40" operation="stop" operation_key="storage-clone_stop_0"/>
+        <pseudo_event id="52" operation="stop" operation_key="storage-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2" priority="1000000">
     <action_set>
-      <rsc_op id="158" operation="notify" operation_key="storage:1_post_notify_stop_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="170" operation="notify" operation_key="storage:1_post_notify_stop_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="storage" long-id="storage:1" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="storage:0 storage:1 storage:2" CRM_meta_notify_active_uname="metal-1 metal-2 metal-3" CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:3" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="storage:0" CRM_meta_notify_stop_uname="metal-1" CRM_meta_notify_type="post" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="44" operation="notify" operation_key="storage-clone_post_notify_stopped_0"/>
+        <pseudo_event id="56" operation="notify" operation_key="storage-clone_post_notify_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="157" operation="notify" operation_key="storage:1_pre_notify_stop_0" on_node="metal-2" on_node_uuid="2">
+      <rsc_op id="169" operation="notify" operation_key="storage:1_pre_notify_stop_0" on_node="metal-2" on_node_uuid="2">
         <primitive id="storage" long-id="storage:1" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="1" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="storage:0 storage:1 storage:2" CRM_meta_notify_active_uname="metal-1 metal-2 metal-3" CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:3" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="storage:0" CRM_meta_notify_stop_uname="metal-1" CRM_meta_notify_type="pre" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="42" operation="notify" operation_key="storage-clone_pre_notify_stop_0"/>
+        <pseudo_event id="54" operation="notify" operation_key="storage-clone_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="4" priority="1000000">
     <action_set>
-      <rsc_op id="160" operation="notify" operation_key="storage:2_post_notify_stop_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="172" operation="notify" operation_key="storage:2_post_notify_stop_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="storage" long-id="storage:2" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="storage:0 storage:1 storage:2" CRM_meta_notify_active_uname="metal-1 metal-2 metal-3" CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:3" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="storage:0" CRM_meta_notify_stop_uname="metal-1" CRM_meta_notify_type="post" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="44" operation="notify" operation_key="storage-clone_post_notify_stopped_0"/>
+        <pseudo_event id="56" operation="notify" operation_key="storage-clone_post_notify_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="5">
     <action_set>
-      <rsc_op id="159" operation="notify" operation_key="storage:2_pre_notify_stop_0" on_node="metal-3" on_node_uuid="3">
+      <rsc_op id="171" operation="notify" operation_key="storage:2_pre_notify_stop_0" on_node="metal-3" on_node_uuid="3">
         <primitive id="storage" long-id="storage:2" class="ocf" provider="heartbeat" type="Filesystem"/>
         <attributes CRM_meta_clone="2" CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_active_resource="storage:0 storage:1 storage:2" CRM_meta_notify_active_uname="metal-1 metal-2 metal-3" CRM_meta_notify_all_uname="galera-bundle-0 galera-bundle-1 galera-bundle-2 metal-1 metal-2 metal-3 rabbitmq-bundle-0 redis-bundle-0 redis-bundle-1 redis-bundle-2" CRM_meta_notify_available_uname="metal-2 metal-3 rabbitmq-bundle-0 metal-1" CRM_meta_notify_demote_resource=" " CRM_meta_notify_demote_uname=" " CRM_meta_notify_inactive_resource="storage:3" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_master_resource=" " CRM_meta_notify_master_uname=" " CRM_meta_notify_operation="stop" CRM_meta_notify_promote_resource=" " CRM_meta_notify_promote_uname=" " CRM_meta_notify_slave_resource=" " CRM_meta_notify_slave_uname=" " CRM_meta_notify_start_resource=" " CRM_meta_notify_start_uname=" " CRM_meta_notify_stop_resource="storage:0" CRM_meta_notify_stop_uname="metal-1" CRM_meta_notify_type="pre" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_timeout="20000"  device="nfs:/share/drbd_www/data/" directory="/data/www" fstype="nfs"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="42" operation="notify" operation_key="storage-clone_pre_notify_stop_0"/>
+        <pseudo_event id="54" operation="notify" operation_key="storage-clone_pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="6" priority="1000000">
     <action_set>
-      <pseudo_event id="45" operation="notified" operation_key="storage-clone_confirmed-post_notify_stopped_0">
+      <pseudo_event id="57" operation="notified" operation_key="storage-clone_confirmed-post_notify_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="confirmed-post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="44" operation="notify" operation_key="storage-clone_post_notify_stopped_0"/>
+        <pseudo_event id="56" operation="notify" operation_key="storage-clone_post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="158" operation="notify" operation_key="storage:1_post_notify_stop_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="170" operation="notify" operation_key="storage:1_post_notify_stop_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="160" operation="notify" operation_key="storage:2_post_notify_stop_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="172" operation="notify" operation_key="storage:2_post_notify_stop_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="7" priority="1000000">
     <action_set>
-      <pseudo_event id="44" operation="notify" operation_key="storage-clone_post_notify_stopped_0">
+      <pseudo_event id="56" operation="notify" operation_key="storage-clone_post_notify_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stopped" CRM_meta_notify_key_type="post" CRM_meta_notify_operation="stop" CRM_meta_notify_type="post" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="41" operation="stopped" operation_key="storage-clone_stopped_0"/>
+        <pseudo_event id="53" operation="stopped" operation_key="storage-clone_stopped_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="43" operation="notified" operation_key="storage-clone_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="55" operation="notified" operation_key="storage-clone_confirmed-pre_notify_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="8">
     <action_set>
-      <pseudo_event id="43" operation="notified" operation_key="storage-clone_confirmed-pre_notify_stop_0">
+      <pseudo_event id="55" operation="notified" operation_key="storage-clone_confirmed-pre_notify_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="confirmed-pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="42" operation="notify" operation_key="storage-clone_pre_notify_stop_0"/>
+        <pseudo_event id="54" operation="notify" operation_key="storage-clone_pre_notify_stop_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="156" operation="notify" operation_key="storage:0_pre_notify_stop_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="168" operation="notify" operation_key="storage:0_pre_notify_stop_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="157" operation="notify" operation_key="storage:1_pre_notify_stop_0" on_node="metal-2" on_node_uuid="2"/>
+        <rsc_op id="169" operation="notify" operation_key="storage:1_pre_notify_stop_0" on_node="metal-2" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="159" operation="notify" operation_key="storage:2_pre_notify_stop_0" on_node="metal-3" on_node_uuid="3"/>
+        <rsc_op id="171" operation="notify" operation_key="storage:2_pre_notify_stop_0" on_node="metal-3" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="9">
     <action_set>
-      <pseudo_event id="42" operation="notify" operation_key="storage-clone_pre_notify_stop_0">
+      <pseudo_event id="54" operation="notify" operation_key="storage-clone_pre_notify_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_notify_key_operation="stop" CRM_meta_notify_key_type="pre" CRM_meta_notify_operation="stop" CRM_meta_notify_type="pre" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
@@ -141,123 +141,123 @@
   </synapse>
   <synapse id="10" priority="1000000">
     <action_set>
-      <pseudo_event id="41" operation="stopped" operation_key="storage-clone_stopped_0">
+      <pseudo_event id="53" operation="stopped" operation_key="storage-clone_stopped_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="29" operation="stop" operation_key="storage:0_stop_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="41" operation="stop" operation_key="storage:0_stop_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="40" operation="stop" operation_key="storage-clone_stop_0"/>
+        <pseudo_event id="52" operation="stop" operation_key="storage-clone_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="11">
     <action_set>
-      <pseudo_event id="40" operation="stop" operation_key="storage-clone_stop_0">
+      <pseudo_event id="52" operation="stop" operation_key="storage-clone_stop_0">
         <attributes CRM_meta_clone_max="4" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_notify="true" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="43" operation="notified" operation_key="storage-clone_confirmed-pre_notify_stop_0"/>
+        <pseudo_event id="55" operation="notified" operation_key="storage-clone_confirmed-pre_notify_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="60" operation="stopped" operation_key="galera-bundle_stopped_0"/>
+        <pseudo_event id="72" operation="stopped" operation_key="galera-bundle_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="12">
     <action_set>
-      <rsc_op id="62" operation="stop" operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1">
+      <rsc_op id="74" operation="stop" operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1">
         <primitive id="galera" long-id="galera:0" class="ocf" provider="heartbeat" type="galera"/>
         <attributes CRM_meta_clone="0" CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_name="stop" CRM_meta_notify="false" CRM_meta_on_node="galera-bundle-0" CRM_meta_on_node_uuid="galera-bundle-0" CRM_meta_physical_host="metal-1" CRM_meta_timeout="120000" additional_parameters="--open-files-limit=16384" cluster_host_map="galera-bundle-0:metal"  enable_creation="true" wsrep_cluster_address="gcomm://metal"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="59" operation="stop" operation_key="galera-bundle_stop_0"/>
+        <pseudo_event id="71" operation="stop" operation_key="galera-bundle_stop_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="69" operation="stop" operation_key="galera-bundle-master_stop_0"/>
+        <pseudo_event id="81" operation="stop" operation_key="galera-bundle-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="13" priority="1000000">
     <action_set>
-      <pseudo_event id="70" operation="stopped" operation_key="galera-bundle-master_stopped_0">
+      <pseudo_event id="82" operation="stopped" operation_key="galera-bundle-master_stopped_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="62" operation="stop" operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
+        <rsc_op id="74" operation="stop" operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="69" operation="stop" operation_key="galera-bundle-master_stop_0"/>
+        <pseudo_event id="81" operation="stop" operation_key="galera-bundle-master_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="14">
     <action_set>
-      <pseudo_event id="69" operation="stop" operation_key="galera-bundle-master_stop_0">
+      <pseudo_event id="81" operation="stop" operation_key="galera-bundle-master_stop_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="59" operation="stop" operation_key="galera-bundle_stop_0"/>
+        <pseudo_event id="71" operation="stop" operation_key="galera-bundle_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="15" priority="1000000">
     <action_set>
-      <pseudo_event id="68" operation="running" operation_key="galera-bundle-master_running_0">
+      <pseudo_event id="80" operation="running" operation_key="galera-bundle-master_running_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="67" operation="start" operation_key="galera-bundle-master_start_0"/>
+        <pseudo_event id="79" operation="start" operation_key="galera-bundle-master_start_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="16">
     <action_set>
-      <pseudo_event id="67" operation="start" operation_key="galera-bundle-master_start_0">
+      <pseudo_event id="79" operation="start" operation_key="galera-bundle-master_start_0">
         <attributes CRM_meta_clone_max="3" CRM_meta_clone_node_max="1" CRM_meta_globally_unique="false" CRM_meta_master_max="3" CRM_meta_master_node_max="1" CRM_meta_notify="false" CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="57" operation="start" operation_key="galera-bundle_start_0"/>
+        <pseudo_event id="69" operation="start" operation_key="galera-bundle_start_0"/>
       </trigger>
       <trigger>
-        <pseudo_event id="70" operation="stopped" operation_key="galera-bundle-master_stopped_0"/>
+        <pseudo_event id="82" operation="stopped" operation_key="galera-bundle-master_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="17">
     <action_set>
-      <rsc_op id="46" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="58" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="galera-bundle-docker-0" class="ocf" provider="heartbeat" type="docker"/>
         <attributes CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" allow_pull="true"  force_kill="false" image="192.168.24.1:8787/tripleoupstream/centos-binary-mariadb:latest" monitor_cmd="/bin/true" mount_points="/var/log/pacemaker/bundles/galera-bundle-0" reuse="false" run_cmd="/bin/bash /usr/local/bin/kolla_start" run_opts=" --restart=no --net=host -e PCMK_remote_port=3123 -v /var/lib/kolla/config_files/mysql.json:/var/lib/kolla/config_files/config.json:ro -v /var/lib/config-data/mysql:/var/lib/kolla/config_files/src:ro -v /etc/hosts:/etc/hosts:ro -v /etc/localtime:/etc/localtime:ro -v /var/lib/mysql:/var/lib/mysql:rw -v /var/log/mariadb:/var/log/mariadb:rw -v /etc/pki/ca-trust/extracted:/etc/pki/ca-trust/extracted:ro -v /etc/pki/tls/certs/ca-bundle.crt:/etc/pki/tls/certs/ca-bundle.crt:ro -v /etc/pki/tls/certs/ca-bundle.trust.crt:/etc/pki/tls/certs/ca-bundle.trust.crt:ro -v /etc/pki/tls/cert.pem:/etc/pki/tls/cert.pem:ro -v /dev/log:/dev/log:rw -v /etc/pacemaker/authkey:/etc/pacemaker/authkey -v /var/log/pacemaker/bundles/galera-bundle-0:/var/log -p 3123:3123 --user=root --log-driver=journald -e KOLLA_CONFIG_STRATEGY=COPY_ALWAYS "/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="47" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="59" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="59" operation="stop" operation_key="galera-bundle_stop_0"/>
+        <pseudo_event id="71" operation="stop" operation_key="galera-bundle_stop_0"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="18">
     <action_set>
-      <rsc_op id="47" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="metal-1" on_node_uuid="1">
+      <rsc_op id="59" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="metal-1" on_node_uuid="1">
         <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
         <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000" addr="#uname"  port="3123"/>
         <downed>
@@ -267,58 +267,172 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="62" operation="stop" operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
+        <rsc_op id="33" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="metal-2" on_node_uuid="2"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="37" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="metal-3" on_node_uuid="3"/>
+      </trigger>
+      <trigger>
+        <rsc_op id="74" operation="stop" operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="19" priority="1000000">
+  <synapse id="19">
+    <action_set>
+      <rsc_op id="37" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="metal-3" on_node_uuid="3">
+        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="#uname"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="20">
+    <action_set>
+      <rsc_op id="33" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="metal-2" on_node_uuid="2">
+        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="#uname"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="21">
+    <action_set>
+      <rsc_op id="38" operation="monitor" operation_key="galera-bundle-1_monitor_0" on_node="metal-3" on_node_uuid="3">
+        <primitive id="galera-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-1" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-2"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="22">
+    <action_set>
+      <rsc_op id="29" operation="monitor" operation_key="galera-bundle-1_monitor_0" on_node="metal-1" on_node_uuid="1">
+        <primitive id="galera-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-1" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-2"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="23">
+    <action_set>
+      <rsc_op id="34" operation="monitor" operation_key="galera-bundle-2_monitor_0" on_node="metal-2" on_node_uuid="2">
+        <primitive id="galera-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-2" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-3"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="24">
+    <action_set>
+      <rsc_op id="30" operation="monitor" operation_key="galera-bundle-2_monitor_0" on_node="metal-1" on_node_uuid="1">
+        <primitive id="galera-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-2" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-3"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="25">
+    <action_set>
+      <rsc_op id="39" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="metal-3" on_node_uuid="3">
+        <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-1"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="26">
+    <action_set>
+      <rsc_op id="35" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="metal-2" on_node_uuid="2">
+        <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-1"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="27">
+    <action_set>
+      <rsc_op id="40" operation="monitor" operation_key="redis-bundle-1_monitor_0" on_node="metal-3" on_node_uuid="3">
+        <primitive id="redis-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-1" CRM_meta_on_node="metal-3" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-2"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="28">
     <action_set>
-      <pseudo_event id="60" operation="stopped" operation_key="galera-bundle_stopped_0">
+      <rsc_op id="31" operation="monitor" operation_key="redis-bundle-1_monitor_0" on_node="metal-1" on_node_uuid="1">
+        <primitive id="redis-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-1" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-2"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="29">
+    <action_set>
+      <rsc_op id="36" operation="monitor" operation_key="redis-bundle-2_monitor_0" on_node="metal-2" on_node_uuid="2">
+        <primitive id="redis-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-2" CRM_meta_on_node="metal-2" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-3"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="30">
+    <action_set>
+      <rsc_op id="32" operation="monitor" operation_key="redis-bundle-2_monitor_0" on_node="metal-1" on_node_uuid="1">
+        <primitive id="redis-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-2" CRM_meta_on_node="metal-1" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="metal-3"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="31" priority="1000000">
+    <action_set>
+      <pseudo_event id="72" operation="stopped" operation_key="galera-bundle_stopped_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="46" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="58" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="70" operation="stopped" operation_key="galera-bundle-master_stopped_0"/>
+        <pseudo_event id="82" operation="stopped" operation_key="galera-bundle-master_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="20">
+  <synapse id="32">
     <action_set>
-      <pseudo_event id="59" operation="stop" operation_key="galera-bundle_stop_0">
+      <pseudo_event id="71" operation="stop" operation_key="galera-bundle_stop_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs/>
   </synapse>
-  <synapse id="21" priority="1000000">
+  <synapse id="33" priority="1000000">
     <action_set>
-      <pseudo_event id="58" operation="running" operation_key="galera-bundle_running_0">
+      <pseudo_event id="70" operation="running" operation_key="galera-bundle_running_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="68" operation="running" operation_key="galera-bundle-master_running_0"/>
+        <pseudo_event id="80" operation="running" operation_key="galera-bundle-master_running_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="22">
+  <synapse id="34">
     <action_set>
-      <pseudo_event id="57" operation="start" operation_key="galera-bundle_start_0">
+      <pseudo_event id="69" operation="start" operation_key="galera-bundle_start_0">
         <attributes CRM_meta_timeout="20000" />
       </pseudo_event>
     </action_set>
     <inputs>
       <trigger>
-        <pseudo_event id="60" operation="stopped" operation_key="galera-bundle_stopped_0"/>
+        <pseudo_event id="72" operation="stopped" operation_key="galera-bundle_stopped_0"/>
       </trigger>
     </inputs>
   </synapse>
-  <synapse id="23">
+  <synapse id="35">
     <action_set>
       <pseudo_event id="28" operation="all_stopped" operation_key="all_stopped">
         <attributes />
@@ -326,19 +440,19 @@
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="29" operation="stop" operation_key="storage:0_stop_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="41" operation="stop" operation_key="storage:0_stop_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="45" operation="notified" operation_key="storage-clone_confirmed-post_notify_stopped_0"/>
+        <pseudo_event id="57" operation="notified" operation_key="storage-clone_confirmed-post_notify_stopped_0"/>
       </trigger>
       <trigger>
-        <rsc_op id="46" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="58" operation="stop" operation_key="galera-bundle-docker-0_stop_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="47" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="metal-1" on_node_uuid="1"/>
+        <rsc_op id="59" operation="stop" operation_key="galera-bundle-0_stop_0" on_node="metal-1" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="62" operation="stop" operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
+        <rsc_op id="74" operation="stop" operation_key="galera:0_stop_0" on_node="galera-bundle-0" on_node_uuid="galera-bundle-0" router_node="metal-1"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/bundle-order-stop-clone.summary b/pengine/test10/bundle-order-stop-clone.summary
index 70e0f21..d988c06 100644
--- a/pengine/test10/bundle-order-stop-clone.summary
+++ b/pengine/test10/bundle-order-stop-clone.summary
@@ -28,6 +28,18 @@ Transition Summary:
 
 Executing cluster transition:
  * Pseudo action:   storage-clone_pre_notify_stop_0
+ * Resource action: galera-bundle-0 monitor on metal-3
+ * Resource action: galera-bundle-0 monitor on metal-2
+ * Resource action: galera-bundle-1 monitor on metal-3
+ * Resource action: galera-bundle-1 monitor on metal-1
+ * Resource action: galera-bundle-2 monitor on metal-2
+ * Resource action: galera-bundle-2 monitor on metal-1
+ * Resource action: redis-bundle-0  monitor on metal-3
+ * Resource action: redis-bundle-0  monitor on metal-2
+ * Resource action: redis-bundle-1  monitor on metal-3
+ * Resource action: redis-bundle-1  monitor on metal-1
+ * Resource action: redis-bundle-2  monitor on metal-2
+ * Resource action: redis-bundle-2  monitor on metal-1
  * Pseudo action:   galera-bundle_stop_0
  * Resource action: storage:0       notify on metal-1
  * Resource action: storage:1       notify on metal-2
diff --git a/pengine/test10/remote-fence-unclean-3.dot b/pengine/test10/remote-fence-unclean-3.dot
index 14adaef..dfee1d9 100644
--- a/pengine/test10/remote-fence-unclean-3.dot
+++ b/pengine/test10/remote-fence-unclean-3.dot
@@ -10,8 +9,26 @@ digraph "g" {
 "fence1_monitor_60000 overcloud-controller-0" [ style=bold color="green" fontcolor="black"]
 "fence1_start_0 overcloud-controller-0" -> "fence1_monitor_60000 overcloud-controller-0" [ style = bold]
 "fence1_start_0 overcloud-controller-0" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-0_monitor_0 overcloud-controller-1" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-0_monitor_0 overcloud-controller-2" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-1_monitor_0 overcloud-controller-0" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-1_monitor_0 overcloud-controller-2" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-2_monitor_0 overcloud-controller-0" [ style=bold color="green" fontcolor="black"]
+"galera-bundle-2_monitor_0 overcloud-controller-1" [ style=bold color="green" fontcolor="black"]
 "overcloud-novacompute-0_stop_0 overcloud-controller-0" -> "all_stopped" [ style = bold]
 "overcloud-novacompute-0_stop_0 overcloud-controller-0" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-0_monitor_0 overcloud-controller-1" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-0_monitor_0 overcloud-controller-2" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-1_monitor_0 overcloud-controller-0" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-1_monitor_0 overcloud-controller-2" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-2_monitor_0 overcloud-controller-0" [ style=bold color="green" fontcolor="black"]
+"rabbitmq-bundle-2_monitor_0 overcloud-controller-1" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-0_monitor_0 overcloud-controller-1" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-0_monitor_0 overcloud-controller-2" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-1_monitor_0 overcloud-controller-0" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-1_monitor_0 overcloud-controller-2" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-2_monitor_0 overcloud-controller-0" [ style=bold color="green" fontcolor="black"]
+"redis-bundle-2_monitor_0 overcloud-controller-1" [ style=bold color="green" fontcolor="black"]
 "stonith 'reboot' overcloud-novacompute-0" -> "stonith_complete" [ style = bold]
 "stonith 'reboot' overcloud-novacompute-0" [ style=bold color="green" fontcolor="black"]
 "stonith_complete" -> "all_stopped" [ style = bold]
diff --git a/pengine/test10/remote-fence-unclean-3.exp b/pengine/test10/remote-fence-unclean-3.exp
index 64e5a62..76e5e89 100644
--- a/pengine/test10/remote-fence-unclean-3.exp
+++ b/pengine/test10/remote-fence-unclean-3.exp
@@ -1,20 +1,20 @@
 <transition_graph cluster-delay="60s" stonith-timeout="60s" failed-stop-offset="INFINITY" failed-start-offset="INFINITY"  transition_id="0">
   <synapse id="0">
     <action_set>
-      <rsc_op id="48" operation="monitor" operation_key="fence1_monitor_60000" on_node="overcloud-controller-0" on_node_uuid="1">
+      <rsc_op id="66" operation="monitor" operation_key="fence1_monitor_60000" on_node="overcloud-controller-0" on_node_uuid="1">
         <primitive id="fence1" class="stonith" type="fence_xvm"/>
         <attributes CRM_meta_interval="60000" CRM_meta_name="monitor" CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  multicast_address="225.0.0.2"/>
       </rsc_op>
     </action_set>
     <inputs>
       <trigger>
-        <rsc_op id="47" operation="start" operation_key="fence1_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
+        <rsc_op id="65" operation="start" operation_key="fence1_start_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="1">
     <action_set>
-      <rsc_op id="47" operation="start" operation_key="fence1_start_0" on_node="overcloud-controller-0" on_node_uuid="1">
+      <rsc_op id="65" operation="start" operation_key="fence1_start_0" on_node="overcloud-controller-0" on_node_uuid="1">
         <primitive id="fence1" class="stonith" type="fence_xvm"/>
         <attributes CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_timeout="20000"  multicast_address="225.0.0.2"/>
       </rsc_op>
@@ -27,16 +27,16 @@
         <rsc_op id="43" operation="monitor" operation_key="fence1_monitor_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <rsc_op id="44" operation="monitor" operation_key="fence1_monitor_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
+        <rsc_op id="50" operation="monitor" operation_key="fence1_monitor_0" on_node="overcloud-controller-1" on_node_uuid="2"/>
       </trigger>
       <trigger>
-        <rsc_op id="45" operation="monitor" operation_key="fence1_monitor_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
+        <rsc_op id="57" operation="monitor" operation_key="fence1_monitor_0" on_node="overcloud-controller-2" on_node_uuid="3"/>
       </trigger>
     </inputs>
   </synapse>
   <synapse id="2">
     <action_set>
-      <rsc_op id="45" operation="monitor" operation_key="fence1_monitor_0" on_node="overcloud-controller-2" on_node_uuid="3">
+      <rsc_op id="57" operation="monitor" operation_key="fence1_monitor_0" on_node="overcloud-controller-2" on_node_uuid="3">
         <primitive id="fence1" class="stonith" type="fence_xvm"/>
         <attributes CRM_meta_on_node="overcloud-controller-2" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  multicast_address="225.0.0.2"/>
       </rsc_op>
@@ -45,7 +45,7 @@
   </synapse>
   <synapse id="3">
     <action_set>
-      <rsc_op id="44" operation="monitor" operation_key="fence1_monitor_0" on_node="overcloud-controller-1" on_node_uuid="2">
+      <rsc_op id="50" operation="monitor" operation_key="fence1_monitor_0" on_node="overcloud-controller-1" on_node_uuid="2">
         <primitive id="fence1" class="stonith" type="fence_xvm"/>
         <attributes CRM_meta_on_node="overcloud-controller-1" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000"  multicast_address="225.0.0.2"/>
       </rsc_op>
@@ -72,29 +72,191 @@
   </synapse>
   <synapse id="6">
     <action_set>
-      <pseudo_event id="209" operation="stonith_complete" operation_key="stonith_complete">
-        <attributes />
-      </pseudo_event>
-    </action_set>
-    <inputs>
-      <trigger>
-        <crm_event id="46" operation="stonith" operation_key="stonith-overcloud-novacompute-0-reboot" on_node="overcloud-novacompute-0" on_node_uuid="overcloud-novacompute-0"/>
-      </trigger>
-    </inputs>
-  </synapse>
-  <synapse id="7">
-    <action_set>
-      <crm_event id="46" operation="stonith" operation_key="stonith-overcloud-novacompute-0-reboot" on_node="overcloud-novacompute-0" on_node_uuid="overcloud-novacompute-0">
-        <attributes CRM_meta_compute_role="true" CRM_meta_on_node="overcloud-novacompute-0" CRM_meta_on_node_uuid="overcloud-novacompute-0" CRM_meta_stonith_action="reboot" />
-        <downed>
-          <node id="overcloud-novacompute-0"/>
-        </downed>
-      </crm_event>
-    </action_set>
-    <inputs/>
-  </synapse>
-  <synapse id="8">
-    <action_set>
+      <rsc_op id="58" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="overcloud-controller-2" on_node_uuid="3">
+        <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_on_node="overcloud-controller-2" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-controller-0"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="7">
+    <action_set>
+      <rsc_op id="51" operation="monitor" operation_key="rabbitmq-bundle-0_monitor_0" on_node="overcloud-controller-1" on_node_uuid="2">
+        <primitive id="rabbitmq-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-0" CRM_meta_on_node="overcloud-controller-1" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-controller-0"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="8">
+    <action_set>
+      <rsc_op id="59" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_0" on_node="overcloud-controller-2" on_node_uuid="3">
+        <primitive id="rabbitmq-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-1" CRM_meta_on_node="overcloud-controller-2" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-controller-1"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="9">
+    <action_set>
+      <rsc_op id="44" operation="monitor" operation_key="rabbitmq-bundle-1_monitor_0" on_node="overcloud-controller-0" on_node_uuid="1">
+        <primitive id="rabbitmq-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-1" CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-controller-1"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="10">
+    <action_set>
+      <rsc_op id="52" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_0" on_node="overcloud-controller-1" on_node_uuid="2">
+        <primitive id="rabbitmq-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-2" CRM_meta_on_node="overcloud-controller-1" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-controller-2"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="11">
+    <action_set>
+      <rsc_op id="45" operation="monitor" operation_key="rabbitmq-bundle-2_monitor_0" on_node="overcloud-controller-0" on_node_uuid="1">
+        <primitive id="rabbitmq-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="rabbitmq-bundle-docker-2" CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-controller-2"  port="3121"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="12">
+    <action_set>
+      <rsc_op id="60" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="overcloud-controller-2" on_node_uuid="3">
+        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="overcloud-controller-2" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-controller-0"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="13">
+    <action_set>
+      <rsc_op id="53" operation="monitor" operation_key="galera-bundle-0_monitor_0" on_node="overcloud-controller-1" on_node_uuid="2">
+        <primitive id="galera-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-0" CRM_meta_on_node="overcloud-controller-1" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-controller-0"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="14">
+    <action_set>
+      <rsc_op id="61" operation="monitor" operation_key="galera-bundle-1_monitor_0" on_node="overcloud-controller-2" on_node_uuid="3">
+        <primitive id="galera-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-1" CRM_meta_on_node="overcloud-controller-2" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-controller-1"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="15">
+    <action_set>
+      <rsc_op id="46" operation="monitor" operation_key="galera-bundle-1_monitor_0" on_node="overcloud-controller-0" on_node_uuid="1">
+        <primitive id="galera-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-1" CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-controller-1"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="16">
+    <action_set>
+      <rsc_op id="54" operation="monitor" operation_key="galera-bundle-2_monitor_0" on_node="overcloud-controller-1" on_node_uuid="2">
+        <primitive id="galera-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-2" CRM_meta_on_node="overcloud-controller-1" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-controller-2"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="17">
+    <action_set>
+      <rsc_op id="47" operation="monitor" operation_key="galera-bundle-2_monitor_0" on_node="overcloud-controller-0" on_node_uuid="1">
+        <primitive id="galera-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="galera-bundle-docker-2" CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-controller-2"  port="3123"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="18">
+    <action_set>
+      <rsc_op id="62" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="overcloud-controller-2" on_node_uuid="3">
+        <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="overcloud-controller-2" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-controller-0"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="19">
+    <action_set>
+      <rsc_op id="55" operation="monitor" operation_key="redis-bundle-0_monitor_0" on_node="overcloud-controller-1" on_node_uuid="2">
+        <primitive id="redis-bundle-0" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-0" CRM_meta_on_node="overcloud-controller-1" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-controller-0"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="20">
+    <action_set>
+      <rsc_op id="63" operation="monitor" operation_key="redis-bundle-1_monitor_0" on_node="overcloud-controller-2" on_node_uuid="3">
+        <primitive id="redis-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-1" CRM_meta_on_node="overcloud-controller-2" CRM_meta_on_node_uuid="3" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-controller-1"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="21">
+    <action_set>
+      <rsc_op id="48" operation="monitor" operation_key="redis-bundle-1_monitor_0" on_node="overcloud-controller-0" on_node_uuid="1">
+        <primitive id="redis-bundle-1" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-1" CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-controller-1"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="22">
+    <action_set>
+      <rsc_op id="56" operation="monitor" operation_key="redis-bundle-2_monitor_0" on_node="overcloud-controller-1" on_node_uuid="2">
+        <primitive id="redis-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-2" CRM_meta_on_node="overcloud-controller-1" CRM_meta_on_node_uuid="2" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-controller-2"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="23">
+    <action_set>
+      <rsc_op id="49" operation="monitor" operation_key="redis-bundle-2_monitor_0" on_node="overcloud-controller-0" on_node_uuid="1">
+        <primitive id="redis-bundle-2" class="ocf" provider="pacemaker" type="remote"/>
+        <attributes CRM_meta_container="redis-bundle-docker-2" CRM_meta_on_node="overcloud-controller-0" CRM_meta_on_node_uuid="1" CRM_meta_op_target_rc="7" CRM_meta_timeout="20000" addr="overcloud-controller-2"  port="3124"/>
+      </rsc_op>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="24">
+    <action_set>
+      <pseudo_event id="227" operation="stonith_complete" operation_key="stonith_complete">
+        <attributes />
+      </pseudo_event>
+    </action_set>
+    <inputs>
+      <trigger>
+        <crm_event id="64" operation="stonith" operation_key="stonith-overcloud-novacompute-0-reboot" on_node="overcloud-novacompute-0" on_node_uuid="overcloud-novacompute-0"/>
+      </trigger>
+    </inputs>
+  </synapse>
+  <synapse id="25">
+    <action_set>
+      <crm_event id="64" operation="stonith" operation_key="stonith-overcloud-novacompute-0-reboot" on_node="overcloud-novacompute-0" on_node_uuid="overcloud-novacompute-0">
+        <attributes CRM_meta_compute_role="true" CRM_meta_on_node="overcloud-novacompute-0" CRM_meta_on_node_uuid="overcloud-novacompute-0" CRM_meta_stonith_action="reboot" />
+        <downed>
+          <node id="overcloud-novacompute-0"/>
+        </downed>
+      </crm_event>
+    </action_set>
+    <inputs/>
+  </synapse>
+  <synapse id="26">
+    <action_set>
       <pseudo_event id="42" operation="all_stopped" operation_key="all_stopped">
         <attributes />
       </pseudo_event>
@@ -246,7 +269,7 @@
         <rsc_op id="30" operation="stop" operation_key="overcloud-novacompute-0_stop_0" on_node="overcloud-controller-0" on_node_uuid="1"/>
       </trigger>
       <trigger>
-        <pseudo_event id="209" operation="stonith_complete" operation_key="stonith_complete"/>
+        <pseudo_event id="227" operation="stonith_complete" operation_key="stonith_complete"/>
       </trigger>
     </inputs>
   </synapse>
diff --git a/pengine/test10/remote-fence-unclean-3.summary b/pengine/test10/remote-fence-unclean-3.summary
index ec54d8e..7f2b2d3 100644
--- a/pengine/test10/remote-fence-unclean-3.summary
+++ b/pengine/test10/remote-fence-unclean-3.summary
@@ -43,6 +43,24 @@ Executing cluster transition:
  * Resource action: fence1          monitor on overcloud-controller-1
  * Resource action: fence1          monitor on overcloud-controller-0
  * Resource action: overcloud-novacompute-0 stop on overcloud-controller-0
+ * Resource action: rabbitmq-bundle-0 monitor on overcloud-controller-2
+ * Resource action: rabbitmq-bundle-0 monitor on overcloud-controller-1
+ * Resource action: rabbitmq-bundle-1 monitor on overcloud-controller-2
+ * Resource action: rabbitmq-bundle-1 monitor on overcloud-controller-0
+ * Resource action: rabbitmq-bundle-2 monitor on overcloud-controller-1
+ * Resource action: rabbitmq-bundle-2 monitor on overcloud-controller-0
+ * Resource action: galera-bundle-0 monitor on overcloud-controller-2
+ * Resource action: galera-bundle-0 monitor on overcloud-controller-1
+ * Resource action: galera-bundle-1 monitor on overcloud-controller-2
+ * Resource action: galera-bundle-1 monitor on overcloud-controller-0
+ * Resource action: galera-bundle-2 monitor on overcloud-controller-1
+ * Resource action: galera-bundle-2 monitor on overcloud-controller-0
+ * Resource action: redis-bundle-0  monitor on overcloud-controller-2
+ * Resource action: redis-bundle-0  monitor on overcloud-controller-1
+ * Resource action: redis-bundle-1  monitor on overcloud-controller-2
+ * Resource action: redis-bundle-1  monitor on overcloud-controller-0
+ * Resource action: redis-bundle-2  monitor on overcloud-controller-1
+ * Resource action: redis-bundle-2  monitor on overcloud-controller-0
  * Fencing overcloud-novacompute-0 (reboot)
  * Pseudo action:   stonith_complete
  * Pseudo action:   all_stopped
-- 
1.8.3.1


From 140a37e6eaa35a4248abe254641965410e2f833d Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Fri, 22 Sep 2017 12:36:01 +1000
Subject: [PATCH 20/21] crm_resource: Now that we only clean up on known nodes
 we dont need this optimisation

---
 tools/crm_resource_runtime.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/tools/crm_resource_runtime.c b/tools/crm_resource_runtime.c
index 210ea7d..c280c59 100644
--- a/tools/crm_resource_runtime.c
+++ b/tools/crm_resource_runtime.c
@@ -619,7 +619,7 @@ cli_resource_delete(crm_ipc_t *crmd_channel, const char *host_uname,
             resource_t *child = (resource_t *) lpc->data;
 
             rc = cli_resource_delete(cib_conn, crmd_channel, host_uname, child, data_set);
-            if(rc != pcmk_ok || (pe_rsc_is_clone(rsc) && is_not_set(rsc->flags, pe_rsc_unique))) {
+            if(rc != pcmk_ok) {
                 return rc;
             }
         }
-- 
1.8.3.1


From f3e82cec10999738437e566e5092513de528c6e3 Mon Sep 17 00:00:00 2001
From: Andrew Beekhof <andrew@beekhof.net>
Date: Tue, 26 Sep 2017 22:14:20 +1000
Subject: [PATCH 21/21] Log: Reduce verbosity of developer logging

---
 lib/common/strings.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/lib/common/strings.c b/lib/common/strings.c
index 5856c16..573a14b 100644
--- a/lib/common/strings.c
+++ b/lib/common/strings.c
@@ -415,12 +415,12 @@ crm_compress_string(const char *data, int length, int max, char **result, unsign
 #ifdef CLOCK_MONOTONIC
     clock_gettime(CLOCK_MONOTONIC, &after_t);
 
-    crm_info("Compressed %d bytes into %d (ratio %d:1) in %dms",
+    crm_trace("Compressed %d bytes into %d (ratio %d:1) in %ldms",
              length, *result_len, length / (*result_len),
              (after_t.tv_sec - before_t.tv_sec) * 1000 + (after_t.tv_nsec -
                                                           before_t.tv_nsec) / 1000000);
 #else
-    crm_info("Compressed %d bytes into %d (ratio %d:1)",
+    crm_trace("Compressed %d bytes into %d (ratio %d:1)",
              length, *result_len, length / (*result_len));
 #endif
 
-- 
1.8.3.1

